{"version":3,"file":"static/js/44.c1081374.chunk.js","mappings":"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","sources":["pages/government/SubmitReport.js","pages/government/ReportStatus.js","pages/government/ReportResults.js","pages/government/PoliceAdminSettings.js","pages/government/PoliceStation.js"],"sourcesContent":["// src/SubmitReport.js\r\nimport React, { useState } from \"react\";\r\n\r\nconst SubmitReport = ({\r\n  onSubmitReport,\r\n  reportReasons,\r\n  users,\r\n  currentUser,\r\n}) => {\r\n  const [reportData, setReportData] = useState({\r\n    reportedUserId: \"\",\r\n    reason: \"\",\r\n    details: \"\",\r\n  });\r\n\r\n  // 법안 기반 신고 사유와 일반 신고 사유 분리\r\n  const lawReasons = reportReasons.filter((reason) => reason.isLaw);\r\n  const standardReasons = reportReasons.filter((reason) => !reason.isLaw);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setReportData({ ...reportData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!reportData.reportedUserId || !reportData.reason) {\r\n      alert(\"신고 대상과 사유를 모두 선택해주세요.\");\r\n      return;\r\n    }\r\n    onSubmitReport(reportData);\r\n    // 폼 초기화\r\n    setReportData({\r\n      reportedUserId: \"\",\r\n      reason: \"\",\r\n      details: \"\",\r\n    });\r\n  };\r\n\r\n  // 선택된 신고 사유에 따른 기본 벌금 조회\r\n  const getDefaultAmount = () => {\r\n    const selectedReason = reportReasons.find(\r\n      (r) => r.reason === reportData.reason\r\n    );\r\n    return selectedReason ? selectedReason.amount : 0;\r\n  };\r\n\r\n  // 신고 설명 조회\r\n  const getReasonDescription = () => {\r\n    const selectedReason = reportReasons.find(\r\n      (r) => r.reason === reportData.reason\r\n    );\r\n    return selectedReason?.description || \"\";\r\n  };\r\n\r\n  if (!currentUser) {\r\n    return (\r\n      <p className=\"login-required-message\">신고하려면 로그인이 필요합니다.</p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"submit-report-container\">\r\n      <h2 className=\"section-title\">신고 제출</h2>\r\n      <form onSubmit={handleSubmit} className=\"report-form\">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"reportedUserId\">신고 대상</label>\r\n          <select\r\n            id=\"reportedUserId\"\r\n            name=\"reportedUserId\"\r\n            value={reportData.reportedUserId}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"form-select\"\r\n          >\r\n            <option value=\"\">신고할 사람을 선택하세요</option>\r\n            {users.map((user) => (\r\n              <option key={user.id} value={user.id}>\r\n                {user.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"reason\">신고 사유</label>\r\n          <select\r\n            id=\"reason\"\r\n            name=\"reason\"\r\n            value={reportData.reason}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"form-select\"\r\n          >\r\n            <option value=\"\">사유를 선택하세요</option>\r\n\r\n            {/* 법안 기반 신고 사유 그룹 */}\r\n            {lawReasons.length > 0 && (\r\n              <>\r\n                <option disabled className=\"reason-group-heading\">\r\n                  --- 법안 기반 신고 사유 ---\r\n                </option>\r\n                {lawReasons.map((reason, index) => (\r\n                  <option\r\n                    key={`law-${index}`}\r\n                    value={reason.reason}\r\n                    className=\"law-reason-option\"\r\n                  >\r\n                    {reason.reason} (벌금: {reason.amount.toLocaleString()}원)\r\n                  </option>\r\n                ))}\r\n              </>\r\n            )}\r\n\r\n            {/* 일반 신고 사유 그룹 */}\r\n            <option disabled className=\"reason-group-heading\">\r\n              --- 일반 신고 사유 ---\r\n            </option>\r\n            {standardReasons.map((reason, index) => (\r\n              <option key={`standard-${index}`} value={reason.reason}>\r\n                {reason.reason}{\" \"}\r\n                {reason.amount > 0\r\n                  ? `(벌금: ${reason.amount.toLocaleString()}원)`\r\n                  : \"\"}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* 선택된 신고 사유에 설명이 있으면 표시 */}\r\n        {reportData.reason && getReasonDescription() && (\r\n          <div className=\"reason-description-box\">\r\n            <h3>법안 설명</h3>\r\n            <p>{getReasonDescription()}</p>\r\n            {getDefaultAmount() > 0 && (\r\n              <p className=\"default-fine\">\r\n                기본 벌금: {getDefaultAmount().toLocaleString()}원\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"details\">상세 내용 (선택사항)</label>\r\n          <textarea\r\n            id=\"details\"\r\n            name=\"details\"\r\n            value={reportData.details}\r\n            onChange={handleChange}\r\n            className=\"form-textarea\"\r\n            placeholder=\"신고에 대한 상세 내용을 작성하세요 (선택사항)\"\r\n            rows=\"4\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-actions\">\r\n          <button type=\"submit\" className=\"submit-button\">\r\n            신고 제출\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubmitReport;\r\n","// src/ReportStatus.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst ReportStatus = ({\r\n  reports,\r\n  onProcessReport,\r\n  onSettlement,\r\n  reportReasons,\r\n  formatDate,\r\n  onAcceptReport,\r\n  onDismissReport,\r\n  isAdminView,\r\n}) => {\r\n  // 탭 상태 추가\r\n  const [activeTab, setActiveTab] = useState(\"submitted\"); // \"submitted\" 또는 \"accepted\"\r\n\r\n  // 처리 모달 상태 (벌금 처리 전용)\r\n  const [showProcessModal, setShowProcessModal] = useState(false);\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [processingAmount, setProcessingAmount] = useState(\"\");\r\n  const [processingReason, setProcessingReason] = useState(\"\");\r\n\r\n  // 처리 모달 열기\r\n  const openProcessModal = (report) => {\r\n    // 먼저 report 객체가 유효한지 확인\r\n    if (!report) {\r\n      return;\r\n    }\r\n\r\n    // 기본값 설정\r\n    let defaultAmount = \"\";\r\n    if (Array.isArray(reportReasons) && reportReasons.length > 0) {\r\n      const reasonInfo = reportReasons.find((r) => r.reason === report.reason);\r\n      if (reasonInfo && typeof reasonInfo.amount === 'number') {\r\n        defaultAmount = reasonInfo.amount.toString();\r\n      }\r\n    }\r\n\r\n    // 상태 업데이트\r\n    setSelectedReport(report);\r\n    setProcessingAmount(defaultAmount);\r\n    setProcessingReason(\"\");\r\n    setShowProcessModal(true);\r\n  };\r\n\r\n  // 합의 처리 버튼 핸들러\r\n  const handleSettlementClick = (report) => {\r\n\r\n    if (!onSettlement) {\r\n      logger.error(\"onSettlement 함수가 전달되지 않았습니다\");\r\n      alert(\"합의 처리 기능을 사용할 수 없습니다. 관리자에게 문의하세요.\");\r\n      return;\r\n    }\r\n\r\n    if (!report) {\r\n      logger.error(\"handleSettlementClick: report가 없습니다\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      onSettlement(report);\r\n    } catch (error) {\r\n      logger.error(\"합의 처리 중 오류:\", error);\r\n      alert(\"합의 처리 중 오류가 발생했습니다.\");\r\n    }\r\n  };\r\n\r\n  // 신고 사유의 기본 금액 조회\r\n  const getDefaultAmount = (reason) => {\r\n    if (!Array.isArray(reportReasons)) return null;\r\n    const reasonInfo = reportReasons.find((r) => r.reason === reason);\r\n    return reasonInfo ? reasonInfo.amount : null;\r\n  };\r\n\r\n  // 모달 필드 변경 핸들러\r\n  const handleProcessingAmountChange = (e) => {\r\n    const value = e.target.value.replace(/[^0-9]/g, \"\");\r\n    setProcessingAmount(value);\r\n  };\r\n\r\n  // 처리 제출 핸들러\r\n  const handleProcessSubmit = () => {\r\n    if (!selectedReport) {\r\n      return;\r\n    }\r\n\r\n    if (!onProcessReport) {\r\n      alert(\"벌금 처리 기능을 사용할 수 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    const amount = processingAmount ? parseInt(processingAmount, 10) : 0;\r\n\r\n    try {\r\n      onProcessReport(selectedReport.id, amount, processingReason);\r\n      closeModals();\r\n    } catch (error) {\r\n      logger.error(\"벌금 처리 중 오류:\", error);\r\n      alert(\"벌금 처리 중 오류가 발생했습니다.\");\r\n    }\r\n  };\r\n\r\n  // 모달 닫기\r\n  const closeModals = () => {\r\n    setShowProcessModal(false);\r\n    setSelectedReport(null);\r\n    setProcessingAmount(\"\");\r\n    setProcessingReason(\"\");\r\n  };\r\n\r\n  // 필터링: '접수됨' 상태와 '제출됨' 상태 분리\r\n  const acceptedReports = reports.filter((r) => r.status === \"accepted\");\r\n  const submittedReports = reports.filter((r) => r.status === \"submitted\");\r\n\r\n  // 법안 이름 강조 함수\r\n  const highlightLawName = (reason) => {\r\n    if (reason && reason.startsWith(\"[법안]\")) {\r\n      return <span className=\"law-reason-highlight\">{reason}</span>;\r\n    }\r\n    return reason;\r\n  };\r\n\r\n  // 벌금 처리 모달 컴포넌트 (Portal 대신 직접 렌더링)\r\n  const ProcessReportModal = React.useMemo(() => {\r\n    if (!showProcessModal || !selectedReport) return null;\r\n\r\n    return () => (\r\n      <div\r\n        className=\"process-modal-overlay\"\r\n        onClick={(e) => {\r\n          if (e.target.className === \"process-modal-overlay\") {\r\n            closeModals();\r\n          }\r\n        }}\r\n      >\r\n        <div\r\n          className=\"process-modal-container\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <div className=\"process-modal-header\">\r\n            <h2>\r\n              벌금 처리 (사건번호: {selectedReport?.id?.slice(-6) || '없음'})\r\n            </h2>\r\n            <button\r\n              className=\"close-button\"\r\n              onClick={closeModals}\r\n            >\r\n              &times;\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"process-modal-content\">\r\n            <div className=\"report-summary\">\r\n              <p>\r\n                <strong>사건번호:</strong> {selectedReport?.id?.slice(-6) || '없음'}\r\n              </p>\r\n              <p>\r\n                <strong>대상자:</strong> {selectedReport?.reportedUserName || '알 수 없음'}\r\n              </p>\r\n              <p className=\"report-reason\">\r\n                <strong>신고 사유:</strong> {selectedReport?.reason || '알 수 없음'}\r\n              </p>\r\n              {selectedReport?.description && (\r\n                <p className=\"law-description\">\r\n                  <strong>설명:</strong> {selectedReport.description}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"processingAmount\">\r\n                벌금 금액 (원)\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"processingAmount\"\r\n                value={processingAmount}\r\n                onChange={handleProcessingAmountChange}\r\n                placeholder=\"벌금 금액을 입력하세요 (0원은 경고)\"\r\n                className=\"form-input\"\r\n              />\r\n              {getDefaultAmount(selectedReport?.reason) !== null && (\r\n                <p className=\"form-hint\">\r\n                  기본 금액: {getDefaultAmount(selectedReport?.reason)?.toLocaleString()}원\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"processingReason\">\r\n                처리 사유 (선택)\r\n              </label>\r\n              <textarea\r\n                id=\"processingReason\"\r\n                value={processingReason}\r\n                onChange={(e) => setProcessingReason(e.target.value)}\r\n                placeholder=\"처리 사유를 입력하세요 (선택사항)\"\r\n                className=\"form-textarea\"\r\n                rows=\"3\"\r\n              />\r\n            </div>\r\n\r\n            {reportReasons && reportReasons.length > 0 && (\r\n              <div className=\"quick-reasons-container\">\r\n                <p className=\"quick-reasons-label\">빠른 선택:</p>\r\n                <div className=\"quick-reasons-buttons\">\r\n                  {reportReasons.map((reasonItem, index) => (\r\n                    <button\r\n                      key={index}\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setProcessingAmount(reasonItem.amount.toString());\r\n                        setProcessingReason(reasonItem.reason);\r\n                      }}\r\n                      className=\"quick-reason-btn\"\r\n                    >\r\n                      {reasonItem.reason} ({reasonItem.amount.toLocaleString()}원)\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"process-modal-footer\">\r\n            <button\r\n              className=\"modal-button cancel\"\r\n              onClick={closeModals}\r\n            >\r\n              취소\r\n            </button>\r\n            <button\r\n              className=\"modal-button process\"\r\n              onClick={handleProcessSubmit}\r\n            >\r\n              처리 완료\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showProcessModal, selectedReport, processingAmount, processingReason, reportReasons]);\r\n\r\n  return (\r\n    <div className=\"report-status-container\">\r\n      <h2 className=\"section-title\">신고 처리 현황</h2>\r\n\r\n      {/* 탭 버튼 */}\r\n      <div className=\"tabs-container\">\r\n        <button\r\n          onClick={() => setActiveTab(\"submitted\")}\r\n          className={`tab-button ${activeTab === \"submitted\" ? \"active\" : \"\"}`}\r\n        >\r\n          제출된 신고 ({submittedReports.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"accepted\")}\r\n          className={`tab-button ${activeTab === \"accepted\" ? \"active\" : \"\"}`}\r\n        >\r\n          접수된 신고 ({acceptedReports.length})\r\n        </button>\r\n      </div>\r\n\r\n      {reports.length === 0 ? (\r\n        <div className=\"empty-state\">처리 중인 신고가 없습니다.</div>\r\n      ) : (\r\n        <>\r\n          {/* 접수된 신고 탭 */}\r\n          {activeTab === \"accepted\" && (\r\n            <div className=\"status-section\">\r\n              <div className=\"report-list\">\r\n                {acceptedReports.length === 0 ? (\r\n                  <div className=\"empty-state\">접수된 신고가 없습니다.</div>\r\n                ) : (\r\n                  acceptedReports.map((report) => (\r\n                    <div\r\n                      key={report.id}\r\n                      className={`report-item ${report.isLawReport ? \"law-report\" : \"\"\r\n                        }`}\r\n                    >\r\n                      <div className=\"report-header\">\r\n                        <span className=\"report-id\">\r\n                          사건번호: {report.id.slice(-6)}\r\n                        </span>\r\n                        <span className=\"report-date\">\r\n                          접수일: {formatDate(report.acceptanceDate)}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"report-content\">\r\n                        <p>\r\n                          <strong>신고자:</strong> {report.reporterName}\r\n                        </p>\r\n                        <p>\r\n                          <strong>대상:</strong> {report.reportedUserName}\r\n                        </p>\r\n                        <p className=\"report-reason\">\r\n                          <strong>사유:</strong> {highlightLawName(report.reason)}\r\n                        </p>\r\n                        {report.description && (\r\n                          <p className=\"report-description\">\r\n                            <strong>설명:</strong> {report.description}\r\n                          </p>\r\n                        )}\r\n                        {report.details && (\r\n                          <p>\r\n                            <strong>상세:</strong> {report.details}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n\r\n                      {isAdminView && (\r\n                        <div className=\"report-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\"벌금 처리 버튼 클릭됨:\", report);\r\n                              openProcessModal(report);\r\n                            }}\r\n                            className=\"action-button process-button fine-button\"\r\n                          >\r\n                            벌금 처리\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\"합의 처리 버튼 클릭됨:\", report);\r\n                              handleSettlementClick(report);\r\n                            }}\r\n                            className=\"action-button settlement-button\"\r\n                          >\r\n                            합의 처리\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\"반려 버튼 클릭됨:\", report.id);\r\n                              if (onDismissReport) {\r\n                                onDismissReport(report.id);\r\n                              } else {\r\n                                logger.error(\"onDismissReport 함수가 없습니다\");\r\n                              }\r\n                            }}\r\n                            className=\"action-button dismiss-button\"\r\n                          >\r\n                            반려\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 제출된 신고 탭 */}\r\n          {activeTab === \"submitted\" && (\r\n            <div className=\"status-section\">\r\n              <div className=\"report-list\">\r\n                {submittedReports.length === 0 ? (\r\n                  <div className=\"empty-state\">제출된 신고가 없습니다.</div>\r\n                ) : (\r\n                  submittedReports.map((report) => (\r\n                    <div\r\n                      key={report.id}\r\n                      className={`report-item ${report.isLawReport ? \"law-report\" : \"\"\r\n                        }`}\r\n                    >\r\n                      <div className=\"report-header\">\r\n                        <span className=\"report-id\">\r\n                          사건번호: {report.id.slice(-6)}\r\n                        </span>\r\n                        <span className=\"report-date\">\r\n                          제출일: {formatDate(report.submitDate)}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"report-content\">\r\n                        <p>\r\n                          <strong>신고자:</strong> {report.reporterName}\r\n                        </p>\r\n                        <p>\r\n                          <strong>대상:</strong> {report.reportedUserName}\r\n                        </p>\r\n                        <p className=\"report-reason\">\r\n                          <strong>사유:</strong> {highlightLawName(report.reason)}\r\n                        </p>\r\n                        {report.description && (\r\n                          <p className=\"report-description\">\r\n                            <strong>설명:</strong> {report.description}\r\n                          </p>\r\n                        )}\r\n                        {report.details && (\r\n                          <p>\r\n                            <strong>상세:</strong> {report.details}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n\r\n                      {isAdminView && (\r\n                        <div className=\"report-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\"접수 버튼 클릭됨:\", report.id);\r\n                              if (onAcceptReport) {\r\n                                onAcceptReport(report.id);\r\n                              } else {\r\n                                logger.error(\"onAcceptReport 함수가 없습니다\");\r\n                              }\r\n                            }}\r\n                            className=\"action-button accept-button\"\r\n                          >\r\n                            접수\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\"반려 버튼 클릭됨:\", report.id);\r\n                              if (onDismissReport) {\r\n                                onDismissReport(report.id);\r\n                              } else {\r\n                                logger.error(\"onDismissReport 함수가 없습니다\");\r\n                              }\r\n                            }}\r\n                            className=\"action-button dismiss-button\"\r\n                          >\r\n                            반려\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* 벌금 처리 모달 - Portal 제거하고 직접 렌더링 */}\r\n      {ProcessReportModal && ProcessReportModal()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportStatus;","// src/ReportResults.js\r\nimport React, { useState } from \"react\";\r\n\r\nconst ReportResults = ({\r\n  reports,\r\n  formatDate,\r\n  isAdminView,\r\n  onEditReport,\r\n  onDeleteReport,\r\n}) => {\r\n  const [filter, setFilter] = useState(\"all\"); // 'all', 'fine', 'settlement', 'dismissed'\r\n\r\n  // 필터링된 보고서\r\n  const filteredReports = reports.filter((report) => {\r\n    if (filter === \"all\") return true;\r\n    if (filter === \"fine\") return report.status === \"resolved_fine\";\r\n    if (filter === \"settlement\") return report.status === \"resolved_settlement\";\r\n    if (filter === \"dismissed\") return report.status === \"dismissed\";\r\n    return true;\r\n  });\r\n\r\n  // 법안 이름 강조 함수\r\n  const highlightLawName = (reason) => {\r\n    if (reason.startsWith(\"[법안]\")) {\r\n      return <span className=\"law-reason-highlight\">{reason}</span>;\r\n    }\r\n    return reason;\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-results-container\">\r\n      <h2 className=\"section-title\">처리 결과</h2>\r\n\r\n      {/* 필터 컨트롤 */}\r\n      <div className=\"filter-controls\">\r\n        <span className=\"filter-label\">필터:</span>\r\n        <div className=\"filter-buttons\">\r\n          <button\r\n            className={`filter-button ${filter === \"all\" ? \"active\" : \"\"}`}\r\n            onClick={() => setFilter(\"all\")}\r\n          >\r\n            전체 ({reports.length})\r\n          </button>\r\n          <button\r\n            className={`filter-button ${filter === \"fine\" ? \"active\" : \"\"}`}\r\n            onClick={() => setFilter(\"fine\")}\r\n          >\r\n            벌금 처리\r\n          </button>\r\n          <button\r\n            className={`filter-button ${\r\n              filter === \"settlement\" ? \"active\" : \"\"\r\n            }`}\r\n            onClick={() => setFilter(\"settlement\")}\r\n          >\r\n            합의 처리\r\n          </button>\r\n          <button\r\n            className={`filter-button ${\r\n              filter === \"dismissed\" ? \"active\" : \"\"\r\n            }`}\r\n            onClick={() => setFilter(\"dismissed\")}\r\n          >\r\n            반려\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {filteredReports.length === 0 ? (\r\n        <div className=\"empty-state\">처리된 신고가 없습니다.</div>\r\n      ) : (\r\n        <div className=\"results-list\">\r\n          {filteredReports.map((report) => (\r\n            <div\r\n              key={report.id}\r\n              className={`result-item ${\r\n                report.isLawReport ? \"law-report\" : \"\"\r\n              } status-${report.status}`}\r\n            >\r\n              <div className=\"result-header\">\r\n                <span className=\"report-id\">\r\n                  사건번호: {report.id.slice(-6)}\r\n                </span>\r\n                <span className=\"result-status\">\r\n                  {report.status === \"resolved_fine\" && \"벌금 처리\"}\r\n                  {report.status === \"resolved_settlement\" && \"합의 처리\"}\r\n                  {report.status === \"dismissed\" && \"반려\"}\r\n                </span>\r\n                <span className=\"result-date\">\r\n                  처리일:{\" \"}\r\n                  {formatDate(report.resolutionDate || report.submitDate)}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"result-content\">\r\n                <div className=\"result-parties\">\r\n                  <p>\r\n                    <strong>신고자:</strong> {report.reporterName}\r\n                  </p>\r\n                  <p>\r\n                    <strong>대상자:</strong> {report.reportedUserName}\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"result-details\">\r\n                  <p className=\"report-reason\">\r\n                    <strong>신고 사유:</strong>{\" \"}\r\n                    {highlightLawName(report.reason)}\r\n                  </p>\r\n                  {report.description && (\r\n                    <p className=\"report-description\">\r\n                      <strong>설명:</strong> {report.description}\r\n                    </p>\r\n                  )}\r\n                  {report.details && (\r\n                    <p>\r\n                      <strong>상세내용:</strong> {report.details}\r\n                    </p>\r\n                  )}\r\n                  {report.resolution && (\r\n                    <p className=\"resolution\">\r\n                      <strong>처리결과:</strong> {report.resolution}\r\n                    </p>\r\n                  )}\r\n                  {report.amount > 0 && (\r\n                    <p className=\"amount\">\r\n                      <strong>금액:</strong> {report.amount.toLocaleString()}원\r\n                      {report.status === \"resolved_settlement\" && \" (합의금)\"}\r\n                      {report.status === \"resolved_fine\" && \" (벌금)\"}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"processed-by\">\r\n                  <p>\r\n                    <strong>처리자:</strong>{\" \"}\r\n                    {report.processedByName || \"시스템\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {isAdminView && (\r\n                <div className=\"admin-actions\">\r\n                  <button\r\n                    onClick={() => onEditReport(report.id)}\r\n                    className=\"admin-button edit-button\"\r\n                    title=\"편집\"\r\n                  >\r\n                    편집\r\n                  </button>\r\n                  <button\r\n                    onClick={() => onDeleteReport(report.id)}\r\n                    className=\"admin-button delete-button\"\r\n                    title=\"삭제\"\r\n                  >\r\n                    삭제\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportResults;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nconst PoliceAdminSettings = ({\r\n  reportReasons,\r\n  onUpdateReasons,\r\n  onDeleteAllReports,\r\n}) => {\r\n  const [reasons, setReasons] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setReasons(JSON.parse(JSON.stringify(reportReasons || [])));\r\n  }, [reportReasons]);\r\n\r\n  const handleReasonChange = (index, field, value) => {\r\n    const updatedReasons = [...reasons];\r\n    if (field === \"amount\") {\r\n      updatedReasons[index][field] = value === \"\" ? 0 : parseInt(value, 10);\r\n    } else {\r\n      updatedReasons[index][field] = value;\r\n    }\r\n    setReasons(updatedReasons);\r\n  };\r\n\r\n  const handleAddReason = () => {\r\n    setReasons([\r\n      ...reasons,\r\n      { reason: \"새로운 사유\", amount: 10000, isLaw: false },\r\n    ]);\r\n  };\r\n\r\n  const handleDeleteReason = (indexToDelete) => {\r\n    if (window.confirm(\"이 사유를 정말 삭제하시겠습니까?\")) {\r\n      setReasons(reasons.filter((_, index) => index !== indexToDelete));\r\n    }\r\n  };\r\n\r\n  const handleSaveChanges = () => {\r\n    if (reasons.some((r) => !r.reason.trim())) {\r\n      alert(\"사유 이름은 비워둘 수 없습니다.\");\r\n      return;\r\n    }\r\n    onUpdateReasons(reasons);\r\n  };\r\n\r\n  const handleDeleteAllClick = () => {\r\n    if (\r\n      window.confirm(\r\n        \"정말로 모든 신고 기록을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.\"\r\n      )\r\n    ) {\r\n      onDeleteAllReports();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-settings-container\">\r\n      <h2 className=\"admin-settings-h2\">관리자 설정</h2>\r\n\r\n      {/* --- 사용자 정의 신고 사유 관리 섹션 --- */}\r\n      <div className=\"admin-section\">\r\n        <h3 className=\"admin-section-title\">사용자 정의 신고 사유 관리</h3>\r\n        <p className=\"admin-section-desc\">\r\n          법안 기반이 아닌, 사용자가 직접 추가하는 신고 사유 목록입니다.\r\n          벌금액을 0으로 설정하면 벌금 없이 처리할 수 있습니다.\r\n        </p>\r\n        <div className=\"reasons-list\">\r\n          {reasons.map((reason, index) => (\r\n            <div key={index} className=\"reason-item-editor\">\r\n              <input\r\n                type=\"text\"\r\n                value={reason.reason}\r\n                onChange={(e) =>\r\n                  handleReasonChange(index, \"reason\", e.target.value)\r\n                }\r\n                placeholder=\"신고 사유\"\r\n                className=\"reason-input\"\r\n              />\r\n              <div className=\"reason-amount-wrapper\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={reason.amount}\r\n                  onChange={(e) =>\r\n                    handleReasonChange(index, \"amount\", e.target.value)\r\n                  }\r\n                  placeholder=\"벌금액\"\r\n                  className=\"reason-amount-input\"\r\n                  min=\"0\"\r\n                  step=\"1000\"\r\n                />\r\n                <span>원</span>\r\n              </div>\r\n              <button\r\n                onClick={() => handleDeleteReason(index)}\r\n                className=\"reason-delete-button\"\r\n              >\r\n                삭제\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"reason-actions\">\r\n          <button onClick={handleAddReason} className=\"reason-add-button\">\r\n            사유 추가\r\n          </button>\r\n          <button onClick={handleSaveChanges} className=\"reason-save-button\">\r\n            변경사항 저장\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* --- 위험 구역 섹션 --- */}\r\n      <div className=\"admin-section danger-zone\">\r\n        <h3 className=\"admin-section-title danger-zone-title\">위험 구역</h3>\r\n        <p className=\"admin-section-desc\">\r\n          주의: 이 작업은 되돌릴 수 없으므로 신중하게 진행해주세요.\r\n        </p>\r\n        <div className=\"danger-zone-actions\">\r\n          <p className=\"danger-zone-p\">\r\n            <strong>모든 신고 기록 삭제</strong>\r\n            <br />\r\n            현재 학급에 제출, 처리, 완료된 모든 신고 내역을 영구적으로\r\n            삭제합니다.\r\n          </p>\r\n          <button\r\n            onClick={handleDeleteAllClick}\r\n            className=\"danger-zone-button\"\r\n          >\r\n            모든 기록 삭제\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PoliceAdminSettings;","// src/PoliceStation.js - Tailwind UI 리팩토링\r\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  processSettlement,\r\n  addActivityLog,\r\n  addTransaction,\r\n  processFineTransaction,\r\n  addSettlementRecord,\r\n} from \"../../firebase\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  TabGroup,\r\n} from \"../../components/PageWrapper\";\r\nimport { Shield, Settings, FileText, Clock, CheckCircle } from \"lucide-react\";\r\n\r\nimport \"./Police.css\";\r\nimport SubmitReport from \"./SubmitReport\";\r\nimport ReportStatus from \"./ReportStatus\";\r\nimport ReportResults from \"./ReportResults\";\r\nimport PoliceAdminSettings from \"./PoliceAdminSettings\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n  setDoc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  orderBy,\r\n  where,\r\n  getDocs,\r\n  writeBatch,\r\n  limit,\r\n} from \"firebase/firestore\";\r\n\r\n\r\n// --- Helper Components ---\r\n\r\n// EditComplaintModal: 고소장 수정 모달\r\nconst EditComplaintModal = ({ complaint, onSave, onCancel, users }) => {\r\n  const [reason, setReason] = useState(complaint.reason);\r\n  const [desiredResolution, setDesiredResolution] = useState(\r\n    complaint.desiredResolution\r\n  );\r\n  const [defendantId, setDefendantId] = useState(complaint.defendantId);\r\n\r\n  const handleSave = () => {\r\n    if (!defendantId || !reason.trim() || !desiredResolution.trim()) {\r\n      alert(\"모든 필드를 입력해주세요.\");\r\n      return;\r\n    }\r\n    onSave({ ...complaint, reason, desiredResolution, defendantId });\r\n  };\r\n\r\n  const defendantOptions = users.map((user) => (\r\n    <option key={user.id} value={user.id}>\r\n      {user.name || user.displayName || user.id}\r\n    </option>\r\n  ));\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"modal-overlay\" onClick={onCancel}>\r\n      <div\r\n        className=\"edit-modal-container modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3>고소장 수정 (ID: {complaint.id.slice(-6)})</h3>\r\n          <button className=\"close-button\" onClick={onCancel}>\r\n            ×\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"defendantSelectEdit\" className=\"form-label\">\r\n              피고소인\r\n            </label>\r\n            <select\r\n              id=\"defendantSelectEdit\"\r\n              className=\"form-select\"\r\n              value={defendantId}\r\n              onChange={(e) => setDefendantId(e.target.value)}\r\n            >\r\n              <option value=\"\">-- 선택 --</option>\r\n              {defendantOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">고소 사유</label>\r\n            <textarea\r\n              className=\"form-textarea\"\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              rows={5}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">원하는 결과</label>\r\n            <textarea\r\n              className=\"form-textarea\"\r\n              value={desiredResolution}\r\n              onChange={(e) => setDesiredResolution(e.target.value)}\r\n              rows={3}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\">\r\n            취소\r\n          </button>\r\n          <button onClick={handleSave} className=\"modal-button process\">\r\n            저장\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById(\"modal-root\") || document.body\r\n  );\r\n};\r\n\r\n// JudgmentModal: 판결문 작성 모달\r\nconst JudgmentModal = ({ complaint, onSave, onCancel }) => {\r\n  const [judgmentText, setJudgmentText] = useState(complaint.judgment || \"\");\r\n\r\n  const handleSaveClick = () => {\r\n    if (!judgmentText.trim()) {\r\n      alert(\"판결 내용을 입력해주세요.\");\r\n      return;\r\n    }\r\n    onSave(complaint.id, judgmentText);\r\n  };\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"modal-overlay\" onClick={onCancel}>\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3>판결문 작성 (ID: {complaint.id.slice(-6)})</h3>\r\n          <button className=\"close-button\" onClick={onCancel}>\r\n            ×\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"judgmentText\" className=\"form-label\">\r\n              판결 내용\r\n            </label>\r\n            <textarea\r\n              id=\"judgmentText\"\r\n              className=\"form-textarea judgment-textarea\"\r\n              value={judgmentText}\r\n              onChange={(e) => setJudgmentText(e.target.value)}\r\n              rows={10}\r\n              placeholder=\"판결 내용을 상세히 작성해주세요...\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\">\r\n            취소\r\n          </button>\r\n          <button onClick={handleSaveClick} className=\"modal-button process\">\r\n            판결 저장\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById(\"modal-root\") || document.body\r\n  );\r\n};\r\n\r\n// SettlementModal: 합의금 지급 처리 모달 - 수정된 버전\r\nconst SettlementModal = ({\r\n  complaint,\r\n  users,\r\n  onSave,\r\n  onCancel,\r\n  getUserNameById,\r\n}) => {\r\n  const safeComplaint = complaint || {};\r\n\r\n  const [amount, setAmount] = useState(safeComplaint.amount?.toString() || \"\");\r\n  const [reason, setReason] = useState(\r\n    safeComplaint.resolution || \"상호 합의에 따른 합의금 지급\"\r\n  );\r\n  const [senderId, setSenderId] = useState(safeComplaint.defendantId || safeComplaint.reportedUserId || \"\");\r\n  const [recipientId, setRecipientId] = useState(safeComplaint.complainantId || safeComplaint.reporterId || \"\");\r\n  const auth = useAuth();\r\n  const currentAdminId = auth.userDoc?.id;\r\n\r\n  // 모달이 열릴 때 디버깅 로그\r\n  useEffect(() => {\r\n    logger.log(\"SettlementModal이 렌더링됨\", {\r\n      complaintId: safeComplaint.id,\r\n      senderId,\r\n      recipientId\r\n    });\r\n  }, [safeComplaint.id, senderId, recipientId]);\r\n\r\n  const handleSave = async () => {\r\n    logger.log(\"Settlement Modal - handleSave 호출됨\", {\r\n      reportId: safeComplaint.id,\r\n      amount,\r\n      senderId,\r\n      recipientId,\r\n      reason\r\n    });\r\n\r\n    if (!safeComplaint.id) {\r\n      alert(\"오류: 사건 ID를 찾을 수 없어 처리할 수 없습니다.\");\r\n      return;\r\n    }\r\n    if (!amount || isNaN(parseInt(amount)) || parseInt(amount) <= 0) {\r\n      alert(\"유효한 합의 금액을 입력해주세요.\");\r\n      return;\r\n    }\r\n    if (!senderId || !recipientId) {\r\n      alert(\"송금자와 수금자를 모두 선택해주세요.\");\r\n      return;\r\n    }\r\n    if (senderId === recipientId) {\r\n      alert(\"송금자와 수금자는 같을 수 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const success = await onSave(\r\n        safeComplaint.id,\r\n        parseInt(amount),\r\n        senderId,\r\n        recipientId,\r\n        reason,\r\n        currentAdminId\r\n      );\r\n      if (success) {\r\n        // 성공하면 모달이 부모 컴포넌트에서 닫힘\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"Settlement Modal - 저장 중 오류:\", error);\r\n      alert(`오류 발생: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const availableSenders = users.filter((u) => u.id !== recipientId);\r\n  const availableRecipients = users.filter((u) => u.id !== senderId);\r\n\r\n  // Portal 대신 직접 렌더링으로 변경하여 z-index 문제 해결\r\n  return (\r\n    <div\r\n      className=\"settlement-modal-overlay\"\r\n      onClick={onCancel}\r\n    >\r\n      <div\r\n        className=\"settlement-modal-safe-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"settlement-modal-header\">\r\n          <h3>\r\n            합의금 지급 처리 (사건번호: {safeComplaint.id?.slice(-6) || '없음'})\r\n          </h3>\r\n          <button\r\n            className=\"close-button\"\r\n            onClick={onCancel}\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"settlement-modal-content\">\r\n          <p className=\"text-white mb-2\">\r\n            <strong>고소인:</strong> {getUserNameById(recipientId)}\r\n          </p>\r\n          <p className=\"text-white mb-4\">\r\n            <strong>피고소인:</strong> {getUserNameById(senderId)}\r\n          </p>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementSender\" className=\"form-label\">\r\n              송금자:\r\n            </label>\r\n            <select\r\n              id=\"settlementSender\"\r\n              className=\"form-select\"\r\n              value={senderId}\r\n              onChange={(e) => setSenderId(e.target.value)}\r\n            >\r\n              <option value=\"\">-- 선택 --</option>\r\n              {availableSenders.map((user) => (\r\n                <option key={user.id} value={user.id}>\r\n                  {getUserNameById(user.id)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementRecipient\" className=\"form-label\">\r\n              수금자:\r\n            </label>\r\n            <select\r\n              id=\"settlementRecipient\"\r\n              className=\"form-select\"\r\n              value={recipientId}\r\n              onChange={(e) => setRecipientId(e.target.value)}\r\n            >\r\n              <option value=\"\">-- 선택 --</option>\r\n              {availableRecipients.map((user) => (\r\n                <option key={user.id} value={user.id}>\r\n                  {getUserNameById(user.id)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementAmount\" className=\"form-label\">\r\n              합의금 (원):\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"settlementAmount\"\r\n              className=\"form-input\"\r\n              value={amount}\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              placeholder=\"금액 입력\"\r\n              min=\"1\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementReason\" className=\"form-label\">\r\n              처리 사유:\r\n            </label>\r\n            <textarea\r\n              id=\"settlementReason\"\r\n              className=\"form-textarea\"\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              rows=\"3\"\r\n              placeholder=\"예: 상호 원만한 합의\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"settlement-modal-footer\">\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"modal-button cancel\"\r\n          >\r\n            취소\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"modal-button process\"\r\n          >\r\n            지급 처리\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// --- Helper Components 끝 ---\r\n\r\nconst defaultReasons = [\r\n  { reason: \"급식실 새치기\", amount: 30000, isLaw: false },\r\n  { reason: \"실내에서 신발신기\", amount: 30000, isLaw: false },\r\n  { reason: \"운동장에서 실내화 신기\", amount: 30000, isLaw: false },\r\n  { reason: \"욕설 사용\", amount: 50000, isLaw: false },\r\n  { reason: \"친구 건들기/때리기\", amount: 100000, isLaw: false },\r\n  { reason: \"시비 걸기\", amount: 70000, isLaw: false },\r\n  { reason: \"기타\", amount: 0, isLaw: false },\r\n];\r\n\r\n// 국세청과 동일한 nationalTreasuries 컬렉션 사용\r\nconst getClassTreasuryPath = (classCode) =>\r\n  `nationalTreasuries/${classCode}`;\r\n\r\nconst PoliceStation = () => {\r\n  const auth = useAuth();\r\n  const currentUser = auth.userDoc;\r\n  const currentUserId = currentUser?.id;\r\n  const classCode = currentUser?.classCode;\r\n\r\n  const isSystemAdmin = auth.loading\r\n    ? false\r\n    : auth.isAdmin\r\n      ? auth.isAdmin()\r\n      : currentUser?.isAdmin || false;\r\n\r\n  const [activeTab, setActiveTab] = useState(\"submit\");\r\n  const [previousTab, setPreviousTab] = useState(\"submit\");\r\n\r\n  const [reportReasons, setReportReasons] = useState([]);\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [usersLoading, setUsersLoading] = useState(true);\r\n\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [editingComplaint, setEditingComplaint] = useState(null);\r\n  const [isJudgmentModalOpen, setIsJudgmentModalOpen] = useState(false);\r\n  const [judgingComplaint, setJudgingComplaint] = useState(null);\r\n  const [isSettlementModalOpen, setIsSettlementModalOpen] = useState(false);\r\n  const [settlementComplaint, setSettlementComplaint] = useState(null);\r\n\r\n  // modal-root 엘리먼트 생성\r\n  useEffect(() => {\r\n    if (!document.getElementById(\"modal-root\")) {\r\n      const modalRoot = document.createElement(\"div\");\r\n      modalRoot.id = \"modal-root\";\r\n      document.body.appendChild(modalRoot);\r\n    }\r\n  }, []);\r\n\r\n  const getUserNameById = useCallback(\r\n    (userId) => {\r\n      if (!users || users.length === 0) return userId || \"정보 없음\";\r\n      const user = users.find((u) => u.id === userId);\r\n      return user?.name || user?.displayName || userId || \"알 수 없음\";\r\n    },\r\n    [users]\r\n  );\r\n\r\n  const formatDate = (dateInput) => {\r\n    if (!dateInput) return \"N/A\";\r\n    try {\r\n      const date =\r\n        typeof dateInput.toDate === \"function\"\r\n          ? dateInput.toDate()\r\n          : new Date(dateInput);\r\n      if (isNaN(date.getTime())) return \"유효하지 않은 날짜\";\r\n      return date.toLocaleString(\"ko-KR\", {\r\n        year: \"numeric\",\r\n        month: \"2-digit\",\r\n        day: \"2-digit\",\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n        hour12: false,\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error formatting date:\", dateInput, error);\r\n      return \"날짜 오류\";\r\n    }\r\n  };\r\n\r\n  // Users data from AuthContext or fallback to polling\r\n  const usersQuery = useMemo(() => {\r\n    if (!classCode || auth.classmates?.length > 0) return null;\r\n    return query(\r\n      collection(db, \"users\"),\r\n      where(\"classCode\", \"==\", classCode)\r\n    );\r\n  }, [classCode, auth.classmates]);\r\n\r\n  const { data: polledUsers, loading: pollingUsersLoading } = usePolling(\r\n    async () => {\r\n      if (!usersQuery) return null;\r\n      const snapshot = await getDocs(usersQuery);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      interval: 30 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 30분 (사용자 목록은 거의 안 바뀜)\r\n      enabled: !!usersQuery && !auth.loading,\r\n      deps: [classCode, auth.loading, usersQuery],\r\n    }\r\n  );\r\n\r\n  // AuthContext의 classmates 데이터 활용 (중복 읽기 방지)\r\n  useEffect(() => {\r\n    if (auth.loading) {\r\n      setUsersLoading(true);\r\n      return;\r\n    }\r\n\r\n    // AuthContext의 classmates 데이터 사용\r\n    if (auth.classmates && auth.classmates.length > 0) {\r\n      // 현재 사용자 포함\r\n      const allUsers = auth.classmates;\r\n      if (currentUser && !allUsers.find(u => u.id === currentUser.id)) {\r\n        allUsers.push({\r\n          id: currentUser.id,\r\n          name: currentUser.name,\r\n          displayName: currentUser.displayName,\r\n          ...currentUser\r\n        });\r\n      }\r\n      setUsers(allUsers);\r\n      setUsersLoading(false);\r\n    } else if (!classCode) {\r\n      setUsers([]);\r\n      setUsersLoading(false);\r\n    } else if (polledUsers) {\r\n      // usePolling에서 가져온 데이터 사용\r\n      setUsers(polledUsers);\r\n      setUsersLoading(pollingUsersLoading);\r\n    } else {\r\n      setUsersLoading(pollingUsersLoading);\r\n    }\r\n  }, [auth.loading, auth.classmates, classCode, currentUser, polledUsers, pollingUsersLoading]);\r\n\r\n  // Jobs polling - for police chief check\r\n  const jobsQuery = useMemo(() => {\r\n    if (!classCode) return null;\r\n    const jobsRef = collection(db, \"jobs\");\r\n    return query(jobsRef, where(\"classCode\", \"==\", classCode));\r\n  }, [classCode]);\r\n\r\n  const { data: jobs, loading: jobsLoading } = usePolling(\r\n    async () => {\r\n      if (!jobsQuery) return [];\r\n      const snapshot = await getDocs(jobsQuery);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      interval: 30 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 30분 (직업 목록은 거의 안 바뀜)\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  // Check if user is police chief\r\n  const isPoliceChief = useMemo(() => {\r\n    if (!currentUser?.selectedJobIds || !jobs) return false;\r\n    const selectedJobs = jobs.filter(job =>\r\n      currentUser.selectedJobIds.includes(job.id)\r\n    );\r\n    return selectedJobs.some(job => job.title === '경찰청장');\r\n  }, [currentUser?.selectedJobIds, jobs]);\r\n\r\n  const hasPoliceAdminRights = isSystemAdmin || isPoliceChief;\r\n\r\n  // Treasury balance polling\r\n  const treasuryRef = useMemo(() => {\r\n    if (!classCode) return null;\r\n    return doc(db, getClassTreasuryPath(classCode));\r\n  }, [classCode]);\r\n\r\n  const { data: treasuryBalance, loading: treasuryLoading } = usePolling(\r\n    async () => {\r\n      if (!treasuryRef) return 0;\r\n      const docSnap = await getDoc(treasuryRef);\r\n      // NationalTaxService.js와 동일하게 totalAmount 필드 사용\r\n      const balance = docSnap.exists() ? (docSnap.data().totalAmount || 0) : 0;\r\n      if (!docSnap.exists() && hasPoliceAdminRights) {\r\n        // NationalTaxService.js의 DEFAULT_TREASURY_DATA와 동일한 구조로 생성\r\n        setDoc(treasuryRef, {\r\n          totalAmount: 0,\r\n          stockTaxRevenue: 0,\r\n          stockCommissionRevenue: 0,\r\n          realEstateTransactionTaxRevenue: 0,\r\n          realEstateAnnualTaxRevenue: 0,\r\n          incomeTaxRevenue: 0,\r\n          corporateTaxRevenue: 0,\r\n          otherTaxRevenue: 0,\r\n          classCode: classCode,\r\n          createdAt: serverTimestamp(),\r\n          lastUpdated: serverTimestamp(),\r\n        }).catch((err) =>\r\n          logger.error(\"Error creating national treasury:\", err)\r\n        );\r\n      }\r\n      return balance;\r\n    },\r\n    {\r\n      interval: 15 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 15분 (국고 데이터는 자주 안 바뀜)\r\n      enabled: !!classCode && !auth.loading,\r\n      deps: [classCode, auth.loading, hasPoliceAdminRights],\r\n    }\r\n  );\r\n\r\n  // Approved laws polling\r\n  const lawsQuery = useMemo(() => {\r\n    if (!classCode) return null;\r\n    const lawsRef = collection(db, \"classes\", classCode, \"nationalAssemblyLaws\");\r\n    return query(\r\n      lawsRef,\r\n      where(\"finalStatus\", \"==\", \"final_approved\"),\r\n      orderBy(\"timestamp\", \"desc\"),\r\n      limit(50)\r\n    );\r\n  }, [classCode]);\r\n\r\n  const { data: approvedLaws, loading: lawsLoading } = usePolling(\r\n    async () => {\r\n      if (!lawsQuery) return [];\r\n      const snapshot = await getDocs(lawsQuery);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      interval: 30 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 30분 (법안은 자주 안 바뀜)\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  // Custom report reasons polling\r\n  const customReasonsDocRef = useMemo(() => {\r\n    if (!classCode) return null;\r\n    return doc(db, \"classes\", classCode, \"policeReportReasons\", \"custom\");\r\n  }, [classCode]);\r\n\r\n  const { data: customReportReasons, loading: reasonsLoading } = usePolling(\r\n    async () => {\r\n      if (!customReasonsDocRef) return [...defaultReasons.filter((r) => !r.isLaw)];\r\n      const docSnap = await getDoc(customReasonsDocRef);\r\n      let reasons;\r\n      if (docSnap.exists() && docSnap.data().reasons) {\r\n        reasons = docSnap.data().reasons;\r\n      } else {\r\n        reasons = defaultReasons.filter((r) => !r.isLaw);\r\n        if (hasPoliceAdminRights) {\r\n          setDoc(customReasonsDocRef, {\r\n            reasons: reasons,\r\n            updatedAt: serverTimestamp(),\r\n            classCode: classCode,\r\n          }).catch((err) =>\r\n            logger.error(\"Error creating default custom reasons:\", err)\r\n          );\r\n        }\r\n      }\r\n      return reasons;\r\n    },\r\n    {\r\n      interval: 60 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 1시간 (신고 사유는 거의 안 바뀜)\r\n      enabled: !!classCode,\r\n      deps: [classCode, hasPoliceAdminRights],\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (lawsLoading || reasonsLoading) return;\r\n    const laws = approvedLaws || [];\r\n    const customReasons = customReportReasons || [];\r\n    const lawReasons = laws.map((law) => {\r\n      const fineMatch = law.fine?.match(/\\d+/g);\r\n      const amount = fineMatch ? parseInt(fineMatch.join(\"\"), 10) : 10000;\r\n      return {\r\n        reason: `[법안] ${law.title} 위반`,\r\n        description: law.description || \"\",\r\n        amount,\r\n        lawId: law.id,\r\n        isLaw: true,\r\n      };\r\n    });\r\n    setReportReasons([...lawReasons, ...customReasons]);\r\n  }, [approvedLaws, customReportReasons, lawsLoading, reasonsLoading]);\r\n\r\n  // Police reports polling\r\n  const reportsQuery = useMemo(() => {\r\n    if (!classCode) return null;\r\n    const reportsRef = collection(db, \"classes\", classCode, \"policeReports\");\r\n    return query(reportsRef, orderBy(\"submitDate\", \"desc\"), limit(100));\r\n  }, [classCode]);\r\n\r\n  const { data: reports, loading: reportsLoading, refetch: refetchReports } = usePolling(\r\n    async () => {\r\n      if (!reportsQuery) return [];\r\n      const querySnapshot = await getDocs(reportsQuery);\r\n      return querySnapshot.docs.map((doc) => {\r\n        const data = doc.data();\r\n        return {\r\n          id: doc.id,\r\n          ...data,\r\n          submitDate: data.submitDate?.toDate\r\n            ? data.submitDate.toDate().toISOString()\r\n            : null,\r\n          acceptanceDate: data.acceptanceDate?.toDate\r\n            ? data.acceptanceDate.toDate().toISOString()\r\n            : null,\r\n          resolutionDate: data.resolutionDate?.toDate\r\n            ? data.resolutionDate.toDate().toISOString()\r\n            : null,\r\n        };\r\n      });\r\n    },\r\n    {\r\n      interval: 10 * 60 * 1000, // 🔥 [비용 최적화] 5분 → 10분 (신고 목록)\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  const handleTabChange = (newTab) => {\r\n    setPreviousTab(activeTab);\r\n    setActiveTab(newTab);\r\n  };\r\n\r\n  const handleBackToPolice = () => {\r\n    setActiveTab(previousTab !== \"admin\" ? previousTab : \"submit\");\r\n  };\r\n\r\n  const handleAddReport = async (newReportData) => {\r\n    if (!currentUserId || !classCode) {\r\n      alert(\"로그인이 필요하거나 학급 정보가 없습니다.\");\r\n      return;\r\n    }\r\n    if (!newReportData.reportedUserId || !newReportData.reason) {\r\n      alert(\"신고 대상과 사유를 모두 선택해주세요.\");\r\n      return;\r\n    }\r\n    const reasonInfo = reportReasons.find(\r\n      (r) => r.reason === newReportData.reason\r\n    );\r\n    const reportsRef = collection(db, \"classes\", classCode, \"policeReports\");\r\n    const newReport = {\r\n      ...newReportData,\r\n      reporterId: currentUserId,\r\n      complainantId: currentUserId,\r\n      reporterName: currentUser.name || currentUser.displayName || \"익명\",\r\n      submitDate: serverTimestamp(),\r\n      status: \"submitted\",\r\n      amount: reasonInfo?.amount || 0,\r\n      isLawReport: reasonInfo?.isLaw || false,\r\n      description: reasonInfo?.description || newReportData.reason,\r\n      lawId: reasonInfo?.lawId || null,\r\n      classCode: classCode,\r\n      acceptanceDate: null,\r\n      resolution: null,\r\n      resolutionDate: null,\r\n      processedById: null,\r\n      processedByName: null,\r\n      settlementPaid: false,\r\n      defendantId: newReportData.reportedUserId,\r\n    };\r\n    try {\r\n      await addDoc(reportsRef, newReport);\r\n      refetchReports(); // 🔥 즉시 새로고침\r\n      handleTabChange(\"status\");\r\n      alert(\"신고가 성공적으로 제출되었습니다.\");\r\n    } catch (error) {\r\n      logger.error(\"Error adding report:\", error);\r\n      alert(\"신고 제출 오류.\");\r\n    }\r\n  };\r\n\r\n  const handleAcceptReport = async (id) => {\r\n    logger.log(\"handleAcceptReport 호출됨:\", id);\r\n    if (!hasPoliceAdminRights || !classCode || !currentUserId) {\r\n      alert(\"권한이 없거나 정보가 부족합니다.\");\r\n      return;\r\n    }\r\n    const reportRef = doc(db, \"classes\", classCode, \"policeReports\", id);\r\n    try {\r\n      await updateDoc(reportRef, {\r\n        status: \"accepted\",\r\n        acceptanceDate: serverTimestamp(),\r\n        processedById: currentUserId,\r\n        processedByName:\r\n          currentUser.name || currentUser.displayName || \"관리자\",\r\n      });\r\n      refetchReports(); // 🔥 즉시 새로고침\r\n      logger.log(\"신고 접수 성공:\", id);\r\n      alert(\"신고가 접수되었습니다.\");\r\n    } catch (error) {\r\n      logger.error(\"Error accepting report:\", error);\r\n      alert(\"신고 접수 오류.\");\r\n    }\r\n  };\r\n\r\n  const handleDismissReport = async (id) => {\r\n    logger.log(\"handleDismissReport 호출됨:\", id);\r\n    if (!hasPoliceAdminRights || !classCode || !currentUserId) {\r\n      alert(\"권한이 없거나 정보가 부족합니다.\");\r\n      return;\r\n    }\r\n    const reportRef = doc(db, \"classes\", classCode, \"policeReports\", id);\r\n    try {\r\n      await updateDoc(reportRef, {\r\n        status: \"dismissed\",\r\n        resolution: \"신고 반려/기각\",\r\n        resolutionDate: serverTimestamp(),\r\n        processedById: currentUserId,\r\n        processedByName:\r\n          currentUser.name || currentUser.displayName || \"관리자\",\r\n      });\r\n      refetchReports(); // 🔥 즉시 새로고침\r\n      logger.log(\"신고 반려 성공:\", id);\r\n      alert(\"신고가 반려되었습니다.\");\r\n    } catch (error) {\r\n      logger.error(\"Error dismissing report:\", error);\r\n      alert(\"신고 반려 오류.\");\r\n    }\r\n  };\r\n\r\n  const handleProcessReport = async (\r\n    id,\r\n    processingAmount,\r\n    processingReason\r\n  ) => {\r\n    logger.log(\"handleProcessReport 호출됨:\", {\r\n      id,\r\n      processingAmount,\r\n      processingReason,\r\n    });\r\n\r\n    if (!hasPoliceAdminRights || !currentUserId || !classCode) {\r\n      alert(\"권한 또는 정보 부족\");\r\n      return;\r\n    }\r\n\r\n    const report = reports.find((r) => r.id === id);\r\n    if (!report) {\r\n      alert(\"신고를 찾을 수 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    if (report.status !== \"accepted\") {\r\n      alert(\"접수된 신고만 처리 가능합니다.\");\r\n      return;\r\n    }\r\n\r\n    const numericProcessingAmount = parseInt(processingAmount, 10);\r\n    if (isNaN(numericProcessingAmount) || numericProcessingAmount < 0) {\r\n      alert(\"유효한 금액(0 이상) 입력 필요\");\r\n      return;\r\n    }\r\n\r\n    let finalResolution = processingReason || \"벌금 부과 처리\";\r\n    if (report.isLawReport && report.description) {\r\n      finalResolution = `${processingReason || \"법안 위반\"}: ${report.description\r\n        }`;\r\n    }\r\n\r\n    const reportRef = doc(db, \"classes\", classCode, \"policeReports\", id);\r\n\r\n    if (numericProcessingAmount > 0) {\r\n      const reportedUserId = report.reportedUserId || report.defendantId;\r\n\r\n      try {\r\n        const reasonForLog = `경찰서 신고 (사건번호: ${id.slice(-6)})에 대한 벌금 ${numericProcessingAmount.toLocaleString()}원 납부`;\r\n\r\n        await processFineTransaction(\r\n          reportedUserId,\r\n          classCode,\r\n          numericProcessingAmount,\r\n          reasonForLog\r\n        );\r\n\r\n        await updateDoc(reportRef, {\r\n          status: \"resolved_fine\",\r\n          resolutionDate: serverTimestamp(),\r\n          resolution: finalResolution,\r\n          amount: numericProcessingAmount,\r\n          processedById: currentUserId,\r\n          processedByName:\r\n            currentUser.name || currentUser.displayName || \"관리자\",\r\n        });\r\n\r\n        refetchReports(); // 🔥 즉시 새로고침\r\n        alert(\"벌금 처리가 완료되었습니다.\");\r\n      } catch (error) {\r\n        logger.error(\"벌금 처리 트랜잭션 오류:\", error);\r\n        alert(`벌금 처리 실패: ${error.message}`);\r\n        return;\r\n      }\r\n    } else {\r\n      try {\r\n        await updateDoc(reportRef, {\r\n          status: \"resolved_fine\",\r\n          resolutionDate: serverTimestamp(),\r\n          resolution: finalResolution,\r\n          amount: 0,\r\n          processedById: currentUserId,\r\n          processedByName:\r\n            currentUser.name || currentUser.displayName || \"관리자\",\r\n        });\r\n        refetchReports(); // 🔥 즉시 새로고침\r\n        alert(\"경고 처리가 완료되었습니다.\");\r\n      } catch (error) {\r\n        logger.error(\"벌금 0원 처리 오류:\", error);\r\n        alert(\"처리 중 오류가 발생했습니다.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSendSettlement = async (\r\n    reportId,\r\n    amount,\r\n    senderId,\r\n    recipientId,\r\n    reason,\r\n    adminId\r\n  ) => {\r\n    logger.log(\"handleSendSettlement 호출됨 (Cloud Function):\", { reportId, amount, senderId, recipientId, reason, adminId });\r\n\r\n    if (!hasPoliceAdminRights || !classCode) {\r\n      alert(\"권한이 없거나 학급 정보가 없습니다.\");\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      // Call the new cloud function\r\n      const result = await processSettlement({\r\n        reportId,\r\n        amount,\r\n        senderId,\r\n        recipientId,\r\n        reason,\r\n        adminId // adminId is the uid of the caller\r\n      });\r\n\r\n      if (result.success) {\r\n        alert(result.message || \"합의금 지급 처리가 성공적으로 완료되었습니다.\");\r\n        refetchReports(); // Refresh the reports list\r\n        setIsSettlementModalOpen(false);\r\n        setSettlementComplaint(null);\r\n        return true;\r\n      } else {\r\n        throw new Error(result.message || \"서버에서 처리를 실패했습니다.\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"합의금 처리 실패 (Cloud Function):\", error);\r\n      alert(`오류: ${error.message || '합의금 처리 중 오류가 발생했습니다.'}`);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleSaveEdit = async (updatedComplaint) => {\r\n    if (!hasPoliceAdminRights || !classCode) {\r\n      alert(\"권한이 없거나 학급 정보가 없습니다.\");\r\n      return;\r\n    }\r\n    const reportRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"policeReports\",\r\n      updatedComplaint.id\r\n    );\r\n    try {\r\n      await updateDoc(reportRef, {\r\n        reason: updatedComplaint.reason,\r\n        desiredResolution: updatedComplaint.desiredResolution,\r\n        defendantId: updatedComplaint.defendantId,\r\n        reportedUserId: updatedComplaint.defendantId,\r\n      });\r\n      refetchReports(); // 🔥 즉시 새로고침\r\n      alert(\"고소장 정보가 업데이트되었습니다.\");\r\n      setIsEditModalOpen(false);\r\n      setEditingComplaint(null);\r\n    } catch (error) {\r\n      logger.error(\"고소장 업데이트 오류:\", error);\r\n      alert(\"고소장 정보 업데이트에 실패했습니다.\");\r\n    }\r\n  };\r\n\r\n  const handleSaveJudgment = async (complaintId, judgmentText) => {\r\n    if (!hasPoliceAdminRights || !classCode) {\r\n      alert(\"권한이 없거나 학급 정보가 없습니다.\");\r\n      return;\r\n    }\r\n    const reportRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"policeReports\",\r\n      complaintId\r\n    );\r\n    try {\r\n      await updateDoc(reportRef, {\r\n        judgment: judgmentText,\r\n      });\r\n      refetchReports(); // 🔥 즉시 새로고침\r\n      alert(\"판결 내용이 저장되었습니다.\");\r\n      setIsJudgmentModalOpen(false);\r\n      setJudgingComplaint(null);\r\n    } catch (error) {\r\n      logger.error(\"판결 저장 오류:\", error);\r\n      alert(\"판결 내용 저장에 실패했습니다.\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteAllReports = async () => {\r\n    if (!hasPoliceAdminRights || !classCode) return alert(\"권한이 없습니다.\");\r\n    if (window.confirm(\"모든 신고 기록 삭제?\")) {\r\n      try {\r\n        const reportsRef = collection(\r\n          db,\r\n          \"classes\",\r\n          classCode,\r\n          \"policeReports\"\r\n        );\r\n        const snapshot = await getDocs(reportsRef);\r\n        const batch = writeBatch(db);\r\n        snapshot.docs.forEach((doc) => batch.delete(doc.ref));\r\n        await batch.commit();\r\n        alert(\"모든 신고 기록 삭제 완료.\");\r\n      } catch (error) {\r\n        logger.error(\"Error deleting all reports:\", error);\r\n        alert(\"모든 신고 기록 삭제 오류.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteSingleReport = async (idToDelete) => {\r\n    if (!hasPoliceAdminRights || !classCode) return alert(\"권한이 없습니다.\");\r\n    const reportToDelete = reports.find((r) => r.id === idToDelete);\r\n    if (!reportToDelete) return;\r\n    if (window.confirm(`사건번호 ${idToDelete.slice(-6)} 삭제?`)) {\r\n      try {\r\n        const reportRef = doc(\r\n          db,\r\n          \"classes\",\r\n          classCode,\r\n          \"policeReports\",\r\n          idToDelete\r\n        );\r\n        await deleteDoc(reportRef);\r\n        alert(\"신고 기록 삭제 완료.\");\r\n      } catch (error) {\r\n        logger.error(\"Error deleting report:\", error);\r\n        alert(\"신고 기록 삭제 오류.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditSingleReport = (idToEdit) => {\r\n    if (!hasPoliceAdminRights) return;\r\n    const reportToEdit = reports.find((r) => r.id === idToEdit);\r\n    if (reportToEdit) {\r\n      if (!reportToEdit.defendantId && reportToEdit.reportedUserId) {\r\n        reportToEdit.defendantId = reportToEdit.reportedUserId;\r\n      }\r\n      setEditingComplaint(reportToEdit);\r\n      setIsEditModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleUpdateReasons = async (updatedCustomReasons) => {\r\n    if (!hasPoliceAdminRights || !classCode) return alert(\"권한이 없습니다.\");\r\n    if (\r\n      !Array.isArray(updatedCustomReasons) ||\r\n      updatedCustomReasons.some(\r\n        (r) =>\r\n          typeof r !== \"object\" || !r.reason || typeof r.amount !== \"number\"\r\n      )\r\n    ) {\r\n      alert(\"신고 사유 데이터 형식 오류.\");\r\n      return;\r\n    }\r\n    try {\r\n      const customReasonsDocRef = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"policeReportReasons\",\r\n        \"custom\"\r\n      );\r\n      await setDoc(customReasonsDocRef, {\r\n        reasons: updatedCustomReasons,\r\n        updatedAt: serverTimestamp(),\r\n        classCode: classCode,\r\n      });\r\n      alert(\"사용자 정의 신고 사유 업데이트 완료.\");\r\n    } catch (error) {\r\n      logger.error(\"Error updating reasons:\", error);\r\n      alert(\"신고 사유 업데이트 오류.\");\r\n    }\r\n  };\r\n\r\n  const handleOpenSettlementModal = (reportToProcess) => {\r\n    logger.log(\"handleOpenSettlementModal 호출됨:\", reportToProcess);\r\n\r\n    if (!reportToProcess || !reportToProcess.id) {\r\n      logger.error(\"합의 처리 오류: 유효한 사건 객체를 전달받지 못했습니다.\", reportToProcess);\r\n      alert(\"오류: 사건 정보를 찾지 못했습니다. 페이지를 새로고침 후 다시 시도해 주세요.\");\r\n      return;\r\n    }\r\n\r\n    const mappedReport = {\r\n      ...reportToProcess,\r\n      complainantId: reportToProcess.complainantId || reportToProcess.reporterId,\r\n      defendantId: reportToProcess.defendantId || reportToProcess.reportedUserId,\r\n    };\r\n\r\n    if (!mappedReport.complainantId || !mappedReport.defendantId) {\r\n      logger.error(\"합의 처리 오류: 고소인 또는 피고소인 정보가 누락되었습니다.\", mappedReport);\r\n      alert(\"오류: 고소인 또는 피고소인 정보가 없는 사건은 처리할 수 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    logger.log(\"합의 모달 열기 준비 완료, 상태 업데이트 직전:\", mappedReport);\r\n    setSettlementComplaint(mappedReport);\r\n    setIsSettlementModalOpen(true);\r\n  };\r\n\r\n  const reportsWithNames = useMemo(() => {\r\n    if (usersLoading || reportsLoading || !reports) return reports || [];\r\n    return reports.map((r) => ({\r\n      ...r,\r\n      reporterName: getUserNameById(r.reporterId),\r\n      reportedUserName: getUserNameById(r.reportedUserId || r.defendantId),\r\n      processedByName: r.processedById\r\n        ? getUserNameById(r.processedById)\r\n        : null,\r\n    }));\r\n  }, [reports, usersLoading, reportsLoading, getUserNameById]); // users는 getUserNameById 내부에서 사용되므로 제거\r\n\r\n  const statusReports = useMemo(() => {\r\n    return reportsWithNames.filter(\r\n      (r) => r.status === \"submitted\" || r.status === \"accepted\"\r\n    );\r\n  }, [reportsWithNames]);\r\n\r\n  const resultReports = useMemo(() => {\r\n    return reportsWithNames\r\n      .filter(\r\n        (r) => r.status.startsWith(\"resolved_\") || r.status === \"dismissed\"\r\n      )\r\n      .sort((a, b) => {\r\n        const dateA = a.resolutionDate || a.submitDate;\r\n        const dateB = b.resolutionDate || b.submitDate;\r\n        const timeA =\r\n          typeof dateA?.toDate === \"function\"\r\n            ? dateA.toDate().getTime()\r\n            : new Date(dateA).getTime();\r\n        const timeB =\r\n          typeof dateB?.toDate === \"function\"\r\n            ? dateB.toDate().getTime()\r\n            : new Date(dateB).getTime();\r\n        return timeB - timeA;\r\n      });\r\n  }, [reportsWithNames]);\r\n\r\n  if (auth.loading) {\r\n    return (\r\n      <div className=\"police-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n          사용자 인증 정보를 확인 중입니다...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser) {\r\n    return (\r\n      <div className=\"police-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n          로그인이 필요합니다. 경찰서 기능을 사용하려면 다시 로그인해주세요.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!classCode && !hasPoliceAdminRights) {\r\n    return (\r\n      <div className=\"police-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n          경찰서 기능을 사용하려면 학급 코드가 사용자 정보에 설정되어 있어야 합니다.\r\n          프로필에서 학급 코드를 설정해주세요.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (\r\n    classCode &&\r\n    (usersLoading ||\r\n      treasuryLoading ||\r\n      lawsLoading ||\r\n      jobsLoading ||\r\n      reasonsLoading ||\r\n      reportsLoading)\r\n  ) {\r\n    return (\r\n      <div className=\"police-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n          데이터를 불러오는 중...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (hasPoliceAdminRights && !classCode && activeTab !== \"admin\") {\r\n    return (\r\n      <div className=\"police-container loading\">\r\n        관리자님, 현재 학급 코드가 설정되지 않아 이 탭의 내용을 볼 수 없습니다.\r\n        관리자 설정을 확인하거나 프로필에서 학급 코드를 설정해주세요.\r\n        <button onClick={() => setActiveTab(\"admin\")}>\r\n          관리자 설정으로 이동\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderTabContent = () => {\r\n    if (!classCode && !hasPoliceAdminRights && activeTab !== \"admin\") {\r\n      return (\r\n        <p className=\"empty-state\">\r\n          학급 코드가 설정되어 있지 않아 기능을 사용할 수 없습니다.\r\n        </p>\r\n      );\r\n    }\r\n\r\n    switch (activeTab) {\r\n      case \"submit\":\r\n        if (!classCode)\r\n          return (\r\n            <p className=\"empty-state\">\r\n              신고를 제출할 학급이 설정되지 않았습니다.\r\n            </p>\r\n          );\r\n        return (\r\n          <SubmitReport\r\n            onSubmitReport={handleAddReport}\r\n            reportReasons={reportReasons}\r\n            users={users.filter((u) => u.id !== currentUserId)}\r\n            currentUser={currentUser}\r\n          />\r\n        );\r\n      case \"status\":\r\n        if (!classCode)\r\n          return (\r\n            <p className=\"empty-state\">\r\n              처리 현황을 볼 학급이 설정되지 않았습니다.\r\n            </p>\r\n          );\r\n        return (\r\n          <ReportStatus\r\n            reports={statusReports}\r\n            onProcessReport={handleProcessReport}\r\n            onSettlement={handleOpenSettlementModal}\r\n            reportReasons={reportReasons}\r\n            formatDate={formatDate}\r\n            onAcceptReport={handleAcceptReport}\r\n            onDismissReport={handleDismissReport}\r\n            currentUser={currentUser}\r\n            isAdminView={hasPoliceAdminRights}\r\n            users={users}\r\n          />\r\n        );\r\n      case \"results\":\r\n        if (!classCode)\r\n          return (\r\n            <p className=\"empty-state\">\r\n              처리 결과를 볼 학급이 설정되지 않았습니다.\r\n            </p>\r\n          );\r\n        return (\r\n          <ReportResults\r\n            reports={resultReports}\r\n            formatDate={formatDate}\r\n            isAdminView={hasPoliceAdminRights}\r\n            onEditReport={handleEditSingleReport}\r\n            onDeleteReport={handleDeleteSingleReport}\r\n            users={users}\r\n            getUserNameById={getUserNameById}\r\n            isAdmin={hasPoliceAdminRights}\r\n          />\r\n        );\r\n      case \"admin\":\r\n        return (\r\n          <div className=\"police-admin-content\">\r\n            <div className=\"admin-nav-buttons\">\r\n              <button\r\n                onClick={handleBackToPolice}\r\n                className=\"back-to-police-button\"\r\n              >\r\n                경찰서로 돌아가기\r\n              </button>\r\n            </div>\r\n            <PoliceAdminSettings\r\n              reportReasons={customReportReasons}\r\n              onUpdateReasons={handleUpdateReasons}\r\n              onDeleteAllReports={\r\n                classCode\r\n                  ? handleDeleteAllReports\r\n                  : () =>\r\n                    alert(\r\n                      \"모든 신고 삭제는 학급 코드가 설정된 후 가능합니다.\"\r\n                    )\r\n              }\r\n            />\r\n            <div className=\"law-reasons-info\">\r\n              <h3>법안 기반 신고 사유 (자동 업데이트)</h3>\r\n              {classCode ? (\r\n                reportReasons.filter((r) => r.isLaw).length > 0 ? (\r\n                  <div className=\"law-reasons-list\">\r\n                    {reportReasons\r\n                      .filter((r) => r.isLaw)\r\n                      .map((reason, index) => (\r\n                        <div key={index} className=\"law-reason-item\">\r\n                          <div className=\"reason-name\">{reason.reason}</div>\r\n                          {reason.description && (\r\n                            <div className=\"reason-description\">\r\n                              {reason.description}\r\n                            </div>\r\n                          )}\r\n                          <div className=\"reason-amount\">\r\n                            벌금: {reason.amount.toLocaleString()}원\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"empty-state\">\r\n                    현재 학급에 가결된 법안이 없거나, 불러오는 중입니다.\r\n                  </p>\r\n                )\r\n              ) : (\r\n                <p className=\"empty-state\">\r\n                  학급 코드가 설정되지 않아 법안 기반 신고 사유를 볼 수\r\n                  없습니다.\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      default:\r\n        return <p>탭을 선택해주세요.</p>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"police-container\">\r\n      {(auth.loading ||\r\n        (classCode &&\r\n          (usersLoading ||\r\n            reportsLoading ||\r\n            treasuryLoading ||\r\n            lawsLoading ||\r\n            jobsLoading ||\r\n            reasonsLoading))) && (\r\n          <div className=\"loading-overlay-transparent\">데이터 동기화 중...</div>\r\n        )}\r\n      <div className=\"police-header-container\">\r\n        <h1 className=\"police-header\">\r\n          경찰서 {classCode && `(학급: ${classCode})`}\r\n        </h1>\r\n        <div className=\"header-info\">\r\n          {currentUser && (\r\n            <span className=\"welcome-message\">\r\n              환영합니다,{\" \"}\r\n              {currentUser.name || currentUser.displayName || currentUser.id}님!\r\n            </span>\r\n          )}\r\n          <span className=\"treasury-balance\">\r\n            현재 국고 잔액: {(treasuryBalance || 0).toLocaleString()}원\r\n          </span>\r\n          {hasPoliceAdminRights && (\r\n            <button\r\n              onClick={() => handleTabChange(\"admin\")}\r\n              className={`admin-settings-button ${activeTab === \"admin\" ? \"active\" : \"\"\r\n                }`}\r\n              title=\"관리 설정 열기\"\r\n            >\r\n              관리 설정\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {activeTab !== \"admin\" ? (\r\n        <>\r\n          {classCode ? (\r\n            <>\r\n              <div className=\"police-tabs\">\r\n                <button\r\n                  onClick={() => handleTabChange(\"submit\")}\r\n                  className={`police-tab-button ${activeTab === \"submit\" ? \"active\" : \"\"\r\n                    }`}\r\n                >\r\n                  신고하기\r\n                </button>\r\n                <button\r\n                  onClick={() => handleTabChange(\"status\")}\r\n                  className={`police-tab-button ${activeTab === \"status\" ? \"active\" : \"\"\r\n                    }`}\r\n                >\r\n                  처리 현황 ({statusReports.length})\r\n                </button>\r\n                <button\r\n                  onClick={() => handleTabChange(\"results\")}\r\n                  className={`police-tab-button ${activeTab === \"results\" ? \"active\" : \"\"\r\n                    }`}\r\n                >\r\n                  처리 결과 ({resultReports.length})\r\n                </button>\r\n              </div>\r\n              <div className=\"police-tab-content\">{renderTabContent()}</div>\r\n            </>\r\n          ) : (\r\n            !hasPoliceAdminRights && (\r\n              <div className=\"empty-state\">\r\n                학급 코드가 설정되어야 경찰서 기능을 이용할 수 있습니다.\r\n              </div>\r\n            )\r\n          )}\r\n        </>\r\n      ) : hasPoliceAdminRights ? (\r\n        renderTabContent()\r\n      ) : (\r\n        <div className=\"empty-state\">관리자만 접근 가능합니다.</div>\r\n      )}\r\n\r\n      {/* 모달들 */}\r\n      {isEditModalOpen && editingComplaint && (\r\n        <EditComplaintModal\r\n          complaint={editingComplaint}\r\n          onSave={handleSaveEdit}\r\n          onCancel={() => {\r\n            setIsEditModalOpen(false);\r\n            setEditingComplaint(null);\r\n          }}\r\n          users={users.filter(\r\n            (u) =>\r\n              u.id !== (editingComplaint.complainantId || editingComplaint.reporterId) &&\r\n              u.classCode === classCode\r\n          )}\r\n        />\r\n      )}\r\n      {isJudgmentModalOpen && judgingComplaint && (\r\n        <JudgmentModal\r\n          complaint={judgingComplaint}\r\n          onSave={handleSaveJudgment}\r\n          onCancel={() => {\r\n            setIsJudgmentModalOpen(false);\r\n            setJudgingComplaint(null);\r\n          }}\r\n        />\r\n      )}\r\n      {isSettlementModalOpen && settlementComplaint && (\r\n        <SettlementModal\r\n          complaint={settlementComplaint}\r\n          users={users}\r\n          onSave={handleSendSettlement}\r\n          onCancel={() => {\r\n            setIsSettlementModalOpen(false);\r\n            setSettlementComplaint(null);\r\n          }}\r\n          getUserNameById={getUserNameById}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PoliceStation;"],"names":["_ref","onSubmitReport","reportReasons","users","currentUser","reportData","setReportData","useState","reportedUserId","reason","details","lawReasons","filter","isLaw","standardReasons","handleChange","e","name","value","target","_objectSpread","getDefaultAmount","selectedReason","find","r","amount","getReasonDescription","description","_jsxs","className","children","_jsx","onSubmit","preventDefault","alert","htmlFor","id","onChange","required","map","user","length","_Fragment","disabled","index","toLocaleString","concat","placeholder","rows","type","reports","onProcessReport","onSettlement","formatDate","onAcceptReport","onDismissReport","isAdminView","activeTab","setActiveTab","showProcessModal","setShowProcessModal","selectedReport","setSelectedReport","processingAmount","setProcessingAmount","processingReason","setProcessingReason","Array","isArray","reasonInfo","handleProcessingAmountChange","replace","handleProcessSubmit","parseInt","closeModals","error","logger","acceptedReports","status","submittedReports","highlightLawName","startsWith","ProcessReportModal","React","_selectedReport$id","_selectedReport$id2","_getDefaultAmount","onClick","stopPropagation","slice","reportedUserName","reasonItem","toString","report","isLawReport","acceptanceDate","reporterName","log","defaultAmount","openProcessModal","handleSettlementClick","submitDate","onEditReport","onDeleteReport","setFilter","filteredReports","resolutionDate","resolution","processedByName","title","onUpdateReasons","onDeleteAllReports","reasons","setReasons","useEffect","JSON","parse","stringify","handleReasonChange","field","updatedReasons","min","step","handleDeleteReason","indexToDelete","window","confirm","_","handleAddReason","handleSaveChanges","some","trim","handleDeleteAllClick","EditComplaintModal","complaint","onSave","onCancel","setReason","desiredResolution","setDesiredResolution","defendantId","setDefendantId","defendantOptions","displayName","ReactDOM","handleSave","document","getElementById","body","JudgmentModal","_ref2","judgmentText","setJudgmentText","judgment","handleSaveClick","SettlementModal","_ref3","_safeComplaint$amount","_auth$userDoc","_safeComplaint$id","getUserNameById","safeComplaint","setAmount","senderId","setSenderId","recipientId","setRecipientId","complainantId","reporterId","currentAdminId","useAuth","userDoc","complaintId","availableSenders","u","availableRecipients","async","reportId","isNaN","message","defaultReasons","PoliceStation","auth","currentUserId","classCode","isSystemAdmin","loading","isAdmin","previousTab","setPreviousTab","setReportReasons","setUsers","usersLoading","setUsersLoading","isEditModalOpen","setIsEditModalOpen","editingComplaint","setEditingComplaint","isJudgmentModalOpen","setIsJudgmentModalOpen","judgingComplaint","setJudgingComplaint","isSettlementModalOpen","setIsSettlementModalOpen","settlementComplaint","setSettlementComplaint","modalRoot","createElement","appendChild","useCallback","userId","dateInput","date","toDate","Date","getTime","year","month","day","hour","minute","hour12","usersQuery","useMemo","_auth$classmates","classmates","query","collection","db","where","data","polledUsers","pollingUsersLoading","usePolling","getDocs","docs","doc","interval","enabled","deps","allUsers","push","jobsQuery","jobsRef","jobs","jobsLoading","isPoliceChief","selectedJobIds","job","includes","hasPoliceAdminRights","treasuryRef","getClassTreasuryPath","treasuryBalance","treasuryLoading","docSnap","getDoc","balance","exists","totalAmount","setDoc","stockTaxRevenue","stockCommissionRevenue","realEstateTransactionTaxRevenue","realEstateAnnualTaxRevenue","incomeTaxRevenue","corporateTaxRevenue","otherTaxRevenue","createdAt","serverTimestamp","lastUpdated","catch","err","lawsQuery","lawsRef","orderBy","limit","approvedLaws","lawsLoading","customReasonsDocRef","customReportReasons","reasonsLoading","updatedAt","customReasons","law","_law$fine","fineMatch","fine","match","join","lawId","reportsQuery","reportsRef","reportsLoading","refetch","refetchReports","_data$submitDate","_data$acceptanceDate","_data$resolutionDate","toISOString","handleTabChange","newTab","handleBackToPolice","handleAddReport","newReportData","newReport","processedById","settlementPaid","addDoc","handleAcceptReport","reportRef","updateDoc","handleDismissReport","handleProcessReport","numericProcessingAmount","finalResolution","reasonForLog","processFineTransaction","handleDeleteAllReports","snapshot","batch","writeBatch","forEach","delete","ref","commit","handleDeleteSingleReport","idToDelete","deleteDoc","handleEditSingleReport","idToEdit","reportToEdit","handleUpdateReasons","updatedCustomReasons","handleOpenSettlementModal","reportToProcess","mappedReport","reportsWithNames","statusReports","resultReports","sort","a","b","dateA","dateB","timeA","renderTabContent","SubmitReport","ReportStatus","ReportResults","PoliceAdminSettings","updatedComplaint","adminId","result","processSettlement","success","Error"],"ignoreList":[],"sourceRoot":""}