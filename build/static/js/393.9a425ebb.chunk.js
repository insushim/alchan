"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[393],{7393(e,a,s){s.r(a),s.d(a,{default:()=>N});var n=s(2555),t=s(5043),o=s(5472),r=s(4689),l=s(5016),i=s(577),c=s(9270),d=s(5452),u=s(579);const m=[{title:"LEGEND",color:"#ff0066",minRP:2e3,icon:"\ud83d\udc51"},{title:"MASTER",color:"#ff4500",minRP:1500,icon:"\ud83d\udc8e"},{title:"DIAMOND",color:"#00bfff",minRP:1300,icon:"\ud83d\udca0"},{title:"PLATINUM",color:"#4169e1",minRP:1150,icon:"\u2b50"},{title:"GOLD",color:"#ffd700",minRP:1050,icon:"\ud83c\udfc6"},{title:"SILVER",color:"#c0c0c0",minRP:950,icon:"\ud83e\udd48"},{title:"BRONZE",color:"#cd7f32",minRP:0,icon:"\ud83e\udd49"}],h=1e3,v=15,y=(e,a)=>e*v+a,f=(e,a,s)=>{if(!(a<0||a>=v||s<0||s>=v))return e[y(a,s)]},p=(e,a,s,n)=>{const t=[[1,0],[0,1],[1,1],[1,-1]];let o=0;for(const[r,l]of t){let t=0,i=0;for(let o=1;o<5;o++){const i=a+o*r,c=s+o*l;if(i<0||i>=v||c<0||c>=v)break;if(e[y(i,c)]!==n)break;t++}for(let o=1;o<5;o++){const t=a-o*r,c=s-o*l;if(t<0||t>=v||c<0||c>=v)break;if(e[y(t,c)]!==n)break;i++}const c=t+i+1,d=a+(t+1)*r,u=s+(t+1)*l,m=a-(i+1)*r,h=s-(i+1)*l;let f=0;d>=0&&d<v&&u>=0&&u<v&&null===e[y(d,u)]&&f++,m>=0&&m<v&&h>=0&&h<v&&null===e[y(m,h)]&&f++,c>=5?o+=1e8:4===c?2===f?o+=5e5:1===f&&(o+=5e4):3===c?2===f?o+=1e4:1===f&&(o+=1e3):2===c?2===f?o+=500:1===f&&(o+=50):1===c&&2===f&&(o+=10)}return o},g=(e,a,s,n)=>{const t=[{y:0,x:1},{y:1,x:0},{y:1,x:1},{y:1,x:-1}];for(const o of t){let t=1;for(let r=1;r<6;r++){const l=a+r*o.y,i=s+r*o.x;if(f(e,l,i)!==n)break;t++}for(let r=1;r<6;r++){const l=a-r*o.y,i=s-r*o.x;if(f(e,l,i)!==n)break;t++}if(5===t)return n}return null},w=(e,a,s,n,t,o)=>{const r=[...e],l=y(a,s);r[l]=n;const i=p(r,a,s,n);r[l]=t;let c=1,d=1;return"\ucd08\uae09"===o?(c=.8,d=.6):"\uc911\uae09"===o?(c=1,d=.9):"\uc0c1\uae09"===o&&(c=1.2,d=1.1),i*c+p(r,a,s,t)*d},x=e=>{const a=(null===e||void 0===e?void 0:e.wins)||0,s=(null===e||void 0===e?void 0:e.losses)||0,n=null===e||void 0===e?void 0:e.totalRP,t=void 0!==n?n:Math.max(0,h+15*a-8*s),o=m.find(e=>t>=e.minRP),r=m.findIndex(e=>e.title===o.title);let l=null,i=0;return r>0&&(l=m[r-1],i=l.minRP-t),{currentRank:o,nextRank:l,currentRP:t,pointsForNextRank:i,wins:a,losses:s}},k=async(e,a)=>{if(e&&"AI"!==e)try{const s=(0,o.H9)(r.db,"users",e);await(0,o.c4)(r.db,async n=>{const t=await n.get(s);if(!t.exists())return void d.vF.error("\uc0ac\uc6a9\uc790 ".concat(e,"\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."));const o=t.data().omok||{wins:0,losses:0,totalRP:h};let r=o.wins||0,l=o.losses||0,i=void 0!==o.totalRP?o.totalRP:h;"win"===a?(r+=1,i+=15):"loss"===a&&(l+=1,i=Math.max(0,i-8));const c={wins:r,losses:l,totalRP:i};n.update(s,{omok:c}),d.vF.log("\uc0ac\uc6a9\uc790 ".concat(e," \uc624\ubaa9 \uae30\ub85d \uc5c5\ub370\uc774\ud2b8:"),c)})}catch(s){d.vF.error("\uc0ac\uc6a9\uc790 \uc624\ubaa9 \uae30\ub85d \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958:",s)}},j=e=>{let{rankDetails:a,showProgress:s=!1,size:n="normal"}=e;if(!a)return null;const{currentRank:t,currentRP:o,nextRank:r,pointsForNextRank:l,wins:i,losses:c}=a,d=i+c>0?Math.round(i/(i+c)*100):0,m="small"===n?"rank-display-small":"rank-display";return(0,u.jsxs)("div",{className:m,children:[(0,u.jsxs)("div",{className:"rank-badge",style:{backgroundColor:t.color},children:[(0,u.jsx)("span",{className:"rank-icon",children:t.icon}),(0,u.jsx)("span",{className:"rank-title",children:t.title})]}),(0,u.jsxs)("div",{className:"rp-info",children:[(0,u.jsxs)("span",{className:"rp-value",children:[o," RP"]}),s&&(0,u.jsxs)("div",{className:"rank-stats",children:[(0,u.jsxs)("span",{className:"win-loss",children:[i,"\uc2b9 ",c,"\ud328 (",d,"%)"]}),r&&(0,u.jsxs)("div",{className:"next-rank-progress",children:[(0,u.jsxs)("span",{className:"next-rank-text",children:[r.icon," ",r.title,"\uae4c\uc9c0 ",l," RP"]}),(0,u.jsx)("div",{className:"progress-bar",children:(0,u.jsx)("div",{className:"progress-fill",style:{width:"".concat(Math.max(10,(o-t.minRP)/(r.minRP-t.minRP)*100),"%"),backgroundColor:r.color}})})]}),!r&&(0,u.jsx)("div",{className:"max-rank",children:"\ud83c\udfc6 \ucd5c\uace0 \ub7ad\ud06c!"})]})]})]})},N=()=>{var e,a,s,m,N,b;const{user:A,userDoc:F,addCouponsToUserById:I,isAdmin:R,addCash:P}=(0,l.As)(),[S,C]=(0,t.useState)(null),[M,D]=(0,t.useState)(null),[T,E]=(0,t.useState)(""),[O,G]=(0,t.useState)(null),[L,H]=(0,t.useState)(!1),[U,Z]=(0,t.useState)(null),[z,_]=(0,t.useState)(!1),[B,J]=(0,t.useState)([]),[V,W]=(0,t.useState)(!1),[q,K]=(0,t.useState)(null),[Q,X]=(0,t.useState)(null),Y=(0,t.useRef)(null),[$,ee]=(0,t.useState)({message:"",type:""}),[ae,se]=(0,t.useState)("player"),[ne,te]=(0,t.useState)("\uc911\uae09"),[oe,re]=(0,t.useState)(0),[le,ie]=(0,t.useState)(null===F||void 0===F?void 0:F.omok);(0,t.useEffect)(()=>{ie(null===F||void 0===F?void 0:F.omok)},[null===F||void 0===F?void 0:F.omok]);const ce=(0,t.useCallback)(e=>{ie(a=>{if(!a)return null;let s=a.wins||0,n=a.losses||0,t=void 0!==a.totalRP?a.totalRP:h;"win"===e?(s+=1,t+=15):"loss"===e&&(n+=1,t=Math.max(0,t-8));const o={wins:s,losses:n,totalRP:t};return d.vF.log("[LocalOptimistic] \uc804\uc801 \ub85c\uceec \uc5c5\ub370\uc774\ud2b8:",o),o})},[]),[de,ue]=(0,t.useState)(!1),[me,he]=(0,t.useState)([]),[ve,ye]=(0,t.useState)(!1),fe=(0,t.useRef)(S);(0,t.useEffect)(()=>{fe.current=S},[S]);const pe=(0,t.useRef)(M);(0,t.useEffect)(()=>{pe.current=M},[M]);const ge=(0,t.useRef)(A);(0,t.useEffect)(()=>{ge.current=A},[A]),(0,t.useEffect)(()=>{const e=()=>{const e=fe.current,a=pe.current,s=ge.current;e&&a&&s&&a.host===s.uid&&(0,o.kd)((0,o.H9)(r.db,"omokGames",e))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]);const we=()=>new Array(225).fill(null),xe=(0,t.useCallback)(async()=>{if(A){W(!0);try{const e=(0,o.rJ)(r.db,"omokGames"),a=(0,o.query)(e,(0,o.where)("gameStatus","==","waiting"),(0,o.orderBy)("createdAt","desc")),s=(await(0,o.getDocs)(a)).docs.map(e=>(0,n.A)({id:e.id},e.data()));J(s)}catch(e){d.vF.error("\uac8c\uc784 \ubaa9\ub85d \ubd88\ub7ec\uc624\uae30 \uc624\ub958:",e),E("\uac8c\uc784 \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{W(!1)}}},[]),ke=async()=>{if(!A||!F)return void E("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \ub85c\ub529 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if("ai"===ae&&oe>=5)return void E("\ud558\ub8e8\uc5d0 5\ubc88\ub9cc AI \ub300\uc804\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");W(!0);const e=F.name||F.nickname||A.displayName||"\uc775\uba85",a=F.classCode||"\ubbf8\uc124\uc815",s=x(le),t="ai"===ae;try{const l={board:we(),players:t?{[A.uid]:"black",AI:"white"}:{[A.uid]:"black"},playerNames:t?{[A.uid]:e,AI:"AI (".concat(ne,")")}:{[A.uid]:e},playerClasses:{[A.uid]:a},playerRanks:{[A.uid]:s},currentPlayer:A.uid,winner:null,createdAt:(0,o.O5)(),host:A.uid,hostName:e,hostClass:a,hostRank:s.currentRank,turnStartTime:(0,o.O5)(),history:[],gameStatus:t?"playing":"waiting",statsUpdated:!1,rematch:{},aiMode:t,aiDifficulty:t?ne:null},i=await(0,o.addDoc)((0,o.rJ)(r.db,"omokGames"),l);C(i.id),D((0,n.A)((0,n.A)({},l),{},{id:i.id,createdAt:new Date,turnStartTime:new Date})),t&&H(!0),t||G(i.id),E(""),Y.current&&Y.current()}catch(l){d.vF.error("\uac8c\uc784 \uc0dd\uc131 \uc624\ub958:",l),E("\uac8c\uc784 \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{W(!1)}},je=(0,t.useCallback)(async()=>{if(!S||!M||!A)return;const e=(0,o.H9)(r.db,"omokGames",S);try{if(M.host===A.uid){if(d.vF.log("[LeaveGame] \ud638\uc2a4\ud2b8\uac00 \ubc29\uc744 \ub5a0\ub0a8 - \ubc29 \uc0ad\uc81c"),"playing"===M.gameStatus&&!M.winner){const e=Object.keys(M.players).find(e=>e!==A.uid);if(e&&!M.aiMode){var a;ce("loss"),await k(A.uid,"loss"),await k(e,"win");const s=null===(a=M.createdAt)||void 0===a?void 0:a.toDate().getTime();s&&Date.now()-s>15e3&&I&&await I(e,1)}else M.aiMode&&(ce("loss"),await k(A.uid,"loss"))}await(0,o.kd)(e)}else if("playing"===M.gameStatus&&M.players[A.uid]&&!M.winner){const a=Object.keys(M.players).find(e=>e!==A.uid);if(a){var s;const n=null===(s=M.createdAt)||void 0===s?void 0:s.toDate().getTime(),t=n&&Date.now()-n>15e3,r={winner:a,gameStatus:"finished",statsUpdated:!0};t&&(r.couponAwardedTo=a),await(0,o.mZ)(e,r),ce("loss"),await k(A.uid,"loss"),await k(a,"win"),t&&I&&await I(a,1)}}}catch(T){d.vF.error("\uac8c\uc784 \ub098\uac00\uae30 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",T)}finally{C(null),D(null),E(""),G(null),_(!1),K(null),X(null),ue(!1),xe()}},[M,S,A,xe,I]),Ne=async(e,a)=>{d.vF.log("[Click] \uc140 \ud074\ub9ad:",{row:e,col:a}),d.vF.log("[Click] \uc0c1\ud0dc \uccb4\ud06c:",{hasGame:!!M,winner:null===M||void 0===M?void 0:M.winner,cellValue:f(null===M||void 0===M?void 0:M.board,e,a),currentPlayer:null===M||void 0===M?void 0:M.currentPlayer,userId:null===A||void 0===A?void 0:A.uid,isMyTurn:(null===M||void 0===M?void 0:M.currentPlayer)===(null===A||void 0===A?void 0:A.uid),isThinking:L,selectedCell:q}),M&&!M.winner&&!f(M.board,e,a)&&M.currentPlayer===A.uid&&L?!M.aiMode&&Object.keys(M.players).length<2?d.vF.log("[Click] \ud50c\ub808\uc774\uc5b4 2\uba85 \ubbf8\ub9cc"):q&&q.row===e&&q.col===a?(d.vF.log("[Click] \ub450 \ubc88\uc9f8 \ud074\ub9ad - \ub3cc \ubc30\uce58 \uc2dc\uc791"),await(async(e,a)=>{d.vF.log("[Player] placeStone \ud568\uc218 \uc2dc\uc791:",{row:e,col:a,gameId:S,userId:A.uid});const s=[...M.board],t=M.players[A.uid];if(s[y(e,a)]=t,d.vF.log("[Player] \ub0b4 \uc0c9:",t,"\uc704\uce58:",y(e,a)),"black"===t){const e=!1;if(e)return E("\uae08\uc218\uc785\ub2c8\ub2e4: ".concat(e,". \ub2e4\ub978 \uacf3\uc5d0 \ub450\uc138\uc694.")),K(null),void d.vF.log("[Player] \uae08\uc218\ub85c \uc778\ud574 \uc911\ub2e8")}const l=g(s,e,a,t),i=Object.keys(M.players).find(e=>e!==A.uid),c={row:e,col:a,player:t,timestamp:new Date},u=[...M.history||[],c];d.vF.log("[Player] \uc2b9\uc790 \uccb4\ud06c:",l,"\ub2e4\uc74c \ud50c\ub808\uc774\uc5b4:",i);try{const t=(0,o.H9)(r.db,"omokGames",S),c={board:s,currentPlayer:l?null:i,winner:l?A.uid:null,history:u,turnStartTime:(0,o.O5)(),gameStatus:l?"finished":"playing"};if(l&&!M.aiMode){var m;const e=null===(m=M.createdAt)||void 0===m?void 0:m.toDate().getTime();e&&Date.now()-e>15e3&&(c.couponAwardedTo=A.uid)}if(d.vF.log("[Player] Firestore \uc5c5\ub370\uc774\ud2b8 \uc2dc\uc791...",c),D((0,n.A)((0,n.A)({},M),{},{board:s,currentPlayer:l?null:i,winner:l?A.uid:null,history:u,gameStatus:l?"finished":"playing"})),Z({row:e,col:a}),H(!1),K(null),await(0,o.mZ)(t,c),d.vF.log("[Player] Firestore \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc!"),E(""),d.vF.log("[Player] \ud50c\ub808\uc774\uc5b4 \ub3cc \ubc30\uce58 \uc644\ub8cc. \ub2e4\uc74c \ucc28\ub840:",i),l)if(M.aiMode){ce("win"),await k(A.uid,"win"),await(0,o.mZ)(t,{statsUpdated:!0}),X({outcome:"win",rpChange:15});const e=Ce(M.aiDifficulty);he(e),ue(!0)}else _(!0),c.couponAwardedTo&&I&&await I(A.uid,1)}catch(h){d.vF.error("\uc6c0\uc9c1\uc784 \ucc98\ub9ac \uc624\ub958:",h),E("\uc6c0\uc9c1\uc784\uc744 \ucc98\ub9ac\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),H(!0)}})(e,a),K(null)):(d.vF.log("[Click] \uccab \ubc88\uc9f8 \ud074\ub9ad - \ubbf8\ub9ac\ubcf4\uae30"),K({row:e,col:a})):d.vF.log("[Click] \ud074\ub9ad \ubb34\uc2dc\ub428")},be=(0,t.useRef)(!1),Ae=(0,t.useRef)(null);(0,t.useEffect)(()=>{Ae.current&&!S&&(be.current=!1),Ae.current=S,!A||S||be.current||(d.vF.log("[Lobby] \uac8c\uc784 \ubaa9\ub85d \ucd5c\ucd08 \ub85c\ub4dc"),xe(),be.current=!0)},[A,S,xe]);const Fe=(0,t.useCallback)(async()=>{if(S)try{const e=(0,o.H9)(r.db,"omokGames",S),a=await(0,o.x7)(e);if(a.exists()){const s=a.data();if(D(s),s.winner&&!s.statsUpdated&&!s.aiMode){const a=s.winner,n=Object.keys(s.players).find(e=>e!==a);n&&(A.uid===a?ce("win"):A.uid===n&&ce("loss"),await k(a,"win"),await k(n,"loss"),await(0,o.mZ)(e,{statsUpdated:!0}),A.uid===a?X({outcome:"win",rpChange:15}):A.uid===n&&X({outcome:"loss",rpChange:-8}))}const n=s.history||[];n.length>0&&Z({row:n[n.length-1].row,col:n[n.length-1].col}),s.currentPlayer===A.uid&&"playing"===s.gameStatus?H(!0):(H(!1),K(null))}else C(null),D(null),E("\uac8c\uc784\uc774 \uc885\ub8cc\ub418\uc5c8\uac70\ub098 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(T){d.vF.error("\uac8c\uc784 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",T),E("\uac8c\uc784 \uc5f0\uacb0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},[S,A,ce]),Ie=!!S&&"playing"===(null===M||void 0===M?void 0:M.gameStatus)&&!(null!==M&&void 0!==M&&M.aiMode),{refetch:Re}=(0,i.nm)(Fe,{interval:3e4,enabled:Ie,deps:[S,null===M||void 0===M?void 0:M.gameStatus,null===M||void 0===M?void 0:M.aiMode]});(0,t.useEffect)(()=>{Y.current=Re},[Re]),(0,t.useEffect)(()=>{if(z){const e=setTimeout(()=>_(!1),3e3);return()=>clearTimeout(e)}},[z]);const Pe=(0,t.useCallback)(async()=>{if(!M||!M.winner||!S)return;const e=Object.keys(M.players);if(e.length<2)return;const a=M.winner,s=e.find(e=>e!==a);if(!s)return void d.vF.error("\uc7ac\ub300\uacb0\uc744 \uc704\ud55c \ud328\uc790\ub97c \uacb0\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const n={[s]:"black",[a]:"white"},t=s;try{await(0,o.mZ)((0,o.H9)(r.db,"omokGames",S),{board:we(),currentPlayer:t,players:n,winner:null,history:[],gameStatus:"playing",statsUpdated:!1,turnStartTime:(0,o.O5)(),couponAwardedTo:null,rematch:{}}),X(null),_(!1),Z(null),K(null),E("")}catch(T){d.vF.error("\uc7ac\ub300\uacb0 \ub9ac\uc14b \uc624\ub958:",T),E("\uc7ac\ub300\uacb0 \uc2dc\uc791\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},[M,S]);(0,t.useEffect)(()=>{if(M&&"finished"===M.gameStatus&&M.rematch&&(null===A||void 0===A?void 0:A.uid)===M.host&&!M.aiMode){const e=Object.keys(M.players);2===e.length&&M.rematch[e[0]]&&M.rematch[e[1]]&&Pe()}},[M,A,Pe]);const Se=(0,t.useRef)(!1);(0,t.useEffect)(()=>{if(!M||!M.aiMode||M.winner||!S)return void(Se.current=!1);if("AI"!==M.currentPlayer)return d.vF.log("[AI] \ud604\uc7ac \ucc28\ub840:",M.currentPlayer,"(AI \uc544\ub2d8)"),ye(!1),void(Se.current=!1);if(Se.current)return void d.vF.log("[AI] \uc774\ubbf8 \ucc98\ub9ac \uc911 - \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");d.vF.log("[AI] AI \ucc28\ub840 \uc2dc\uc791"),Se.current=!0,ye(!0);const e=500+1e3*Math.random(),a=setTimeout(async()=>{try{const e=M.players.AI;d.vF.log("[AI] AI \uc0c9\uc0c1:",e);const a=((e,a,s)=>{const n=[];for(let d=0;d<225;d++)e[d]&&n.push({r:Math.floor(d/v),c:d%v});if(n.length<=1){const a=Math.floor(7.5),s=[{r:a,c:a},{r:a,c:a+1},{r:a+1,c:a},{r:a+1,c:a+1},{r:a-1,c:a},{r:a,c:a-1},{r:a+1,c:a-1},{r:a-1,c:a+1}];for(const n of s)if(!e[y(n.r,n.c)])return n}const t="black"===a?"white":"black";let o=2;"\ucd08\uae09"===s?o=1:"\uc911\uae09"===s?o=2:"\uc0c1\uae09"===s&&(o=3);const r=[],l=new Set;for(const d of n)for(let a=-o;a<=o;a++)for(let s=-o;s<=o;s++){const n=d.r+a,t=d.c+s;if(n>=0&&n<v&&t>=0&&t<v){const a=y(n,t),s="".concat(n,",").concat(t);e[a]||l.has(s)||(r.push({r:n,c:t}),l.add(s))}}if(0===r.length){const a=e.findIndex(e=>null===e);return-1!==a?{r:Math.floor(a/v),c:a%v}:null}for(const d of r){const s=[...e];if(s[y(d.r,d.c)]=a,g(s,d.r,d.c,a))return d}for(const d of r){const a=[...e];if(a[y(d.r,d.c)]=t,g(a,d.r,d.c,t))return d}for(const u of r){const s=[...e];if(s[y(u.r,u.c)]=a,p(s,u.r,u.c,a)>=5e5)return d.vF.log("[AI] \ub0b4 \uc5f4\ub9b0 4 \ubc1c\uacac:",u),u}for(const u of r){const a=[...e];a[y(u.r,u.c)]=t;const s=p(a,u.r,u.c,t);if(s>=5e4)return d.vF.log("[AI] \uc0c1\ub300 4\ubaa9 \ub9c9\uae30:",u,"score:",s),u}for(const u of r){const s=[...e];if(s[y(u.r,u.c)]=a,p(s,u.r,u.c,a)>=1e4)return d.vF.log("[AI] \ub0b4 \uc5f4\ub9b0 3 \ubc1c\uacac:",u),u}for(const u of r){const a=[...e];a[y(u.r,u.c)]=t;const n=p(a,u.r,u.c,t);if(n>=1e4){if(d.vF.log("[AI] \uc0c1\ub300 \uc5f4\ub9b0 3 \ub9c9\uae30:",u,"score:",n),"\uc0c1\uae09"===s)return u;if("\uc911\uae09"===s&&Math.random()>.1)return u}}if("\ucd08\uae09"!==s)for(const u of r){const a=[...e];a[y(u.r,u.c)]=t;const n=p(a,u.r,u.c,t);if(n>=1e3){if(d.vF.log("[AI] \uc0c1\ub300 \ub2eb\ud78c 3 \ub9c9\uae30:",u,"score:",n),"\uc0c1\uae09"===s&&Math.random()>.3)return u;if("\uc911\uae09"===s&&Math.random()>.5)return u}}let i=null,c=-1/0;for(const d of r){const n=[...e];n[y(d.r,d.c)]=a;let o=w(n,d.r,d.c,a,t,s);const r=Math.floor(7.5),l=Math.abs(d.r-r)+Math.abs(d.c-r);o+=5*(v-l),"\ucd08\uae09"===s?o+=3e3*(Math.random()-.5):"\uc911\uae09"===s&&(o+=300*(Math.random()-.5)),o>c&&(c=o,i=d)}return d.vF.log("[AI] \ucd5c\uc885 \uc120\ud0dd:",i),i})(M.board,e,M.aiDifficulty);if(d.vF.log("[AI] \ucd5c\uc801\uc758 \uc218:",a),!a)return d.vF.error("[AI] \uc720\ud6a8\ud55c \uc218\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),ye(!1),void(Se.current=!1);const{r:s,c:t}=a,l=[...M.board];l[y(s,t)]=e;const i=g(l,s,t,e),c=Object.keys(M.players).find(e=>"AI"!==e),u={row:s,col:t,player:e,timestamp:new Date},m=[...M.history||[],u],h=(0,o.H9)(r.db,"omokGames",S),f={board:l,currentPlayer:i?null:c,winner:i?"AI":null,history:m,turnStartTime:(0,o.O5)(),gameStatus:i?"finished":"playing"};i&&(f.statsUpdated=!1),d.vF.log("[AI] Firestore \uc5c5\ub370\uc774\ud2b8 \uc2dc\uc791"),d.vF.log("[AI] setGame \ud638\ucd9c \uc804 - board[",y(s,t),"]:",l[y(s,t)]),D(e=>{const a=(0,n.A)((0,n.A)({},e),{},{board:l,currentPlayer:i?null:c,winner:i?"AI":null,history:m,gameStatus:i?"finished":"playing"});return d.vF.log("[AI] setGame \ud638\ucd9c - \uc0c8\ub85c\uc6b4 currentPlayer:",a.currentPlayer),d.vF.log("[AI] setGame \ud638\ucd9c - board[",y(s,t),"]:",a.board[y(s,t)]),a}),Z({row:s,col:t}),ye(!1),i||c!==(null===A||void 0===A?void 0:A.uid)||(d.vF.log("[AI] \ud50c\ub808\uc774\uc5b4 \ucc28\ub840\ub85c \ubcc0\uacbd - isThinking\uc744 true\ub85c \uc124\uc815"),H(!0)),await(0,o.mZ)(h,f),d.vF.log("[AI] \ub3cc \ubc30\uce58 \uc644\ub8cc:",s,t),i&&null!==A&&void 0!==A&&A.uid&&(ce("loss"),await k(A.uid,"loss"),await(0,o.mZ)(h,{statsUpdated:!0}),X({outcome:"loss",rpChange:-8}),d.vF.log("[AI] AI \uc2b9\ub9ac \ucc98\ub9ac \uc644\ub8cc")),ye(!1),Se.current=!1}catch(e){d.vF.error("[AI] \uc6c0\uc9c1\uc784 \ucc98\ub9ac \uc624\ub958:",e),ye(!1),Se.current=!1}},e);return()=>{clearTimeout(a)}},[null===M||void 0===M?void 0:M.currentPlayer,null===M||void 0===M?void 0:M.aiMode,null===M||void 0===M?void 0:M.winner,S,A]);const Ce=e=>[{type:"cash",amount:{"\ud558\uae09":1e3,"\uc911\uae09":3e3,"\uc0c1\uae09":5e3}[e]+Math.floor(Math.random()*{"\ud558\uae09":1e3,"\uc911\uae09":2e3,"\uc0c1\uae09":4e3}[e])},{type:"coupon",amount:1+Math.floor(Math.random()*{"\ud558\uae09":1,"\uc911\uae09":2,"\uc0c1\uae09":3}[e])}].sort(()=>Math.random()-.5);if((0,t.useEffect)(()=>{(()=>{if(!A)return;const e=(new Date).toDateString(),a="omokPlayCount_".concat(A.uid,"_").concat(e),s=parseInt(localStorage.getItem(a)||"0",10);re(s)})()},[A]),!S||!M){const e=x(le);return(0,u.jsxs)("div",{className:"game-page-container",children:[(0,u.jsxs)("div",{className:"omok-header",children:[(0,u.jsx)("h2",{children:"\uae00\ub85c\ubc8c \uc624\ubaa9 \uac8c\uc784"}),(0,u.jsx)("p",{children:"\uc804 \uc138\uacc4 \ubaa8\ub4e0 \ud50c\ub808\uc774\uc5b4\uc640 \ud568\uaed8 \ub450\ub1cc \ub300\uacb0\uc744 \ud3bc\uce58\uace0 \ucfe0\ud3f0\uc744 \ud68d\ub4dd\ud558\uc138\uc694!"}),(0,u.jsxs)("div",{className:"my-profile",children:[(0,u.jsx)(j,{rankDetails:e,showProgress:!0}),(0,u.jsxs)("div",{className:"player-info",children:[(0,u.jsx)("strong",{children:(null===F||void 0===F?void 0:F.name)||(null===F||void 0===F?void 0:F.nickname)||"\uc775\uba85"}),(null===F||void 0===F?void 0:F.classCode)&&" (".concat(F.classCode,")"),R()&&(0,u.jsx)("span",{className:"admin-badge",children:"[\uad00\ub9ac\uc790]"})]})]})]}),(0,u.jsxs)("div",{className:"omok-lobby",children:[(0,u.jsxs)("div",{className:"game-mode-selector",children:[(0,u.jsx)("h3",{children:"\uac8c\uc784 \ubaa8\ub4dc \uc120\ud0dd"}),(0,u.jsxs)("div",{className:"mode-options",children:[(0,u.jsx)("button",{className:"omok-button ".concat("player"===ae?"primary":""),onClick:()=>se("player"),children:"\ud83d\udc65 \ud50c\ub808\uc774\uc5b4 \ub300\uc804"}),(0,u.jsxs)("button",{className:"omok-button ".concat("ai"===ae?"primary":""),onClick:()=>se("ai"),children:["\ud83e\udd16 AI \ub300\uc804 (",oe,"/5)"]})]})]}),"ai"===ae&&(0,u.jsxs)("div",{className:"ai-difficulty-selector",children:[(0,u.jsx)("h3",{children:"AI \ub09c\uc774\ub3c4"}),(0,u.jsxs)("div",{className:"difficulty-options",children:[(0,u.jsx)("button",{className:"\ud558\uae09"===ne?"selected":"",onClick:()=>te("\ud558\uae09"),children:"\ud83d\ude0a \ud558\uae09"}),(0,u.jsx)("button",{className:"\uc911\uae09"===ne?"selected":"",onClick:()=>te("\uc911\uae09"),children:"\ud83e\udd14 \uc911\uae09"}),(0,u.jsx)("button",{className:"\uc0c1\uae09"===ne?"selected":"",onClick:()=>te("\uc0c1\uae09"),children:"\ud83d\udd25 \uc0c1\uae09"})]})]}),(0,u.jsxs)("div",{className:"lobby-section",children:[(0,u.jsx)("h3",{children:"\uac8c\uc784 \ucc38\uc5ec\ud558\uae30"}),(0,u.jsxs)("div",{className:"lobby-actions",children:[(0,u.jsx)("button",{onClick:ke,className:"omok-button primary",disabled:V,children:V?"\uc0dd\uc131 \uc911...":"ai"===ae?"AI \ub300\uc804 \uc2dc\uc791":"\uc0c8 \uac8c\uc784 \ub9cc\ub4e4\uae30"}),O&&!T&&"player"===ae&&(0,u.jsxs)("div",{className:"omok-success",children:["\uac8c\uc784\ubc29\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"," ",(0,u.jsxs)("strong",{children:["\uac8c\uc784 ID: ",O.slice(-6)]}),(0,u.jsx)("br",{}),"\ub2e4\ub978 \ud50c\ub808\uc774\uc5b4\uac00 \ucc38\uac00\ud558\uae30\ub97c \uae30\ub2e4\ub9ac\uace0 \uc788\uc2b5\ub2c8\ub2e4."]})]})]}),"player"===ae&&(0,u.jsxs)("div",{className:"lobby-section",children:[(0,u.jsxs)("div",{className:"section-header",children:[(0,u.jsxs)("h3",{children:["\ud83c\udf0d \uc804\uccb4 \uacf5\uac1c\ubc29(",B.length,")"]}),(0,u.jsx)("button",{onClick:xe,className:"omok-button small",disabled:V,children:V?"...":"\uc0c8\ub85c\uace0\uce68"})]}),B.length>0?(0,u.jsx)("div",{className:"game-rooms",children:B.map(e=>{var a,s,t,l;const i=x({wins:(null===(a=e.hostRank)||void 0===a?void 0:a.wins)||0,losses:(null===(s=e.hostRank)||void 0===s?void 0:s.losses)||0,totalRP:(null===(t=e.hostRank)||void 0===t?void 0:t.currentRP)||h});return(0,u.jsxs)("div",{className:"game-room-card",onClick:()=>(async e=>{if(!A||!F||!e)return;W(!0),E("");const a=F.name||F.nickname||A.displayName||"\uc775\uba85",s=F.classCode||"\ubbf8\uc124\uc815",t=x(le);try{const l=(0,o.H9)(r.db,"omokGames",e);await(0,o.c4)(r.db,async r=>{const i=await r.get(l);if(!i.exists())throw new Error("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uac8c\uc784\uc785\ub2c8\ub2e4.");const c=i.data();if(Object.keys(c.players).length>=2&&!c.players[A.uid])throw new Error("\uc774\ubbf8 \uac00\ub4dd \ucc2c \ubc29\uc785\ub2c8\ub2e4.");c.players[A.uid]||r.update(l,{players:(0,n.A)((0,n.A)({},c.players),{},{[A.uid]:"white"}),playerNames:(0,n.A)((0,n.A)({},c.playerNames),{},{[A.uid]:a}),playerClasses:(0,n.A)((0,n.A)({},c.playerClasses),{},{[A.uid]:s}),playerRanks:(0,n.A)((0,n.A)({},c.playerRanks),{},{[A.uid]:t}),gameStatus:"playing",turnStartTime:(0,o.O5)()}),C(e)})}catch(l){d.vF.error("\uac8c\uc784 \ucc38\uac00 \uc624\ub958:",l),E(l.message),xe()}finally{W(!1)}})(e.id),children:[R()&&(0,u.jsx)("button",{className:"admin-delete-btn",onClick:a=>(async(e,a)=>{if(a.stopPropagation(),R()){if(window.confirm("\uc774 \uac8c\uc784\ubc29\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await(0,o.kd)((0,o.H9)(r.db,"omokGames",e)),d.vF.log("[\uad00\ub9ac\uc790] \uac8c\uc784\ubc29 ".concat(e," \uc0ad\uc81c \uc644\ub8cc")),xe()}catch(s){d.vF.error("\uac8c\uc784\ubc29 \uc0ad\uc81c \uc624\ub958:",s),E("\uac8c\uc784\ubc29 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else d.vF.error("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")})(e.id,a),title:"\uac8c\uc784\ubc29 \uc0ad\uc81c",children:"\u2715"}),(0,u.jsxs)("div",{className:"room-header",children:[(0,u.jsxs)("div",{className:"room-host",children:[(0,u.jsx)(j,{rankDetails:i,size:"small"}),(0,u.jsxs)("span",{className:"host-name",children:[e.hostName,"\ub2d8\uc758 \ubc29"]}),(0,u.jsxs)("span",{className:"host-class",children:["(",e.hostClass||"\ubbf8\uc124\uc815",")"]})]}),(0,u.jsxs)("div",{className:"room-id",children:["#",e.id.slice(-6)]})]}),(0,u.jsxs)("div",{className:"room-info",children:[(0,u.jsxs)("span",{className:"player-count",children:["\ud83d\udc65",Object.keys(e.players).length,"/2"]}),(0,u.jsx)("span",{className:"room-status global-status",children:"\ub300\uae30\uc911"})]}),(0,u.jsx)("div",{className:"room-time",children:null!==(l=e.createdAt)&&void 0!==l&&l.toDate?e.createdAt.toDate().toLocaleTimeString("ko-KR"):"\ubc29\uae08 \uc804"})]},e.id)})}):(0,u.jsx)("div",{className:"no-games",children:V?"\uac8c\uc784 \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911...":"\ud604\uc7ac \ucc38\uac00 \uac00\ub2a5\ud55c \uac8c\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8 \uac8c\uc784\uc744 \ub9cc\ub4e4\uc5b4\ubcf4\uc138\uc694!"})]}),T&&(0,u.jsx)("div",{className:"omok-error",children:T}),$.message&&(0,u.jsx)("div",{className:"feedback ".concat($.type),children:$.message})]})]})}const Me=M.players[A.uid],De=Object.keys(M.players).find(e=>e!==A.uid),Te=De?M.players[De]:null,Ee=De?(null===(e=M.playerNames)||void 0===e?void 0:e[De])||"\uc0c1\ub300":"\ub300\uae30 \uc911...",Oe=null===(a=M.playerRanks)||void 0===a?void 0:a[A.uid],Ge="AI"===De?null:De?null===(s=M.playerRanks)||void 0===s?void 0:s[De]:null,Le=M.currentPlayer===A.uid,He=M.rematch&&M.rematch[A.uid],Ue=De&&M.rematch&&M.rematch[De];return(0,u.jsxs)("div",{className:"omok-container",children:[z&&(0,u.jsx)("div",{className:"win-animation",children:"\uc2b9\ub9ac!"}),de&&(0,u.jsx)("div",{className:"reward-modal",children:(0,u.jsxs)("div",{className:"reward-content",children:[(0,u.jsx)("h3",{children:"\ud83c\udf89 \uc2b9\ub9ac \ubcf4\uc0c1!"}),(0,u.jsx)("p",{children:"\ud558\ub098\uc758 \uce74\ub4dc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,u.jsx)("div",{className:"reward-cards",children:me.map((e,a)=>(0,u.jsxs)("div",{className:"reward-card",onClick:()=>(async e=>{if(!A||!S)return void d.vF.log("[Reward] user \ub610\ub294 gameId \uc5c6\uc74c");d.vF.log("[Reward] \ubcf4\uc0c1 \uc120\ud0dd:",e);const a=(new Date).toDateString(),s="omokPlayCount_".concat(A.uid,"_").concat(a),n=oe+1;localStorage.setItem(s,n.toString()),re(n),ue(!1),ee({message:"cash"===e.type?"\ud604\uae08 ".concat(e.amount.toLocaleString(),"\uc6d0\uc744 \ud68d\ub4dd\ud588\uc2b5\ub2c8\ub2e4!"):"\ucfe0\ud3f0 ".concat(e.amount,"\uac1c\ub97c \ud68d\ub4dd\ud588\uc2b5\ub2c8\ub2e4!"),type:"success"});try{"cash"===e.type?d.vF.log("[Reward] \ud604\uae08 \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8:",e.amount):"coupon"===e.type&&d.vF.log("[Reward] \ucfe0\ud3f0 \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8:",e.amount),"cash"===e.type?(d.vF.log("[Reward] \ud604\uae08 \uc9c0\uae09:",e.amount),await P(e.amount,"AI \uc624\ubaa9 \uc2b9\ub9ac \ubcf4\uc0c1")):"coupon"===e.type&&(d.vF.log("[Reward] \ucfe0\ud3f0 \uc9c0\uae09:",e.amount),await I(A.uid,e.amount)),(0,c.Mx)(r.db,{classCode:null===F||void 0===F?void 0:F.classCode,userId:A.uid,userName:(null===F||void 0===F?void 0:F.name)||"\uc0ac\uc6a9\uc790",type:c.gI.GAME_WIN,description:"\uc624\ubaa9 AI(".concat((null===M||void 0===M?void 0:M.aiDifficulty)||"\uc911\uae09",") \uc2b9\ub9ac - ").concat("cash"===e.type?"\ud604\uae08 ".concat(e.amount.toLocaleString(),"\uc6d0"):"\ucfe0\ud3f0 ".concat(e.amount,"\uac1c")," \ud68d\ub4dd"),amount:"cash"===e.type?e.amount:0,couponAmount:"coupon"===e.type?e.amount:0,metadata:{gameType:"omok",opponent:"AI",difficulty:(null===M||void 0===M?void 0:M.aiDifficulty)||"\uc911\uae09",rewardType:e.type,rewardAmount:e.amount}}),d.vF.log("[Reward] \ubcf4\uc0c1 \uc9c0\uae09 \uc644\ub8cc"),setTimeout(()=>je(),2e3)}catch(T){d.vF.error("[Reward] Error applying reward:",T),ee({message:"\ubcf4\uc0c1 \uc9c0\uae09\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",type:"error"});const a=oe;localStorage.setItem(s,a.toString()),re(a)}})(e),children:[(0,u.jsx)("div",{className:"card-icon",children:"cash"===e.type?"\ud83d\udcb5":"\ud83c\udfab"}),(0,u.jsx)("div",{className:"card-title",children:"cash"===e.type?"\ud604\uae08":"\ucfe0\ud3f0"}),(0,u.jsx)("div",{className:"card-amount",children:"cash"===e.type?"".concat(e.amount.toLocaleString(),"\uc6d0"):"".concat(e.amount,"\uac1c")})]},a))})]})}),(0,u.jsxs)("div",{className:"omok-header",children:[(0,u.jsx)("h2",{children:M.aiMode?"\ud83e\udd16 AI \ub300\uc804":"\ud83c\udf0d \uae00\ub85c\ubc8c \uc624\ubaa9 \uac8c\uc784"}),(0,u.jsxs)("div",{className:"game-info",children:[(0,u.jsxs)("span",{className:"game-id",children:["ID: ",S.slice(-6)]}),(0,u.jsx)("span",{className:"game-rules",children:"\uaddc\uce59: \ub80c\uc8fc\ub8f0"}),M.aiMode?(0,u.jsxs)("span",{className:"global-match",children:["\ub09c\uc774\ub3c4: ",M.aiDifficulty]}):(0,u.jsx)("span",{className:"global-match",children:"\uc804\uc138\uacc4 \ub9e4\uce6d"})]})]}),(0,u.jsxs)("div",{className:"player-status",children:[(0,u.jsxs)("div",{className:"player-card ".concat(Me," ").concat(Le&&!M.winner?"active":""),children:[(0,u.jsxs)("div",{className:"player-info",children:[(0,u.jsx)(j,{rankDetails:Oe,size:"small"}),(0,u.jsx)("span",{className:"player-name",children:(null===(m=M.playerNames)||void 0===m?void 0:m[A.uid])||"\ub098"}),(0,u.jsx)("div",{className:"stone-indicator ".concat(Me)})]}),Le&&L&&!M.winner&&(0,u.jsx)("div",{className:"opponent-thinking",children:"\ub2f9\uc2e0 \ucc28\ub840"})]}),(0,u.jsxs)("div",{className:"player-card ".concat(Te||""," ").concat(Le||M.winner||!De?"":"active"),children:[(0,u.jsxs)("div",{className:"player-info",children:[Ge&&(0,u.jsx)(j,{rankDetails:Ge,size:"small"}),(0,u.jsx)("span",{className:"player-name",children:Ee}),Te&&(0,u.jsx)("div",{className:"stone-indicator ".concat(Te)})]}),(!Le&&De||ve)&&!M.winner&&(0,u.jsx)("div",{className:"opponent-thinking",children:"\uc0dd\uac01 \uc911..."})]})]}),(0,u.jsx)("div",{className:"omok-board-container",children:(()=>{const e=[],a=[3,7,11],s=[];for(let t=0;t<v;t++)s.push((0,u.jsx)("div",{className:"grid-line horizontal",style:{top:"calc((".concat(t," + 0.5) * var(--cell-size))")}},"h-line-".concat(t)));const n=[];for(let t=0;t<v;t++)n.push((0,u.jsx)("div",{className:"grid-line vertical",style:{left:"calc((".concat(t," + 0.5) * var(--cell-size))")}},"v-line-".concat(t)));for(let t=0;t<v;t++)for(let s=0;s<v;s++){const n=f(M.board,t,s),o=q&&q.row===t&&q.col===s,r=U&&U.row===t&&U.col===s,l=a.includes(t)&&a.includes(s);e.push((0,u.jsxs)("div",{className:"omok-cell ".concat(M.currentPlayer!==A.uid||n?"":"clickable"," ").concat(o?"preview":""),onClick:()=>Ne(t,s),style:{gridRow:t+1,gridColumn:s+1},children:[l&&(0,u.jsx)("div",{className:"star-point"}),n&&(0,u.jsx)("div",{className:"omok-stone ".concat(n),children:r&&(0,u.jsx)("div",{className:"last-move-indicator"})})]},"".concat(t,"-").concat(s)))}return(0,u.jsxs)("div",{className:"omok-board",style:{"--board-size":v},children:[(0,u.jsxs)("div",{className:"grid-lines-container",children:[s,n]}),e]})})()}),(0,u.jsx)("div",{className:"omok-status",children:M.winner?(0,u.jsxs)("div",{className:"winner-announcement",children:["AI"===M.winner?"AI\uc758 \uc2b9\ub9ac!":((null===(N=M.playerNames)||void 0===N?void 0:N[M.winner])||"\uc2b9\uc790")+" \ub2d8\uc758 \uc2b9\ub9ac!",Q&&(0,u.jsxs)("span",{className:"rp-change ".concat(Q.outcome),children:["(",Q.rpChange>0?"+":"",Q.rpChange," RP)"]}),(0,u.jsx)("br",{}),!M.aiMode&&M.winner===A.uid&&M.couponAwardedTo===A.uid&&"\ud83c\udf89 \ucfe0\ud3f0 1\uac1c\ub97c \ud68d\ub4dd\ud588\uc2b5\ub2c8\ub2e4!",!M.aiMode&&M.winner===A.uid&&M.couponAwardedTo!==A.uid&&"(\uac8c\uc784 \uc2dc\uac04\uc774 15\ucd08 \ubbf8\ub9cc\uc774\ub77c \ucfe0\ud3f0\uc774 \uc9c0\uae09\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.)"]}):(0,u.jsxs)("div",{className:"turn-info",children:["\ud604\uc7ac \ucc28\ub840:"," ",Le?"\ub2f9\uc2e0":"AI"===M.currentPlayer?"AI":(null===(b=M.playerNames)||void 0===b?void 0:b[M.currentPlayer])||"\uc0c1\ub300",Object.keys(M.players).length<2&&!M.aiMode&&(0,u.jsx)("div",{className:"waiting-player",children:"\uc0c1\ub300\ubc29\uc744 \uae30\ub2e4\ub9ac\uace0 \uc788\uc2b5\ub2c8\ub2e4..."})]})}),T&&(0,u.jsx)("div",{className:"omok-error",children:T}),$.message&&(0,u.jsx)("div",{className:"feedback ".concat($.type),children:$.message}),(0,u.jsx)("div",{className:"game-controls",children:"finished"===M.gameStatus?(0,u.jsxs)(u.Fragment,{children:[!M.aiMode&&!He&&(0,u.jsx)("button",{onClick:async()=>{if(S&&A)try{await(0,o.mZ)((0,o.H9)(r.db,"omokGames",S),{["rematch.".concat(A.uid)]:!0})}catch(e){d.vF.error("\uc7ac\ub300\uacb0 \uc694\uccad \uc624\ub958:",e),E("\uc7ac\ub300\uacb0\uc744 \uc694\uccad\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"omok-button primary",children:"\ub2e4\uc2dc \ud558\uae30"}),(0,u.jsx)("button",{onClick:je,className:"omok-button secondary",children:"\ub85c\ube44\ub85c \ub3cc\uc544\uac00\uae30"})]}):(0,u.jsx)("button",{onClick:je,className:"omok-button secondary",children:"\uae30\uad8c\ud558\uace0 \ub098\uac00\uae30"})}),!M.aiMode&&"finished"===M.gameStatus&&(0,u.jsxs)("div",{className:"rematch-info",style:{textAlign:"center",marginTop:"1rem",color:"white",fontWeight:600},children:[He&&!Ue&&(0,u.jsx)("p",{children:"\uc7ac\ub300\uacb0\uc744 \uc694\uccad\ud588\uc2b5\ub2c8\ub2e4. \uc0c1\ub300\ubc29\uc744 \uae30\ub2e4\ub9bd\ub2c8\ub2e4..."}),Ue&&!He&&(0,u.jsx)("p",{children:"\uc0c1\ub300\ubc29\uc774 \uc7ac\ub300\uacb0\uc744 \uc6d0\ud569\ub2c8\ub2e4!"}),He&&Ue&&(0,u.jsx)("p",{children:"\uc591\ucabd \ubaa8\ub450 \uc7ac\ub300\uacb0\uc744 \uc6d0\ud569\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \uac8c\uc784\uc774 \ub2e4\uc2dc \uc2dc\uc791\ub429\ub2c8\ub2e4!"})]})]})}}}]);
//# sourceMappingURL=393.9a425ebb.chunk.js.map