"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[1657,3433],{6555(e,s,a){a.d(s,{Gu:()=>i,LN:()=>l,pp:()=>d,rA:()=>o,zY:()=>r});a(5043);var t=a(2024),n=(a(5881),a(579));const l=e=>{let{children:s,className:a=""}=e;return(0,n.jsx)("div",{className:"min-h-full w-full bg-[#0a0a12] ".concat(a),children:(0,n.jsx)("div",{className:"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2",children:s})})},r=e=>{let{title:s,subtitle:a,icon:t,badge:l,action:r,backButton:i,className:d=""}=e;return(0,n.jsxs)("section",{className:"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ".concat(d),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[i,t&&(0,n.jsx)("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30",children:(0,n.jsx)(t,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h2",{className:"text-lg md:text-xl font-bold text-white tracking-tight",children:s}),l]}),a&&(0,n.jsx)("p",{className:"text-xs md:text-sm text-slate-400 font-medium",children:a})]})]}),r&&(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto",children:r})]})},i=e=>{let{message:s="\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}=e;return null},d=e=>{let{icon:s,title:a,description:t,action:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[s&&(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30",children:(0,n.jsx)(s,{className:"w-8 h-8 text-slate-400"})}),a&&(0,n.jsx)("h3",{className:"text-lg font-bold text-slate-300 mb-2",children:a}),t&&(0,n.jsx)("p",{className:"text-slate-400 font-medium mb-6 max-w-md",children:t}),l]})},o=e=>{let{children:s,icon:a,variant:l="primary",size:r="md",loading:i=!1,disabled:d=!1,onClick:o,className:c="",title:m}=e;return(0,n.jsxs)("button",{onClick:o,disabled:d||i,title:m,className:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat({primary:"bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30",secondary:"bg-slate-800 hover:bg-slate-700 text-slate-200",outline:"bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm","outline-green":"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm","outline-red":"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",danger:"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",success:"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm",ghost:"text-slate-400 hover:bg-slate-800 hover:text-white",indigo:"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}[l]," ").concat({sm:"px-4 py-2 text-sm",md:"px-5 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(c),children:[i?(0,n.jsx)(t.A,{className:"w-4 h-4 animate-spin"}):a?(0,n.jsx)(a,{className:"w-4 h-4"}):null,s]})}},8625(e,s,a){a.r(s),a.d(s,{default:()=>fe});var t=a(2555),n=a(5043),l=a(5016),r=a(2864),i=a(5472),d=a(2395),o=a(7950);var c=a(5452),m=a(579);const u=(0,n.memo)(function(e){let{task:s,onEarnCoupon:a,onRequestApproval:l,isJobTask:r,isAdmin:i,onEditTask:d,onDeleteTask:u,taskId:M,jobId:J=null}=e;const[E,R]=(0,n.useState)(!1),[_,O]=(0,n.useState)(""),[L,P]=(0,n.useState)(!1),[W,z]=(0,n.useState)(null),[q,H]=(0,n.useState)(null),[B,G]=(0,n.useState)(!1),K=e=>{B||q||(c.vF.log("[TaskItem] \uce74\ub4dc \uc120\ud0dd:",{cardType:e,taskId:M,jobId:J,isJobTask:r,requiresApproval:s.requiresApproval}),H(e),G(!0),setTimeout(()=>{const t="cash"===e?W.cash:W.coupon,n="cash"===e?"".concat(t.toLocaleString(),"\uc6d0"):"".concat(t,"\uac1c");if(s.requiresApproval&&"function"===typeof l)return c.vF.log("[TaskItem] onRequestApproval \ud638\ucd9c:",{taskId:M,jobId:J,isJobTask:r,cardType:e,reward:t}),l(M||s.id,J,r,e,t),P(!1),O("\uc2b9\uc778 \uc694\uccad \uc644\ub8cc! \uad00\ub9ac\uc790 \uc2b9\uc778 \ud6c4 \ubcf4\uc0c1\uc774 \uc9c0\uae09\ub429\ub2c8\ub2e4."),R(!0),void G(!1);c.vF.log("[TaskItem] onEarnCoupon \ud638\ucd9c \uc900\ube44:",{taskId:M,jobId:J,isJobTask:r,cardType:e,reward:t}),"function"===typeof a&&a(M||s.id,J,r,e,t),P(!1),O("".concat("cash"===e?"\ud83d\udcb0 \ud604\uae08":"\ud83c\udfab \ucfe0\ud3f0"," ").concat(n," \ud68d\ub4dd!")),R(!0),G(!1)},800))};(0,n.useEffect)(()=>{let e;return E&&(e=setTimeout(()=>{R(!1),O("")},2e3)),()=>clearTimeout(e)},[E]);const V=s&&s.maxClicks>0&&s.clicks>=s.maxClicks;if(!s)return null;const U=window.innerWidth<=768,Q={backgroundColor:V?"rgba(20, 20, 35, 0.4)":"rgba(30, 30, 50, 0.6)",border:"1px solid ".concat(V?"rgba(100, 116, 139, 0.1)":"rgba(0, 255, 242, 0.15)"),opacity:V?.6:1,padding:U?"8px 10px":"12px",boxShadow:V?"none":"0 4px 12px rgba(0, 0, 0, 0.1)"},X={gap:U?"6px":"10px"},Y={color:V?"#64748b":"#e8e8ff",fontSize:U?"12px":"16px",lineHeight:"1.4"},Z={gap:U?"4px":"8px"},$={backgroundColor:r?"rgba(79, 70, 229, 0.3)":"rgba(16, 185, 129, 0.3)",color:r?"#818cf8":"#34d399",border:r?"1px solid rgba(99, 102, 241, 0.5)":"1px solid rgba(52, 211, 153, 0.5)",padding:U?"3px 6px":"4px 10px",fontSize:U?"10px":"13px"};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all",style:(0,t.A)((0,t.A)({},Q),{},{cursor:V?"default":"pointer",gap:U?"6px":"8px"}),onClick:V?null:()=>{if(c.vF.log("[TaskItem] handleInternalClick \ud638\ucd9c\ub428:",{taskName:null===s||void 0===s?void 0:s.name,isJobTask:r,taskId:M,jobId:J}),!s||"number"!==typeof s.clicks||"number"!==typeof s.maxClicks)return void c.vF.error("Invalid task prop:",s);if(s.maxClicks>0&&s.clicks>=s.maxClicks)return;c.vF.log("[TaskItem] \uce74\ub4dc \ubaa8\ub2ec \uc5f4\uae30");const e=(()=>{const e=e=>{const s=e.reduce((e,s)=>e+s.weight,0);let a=Math.random()*s;for(const t of e)if(a-=t.weight,a<=0)return t.amount;return e[e.length-1].amount};return{cash:e([{amount:5e4,weight:5},{amount:3e4,weight:10},{amount:2e4,weight:15},{amount:1e4,weight:20},{amount:5e3,weight:18},{amount:3e3,weight:12},{amount:1e3,weight:10},{amount:500,weight:7},{amount:100,weight:3}]),coupon:e([{amount:20,weight:10},{amount:10,weight:20},{amount:5,weight:20},{amount:3,weight:20},{amount:1,weight:30}])}})();z(e),H(null),G(!1),P(!0)},children:[(0,m.jsx)("div",{className:"flex items-center flex-grow min-w-0 overflow-hidden",style:X,children:(0,m.jsx)("span",{className:"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0",style:Y,title:s.name,children:s.name})}),(0,m.jsxs)("div",{className:"flex items-center flex-shrink-0",style:Z,children:[(0,m.jsx)("span",{className:"rounded-lg font-medium whitespace-nowrap",style:s.requiresApproval?x:$,children:s.requiresApproval?"\u23f3 \uc2b9\uc778\ud544\uc694":"\ud83c\udf81 \ub79c\ub364\ubcf4\uc0c1"}),i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"cursor-pointer p-1 flex items-center justify-center",style:h,"aria-label":"\ud560\uc77c \uc218\uc815",children:"\u270f\ufe0f"}),(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),u()},className:"cursor-pointer p-1 flex items-center justify-center",style:h,"aria-label":"\ud560\uc77c \uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]}),E&&(0,m.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none",style:p,children:[_,(0,m.jsx)("div",{className:"absolute",style:b})]})]}),(()=>{if(!L||!W)return null;const e=(0,t.A)((0,t.A)({},f),{},{padding:U?"20px":"40px"}),s=(0,t.A)((0,t.A)({},v),{},{fontSize:U?"20px":"28px"}),a=(0,t.A)((0,t.A)({},j),{},{fontSize:U?"13px":"16px"}),n=(0,t.A)((0,t.A)({},y),{},{gap:U?"15px":"20px"}),l=(0,t.A)((0,t.A)({},k),{},{width:U?"140px":"200px",height:U?"200px":"280px"}),r=(0,t.A)((0,t.A)({},T),{},{fontSize:U?"50px":"80px",marginBottom:U?"10px":"20px"}),i=(0,t.A)((0,t.A)({},F),{},{fontSize:U?"18px":"24px"}),d=(0,t.A)((0,t.A)({},D),{},{fontSize:U?"24px":"36px"}),c=(0,t.A)((0,t.A)({},I),{},{fontSize:U?"14px":"18px"});return(0,o.createPortal)((0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[10000]",style:g,onClick:()=>P(!1),children:(0,m.jsxs)("div",{className:"rounded-[20px] max-w-[600px]",style:(0,t.A)((0,t.A)({},e),{},{width:U?"95%":"90%"}),onClick:e=>e.stopPropagation(),children:[(0,m.jsx)("h3",{className:"text-center font-bold",style:(0,t.A)((0,t.A)({},s),{},{marginBottom:U?"8px":"10px"}),children:"\ud83c\udf81 \ubcf4\uc0c1 \uc120\ud0dd"}),(0,m.jsx)("p",{className:"text-center",style:(0,t.A)((0,t.A)({},a),{},{marginBottom:U?"20px":"30px"}),children:"\ub450 \uac1c\uc758 \uce74\ub4dc \uc911 \ud558\ub098\ub97c \uc120\ud0dd\ud558\uc138\uc694!"}),(0,m.jsxs)("div",{className:"flex justify-center flex-wrap",style:n,children:[(0,m.jsx)("div",{className:"cursor-pointer",style:(0,t.A)((0,t.A)({},l),"cash"===q&&N),onClick:()=>!q&&K("cash"),children:(0,m.jsxs)("div",{className:"relative w-full h-full",style:(0,t.A)((0,t.A)({},A),{},{transform:"cash"===q?"rotateY(180deg)":"rotateY(0deg)"}),children:[(0,m.jsxs)("div",{className:"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center",style:(0,t.A)((0,t.A)({},w),{},{backfaceVisibility:"hidden"}),children:[(0,m.jsx)("div",{style:r,children:"\ud83d\udcb0"}),(0,m.jsx)("div",{className:"text-2xl font-bold",style:i,children:"\ud604\uae08"})]}),(0,m.jsxs)("div",{className:"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center",style:(0,t.A)((0,t.A)((0,t.A)({},C),"cash"===q&&S),{},{backfaceVisibility:"hidden"}),children:[(0,m.jsxs)("div",{className:"text-4xl font-bold mb-2.5",style:d,children:[W.cash.toLocaleString(),"\uc6d0"]}),(0,m.jsx)("div",{className:"text-lg",style:c,children:"\ud83d\udcb0 \ud604\uae08 \ud68d\ub4dd!"})]})]})}),(0,m.jsx)("div",{className:"cursor-pointer",style:(0,t.A)((0,t.A)({},l),"coupon"===q&&N),onClick:()=>!q&&K("coupon"),children:(0,m.jsxs)("div",{className:"relative w-full h-full",style:(0,t.A)((0,t.A)({},A),{},{transform:"coupon"===q?"rotateY(180deg)":"rotateY(0deg)"}),children:[(0,m.jsxs)("div",{className:"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center",style:(0,t.A)((0,t.A)({},w),{},{backfaceVisibility:"hidden"}),children:[(0,m.jsx)("div",{style:r,children:"\ud83c\udfab"}),(0,m.jsx)("div",{className:"text-2xl font-bold",style:i,children:"\ucfe0\ud3f0"})]}),(0,m.jsxs)("div",{className:"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center",style:(0,t.A)((0,t.A)((0,t.A)({},C),"coupon"===q&&S),{},{backfaceVisibility:"hidden"}),children:[(0,m.jsxs)("div",{className:"text-4xl font-bold mb-2.5",style:d,children:[W.coupon,"\uac1c"]}),(0,m.jsx)("div",{className:"text-lg",style:c,children:"\ud83c\udfab \ucfe0\ud3f0 \ud68d\ub4dd!"})]})]})})]})]})}),document.body)})()]})}),x={backgroundColor:"rgba(245, 158, 11, 0.3)",color:"#fbbf24",border:"1px solid rgba(245, 158, 11, 0.5)",padding:"4px 10px",fontSize:"13px"},h={background:"none",border:"none",fontSize:"16px",color:"#94a3b8"},p={bottom:"calc(100% + 8px)",backgroundColor:"rgba(0, 0, 0, 0.75)",color:"white",padding:"5px 10px",fontSize:"12px",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"},b={content:'""',top:"100%",left:"50%",marginLeft:"-5px",borderWidth:"5px",borderStyle:"solid",borderColor:"rgba(0, 0, 0, 0.75) transparent transparent transparent"},g={backgroundColor:"rgba(0, 0, 0, 0.7)",animation:"fadeIn 0.3s ease"},f={backgroundColor:"#1a1a2e",border:"1px solid rgba(0, 255, 242, 0.3)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",animation:"zoomIn 0.3s ease"},v={color:"#ffffff",textShadow:"0 0 10px rgba(0, 255, 242, 0.5)"},j={color:"#a0a0c0"},y={gap:"20px"},k={perspective:"1000px",transition:"transform 0.2s ease"},N={transform:"scale(1.05)"},A={transition:"transform 0.8s",transformStyle:"preserve-3d"},w={background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",border:"3px solid #fff"},C={backgroundColor:"#fff",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",border:"3px solid #667eea",transform:"rotateY(180deg)",opacity:0,transition:"opacity 0.3s ease 0.4s"},S={opacity:1},T={fontSize:"80px",marginBottom:"20px"},F={color:"white"},D={color:"#667eea"},I={color:"#666"},M=(0,n.memo)(function(e){let{job:s,isAdmin:a,onEditJob:t,onDeleteJob:n,onAddTask:l,onEditTask:r,onDeleteTask:i,onEarnCoupon:d,onRequestApproval:o,addJobTaskButtonStyle:c}=e;if(!s)return null;const x=window.innerWidth<=768;return(0,m.jsxs)("div",{className:"flex flex-col h-full rounded-lg overflow-hidden mb-4",style:{backgroundColor:"rgba(20, 20, 35, 0.6)",border:"1px solid rgba(0, 255, 242, 0.2)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)",backdropFilter:"blur(5px)"},children:[(0,m.jsxs)("div",{className:"job-header-container flex justify-between items-center",style:{background:"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)",padding:x?"12px 14px":"14px 16px",borderBottom:"1px solid rgba(0, 255, 242, 0.2)"},children:[(0,m.jsx)("div",{className:"job-title-text font-bold",style:{fontSize:x?"15px":"18px",textShadow:"0 0 10px rgba(0, 255, 242, 0.3)",letterSpacing:"-0.01em",color:"#e8e8ff"},children:s.title}),a&&(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{onClick:()=>t(s.id),className:"cursor-pointer p-0 mr-2",style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.7)"},"aria-label":"".concat(s.title," \uc9c1\uc5c5 \uc218\uc815"),children:"\u270f\ufe0f"}),(0,m.jsx)("button",{onClick:()=>n(s.id),className:"cursor-pointer p-0",style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.7)"},"aria-label":"".concat(s.title," \uc9c1\uc5c5 \uc0ad\uc81c"),children:"\ud83d\uddd1\ufe0f"})]})]}),(0,m.jsx)("div",{className:"flex-grow overflow-y-auto",style:{padding:x?"8px":"10px"},children:s.tasks&&s.tasks.length>0?s.tasks.map(e=>(0,m.jsx)(u,{task:e,taskId:e.id,jobId:s.id,onEarnCoupon:d,onRequestApproval:o,onEditTask:()=>r(e.id,s.id),onDeleteTask:()=>i(e.id,s.id),isAdmin:a,isJobTask:!0},e.id)):(0,m.jsx)("p",{className:"text-center my-2.5",style:{fontSize:"13px",color:"#9999bb"},children:"\ub4f1\ub85d\ub41c \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})}),a&&(0,m.jsx)("div",{style:{padding:x?"8px":"10px",borderTop:"1px solid rgba(0, 255, 242, 0.1)"},children:(0,m.jsx)("button",{onClick:l,className:"w-full cursor-pointer rounded-md mt-0 transition-all",style:c||{padding:x?"6px":"8px",backgroundColor:"rgba(0, 255, 242, 0.1)",border:"1px solid rgba(0, 255, 242, 0.3)",color:"#00fff2",fontSize:x?"12px":"13px",fontWeight:"500"},children:"+ \uc774 \uc9c1\uc5c5\uc5d0 \ud560\uc77c \ucd94\uac00"})})]},s.id)});function J(e){let{tasks:s,isAdmin:a,onEditTask:t,onDeleteTask:n,onEarnCoupon:l,onRequestApproval:r}=e;if(!Array.isArray(s)||0===s.length)return(0,m.jsx)("div",{className:"p-5 text-center",style:{color:"#6b7280"},children:a?"\ub4f1\ub85d\ub41c \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uc124\uc815\uc5d0\uc11c \ucd94\uac00\ud574\uc8fc\uc138\uc694.":"\ud604\uc7ac \uc218\ud589\ud560 \uc218 \uc788\ub294 \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."});const i="undefined"!==typeof window&&window.innerWidth<=768;return(0,m.jsx)("div",{className:"grid",style:{gridTemplateColumns:i?"1fr":"repeat(2, 1fr)",gap:i?"8px":"10px"},children:s.map(e=>(0,m.jsx)(u,{task:e,taskId:e.id,onEarnCoupon:l,onRequestApproval:r,onEditTask:()=>t(e.id),onDeleteTask:()=>n(e.id),isAdmin:a,isJobTask:!1},e.id))})}var E=a(2532),R=a(3248),_=a(7097);const O=e=>{const s=(0,d.Qg)(r.Cn,e);return async a=>{try{const e=await s(a);if(e.data.success)return e.data;throw new Error(e.data.message||"\ud568\uc218 \uc2e4\ud589 \uc2e4\ud328")}catch(t){throw c.vF.error("".concat(e," \uc624\ub958:"),t),t}}},L={getAdminSettingsData:O("getAdminSettingsData"),batchPaySalaries:O("batchPaySalaries"),getItemContextData:O("getItemContextData")},P=(e,s)=>["adminSettings",e,s],W=e=>["students",e],z=e=>["salarySettings",e],q=()=>["systemManagement"],H=()=>navigator.onLine&&!document.hidden,B=(e,s)=>{try{localStorage.setItem("backup_".concat(e),JSON.stringify({data:s,timestamp:Date.now()}))}catch(a){c.vF.warn("\ub85c\uceec \ubc31\uc5c5 \uc800\uc7a5 \uc2e4\ud328:",a)}},G=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;try{const a=localStorage.getItem("backup_".concat(e));if(a){const e=JSON.parse(a);if(Date.now()-e.timestamp<s)return e.data}}catch(a){c.vF.warn("\ub85c\uceec \ubc31\uc5c5 \ub85c\ub4dc \uc2e4\ud328:",a)}return null},K=e=>{try{localStorage.removeItem("backup_".concat(e))}catch(s){c.vF.warn("\ub85c\uceec \ubc31\uc5c5 \uc0ad\uc81c \uc2e4\ud328:",s)}},V=(0,d.Qg)(r.Cn,"getSystemStatus"),U=(0,d.Qg)(r.Cn,"resolveSystemAlert"),Q=e=>{let{isSuperAdmin:s}=e;const[a,t]=(0,n.useState)(null),[l,r]=(0,n.useState)(!1),[i,d]=(0,n.useState)(null),[o,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[p,b]=(0,n.useState)(0),g=(0,n.useRef)(!1),f=(0,n.useRef)(0),v=async()=>{if(s){r(!0),d(null);try{const e=await V();if(!e.data.success)throw new Error(e.data.message||"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328");t(e.data.data),h(new Date),b(0),f.current=0}catch(e){c.vF.error("[SystemMonitoring] \uc0c1\ud0dc \uc870\ud68c \uc624\ub958:",e),d(e.message||"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),f.current+=1,b(f.current),f.current>=3&&(u(!1),c.vF.warn("[SystemMonitoring] \uc5f0\uc18d \uc5d0\ub7ec \ubc1c\uc0dd\uc73c\ub85c \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc744 \uc911\uc9c0\ud569\ub2c8\ub2e4."))}finally{r(!1)}}},j=async e=>{if(window.confirm("\uc774 \uacbd\uace0\ub97c \ud574\uacb0 \ucc98\ub9ac\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{(await U({alertId:e})).data.success&&(alert("\uacbd\uace0\uac00 \ud574\uacb0\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),v())}catch(s){c.vF.error("[SystemMonitoring] \uacbd\uace0 \ud574\uacb0 \uc624\ub958:",s),alert("\uacbd\uace0 \ud574\uacb0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message))}};return(0,n.useEffect)(()=>{s&&!g.current&&(g.current=!0,v())},[]),(0,n.useEffect)(()=>{if(!o||!s)return;f.current=0,b(0);const e=setInterval(()=>{v()},12e4);return()=>clearInterval(e)},[o,s]),s?(0,m.jsxs)("div",{className:"system-monitoring section-card",children:[(0,m.jsxs)("div",{className:"monitoring-header",children:[(0,m.jsx)("h3",{children:"\ud83d\udda5\ufe0f \uc11c\ubc84 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1"}),(0,m.jsxs)("div",{className:"monitoring-controls",children:[(0,m.jsxs)("label",{className:"auto-refresh-toggle",children:[(0,m.jsx)("input",{type:"checkbox",checked:o,onChange:e=>u(e.target.checked)}),(0,m.jsx)("span",{children:"\uc790\ub3d9 \uc0c8\ub85c\uace0\uce68 (2\ubd84)"})]}),(0,m.jsx)("button",{onClick:v,disabled:l,className:"refresh-button",children:l?"\u23f3 \uc870\ud68c \uc911...":"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"})]})]}),x&&(0,m.jsxs)("p",{className:"last-update",children:["\ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",x.toLocaleTimeString("ko-KR")]}),i&&(0,m.jsxs)("div",{className:"error-message",children:[(0,m.jsxs)("p",{children:["\u274c ",i]}),p>=3&&(0,m.jsx)("p",{style:{marginTop:"8px",fontSize:"14px"},children:"\u26a0\ufe0f \uc5f0\uc18d \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc5ec \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc774 \uc911\uc9c0\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc218\ub3d9\uc73c\ub85c \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc744 \ub2e4\uc2dc \ud65c\uc131\ud654\ud574\uc8fc\uc138\uc694."})]}),a&&(0,m.jsxs)(m.Fragment,{children:[a.message&&(0,m.jsx)("div",{className:"info-message",style:{padding:"12px",background:"#e3f2fd",border:"1px solid #90caf9",borderRadius:"4px",marginBottom:"15px",color:"#1976d2"},children:(0,m.jsxs)("p",{style:{margin:0},children:["\u2139\ufe0f ",a.message]})}),(0,m.jsxs)("div",{className:"system-health-card",children:[(0,m.jsx)("h4",{children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc"}),(0,m.jsxs)("div",{className:"health-indicator health-".concat(a.health),children:[(0,m.jsx)("span",{className:"health-icon",children:"healthy"===a.health?"\u2705":"warning"===a.health?"\u26a0\ufe0f":"\ud83d\udea8"}),(0,m.jsx)("span",{className:"health-text",children:"healthy"===a.health?"\uc815\uc0c1":"warning"===a.health?"\uc8fc\uc758":"\uc704\ud5d8"})]}),(0,m.jsx)("div",{className:"stats-grid",children:(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\uc804\uccb4 \uc0ac\uc6a9\uc790"}),(0,m.jsx)("span",{className:"stat-value",children:a.totalUsers})]})})]}),(0,m.jsxs)("div",{className:"stats-card",children:[(0,m.jsx)("h4",{children:"\ucd5c\uadfc 1\ubd84 \ud1b5\uacc4"}),(0,m.jsxs)("div",{className:"stats-grid",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\uc77d\uae30 \uc791\uc5c5"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.lastMinute.reads.toLocaleString()})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\uc4f0\uae30 \uc791\uc5c5"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.lastMinute.writes.toLocaleString()})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\uc5d0\ub7ec \uc218"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.lastMinute.errors})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\uc5d0\ub7ec\uc728"}),(0,m.jsxs)("span",{className:"stat-value",children:[(100*a.stats.lastMinute.errorRate).toFixed(2),"%"]})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04"}),(0,m.jsxs)("span",{className:"stat-value",children:[a.stats.lastMinute.avgResponseTime.toFixed(0),"ms"]})]})]})]}),a.anomalies&&a.anomalies.length>0&&(0,m.jsxs)("div",{className:"anomalies-card",children:[(0,m.jsx)("h4",{children:"\u26a0\ufe0f \ube44\uc815\uc0c1 \ud328\ud134 \uac10\uc9c0"}),(0,m.jsx)("div",{className:"anomalies-list",children:a.anomalies.map((e,s)=>(0,m.jsxs)("div",{className:"anomaly-item anomaly-".concat(e.severity),children:[(0,m.jsxs)("div",{className:"anomaly-header",children:[(0,m.jsx)("span",{className:"anomaly-severity",children:"critical"===e.severity?"\ud83d\udea8 \uc2ec\uac01":"error"===e.severity?"\u274c \uc624\ub958":"\u26a0\ufe0f \uacbd\uace0"}),(0,m.jsx)("span",{className:"anomaly-type",children:e.type})]}),(0,m.jsx)("p",{className:"anomaly-message",children:e.message})]},s))})]}),a.alerts&&a.alerts.length>0&&(0,m.jsxs)("div",{className:"alerts-card",children:[(0,m.jsxs)("h4",{children:["\ud83d\udd14 \ud65c\uc131 \uacbd\uace0 (",a.alerts.length,")"]}),(0,m.jsx)("div",{className:"alerts-list",children:a.alerts.map(e=>{var s,a;const t=null!==(s=e.timestamp)&&void 0!==s&&s.toDate?e.timestamp.toDate():new Date(1e3*(null===(a=e.timestamp)||void 0===a?void 0:a.seconds)||Date.now());return(0,m.jsxs)("div",{className:"alert-item alert-".concat(e.severity),children:[(0,m.jsxs)("div",{className:"alert-header",children:[(0,m.jsx)("span",{className:"alert-time",children:t.toLocaleString("ko-KR")}),(0,m.jsx)("button",{onClick:()=>j(e.id),className:"resolve-alert-button",children:"\ud574\uacb0"})]}),(0,m.jsx)("p",{className:"alert-message",children:e.message})]},e.id)})})]}),a.errorLogs&&a.errorLogs.length>0&&(0,m.jsxs)("div",{className:"error-logs-card",children:[(0,m.jsx)("h4",{children:"\ud83d\udcdd \ucd5c\uadfc \uc5d0\ub7ec \ub85c\uadf8 (1\uc2dc\uac04)"}),(0,m.jsx)("div",{className:"error-logs-list",children:a.errorLogs.slice(0,10).map(e=>{var s,a;const t=null!==(s=e.timestamp)&&void 0!==s&&s.toDate?e.timestamp.toDate():new Date(1e3*(null===(a=e.timestamp)||void 0===a?void 0:a.seconds)||Date.now());return(0,m.jsxs)("div",{className:"error-log-item",children:[(0,m.jsx)("span",{className:"log-time",children:t.toLocaleTimeString("ko-KR")}),(0,m.jsx)("span",{className:"log-message",children:e.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"})]},e.id)})})]}),(0,m.jsxs)("div",{className:"stats-card",children:[(0,m.jsx)("h4",{children:"\ucd5c\uadfc 5\ubd84 \ud1b5\uacc4"}),(0,m.jsxs)("div",{className:"stats-grid",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\ucd1d \uc77d\uae30 \uc791\uc5c5"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.last5Minutes.reads.toLocaleString()})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\ucd1d \uc4f0\uae30 \uc791\uc5c5"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.last5Minutes.writes.toLocaleString()})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"\ucd1d \uc5d0\ub7ec"}),(0,m.jsx)("span",{className:"stat-value",children:a.stats.last5Minutes.errors})]})]})]})]}),!a&&!l&&!i&&(0,m.jsx)("div",{className:"no-data-message",children:(0,m.jsx)("p",{children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub824\uba74 \uc0c8\ub85c\uace0\uce68 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."})})]}):(0,m.jsxs)("div",{className:"system-monitoring section-card",children:[(0,m.jsx)("h3",{children:"\ud83d\udd12 \uc11c\ubc84 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\ucd5c\uace0 \uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})};var X=a(5967),Y=a(359);const Z=[{id:"KP",name:"\ucf54\ub529 \ud30c\ud2b8\ub108",price:1e4,history:[{price:1e4,timestamp:new Date}]},{id:"SS",name:"\uc0bc\uc131\uc804\uc790",price:8e4,history:[{price:8e4,timestamp:new Date}]},{id:"LG",name:"LG\uc5d0\ub108\uc9c0\uc194\ub8e8\uc158",price:35e4,history:[{price:35e4,timestamp:new Date}]},{id:"SK",name:"SK\ud558\uc774\ub2c9\uc2a4",price:23e4,history:[{price:23e4,timestamp:new Date}]}],$=e=>{let{userClassCode:s,isAdmin:a,isSuperAdmin:t}=e;const[l,i]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1);return a||t?(0,m.jsxs)("div",{className:"section-card mt-6 border-2 border-red-500/50 bg-red-900/10",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,m.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,m.jsx)("h3",{className:"text-xl font-bold text-red-400",children:"\uc704\ud5d8 \uad6c\uc5ed: \ud559\uae09 \ub370\uc774\ud130 \uc0ad\uc81c"})]}),(0,m.jsxs)("div",{className:"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30",children:[(0,m.jsx)("p",{className:"text-sm text-red-200 mb-2",children:(0,m.jsx)("strong",{children:"\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4!"})}),(0,m.jsx)("p",{className:"text-sm text-red-200 mb-2",children:"\uac1c\uc778\uc815\ubcf4 \ud30c\uae30 \uc758\ubb34\ub97c \uc704\ud574 \ud559\ub144 \ub9d0\uc5d0 \uc0ac\uc6a9\ud558\uc138\uc694."}),(0,m.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"\uc0ad\uc81c \ub300\uc0c1:"}),(0,m.jsxs)("ul",{className:"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1",children:[(0,m.jsx)("li",{children:"\ud559\uc0dd \uacc4\uc815 (role: 'student')"}),(0,m.jsx)("li",{children:"\ud65c\ub3d9 \ub85c\uadf8 (activity_logs)"}),(0,m.jsx)("li",{children:"\uac70\ub798 \ub0b4\uc5ed (transactions)"})]}),(0,m.jsx)("p",{className:"text-sm text-green-300 mt-2",children:"\u2713 \uc120\uc0dd\ub2d8(admin) \uacc4\uc815\uc740 \uc720\uc9c0\ub429\ub2c8\ub2e4."}),(0,m.jsx)("p",{className:"text-sm text-green-300",children:"\u2713 \uc9c1\uc5c5, \ud560\uc77c, \uc0c1\uc810 \uc544\uc774\ud15c \uc124\uc815\uc740 \uc720\uc9c0\ub429\ub2c8\ub2e4."})]}),u?(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:['\ud655\uc778\uc744 \uc704\ud574 "',(0,m.jsx)("strong",{className:"text-red-400",children:"\uc0ad\uc81c"}),'"\ub97c \uc815\ud655\ud788 \uc785\ub825\ud558\uc138\uc694:']}),(0,m.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"\uc0ad\uc81c",disabled:d,className:"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500"})]}),(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsx)("button",{onClick:async()=>{if(!s)return void alert("\ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if("\uc0ad\uc81c"!==l)return void alert("'\uc0ad\uc81c'\ub97c \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(window.confirm("\uc815\ub9d0\ub85c '".concat(s,"' \ud559\uae09\uc758 \ubaa8\ub4e0 \ud559\uc0dd \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc73c\uba70 \ub2e4\uc74c \ub370\uc774\ud130\uac00 \uc601\uad6c \uc0ad\uc81c\ub429\ub2c8\ub2e4:\n- \ud559\uc0dd \uacc4\uc815 (role: 'student')\n- \ud65c\ub3d9 \ub85c\uadf8\n- \uac70\ub798 \ub0b4\uc5ed\n\n\uc120\uc0dd\ub2d8(admin) \uacc4\uc815\uc740 \uc720\uc9c0\ub429\ub2c8\ub2e4."))){o(!0);try{c.vF.log("[ClassDataDeletion] ".concat(s," \ud559\uae09 \ub370\uc774\ud130 \uc0ad\uc81c \uc2dc\uc791"));const e=firestoreCollection(r.db,"users"),a=(0,r.P)(e,(0,r._M)("classCode","==",s),(0,r._M)("role","==","student")),t=await(0,r.FX)(a);c.vF.log("[ClassDataDeletion] \uc0ad\uc81c\ud560 \ud559\uc0dd \uc218: ".concat(t.size,"\uba85"));const n=firestoreCollection(r.db,"activity_logs"),l=(0,r.P)(n,(0,r._M)("classCode","==",s)),d=await(0,r.FX)(l);c.vF.log("[ClassDataDeletion] \uc0ad\uc81c\ud560 \ud65c\ub3d9 \ub85c\uadf8: ".concat(d.size,"\uac1c"));const o=t.docs.map(e=>e.id);let m=[];if(o.length>0){const e=[];for(let s=0;s<o.length;s+=10)e.push(o.slice(s,s+10));for(const s of e){const e=firestoreCollection(r.db,"transactions"),a=(0,r.P)(e,(0,r._M)("userId","in",s)),t=await(0,r.FX)(a);m.push(...t.docs)}}c.vF.log("[ClassDataDeletion] \uc0ad\uc81c\ud560 \uac70\ub798 \ub0b4\uc5ed: ".concat(m.length,"\uac1c"));const u=[...t.docs,...d.docs,...m];c.vF.log("[ClassDataDeletion] \ucd1d \uc0ad\uc81c\ud560 \ubb38\uc11c: ".concat(u.length,"\uac1c"));const h=500;for(let s=0;s<u.length;s+=h){const e=(0,r.wP)(r.db);u.slice(s,s+h).forEach(s=>{e.delete(s.ref)}),await e.commit(),c.vF.log("[ClassDataDeletion] \ubc30\uce58 ".concat(Math.floor(s/h)+1," \uc0ad\uc81c \uc644\ub8cc"))}alert("\ud559\uae09 \ub370\uc774\ud130 \uc0ad\uc81c \uc644\ub8cc!\n\n\uc0ad\uc81c\ub41c \ub370\uc774\ud130:\n- \ud559\uc0dd \uacc4\uc815: ".concat(t.size,"\uba85\n- \ud65c\ub3d9 \ub85c\uadf8: ").concat(d.size,"\uac1c\n- \uac70\ub798 \ub0b4\uc5ed: ").concat(m.length,"\uac1c")),c.vF.log("[ClassDataDeletion] ".concat(s," \ud559\uae09 \ub370\uc774\ud130 \uc0ad\uc81c \uc644\ub8cc")),i(""),x(!1)}catch(e){c.vF.error("[ClassDataDeletion] \uc0ad\uc81c \uc911 \uc624\ub958:",e),alert("\uc624\ub958 \ubc1c\uc0dd: ".concat(e.message,"\n\n\uc77c\ubd80 \ub370\uc774\ud130\ub9cc \uc0ad\uc81c\ub418\uc5c8\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."))}finally{o(!1)}}},disabled:d||"\uc0ad\uc81c"!==l,className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat("\uc0ad\uc81c"!==l||d?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:d?"\uc0ad\uc81c \uc911...":"\ucd5c\uc885 \uc0ad\uc81c \uc2e4\ud589"}),(0,m.jsx)("button",{onClick:()=>{x(!1),i("")},disabled:d,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"\ucde8\uc18c"})]})]}):(0,m.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"\ud559\uae09 \ub370\uc774\ud130 \uc0ad\uc81c \uc2dc\uc791"})]}):null},ee=e=>{var s;let{isAdmin:a,isSuperAdmin:o,userClassCode:u,showAdminSettingsModal:x,setShowAdminSettingsModal:h,adminSelectedMenu:p,setAdminSelectedMenu:b,newGoalAmount:g,setNewGoalAmount:f,adminCouponValue:v,setAdminCouponValue:j,handleSaveAdminSettings:y,jobs:k,adminNewJobTitle:N,setAdminNewJobTitle:A,adminEditingJob:w,setAdminEditingJob:C,handleSaveJob:S,handleDeleteJob:T,handleEditJob:F,commonTasks:D,showAddTaskForm:I,setShowAddTaskForm:M,adminNewTaskName:J,setAdminNewTaskName:O,adminNewTaskReward:V,setAdminNewTaskReward:U,adminNewTaskMaxClicks:ee,setAdminNewTaskMaxClicks:se,adminNewTaskRequiresApproval:ae,setAdminNewTaskRequiresApproval:te,adminEditingTask:ne,setAdminEditingTask:le,handleSaveTask:re,handleEditTask:ie,handleDeleteTask:de,taskFormJobId:oe,taskFormIsJobTask:ce,handleAddTaskClick:me,classCodes:ue=[],onAddClassCode:xe,onRemoveClassCode:he}=e;const[pe,be]=(0,n.useState)(""),[ge,fe]=(0,n.useState)(!1),[ve,je]=(0,n.useState)([]),[ye,ke]=(0,n.useState)(!1),[Ne,Ae]=(0,n.useState)(!1),[we,Ce]=(0,n.useState)(null),[Se,Te]=(0,n.useState)([]),[Fe,De]=(0,n.useState)([]),[Ie,Me]=(0,n.useState)(!1),[Je,Ee]=(0,n.useState)(!1),[Re,_e]=(0,n.useState)(!1),[Oe,Le]=(0,n.useState)(null),[Pe,We]=(0,n.useState)([]),[ze,qe]=(0,n.useState)(!1),[He,Be]=(0,n.useState)(""),[Ge,Ke]=(0,n.useState)([]),[Ve,Ue]=(0,n.useState)([]),[Qe,Xe]=(0,n.useState)([]),[Ye,Ze]=(0,n.useState)(""),[$e,es]=(0,n.useState)(""),[ss,as]=(0,n.useState)(""),[ts,ns]=(0,n.useState)("deposit"),[ls,rs]=(0,n.useState)(null),[is,ds]=(0,n.useState)("job"),[os,cs]=(0,n.useState)("student"),[ms,us]=(0,n.useState)("financial"),[xs,hs]=(0,n.useState)("database"),[ps,bs]=(0,n.useState)({isOpen:!1}),[gs,fs]=(0,n.useState)(""),[vs,js]=(0,n.useState)(!1),ys=(0,n.useRef)(null),[ks,Ns]=(0,n.useState)(.1),[As,ws]=(0,n.useState)(""),[Cs,Ss]=(0,n.useState)(null),Ts=(0,d.Qg)(r.Cn,"toggleMarketManually"),[Fs,Ds]=(0,n.useState)({taxRate:.1,salaryIncreaseRate:.03}),[Is,Ms]=(0,n.useState)("10"),[Js,Es]=(0,n.useState)("3"),[Rs,_s]=(0,n.useState)(!1),{currencyUnit:Os,setCurrencyUnitLocal:Ls}=(0,Y.H2)(),[Ps,Ws]=(0,n.useState)(Os),[zs,qs]=(0,n.useState)(!1);(0,n.useEffect)(()=>{Ws(Os)},[Os]);const Hs=(0,n.useCallback)(async()=>{if(r.db&&Ps.trim()){qs(!0);try{const e=(0,r.EW)(r.db,"settings","mainSettings");await(0,r.tI)(e,{currencyUnit:Ps.trim(),updatedAt:(0,r.O5)()}).catch(async()=>{await(0,r.iv)(e,{currencyUnit:Ps.trim(),updatedAt:(0,r.O5)()},{merge:!0})}),Ls(Ps.trim()),alert("\ud654\ud3d0 \ub2e8\uc704\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(He){c.vF.error("\ud654\ud3d0 \ub2e8\uc704 \uc800\uc7a5 \uc624\ub958:",He),alert("\ud654\ud3d0 \ub2e8\uc704 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message)}finally{qs(!1)}}else alert("\ud654\ud3d0 \ub2e8\uc704\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[Ps,Ls]),Bs=(()=>{const{userDoc:e,isAdmin:s,isSuperAdmin:a}=(0,l.As)(),t=null===e||void 0===e?void 0:e.classCode;return(0,E.I)({queryKey:W(t),queryFn:async()=>(await L.getAdminSettingsData({tab:"studentManagement"})).data,enabled:!(null===s||void 0===s||!s()||!t),staleTime:18e4,gcTime:48e4})})(),Gs=(()=>{const{userDoc:e,isAdmin:s}=(0,l.As)(),a=null===e||void 0===e?void 0:e.classCode;return(0,E.I)({queryKey:z(a),queryFn:async()=>(await L.getAdminSettingsData({tab:"salarySettings"})).data,enabled:!(null===s||void 0===s||!s()||!a),staleTime:6e5,gcTime:9e5})})(),Ks=((()=>{const{isSuperAdmin:e}=(0,l.As)();(0,E.I)({queryKey:q(),queryFn:async()=>(await L.getAdminSettingsData({tab:"systemManagement"})).data,enabled:!(null===e||void 0===e||!e()),staleTime:9e5,gcTime:12e5})})(),(e=>{const{userDoc:s,isAdmin:a}=(0,l.As)(),t=null===s||void 0===s?void 0:s.classCode;(0,E.I)({queryKey:P(t,e),queryFn:async()=>{const s="admin_".concat(t,"_").concat(e),a=G(s,3e4);if(a&&!navigator.onLine)return a;const n=await L.getAdminSettingsData({tab:e});return B(s,n),n},enabled:!!(null!==a&&void 0!==a&&a()&&t&&e),staleTime:3e5,gcTime:6e5,retry:(e,s)=>"permission-denied"!==(null===s||void 0===s?void 0:s.code)&&e<2,refetchInterval:!!H()&&3e5})})("generalSettings"),(()=>{const e=(0,R.jE)(),{userDoc:s}=(0,l.As)(),a=null===s||void 0===s?void 0:s.classCode;return(0,_.n)({mutationFn:async e=>{let{studentIds:s,payAll:a}=e;return await L.batchPaySalaries({studentIds:s,payAll:a})},onSuccess:()=>{e.invalidateQueries({queryKey:W(a)}),e.invalidateQueries({queryKey:z(a)}),K("admin_".concat(a,"_studentManagement")),K("admin_".concat(a,"_salarySettings"))},onError:e=>{c.vF.error("\uae09\uc5ec \uc9c0\uae09 \uc2e4\ud328:",e)}})})()),{preloadAdminData:Vs}=(()=>{const e=(0,R.jE)(),{userDoc:s,isAdmin:a}=(0,l.As)(),t=null===s||void 0===s?void 0:s.classCode;return{preloadAdminData:async()=>{if(null===a||void 0===a||!a()||!t)return;const s=["generalSettings","studentManagement","salarySettings"].map(s=>e.prefetchQuery({queryKey:P(t,s),queryFn:async()=>await L.getAdminSettingsData({tab:s}),staleTime:3e5}));await Promise.allSettled(s)}}})(),Us=(0,n.useCallback)(async()=>{if(r.db)try{const e=u?(0,r.EW)(r.db,"settings","salarySettings_".concat(u)):(0,r.EW)(r.db,"settings","salarySettings"),s=await(0,r.I_)(e);if(s.exists()){const e=s.data(),a={taxRate:e.taxRate||.1,salaryIncreaseRate:e.salaryIncreaseRate||.03};Ds(a),Ms(String((100*a.taxRate).toFixed(1))),Es(String((100*a.salaryIncreaseRate).toFixed(1))),e.lastPaidDate&&Le(e.lastPaidDate.toDate())}else await(0,r.iv)(e,{taxRate:.1,salaryIncreaseRate:.03,lastPaidDate:null,classCode:u||null,createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()})}catch(He){c.vF.error("\uae09\uc5ec \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",He)}},[u]),Qs=(0,n.useCallback)(async()=>{if(!r.db)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.");const e=parseFloat(Is),s=parseFloat(Js);if(isNaN(e)||e<0||e>100)alert("\uc138\uc728\uc740 0~100 \uc0ac\uc774\uc758 \uc22b\uc790\uc5ec\uc57c \ud569\ub2c8\ub2e4.");else if(isNaN(s)||s<0||s>100)alert("\uc8fc\uae09 \uc778\uc0c1\ub960\uc740 0~100 \uc0ac\uc774\uc758 \uc22b\uc790\uc5ec\uc57c \ud569\ub2c8\ub2e4.");else{_s(!0);try{const a=u?(0,r.EW)(r.db,"settings","salarySettings_".concat(u)):(0,r.EW)(r.db,"settings","salarySettings"),t={taxRate:e/100,salaryIncreaseRate:s/100,classCode:u||null,updatedAt:(0,r.O5)()};await(0,r.tI)(a,t),Ds({taxRate:t.taxRate,salaryIncreaseRate:t.salaryIncreaseRate}),alert("\uae09\uc5ec \uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(He){c.vF.error("\uae09\uc5ec \uc124\uc815 \uc800\uc7a5 \uc624\ub958:",He),alert("\uae09\uc5ec \uc124\uc815 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message)}finally{_s(!1)}}},[u,Is,Js]),Xs=(0,n.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e)||0===e.length)return{gross:0,tax:0,net:0};const a=2e6+5e5*Math.max(0,e.length-1);if(!s)return a;const t=Math.floor(a*Fs.taxRate);return{gross:a,tax:t,net:a-t}},[Fs.taxRate]),Ys=(0,n.useCallback)(e=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud3b8\uc9d1 \ud074\ub9ad:",e),F&&"function"===typeof F?F(e):(c.vF.error("[AdminSettingsModal] handleEditJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \ud3b8\uc9d1 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[F]),Zs=(0,n.useCallback)(e=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc0ad\uc81c \ud074\ub9ad:",e),T&&"function"===typeof T?T(e):(c.vF.error("[AdminSettingsModal] handleDeleteJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[T]),$s=(0,n.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c.vF.log("[AdminSettingsModal] \ud560\uc77c \ud3b8\uc9d1 \ud074\ub9ad:",e,"jobId:",s),ie&&"function"===typeof ie?ie(e,s):(c.vF.error("[AdminSettingsModal] handleEditTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \ud3b8\uc9d1 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[ie]),ea=(0,n.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c.vF.log("[AdminSettingsModal] \ud560\uc77c \uc0ad\uc81c \ud074\ub9ad:",e,"jobId:",s),de&&"function"===typeof de?de(e,s):(c.vF.error("[AdminSettingsModal] handleDeleteTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[de]),sa=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.vF.log("[AdminSettingsModal] \ud560\uc77c \ucd94\uac00 \ud074\ub9ad:",e,"isJobTask:",s),me&&"function"===typeof me?me(e,s):(c.vF.error("[AdminSettingsModal] handleAddTaskClick \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \ucd94\uac00 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[me]),aa=(0,n.useCallback)(async()=>{if(!r.db)return c.vF.error("loadStudents: Firestore \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),Be("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958\ub85c \ud559\uc0dd \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),De([]),void Me(!1);Me(!0),Be("");try{let a=[];if(!o&&!u)return Be("\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \ud559\uc0dd \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),De([]),void Me(!1);if(!o&&u)try{const e=(0,r.gJ)(r.db,"Class",u,"students");(await(0,r.FX)(e)).forEach(e=>{const s=e.data();a.push({id:e.id,nickname:s.nickname||s.name||"\uc774\ub984 \uc5c6\uc74c",name:s.name||"",email:s.email||"",classCode:u,selectedJobIds:s.selectedJobIds||[],cash:s.money||s.cash||0,lastSalaryDate:s.lastSalaryDate?s.lastSalaryDate.toDate():null,lastGrossSalary:s.lastGrossSalary||0,lastTaxAmount:s.lastTaxAmount||0,lastNetSalary:s.lastNetSalary||0,totalSalaryReceived:s.totalSalaryReceived||0})})}catch(e){}if(0===a.length){const e=(0,r.gJ)(r.db,"users");let s;!o&&u?s=(0,r.P)(e,(0,r._M)("classCode","==",u)):o&&(s=e);(await(0,r.FX)(s)).forEach(e=>{const s=e.data();s.isAdmin||s.isSuperAdmin||a.push({id:e.id,nickname:s.nickname||s.name||"\uc774\ub984 \uc5c6\uc74c",name:s.name||"",email:s.email||"",classCode:s.classCode||"\ubbf8\uc9c0\uc815",selectedJobIds:s.selectedJobIds||[],cash:s.cash||0,lastSalaryDate:s.lastSalaryDate?s.lastSalaryDate.toDate():null,lastGrossSalary:s.lastGrossSalary||0,lastTaxAmount:s.lastTaxAmount||0,lastNetSalary:s.lastNetSalary||0,totalSalaryReceived:s.totalSalaryReceived||0})})}De(a);try{const e=u?(0,r.EW)(r.db,"settings","salarySettings_".concat(u)):(0,r.EW)(r.db,"settings","salarySettings"),s=await(0,r.I_)(e);if(s.exists()){const e=s.data();Le(e.lastPaidDate?e.lastPaidDate.toDate():null),Ds({taxRate:e.taxRate||.1,salaryIncreaseRate:e.salaryIncreaseRate||.03})}else Le(null)}catch(s){c.vF.error("\uae09\uc5ec \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",s),Le(null)}We([]),qe(!1)}catch(He){c.vF.error("loadStudents: \ud559\uc0dd \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",He),Be("\ud559\uc0dd \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message),De([])}finally{Me(!1)}},[o,u]),ta=(0,n.useCallback)(async()=>{if(!r.db)return c.vF.error("loadClassMembers: Firestore \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),Be("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958\ub85c \ud559\uae09 \uad6c\uc131\uc6d0 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),je([]),void ke(!1);ke(!0),Be("");try{const e=(0,r.gJ)(r.db,"users");let s;if(!o&&u)s=(0,r.P)(e,(0,r._M)("classCode","==",u));else{if(!o)return c.vF.warn("\uad00\ub9ac\uc790\uc758 \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),Be("\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \uad6c\uc131\uc6d0 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),je([]),void ke(!1);s=e}const a=await(0,r.FX)(s),t=[];a.forEach(e=>{const s=e.data();t.push({id:e.id,name:s.name||s.nickname||"\uc774\ub984 \uc5c6\uc74c",email:s.email,classCode:s.classCode||"\ucf54\ub4dc \uc5c6\uc74c",isAdmin:s.isAdmin||!1,isSuperAdmin:s.isSuperAdmin||!1})}),je(t),c.vF.log("[AdminSettingsModal] ".concat(t.length,"\uba85\uc758 \uad6c\uc131\uc6d0 \ub85c\ub4dc \uc644\ub8cc"))}catch(He){c.vF.error("loadClassMembers: \ud559\uae09 \uad6c\uc131\uc6d0 \ub85c\ub4dc \uc624\ub958:",He),Be("\ud559\uae09 \uad6c\uc131\uc6d0\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message),je([])}finally{ke(!1)}},[o,u]),na=(0,d.Qg)(r.Cn,"adminResetUserPassword"),la=(0,n.useCallback)(async e=>{if(!a&&!o)return void alert("\uad00\ub9ac\uc790\ub9cc \ube44\ubc00\ubc88\ud638\ub97c \ucd08\uae30\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const s=prompt("\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694. 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(!s||s.length<6)alert("\ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");else if(window.confirm("\uc0ac\uc6a9\uc790(ID: ".concat(e,")\uc758 \ube44\ubc00\ubc88\ud638\ub97c \uc815\ub9d0\ub85c \ucd08\uae30\ud654\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{ke(!0);const a=await na({userId:e,newPassword:s});if(!a.data.success)throw new Error(a.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958");alert(a.data.message)}catch(He){c.vF.error("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654 \uc624\ub958:",He),alert("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(He.message))}finally{ke(!1)}},[a,o,na]),ra=(0,n.useCallback)(async(e,s)=>{if(r.db)if(o){if(window.confirm("\uc774 \uc0ac\uc6a9\uc790\uc758 \uad00\ub9ac\uc790 \uad8c\ud55c\uc744 ".concat(s?"\uc81c\uac70":"\ubd80\uc5ec","\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){ke(!0);try{const a=(0,r.EW)(r.db,"users",e);await(0,r.tI)(a,{isAdmin:!s}),je(a=>a.map(a=>a.id===e?(0,t.A)((0,t.A)({},a),{},{isAdmin:!s}):a)),alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 ".concat(s?"\uc81c\uac70":"\ubd80\uc5ec","\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(He){c.vF.error("\uad00\ub9ac\uc790 \uad8c\ud55c \ubcc0\uacbd \uc624\ub958:",He),alert("\uad00\ub9ac\uc790 \uad8c\ud55c \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{ke(!1)}}}else alert("\ucd5c\uace0 \uad00\ub9ac\uc790\ub9cc \uad00\ub9ac\uc790 \uad8c\ud55c\uc744 \ubd80\uc5ec/\ud574\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[o]),ia=(0,n.useCallback)(()=>{try{const e=localStorage.getItem("depositProducts"),s=localStorage.getItem("savingProducts"),a=localStorage.getItem("loanProducts");e&&Ke(JSON.parse(e)),s&&Ue(JSON.parse(s)),a&&Xe(JSON.parse(a))}catch(He){c.vF.error("\uae08\uc735 \uc0c1\ud488 \ub85c\ub4dc \uc624\ub958:",He)}},[]),da=(0,n.useCallback)(()=>{if(!Ye||""===Ye.trim())return void rs({type:"error",text:"\uc0c1\ud488\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});if(!$e||isNaN($e)||parseInt($e)<=0)return void rs({type:"error",text:"\uc720\ud6a8\ud55c \uae30\uac04\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});if(!ss||isNaN(ss)||parseFloat(ss)<0)return void rs({type:"error",text:"\uc720\ud6a8\ud55c \uc774\uc728\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});const e={id:Date.now(),name:Ye.trim(),period:parseInt($e),rate:parseFloat(ss)},s="deposit"===ts?"\uc608\uae08":"saving"===ts?"\uc801\uae08":"\ub300\ucd9c";let a=[],t="";"deposit"===ts?(a=[...Ge,e],Ke(a),t="depositProducts"):"saving"===ts?(a=[...Ve,e],Ue(a),t="savingProducts"):"loan"===ts&&(a=[...Qe,e],Xe(a),t="loanProducts"),localStorage.setItem(t,JSON.stringify(a)),rs({type:"success",text:"".concat(s," \uc0c1\ud488\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),Ze(""),es(""),as(""),setTimeout(()=>rs(null),3e3)},[Ye,$e,ss,ts,Ge,Ve,Qe]),oa=(0,n.useCallback)((e,s)=>{const a="deposit"===s?"\uc608\uae08":"saving"===s?"\uc801\uae08":"\ub300\ucd9c";if(!window.confirm("\uc774 ".concat(a," \uc0c1\ud488\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return;let t=[],n="";"deposit"===s?(t=Ge.filter(s=>s.id!==e),Ke(t),n="depositProducts"):"saving"===s?(t=Ve.filter(s=>s.id!==e),Ue(t),n="savingProducts"):"loan"===s&&(t=Qe.filter(s=>s.id!==e),Xe(t),n="loanProducts"),localStorage.setItem(n,JSON.stringify(t)),rs({type:"success",text:"".concat(a," \uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),setTimeout(()=>rs(null),3e3)},[Ge,Ve,Qe]),ca=(0,n.useCallback)(async function(){if(u)if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&ys.current&&vs)bs(ys.current);else try{const e=(0,i.H9)(r.db,"ClassStock/".concat(u,"/marketStatus/status")),s=await(0,i.x7)(e);let a;s.exists()?a=s.data():(a={isOpen:!1},await(0,i.BN)(e,a)),ys.current=a,bs(a),js(!0)}catch(He){c.vF.error("\uc2dc\uc7a5 \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328:",He),fs("\uc2dc\uc7a5 \uc0c1\ud0dc\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},[u,vs]),ma=(0,n.useCallback)(async e=>{const s=e?"\uc218\ub3d9 \uac1c\uc7a5":"\uc218\ub3d9 \ud3d0\uc7a5";if(window.confirm("\uc815\ub9d0\ub85c \uc2dc\uc7a5\uc744 '".concat(s,"' \uc0c1\ud0dc\ub85c \ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){try{const s={isOpen:e};bs(s),ys.current=s;const a=await Ts({classCode:u,isOpen:e});fs(a.data.message)}catch(He){c.vF.error("\uc2dc\uc7a5 \uc0c1\ud0dc \ubcc0\uacbd \uc624\ub958:",He),fs("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(He.message)),ys.current?bs(ys.current):ca(!0)}setTimeout(()=>fs(""),5e3)}},[u,Ts,ca]),ua=(0,n.useCallback)(async()=>{if(window.confirm("\ubaa8\ub4e0 \uc8fc\uc2dd \uc815\ubcf4\ub97c \ucd08\uae30\ud654\ud558\uace0 \uae30\ubcf8\uac12\uc73c\ub85c \uc124\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")){try{const e=(0,r.wP)(r.db);Z.forEach(s=>{const a=(0,i.H9)(r.db,"CentralStocks",s.id);e.set(a,s)}),await e.commit(),alert("\uc8fc\uc2dd \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),fs("\uc8fc\uc2dd \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(He){c.vF.error("\uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654 \uc911 \uc624\ub958 \ubc1c\uc0dd:",He),fs("\ucd08\uae30\ud654 \uc2e4\ud328: ".concat(He.message))}setTimeout(()=>fs(""),5e3)}},[]),xa=(0,n.useCallback)(()=>{const e=localStorage.getItem("parkingInterestRate");e&&Ns(parseFloat(e))},[]),ha=(0,n.useCallback)(()=>{if(!As||isNaN(As)||parseFloat(As)<0)return void Ss({type:"error",text:"\uc720\ud6a8\ud55c \uc774\uc790\uc728\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694 (0 \uc774\uc0c1)."});const e=parseFloat(As);Ns(e),localStorage.setItem("parkingInterestRate",e.toString()),Ss({type:"success",text:"\ud30c\ud0b9 \ud1b5\uc7a5 \uc77c\uc77c \uc774\uc790\uc728\uc774 ".concat(e,"%\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),ws(""),setTimeout(()=>Ss(null),3e3)},[As]),pa=(0,n.useCallback)(async()=>{if(!xe||"function"!==typeof xe)return void alert("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const e=pe.trim();if(e){fe(!0);try{await xe(e)&&be("")}catch(He){c.vF.error("AdminSettingsModal: \ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc911 \uc624\ub958:",He)}finally{fe(!1)}}else alert("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[pe,xe]),ba=(0,n.useCallback)(async e=>{if(he&&"function"===typeof he){fe(!0);try{await he(e)}catch(He){c.vF.error("AdminSettingsModal: \ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc911 \uc624\ub958:",He)}finally{fe(!1)}}else alert("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[he]);(0,n.useEffect)(()=>{x&&(Vs(),Be(""),ia(),xa()),x||(be(""),je([]),De([]),Ce(null),Te([]),Ae(!1),Le(null),We([]),qe(!1),fe(!1),ke(!1),Me(!1),Ee(!1),Be(""),rs(null),fs(""),Ss(null))},[x,p,ta,aa,Us,ia,xa]),(0,n.useEffect)(()=>{const e={taskManagement:["jobAndTask",()=>ds("task")],jobSettings:["jobAndTask",()=>ds("job")],studentManagement:["studentAndMember",()=>cs("student")],salarySettings:["studentAndMember",()=>cs("salary")],memberManagement:["studentAndMember",()=>cs("member")],financialProducts:["financeAndMarket",()=>us("financial")],parkingAccount:["financeAndMarket",()=>us("parking")],marketControl:["financeAndMarket",()=>us("market")],databaseManagement:["system",()=>hs("database")],systemManagement:["system",()=>hs("system")]}[p];e&&(b(e[0]),e[1]())},[p,b]),(0,n.useEffect)(()=>{x&&"studentAndMember"===p&&"student"===os&&aa()},[x,p,os]),(0,n.useEffect)(()=>{x&&"studentAndMember"===p&&"member"===os&&ta()},[x,p,os]),(0,n.useEffect)(()=>{x&&"financeAndMarket"===p&&"market"===ms&&ca()},[x,p,ms,ca]);const ga=()=>{if(!Oe)return"\uc544\uc9c1 \uc9c0\uae09 \uae30\ub85d \uc5c6\uc74c";try{const e=Oe;return"".concat(e.getFullYear(),"\ub144 ").concat(String(e.getMonth()+1).padStart(2,"0"),"\uc6d4 ").concat(String(e.getDate()).padStart(2,"0"),"\uc77c ").concat(String(e.getHours()).padStart(2,"0"),":").concat(String(e.getMinutes()).padStart(2,"0"))}catch(e){return c.vF.error("formatLastSalaryDate \uc624\ub958:",e),"\ub0a0\uc9dc \ud615\uc2dd \uc624\ub958"}};if(!x)return null;if(!a&&!o)return(0,m.jsx)("div",{className:"admin-settings-modal show",children:(0,m.jsxs)("div",{className:"admin-settings-content",children:[(0,m.jsx)("h2",{children:"\uad00\ub9ac\uc790 \uc124\uc815"}),(0,m.jsx)("p",{children:"\uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,m.jsx)("button",{onClick:()=>h(!1),style:ka,children:"\ub2eb\uae30"})]})});const fa={background:"linear-gradient(135deg, #00fff2, #00a8ff)",color:"#000",padding:"10px 24px",borderRadius:"8px",fontWeight:700,fontSize:"0.95rem",border:"none",cursor:"pointer",boxShadow:"0 0 10px rgba(0,255,242,0.3)"},va={color:"#e8e8ff",fontWeight:600},ja={background:"rgba(0,0,0,0.3)",border:"1px solid rgba(0,255,242,0.2)",borderRadius:"8px",color:"#fff",padding:"10px 12px",width:"100%",fontSize:"0.95rem"},ya={background:"rgba(0,255,242,0.12)",color:"#00fff2",padding:"10px 20px",borderRadius:"8px",fontWeight:600,fontSize:"0.9rem",border:"1px solid rgba(0,255,242,0.3)",cursor:"pointer"},ka={background:"rgba(75,85,99,0.3)",color:"#9999bb",padding:"10px 20px",borderRadius:"8px",fontWeight:500,fontSize:"0.9rem",border:"1px solid rgba(75,85,99,0.5)",cursor:"pointer"};return(0,m.jsxs)("div",{className:"admin-settings-modal ".concat(x?"show":""),children:[(0,m.jsxs)("div",{className:"admin-settings-content",style:{color:"#e8e8ff"},children:[(0,m.jsxs)("h2",{children:["\uad00\ub9ac\uc790 \uc124\uc815"," ",o&&(0,m.jsx)("span",{className:"super-admin-badge",children:"(\ucd5c\uace0 \uad00\ub9ac\uc790)"})]}),!o&&u&&(0,m.jsxs)("p",{className:"admin-class-info",children:["\uad00\ub9ac \ud559\uae09: ",u]}),(0,m.jsxs)("div",{className:"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700",style:{background:"linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)"},children:[(0,m.jsx)("button",{className:"px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ".concat("generalSettings"===p?"active":""),onClick:()=>b("generalSettings"),children:"\u2699\ufe0f \uc77c\ubc18 \uc124\uc815"}),(0,m.jsx)("button",{className:"px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ".concat("jobAndTask"===p?"active":""),onClick:()=>b("jobAndTask"),children:"\ud83d\udcbc \uc9c1\uc5c5/\ud560\uc77c"}),(0,m.jsx)("button",{className:"px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ".concat("studentAndMember"===p?"active":""),onClick:()=>b("studentAndMember"),children:"\ud83d\udc65 \ud559\uc0dd/\uad6c\uc131\uc6d0"}),(0,m.jsx)("button",{className:"px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ".concat("financeAndMarket"===p?"active":""),onClick:()=>b("financeAndMarket"),children:"\ud83c\udfe6 \uae08\uc735/\uc2dc\uc7a5"}),(0,m.jsx)("button",{className:"px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ".concat("system"===p?"active":""),onClick:()=>b("system"),children:"\ud83d\udd27 \uc2dc\uc2a4\ud15c"})]}),"generalSettings"===p&&(0,m.jsxs)("div",{className:"general-settings-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"admin-goal-settings section-card",children:[(0,m.jsx)("h3",{children:"\ubaa9\ud45c \ubc0f \ucfe0\ud3f0 \uac00\uce58 \uc124\uc815"}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{style:va,children:"\ud074\ub798\uc2a4 \ubaa9\ud45c \ucfe0\ud3f0 \uc218:"}),(0,m.jsx)("input",{type:"number",min:"1",value:g||"",onChange:e=>f&&f(e.target.value),style:ja})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{style:va,children:["\ucfe0\ud3f0 \uac00\uce58 (",Os,"):"]}),(0,m.jsx)("input",{type:"number",min:"1",value:v||"",onChange:e=>j&&j(e.target.value),style:ja})]}),(0,m.jsx)("button",{onClick:y,style:fa,children:"\uc800\uc7a5"})]}),(0,m.jsxs)("div",{className:"admin-goal-settings section-card",style:{marginTop:"16px"},children:[(0,m.jsx)("h3",{children:"\ud654\ud3d0 \ub2e8\uc704 \uc124\uc815"}),(0,m.jsx)("p",{style:{fontSize:"13px",color:"#9999bb",marginBottom:"12px"},children:"\uc571\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ud654\ud3d0 \ub2e8\uc704\ub97c \ubcc0\uacbd\ud569\ub2c8\ub2e4. (\uae30\ubcf8: \uc54c\ucc2c)"}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{style:va,children:"\ud654\ud3d0 \ub2e8\uc704:"}),(0,m.jsx)("input",{type:"text",maxLength:10,value:Ps,onChange:e=>Ws(e.target.value),placeholder:"\uc608: \uc54c\ucc2c, \uc6d0, \uace8\ub4dc",style:ja})]}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#9999bb",marginBottom:"8px"},children:["\ubbf8\ub9ac\ubcf4\uae30: 1000",Ps,", 1\uc5b5 2000\ub9cc ",Ps]}),(0,m.jsx)("button",{onClick:Hs,style:zs||!Ps.trim()?(0,t.A)((0,t.A)({},fa),{},{background:"rgba(75,85,99,0.5)",color:"#6b7280",boxShadow:"none",cursor:"not-allowed"}):fa,disabled:zs||!Ps.trim(),children:zs?"\uc800\uc7a5 \uc911...":"\ud654\ud3d0 \ub2e8\uc704 \uc800\uc7a5"})]})]}),"jobAndTask"===p&&(0,m.jsxs)("div",{className:"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50",children:[(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("job"===is?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>ds("job"),children:"\uc9c1\uc5c5 \uad00\ub9ac"}),(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("task"===is?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>ds("task"),children:"\ud560\uc77c \uad00\ub9ac"})]}),"jobAndTask"===p&&"task"===is&&(0,m.jsxs)("div",{className:"task-management-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"admin-tasks-settings section-card",children:[(0,m.jsx)("h3",{children:"\ud560\uc77c \uad00\ub9ac"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c\uacfc \uacf5\ud1b5 \ud560\uc77c\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."}),I?(0,m.jsxs)("div",{className:"add-task-form",children:[(0,m.jsx)("h4",{children:ne?"\ud560\uc77c \uc218\uc815":"\uc0c8 \ud560\uc77c \ucd94\uac00"}),(0,m.jsx)("p",{children:ce&&k&&oe?"\uc9c1\uc5c5: ".concat((null===(s=k.find(e=>e.id===oe))||void 0===s?void 0:s.title)||"\uc54c \uc218 \uc5c6\ub294 \uc9c1\uc5c5"):"\uacf5\ud1b5 \ud560\uc77c"}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"\ud560\uc77c \uc774\ub984:"}),(0,m.jsx)("input",{type:"text",value:J,onChange:e=>O(e.target.value),placeholder:"\ud560\uc77c \uc774\ub984 \uc785\ub825",style:ja})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"\ubcf4\uc0c1 (\ucfe0\ud3f0):"}),(0,m.jsx)("input",{type:"number",min:"0",value:V,onChange:e=>U(e.target.value),placeholder:"\ucfe0\ud3f0 \ubcf4\uc0c1",style:ja})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"\ucd5c\ub300 \ud074\ub9ad \uc218:"}),(0,m.jsx)("input",{type:"number",min:"1",value:ee,onChange:e=>se(e.target.value),placeholder:"\ucd5c\ub300 \ud074\ub9ad \uc218",style:ja})]}),(0,m.jsxs)("div",{className:"form-group",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,m.jsxs)("label",{style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",margin:0},children:[(0,m.jsx)("input",{type:"checkbox",checked:ae||!1,onChange:e=>te(e.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,m.jsx)("span",{children:"\uc2b9\uc778 \ud544\uc694 (\ubcf4\ub108\uc2a4 \ud560\uc77c)"})]}),ae&&(0,m.jsx)("span",{style:{fontSize:"12px",color:"#f59e0b",fontWeight:"500"},children:"\ud559\uc0dd\uc774 \uc644\ub8cc \uc2dc \uad00\ub9ac\uc790 \uc2b9\uc778 \ud6c4 \ubcf4\uc0c1 \uc9c0\uae09"})]}),(0,m.jsxs)("div",{className:"task-form-buttons",children:[(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \ud560\uc77c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad"),re&&"function"===typeof re?re():(c.vF.error("[AdminSettingsModal] handleSaveTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \uc800\uc7a5 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},style:fa,children:ne?"\uc218\uc815":"\ucd94\uac00"}),(0,m.jsx)("button",{onClick:()=>{M(!1),le(null)},style:ka,children:"\ucde8\uc18c"})]})]}):(0,m.jsxs)("div",{className:"task-management",children:[(0,m.jsxs)("div",{className:"task-management-buttons",children:[(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \ucd94\uac00 \ubc84\ud2bc \ud074\ub9ad"),sa(null,!1)},style:ya,children:"\uacf5\ud1b5 \ud560\uc77c \ucd94\uac00"}),(0,m.jsxs)("select",{onChange:e=>{e.target.value&&(c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5\ubcc4 \ud560\uc77c \ucd94\uac00 \uc120\ud0dd:",e.target.value),sa(e.target.value,!0))},style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(0,255,242,0.2)",borderRadius:"8px",color:"#e8e8ff",padding:"10px 12px",fontSize:"0.9rem",cursor:"pointer"},value:"",children:[(0,m.jsx)("option",{value:"",children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c \ucd94\uac00..."}),Array.isArray(k)&&k.map(e=>(0,m.jsxs)("option",{value:e.id,children:[e.title,"\uc5d0 \ud560\uc77c \ucd94\uac00"]},e.id))]})]}),(0,m.jsxs)("div",{className:"tasks-by-job",children:[(0,m.jsx)("h4",{children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c"}),Array.isArray(k)&&k.length>0?k.map(e=>(0,m.jsxs)("div",{className:"job-tasks",children:[(0,m.jsx)("h5",{children:e.title}),Array.isArray(e.tasks)&&e.tasks.length>0?(0,m.jsx)("ul",{className:"admin-tasks",children:e.tasks.map(s=>(0,m.jsxs)("li",{className:"admin-task-item",children:[(0,m.jsxs)("div",{className:"task-info",children:[(0,m.jsxs)("span",{className:"task-name",children:[s.name,s.requiresApproval&&(0,m.jsx)("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#f59e0b",fontWeight:"bold"},children:"[\uc2b9\uc778\ud544\uc694]"})]}),(0,m.jsxs)("span",{className:"task-reward",children:["\ubcf4\uc0c1: ",s.reward||0," \ucfe0\ud3f0"]}),(0,m.jsxs)("span",{className:"task-clicks",children:["\ud074\ub9ad: ",s.clicks||0,"/",s.maxClicks||5]})]}),(0,m.jsxs)("div",{className:"task-actions",children:[(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud560\uc77c \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",s,e.id),$s(s,e.id)},className:"edit-button",children:"\uc218\uc815"}),(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud560\uc77c \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",s.id,e.id),ea(s.id,e.id)},className:"delete-button",children:"\uc0ad\uc81c"})]})]},s.id))}):(0,m.jsx)("p",{className:"no-items-message",children:"\uc774 \uc9c1\uc5c5\uc5d0 \ub4f1\ub85d\ub41c \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]},e.id)):(0,m.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,m.jsxs)("div",{className:"common-tasks",children:[(0,m.jsx)("h4",{children:"\uacf5\ud1b5 \ud560\uc77c"}),Array.isArray(D)&&D.length>0?(0,m.jsx)("ul",{className:"admin-tasks",children:D.map(e=>(0,m.jsxs)("li",{className:"admin-task-item",children:[(0,m.jsxs)("div",{className:"task-info",children:[(0,m.jsxs)("span",{className:"task-name",children:[e.name,e.requiresApproval&&(0,m.jsx)("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#f59e0b",fontWeight:"bold"},children:"[\uc2b9\uc778\ud544\uc694]"})]}),(0,m.jsxs)("span",{className:"task-reward",children:["\ubcf4\uc0c1: ",e.reward||0," \ucfe0\ud3f0"]}),(0,m.jsxs)("span",{className:"task-clicks",children:["\ud074\ub9ad: ",e.clicks||0,"/",e.maxClicks||5]})]}),(0,m.jsxs)("div",{className:"task-actions",children:[(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e),$s(e)},className:"edit-button",children:"\uc218\uc815"}),(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",e.id),ea(e.id)},className:"delete-button",children:"\uc0ad\uc81c"})]})]},e.id))}):(0,m.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})]})]}),"jobAndTask"===p&&"job"===is&&(0,m.jsxs)("div",{className:"job-settings-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"admin-jobs-settings section-card",children:[(0,m.jsx)("h3",{children:"\uc9c1\uc5c5 \uad00\ub9ac"}),(0,m.jsxs)("div",{className:"add-job-form",children:[(0,m.jsx)("input",{type:"text",value:N,onChange:e=>A(e.target.value),placeholder:w?"\uc9c1\uc5c5\uba85 \uc218\uc815":"\uc0c8 \uc9c1\uc5c5\uba85 \uc785\ub825",style:ja}),(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad"),S&&"function"===typeof S?S():(c.vF.error("[AdminSettingsModal] handleSaveJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \uc800\uc7a5 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},style:fa,children:w?"\uc218\uc815":"\ucd94\uac00"}),w&&(0,m.jsx)("button",{onClick:()=>{C(null),A("")},style:ka,children:"\ucde8\uc18c"})]}),(0,m.jsxs)("div",{className:"jobs-list",children:[(0,m.jsx)("h4",{children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5 \ubaa9\ub85d"}),k&&k.length>0?(0,m.jsx)("ul",{className:"admin-jobs grid grid-cols-2 md:grid-cols-3 gap-2",children:k.map(e=>(0,m.jsxs)("li",{className:"admin-job-item flex items-center justify-between gap-1 px-3 py-1.5 text-sm",children:[(0,m.jsx)("span",{className:"job-title truncate",children:e.title}),(0,m.jsxs)("div",{className:"job-actions flex gap-1 shrink-0",children:[(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e),Ys(e)},className:"edit-button text-xs px-2 py-0.5",children:"\uc218\uc815"}),(0,m.jsx)("button",{onClick:()=>{c.vF.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",e.id),Zs(e.id)},className:"delete-button text-xs px-2 py-0.5",children:"\uc0ad\uc81c"})]})]},e.id))}):(0,m.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})]}),"studentAndMember"===p&&(0,m.jsxs)("div",{className:"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50",children:[(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("student"===os?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>cs("student"),children:"\ud559\uc0dd/\uae09\uc5ec \uad00\ub9ac"}),(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("salary"===os?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>cs("salary"),children:"\uae09\uc5ec \uc124\uc815"}),(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("member"===os?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>cs("member"),children:"\uad6c\uc131\uc6d0 \uad00\ub9ac"})]}),"studentAndMember"===p&&"student"===os&&(0,m.jsxs)("div",{className:"student-management-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"student-jobs-settings section-card",children:[(0,m.jsx)("h3",{children:"\ud559\uc0dd\uc9c1\uc5c5 \uad00\ub9ac"}),He&&(0,m.jsx)("p",{className:"error-message",children:He}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\ud559\uc0dd\ub4e4\uc5d0\uac8c \uc9c1\uc5c5\uc744 \ubc30\uc815\ud558\uac70\ub098 \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc8fc\uae09\uc740 \uc9c1\uc5c5 \uc218\uc5d0 \ub530\ub77c \ucc28\ub4f1 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,m.jsxs)("div",{className:"salary-management",children:[(0,m.jsxs)("div",{className:"salary-info",children:[(0,m.jsx)("h4",{children:"\uc8fc\uae09 \uc9c0\uae09 \uad00\ub9ac"}),(0,m.jsx)("p",{children:"\uae30\ubcf8 \uc8fc\uae09: 200\ub9cc\uc6d0, \ucd94\uac00 \uc9c1\uc5c5\ub2f9: 50\ub9cc\uc6d0"}),(0,m.jsxs)("p",{children:["\uc138\uc728: ",(100*Fs.taxRate).toFixed(1),"%"]}),(0,m.jsxs)("p",{children:["\uc8fc\uae09 \uc778\uc0c1\ub960:"," ",(100*Fs.salaryIncreaseRate).toFixed(1),"% (\ub9e4\uc8fc)"]}),(0,m.jsxs)("p",{children:["\ub9c8\uc9c0\ub9c9 \uc8fc\uae09 \uc9c0\uae09\uc77c: ",ga()]}),(0,m.jsx)("p",{className:"auto-payment-info",children:"\u23f0 \uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09: \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc (\uc11c\ubc84 \uc790\ub3d9 \uc2e4\ud589)"})]}),(0,m.jsxs)("div",{className:"salary-buttons",children:[(0,m.jsx)("button",{className:"admin-button pay-salary-button",onClick:async()=>{var e,s;const a=(null===(e=Bs.data)||void 0===e?void 0:e.students)||Fe,t=(null===(s=Gs.data)||void 0===s?void 0:s.settings)||Fs;if(a&&0!==a.length){if(window.confirm("\ubaa8\ub4e0 \ud559\uc0dd\ub4e4\uc5d0\uac8c \uc9c1\uc5c5\ubcc4 \uc8fc\uae09\uc744 \uc9c0\uae09\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\uc9c1\uc5c5\uc774 \uc788\ub294 \ud559\uc0dd\ub9cc \ud574\ub2f9, \uc138\uae08 ".concat((100*t.taxRate).toFixed(1),"% \uacf5\uc81c)"))){_e(!0);try{const e=await Ks.mutateAsync({studentIds:[],payAll:!0});if(e.success){const{summary:s}=e;alert("\uc8fc\uae09 \uc9c0\uae09 \uc644\ub8cc!\n".concat(s.totalStudentsPaid,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc9c0\uae09\n\ucd1d \uae09\uc5ec: ").concat((s.totalGrossPaid/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc138\uae08 \uacf5\uc81c: ").concat((s.totalTaxDeducted/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc2e4\uc81c \uc9c0\uae09: ").concat((s.totalNetPaid/1e4).toFixed(0),"\ub9cc\uc6d0"))}else alert(e.message||"\uc8fc\uae09 \uc9c0\uae09\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(He){c.vF.error("[AdminSettingsModal] \uc804\uccb4 \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09 \uc624\ub958:",He),alert("\uc8fc\uae09 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message)}finally{_e(!1)}}}else alert("\ud559\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},disabled:Re||Ie,children:Re?"\uc8fc\uae09 \uc9c0\uae09 \uc911...":"\uc804\uccb4 \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09"}),(0,m.jsx)("button",{className:"admin-button pay-selected-salary-button",onClick:async()=>{var e;if(0===Pe.length)return void alert("\uc120\ud0dd\ub41c \ud559\uc0dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const s=(null===(e=Gs.data)||void 0===e?void 0:e.settings)||Fs;if(window.confirm("\uc120\ud0dd\ub41c ".concat(Pe.length,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc8fc\uae09\uc744 \uc9c0\uae09\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\uc138\uae08 ").concat((100*s.taxRate).toFixed(1),"% \uacf5\uc81c \ud6c4 \uc9c0\uae09)"))){_e(!0);try{const e=await Ks.mutateAsync({studentIds:Pe,payAll:!1});if(e.success){const{summary:s}=e;alert("\uc8fc\uae09 \uc9c0\uae09 \uc644\ub8cc!\n".concat(s.totalStudentsPaid,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc9c0\uae09\n\ucd1d \uae09\uc5ec: ").concat((s.totalGrossPaid/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc138\uae08 \uacf5\uc81c: ").concat((s.totalTaxDeducted/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc2e4\uc81c \uc9c0\uae09: ").concat((s.totalNetPaid/1e4).toFixed(0),"\ub9cc\uc6d0")),We([]),qe(!1)}else alert(e.message||"\uc8fc\uae09 \uc9c0\uae09\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(He){c.vF.error("[AdminSettingsModal] \uc120\ud0dd\ub41c \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09 \uc624\ub958:",He),alert("\uc8fc\uae09 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message)}finally{_e(!1)}}},disabled:Re||Ie||0===Pe.length,children:Re?"\uc8fc\uae09 \uc9c0\uae09 \uc911...":"\uc120\ud0dd \ud559\uc0dd(".concat(Pe.length,") \uc8fc\uae09 \uc9c0\uae09")})]})]}),(0,m.jsxs)("div",{className:"student-jobs-container",children:[(0,m.jsxs)("div",{className:"student-list-header",children:[(0,m.jsxs)("h4",{children:["\ud559\uc0dd \ubaa9\ub85d"," ",!o&&u&&"(".concat(u," \ud559\uae09)")]}),(0,m.jsx)("button",{onClick:aa,style:ya,disabled:Ie,children:Ie?"\ub85c\ub529 \uc911...":"\ud559\uc0dd \ubaa9\ub85d \uc0c8\ub85c\uace0\uce68"})]}),Ie?(0,m.jsx)("p",{children:"\ud559\uc0dd \uc815\ubcf4 \ub85c\ub529 \uc911..."}):Fe.length>0?(0,m.jsx)("div",{className:"members-table-container",children:(0,m.jsxs)("table",{className:"members-table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:(0,m.jsx)("input",{type:"checkbox",checked:ze,onChange:()=>{We(ze?[]:Fe.map(e=>e.id).filter(e=>null!=e)),qe(!ze)},disabled:0===Fe.length})}),(0,m.jsx)("th",{children:"\ud559\uc0dd \uc774\ub984"}),(0,m.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,m.jsx)("th",{children:"\ud559\uae09"}),(0,m.jsx)("th",{children:"\ud604\uc7ac \uc9c1\uc5c5"}),(0,m.jsx)("th",{children:"\uc608\uc0c1 \ucd1d\uae09\uc5ec"}),(0,m.jsx)("th",{children:"\uc138\uae08 \uacf5\uc81c"}),(0,m.jsx)("th",{children:"\uc2e4\uae09\uc5ec"}),(0,m.jsx)("th",{children:"\ubcf4\uc720 \ud604\uae08"}),(0,m.jsx)("th",{children:"\ucd5c\uadfc \uc8fc\uae09\uc77c"}),(0,m.jsx)("th",{children:"\uad00\ub9ac"})]})}),(0,m.jsx)("tbody",{children:Fe.map(e=>{const s=Xs(e.selectedJobIds,!0);return(0,m.jsxs)("tr",{className:Pe.includes(e.id)?"selected-student-row":"",children:[(0,m.jsx)("td",{children:(0,m.jsx)("input",{type:"checkbox",checked:Pe.includes(e.id),onChange:()=>{return s=e.id,void We(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}})}),(0,m.jsx)("td",{children:e.nickname||e.name||"\uc774\ub984 \uc5c6\uc74c"}),(0,m.jsx)("td",{children:e.email||"-"}),(0,m.jsx)("td",{children:e.classCode||"\ubbf8\uc9c0\uc815"}),(0,m.jsx)("td",{children:Array.isArray(e.selectedJobIds)&&e.selectedJobIds.length>0?e.selectedJobIds.map(e=>{const s=Array.isArray(k)?k.find(s=>s.id===e):null;return s?s.title:null}).filter(Boolean).join(", "):(0,m.jsx)("span",{className:"no-jobs",children:"\uc9c1\uc5c5 \uc5c6\uc74c"})}),(0,m.jsx)("td",{className:"salary-column",children:"".concat((s.gross/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,m.jsx)("td",{className:"tax-column",children:"".concat((s.tax/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,m.jsx)("td",{className:"net-salary-column",children:"".concat((s.net/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,m.jsxs)("td",{className:"cash-column",children:[(e.cash||0).toLocaleString(),"\uc6d0"]}),(0,m.jsx)("td",{children:e.lastSalaryDate?e.lastSalaryDate.toLocaleDateString():"\uc5c6\uc74c"}),(0,m.jsx)("td",{children:(0,m.jsx)("button",{className:"edit-button",onClick:()=>(e=>{Ce(e),Te(Array.isArray(e.selectedJobIds)?[...e.selectedJobIds]:[]),Ae(!0)})(e),children:"\uc9c1\uc5c5 \uc124\uc815"})})]},e.id)})})]})}):(0,m.jsx)("p",{className:"no-items-message",children:o||u?"\ud559\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})]}),"financeAndMarket"===p&&(0,m.jsxs)("div",{className:"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50",children:[(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("financial"===ms?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>us("financial"),children:"\uae08\uc735 \uc0c1\ud488"}),(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("parking"===ms?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>us("parking"),children:"\ud30c\ud0b9 \ud1b5\uc7a5"}),(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("market"===ms?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>us("market"),children:"\uc2dc\uc7a5 \uc81c\uc5b4"})]}),"financeAndMarket"===p&&"financial"===ms&&(0,m.jsxs)("div",{className:"financial-products-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"financial-products-settings section-card",children:[(0,m.jsx)("h3",{children:"\uae08\uc735 \uc0c1\ud488 \uad00\ub9ac"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\uc608\uae08, \uc801\uae08, \ub300\ucd9c \uc0c1\ud488\uc744 \ucd94\uac00\ud558\uac70\ub098 \uc0ad\uc81c\ud569\ub2c8\ub2e4."}),(0,m.jsxs)("div",{className:"financial-sub-tabs flex gap-2 mb-4",children:[(0,m.jsx)("button",{className:"sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ".concat("deposit"===ts?"active":""),onClick:()=>ns("deposit"),style:{border:"deposit"===ts?"2px solid #4f46e5":"1px solid #374151",background:"deposit"===ts?"#4f46e5":"transparent",color:"deposit"===ts?"white":"#9ca3af"},children:"\uc608\uae08 \uc0c1\ud488"}),(0,m.jsx)("button",{className:"sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ".concat("saving"===ts?"active":""),onClick:()=>ns("saving"),style:{border:"saving"===ts?"2px solid #4f46e5":"1px solid #374151",background:"saving"===ts?"#4f46e5":"transparent",color:"saving"===ts?"white":"#9ca3af"},children:"\uc801\uae08 \uc0c1\ud488"}),(0,m.jsx)("button",{className:"sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ".concat("loan"===ts?"active":""),onClick:()=>ns("loan"),style:{border:"loan"===ts?"2px solid #4f46e5":"1px solid #374151",background:"loan"===ts?"#4f46e5":"transparent",color:"loan"===ts?"white":"#9ca3af"},children:"\ub300\ucd9c \uc0c1\ud488"})]}),ls&&(0,m.jsx)("div",{className:"message-box ".concat(ls.type," p-3 mb-4 rounded-lg text-white"),style:{background:"success"===ls.type?"#065f46":"#991b1b"},children:ls.text}),(0,m.jsxs)("div",{className:"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50",children:[(0,m.jsxs)("h4",{className:"mb-3 text-white",children:["deposit"===ts?"\uc608\uae08":"saving"===ts?"\uc801\uae08":"\ub300\ucd9c"," ","\uc0c1\ud488 \ucd94\uac00"]}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 text-gray-400 text-xs",children:"\uc0c1\ud488\uba85"}),(0,m.jsx)("input",{type:"text",value:Ye,onChange:e=>Ze(e.target.value),placeholder:"\uc0c1\ud488\uba85 \uc785\ub825",className:"w-full",style:ja})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 text-gray-400 text-xs",children:"\uae30\uac04 (\uc77c)"}),(0,m.jsx)("input",{type:"number",value:$e,onChange:e=>es(e.target.value),placeholder:"\uae30\uac04 (\uc77c)",min:"1",className:"w-full",style:ja})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 text-gray-400 text-xs",children:"\uc774\uc728 (%)"}),(0,m.jsx)("input",{type:"number",value:ss,onChange:e=>as(e.target.value),placeholder:"\uc774\uc728 (%)",min:"0",step:"0.1",className:"w-full",style:ja})]})]}),(0,m.jsx)("button",{onClick:da,className:"w-full",style:fa,children:"\uc0c1\ud488 \ucd94\uac00\ud558\uae30"})]}),(0,m.jsxs)("div",{className:"product-list",children:[(0,m.jsxs)("h4",{className:"mb-3 text-white",children:["deposit"===ts?"\uc608\uae08":"saving"===ts?"\uc801\uae08":"\ub300\ucd9c"," ","\uc0c1\ud488 \ubaa9\ub85d"]}),(()=>{const e="deposit"===ts?Ge:"saving"===ts?Ve:Qe;return 0===e.length?(0,m.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,m.jsx)("div",{className:"members-table-container",children:(0,m.jsxs)("table",{className:"members-table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"\uc0c1\ud488\uba85"}),(0,m.jsx)("th",{children:"\uae30\uac04 (\uc77c)"}),(0,m.jsx)("th",{children:"\uc774\uc728 (%)"}),(0,m.jsx)("th",{children:"\uad00\ub9ac"})]})}),(0,m.jsx)("tbody",{children:e.map(e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.name}),(0,m.jsxs)("td",{children:[e.period,"\uc77c"]}),(0,m.jsxs)("td",{children:[e.rate,"%"]}),(0,m.jsx)("td",{children:(0,m.jsx)("button",{onClick:()=>oa(e.id,ts),className:"delete-button",children:"\uc0ad\uc81c"})})]},e.id))})]})})})()]})]})]}),"financeAndMarket"===p&&"market"===ms&&(0,m.jsxs)("div",{className:"market-control-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"market-control-settings section-card",children:[(0,m.jsx)("h3",{children:"\uc8fc\uc2dd \uc2dc\uc7a5 \uc81c\uc5b4"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\uc8fc\uc2dd \uc2dc\uc7a5\uc758 \uac1c\uc7a5/\ud3d0\uc7a5 \uc0c1\ud0dc\ub97c \uc218\ub3d9\uc73c\ub85c \uc81c\uc5b4\ud569\ub2c8\ub2e4."}),(0,m.jsxs)("div",{className:"p-4 rounded-xl mb-4 bg-gray-700/50",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("p",{className:"text-white",children:["\ud604\uc7ac \uc0c1\ud0dc:"," ",(0,m.jsx)("span",{className:"font-bold px-3 py-1 rounded-2xl",style:{color:ps.isOpen?"#22c55e":"#ef4444",background:ps.isOpen?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)"},children:ps.isOpen?"\ud83d\udfe2 \uac1c\uc7a5":"\ud83d\udd34 \ud3d0\uc7a5"})]}),(0,m.jsx)("button",{onClick:()=>ca(!0),style:ya,disabled:!u,children:"\uc0c8\ub85c\uace0\uce68"})]}),(0,m.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,m.jsx)("button",{onClick:()=>ma(!0),disabled:ps.isOpen,className:"flex-1",style:(0,t.A)((0,t.A)({},fa),{},{background:ps.isOpen?"#374151":"#22c55e",cursor:ps.isOpen?"not-allowed":"pointer"}),children:"\uc218\ub3d9 \uac1c\uc7a5"}),(0,m.jsx)("button",{onClick:()=>ma(!1),disabled:!ps.isOpen,className:"admin-cancel-button flex-1",style:{background:ps.isOpen?"#ef4444":"#374151",cursor:ps.isOpen?"pointer":"not-allowed"},children:"\uc218\ub3d9 \ud3d0\uc7a5"})]}),(0,m.jsxs)("p",{className:"text-xs text-gray-400",children:["\ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc815\ud574\uc9c4 \uc2dc\uac04\uacfc \uc0c1\uad00\uc5c6\uc774 \uc2dc\uc7a5 \uc0c1\ud0dc\uac00 \uc989\uc2dc \ubcc0\uacbd\ub429\ub2c8\ub2e4.",(0,m.jsx)("br",{}),"\uc790\ub3d9 \uac1c\uc7a5/\ud3d0\uc7a5 \uc2dc\uac04(\uc6d4-\uae08, \uc624\uc804 8\uc2dc/\uc624\ud6c4 3\uc2dc)\uc774 \ub418\uba74 \uc790\ub3d9\uc73c\ub85c \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4."]})]}),gs&&(0,m.jsx)("div",{className:"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center",children:gs}),(0,m.jsxs)("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/30",children:[(0,m.jsx)("h4",{className:"mb-3 text-red-500",children:"\u26a0\ufe0f \uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654"}),(0,m.jsx)("p",{className:"text-xs text-gray-400 mb-3",children:"\uc8fc\uc758: \uc774 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \ubaa8\ub4e0 \uc8fc\uc2dd\uc758 \uac00\uaca9\uacfc \uac70\ub798 \ub0b4\uc5ed\uc774 \uae30\ubcf8\uac12\uc73c\ub85c \ucd08\uae30\ud654\ub429\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,m.jsx)("button",{onClick:ua,className:"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold",children:"\ubaa8\ub4e0 \uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654"})]})]})]}),"financeAndMarket"===p&&"parking"===ms&&(0,m.jsxs)("div",{className:"parking-account-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"parking-account-settings section-card",children:[(0,m.jsx)("h3",{children:"\ud30c\ud0b9 \ud1b5\uc7a5 \uc774\uc790\uc728 \uad00\ub9ac"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\ud30c\ud0b9 \ud1b5\uc7a5\uc758 \uc77c\uc77c \uc774\uc790\uc728\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."}),Cs&&(0,m.jsx)("div",{className:"p-3 mb-4 rounded-lg text-white",style:{background:"success"===Cs.type?"#065f46":"#991b1b"},children:Cs.text}),(0,m.jsxs)("div",{className:"p-4 rounded-xl mb-4 bg-gray-700/50",children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm",children:"\ud604\uc7ac \uc77c\uc77c \uc774\uc790\uc728"}),(0,m.jsxs)("p",{className:"text-green-500 text-[32px] font-bold",children:[ks,"%"]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"block mb-2 text-gray-400",children:"\uc0c8 \uc77c\uc77c \uc774\uc790\uc728 (%)"}),(0,m.jsx)("input",{type:"number",value:As,onChange:e=>ws(e.target.value),placeholder:"\uc0c8 \uc774\uc790\uc728 \uc785\ub825 (%)",min:"0",step:"0.01",className:"mb-3",style:ja}),(0,m.jsx)("button",{onClick:ha,className:"w-full",style:fa,disabled:!As||isNaN(As)||parseFloat(As)<0,children:"\uc774\uc790\uc728 \ubcc0\uacbd"})]}),(0,m.jsx)("p",{className:"text-xs text-gray-400 mt-3",children:"\ud30c\ud0b9 \ud1b5\uc7a5\uc5d0 \uc608\uce58\ub41c \uae08\uc561\uc740 \ub9e4\uc77c \uc124\uc815\ub41c \uc774\uc790\uc728\ub9cc\ud07c \uc774\uc790\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."})]})]})]}),"studentAndMember"===p&&"member"===os&&(0,m.jsxs)("div",{className:"member-management-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"admin-class-members-container section-card",children:[(0,m.jsx)("h3",{children:"\ud559\uae09 \uad6c\uc131\uc6d0 \uad00\ub9ac"}),He&&(0,m.jsx)("p",{className:"error-message",children:He}),(0,m.jsxs)("p",{className:"admin-section-desc",children:["\ud559\uae09 \uad6c\uc131\uc6d0\uc758 \uc815\ubcf4\ub97c \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud569\ub2c8\ub2e4.",o&&" \ucd5c\uace0 \uad00\ub9ac\uc790\ub294 \ubaa8\ub4e0 \ud559\uae09\uc758 \uad6c\uc131\uc6d0\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),ye?(0,m.jsx)("p",{children:"\uad6c\uc131\uc6d0 \uc815\ubcf4 \ub85c\ub529 \uc911..."}):ve.length>0?(0,m.jsx)("div",{className:"user-cards-container",children:ve.map(e=>(0,m.jsxs)("div",{className:"user-card",children:[(0,m.jsxs)("div",{className:"user-card-header",children:[(0,m.jsx)("span",{className:"user-card-name",children:e.name}),(0,m.jsx)("span",{className:"user-card-role role-".concat(e.isSuperAdmin?"super":e.isAdmin?"admin":"student"),children:e.isSuperAdmin?"\ucd5c\uace0 \uad00\ub9ac\uc790":e.isAdmin?"\uad00\ub9ac\uc790":"\ud559\uc0dd"})]}),(0,m.jsxs)("div",{className:"user-card-body",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",e.email]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\ud559\uae09 \ucf54\ub4dc:"})," ",e.classCode]})]}),o&&(0,m.jsxs)("div",{className:"user-card-actions",children:[!e.isSuperAdmin&&(0,m.jsx)("button",{onClick:()=>ra(e.id,e.isAdmin),className:"admin-action-button ".concat(e.isAdmin?"remove-admin-button":"add-admin-button"),disabled:ye,children:e.isAdmin?"\uad00\ub9ac\uc790 \ud574\uc81c":"\uad00\ub9ac\uc790 \uc9c0\uc815"}),(0,m.jsx)("button",{onClick:()=>la(e.id),className:"admin-action-button reset-password-button",disabled:ye,children:"\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654"})]})]},e.id))}):(0,m.jsx)("p",{className:"no-members-message",children:o||u?"\ub4f1\ub85d\ub41c \ud559\uae09 \uad6c\uc131\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."}),(0,m.jsx)("div",{className:"refresh-members-section",children:(0,m.jsx)("button",{onClick:ta,style:ya,disabled:ye,children:ye?"\ub85c\ub529 \uc911...":"\uad6c\uc131\uc6d0 \ubaa9\ub85d \uc0c8\ub85c\uace0\uce68"})})]})]}),"studentAndMember"===p&&"salary"===os&&(0,m.jsxs)("div",{className:"salary-settings-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsxs)("div",{className:"salary-settings section-card",children:[(0,m.jsx)("h3",{children:"\uae09\uc5ec \uc124\uc815"}),(0,m.jsx)("p",{className:"admin-section-desc",children:"\uc138\uc728\uacfc \uc8fc\uae09 \uc778\uc0c1\ub960\uc744 \uc124\uc815\ud569\ub2c8\ub2e4. \uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09\uc740 \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc\uc5d0 \uc2e4\ud589\ub429\ub2c8\ub2e4."}),(0,m.jsxs)("div",{className:"salary-settings-form",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"\uc138\uc728 (%):"}),(0,m.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:Is,onChange:e=>Ms(e.target.value),style:ja,placeholder:"\uc608: 10 (10%)"}),(0,m.jsx)("small",{className:"form-help",children:"\ud559\uc0dd\ub4e4\uc758 \uc8fc\uae09\uc5d0\uc11c \uacf5\uc81c\ub420 \uc138\uc728\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{children:"\uc8fc\uae09 \uc778\uc0c1\ub960 (%):"}),(0,m.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:Js,onChange:e=>Es(e.target.value),style:ja,placeholder:"\uc608: 3 (3%)"}),(0,m.jsx)("small",{className:"form-help",children:"\ub9e4\uc8fc \uc790\ub3d9\uc73c\ub85c \uc801\uc6a9\ub420 \uc8fc\uae09 \uc778\uc0c1\ub960\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."})]}),(0,m.jsx)("button",{onClick:Qs,style:fa,disabled:Rs,children:Rs?"\uc800\uc7a5 \uc911...":"\uae09\uc5ec \uc124\uc815 \uc800\uc7a5"})]}),(0,m.jsxs)("div",{className:"current-salary-settings",children:[(0,m.jsx)("h4",{children:"\ud604\uc7ac \uae09\uc5ec \uc124\uc815"}),(0,m.jsxs)("div",{className:"settings-display",children:[(0,m.jsxs)("p",{children:["\ud604\uc7ac \uc138\uc728:"," ",(0,m.jsxs)("strong",{children:[(100*Fs.taxRate).toFixed(1),"%"]})]}),(0,m.jsxs)("p",{children:["\ud604\uc7ac \uc8fc\uae09 \uc778\uc0c1\ub960:"," ",(0,m.jsxs)("strong",{children:[(100*Fs.salaryIncreaseRate).toFixed(1),"%"]})]}),(0,m.jsxs)("p",{children:["\ub9c8\uc9c0\ub9c9 \uc790\ub3d9 \uc9c0\uae09\uc77c:"," ",(0,m.jsx)("strong",{children:ga()})]})]}),(0,m.jsxs)("div",{className:"salary-calculation-example",children:[(0,m.jsx)("h5",{children:"\uc8fc\uae09 \uacc4\uc0b0 \uc608\uc2dc"}),(0,m.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 1\uac1c: \ucd1d 200\ub9cc\uc6d0 \u2192 \uc138\uae08"," ",(2e6*Fs.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec"," ",(2e6*(1-Fs.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]}),(0,m.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 2\uac1c: \ucd1d 250\ub9cc\uc6d0 \u2192 \uc138\uae08"," ",(25e5*Fs.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec"," ",(25e5*(1-Fs.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]}),(0,m.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 3\uac1c: \ucd1d 300\ub9cc\uc6d0 \u2192 \uc138\uae08"," ",(3e6*Fs.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec"," ",(3e6*(1-Fs.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]})]}),(0,m.jsxs)("div",{className:"auto-payment-info",children:[(0,m.jsx)("h5",{children:"\uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09 \uc2dc\uc2a4\ud15c"}),(0,m.jsx)("p",{children:"\ud83e\udd16 \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc\uc5d0 \uc11c\ubc84\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \uc8fc\uae09\uc774 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,m.jsx)("p",{children:"\ud83d\udcc8 \ub9e4\uc8fc \uc8fc\uae09 \uc778\uc0c1\ub960\ub9cc\ud07c \uae09\uc5ec\uac00 \uc790\ub3d9\uc73c\ub85c \uc778\uc0c1\ub429\ub2c8\ub2e4."}),(0,m.jsx)("p",{children:"\ud83d\udcb0 \uc138\uae08\uc774 \uc790\ub3d9\uc73c\ub85c \uacf5\uc81c\ub418\uc5b4 \uc2e4\uae09\uc5ec\uac00 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,m.jsx)("p",{children:"\u2699\ufe0f \uad00\ub9ac\uc790\uac00 \ub85c\uadf8\uc778\ud558\uc9c0 \uc54a\uc544\ub3c4 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4."})]})]})]})]}),"system"===p&&(0,m.jsxs)("div",{className:"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50",children:[(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("database"===xs?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>hs("database"),children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4"}),o&&(0,m.jsx)("button",{className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat("system"===xs?"bg-[rgba(0,255,242,0.15)] text-[#00fff2] border border-[rgba(0,255,242,0.35)] shadow-[0_0_10px_rgba(0,255,242,0.2)]":"text-[#9999bb] border border-transparent hover:text-[#00fff2] hover:bg-[rgba(0,255,242,0.06)]"),onClick:()=>hs("system"),children:"\uc2dc\uc2a4\ud15c \uad00\ub9ac"})]}),"system"===p&&"database"===xs&&(0,m.jsxs)("div",{className:"database-management-tab",children:[!o&&u&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,m.jsx)("strong",{children:u})]})}),(0,m.jsx)("div",{className:"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto",children:(0,m.jsx)(X.default,{})}),(0,m.jsxs)("div",{className:"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30",children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-violet-300 mb-3",children:"\uac1c\uc778\uc815\ubcf4 \ubcf4\ud638 \ubb38\uc11c"}),(0,m.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"\ud559\ubd80\ubaa8 \ub3d9\uc758\uc11c \uc591\uc2dd\uacfc \uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68\uc744 \ud655\uc778\ud558\uc138\uc694."}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,m.jsx)("a",{href:"/consent-form",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium",children:"\ud83d\udcc4 \uac00\uc815\ud1b5\uc2e0\ubb38 (\ub3d9\uc758\uc11c \uc591\uc2dd)"}),(0,m.jsx)("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium",children:"\ud83d\udd12 \uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68"})]})]}),(0,m.jsx)($,{userClassCode:u,isAdmin:a,isSuperAdmin:o})]}),"system"===p&&"system"===xs&&(0,m.jsxs)("div",{className:"system-management-tab",children:[o&&(0,m.jsx)("div",{className:"class-info-header",children:(0,m.jsx)("p",{className:"current-class-info",children:"\ud83c\udf10 \uc2dc\uc2a4\ud15c \uc804\uccb4 \uad00\ub9ac (\ucd5c\uace0 \uad00\ub9ac\uc790)"})}),o&&(0,m.jsxs)("div",{className:"admin-class-codes-container section-card",children:[(0,m.jsx)("h3",{children:"\ud559\uae09 \ucf54\ub4dc \uad00\ub9ac"}),He&&(0,m.jsx)("p",{className:"error-message",children:He}),(0,m.jsxs)("div",{className:"add-class-code-form",children:[(0,m.jsx)("input",{type:"text",value:pe,onChange:e=>be(e.target.value),placeholder:"\uc0c8 \ud559\uae09 \ucf54\ub4dc \uc785\ub825",disabled:ge,style:ja}),(0,m.jsx)("button",{onClick:pa,disabled:ge||!pe.trim(),style:ya,children:ge?"\ucd94\uac00 \uc911...":"\ucf54\ub4dc \ucd94\uac00"})]}),(0,m.jsxs)("div",{className:"class-codes-list",children:[(0,m.jsxs)("h4",{children:["\ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc \ubaa9\ub85d (",Array.isArray(ue)?ue.length:0,"\uac1c)"]}),Array.isArray(ue)&&ue.length>0?(0,m.jsx)("ul",{className:"codes-list",children:ue.map(e=>(0,m.jsxs)("li",{className:"code-item",children:[(0,m.jsx)("span",{className:"code-text",children:e}),(0,m.jsx)("button",{onClick:()=>ba(e),className:"remove-code-button",disabled:ge,children:"\uc0ad\uc81c"})]},e))}):(0,m.jsx)("p",{className:"no-codes-message",children:"\ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]}),(0,m.jsx)(Q,{isSuperAdmin:o})]}),(0,m.jsx)("div",{className:"admin-settings-footer",children:(0,m.jsx)("button",{onClick:()=>h(!1),style:{background:"rgba(75,85,99,0.4)",color:"#e8e8ff",padding:"10px 24px",borderRadius:"8px",fontWeight:600,fontSize:"0.95rem",border:"1px solid rgba(0,255,242,0.3)",cursor:"pointer"},children:"\ub2eb\uae30"})})]}),Ne&&we&&(0,m.jsx)("div",{className:"modal-overlay show",children:(0,m.jsxs)("div",{className:"edit-student-jobs-modal",children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsxs)("h3",{children:["\ud559\uc0dd \uc9c1\uc5c5 \uc124\uc815:"," ",we.nickname||we.name]}),(0,m.jsx)("button",{className:"close-modal-btn",onClick:()=>Ae(!1),children:"\u2715"})]}),(0,m.jsxs)("div",{className:"modal-body",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:we.nickname||we.name}),"\ub2d8\uc758 \uc9c1\uc5c5\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."]}),(0,m.jsxs)("div",{className:"salary-info",children:[(0,m.jsxs)("p",{children:["\ud604\uc7ac \ubcf4\uc720 \ud604\uae08: ",(we.cash||0).toLocaleString(),"\uc6d0"]}),(()=>{const e=Xs(Se,!0);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{children:["\uc608\uc0c1 \ucd1d\uae09\uc5ec:"," ","".concat((e.gross/1e4).toFixed(0),"\ub9cc\uc6d0")]}),(0,m.jsxs)("p",{children:["\uc138\uae08 \uacf5\uc81c:"," ","".concat((e.tax/1e4).toFixed(0),"\ub9cc\uc6d0")," (",(100*Fs.taxRate).toFixed(1),"%)"]}),(0,m.jsxs)("p",{children:["\uc2e4\uae09\uc5ec: ","".concat((e.net/1e4).toFixed(0),"\ub9cc\uc6d0")]})]})})(),(0,m.jsxs)("p",{className:"salary-explanation",children:["(\uae30\ubcf8 200\ub9cc\uc6d0 + \ucd94\uac00 \uc9c1\uc5c5\ub2f9 50\ub9cc\uc6d0, \uc138\uae08"," ",(100*Fs.taxRate).toFixed(1),"% \uacf5\uc81c)"]})]}),(0,m.jsx)("div",{className:"job-selection-list",children:Array.isArray(k)&&k.filter(e=>!1!==e.active).length>0?k.filter(e=>!1!==e.active).map(e=>(0,m.jsxs)("div",{className:"job-selection-item",children:[(0,m.jsx)("input",{type:"checkbox",id:"job-modal-".concat(e.id),checked:Se.includes(e.id),onChange:()=>{return s=e.id,void Te(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}}),(0,m.jsx)("label",{htmlFor:"job-modal-".concat(e.id),children:e.title})]},e.id)):(0,m.jsx)("p",{className:"no-items-message",children:"\uc124\uc815 \uac00\ub2a5\ud55c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]}),(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)("button",{style:ka,onClick:()=>Ae(!1),children:"\ucde8\uc18c"}),(0,m.jsx)("button",{style:fa,onClick:async()=>{if(we&&r.db){Ee(!0);try{const e=(0,r.EW)(r.db,"users",we.id);await(0,r.tI)(e,{selectedJobIds:Se,updatedAt:(0,r.O5)()}),De(e=>e.map(e=>e.id===we.id?(0,t.A)((0,t.A)({},e),{},{selectedJobIds:Se}):e)),alert("\ud559\uc0dd \uc9c1\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Ae(!1)}catch(He){c.vF.error("\ud559\uc0dd \uc9c1\uc5c5 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",He),alert("\ud559\uc0dd \uc9c1\uc5c5 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+He.message)}finally{Ee(!1)}}else alert("\ud559\uc0dd \uc815\ubcf4 \ub610\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958")},disabled:Je,children:Je?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})})]})};var se=a(6555),ae=a(4891),te=a(3190),ne=a(9809),le=a(7365),re=a(516),ie=a(4805),de=a(9463),oe=a(1360);const ce={JOBS:216e5,TASKS:216e5,SETTINGS:432e5,GOALS:216e5,CLASS_CODES:864e5},me=e=>ae.Ay.get(e),ue=(e,s,a)=>ae.Ay.set(e,s,a||ce.TASKS),xe=e=>ae.Ay.invalidate(e),he=()=>ae.Ay.clearAll();const pe=new class{constructor(){this.pendingWrites=[],this.batchTimeout=null,this.BATCH_DELAY=2e3,this.MAX_BATCH_SIZE=500}addWrite(e){this.pendingWrites.push(e),this.pendingWrites.length>=this.MAX_BATCH_SIZE?this.executeBatch():this.scheduleBatch()}scheduleBatch(){this.batchTimeout&&clearTimeout(this.batchTimeout),this.batchTimeout=setTimeout(()=>{this.executeBatch()},this.BATCH_DELAY)}async executeBatch(){if(0===this.pendingWrites.length)return;this.batchTimeout&&(clearTimeout(this.batchTimeout),this.batchTimeout=null);const e=(0,i.wP)(r.db),s=[...this.pendingWrites];this.pendingWrites=[];try{s.forEach(s=>{let{type:a,ref:t,data:n}=s;switch(a){case"set":e.set(t,n);break;case"setMerge":e.set(t,n,{merge:!0});break;case"update":e.update(t,n);break;case"delete":e.delete(t)}}),await e.commit(),c.vF.log("\ubc30\uce58 \uc2e4\ud589 \uc644\ub8cc: ".concat(s.length,"\uac1c \uc791\uc5c5"))}catch(a){c.vF.error("\ubc30\uce58 \uc2e4\ud589 \uc2e4\ud328:",a)}}};class be{constructor(){this.listeners=new Map}addListener(e,s){this.listeners.has(e)&&this.listeners.get(e)(),this.listeners.set(e,s)}removeListener(e){this.listeners.has(e)&&(this.listeners.get(e)(),this.listeners.delete(e))}removeAllListeners(){this.listeners.forEach(e=>e()),this.listeners.clear()}}function ge(e){let{availableJobs:s,currentSelectedJobIds:a=[],onConfirmSelection:t,onCancel:l}=e;const[r,i]=(0,n.useState)(Array.isArray(a)?[...a]:[]),d=(0,n.useMemo)(()=>Array.isArray(s)?s.filter(e=>!1!==e.active):[],[s]),o=(0,n.useCallback)(e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},[]);return(0,m.jsxs)("div",{className:"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-3xl mx-auto my-8",children:[(0,m.jsx)("h4",{className:"text-xl font-semibold text-white text-center mb-2",children:"\uc9c1\uc5c5 \uc120\ud0dd (\ub2e4\uc911 \uc120\ud0dd \uac00\ub2a5)"}),(0,m.jsx)("p",{className:"text-sm text-slate-400 text-center mb-4",children:"'\ub098\uc758 \ud560\uc77c'\uc5d0 \ud45c\uc2dc\ud560 \uc9c1\uc5c5\uc744 \uc120\ud0dd\ud558\uc138\uc694."}),(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[d.map(e=>(0,m.jsxs)("label",{className:"p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ".concat(r.includes(e.id)?"border-cyan-500 bg-cyan-900/30":"border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50"),children:[(0,m.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>o(e.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer accent-cyan-400"}),(0,m.jsx)("span",{className:"font-medium ".concat(r.includes(e.id)?"text-cyan-300":"text-white"),children:e.title})]},e.id)),0===d.length&&(0,m.jsx)(se.pp,{icon:te.A,title:"\uc120\ud0dd \uac00\ub2a5\ud55c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",description:"\uad00\ub9ac\uc790\uac00 \uc9c1\uc5c5\uc744 \ub4f1\ub85d\ud558\uba74 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4."})]}),(0,m.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,m.jsx)(se.rA,{variant:"secondary",onClick:l,children:"\ucde8\uc18c"}),(0,m.jsx)(se.rA,{variant:"primary",onClick:()=>t(r),children:"\uc120\ud0dd \uc644\ub8cc"})]})]})}const fe=function(e){let{adminTabMode:s}=e;const{user:a,userDoc:o,setUserDoc:u,loading:x,updateUser:h,refreshUserDocument:p,isAdmin:b,isSuperAdmin:g,optimisticUpdate:f}=(0,l.As)(),v=(0,n.useRef)(new be),j=(0,n.useRef)(0),y=(0,n.useRef)(null),[k,N]=(0,n.useState)(!0),[A,w]=(0,n.useState)("list"),[C,S]=(0,n.useState)(!1),[T,F]=(0,n.useState)("generalSettings"),[D,I]=(0,n.useState)([]),[E,R]=(0,n.useState)([]),[_,O]=(0,n.useState)(null),[L,P]=(0,n.useState)(""),[W,z]=(0,n.useState)(null),[q,H]=(0,n.useState)(null),[B,G]=(0,n.useState)(!1),[K,V]=(0,n.useState)(!1),[U,Q]=(0,n.useState)(""),[X,Y]=(0,n.useState)(""),[Z,$]=(0,n.useState)("5"),[ae,fe]=(0,n.useState)(!1),ve=(0,n.useMemo)(()=>(0,d.Qg)(r.Cn,"completeTask"),[]),je=(0,n.useMemo)(()=>(0,d.Qg)(r.Cn,"manualResetClassTasks"),[]),[ye,ke]=(0,n.useState)(!1),[Ne,Ae]=(0,n.useState)(1e3),[we,Ce]=(0,n.useState)(1e3),[Se,Te]=(0,n.useState)(String(1e3)),[Fe,De]=(0,n.useState)(String(1e3)),[Ie,Me]=(0,n.useState)([]);(0,n.useEffect)(()=>{s&&null!==b&&void 0!==b&&b()&&(F(s),S(!0))},[s,b]);const Je=(0,n.useMemo)(()=>null!==o&&void 0!==o&&o.classCode&&null!==b&&void 0!==b&&b()?"".concat(o.classCode,"_goal"):null,[null===o||void 0===o?void 0:o.classCode,b]),Ee=(0,n.useMemo)(()=>o&&Array.isArray(o.selectedJobIds)?o.selectedJobIds:[],[o]),Re=(0,n.useMemo)(()=>{const e=(null===o||void 0===o?void 0:o.completedJobTasks)||{};return Array.isArray(D)?D.filter(e=>Ee.includes(e.id)&&!1!==e.active).map(s=>(0,t.A)((0,t.A)({},s),{},{tasks:(s.tasks||[]).map(a=>(0,t.A)((0,t.A)({},a),{},{clicks:e["".concat(s.id,"_").concat(a.id)]||0}))})):[]},[D,Ee,o]),_e=(0,n.useMemo)(()=>{if(!E||!o)return[];const e=o.completedTasks||{};return E.map(s=>(0,t.A)((0,t.A)({},s),{},{clicks:e[s.id]||0}))},[E,o]),Oe=(0,n.useCallback)(()=>{try{return(0,i.H9)((0,i.rJ)(r.db,"temp")).id}catch(e){return c.vF.error("Error generating ID:",e),Date.now().toString()+Math.random().toString(36).substring(2,11)}},[]),Le=(0,n.useCallback)(async e=>{if(!e)return;const s=async()=>{try{const s=(0,i.query)((0,i.rJ)(r.db,"jobs"),(0,i.where)("classCode","==",e),(0,i.limit)(50)),a=(await(0,i.getDocs)(s)).docs.map(e=>(0,t.A)((0,t.A)({id:e.id},e.data()),{},{tasks:(e.data().tasks||[]).map(e=>(0,t.A)((0,t.A)({},e),{},{reward:e.reward||0,clicks:0,maxClicks:e.maxClicks||5})),active:!1!==e.data().active})).sort((e,s)=>{var a,t,n,l;const r=(null===(a=e.updatedAt)||void 0===a||null===(t=a.toMillis)||void 0===t?void 0:t.call(a))||0;return((null===(n=s.updatedAt)||void 0===n||null===(l=n.toMillis)||void 0===l?void 0:l.call(n))||0)-r});I(a),ue("jobs_".concat(e),a,ce.JOBS);const n=(0,i.query)((0,i.rJ)(r.db,"commonTasks"),(0,i.where)("classCode","==",e),(0,i.limit)(50)),l=(await(0,i.getDocs)(n)).docs.map(e=>(0,t.A)((0,t.A)({id:e.id},e.data()),{},{reward:e.data().reward||0,clicks:e.data().clicks||0,maxClicks:e.data().maxClicks||5})).sort((e,s)=>{var a,t,n,l;const r=(null===(a=e.updatedAt)||void 0===a||null===(t=a.toMillis)||void 0===t?void 0:t.call(a))||0;return((null===(n=s.updatedAt)||void 0===n||null===(l=n.toMillis)||void 0===l?void 0:l.call(n))||0)-r});R(l),ue("commonTasks_".concat(e),l,ce.TASKS)}catch(s){c.vF.error("Polling \uc5d0\ub7ec:",s)}};await s();const a=setInterval(s,72e5);v.current.addListener("polling",()=>clearInterval(a))},[]),Pe=(0,n.useCallback)(async e=>{const s=me("jobs_".concat(e)),a=me("commonTasks_".concat(e)),t=me("mainSettings");return s&&I(s),a&&R(a),t&&(Ce(t.couponValue||1e3),Te(String(t.couponValue||1e3))),{hasJobsCache:!!s,hasTasksCache:!!a,hasSettingsCache:!!t}},[]),We=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null===o||void 0===o||!o.classCode)return void N(!1);const s=Date.now(),a=o.classCode;if(y.current&&!e)return y.current;if(!e&&s-j.current<72e5)return void N(!1);N(!0);return y.current=(async()=>{try{const t=await Pe(a);t.hasJobsCache&&t.hasTasksCache&&N(!1),v.current.listeners.has("jobs")||setTimeout(()=>Le(a),0);const n=[];if(t.hasSettingsCache&&!e||n.push((0,i.x7)((0,i.H9)(r.db,"settings","mainSettings")).then(e=>({type:"settings",data:e.exists()?e.data():null}))),!Je||me("goal_".concat(Je))&&!e||n.push((0,i.x7)((0,i.H9)(r.db,"goals",Je)).then(e=>({type:"goal",data:e.exists()?e.data():null}))),!g()||me("classCodes")&&!e||n.push((0,i.x7)((0,i.H9)(r.db,"settings","classCodes")).then(e=>({type:"classCodes",data:e.exists()?e.data():null}))),n.length>0){(await Promise.all(n)).forEach(e=>{switch(e.type){case"settings":if(e.data){const s=e.data.couponValue||1e3;Ce(s),Te(String(s)),ue("mainSettings",e.data,ce.SETTINGS)}break;case"goal":if(e.data&&e.data.classCode===a){const s=e.data.targetAmount||1e3;Ae(s),De(String(s)),ue("goal_".concat(Je),e.data,ce.GOALS)}break;case"classCodes":e.data&&(Me(e.data.validCodes||[]),ue("classCodes",e.data,ce.CLASS_CODES))}})}j.current=s}catch(t){c.vF.warn("[Dashboard] data fetch failed:",t)}finally{N(!1),y.current=null}})(),y.current},[null===o||void 0===o?void 0:o.classCode,Je,g,Le,Pe]),ze=(0,n.useRef)(!1),qe=(0,n.useCallback)(async()=>{if(ze.current)c.vF.log("[Dashboard] \uc774\ubbf8 \uc0c8\ub85c\uace0\uce68 \uc9c4\ud589 \uc911 - \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");else{ze.current=!0,c.vF.log("[Dashboard] \uc11c\ubc84 \ub9ac\uc14b \uac10\uc9c0 - \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68");try{p&&await p(),We&&await We(!0);const e=(new Date).toDateString();localStorage.setItem("lastTaskResetDate",e),c.vF.log("[Dashboard] \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc")}catch(e){c.vF.error("[Dashboard] \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68 \uc624\ub958:",e)}finally{ze.current=!1}}},[p,We]);(0,n.useEffect)(()=>{if(x)return void N(!0);if(!a)return N(!1),I([]),R([]),void v.current.removeAllListeners();null!==o&&void 0!==o&&o.id&&null!==o&&void 0!==o&&o.classCode?We():N(!1);const e=v.current;return()=>{e.removeAllListeners()}},[x,a,null===o||void 0===o?void 0:o.id,null===o||void 0===o?void 0:o.classCode,We]);const He=(0,n.useRef)(!1),Be=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(null===o||void 0===o||!o.classCode||!qe)return;const e=()=>{const e=(new Date).toDateString(),s=localStorage.getItem("lastTaskResetDate");Be.current!==e&&(Be.current=e,s!==e&&qe())};He.current||(He.current=!0,e());const s=setInterval(()=>{e()},36e5);return()=>{s&&clearInterval(s)}},[null===o||void 0===o?void 0:o.classCode,qe]);const Ge=(0,n.useCallback)(async()=>{if(!r.db||null===o||void 0===o||!o.classCode)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c.");const e=L.trim();if(e){N(!0);try{if(_){const s=(0,i.H9)(r.db,"jobs",_.id);pe.addWrite({type:"update",ref:s,data:{title:e,updatedAt:(0,i.O5)()}}),alert("\uc9c1\uc5c5\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),P(""),O(null),S(!1)}else{const s=Oe(),a=(0,i.H9)(r.db,"jobs",s);pe.addWrite({type:"set",ref:a,data:{title:e,active:!0,tasks:[],createdAt:(0,i.O5)(),updatedAt:(0,i.O5)(),classCode:o.classCode}}),alert("\uc9c1\uc5c5\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),P("")}xe("jobs_".concat(o.classCode))}catch(s){c.vF.error("handleSaveJob \uc624\ub958:",s),alert("\uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd")}finally{N(!1)}}else alert("\uc9c1\uc5c5 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[L,_,Oe,o]),Ke=(0,n.useCallback)(async e=>{if(r.db){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc9c1\uc5c5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uad00\ub828\ub41c \ud560\uc77c\ub3c4 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")){N(!0);try{var s;const t=(0,i.H9)(r.db,"jobs",e);if(pe.addWrite({type:"delete",ref:t,data:null}),a&&null!==o&&void 0!==o&&null!==(s=o.selectedJobIds)&&void 0!==s&&s.includes(e)){const s=o.selectedJobIds.filter(s=>s!==e);await h({selectedJobIds:s})}(null===_||void 0===_?void 0:_.id)===e&&(P(""),O(null)),S(!1),alert("\uc9c1\uc5c5\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),xe("jobs_".concat(o.classCode))}catch(t){c.vF.error("handleDeleteJob \uc624\ub958:",t),alert("\uc9c1\uc5c5 \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd")}finally{N(!1)}}}else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[a,o,_,h]),Ve=(0,n.useCallback)(e=>{e?(O(e),P(e.title),F("jobSettings"),S(!0)):alert("\ud574\ub2f9 \uc9c1\uc5c5\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[]),Ue=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;G(arguments.length>1&&void 0!==arguments[1]&&arguments[1]),H(e),Q(""),Y(""),$("5"),z(null),F("taskManagement"),V(!0),S(!0)},[]),Qe=(0,n.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(z(e),Q(e.name),Y(String(e.reward||0)),$(String(e.maxClicks||5)),fe(!!e.requiresApproval),G(!!s),H(s),F("taskManagement"),V(!0),S(!0)):alert("\uc218\uc815\ud560 \ud560\uc77c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[]),Xe=(0,n.useCallback)(async()=>{if(!r.db||null===o||void 0===o||!o.classCode)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c.");const e=U.trim(),s=parseInt(X,10),a=parseInt(Z,10);if(!e||isNaN(s)||s<0||isNaN(a)||a<=0)return void alert("\uc785\ub825\uac12\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694. (\uc774\ub984, \ubcf4\uc0c1: 0 \uc774\uc0c1 \uc22b\uc790, \ucd5c\ub300 \ud074\ub9ad: 1 \uc774\uc0c1 \uc22b\uc790)");N(!0);const n={name:e,reward:s,maxClicks:a,clicks:(null===W||void 0===W?void 0:W.clicks)||0,requiresApproval:ae};try{if(W){const e=W.id;if(B&&q){const s=(0,i.H9)(r.db,"jobs",q),a=await(0,i.x7)(s);if(!a.exists()||a.data().classCode!==o.classCode)throw new Error("\uc9c1\uc5c5 \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uac70\ub098 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=a.data().tasks||[],d=l.findIndex(s=>s.id===e);if(-1===d)throw new Error("\uc9c1\uc5c5 \ub0b4 \ud560\uc77c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=[...l];c[d]=(0,t.A)((0,t.A)({},c[d]),n),pe.addWrite({type:"update",ref:s,data:{tasks:c,updatedAt:(0,i.O5)()}})}else{const s=(0,i.H9)(r.db,"commonTasks",e);pe.addWrite({type:"update",ref:s,data:(0,t.A)((0,t.A)({},n),{},{updatedAt:(0,i.O5)()})})}V(!1),z(null),S(!1),alert("\ud560\uc77c\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else{const e=Oe(),s=(0,t.A)((0,t.A)({},n),{},{id:e,clicks:0});if(B&&q){const e=(0,i.H9)(r.db,"jobs",q);pe.addWrite({type:"update",ref:e,data:{tasks:(0,i.hq)(s),updatedAt:(0,i.O5)()}})}else{const a=(0,i.H9)(r.db,"commonTasks",e);pe.addWrite({type:"set",ref:a,data:(0,t.A)((0,t.A)({},s),{},{createdAt:(0,i.O5)(),updatedAt:(0,i.O5)(),classCode:o.classCode})})}Q(""),Y(""),$("5"),fe(!1),alert("\ud560\uc77c\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}xe(B?"jobs_".concat(o.classCode):"commonTasks_".concat(o.classCode))}catch(l){c.vF.error("handleSaveTask \uc624\ub958:",l),alert("\ud560\uc77c \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd: "+l.message)}finally{N(!1)}},[U,X,Z,ae,W,B,q,Oe,o]),Ye=(0,n.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r.db){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \ud560\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){N(!0);try{if(s){const a=(0,i.H9)(r.db,"jobs",s),t=await(0,i.x7)(a);if(!t.exists())throw new Error("\uc9c1\uc5c5 \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const n=(t.data().tasks||[]).filter(s=>s.id!==e);pe.addWrite({type:"update",ref:a,data:{tasks:n,updatedAt:(0,i.O5)()}})}else{const s=(0,i.H9)(r.db,"commonTasks",e);pe.addWrite({type:"delete",ref:s,data:null})}(null===W||void 0===W?void 0:W.id)===e&&(V(!1),z(null)),S(!1),alert("\ud560\uc77c\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),xe(s?"jobs_".concat(o.classCode):"commonTasks_".concat(o.classCode))}catch(a){c.vF.error("handleDeleteTask \uc624\ub958:",a),alert("\ud560\uc77c \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd: "+a.message)}finally{N(!1)}}}else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[W,o]),Ze=(0,n.useCallback)(()=>{w("selectJob")},[]),$e=(0,n.useCallback)(async e=>{if(null===a||void 0===a||!a.uid)return void alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc624\ub958.");const s=Array.isArray(e)?e:[];N(!0);try{await h({selectedJobIds:s})?(u(e=>(0,t.A)((0,t.A)({},e),{},{selectedJobIds:s})),w("list"),alert("\uc120\ud0dd\ud55c \uc9c1\uc5c5\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\uc120\ud0dd\ud55c \uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd.")}catch(n){c.vF.error("handleConfirmJobSelection \uc624\ub958:",n),alert("\uc120\ud0dd \uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958 \ubc1c\uc0dd.")}finally{N(!1)}},[a,h]),es=(0,n.useCallback)(()=>{w("list")},[]),ss=(0,n.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(ye)return;if(null===o||void 0===o||!o.id)return void alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");if(a&&s){var r,i;const a="".concat(s,"_").concat(e),t=(o.completedJobTasks||{})[a]||0,n=null===(r=D.find(e=>e.id===s))||void 0===r||null===(i=r.tasks)||void 0===i?void 0:i.find(s=>s.id===e);if(n&&n.maxClicks>0&&t>=n.maxClicks)return void c.vF.warn("[Dashboard] \uc774\ubbf8 \uc644\ub8cc\ub41c \uc9c1\uc5c5 \ud560\uc77c:",{taskKey:a,currentClicks:t,maxClicks:n.maxClicks})}else if(!a){const s=(o.completedTasks||{})[e]||0,a=null===E||void 0===E?void 0:E.find(s=>s.id===e);if(a&&a.maxClicks>0&&s>=a.maxClicks)return void c.vF.warn("[Dashboard] \uc774\ubbf8 \uc644\ub8cc\ub41c \uacf5\ud1b5 \ud560\uc77c:",{taskId:e,currentClicks:s,maxClicks:a.maxClicks})}ke(!0),c.vF.log("[Dashboard] \ud560\uc77c \uc644\ub8cc \ucc98\ub9ac \uc2dc\uc791:",{taskId:e,jobId:s,isJobTask:a,cardType:n,rewardAmount:l});let d=0,m=0;n&&l&&("cash"===n?d=l:"coupon"===n&&(m=l));const x=(0,t.A)({},o),h=o.cash+d,p=o.coupons+m;u(a&&s?a=>(0,t.A)((0,t.A)({},a),{},{cash:h,coupons:p,completedJobTasks:(0,t.A)((0,t.A)({},a.completedJobTasks||{}),{},{["".concat(s,"_").concat(e)]:((a.completedJobTasks||{})["".concat(s,"_").concat(e)]||0)+1})}):s=>{var a;return(0,t.A)((0,t.A)({},s),{},{cash:h,coupons:p,completedTasks:(0,t.A)((0,t.A)({},s.completedTasks||{}),{},{[e]:((null===(a=s.completedTasks)||void 0===a?void 0:a[e])||0)+1})})});try{const r=(await ve({taskId:e,jobId:s,isJobTask:a,cardType:n,rewardAmount:l})).data;if(c.vF.log("\u2705 [\ub514\ubc84\uadf8] \uc11c\ubc84\ub85c\ubd80\ud130 \ubc1b\uc740 \uacb0\uacfc:",r),!r.success)throw new Error(r.message||"\uc54c \uc218 \uc5c6\ub294 \uc11c\ubc84 \uc624\ub958");{const e="number"===typeof r.updatedCash?r.updatedCash:h,s="number"===typeof r.updatedCoupons?r.updatedCoupons:p;c.vF.log("\u2705 [\ub514\ubc84\uadf8] \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8: \ud604\uae08 ".concat(h,"\uc6d0, \ucfe0\ud3f0 ").concat(p,"\uac1c \u2192 \uc11c\ubc84 \ud655\uc815: \ud604\uae08 ").concat(e,"\uc6d0, \ucfe0\ud3f0 ").concat(s,"\uac1c")),u(a=>(0,t.A)((0,t.A)({},a),{},{cash:e,coupons:s})),alert(r.message)}}catch(b){c.vF.error("[Dashboard] \ud560\uc77c \uc644\ub8cc \ucc98\ub9ac \uc911 \uc2ec\uac01\ud55c \uc624\ub958:",b),alert("\ud560\uc77c \uc644\ub8cc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(b.message)),u(x)}finally{ke(!1)}},[ye,o,E,D,u,ve]),as=(0,n.useMemo)(()=>(0,d.Qg)(r.Cn,"submitTaskApproval"),[]),ts=(0,n.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(ye)return;if(null===o||void 0===o||!o.id)return void alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");ke(!0),c.vF.log("[Dashboard] \ud560\uc77c \uc2b9\uc778 \uc694\uccad:",{taskId:e,jobId:s,isJobTask:a,cardType:n,rewardAmount:l});const r=(0,t.A)({},o);u(a&&s?a=>(0,t.A)((0,t.A)({},a),{},{completedJobTasks:(0,t.A)((0,t.A)({},a.completedJobTasks||{}),{},{["".concat(s,"_").concat(e)]:((a.completedJobTasks||{})["".concat(s,"_").concat(e)]||0)+1})}):s=>{var a;return(0,t.A)((0,t.A)({},s),{},{completedTasks:(0,t.A)((0,t.A)({},s.completedTasks||{}),{},{[e]:((null===(a=s.completedTasks)||void 0===a?void 0:a[e])||0)+1})})});try{const t=await as({taskId:e,jobId:s,isJobTask:a,cardType:n,rewardAmount:l});if(!t.data.success)throw new Error(t.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958");alert(t.data.message)}catch(i){c.vF.error("[Dashboard] \ud560\uc77c \uc2b9\uc778 \uc694\uccad \uc2e4\ud328:",i),alert("\uc2b9\uc778 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(i.message)),u(r)}finally{ke(!1)}},[ye,o,u,as]),ns=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"generalSettings";De(String(Ne)),Te(String(we)),F(e),S(!0)},[Ne,we]),ls=(0,n.useCallback)(async()=>{if(c.vF.log("--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---"),!r.db)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.");const e=parseInt(Fe,10),s=parseInt(Se,10);if(isNaN(e)||e<=0||isNaN(s)||s<=0)alert("\uc62c\ubc14\ub978 \ubaa9\ud45c \uae08\uc561\uacfc \ucfe0\ud3f0 \uac00\uce58\ub97c \uc785\ub825\ud558\uc138\uc694 (0\ubcf4\ub2e4 \ud070 \uc22b\uc790).");else{N(!0);try{const t=(0,i.H9)(r.db,"settings","mainSettings"),n=await(0,i.x7)(t);if(n.exists()&&n.data().couponValue===s||pe.addWrite({type:"setMerge",ref:t,data:{couponValue:s,updatedAt:(0,i.O5)()}}),Je&&null!==b&&void 0!==b&&b())try{const s=(0,i.H9)(r.db,"goals",Je);await(0,i.BN)(s,{targetAmount:e,classCode:o.classCode,updatedAt:(0,i.O5)()},{merge:!0})}catch(a){c.vF.warn("\ubaa9\ud45c \uc124\uc815 \uad8c\ud55c\uc774 \uc5c6\uc5b4 \ubaa9\ud45c \uae08\uc561 \uc124\uc815\uc744 \uac74\ub108\ub700:",a.code)}Ce(s),Je&&null!==b&&void 0!==b&&b()&&Ae(e),S(!1),alert("\uad00\ub9ac\uc790 \uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),xe("mainSettings"),Je&&xe("goal_".concat(Je))}catch(t){c.vF.error("\uad00\ub9ac\uc790 \uc124\uc815 \uc800\uc7a5 \uc624\ub958:",t),alert("\uad00\ub9ac\uc790 \uc124\uc815 \uc800\uc7a5 \uc911 \uc624\ub958: "+t.message)}finally{N(!1)}}},[Fe,Se,Je,o,b]),rs=(0,n.useCallback)(async()=>{if(!r.db||null===b||void 0===b||!b())return;const e=me("classCodes");if(e)Me(e.validCodes||[]);else try{const e=(0,i.H9)(r.db,"settings","classCodes"),s=await(0,i.x7)(e);if(s.exists()){const e=Array.isArray(s.data().validCodes)?s.data().validCodes:[];Me(e),ue("classCodes",s.data(),ce.CLASS_CODES)}else pe.addWrite({type:"set",ref:e,data:{validCodes:[],createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}}),Me([])}catch(s){c.vF.error("\ud559\uae09 \ucf54\ub4dc \ub85c\ub4dc \uc624\ub958:",s),Me([])}},[b]);(0,n.useEffect)(()=>{null!==b&&void 0!==b&&b()&&rs()},[b,rs]);const is=(0,n.useCallback)(async e=>{if(!r.db)return!1;const s=e.trim();if(!s)return alert("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),!1;if(Ie.includes(s))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc\uc785\ub2c8\ub2e4."),!1;N(!0);try{const e=(0,i.H9)(r.db,"settings","classCodes"),t=await(0,i.x7)(e),n=t.exists()&&t.data().validCodes||[];pe.addWrite({type:"update",ref:e,data:{validCodes:[...n,s],updatedAt:(0,i.O5)()}});try{const e=await(0,r.Sj)(s);e.success?alert("\ud559\uae09 \ucf54\ub4dc '".concat(s,"'\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4!\n\n\uae30\ubcf8 \ub370\uc774\ud130 \ubcf5\uc0ac \uc644\ub8cc:\n- \uc9c1\uc5c5 ").concat(e.results.jobs.copied,"\uac1c\n- \uc0c1\uc810 \uc544\uc774\ud15c ").concat(e.results.storeItems.copied,"\uac1c")):alert("\ud559\uae09 \ucf54\ub4dc '".concat(s,"'\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\n\u26a0\ufe0f \uae30\ubcf8 \ub370\uc774\ud130 \ubcf5\uc0ac \uc911 \uc624\ub958: ").concat(e.error,"\n(\ub098\uc911\uc5d0 \uc9c1\uc811 \ucd94\uac00\ud574\uc8fc\uc138\uc694)"))}catch(a){c.vF.error("\uae30\ubcf8 \ub370\uc774\ud130 \ubcf5\uc0ac \uc624\ub958:",a),alert("\ud559\uae09 \ucf54\ub4dc '".concat(s,"'\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\n\u26a0\ufe0f \uae30\ubcf8 \ub370\uc774\ud130 \ubcf5\uc0ac \uc2e4\ud328\n(\ub098\uc911\uc5d0 \uc9c1\uc811 \ucd94\uac00\ud574\uc8fc\uc138\uc694)"))}return Me(e=>[...e,s]),xe("classCodes"),!0}catch(t){return c.vF.error("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc624\ub958:",t),alert("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc911 \uc624\ub958 \ubc1c\uc0dd"),!1}finally{N(!1)}},[Ie]),ds=(0,n.useCallback)(async e=>{if(!r.db)return!1;if(!window.confirm("'".concat(e,"' \ucf54\ub4dc\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return!1;N(!0);try{const s=(0,i.H9)(r.db,"settings","classCodes"),a=await(0,i.x7)(s);if(!a.exists())throw new Error("\ud559\uae09 \ucf54\ub4dc \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=(a.data().validCodes||[]).filter(s=>s!==e);return pe.addWrite({type:"update",ref:s,data:{validCodes:t,updatedAt:(0,i.O5)()}}),alert("\ud559\uae09 \ucf54\ub4dc\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Me(s=>s.filter(s=>s!==e)),xe("classCodes"),!0}catch(s){return c.vF.error("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc624\ub958:",s),alert("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd: "+s.message),!1}finally{N(!1)}},[]),os=(0,n.useCallback)(()=>{he(),v.current.removeAllListeners(),null!==o&&void 0!==o&&o.classCode&&Le(o.classCode),We(!0)},[We,null===o||void 0===o?void 0:o.classCode,Le]),cs=(0,n.useCallback)(async()=>{if(c.vF.log("[Dashboard] \uc218\ub3d9 \ud560\uc77c \ub9ac\uc14b \uc2dc\uc791"),null===o||void 0===o||!o.classCode)return c.vF.error("[Dashboard] \ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc5b4 \ub9ac\uc14b\uc744 \uc911\ub2e8\ud569\ub2c8\ub2e4."),void alert("\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(window.confirm("'".concat(o.classCode,"' \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \ud559\uc0dd\ub4e4\uc758 '\uc624\ub298\uc758 \ud560\uc77c' \uc644\ub8cc \uae30\ub85d\uc744 \ucd08\uae30\ud654\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){c.vF.log("[Dashboard] ".concat(o.classCode," \ud074\ub798\uc2a4 \ub9ac\uc14b \uc2e4\ud589...")),N(!0);try{const e=je,s=await e({classCode:o.classCode});if(c.vF.log("[Dashboard] \ud074\ub77c\uc6b0\ub4dc \ud568\uc218 \uacb0\uacfc \uc218\uc2e0:",s.data),!s.data.success)throw new Error(s.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958");{u(e=>(0,t.A)((0,t.A)({},e),{},{completedTasks:{},completedJobTasks:{}}));const e=(new Date).toDateString();localStorage.setItem("lastTaskResetDate",e),alert("\ub9ac\uc14b \uc131\uacf5!\n".concat(s.data.message)),c.vF.log("[Dashboard] \ub9ac\uc14b \uc131\uacf5: ".concat(s.data.message))}}catch(e){c.vF.error("[Dashboard] \ud560\uc77c \ub9ac\uc14b \uc2e4\ud328:",e),alert("\uc624\ub958: \ud560\uc77c \ub9ac\uc14b\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.\n\n".concat(e.message))}finally{N(!1),c.vF.log("[Dashboard] \uc218\ub3d9 \ud560\uc77c \ub9ac\uc14b \uc885\ub8cc")}}else c.vF.log("[Dashboard] \uc0ac\uc6a9\uc790\uac00 \ub9ac\uc14b\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.")},[null===o||void 0===o?void 0:o.classCode,u]);if(x||k)return(0,m.jsx)(se.LN,{className:"flex items-center justify-center",children:(0,m.jsx)(se.Gu,{message:"\uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})});if(!a)return(0,m.jsx)(se.LN,{className:"flex items-center justify-center",children:(0,m.jsx)(se.pp,{icon:ne.A,title:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4",description:"\ud560\uc77c\uc744 \ud655\uc778\ud558\ub824\uba74 \uba3c\uc800 \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})});if(null===o||void 0===o||!o.id)return(0,m.jsx)(se.LN,{className:"flex items-center justify-center",children:(0,m.jsx)(se.pp,{icon:ne.A,title:"\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc2e4\ud328",description:"\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uc644\uc804\ud788 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})});if(!o.classCode)return(0,m.jsx)(se.LN,{className:"flex items-center justify-center",children:(0,m.jsx)(se.pp,{icon:ne.A,title:"\ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c",description:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \ucf54\ub4dc\ub97c \ud560\ub2f9\ubc1b\uc73c\uc138\uc694."})});const ms=(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o?void 0:o.nickname)||(null===a||void 0===a?void 0:a.displayName)||"\uc0ac\uc6a9\uc790";return(0,m.jsxs)("div",{className:"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0",children:[!s&&(0,m.jsxs)("section",{className:"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("div",{className:"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30",children:(0,m.jsx)(ne.A,{className:"w-4 h-4"})}),(0,m.jsxs)("div",{className:"leading-tight",children:[(0,m.jsx)("h2",{className:"text-sm md:text-base font-bold text-white",children:"\uc624\ub298\uc758 \ud560\uc77c"}),(0,m.jsxs)("p",{className:"text-[11px] text-slate-400",children:[ms,"\ub2d8, \uc624\ub298\ub3c4 \ud654\uc774\ud305!"]})]})]}),(null===b||void 0===b?void 0:b())&&"list"===A&&!C&&(0,m.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,m.jsx)(se.rA,{variant:"primary",icon:le.A,onClick:()=>ns("generalSettings"),size:"sm",className:"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm",children:"\u2699\ufe0f \uad00\ub9ac\uc790 \uae30\ub2a5"}),(0,m.jsx)(se.rA,{variant:"success",icon:re.A,onClick:os,size:"sm",children:"\uc0c8\ub85c\uace0\uce68"}),(0,m.jsx)(se.rA,{variant:"danger",icon:ie.A,onClick:cs,size:"sm",title:"\uc774 \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ud560\uc77c\uc744 \ub9ac\uc14b\ud569\ub2c8\ub2e4",children:"\ud560\uc77c \ub9ac\uc14b"})]}),"selectJob"===A&&(0,m.jsx)(se.rA,{variant:"ghost",icon:de.A,onClick:es,children:"\ub4a4\ub85c\uac00\uae30"})]}),"list"===A&&!C&&!s&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6",children:[(0,m.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(te.A,{className:"w-5 h-5 text-white"}),(0,m.jsx)("h3",{className:"text-base md:text-lg font-bold text-white",children:"\ub098\uc758 \uc9c1\uc5c5 \ud560\uc77c"})]}),(0,m.jsx)(se.rA,{variant:"outline",icon:oe.A,onClick:Ze,size:"sm",className:"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30",children:"\uc9c1\uc5c5 \ucd94\uac00/\uc120\ud0dd"})]}),(0,m.jsxs)("div",{className:"p-4 md:p-6",children:[(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Re.length>0?Re.map(e=>(0,m.jsx)(M,{job:e,isAdmin:null===b||void 0===b?void 0:b(),onEditJob:()=>Ve(e),onDeleteJob:()=>Ke(e.id),onAddTask:()=>Ue(e.id,!0),onEarnCoupon:(e,s,a,t,n)=>ss(e,s,a,t,n),onRequestApproval:(e,s,a,t,n)=>ts(e,s,a,t,n),onEditTask:s=>Qe(s,e.id),onDeleteTask:s=>Ye(s,e.id),isHandlingTask:ye},e.id)):(0,m.jsx)("div",{className:"col-span-full",children:(0,m.jsx)(se.pp,{icon:te.A,title:"\ud45c\uc2dc\ud560 \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",description:"'\uc9c1\uc5c5 \ucd94\uac00/\uc120\ud0dd' \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc9c1\uc5c5\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",action:(0,m.jsx)(se.rA,{variant:"primary",icon:oe.A,onClick:Ze,children:"\uc9c1\uc5c5 \uc120\ud0dd\ud558\uae30"})})})}),(0,m.jsxs)("div",{className:"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm",children:[(0,m.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(ne.A,{className:"w-5 h-5 text-white"}),(0,m.jsx)("h3",{className:"text-base md:text-lg font-bold text-white",children:"\uacf5\ud1b5 \ud560\uc77c"})]}),(null===b||void 0===b?void 0:b())&&(0,m.jsx)(se.rA,{variant:"outline",icon:oe.A,onClick:()=>Ue(null,!1),size:"sm",className:"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30",children:"\uacf5\ud1b5 \ud560\uc77c \ucd94\uac00"})]}),(0,m.jsx)("div",{className:"p-4 md:p-6 bg-[#0a0a12]/50",children:(0,m.jsx)(J,{tasks:_e,isAdmin:null===b||void 0===b?void 0:b(),onEarnCoupon:(e,s,a,t,n)=>ss(e,s,a,t,n),onRequestApproval:(e,s,a,t,n)=>ts(e,s,a,t,n),onEditTask:e=>Qe(E.find(s=>s.id===e),null),onDeleteTask:e=>Ye(e,null),isHandlingTask:ye})})]})]})]})}),"selectJob"===A&&(0,m.jsx)(ge,{availableJobs:D,currentSelectedJobIds:Ee,onConfirmSelection:$e,onCancel:es}),(null===b||void 0===b?void 0:b())&&(0,m.jsx)(ee,{isAdmin:null===b||void 0===b?void 0:b(),isSuperAdmin:null===g||void 0===g?void 0:g(),userClassCode:null===o||void 0===o?void 0:o.classCode,showAdminSettingsModal:C,setShowAdminSettingsModal:S,adminSelectedMenu:T,setAdminSelectedMenu:F,classCodes:Ie,onAddClassCode:is,onRemoveClassCode:ds,newGoalAmount:Fe,setNewGoalAmount:De,adminCouponValue:Se,setAdminCouponValue:Te,handleSaveAdminSettings:ls,jobs:D,adminNewJobTitle:L,setAdminNewJobTitle:P,adminEditingJob:_,setAdminEditingJob:O,handleSaveJob:Ge,handleDeleteJob:Ke,handleEditJob:Ve,commonTasks:E,showAddTaskForm:K,setShowAddTaskForm:V,adminNewTaskName:U,setAdminNewTaskName:Q,adminNewTaskReward:X,setAdminNewTaskReward:Y,adminNewTaskMaxClicks:Z,setAdminNewTaskMaxClicks:$,adminNewTaskRequiresApproval:ae,setAdminNewTaskRequiresApproval:fe,adminEditingTask:W,setAdminEditingTask:z,handleSaveTask:Xe,handleEditTask:Qe,handleDeleteTask:Ye,taskFormJobId:q,taskFormIsJobTask:B,handleAddTaskClick:Ue})]})}}}]);
//# sourceMappingURL=3433.ed80980e.chunk.js.map