{"version":3,"file":"static/js/317.54c739ea.chunk.js","mappings":"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","sources":["pages/government/NationalTaxService.js","pages/government/Government.js"],"sourcesContent":["// src/NationalTaxService.js\r\n// ========================================\r\n// êµ­ì„¸ì²­ - ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ = êµ­ê³ \r\n// ========================================\r\n// êµ­ê³ ëŠ” ë³„ë„ì˜ ë¬¸ì„œê°€ ì•„ë‹Œ í•™ê¸‰ ê´€ë¦¬ì(ì„ ìƒë‹˜)ì˜ í˜„ê¸ˆìœ¼ë¡œ í†µí•©ë¨\r\n// ëª¨ë“  ì„¸ê¸ˆì€ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ì§ì ‘ ì…ê¸ˆë¨\r\n// ========================================\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, getCachedDocument, invalidateCache } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  updateDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { formatKoreanCurrency } from \"../../utils/numberFormatter\";\r\nimport { logger } from '../../utils/logger';\r\n\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return \"-\";\r\n  const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\r\n  if (isNaN(date.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ\";\r\n  return date.toLocaleString(\"ko-KR\");\r\n};\r\n\r\n// ì„¸ìˆ˜ í†µê³„ìš© (êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆì—ì„œ ê°€ì ¸ì˜´)\r\nconst DEFAULT_TREASURY_DATA = {\r\n  totalAmount: 0, // ì´ ê°’ì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ - ê´€ë¦¬ì í˜„ê¸ˆìœ¼ë¡œ ëŒ€ì²´\r\n  stockTaxRevenue: 0,\r\n  stockCommissionRevenue: 0,\r\n  realEstateTransactionTaxRevenue: 0,\r\n  vatRevenue: 0,\r\n  auctionTaxRevenue: 0,\r\n  propertyHoldingTaxRevenue: 0,\r\n  itemMarketTaxRevenue: 0,\r\n  incomeTaxRevenue: 0,\r\n  corporateTaxRevenue: 0,\r\n  otherTaxRevenue: 0,\r\n  lastUpdated: null,\r\n};\r\n\r\nconst DEFAULT_TAX_SETTINGS = {\r\n  stockTransactionTaxRate: 0.01,\r\n  realEstateTransactionTaxRate: 0.03,\r\n  itemStoreVATRate: 0.1,\r\n  auctionTransactionTaxRate: 0.03,\r\n  propertyHoldingTaxRate: 0.002,\r\n  propertyHoldingTaxInterval: \"weekly\",\r\n  itemMarketTransactionTaxRate: 0.03,\r\n  lastUpdated: null,\r\n};\r\n\r\nconst NationalTaxService = ({ classCode }) => {\r\n  const [treasuryData, setTreasuryData] = useState(DEFAULT_TREASURY_DATA);\r\n  const [taxSettings, setTaxSettings] = useState(DEFAULT_TAX_SETTINGS);\r\n  const [adminCash, setAdminCash] = useState(0); // ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ = êµ­ê³ \r\n  const [loadingTreasury, setLoadingTreasury] = useState(true);\r\n  const [loadingSettings, setLoadingSettings] = useState(true);\r\n  const [activeTab, setActiveTab] = useState(\"overview\");\r\n  const [editableSettings, setEditableSettings] = useState(DEFAULT_TAX_SETTINGS);\r\n\r\n  // ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ ê°€ì ¸ì˜¤ê¸° - ì´ê²ƒì´ ê³§ êµ­ê³ \r\n  const fetchAdminCash = useCallback(async () => {\r\n    if (!classCode) {\r\n      setAdminCash(0);\r\n      return;\r\n    }\r\n    try {\r\n      const usersRef = collection(db, \"users\");\r\n      const q = query(\r\n        usersRef,\r\n        where(\"classCode\", \"==\", classCode),\r\n        where(\"isAdmin\", \"==\", true)\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      if (!snapshot.empty) {\r\n        const adminData = snapshot.docs[0].data();\r\n        setAdminCash(adminData.cash || 0);\r\n      } else {\r\n        setAdminCash(0);\r\n      }\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ê´€ë¦¬ì í˜„ê¸ˆ(êµ­ê³ ) ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setAdminCash(0);\r\n    }\r\n  }, [classCode]);\r\n\r\n  // ì„¸ìˆ˜ í†µê³„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì°¸ê³ ìš© - êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆ ì‚¬ìš©)\r\n  const fetchTreasuryData = useCallback(async () => {\r\n    if (!classCode) {\r\n      setLoadingTreasury(false);\r\n      setTreasuryData(DEFAULT_TREASURY_DATA);\r\n      return;\r\n    }\r\n    setLoadingTreasury(true);\r\n\r\n    // ê´€ë¦¬ì í˜„ê¸ˆ ë¨¼ì € ê°€ì ¸ì˜¤ê¸°\r\n    await fetchAdminCash();\r\n\r\n    const treasuryRef = doc(db, \"nationalTreasuries\", classCode);\r\n    try {\r\n      const cached = await getCachedDocument(\"nationalTreasuries\", classCode, 5 * 60 * 1000);\r\n      if (cached) {\r\n        setTreasuryData({ ...DEFAULT_TREASURY_DATA, ...cached });\r\n        setLoadingTreasury(false);\r\n        return;\r\n      }\r\n\r\n      const docSnap = await getDoc(treasuryRef);\r\n      if (docSnap.exists()) {\r\n        setTreasuryData({ ...DEFAULT_TREASURY_DATA, ...docSnap.data() });\r\n        invalidateCache(`doc_nationalTreasuries_${classCode}`);\r\n      } else {\r\n        // ì„¸ìˆ˜ í†µê³„ ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒì„± (êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆì´ë¯€ë¡œ totalAmountëŠ” 0ìœ¼ë¡œ)\r\n        await setDoc(treasuryRef, {\r\n          ...DEFAULT_TREASURY_DATA,\r\n          createdAt: serverTimestamp(),\r\n          lastUpdated: serverTimestamp(),\r\n        });\r\n        invalidateCache(`doc_nationalTreasuries_${classCode}`);\r\n        setTreasuryData({\r\n          ...DEFAULT_TREASURY_DATA,\r\n          lastUpdated: new Date(),\r\n        });\r\n      }\r\n      setLoadingTreasury(false);\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ì„¸ìˆ˜ í†µê³„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setLoadingTreasury(false);\r\n    }\r\n  }, [classCode, fetchAdminCash]);\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 15ë¶„ (êµ­ê³  ë°ì´í„°ëŠ” ìì£¼ ì•ˆ ë°”ë€œ)\r\n  const { refetch: refetchTreasury } = usePolling(fetchTreasuryData, { interval: 15 * 60 * 1000, enabled: !!classCode });\r\n\r\n  const fetchTaxSettings = useCallback(async () => {\r\n    if (!classCode) {\r\n      setLoadingSettings(false);\r\n      setTaxSettings(DEFAULT_TAX_SETTINGS);\r\n      setEditableSettings(DEFAULT_TAX_SETTINGS);\r\n      return;\r\n    }\r\n    setLoadingSettings(true);\r\n    const settingsRef = doc(db, \"governmentSettings\", classCode);\r\n    try {\r\n      const cached = await getCachedDocument(\"governmentSettings\", classCode, 5 * 60 * 1000);\r\n      if (cached?.taxSettings) {\r\n        const newSettings = { ...DEFAULT_TAX_SETTINGS, ...cached.taxSettings };\r\n        setTaxSettings(newSettings);\r\n        setEditableSettings(newSettings);\r\n        setLoadingSettings(false);\r\n        return;\r\n      }\r\n\r\n      const docSnap = await getDoc(settingsRef);\r\n      if (docSnap.exists() && docSnap.data().taxSettings) {\r\n        const newSettings = { ...DEFAULT_TAX_SETTINGS, ...docSnap.data().taxSettings };\r\n        setTaxSettings(newSettings);\r\n        setEditableSettings(newSettings);\r\n        invalidateCache(`doc_governmentSettings_${classCode}`);\r\n      } else {\r\n        await setDoc(settingsRef, {\r\n          taxSettings: {\r\n            ...DEFAULT_TAX_SETTINGS,\r\n            lastUpdated: serverTimestamp(),\r\n          },\r\n        }, { merge: true });\r\n        invalidateCache(`doc_governmentSettings_${classCode}`);\r\n        setTaxSettings(DEFAULT_TAX_SETTINGS);\r\n        setEditableSettings(DEFAULT_TAX_SETTINGS);\r\n      }\r\n      setLoadingSettings(false);\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ì„¸ê¸ˆ ì •ì±… ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setLoadingSettings(false);\r\n    }\r\n  }, [classCode]);\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 1ì‹œê°„ (ì„¸ê¸ˆ ì„¤ì •ì€ ê±°ì˜ ì•ˆ ë°”ë€œ)\r\n  const { refetch: refetchSettings } = usePolling(fetchTaxSettings, { interval: 60 * 60 * 1000, enabled: !!classCode });\r\n\r\n  const handleSettingChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const numericValue = value === \"\" ? \"\" : parseFloat(value);\r\n    setEditableSettings((prev) => ({\r\n      ...prev,\r\n      [name]: numericValue,\r\n    }));\r\n  };\r\n\r\n  const handleIntervalChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditableSettings((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const saveTaxSettings = async () => {\r\n    if (!classCode) return;\r\n    for (const key in editableSettings) {\r\n      if (\r\n        key.endsWith(\"Rate\") &&\r\n        (editableSettings[key] < 0 || editableSettings[key] > 1)\r\n      ) {\r\n        if (\r\n          editableSettings[key] !== \"\" &&\r\n          !(key === \"itemStoreVATRate\" && editableSettings[key] > 1)\r\n        ) {\r\n          alert(\r\n            `${key} ì„¸ìœ¨ì€ 0ê³¼ 1 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (ì˜ˆ: 3%ëŠ” 0.03). í˜„ì¬ê°’: ${editableSettings[key]}`\r\n          );\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    const settingsRef = doc(db, \"governmentSettings\", classCode);\r\n    try {\r\n      await updateDoc(settingsRef, {\r\n        taxSettings: {\r\n          ...editableSettings,\r\n          lastUpdated: serverTimestamp(),\r\n        },\r\n      });\r\n      refetchSettings();\r\n      alert(\"ì„¸ê¸ˆ ì •ì±…ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n    } catch (error) {\r\n      logger.error(\"ì„¸ê¸ˆ ì •ì±… ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:\", error);\r\n      alert(\"ì„¸ê¸ˆ ì •ì±… ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  if (!classCode) {\r\n    return (\r\n      <div className=\"p-8 text-center\">\r\n        <h2 className=\"text-xl font-bold text-slate-800 mb-2\">í•™ê¸‰ ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤</h2>\r\n        <p className=\"text-slate-500\">\r\n          ì •ë¶€ ë©”ë‰´ì—ì„œ êµ­ì„¸ì²­ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ í•™ê¸‰ì— ë¨¼ì € ì°¸ì—¬í•´ì•¼ í•©ë‹ˆë‹¤.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loadingTreasury || loadingSettings) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-slate-500 font-medium\">êµ­ì„¸ì²­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ (í•™ê¸‰: {classCode})...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalTaxRevenue = Object.keys(treasuryData)\r\n    .filter((key) => key.endsWith(\"Revenue\") && key !== \"totalAmount\")\r\n    .reduce((sum, key) => sum + (treasuryData[key] || 0), 0);\r\n\r\n  const taxPolicyFields = [\r\n    { name: \"stockTransactionTaxRate\", label: \"ì£¼ì‹ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"realEstateTransactionTaxRate\", label: \"ë¶€ë™ì‚° ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"itemStoreVATRate\", label: \"ì•„ì´í…œ ìƒì  ë¶€ê°€ì„¸ìœ¨\", type: \"number\", step: \"0.01\", min: \"0\", max: \"1\" },\r\n    { name: \"auctionTransactionTaxRate\", label: \"ê²½ë§¤ì¥ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"propertyHoldingTaxRate\", label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸ìœ¨\", type: \"number\", step: \"0.0001\", min: \"0\", max: \"1\" },\r\n    { name: \"propertyHoldingTaxInterval\", label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸ ì§•ìˆ˜ ì£¼ê¸°\", type: \"select\", options: [\"daily\", \"weekly\", \"monthly\"] },\r\n    { name: \"itemMarketTransactionTaxRate\", label: \"ì•„ì´í…œ ì‹œì¥ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n  ];\r\n\r\n  const tabs = [\r\n    { id: \"overview\", label: \"ê°œìš”\", icon: \"ğŸ“Š\" },\r\n    { id: \"revenue\", label: \"ì„¸ìˆ˜ í˜„í™©\", icon: \"ğŸ’°\" },\r\n    { id: \"policy\", label: \"ì„¸ê¸ˆ ì •ì±…\", icon: \"ğŸ“‹\" },\r\n    { id: \"analytics\", label: \"ë¶„ì„\", icon: \"ğŸ“ˆ\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* í—¤ë” */}\r\n      <div className=\"relative overflow-hidden rounded-2xl p-8 text-white shadow-xl\" style={{ background: 'linear-gradient(135deg, rgba(15, 15, 30, 0.95), rgba(30, 30, 60, 0.9))', border: '1px solid rgba(0, 255, 242, 0.2)' }}>\r\n        <div className=\"absolute inset-0 opacity-10\" style={{ background: 'radial-gradient(circle at 80% 20%, rgba(0, 136, 255, 0.4), transparent 60%)' }} />\r\n        <div className=\"relative z-10\">\r\n          <h1 className=\"text-2xl font-bold mb-1\" style={{ fontFamily: 'Orbitron, sans-serif', textShadow: '0 0 12px rgba(0, 255, 242, 0.3)' }}>\r\n            {classCode} í•™ê¸‰ êµ­ì„¸ì²­\r\n          </h1>\r\n          <p className=\"text-sm\" style={{ color: 'rgba(148, 163, 184, 0.9)' }}>ì„¸ê¸ˆ ì •ì±… ê´€ë¦¬ ë° êµ­ê³  ìš´ì˜</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ - ì„¸ë ¨ëœ ë„¤ì˜¨ ìŠ¤íƒ€ì¼ */}\r\n      <div className=\"flex gap-2 p-1 rounded-xl\" style={{ background: 'rgba(10, 10, 18, 0.6)', border: '1px solid rgba(0, 255, 242, 0.08)' }}>\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className=\"flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-bold text-sm transition-all duration-300\"\r\n            style={activeTab === tab.id\r\n              ? {\r\n                  background: 'linear-gradient(135deg, rgba(0, 136, 255, 0.2), rgba(0, 255, 242, 0.1))',\r\n                  color: '#fff',\r\n                  border: '1px solid rgba(0, 255, 242, 0.3)',\r\n                  boxShadow: '0 0 15px rgba(0, 136, 255, 0.15), inset 0 1px 0 rgba(255,255,255,0.05)',\r\n                  textShadow: '0 0 8px rgba(0, 255, 242, 0.4)',\r\n                  fontFamily: 'Rajdhani, sans-serif',\r\n                  letterSpacing: '0.5px',\r\n                }\r\n              : {\r\n                  background: 'transparent',\r\n                  color: 'rgba(148, 163, 184, 0.7)',\r\n                  border: '1px solid transparent',\r\n                  fontFamily: 'Rajdhani, sans-serif',\r\n                  letterSpacing: '0.5px',\r\n                }\r\n            }\r\n          >\r\n            <span className=\"text-base\">{tab.icon}</span>\r\n            <span>{tab.label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ê°œìš” íƒ­ */}\r\n      {activeTab === \"overview\" && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\r\n            {[\r\n              { icon: \"ğŸ’°\", label: \"ì´ êµ­ê³ \", value: adminCash, sub: \"= í•™ê¸‰ ê´€ë¦¬ì í˜„ê¸ˆ\", accent: \"#00fff2\", bg: \"rgba(0, 255, 242, 0.08)\", border: \"rgba(0, 255, 242, 0.25)\" },\r\n              { icon: \"ğŸ“ˆ\", label: \"ì£¼ì‹ ê±°ë˜ì„¸ ìˆ˜ì…\", value: treasuryData.stockTaxRevenue, accent: \"#60a5fa\", bg: \"rgba(96, 165, 250, 0.08)\", border: \"rgba(96, 165, 250, 0.25)\" },\r\n              { icon: \"ğŸ“Š\", label: \"ì£¼ì‹ ìˆ˜ìˆ˜ë£Œ ìˆ˜ì…\", value: treasuryData.stockCommissionRevenue, accent: \"#818cf8\", bg: \"rgba(129, 140, 248, 0.08)\", border: \"rgba(129, 140, 248, 0.25)\" },\r\n              { icon: \"ğŸ \", label: \"ë¶€ë™ì‚° ê±°ë˜ì„¸\", value: treasuryData.realEstateTransactionTaxRevenue, accent: \"#fbbf24\", bg: \"rgba(251, 191, 36, 0.08)\", border: \"rgba(251, 191, 36, 0.25)\" },\r\n              { icon: \"ğŸ›’\", label: \"ë¶€ê°€ì„¸ ìˆ˜ì…\", value: treasuryData.vatRevenue, accent: \"#f472b6\", bg: \"rgba(244, 114, 182, 0.08)\", border: \"rgba(244, 114, 182, 0.25)\" },\r\n              { icon: \"ğŸ”¨\", label: \"ê²½ë§¤ì¥ ê±°ë˜ì„¸\", value: treasuryData.auctionTaxRevenue, accent: \"#22d3ee\", bg: \"rgba(34, 211, 238, 0.08)\", border: \"rgba(34, 211, 238, 0.25)\" },\r\n              { icon: \"ğŸ˜ï¸\", label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸\", value: treasuryData.propertyHoldingTaxRevenue, accent: \"#a3e635\", bg: \"rgba(163, 230, 53, 0.08)\", border: \"rgba(163, 230, 53, 0.25)\" },\r\n              { icon: \"ğŸª\", label: \"ì•„ì´í…œ ì‹œì¥ì„¸\", value: treasuryData.itemMarketTaxRevenue, accent: \"#fb923c\", bg: \"rgba(251, 146, 60, 0.08)\", border: \"rgba(251, 146, 60, 0.25)\" },\r\n            ].map((card) => (\r\n              <div\r\n                key={card.label}\r\n                className=\"rounded-xl p-5 transition-all duration-300 hover:scale-[1.02]\"\r\n                style={{\r\n                  background: `linear-gradient(135deg, ${card.bg}, rgba(15, 15, 25, 0.9))`,\r\n                  border: `1px solid ${card.border}`,\r\n                  boxShadow: `0 0 12px ${card.bg}`,\r\n                }}\r\n              >\r\n                <p className=\"text-xs font-semibold mb-2 tracking-wide\" style={{ color: card.accent, fontFamily: 'Rajdhani, sans-serif', letterSpacing: '1px' }}>\r\n                  {card.icon} {card.label}\r\n                </p>\r\n                <p className=\"text-xl font-bold text-white\" style={{ fontFamily: 'Rajdhani, sans-serif', textShadow: `0 0 8px ${card.bg}` }}>\r\n                  {formatKoreanCurrency(card.value)}\r\n                </p>\r\n                {card.sub && <p className=\"text-xs mt-1\" style={{ color: 'rgba(148, 163, 184, 0.6)' }}>{card.sub}</p>}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* ìµœê·¼ ì—…ë°ì´íŠ¸ */}\r\n          <div className=\"rounded-xl p-5\" style={{ background: 'rgba(15, 15, 25, 0.8)', border: '1px solid rgba(0, 255, 242, 0.12)' }}>\r\n            <h3 className=\"text-sm font-bold mb-3\" style={{ color: '#00fff2', fontFamily: 'Rajdhani, sans-serif', letterSpacing: '1px' }}>\r\n              ğŸ“… ìµœê·¼ ì—…ë°ì´íŠ¸\r\n            </h3>\r\n            <div className=\"space-y-1.5 text-sm\" style={{ color: 'rgba(148, 163, 184, 0.8)' }}>\r\n              <p>êµ­ê³  ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span className=\"font-medium text-white\">{formatDate(treasuryData.lastUpdated)}</span></p>\r\n              <p>ì„¸ê¸ˆ ì •ì±… ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span className=\"font-medium text-white\">{formatDate(taxSettings.lastUpdated)}</span></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì„¸ìˆ˜ í˜„í™© íƒ­ */}\r\n      {activeTab === \"revenue\" && (\r\n        <div className=\"rounded-xl p-6\" style={{ background: 'rgba(15, 15, 25, 0.8)', border: '1px solid rgba(0, 255, 242, 0.12)' }}>\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h3 className=\"text-lg font-bold\" style={{ color: '#00fff2', fontFamily: 'Rajdhani, sans-serif', letterSpacing: '1px' }}>\r\n              ğŸ’° ì„¸ìˆ˜ í˜„í™© ë¶„ì„\r\n            </h3>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs\" style={{ color: 'rgba(148, 163, 184, 0.6)' }}>ì„¸ìˆ˜ ì´í•©</p>\r\n              <p className=\"text-xl font-bold text-white\" style={{ fontFamily: 'Rajdhani, sans-serif' }}>{formatKoreanCurrency(totalTaxRevenue)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {[\r\n              { label: \"ì£¼ì‹ ê±°ë˜ì„¸\", amount: treasuryData.stockTaxRevenue, color: \"#60a5fa\" },\r\n              { label: \"ì£¼ì‹ ìˆ˜ìˆ˜ë£Œ\", amount: treasuryData.stockCommissionRevenue, color: \"#818cf8\" },\r\n              { label: \"ë¶€ë™ì‚° ê±°ë˜ì„¸\", amount: treasuryData.realEstateTransactionTaxRevenue, color: \"#fbbf24\" },\r\n              { label: \"ë¶€ê°€ì„¸\", amount: treasuryData.vatRevenue, color: \"#f472b6\" },\r\n              { label: \"ê²½ë§¤ì¥ ê±°ë˜ì„¸\", amount: treasuryData.auctionTaxRevenue, color: \"#22d3ee\" },\r\n              { label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸\", amount: treasuryData.propertyHoldingTaxRevenue, color: \"#a3e635\" },\r\n              { label: \"ì•„ì´í…œ ì‹œì¥ì„¸\", amount: treasuryData.itemMarketTaxRevenue, color: \"#fb923c\" },\r\n            ].map((item) => {\r\n              const percentage = totalTaxRevenue > 0 ? ((item.amount / totalTaxRevenue) * 100).toFixed(1) : \"0.0\";\r\n              return (\r\n                <div key={item.label} className=\"flex items-center gap-3\">\r\n                  <div className=\"w-28 text-xs font-semibold\" style={{ color: item.color, fontFamily: 'Rajdhani, sans-serif' }}>{item.label}</div>\r\n                  <div className=\"flex-1 h-5 rounded-md overflow-hidden\" style={{ background: 'rgba(30, 30, 50, 0.8)', border: '1px solid rgba(255,255,255,0.04)' }}>\r\n                    <div\r\n                      className=\"h-full rounded-md transition-all duration-700\"\r\n                      style={{\r\n                        width: `${Math.max(parseFloat(percentage), 0.5)}%`,\r\n                        background: `linear-gradient(90deg, ${item.color}40, ${item.color}90)`,\r\n                        boxShadow: `0 0 8px ${item.color}30`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"w-36 text-right text-xs\">\r\n                    <span className=\"font-bold text-white\">{formatKoreanCurrency(item.amount)}</span>\r\n                    <span className=\"ml-1.5\" style={{ color: 'rgba(148, 163, 184, 0.5)' }}>({percentage}%)</span>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì„¸ê¸ˆ ì •ì±… íƒ­ */}\r\n      {activeTab === \"policy\" && (\r\n        <div className=\"space-y-5\">\r\n          <div className=\"rounded-xl p-6\" style={{ background: 'rgba(15, 15, 25, 0.8)', border: '1px solid rgba(0, 255, 242, 0.12)' }}>\r\n            <h3 className=\"text-lg font-bold mb-5\" style={{ color: '#00fff2', fontFamily: 'Rajdhani, sans-serif', letterSpacing: '1px' }}>\r\n              ğŸ“‹ í˜„í–‰ ì„¸ê¸ˆ ì •ì±… ({classCode})\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n              {taxPolicyFields.map((field) => (\r\n                <div key={field.name}>\r\n                  <label className=\"block text-xs font-bold mb-2\" style={{ color: 'rgba(148, 163, 184, 0.9)', fontFamily: 'Rajdhani, sans-serif', letterSpacing: '0.5px' }}>\r\n                    {field.label}\r\n                    <span className=\"ml-2\" style={{ color: '#00fff2', fontWeight: 400 }}>\r\n                      (í˜„ì¬: {field.type === \"select\"\r\n                        ? taxSettings[field.name]\r\n                        : `${((taxSettings[field.name] || 0) * 100).toFixed(field.name.includes(\"propertyHoldingTaxRate\") ? 2 : 1)}%`})\r\n                    </span>\r\n                  </label>\r\n                  {field.type === \"select\" ? (\r\n                    <select\r\n                      name={field.name}\r\n                      value={editableSettings[field.name] || DEFAULT_TAX_SETTINGS[field.name]}\r\n                      onChange={handleIntervalChange}\r\n                      className=\"w-full px-4 py-2.5 rounded-lg text-white text-sm transition-all duration-200\"\r\n                      style={{ background: 'rgba(10, 10, 18, 0.8)', border: '1px solid rgba(100, 116, 139, 0.3)', outline: 'none' }}\r\n                      onFocus={(e) => e.target.style.borderColor = 'rgba(0, 255, 242, 0.5)'}\r\n                      onBlur={(e) => e.target.style.borderColor = 'rgba(100, 116, 139, 0.3)'}\r\n                    >\r\n                      {field.options.map((opt) => (\r\n                        <option key={opt} value={opt}>\r\n                          {opt === \"daily\" ? \"ë§¤ì¼\" : opt === \"weekly\" ? \"ë§¤ì£¼\" : \"ë§¤ì›”\"}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  ) : (\r\n                    <input\r\n                      type={field.type}\r\n                      name={field.name}\r\n                      value={editableSettings[field.name] === \"\" ? \"\" : editableSettings[field.name]}\r\n                      onChange={handleSettingChange}\r\n                      step={field.step}\r\n                      min={field.min}\r\n                      max={field.max}\r\n                      placeholder={`ì˜ˆ: ${field.label.includes(\"ë¶€ê°€\") ? \"0.1 (10%)\" : \"0.03 (3%)\"}`}\r\n                      className=\"w-full px-4 py-2.5 rounded-lg text-white text-sm transition-all duration-200\"\r\n                      style={{ background: 'rgba(10, 10, 18, 0.8)', border: '1px solid rgba(100, 116, 139, 0.3)', outline: 'none' }}\r\n                      onFocus={(e) => e.target.style.borderColor = 'rgba(0, 255, 242, 0.5)'}\r\n                      onBlur={(e) => e.target.style.borderColor = 'rgba(100, 116, 139, 0.3)'}\r\n                    />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button\r\n              onClick={saveTaxSettings}\r\n              className=\"mt-5 px-7 py-2.5 rounded-lg font-bold text-sm text-white transition-all duration-300\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, rgba(0, 136, 255, 0.3), rgba(0, 255, 242, 0.2))',\r\n                border: '1px solid rgba(0, 255, 242, 0.35)',\r\n                fontFamily: 'Rajdhani, sans-serif',\r\n                letterSpacing: '1px',\r\n                boxShadow: '0 0 12px rgba(0, 136, 255, 0.15)',\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.target.style.background = 'linear-gradient(135deg, rgba(0, 136, 255, 0.5), rgba(0, 255, 242, 0.35))';\r\n                e.target.style.boxShadow = '0 0 20px rgba(0, 255, 242, 0.25)';\r\n                e.target.style.transform = 'translateY(-1px)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.target.style.background = 'linear-gradient(135deg, rgba(0, 136, 255, 0.3), rgba(0, 255, 242, 0.2))';\r\n                e.target.style.boxShadow = '0 0 12px rgba(0, 136, 255, 0.15)';\r\n                e.target.style.transform = 'translateY(0)';\r\n              }}\r\n            >\r\n              ì„¸ê¸ˆ ì •ì±… ì €ì¥\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"rounded-xl p-5\" style={{ background: 'rgba(10, 10, 18, 0.6)', border: '1px solid rgba(96, 165, 250, 0.15)' }}>\r\n            <h3 className=\"text-sm font-bold mb-2\" style={{ color: '#60a5fa', fontFamily: 'Rajdhani, sans-serif' }}>ğŸ’¡ ì„¸ê¸ˆ ì •ì±… ëª©í‘œ</h3>\r\n            <ul className=\"space-y-1 text-xs\" style={{ color: 'rgba(148, 163, 184, 0.7)' }}>\r\n              <li>â€¢ ê³µì •í•œ ì‹œì¥ ê²½ì œ ì§ˆì„œ í™•ë¦½</li>\r\n              <li>â€¢ ì•ˆì •ì ì¸ í•™ê¸‰ ì¬ì • ë° ê³µê³µ ì„œë¹„ìŠ¤ íˆ¬ì</li>\r\n              <li>â€¢ ê²½ì œ í™œë™ ì°¸ì—¬ì™€ ì„¸ê¸ˆì˜ í˜•í‰ì„± ì œê³ </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ë¶„ì„ íƒ­ */}\r\n      {activeTab === \"analytics\" && (\r\n        <div className=\"rounded-xl p-6\" style={{ background: 'rgba(15, 15, 25, 0.8)', border: '1px solid rgba(0, 255, 242, 0.12)' }}>\r\n          <h3 className=\"text-lg font-bold mb-5\" style={{ color: '#00fff2', fontFamily: 'Rajdhani, sans-serif', letterSpacing: '1px' }}>\r\n            ğŸ“ˆ ì„¸ìˆ˜ ë¶„ì„ ({classCode})\r\n          </h3>\r\n\r\n          {/* ì„¸ìˆ˜ ë¹„ìœ¨ ì‹œê°í™” */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-5\">\r\n            {[\r\n              { label: \"ì£¼ì‹ ê´€ë ¨\", amount: (treasuryData.stockTaxRevenue || 0) + (treasuryData.stockCommissionRevenue || 0), color: \"#60a5fa\" },\r\n              { label: \"ë¶€ë™ì‚° ê´€ë ¨\", amount: (treasuryData.realEstateTransactionTaxRevenue || 0) + (treasuryData.propertyHoldingTaxRevenue || 0), color: \"#fbbf24\" },\r\n              { label: \"ì•„ì´í…œ/ìƒì \", amount: (treasuryData.vatRevenue || 0) + (treasuryData.itemMarketTaxRevenue || 0), color: \"#f472b6\" },\r\n              { label: \"ê²½ë§¤/ê¸°íƒ€\", amount: (treasuryData.auctionTaxRevenue || 0) + (treasuryData.otherTaxRevenue || 0), color: \"#22d3ee\" },\r\n            ].map((cat) => {\r\n              const pct = totalTaxRevenue > 0 ? ((cat.amount / totalTaxRevenue) * 100).toFixed(1) : \"0.0\";\r\n              return (\r\n                <div key={cat.label} className=\"rounded-lg p-4 text-center\" style={{ background: `${cat.color}08`, border: `1px solid ${cat.color}25` }}>\r\n                  <p className=\"text-2xl font-bold\" style={{ color: cat.color, fontFamily: 'Rajdhani, sans-serif' }}>{pct}%</p>\r\n                  <p className=\"text-xs mt-1\" style={{ color: 'rgba(148, 163, 184, 0.7)' }}>{cat.label}</p>\r\n                  <p className=\"text-xs font-semibold mt-0.5 text-white\">{formatKoreanCurrency(cat.amount)}</p>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"rounded-lg p-6 text-center\" style={{ background: 'rgba(10, 10, 18, 0.6)', border: '1px solid rgba(100, 116, 139, 0.15)' }}>\r\n            <p className=\"text-xs\" style={{ color: 'rgba(148, 163, 184, 0.5)' }}>\r\n              ì¶”í›„ ì‹œê°„ë³„ ì„¸ìˆ˜ ë³€í™” ì¶”ì´, ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë¶„ì„ì´ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NationalTaxService;\r\n","// src/Government.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport \"./Government.css\";\r\nimport \"./NationalAssembly.css\"; // ë²•ì•ˆ ì¹´ë“œ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš©\r\nimport NationalTaxService from \"./NationalTaxService\";\r\n// íˆ¬ìí•˜ê¸°, ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° íƒ­ ì œê±°ë¨ - êµ­ê³ ëŠ” ê´€ë¦¬ì í˜„ê¸ˆìœ¼ë¡œ í†µí•©\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { db } from \"../../firebase\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { logger } from '../../utils/logger';\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  doc,\r\n  updateDoc,\r\n  serverTimestamp,\r\n  // orderBy, // orderByëŠ” ì ì‹œ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\n} from \"firebase/firestore\";\r\n\r\n// ë‚ ì§œ í¬ë§·íŒ… í—¬í¼ í•¨ìˆ˜\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return \"ì •ë³´ ì—†ìŒ\";\r\n    try {\r\n      const date = new Date(dateString);\r\n      if (isNaN(date.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ\";\r\n      return `${date.getFullYear()}ë…„ ${\r\n        date.getMonth() + 1\r\n      }ì›” ${date.getDate()}ì¼`;\r\n    } catch (e) {\r\n      return \"ë‚ ì§œ ë³€í™˜ ì˜¤ë¥˜\";\r\n    }\r\n  };\r\n\r\n// ë²•ì•ˆ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸\r\nconst LawManagement = ({ classCode }) => {\r\n  const [laws, setLaws] = useState([]);\r\n  const { isAdmin, userDoc } = useAuth();\r\n\r\n  const { data: jobs } = usePolling(\r\n    async () => {\r\n      if (!classCode) return [];\r\n      const jobsRef = collection(db, \"jobs\");\r\n      const q = query(jobsRef, where(\"classCode\", \"==\", classCode));\r\n      const snapshot = await getDocs(q);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 30ë¶„ (ì§ì—… ëª©ë¡ì€ ê±°ì˜ ì•ˆ ë°”ë€œ)\r\n      interval: 30 * 60 * 1000,\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  // ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ í•¨ìˆ˜\r\n  const canManageLaws = useCallback(() => {\r\n    if (isAdmin()) return true;\r\n    if (!userDoc?.selectedJobIds || !jobs || jobs.length === 0) return false;\r\n    const selectedJobs = jobs.filter(job => userDoc.selectedJobIds.includes(job.id));\r\n    return selectedJobs.some(job => job.title === 'ëŒ€í†µë ¹');\r\n  }, [isAdmin, userDoc, jobs]);\r\n\r\n  // ë²•ì•ˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜\r\n  const fetchLaws = async () => {\r\n    if (!classCode) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const lawsCollectionRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblyLaws\"\r\n      );\r\n\r\n      const q = query(\r\n        lawsCollectionRef,\r\n        where(\"status\", \"==\", \"pending_government_approval\")\r\n      );\r\n\r\n      const querySnapshot = await getDocs(q);\r\n      const loadedLaws = querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setLaws(loadedLaws);\r\n    } catch (error) {\r\n      logger.error(\"Error fetching pending laws:\", error);\r\n      alert(\"ì •ë¶€ ì´ì†¡ ë²•ì•ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 15ë¶„ (ë²•ì•ˆ ë°ì´í„°ëŠ” ìì£¼ ì•ˆ ë°”ë€œ)\r\n  const { loading, refetch } = usePolling(fetchLaws, { interval: 15 * 60 * 1000, enabled: !!classCode });\r\n\r\n  // ë²•ì•ˆ ìŠ¹ì¸ í•¸ë“¤ëŸ¬\r\n  const handleApprove = async (lawId) => {\r\n    if (!canManageLaws()) {\r\n        alert(\"ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ìë§Œ ë²•ì•ˆì„ ìŠ¹ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n        return;\r\n    }\r\n    if(window.confirm(\"ì´ ë²•ì•ˆì„ ìµœì¢… ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\r\n        const lawDocRef = doc(db, \"classes\", classCode, \"nationalAssemblyLaws\", lawId);\r\n        try {\r\n            await updateDoc(lawDocRef, {\r\n                status: \"approved\",\r\n                finalStatus: \"final_approved\",\r\n                finalApprovalDate: serverTimestamp(),\r\n            });\r\n            alert(\"ë²•ì•ˆì´ ìµœì¢… ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n            refetch(); // ì¦‰ì‹œ ë°ì´í„° ê°±ì‹ \r\n        } catch (error) {\r\n            logger.error(\"Error approving law:\", error);\r\n            alert(\"ë²•ì•ˆ ìŠ¹ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n    }\r\n  };\r\n\r\n  // ê±°ë¶€ê¶Œ í–‰ì‚¬ í•¸ë“¤ëŸ¬\r\n  const handleVeto = async (lawId) => {\r\n    if (!canManageLaws()) {\r\n        alert(\"ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ìë§Œ ê±°ë¶€ê¶Œì„ í–‰ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n        return;\r\n    }\r\n    const reason = prompt(\"ê±°ë¶€ê¶Œ í–‰ì‚¬ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n    if (reason && reason.trim() !== \"\") {\r\n        const lawDocRef = doc(db, \"classes\", classCode, \"nationalAssemblyLaws\", lawId);\r\n        const deadline = new Date();\r\n        deadline.setDate(deadline.getDate() + 7); // ì¬ì˜ê²° ê¸°í•œ: 7ì¼\r\n\r\n        try {\r\n            await updateDoc(lawDocRef, {\r\n                status: \"vetoed\",\r\n                vetoReason: reason,\r\n                vetoDate: serverTimestamp(),\r\n                vetoDeadline: deadline,\r\n                approvals: 0,\r\n                disapprovals: 0,\r\n                voters: {},\r\n            });\r\n            alert(\"ê±°ë¶€ê¶Œì´ í–‰ì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë²•ì•ˆì€ êµ­íšŒì—ì„œ ì¬ì˜ê²° ì ˆì°¨ë¥¼ ê±°ì¹©ë‹ˆë‹¤.\");\r\n            refetch(); // ì¦‰ì‹œ ë°ì´í„° ê°±ì‹ \r\n        } catch (error) {\r\n            logger.error(\"Error vetoing law:\", error);\r\n            alert(\"ê±°ë¶€ê¶Œ í–‰ì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n    } else {\r\n        alert(\"ê±°ë¶€ ì‚¬ìœ ë¥¼ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"law-management-container\">\r\n      <h2>ì •ë¶€ ì´ì†¡ ë²•ì•ˆ ëª©ë¡</h2>\r\n      {laws.length === 0 ? (\r\n        <div className=\"empty-state\">í˜„ì¬ ì •ë¶€ë¡œ ì´ì†¡ëœ ë²•ì•ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n      ) : (\r\n        <div className=\"law-list\">\r\n          {laws.map((law) => (\r\n            <div key={law.id} className=\"law-card pending-gov\">\r\n              <div className=\"law-content-wrapper\">\r\n                <div className=\"law-header\">\r\n                  <h3 className=\"law-title\">{law.title}</h3>\r\n                  <span className=\"law-status pending-gov\">ì •ë¶€ ì‹¬ì˜ì¤‘</span>\r\n                </div>\r\n                <div className=\"law-content\">\r\n                    <p><strong>ì œì•ˆì:</strong> {law.proposerName || \"ì •ë³´ ì—†ìŒ\"}</p>\r\n                    <p><strong>ì·¨ì§€:</strong> {law.purpose}</p>\r\n                    <p><strong>ì„¤ëª…:</strong> {law.description}</p>\r\n                    <p><strong>ë²Œê¸ˆ:</strong> {law.fine}</p>\r\n                    <p className=\"law-timestamp\">êµ­íšŒ í†µê³¼ì¼: {formatDate(law.approvalDate?.toDate().toISOString())}</p>\r\n                </div>\r\n                {canManageLaws() && (\r\n                    <div className=\"law-footer government-actions\">\r\n                        <button onClick={() => handleApprove(law.id)} className=\"gov-action-button approve\">ìŠ¹ì¸</button>\r\n                        <button onClick={() => handleVeto(law.id)} className=\"gov-action-button veto\">ê±°ë¶€ê¶Œ í–‰ì‚¬</button>\r\n                    </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst Government = () => {\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  // íƒ­: ë²•ì•ˆ ê´€ë¦¬, êµ­ì„¸ì²­ë§Œ ìœ ì§€ (íˆ¬ìí•˜ê¸°, ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° ì œê±°ë¨)\r\n  const [activeTab, setActiveTab] = useState(\"lawManage\");\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    if (!classCode) {\r\n      return <AlchanLoading />;\r\n    }\r\n\r\n    switch (activeTab) {\r\n      case \"lawManage\":\r\n        return <LawManagement classCode={classCode} />;\r\n      case \"tax\":\r\n        return <NationalTaxService classCode={classCode} />;\r\n      default:\r\n        return <LawManagement classCode={classCode} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"government-container\">\r\n      <h1 className=\"government-header\">\r\n        ì •ë¶€ ({classCode ? `í•™ê¸‰: ${classCode}` : \"í•™ê¸‰ ì •ë³´ ì—†ìŒ\"})\r\n      </h1>\r\n\r\n      <div className=\"government-tabs\">\r\n        <button\r\n          className={`gov-tab-button ${\r\n            activeTab === \"lawManage\" ? \"active\" : \"\"\r\n          }`}\r\n          onClick={() => handleTabClick(\"lawManage\")}\r\n          disabled={!classCode}\r\n        >\r\n          <span className=\"gov-tab-icon\">ğŸ“œ</span>\r\n          <span className=\"gov-tab-label\">ë²•ì•ˆ ê´€ë¦¬</span>\r\n        </button>\r\n        <button\r\n          className={`gov-tab-button ${activeTab === \"tax\" ? \"active\" : \"\"}`}\r\n          onClick={() => handleTabClick(\"tax\")}\r\n          disabled={!classCode}\r\n        >\r\n          <span className=\"gov-tab-icon\">ğŸ›ï¸</span>\r\n          <span className=\"gov-tab-label\">êµ­ì„¸ì²­</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"government-tab-content\">{renderTabContent()}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Government;"],"names":["formatDate","timestamp","date","toDate","Date","isNaN","getTime","toLocaleString","DEFAULT_TREASURY_DATA","totalAmount","stockTaxRevenue","stockCommissionRevenue","realEstateTransactionTaxRevenue","vatRevenue","auctionTaxRevenue","propertyHoldingTaxRevenue","itemMarketTaxRevenue","incomeTaxRevenue","corporateTaxRevenue","otherTaxRevenue","lastUpdated","DEFAULT_TAX_SETTINGS","stockTransactionTaxRate","realEstateTransactionTaxRate","itemStoreVATRate","auctionTransactionTaxRate","propertyHoldingTaxRate","propertyHoldingTaxInterval","itemMarketTransactionTaxRate","_ref","classCode","treasuryData","setTreasuryData","useState","taxSettings","setTaxSettings","adminCash","setAdminCash","loadingTreasury","setLoadingTreasury","loadingSettings","setLoadingSettings","activeTab","setActiveTab","editableSettings","setEditableSettings","fetchAdminCash","useCallback","async","usersRef","collection","db","q","query","where","snapshot","getDocs","empty","adminData","docs","data","cash","error","logger","concat","fetchTreasuryData","treasuryRef","doc","cached","getCachedDocument","_objectSpread","docSnap","getDoc","exists","invalidateCache","setDoc","createdAt","serverTimestamp","refetch","refetchTreasury","usePolling","interval","enabled","fetchTaxSettings","settingsRef","newSettings","merge","refetchSettings","handleSettingChange","e","name","value","target","numericValue","parseFloat","prev","handleIntervalChange","_jsxs","className","children","_jsx","totalTaxRevenue","Object","keys","filter","key","endsWith","reduce","sum","style","background","border","fontFamily","textShadow","color","id","label","icon","map","tab","onClick","boxShadow","letterSpacing","sub","accent","bg","card","formatKoreanCurrency","amount","item","percentage","toFixed","width","Math","max","type","step","min","options","field","fontWeight","includes","onChange","outline","onFocus","borderColor","onBlur","opt","placeholder","alert","updateDoc","onMouseEnter","transform","onMouseLeave","cat","pct","dateString","getFullYear","getMonth","getDate","LawManagement","laws","setLaws","isAdmin","userDoc","useAuth","jobs","jobsRef","deps","canManageLaws","selectedJobIds","length","job","some","title","loading","lawsCollectionRef","loadedLaws","AlchanLoading","law","_law$approvalDate","proposerName","purpose","description","fine","approvalDate","toISOString","window","confirm","lawDocRef","lawId","status","finalStatus","finalApprovalDate","handleApprove","reason","prompt","trim","deadline","setDate","vetoReason","vetoDate","vetoDeadline","approvals","disapprovals","voters","handleVeto","Government","handleTabClick","tabName","disabled","renderTabContent","NationalTaxService"],"ignoreList":[],"sourceRoot":""}