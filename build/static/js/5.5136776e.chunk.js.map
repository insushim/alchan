{"version":3,"file":"static/js/5.5136776e.chunk.js","mappings":"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","sources":["pages/market/Auction.js"],"sourcesContent":["// src/Auction.js (ì˜¤ë¥˜ ìˆ˜ì • ë° ê´€ë¦¬ì ê¸°ëŠ¥ ì¶”ê°€)\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\n\r\n// firebase.jsì—ì„œ ìµìŠ¤í¬íŠ¸í•˜ëŠ” í•¨ìˆ˜ë“¤\r\nimport {\r\n  db,\r\n  serverTimestamp,\r\n  collection,\r\n  query,\r\n  where, // ì¿¼ë¦¬ë¥¼ ìœ„í•´ ì¶”ê°€\r\n  addDoc,\r\n  doc,\r\n  updateDoc, // updateDoc ì¶”ê°€\r\n  deleteDoc,\r\n  runTransaction,\r\n  Timestamp,\r\n  increment,\r\n  getDoc,\r\n  getDocs, // getDocs ì¶”ê°€\r\n} from \"../../firebase\";\r\n\r\n// orderByëŠ” firebase/firestoreì—ì„œ ì§ì ‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\r\nimport {\r\n  orderBy as firebaseOrderBy,\r\n} from \"firebase/firestore\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport \"./Auction.css\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nexport default function Auction() {\r\n  // --- Context Data ---\r\n  const authContext = useAuth();\r\n  const itemsContext = useItems();\r\n  const allUsersData = authContext?.users ?? [];\r\n\r\n  const authLoading = authContext?.loading ?? true;\r\n  const firebaseUser = !authLoading ? authContext?.user : null;\r\n  const userDoc = !authLoading ? authContext?.userDoc : null;\r\n  const optimisticUpdate = authContext?.optimisticUpdate;\r\n\r\n  const balance = userDoc?.cash ?? 0;\r\n  const currentUserId = firebaseUser?.uid || userDoc?.id;\r\n  const classCode = userDoc?.classCode;\r\n  const currentUserName =\r\n    userDoc?.name || firebaseUser?.displayName || \"íŒë§¤ì ì •ë³´ ì—†ìŒ\";\r\n\r\n  const itemsLoading = itemsContext?.loading ?? true;\r\n  const inventoryItems = !itemsLoading ? itemsContext?.userItems ?? [] : [];\r\n  const updateUserItemQuantity = itemsContext?.updateUserItemQuantity;\r\n\r\n  // --- Component State ---\r\n  const [activeTab, setActiveTab] = useState(\"ongoing\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedAssetForAuction, setSelectedAssetForAuction] = useState(null);\r\n  const [newAuction, setNewAuction] = useState({\r\n    assetId: null,\r\n    assetType: \"item\",\r\n    name: \"\",\r\n    description: \"\",\r\n    startPrice: \"\",\r\n    duration: \"1\",\r\n  });\r\n  const [bidAmount, setBidAmount] = useState({});\r\n  const [notification, setNotification] = useState(null);\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [auctions, setAuctions] = useState([]);\r\n  const [auctionsLoading, setAuctionsLoading] = useState(true);\r\n\r\n  // --- Helper Functions ---\r\n  const formatPrice = (price) => {\r\n    if (typeof price !== \"number\" || isNaN(price)) return \"ê°€ê²© ì •ë³´ ì—†ìŒ\";\r\n    return `${price.toLocaleString(\"ko-KR\")}ì›`;\r\n  };\r\n\r\n  // --- Effects ---\r\n  useEffect(() => {\r\n    const timer = setInterval(() => setCurrentTime(new Date()), 60000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  // ê²½ë§¤ ì •ì‚° ë¡œì§ (ìˆ˜ì •ë¨ - ì•„ì´í…œ ë°˜í™˜/ì§€ê¸‰ ë¡œì§ ê°œì„  + ê±°ë˜ì„¸ ì ìš©)\r\n  const settleAuction = async (auction) => {\r\n    if (!classCode) return;\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auction.id);\r\n\r\n    logger.log(`[Auction Settle] ì •ì‚° ì‹œë„: ${auction.id}`);\r\n\r\n    // ì„¸ê¸ˆ ì„¤ì • ë° ê´€ë¦¬ì ì •ë³´ ì‚¬ì „ ì¡°íšŒ (íŠ¸ëœì­ì…˜ ë°–)\r\n    let auctionTaxRate = 0.03;\r\n    let adminUid = null;\r\n    try {\r\n      const govSettingsDoc = await getDoc(doc(db, \"governmentSettings\", classCode));\r\n      if (govSettingsDoc.exists() && govSettingsDoc.data()?.taxSettings) {\r\n        auctionTaxRate = govSettingsDoc.data().taxSettings.auctionTransactionTaxRate ?? 0.03;\r\n      }\r\n      // ê´€ë¦¬ì UID ì¡°íšŒ\r\n      const { getClassAdminUid } = await import(\"../../firebase/db/core\");\r\n      adminUid = await getClassAdminUid(classCode);\r\n    } catch (e) {\r\n      logger.error(\"[Auction Settle] ì„¸ê¸ˆ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:\", e);\r\n    }\r\n\r\n    // --- ì‚¬ì „ ì‘ì—…: ë‚™ì°°ìê°€ ìˆì„ ê²½ìš°, ì¸ë²¤í† ë¦¬ì—ì„œ ë™ì¼ ì•„ì´í…œ ê²€ìƒ‰ ---\r\n    let winnerExistingItemQuerySnap = null;\r\n    if (auction.highestBidder && auction.originalStoreItemId) {\r\n      const winnerInventoryRef = collection(\r\n        db,\r\n        \"users\",\r\n        auction.highestBidder,\r\n        \"inventory\"\r\n      );\r\n      const q = query(\r\n        winnerInventoryRef,\r\n        where(\"itemId\", \"==\", auction.originalStoreItemId)\r\n      );\r\n      winnerExistingItemQuerySnap = await getDocs(q);\r\n    }\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        // ====== ëª¨ë“  ì½ê¸° ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰ ======\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists() || auctionDoc.data().status !== \"ongoing\") {\r\n          logger.log(`[Auction Settle] ê²½ë§¤ê°€ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ì‚­ì œë¨: ${auction.id}`);\r\n          return;\r\n        }\r\n\r\n        const auctionData = auctionDoc.data();\r\n        const now = new Date();\r\n        const endTime = auctionData.endTime.toDate();\r\n\r\n        if (endTime > now) {\r\n          logger.log(`[Auction Settle] ê²½ë§¤ê°€ ì•„ì§ ì¢…ë£Œë˜ì§€ ì•ŠìŒ: ${auction.id}`);\r\n          return;\r\n        }\r\n\r\n        let sellerItemDoc = null;\r\n        let sellerItemRef = null;\r\n        if (!auctionData.highestBidder) {\r\n          // ìœ ì°°ëœ ê²½ìš°ì—ë§Œ íŒë§¤ì ì•„ì´í…œ ë¬¸ì„œ ì½ê¸°\r\n          const returnCollection = auctionData.assetSourceCollection || 'inventory'; // ì•ˆì „ì¥ì¹˜\r\n          sellerItemRef = doc(db, \"users\", auctionData.seller, returnCollection, auctionData.assetId);\r\n          sellerItemDoc = await transaction.get(sellerItemRef);\r\n        }\r\n\r\n        // ====== ëª¨ë“  ì“°ê¸° ì‘ì—…ì„ ì½ê¸° ì™„ë£Œ í›„ ì‹¤í–‰ ======\r\n\r\n        if (auctionData.highestBidder) {\r\n          // --- ì„±ê³µì ì¸ ê²½ë§¤ (ë‚™ì°°ì ìˆìŒ) ---\r\n          const sellerRef = doc(db, \"users\", auctionData.seller);\r\n\r\n          // ì„¸ê¸ˆ ê³„ì‚°\r\n          const taxAmount = Math.round(auctionData.currentBid * auctionTaxRate);\r\n          const sellerProceeds = auctionData.currentBid - taxAmount;\r\n\r\n          // 1. íŒë§¤ìì—ê²Œ ì„¸ê¸ˆ ì°¨ê° ê¸ˆì•¡ ì§€ê¸‰\r\n          transaction.update(sellerRef, {\r\n            cash: increment(sellerProceeds),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n\r\n          // 2. ê´€ë¦¬ì(êµì‚¬)ì—ê²Œ ì„¸ê¸ˆ ì…ê¸ˆ\r\n          if (taxAmount > 0 && adminUid) {\r\n            const adminRef = doc(db, \"users\", adminUid);\r\n            transaction.update(adminRef, {\r\n              cash: increment(taxAmount),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          }\r\n\r\n          // 3. êµ­ê³  í†µê³„ ì—…ë°ì´íŠ¸\r\n          if (taxAmount > 0) {\r\n            const treasuryRef = doc(db, \"nationalTreasuries\", classCode);\r\n            transaction.set(treasuryRef, {\r\n              totalAmount: increment(taxAmount),\r\n              auctionTaxRevenue: increment(taxAmount),\r\n              lastUpdated: serverTimestamp(),\r\n            }, { merge: true });\r\n          }\r\n\r\n          // 4. ë‚™ì°°ìì—ê²Œ ì•„ì´í…œ ì§€ê¸‰ (ê°œì„ ëœ ë¡œì§)\r\n          if (winnerExistingItemQuerySnap && !winnerExistingItemQuerySnap.empty) {\r\n            // ì´ë¯¸ ë™ì¼ ì¢…ë¥˜ì˜ ì•„ì´í…œì„ ê°€ì§€ê³  ìˆìœ¼ë©´ ìˆ˜ëŸ‰ ì¦ê°€\r\n            const winnerItemRef = winnerExistingItemQuerySnap.docs[0].ref;\r\n            transaction.update(winnerItemRef, {\r\n              quantity: increment(1),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          } else {\r\n            // ìƒˆ ì•„ì´í…œì´ë¯€ë¡œ inventoryì— ìƒˆë¡œ ì¶”ê°€\r\n            const winnerInventoryRef = collection(db, \"users\", auctionData.highestBidder, \"inventory\");\r\n            const newWinnerItemRef = doc(winnerInventoryRef); // ìë™ ID ìƒì„±\r\n            transaction.set(newWinnerItemRef, {\r\n              itemId: auctionData.originalStoreItemId, // ìƒì  ì•„ì´í…œ ID\r\n              name: auctionData.name,\r\n              description: auctionData.description,\r\n              icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n              quantity: 1,\r\n              type: \"item\",\r\n              purchasedAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          }\r\n\r\n          // 5. í™œë™ ë¡œê·¸ ê¸°ë¡ (ì„¸ê¸ˆ ì •ë³´ í¬í•¨)\r\n          const sellerLogRef = collection(db, \"users\", auctionData.seller, \"activityLogs\");\r\n          transaction.set(doc(sellerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_sold\",\r\n            message: taxAmount > 0\r\n              ? `'${auctionData.name}' ì•„ì´í…œì´ ${formatPrice(auctionData.currentBid)}ì— íŒë§¤ë˜ì—ˆìŠµë‹ˆë‹¤. (ê±°ë˜ì„¸ ${formatPrice(taxAmount)} ì°¨ê°, ì‹¤ìˆ˜ë ¹ ${formatPrice(sellerProceeds)})`\r\n              : `'${auctionData.name}' ì•„ì´í…œì´ ${formatPrice(auctionData.currentBid)}ì— íŒë§¤ë˜ì—ˆìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n\r\n          const winnerLogRef = collection(db, \"users\", auctionData.highestBidder, \"activityLogs\");\r\n          transaction.set(doc(winnerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_won\",\r\n            message: `'${auctionData.name}' ì•„ì´í…œì„ ${formatPrice(auctionData.currentBid)}ì— ë‚™ì°°ë°›ì•˜ìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n\r\n        } else {\r\n          // --- ìœ ì°°ëœ ê²½ë§¤ (ë‚™ì°°ì ì—†ìŒ) ---\r\n          // 1. íŒë§¤ìì—ê²Œ ì•„ì´í…œ ë°˜í™˜ (ê°œì„ ëœ ë¡œì§)\r\n          if (sellerItemDoc && sellerItemDoc.exists()) {\r\n            // íŒë§¤ì ì¸ë²¤í† ë¦¬ì— í•´ë‹¹ ì•„ì´í…œ ë¬¸ì„œê°€ ì•„ì§ ì¡´ì¬í•˜ë©´ ìˆ˜ëŸ‰ë§Œ ì¦ê°€\r\n            transaction.update(sellerItemRef, {\r\n              quantity: increment(1),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          } else if (sellerItemRef) {\r\n            // íŒë§¤ìê°€ í•´ë‹¹ ì¢…ë¥˜ì˜ ì•„ì´í…œì„ ëª¨ë‘ ì†Œì§„í•´ ë¬¸ì„œê°€ ì—†ë‹¤ë©´ ìƒˆë¡œ ìƒì„±\r\n            transaction.set(sellerItemRef, {\r\n              itemId: auctionData.originalStoreItemId,\r\n              name: auctionData.name,\r\n              description: auctionData.description,\r\n              icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n              quantity: 1,\r\n              type: \"item\",\r\n              addedAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          }\r\n\r\n          // 2. í™œë™ ë¡œê·¸ ê¸°ë¡\r\n          const sellerLogRef = collection(db, \"users\", auctionData.seller, \"activityLogs\");\r\n          transaction.set(doc(sellerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_unsold\",\r\n            message: `'${auctionData.name}' ì•„ì´í…œì´ ìœ ì°°ë˜ì–´ ë°˜í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n        }\r\n\r\n        // 6. ê²½ë§¤ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½\r\n        transaction.update(auctionRef, {\r\n          status: \"completed\",\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      logger.log(`[Auction Settle] ì„±ê³µì ìœ¼ë¡œ ì •ì‚° ì™„ë£Œ: ${auction.id}.`);\r\n      if (authContext.refreshUserDocument) authContext.refreshUserDocument();\r\n      if (itemsContext.refreshData) itemsContext.refreshData();\r\n    } catch (error) {\r\n      logger.error(`[Auction Settle] ì •ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ ${auction.id}:`, error);\r\n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê²½ë§¤ ìƒíƒœë¥¼ 'error'ë¡œ ë³€ê²½í•˜ì—¬ ì¬ì‹œë„ë¥¼ ë°©ì§€í•˜ê³  ë¬¸ì œ íŒŒì•…ì„ ìš©ì´í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n      await updateDoc(auctionRef, { status: \"error\", error: error.message });\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ [ìµœì í™”] ê²½ë§¤ ë°ì´í„° í´ë§ (ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì œê±°ë¡œ ë¹„ìš© 90% ì ˆê°)\r\n  useEffect(() => {\r\n    if (!classCode || !currentUserId) {\r\n      setAuctionsLoading(false);\r\n      setAuctions([]);\r\n      return;\r\n    }\r\n\r\n    const loadAuctions = async () => {\r\n      try {\r\n        setAuctionsLoading(true);\r\n        const auctionsRef = collection(db, \"classes\", classCode, \"auctions\");\r\n        const q = query(auctionsRef, firebaseOrderBy(\"endTime\", \"desc\"));\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        const auctionsData = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          endTime: doc.data().endTime?.toDate ? doc.data().endTime.toDate() : null,\r\n        }));\r\n\r\n        setAuctions(auctionsData);\r\n        setAuctionsLoading(false);\r\n\r\n        // --- ê²½ë§¤ ìë™ ì •ì‚° ë¡œì§ ---\r\n        const now = new Date();\r\n        const auctionsToSettle = auctionsData.filter(\r\n          (a) => a.status === \"ongoing\" && a.endTime && a.endTime <= now\r\n        );\r\n\r\n        if (auctionsToSettle.length > 0) {\r\n          logger.log(`[Auction] ì •ì‚°í•  ê²½ë§¤ ${auctionsToSettle.length}ê°œ ë°œê²¬.`);\r\n          auctionsToSettle.forEach((auction) => settleAuction(auction));\r\n        }\r\n\r\n        // --- 3ì¼ ì´ìƒ ì§€ë‚œ ì™„ë£Œ/ì˜¤ë¥˜ ê²½ë§¤ ìë™ ì‚­ì œ ---\r\n        const THREE_DAYS_MS = 3 * 24 * 60 * 60 * 1000;\r\n        const oldCompletedAuctions = auctionsData.filter(\r\n          (a) => (a.status === \"completed\" || a.status === \"error\") &&\r\n                 a.endTime && (now.getTime() - a.endTime.getTime() > THREE_DAYS_MS)\r\n        );\r\n\r\n        if (oldCompletedAuctions.length > 0) {\r\n          logger.log(`[Auction] ${oldCompletedAuctions.length}ê°œ ì˜¤ë˜ëœ ì™„ë£Œ ê²½ë§¤ ìë™ ì‚­ì œ`);\r\n          const auctionsRef2 = collection(db, \"classes\", classCode, \"auctions\");\r\n          for (const auction of oldCompletedAuctions) {\r\n            try {\r\n              await deleteDoc(doc(auctionsRef2, auction.id));\r\n            } catch (err) {\r\n              logger.error(`[Auction] ìë™ ì‚­ì œ ì‹¤íŒ¨ ${auction.id}:`, err);\r\n            }\r\n          }\r\n          // ì‚­ì œ í›„ ëª©ë¡ ì—…ë°ì´íŠ¸\r\n          setAuctions(prev => prev.filter(a =>\r\n            !oldCompletedAuctions.some(old => old.id === a.id)\r\n          ));\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Auction] ê²½ë§¤ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:\", error);\r\n        showNotification(\"ê²½ë§¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", \"error\");\r\n        setAuctionsLoading(false);\r\n      }\r\n    };\r\n\r\n    // ì´ˆê¸° ë¡œë“œë§Œ ì‹¤í–‰ (í´ë§ ì œê±°)\r\n    loadAuctions();\r\n\r\n    // ğŸ”¥ [ìµœì í™”] í´ë§ ì œê±° - ì‚¬ìš©ìê°€ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ê²½ë§¤ í™•ì¸\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [classCode, currentUserId]);\r\n\r\n  useEffect(() => {\r\n    if (selectedAssetForAuction) {\r\n      if (!selectedAssetForAuction.type || selectedAssetForAuction.type !== \"item\") {\r\n        showNotification(\"ì„ íƒëœ ìì‚°ì˜ íƒ€ì…ì„ ì‹ë³„í•  ìˆ˜ ì—†ê±°ë‚˜ ì•„ì´í…œì´ ì•„ë‹™ë‹ˆë‹¤.\", \"error\");\r\n        setSelectedAssetForAuction(null);\r\n        return;\r\n      }\r\n      setNewAuction((prev) => ({\r\n        ...prev,\r\n        assetId: selectedAssetForAuction.id,\r\n        assetType: selectedAssetForAuction.type,\r\n        name: selectedAssetForAuction.name || \"ì´ë¦„ ì—†ìŒ\",\r\n        description: selectedAssetForAuction.description || \"\",\r\n        startPrice: \"\",\r\n        duration: \"1\",\r\n      }));\r\n    } else {\r\n      setNewAuction((prev) => ({\r\n        ...prev,\r\n        assetId: null,\r\n        assetType: \"item\",\r\n        name: \"\",\r\n        description: \"\",\r\n        startPrice: \"\",\r\n        duration: \"1\",\r\n      }));\r\n    }\r\n  }, [selectedAssetForAuction]);\r\n\r\n  // --- Data Filtering ---\r\n  const ongoingAuctions = auctions\r\n    .filter((auction) => auction.status === \"ongoing\")\r\n    .filter(\r\n      (auction) =>\r\n        searchTerm === \"\" ||\r\n        auction.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (auction.description &&\r\n          auction.description.toLowerCase().includes(searchTerm.toLowerCase()))\r\n    );\r\n  const myAuctions = auctions.filter((auction) => auction.seller === currentUserId);\r\n  const myBids = auctions.filter(\r\n    (auction) =>\r\n      auction.highestBidder === currentUserId && auction.seller !== currentUserId\r\n  );\r\n  const completedAuctions = auctions.filter(\r\n    (auction) => auction.status === \"completed\" || auction.status === \"error\"\r\n  );\r\n\r\n  // --- Helper Functions ---\r\n  const getTimeLeft = (endTime) => {\r\n    if (!(endTime instanceof Date) || isNaN(endTime.getTime()))\r\n      return \"ì‹œê°„ ì •ë³´ ì—†ìŒ\";\r\n    const timeDiff = endTime.getTime() - currentTime.getTime();\r\n    if (timeDiff <= 0) return \"ì¢…ë£Œë¨\";\r\n    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);\r\n    const minutes = Math.floor((timeDiff / 1000 / 60) % 60);\r\n    let output = \"\";\r\n    if (days > 0) output += `${days}ì¼ `;\r\n    if (hours > 0 || days > 0) output += `${hours}ì‹œê°„ `;\r\n    if (minutes > 0 || (days === 0 && hours === 0)) output += `${minutes}ë¶„`;\r\n    return output.trim() || \"ê³§ ì¢…ë£Œ\";\r\n  };\r\n\r\n  const showNotification = (message, type = \"info\") => {\r\n    setNotification({ message, type });\r\n    setTimeout(() => setNotification(null), 3500);\r\n  };\r\n\r\n  // --- Event Handlers ---\r\n  const handleBid = async (auctionId) => {\r\n    if (!currentUserId || !classCode) {\r\n      showNotification(\"ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auctionId);\r\n    const userRef = doc(db, \"users\", currentUserId);\r\n\r\n    const auctionFromState = auctions.find((a) => a.id === auctionId);\r\n    if (!auctionFromState) {\r\n      showNotification(\"ê²½ë§¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ë¡œì»¬ ìƒíƒœ).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const amount = parseInt(bidAmount[auctionId] || \"0\", 10);\r\n\r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      showNotification(\"ìœ íš¨í•œ ì…ì°° ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    if (amount <= auctionFromState.currentBid) {\r\n      showNotification(`í˜„ì¬ê°€ (${formatPrice(auctionFromState.currentBid)})ë³´ë‹¤ ë†’ì€ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.`, \"error\");\r\n      return;\r\n    }\r\n    if (amount > balance) {\r\n      showNotification(`ë³´ìœ  ê¸ˆì•¡(${formatPrice(balance)})ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. íŠ¸ëœì­ì…˜ì—ì„œ ë‹¤ì‹œ í™•ì¸ë©ë‹ˆë‹¤.`, \"warning\");\r\n    }\r\n    if (auctionFromState.seller === currentUserId) {\r\n      showNotification(\"ìì‹ ì˜ ê²½ë§¤ì—ëŠ” ì…ì°°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (\r\n      !auctionFromState.endTime ||\r\n      !(auctionFromState.endTime instanceof Date) ||\r\n      auctionFromState.endTime <= currentTime ||\r\n      auctionFromState.status !== \"ongoing\"\r\n    ) {\r\n      showNotification(\"ì´ë¯¸ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ë§¤ì…ë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -amount });\r\n    }\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists()) {\r\n          throw new Error(\"ê²½ë§¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore).\");\r\n        }\r\n        const currentAuctionData = auctionDoc.data();\r\n\r\n        if (currentAuctionData.status !== \"ongoing\") {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        const bidderUserDoc = await transaction.get(userRef);\r\n        if (!bidderUserDoc.exists()) {\r\n          throw new Error(\"ì…ì°°ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const bidderUserData = bidderUserDoc.data();\r\n\r\n        if (bidderUserData.cash < amount) {\r\n          throw new Error(`ë³´ìœ  í˜„ê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (í˜„ì¬: ${formatPrice(bidderUserData.cash)}, í•„ìš”: ${formatPrice(amount)})`);\r\n        }\r\n        if (amount <= currentAuctionData.currentBid) {\r\n          throw new Error(`ì…ì°° ê¸ˆì•¡ì´ í˜„ì¬ê°€(${formatPrice(currentAuctionData.currentBid)})ë³´ë‹¤ ë‚®ê±°ë‚˜ ê°™ìŠµë‹ˆë‹¤.`);\r\n        }\r\n        if (currentAuctionData.seller === currentUserId) {\r\n          throw new Error(\"ìì‹ ì˜ ê²½ë§¤ì—ëŠ” ì…ì°°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const auctionEndTime = currentAuctionData.endTime.toDate();\r\n        if (auctionEndTime <= new Date()) {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        if (currentAuctionData.highestBidder && currentAuctionData.currentBid > 0) {\r\n          const previousHighestBidderRef = doc(db, \"users\", currentAuctionData.highestBidder);\r\n          transaction.update(previousHighestBidderRef, {\r\n            cash: increment(currentAuctionData.currentBid),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n\r\n        transaction.update(userRef, {\r\n          cash: increment(-amount),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n\r\n        transaction.update(auctionRef, {\r\n          currentBid: amount,\r\n          bidCount: increment(1),\r\n          highestBidder: currentUserId,\r\n          highestBidderName: currentUserName,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      if (authContext.refreshUserDocument) authContext.refreshUserDocument();\r\n\r\n      showNotification(\"ì…ì°°ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      setBidAmount({ ...bidAmount, [auctionId]: \"\" });\r\n    } catch (error) {\r\n      logger.error(\"[Auction Bid] ì…ì°° ì˜¤ë¥˜:\", error);\r\n      showNotification(`ì…ì°° ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n\r\n      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: amount });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreateAuction = async (e) => {\r\n    e.preventDefault();\r\n    if (!currentUserId || !classCode || !firebaseUser) {\r\n      showNotification(\"ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ í•™ê¸‰ ë˜ëŠ” ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (typeof updateUserItemQuantity !== \"function\") {\r\n      showNotification(\"ì•„ì´í…œ ìƒíƒœ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!selectedAssetForAuction || !newAuction.assetId || newAuction.assetType !== \"item\") {\r\n      showNotification(\"ê²½ë§¤ì— ë“±ë¡í•  ì•„ì´í…œì„ ì„ íƒí•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    const startPrice = parseFloat(newAuction.startPrice);\r\n    if (isNaN(startPrice) || startPrice <= 0) {\r\n      showNotification(\"ìœ íš¨í•œ ì‹œì‘ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    const durationHours = parseInt(newAuction.duration, 10);\r\n    if (isNaN(durationHours) || durationHours < 1 || durationHours > 24) {\r\n      showNotification(\"ìœ íš¨í•œ ê²½ë§¤ ê¸°ê°„(1-24ì‹œê°„)ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    let itemDeducted = false;\r\n    try {\r\n      const itemUpdateResult = await updateUserItemQuantity(newAuction.assetId, -1);\r\n      if (!itemUpdateResult || (typeof itemUpdateResult === \"object\" && !itemUpdateResult.success)) {\r\n        throw new Error(itemUpdateResult?.error || \"ì•„ì´í…œ ìˆ˜ëŸ‰ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n      itemDeducted = true;\r\n\r\n      const auctionsRef = collection(db, \"classes\", classCode, \"auctions\");\r\n      const endTime = new Date(Date.now() + durationHours * 60 * 60 * 1000);\r\n\r\n      await addDoc(auctionsRef, {\r\n        assetId: newAuction.assetId,\r\n        assetType: newAuction.assetType,\r\n        name: newAuction.name,\r\n        description: newAuction.description,\r\n        startPrice: startPrice,\r\n        currentBid: startPrice,\r\n        bidCount: 0,\r\n        endTime: Timestamp.fromDate(endTime),\r\n        highestBidder: null,\r\n        seller: currentUserId,\r\n        sellerName: currentUserName,\r\n        status: \"ongoing\",\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        classCode: classCode,\r\n        itemIcon: selectedAssetForAuction.icon || \"ğŸ“¦\",\r\n        // --- ë²„ê·¸ ìˆ˜ì •ì„ ìœ„í•´ ì¶”ê°€ëœ í•„ë“œ ---\r\n        assetSourceCollection: selectedAssetForAuction.source || 'inventory',\r\n        originalStoreItemId: selectedAssetForAuction.itemId, // ì•„ì´í…œ ì¢…ë¥˜ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ  ID\r\n      });\r\n\r\n      setNewAuction({\r\n        assetId: null, assetType: \"item\", name: \"\", description: \"\",\r\n        startPrice: \"\", duration: \"1\",\r\n      });\r\n      setSelectedAssetForAuction(null);\r\n      showNotification(\"ê²½ë§¤ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      setActiveTab(\"myAuctions\");\r\n    } catch (error) {\r\n      logger.error(\"[Auction Create] ê²½ë§¤ ìƒì„± ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê²½ë§¤ ë“±ë¡ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n      if (itemDeducted && newAuction.assetId && typeof updateUserItemQuantity === \"function\") {\r\n        await updateUserItemQuantity(newAuction.assetId, 1);\r\n        logger.log(\"[Auction Create Error] ì•„ì´í…œ ìˆ˜ëŸ‰ ë¡¤ë°± ì„±ê³µ:\", newAuction.assetId);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancelAuction = async (auctionId) => {\r\n    if (!currentUserId || !classCode) return;\r\n    if (typeof updateUserItemQuantity !== \"function\") {\r\n      showNotification(\"ì•„ì´í…œ ìƒíƒœ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auctionId);\r\n    const auction = auctions.find((a) => a.id === auctionId);\r\n\r\n    if (!auction || auction.seller !== currentUserId) {\r\n      showNotification(\"ì·¨ì†Œ ê¶Œí•œì´ ì—†ê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë§¤ì…ë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (auction.status !== \"ongoing\") {\r\n      showNotification(\"ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ë§Œ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"info\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const auctionDocSnap = await getDoc(auctionRef);\r\n      if (!auctionDocSnap.exists()) {\r\n        showNotification(\"ê²½ë§¤ ì •ë³´ë¥¼ Firestoreì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n        return;\r\n      }\r\n      const firestoreAuctionData = auctionDocSnap.data();\r\n\r\n      if (firestoreAuctionData.status !== \"ongoing\") {\r\n        showNotification(\"ì´ë¯¸ ì²˜ë¦¬ëœ ê²½ë§¤ëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore í™•ì¸).\", \"info\");\r\n        return;\r\n      }\r\n      if (firestoreAuctionData.bidCount > 0) {\r\n        showNotification(\"ì…ì°°ì´ ì§„í–‰ëœ ê²½ë§¤ëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore í™•ì¸).\", \"error\");\r\n        return;\r\n      }\r\n\r\n      // ì•„ì´í…œ ë°˜í™˜ ë¡œì§ì„ updateUserItemQuantityë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ì§€ ì•Šê³ ,\r\n      // settleAuctionê³¼ ë™ì¼í•œ ê°•ë ¥í•œ ë¡œì§ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\r\n      const returnCollection = firestoreAuctionData.assetSourceCollection || 'inventory';\r\n      const sellerItemRef = doc(db, \"users\", firestoreAuctionData.seller, returnCollection, firestoreAuctionData.assetId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const sellerItemDoc = await transaction.get(sellerItemRef);\r\n        if (sellerItemDoc.exists()) {\r\n          transaction.update(sellerItemRef, { quantity: increment(1) });\r\n        } else {\r\n          transaction.set(sellerItemRef, {\r\n            itemId: firestoreAuctionData.originalStoreItemId,\r\n            name: firestoreAuctionData.name,\r\n            icon: firestoreAuctionData.itemIcon,\r\n            description: firestoreAuctionData.description,\r\n            quantity: 1,\r\n            type: \"item\",\r\n          });\r\n        }\r\n        transaction.delete(auctionRef);\r\n      });\r\n\r\n      showNotification(\"ê²½ë§¤ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      if (itemsContext.refreshData) itemsContext.refreshData();\r\n\r\n    } catch (error) {\r\n      logger.error(\"[Auction Cancel] ê²½ë§¤ ì·¨ì†Œ ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê²½ë§¤ ì·¨ì†Œ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n    }\r\n  };\r\n\r\n  // --- [ì‹ ê·œ] ê´€ë¦¬ììš© ê²½ë§¤ ê°•ì œ ì·¨ì†Œ í•¨ìˆ˜ ---\r\n  const handleAdminCancelAuction = async (auction) => {\r\n    if (!authContext.isAdmin()) {\r\n      showNotification(\"ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!classCode || !auction || auction.status !== 'ongoing') {\r\n      showNotification(\"ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ë§Œ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!window.confirm(`[ê´€ë¦¬ì] '${auction.name}' ê²½ë§¤ë¥¼ ê°•ì œë¡œ ì·¨ì†Œí•˜ê³  ì•„ì´í…œì„ íŒë§¤ìì—ê²Œ ë°˜í™˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì…ì°°ê¸ˆì´ ìˆë‹¤ë©´ ìµœê³  ì…ì°°ìì—ê²Œ í™˜ë¶ˆë©ë‹ˆë‹¤.`)) {\r\n      return;\r\n    }\r\n\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auction.id);\r\n    logger.log(`[Admin Cancel] ê´€ë¦¬ì ì·¨ì†Œ ì‹œë„: ${auction.id}`);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists() || auctionDoc.data().status !== 'ongoing') {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const auctionData = auctionDoc.data();\r\n\r\n        // 1. ìµœê³  ì…ì°°ìê°€ ìˆìœ¼ë©´ ì…ì°°ê¸ˆ í™˜ë¶ˆ\r\n        if (auctionData.highestBidder && auctionData.currentBid > 0) {\r\n          const bidderRef = doc(db, \"users\", auctionData.highestBidder);\r\n          transaction.update(bidderRef, {\r\n            cash: increment(auctionData.currentBid),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n\r\n        // 2. íŒë§¤ìì—ê²Œ ì•„ì´í…œ ë°˜í™˜ (settleAuctionì˜ ìœ ì°° ë¡œì§ê³¼ ë™ì¼)\r\n        const returnCollection = auctionData.assetSourceCollection || 'inventory';\r\n        const sellerItemRef = doc(db, \"users\", auctionData.seller, returnCollection, auctionData.assetId);\r\n        const sellerItemDoc = await transaction.get(sellerItemRef);\r\n\r\n        if (sellerItemDoc.exists()) {\r\n          transaction.update(sellerItemRef, { quantity: increment(1) });\r\n        } else {\r\n          transaction.set(sellerItemRef, {\r\n            itemId: auctionData.originalStoreItemId,\r\n            name: auctionData.name,\r\n            icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n            description: auctionData.description,\r\n            quantity: 1,\r\n            type: \"item\",\r\n          });\r\n        }\r\n\r\n        // 3. ê²½ë§¤ ë¬¸ì„œ ì‚­ì œ\r\n        transaction.delete(auctionRef);\r\n      });\r\n\r\n      showNotification(`'${auction.name}' ê²½ë§¤ê°€ ê´€ë¦¬ìì— ì˜í•´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.`, \"success\");\r\n      if (itemsContext.refreshData) itemsContext.refreshData();\r\n      if (authContext.fetchAllUsers) authContext.fetchAllUsers(true);\r\n\r\n    } catch (error) {\r\n      logger.error(\"[Admin Cancel] ê´€ë¦¬ì ê²½ë§¤ ì·¨ì†Œ ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê´€ë¦¬ì ì·¨ì†Œ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n    }\r\n  };\r\n\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"startPrice\" && value && !/^\\d*\\.?\\d*$/.test(value)) {\r\n      return;\r\n    }\r\n    setNewAuction({ ...newAuction, [name]: value });\r\n  };\r\n\r\n  const handleSelectAssetForAuction = (event) => {\r\n    const selectedId = event.target.value;\r\n    if (!selectedId) {\r\n      setSelectedAssetForAuction(null);\r\n      return;\r\n    }\r\n    const foundItem = inventoryItems.find((i) => i.id === selectedId);\r\n    if (foundItem) {\r\n      if (!foundItem.type || foundItem.type !== \"item\") {\r\n        showNotification(\"ì„ íƒëœ ìì‚° ì •ë³´ì— íƒ€ì… ì†ì„±ì´ ì—†ê±°ë‚˜ ì•„ì´í…œì´ ì•„ë‹™ë‹ˆë‹¤.\", \"error\");\r\n        setSelectedAssetForAuction(null);\r\n        return;\r\n      }\r\n      setSelectedAssetForAuction(foundItem);\r\n    } else {\r\n      showNotification(\"ì„ íƒí•œ IDì— í•´ë‹¹í•˜ëŠ” ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      setSelectedAssetForAuction(null);\r\n    }\r\n  };\r\n\r\n  const handleBidAmountChange = (e, auctionId) => {\r\n    const value = e.target.value;\r\n    if (value === \"\" || /^\\d+$/.test(value)) {\r\n      setBidAmount({ ...bidAmount, [auctionId]: value });\r\n    }\r\n  };\r\n\r\n  // --- ë¡œë”© ë° ì‚¬ìš©ì/í•™ê¸‰ ì½”ë“œ í™•ì¸ ---\r\n  if (authLoading || itemsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!firebaseUser || !currentUserId) {\r\n    return <div className=\"login-required-container\">ê²½ë§¤ì¥ì„ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>;\r\n  }\r\n  if (!userDoc) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!classCode) {\r\n    return <div className=\"login-required-container\">ê²½ë§¤ì¥ì„ ì´ìš©í•˜ë ¤ë©´ í•™ê¸‰ ì½”ë“œê°€ ì‚¬ìš©ì ì •ë³´ì— ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. (í•™ê¸‰ ì½”ë“œ: ì—†ìŒ)</div>;\r\n  }\r\n  if (auctionsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  const durationOptions = [];\r\n  for (let i = 1; i <= 24; i++) {\r\n    durationOptions.push(<option key={i} value={i}>{i}ì‹œê°„</option>);\r\n  }\r\n\r\n  const availableItems = inventoryItems.filter(\r\n    (item) => item.quantity >= 1 && item.type === \"item\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"auction-container\">\r\n      {notification && (\r\n        <div className={`notification notification-${notification.type}`}>{notification.message}</div>\r\n      )}\r\n\r\n      <header className=\"auction-header\">\r\n        <h1>ê²½ë§¤ì¥ (í•™ê¸‰: {classCode || \"ì •ë³´ ì—†ìŒ\"})</h1>\r\n        <div className=\"auction-balance\">\r\n          <span>ë³´ìœ  ê¸ˆì•¡: </span>\r\n          <span className=\"balance-amount\">{formatPrice(balance)}</span>\r\n        </div>\r\n      </header>\r\n\r\n      <nav className=\"tab-container\">\r\n        <button className={`tab ${activeTab === \"ongoing\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"ongoing\")}>ì§„í–‰ì¤‘</button>\r\n        <button className={`tab ${activeTab === \"myAuctions\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"myAuctions\")}>ë‚´ ê²½ë§¤</button>\r\n        <button className={`tab ${activeTab === \"myBids\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"myBids\")}>ë‚´ ì…ì°°</button>\r\n        <button className={`tab ${activeTab === \"completed\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"completed\")}>ì¢…ë£Œë¨</button>\r\n        <button className={`tab register-tab ${activeTab === \"register\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"register\")}>ê²½ë§¤ ë“±ë¡</button>\r\n      </nav>\r\n\r\n      <main className=\"tab-content\">\r\n        {activeTab === \"ongoing\" && (\r\n          <div className=\"ongoing-auctions-content\">\r\n            <div className=\"search-bar\">\r\n              <input type=\"text\" placeholder=\"ê²½ë§¤ ë¬¼í’ˆ ê²€ìƒ‰...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} aria-label=\"ê²½ë§¤ ë¬¼í’ˆ ê²€ìƒ‰\" />\r\n              <button onClick={() => setSearchTerm(\"\")} className=\"search-reset-button\" aria-label=\"ê²€ìƒ‰ì–´ ì´ˆê¸°í™”\">{searchTerm ? \"ì´ˆê¸°í™”\" : \"ê²€ìƒ‰\"}</button>\r\n            </div>\r\n            {ongoingAuctions.length > 0 ? (\r\n              <div className=\"auctions-grid\">\r\n                {ongoingAuctions.map((auction) => (\r\n                  <article key={auction.id} className=\"auction-card\">\r\n                    <div className=\"auction-info\">\r\n                      <header className=\"card-header\">\r\n                        <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                        <span className={`time-left-badge ${!(auction.endTime instanceof Date) || isNaN(auction.endTime.getTime()) ? \"error\" : \"\"}`} title={auction.endTime instanceof Date ? auction.endTime.toLocaleString() : \"ì¢…ë£Œ ì‹œê°„ ì •ë³´ ì—†ìŒ\"}>\r\n                          {getTimeLeft(auction.endTime)}\r\n                        </span>\r\n                      </header>\r\n                      <p className=\"auction-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <div className=\"auction-price-details\">\r\n                        <p>ì‹œì‘ê°€: <span className=\"price start-price\">{formatPrice(auction.startPrice)}</span></p>\r\n                        <p>í˜„ì¬ê°€: <span className=\"price current-price\">{formatPrice(auction.currentBid)}</span></p>\r\n                      </div>\r\n                      <p className=\"auction-meta\">\r\n                        <span>ì…ì°°: {auction.bidCount}íšŒ</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      {auction.highestBidder === currentUserId && auction.seller !== currentUserId && (\r\n                        <p className=\"bid-status-indicator highest\">í˜„ì¬ ìµœê³  ì…ì°°ìì…ë‹ˆë‹¤!</p>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* --- ì‚¬ìš©ì ì…ì°° ì˜ì—­ --- */}\r\n                    {auction.seller !== currentUserId && auction.status === \"ongoing\" && auction.endTime instanceof Date && auction.endTime > currentTime && (\r\n                      <footer className=\"auction-actions\">\r\n                        <div className=\"bid-input-group\">\r\n                          <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" className=\"bid-input\" placeholder={`${formatPrice(auction.currentBid + 1)} ì´ìƒ`} value={bidAmount[auction.id] || \"\"} onChange={(e) => handleBidAmountChange(e, auction.id)} aria-label={`${auction.name} ì…ì°° ê¸ˆì•¡`} />\r\n                          <button className=\"bid-button\" onClick={() => handleBid(auction.id)} disabled={!bidAmount[auction.id] || isNaN(parseInt(bidAmount[auction.id] || \"0\", 10)) || parseInt(bidAmount[auction.id] || \"0\", 10) <= auction.currentBid}>ì…ì°°</button>\r\n                        </div>\r\n                      </footer>\r\n                    )}\r\n\r\n                    {/* --- ë‚´ ê²½ë§¤ ë¬¼í’ˆ í‘œì‹œ --- */}\r\n                    {auction.seller === currentUserId && auction.status === \"ongoing\" && (\r\n                      <footer className=\"auction-actions owner-notice\">\r\n                        <span>ë‚´ ê²½ë§¤ ë¬¼í’ˆ</span>\r\n                      </footer>\r\n                    )}\r\n\r\n                    {/* --- [ì‹ ê·œ] ê´€ë¦¬ì ì·¨ì†Œ ë²„íŠ¼ --- */}\r\n                    {authContext.isAdmin() && auction.status === 'ongoing' && (\r\n                      <footer className=\"auction-actions admin-actions\">\r\n                        <button\r\n                          className=\"action-button admin-cancel-button\"\r\n                          onClick={() => handleAdminCancelAuction(auction)}\r\n                        >\r\n                          ê´€ë¦¬ì ì·¨ì†Œ\r\n                        </button>\r\n                      </footer>\r\n                    )}\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">{searchTerm ? \"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\" : \"í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.\"}</div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"myAuctions\" && (\r\n          <div className=\"my-auctions-content\">\r\n            <h2>ë‚´ ê²½ë§¤ ë¬¼í’ˆ</h2>\r\n            {myAuctions.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {myAuctions.map((auction) => (\r\n                  <article key={auction.id} className=\"list-item my-auction-item\">\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <div className=\"price-details\">\r\n                        <span>ì‹œì‘ê°€: {formatPrice(auction.startPrice)}</span>\r\n                        <span>í˜„ì¬ê°€: {formatPrice(auction.currentBid)}</span>\r\n                      </div>\r\n                      <p className=\"meta-details\">\r\n                        <span>ì…ì°°: {auction.bidCount}íšŒ</span> | <span>ë‚¨ì€ ì‹œê°„: {getTimeLeft(auction.endTime)}</span>\r\n                      </p>\r\n                      <p className={`status-indicator ${auction.status === \"ongoing\" ? \"ongoing\" : \"completed\"}`}>\r\n                        ìƒíƒœ: {auction.status === \"ongoing\" ? \"ì§„í–‰ ì¤‘\" : auction.highestBidder ? \"íŒë§¤ ì™„ë£Œ\" : \"ìœ ì°°ë¨\"}\r\n                        {auction.status === 'error' && <span className=\"error-text\">(ì˜¤ë¥˜)</span>}\r\n                      </p>\r\n                      {auction.highestBidder && (<p className=\"highest-bidder-info\">ìµœê³  ì…ì°°ì: {auction.highestBidder === currentUserId ? \"ë‚˜\" : allUsersData?.find((u) => u.id === auction.highestBidder)?.name || auction.highestBidder?.substring(0, 6)}</p>)}\r\n                    </div>\r\n                    <div className=\"item-actions\">\r\n                      {auction.status === \"ongoing\" && auction.bidCount === 0 && auction.seller === currentUserId && (<button className=\"action-button cancel-button\" onClick={() => handleCancelAuction(auction.id)}>ë“±ë¡ ì·¨ì†Œ</button>)}\r\n                      {auction.status === \"ongoing\" && auction.bidCount > 0 && (<span className=\"action-status-text\">ì…ì°° ì§„í–‰ ì¤‘</span>)}\r\n\r\n                      {/* --- [ì‹ ê·œ] ê´€ë¦¬ì ì·¨ì†Œ ë²„íŠ¼ (ë‚´ ê²½ë§¤ íƒ­) --- */}\r\n                      {authContext.isAdmin() && auction.status === 'ongoing' && (\r\n                        <button\r\n                          className=\"action-button admin-cancel-button\"\r\n                          onClick={() => handleAdminCancelAuction(auction)}\r\n                        >\r\n                          ê´€ë¦¬ì ì·¨ì†Œ\r\n                        </button>\r\n                      )}\r\n\r\n                      {auction.status === \"completed\" && auction.highestBidder && (<span className=\"action-status-text sold\">íŒë§¤ ì™„ë£Œ</span>)}\r\n                      {auction.status === \"completed\" && !auction.highestBidder && (<span className=\"action-status-text unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.status === \"error\" && (<span className=\"action-status-text error\">ì˜¤ë¥˜ ë°œìƒ</span>)}\r\n                    </div>\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">\r\n                <p>ë“±ë¡í•œ ê²½ë§¤ ë¬¼í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                <button className=\"action-button primary\" onClick={() => setActiveTab(\"register\")}>ê²½ë§¤ ë“±ë¡í•˜ê¸°</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {/* 'ë‚´ ì…ì°°', 'ì¢…ë£Œë¨', 'ê²½ë§¤ ë“±ë¡' íƒ­ì˜ JSXëŠ” ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤. */}\r\n        {/* ... (ê¸°ì¡´ JSX ì½”ë“œ ë³µì‚¬) ... */}\r\n        {activeTab === \"myBids\" && (\r\n          <div className=\"my-bids-content\">\r\n            <h2>ë‚´ ì…ì°° í˜„í™©</h2>\r\n            {myBids.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {myBids.map((auction) => (\r\n                  <article key={auction.id} className={`list-item my-bid-item ${auction.highestBidder === currentUserId ? \"status-highest\" : \"status-outbid\"}`}>\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <p className=\"bid-info\">ë‚´ ìµœê³  ì…ì°°ê°€: <span className=\"price\">{formatPrice(auction.currentBid)}</span></p>\r\n                      <p className=\"meta-details\">\r\n                        <span>ë‚¨ì€ ì‹œê°„: {getTimeLeft(auction.endTime)}</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      <p className=\"status-indicator\">\r\n                        ìƒíƒœ:\r\n                        {auction.status === \"completed\" ? (\r\n                          auction.highestBidder === currentUserId ? (<span className=\"won\">ë‚™ì°° ì™„ë£Œ</span>) : (<span className=\"lost\">íŒ¨ì°°</span>)\r\n                        ) : auction.highestBidder === currentUserId ? (<span className=\"highest\">ìµœê³  ì…ì°° ì¤‘</span>) : (<span className=\"outbid\">ìƒíšŒ ì…ì°°ë¨</span>)}\r\n                      </p>\r\n                    </div>\r\n                    {auction.status === \"ongoing\" && auction.highestBidder !== currentUserId && (\r\n                      <div className=\"item-actions rebid-section\">\r\n                        <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" className=\"bid-input small\" placeholder={`${formatPrice(auction.currentBid + 1)} ì´ìƒ`} value={bidAmount[auction.id] || \"\"} onChange={(e) => handleBidAmountChange(e, auction.id)} aria-label={`${auction.name} ì¬ì…ì°° ê¸ˆì•¡`} />\r\n                        <button className=\"action-button rebid-button\" onClick={() => handleBid(auction.id)} disabled={!bidAmount[auction.id] || isNaN(parseInt(bidAmount[auction.id] || \"0\", 10)) || parseInt(bidAmount[auction.id] || \"0\", 10) <= auction.currentBid}>ì¬ì…ì°°</button>\r\n                      </div>\r\n                    )}\r\n                    {auction.status === \"ongoing\" && auction.highestBidder === currentUserId && (<div className=\"item-actions highest-bid-notice\"><span>ìµœê³  ì…ì°°ì</span></div>)}\r\n                    {auction.status === \"completed\" && (<div className=\"item-actions\"><span className={`action-status-text ${auction.highestBidder === currentUserId ? \"won\" : \"lost\"}`}>{auction.highestBidder === currentUserId ? \"ë‚™ì°°\" : \"íŒ¨ì°°\"}</span></div>)}\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">\r\n                <p>ì…ì°°í•œ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                <button className=\"action-button primary\" onClick={() => setActiveTab(\"ongoing\")}>ê²½ë§¤ ë‘˜ëŸ¬ë³´ê¸°</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"completed\" && (\r\n          <div className=\"completed-auctions-content\">\r\n            <h2>ì¢…ë£Œëœ ê²½ë§¤</h2>\r\n            {completedAuctions.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {completedAuctions.map((auction) => (\r\n                  <article key={auction.id} className={`list-item completed-item ${auction.highestBidder === currentUserId ? \"result-won\" : \"\"} ${auction.seller === currentUserId ? \"result-sold\" : \"\"} ${!auction.highestBidder ? \"result-unsold\" : \"\"}`}>\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <p className=\"final-result\">\r\n                        {auction.status === 'error' ? `ì˜¤ë¥˜ ë°œìƒ: ${auction.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}` :\r\n                          auction.highestBidder ? `ìµœì¢… ë‚™ì°°ê°€: ${formatPrice(auction.currentBid)}` : `ìœ ì°°ë¨ (ì‹œì‘ê°€: ${formatPrice(auction.startPrice)})`}\r\n                      </p>\r\n                      <p className=\"meta-details\">\r\n                        <span>ì´ ì…ì°°: {auction.bidCount}íšŒ</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      {auction.highestBidder && (<p className=\"winner-info\">ë‚™ì°°ì: {auction.highestBidder === currentUserId ? \"ë‚˜\" : allUsersData?.find((u) => u.id === auction.highestBidder)?.name || auction.highestBidder?.substring(0, 6)}</p>)}\r\n                      {!auction.highestBidder && auction.status !== 'error' && (<p className=\"status-indicator unsold\">ìœ ì°°ë¨</p>)}\r\n                    </div>\r\n                    <div className=\"item-actions result-badge\">\r\n                      {auction.highestBidder === currentUserId && (<span className=\"badge won\">ë‚™ì°° ë°›ìŒ</span>)}\r\n                      {auction.seller === currentUserId && auction.highestBidder && (<span className=\"badge sold\">íŒë§¤ ì™„ë£Œ</span>)}\r\n                      {auction.seller === currentUserId && !auction.highestBidder && (<span className=\"badge unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.seller !== currentUserId && auction.highestBidder !== currentUserId && auction.highestBidder && (<span className=\"badge neutral\">ì¢…ë£Œë¨</span>)}\r\n                      {auction.seller !== currentUserId && auction.highestBidder !== currentUserId && !auction.highestBidder && (<span className=\"badge unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.status === 'error' && (<span className=\"badge error\">ì˜¤ë¥˜</span>)}\r\n                    </div>\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\"><p>ì¢…ë£Œëœ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"register\" && (\r\n          <div className=\"register-auction-content\">\r\n            <h2>ê²½ë§¤ ë¬¼í’ˆ ë“±ë¡</h2>\r\n            <form className=\"auction-form\" onSubmit={handleCreateAuction}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"auctionAssetSelect\">ë“±ë¡í•  ì•„ì´í…œ ì„ íƒ *</label>\r\n                <select id=\"auctionAssetSelect\" name=\"auctionAssetSelect\" className=\"form-control\" value={selectedAssetForAuction ? selectedAssetForAuction.id : \"\"} onChange={handleSelectAssetForAuction} required aria-describedby=\"assetSelectHint\">\r\n                  <option value=\"\">-- ë³´ìœ  ì•„ì´í…œ ëª©ë¡ --</option>\r\n                  {availableItems.length > 0 && (\r\n                    <optgroup label=\"ì•„ì´í…œ (ìˆ˜ëŸ‰ 1ê°œ ì´ìƒ)\">\r\n                      {availableItems.map((item) => (\r\n                        <option key={`item-${item.id}`} value={item.id}>\r\n                          {item.icon} {item.name} (ìˆ˜ëŸ‰: {item.quantity})\r\n                        </option>\r\n                      ))}\r\n                    </optgroup>\r\n                  )}\r\n                </select>\r\n                {availableItems.length === 0 && (<p id=\"assetSelectHint\" className=\"form-hint error\">ê²½ë§¤ì— ë“±ë¡í•  ìˆ˜ ìˆëŠ” ì•„ì´í…œ(ìˆ˜ëŸ‰ 1ê°œ ì´ìƒ)ì´ ì—†ìŠµë‹ˆë‹¤.</p>)}\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\">ë¬¼í’ˆëª…</label>\r\n                <input type=\"text\" id=\"name\" name=\"name\" className=\"form-control\" placeholder=\"ë“±ë¡í•  ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”\" value={newAuction.name} readOnly aria-label=\"ì„ íƒëœ ë¬¼í’ˆëª…\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"description\">ë¬¼í’ˆ ì„¤ëª…</label>\r\n                <textarea id=\"description\" name=\"description\" className=\"form-control\" rows=\"3\" placeholder=\"ìë™ ì…ë ¥ëœ ì„¤ëª…ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\" value={newAuction.description} onChange={handleInputChange} aria-label=\"ë¬¼í’ˆ ì„¤ëª…\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"startPrice\">ì‹œì‘ê°€ (ì›) *</label>\r\n                <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" id=\"startPrice\" name=\"startPrice\" className=\"form-control\" placeholder=\"ê²½ë§¤ ì‹œì‘ê°€ë¥¼ ìˆ«ìë¡œ ì…ë ¥ (ì˜ˆ: 10000)\" value={newAuction.startPrice} onChange={handleInputChange} required aria-required=\"true\" aria-label=\"ê²½ë§¤ ì‹œì‘ê°€\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"duration\">ê²½ë§¤ ê¸°ê°„ *</label>\r\n                <select id=\"duration\" name=\"duration\" className=\"form-control\" value={newAuction.duration} onChange={handleInputChange} required aria-required=\"true\" aria-label=\"ê²½ë§¤ ê¸°ê°„ ì„ íƒ\">\r\n                  {durationOptions}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-actions\">\r\n                <button type=\"submit\" className=\"action-button primary register-button\" disabled={!selectedAssetForAuction || !newAuction.startPrice || isNaN(parseFloat(newAuction.startPrice)) || parseFloat(newAuction.startPrice) <= 0 || !newAuction.duration || selectedAssetForAuction.type !== \"item\"}>ê²½ë§¤ ë“±ë¡</button>\r\n                <button type=\"button\" className=\"action-button cancel-button\" onClick={() => { setSelectedAssetForAuction(null); setActiveTab(\"ongoing\"); }}>ì·¨ì†Œ</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <style>{`\r\n        /* --- Cyberpunk Dark Theme Styles --- */\r\n\r\n        /* Admin Buttons */\r\n        .action-button.admin-cancel-button {\r\n            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1));\r\n            color: #a78bfa;\r\n            border: 1px solid rgba(139, 92, 246, 0.5);\r\n        }\r\n        .action-button.admin-cancel-button:hover {\r\n            background: rgba(139, 92, 246, 0.4);\r\n            box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);\r\n        }\r\n\r\n        .auction-actions.admin-actions {\r\n            background-color: rgba(139, 92, 246, 0.1);\r\n            border-top: 1px solid rgba(139, 92, 246, 0.3);\r\n            padding: 10px 15px;\r\n        }\r\n\r\n        .badge.error {\r\n            background-color: rgba(239, 68, 68, 0.8);\r\n        }\r\n        .action-status-text.error {\r\n          color: #f87171;\r\n          background-color: rgba(239, 68, 68, 0.1);\r\n          font-weight: 600;\r\n        }\r\n        .error-text {\r\n            color: #f87171;\r\n            font-weight: bold;\r\n            margin-left: 5px;\r\n        }\r\n        .completed-item .final-result {\r\n            font-size: 1em;\r\n            font-weight: 600;\r\n            margin-bottom: 8px;\r\n            word-break: break-all;\r\n        }\r\n\r\n        /* --- Global & Layout - Dark Theme --- */\r\n        .auction-container {\r\n          font-family: \"Rajdhani\", \"Noto Sans KR\", sans-serif;\r\n          max-width: none;\r\n          margin: 0;\r\n          padding: 15px;\r\n          color: #e2e8f0;\r\n          background-color: transparent;\r\n        }\r\n        .loading-container, .login-required-container {\r\n          text-align: center;\r\n          padding: 40px 20px;\r\n          font-size: 1.1em;\r\n          color: #94a3b8;\r\n        }\r\n        .auction-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 15px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n        }\r\n        .auction-header h1 {\r\n          font-size: 1.8em;\r\n          font-weight: 600;\r\n          color: #00fff2;\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n          margin: 0;\r\n        }\r\n        .auction-balance {\r\n          background: rgba(0, 255, 242, 0.1);\r\n          border: 1px solid rgba(0, 255, 242, 0.3);\r\n          padding: 8px 15px;\r\n          border-radius: 15px;\r\n          font-size: 0.95em;\r\n          color: #e2e8f0;\r\n        }\r\n        .auction-balance .balance-amount {\r\n          font-weight: 600;\r\n          color: #00fff2;\r\n          text-shadow: 0 0 5px rgba(0, 255, 242, 0.5);\r\n          margin-left: 5px;\r\n        }\r\n\r\n        /* --- Tabs - Dark Theme --- */\r\n        .tab-container {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          margin-bottom: 25px;\r\n          border-bottom: 2px solid rgba(255, 255, 255, 0.1);\r\n          gap: 8px;\r\n        }\r\n        .tab {\r\n          padding: 10px 18px;\r\n          background: none;\r\n          border: none;\r\n          border-bottom: 3px solid transparent;\r\n          cursor: pointer;\r\n          font-size: 1em;\r\n          font-weight: 500;\r\n          color: #94a3b8;\r\n          transition: all 0.2s ease;\r\n          white-space: nowrap;\r\n          position: relative;\r\n          top: 2px;\r\n        }\r\n        .tab:hover {\r\n          color: #e2e8f0;\r\n          background: rgba(255, 255, 255, 0.05);\r\n        }\r\n        .tab.active {\r\n          color: #00fff2;\r\n          font-weight: 600;\r\n          border-bottom-color: #00fff2;\r\n          text-shadow: 0 0 5px rgba(0, 255, 242, 0.3);\r\n        }\r\n\r\n        /* --- Search Bar - Dark Theme --- */\r\n        .search-bar { display: flex; margin-bottom: 25px; gap: 8px; }\r\n        .search-bar input[type=\"text\"] {\r\n          flex-grow: 1;\r\n          padding: 10px 15px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 6px;\r\n          font-size: 1em;\r\n          background: rgba(20, 20, 35, 0.8);\r\n          color: #e2e8f0;\r\n          transition: border-color 0.2s, box-shadow 0.2s;\r\n        }\r\n        .search-bar input[type=\"text\"]:focus {\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n          outline: none;\r\n        }\r\n        .search-reset-button {\r\n          padding: 10px 18px;\r\n          background: rgba(100, 116, 139, 0.3);\r\n          border: 1px solid rgba(100, 116, 139, 0.5);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          transition: all 0.2s;\r\n        }\r\n        .search-reset-button:hover {\r\n          background: rgba(100, 116, 139, 0.5);\r\n        }\r\n\r\n        /* --- Grid & Card Styles - Dark Theme --- */\r\n        .auctions-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }\r\n        .auction-card {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n          overflow: hidden;\r\n          transition: all 0.3s ease;\r\n          display: flex;\r\n          flex-direction: column;\r\n          backdrop-filter: blur(10px);\r\n        }\r\n        .auction-card:hover {\r\n          transform: translateY(-4px);\r\n          border-color: rgba(0, 255, 242, 0.3);\r\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 0 15px rgba(0, 255, 242, 0.1);\r\n        }\r\n        .auction-info { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }\r\n        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\r\n        .card-header h3 {\r\n          font-size: 1.15em;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          max-width: calc(100% - 85px);\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        .time-left-badge {\r\n          background: rgba(0, 255, 242, 0.1);\r\n          border: 1px solid rgba(0, 255, 242, 0.3);\r\n          color: #00fff2;\r\n          padding: 3px 8px;\r\n          border-radius: 10px;\r\n          font-size: 0.8em;\r\n          font-weight: 500;\r\n          white-space: nowrap;\r\n          flex-shrink: 0;\r\n        }\r\n        .auction-description { color: #94a3b8; font-size: 0.9em; line-height: 1.5; margin-bottom: 12px; }\r\n        .auction-price-details {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          font-size: 0.9em;\r\n          margin-bottom: 8px;\r\n          color: #94a3b8;\r\n          background: rgba(0, 0, 0, 0.2);\r\n          padding: 10px;\r\n          border-radius: 8px;\r\n        }\r\n        .auction-price-details .price { font-weight: 600; }\r\n        .auction-price-details .current-price { color: #fbbf24; text-shadow: 0 0 5px rgba(251, 191, 36, 0.3); }\r\n        .auction-meta { font-size: 0.85em; color: #64748b; margin-bottom: 10px; }\r\n        .bid-status-indicator.highest {\r\n          color: #34d399;\r\n          font-weight: 600;\r\n          font-size: 0.9em;\r\n          margin-top: auto;\r\n          background: rgba(16, 185, 129, 0.1);\r\n          padding: 8px;\r\n          border-radius: 6px;\r\n          text-align: center;\r\n        }\r\n        .auction-actions {\r\n          padding: 12px 15px;\r\n          background: rgba(0, 0, 0, 0.3);\r\n          border-top: 1px solid rgba(255, 255, 255, 0.05);\r\n        }\r\n        .owner-notice {\r\n          text-align: center;\r\n          font-size: 0.9em;\r\n          color: #00fff2;\r\n          font-weight: 500;\r\n        }\r\n        .bid-input-group { display: flex; gap: 8px; }\r\n        .bid-input {\r\n          flex-grow: 1;\r\n          padding: 8px 12px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          background: rgba(0, 0, 0, 0.3);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          font-size: 0.9em;\r\n        }\r\n        .bid-input:focus {\r\n          outline: none;\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n        }\r\n        .bid-button {\r\n          padding: 8px 15px;\r\n          background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1));\r\n          border: 1px solid rgba(16, 185, 129, 0.5);\r\n          color: #34d399;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 600;\r\n          transition: all 0.2s;\r\n          white-space: nowrap;\r\n        }\r\n        .bid-button:hover:not(:disabled) {\r\n          background: rgba(16, 185, 129, 0.4);\r\n          box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);\r\n        }\r\n        .bid-button:disabled {\r\n          background: rgba(75, 85, 99, 0.3);\r\n          border-color: rgba(75, 85, 99, 0.5);\r\n          color: #64748b;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        /* --- List View Styles - Dark Theme --- */\r\n        .my-auctions-content h2, .my-bids-content h2, .completed-auctions-content h2 {\r\n          font-size: 1.5em;\r\n          color: #00fff2;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 10px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n        }\r\n        .list-view { display: flex; flex-direction: column; gap: 15px; }\r\n        .list-item {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 15px;\r\n          transition: all 0.2s ease;\r\n          border-left: 4px solid transparent;\r\n        }\r\n        .list-item:hover {\r\n          border-color: rgba(0, 255, 242, 0.3);\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n        }\r\n        .list-item .item-info { flex-grow: 1; padding-right: 15px; }\r\n        .list-item h3 {\r\n          font-size: 1.1em;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0 0 5px 0;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        .list-item .item-description { font-size: 0.9em; color: #94a3b8; margin-bottom: 8px; }\r\n        .list-item .price-details, .list-item .meta-details { font-size: 0.85em; color: #64748b; margin-bottom: 5px; }\r\n        .list-item .bid-info .price { color: #00fff2; font-weight: 600; }\r\n        .list-item .status-indicator { font-size: 0.9em; font-weight: 500; margin-top: 8px; }\r\n        .list-item .status-indicator .won, .list-item .status-indicator .highest { color: #34d399; font-weight: 600; }\r\n        .list-item .status-indicator .outbid { color: #fbbf24; font-weight: 600; }\r\n        .list-item .item-actions { flex-shrink: 0; display: flex; align-items: center; gap: 10px; }\r\n\r\n        /* --- Action Buttons (ê³µí†µ) - Dark Theme --- */\r\n        .action-button {\r\n          padding: 8px 15px;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          transition: all 0.2s ease;\r\n          white-space: nowrap;\r\n        }\r\n        .action-button.primary {\r\n          background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.1));\r\n          border: 1px solid rgba(59, 130, 246, 0.5);\r\n          color: #60a5fa;\r\n        }\r\n        .action-button.primary:hover {\r\n          background: rgba(59, 130, 246, 0.4);\r\n          box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);\r\n        }\r\n        .action-button.cancel-button {\r\n          background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.1));\r\n          border: 1px solid rgba(239, 68, 68, 0.5);\r\n          color: #f87171;\r\n        }\r\n        .action-button.cancel-button:hover {\r\n          background: rgba(239, 68, 68, 0.4);\r\n          box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);\r\n        }\r\n        .action-button.rebid-button {\r\n          background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.1));\r\n          border: 1px solid rgba(251, 191, 36, 0.5);\r\n          color: #fbbf24;\r\n        }\r\n        .action-button.rebid-button:hover {\r\n          background: rgba(251, 191, 36, 0.4);\r\n          box-shadow: 0 0 15px rgba(251, 191, 36, 0.3);\r\n        }\r\n\r\n        /* --- Status Text/Badge - Dark Theme --- */\r\n        .action-status-text {\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          padding: 5px 10px;\r\n          border-radius: 4px;\r\n        }\r\n        .action-status-text.sold {\r\n          color: #60a5fa;\r\n          background: rgba(59, 130, 246, 0.1);\r\n          border: 1px solid rgba(59, 130, 246, 0.3);\r\n        }\r\n        .action-status-text.unsold {\r\n          color: #f87171;\r\n          background: rgba(239, 68, 68, 0.1);\r\n          border: 1px solid rgba(239, 68, 68, 0.3);\r\n        }\r\n        .badge {\r\n          font-size: 0.8em;\r\n          font-weight: 600;\r\n          padding: 4px 10px;\r\n          border-radius: 12px;\r\n          color: white;\r\n        }\r\n        .badge.won { background: linear-gradient(135deg, #10b981, #059669); }\r\n        .badge.sold { background: linear-gradient(135deg, #3b82f6, #2563eb); }\r\n        .badge.unsold { background: linear-gradient(135deg, #ef4444, #dc2626); }\r\n        .badge.neutral { background: linear-gradient(135deg, #6b7280, #4b5563); }\r\n\r\n        /* --- My Bids Specific --- */\r\n        .my-bid-item.status-highest { border-left-color: #10b981; }\r\n        .my-bid-item.status-outbid { border-left-color: #f59e0b; }\r\n\r\n        /* --- Completed Auctions Specific --- */\r\n        .completed-item.result-won { border-left-color: #10b981; }\r\n        .completed-item.result-sold { border-left-color: #3b82f6; }\r\n        .completed-item.result-unsold { border-left-color: #ef4444; }\r\n\r\n        /* --- Auction Form Styles - Dark Theme --- */\r\n        .register-auction-content h2 {\r\n          font-size: 1.5em;\r\n          color: #00fff2;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 10px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n        }\r\n        .auction-form {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          padding: 25px;\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n          max-width: 650px;\r\n          margin: 0 auto;\r\n          backdrop-filter: blur(10px);\r\n        }\r\n        .form-group { margin-bottom: 20px; }\r\n        .form-group label {\r\n          display: block;\r\n          margin-bottom: 8px;\r\n          font-weight: 500;\r\n          color: #e2e8f0;\r\n        }\r\n        .form-control {\r\n          width: 100%;\r\n          padding: 10px 14px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          background: rgba(0, 0, 0, 0.3);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          font-size: 1em;\r\n        }\r\n        .form-control:focus {\r\n          outline: none;\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n        }\r\n        .form-control[readOnly] {\r\n          background: rgba(75, 85, 99, 0.3);\r\n          color: #94a3b8;\r\n        }\r\n        .form-actions { display: flex; gap: 15px; margin-top: 30px; }\r\n        .register-button {\r\n          background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1)) !important;\r\n          border: 1px solid rgba(16, 185, 129, 0.5) !important;\r\n          color: #34d399 !important;\r\n        }\r\n        .register-button:hover:not(:disabled) {\r\n          background: rgba(16, 185, 129, 0.4) !important;\r\n          box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);\r\n        }\r\n        .register-button:disabled {\r\n          background: rgba(75, 85, 99, 0.3) !important;\r\n          border-color: rgba(75, 85, 99, 0.5) !important;\r\n          color: #64748b !important;\r\n        }\r\n\r\n        /* --- Notification - Dark Theme --- */\r\n        .notification {\r\n          position: fixed;\r\n          bottom: 20px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          padding: 12px 24px;\r\n          border-radius: 12px;\r\n          color: white;\r\n          animation: fadeInOut 3.5s ease-in-out forwards;\r\n          z-index: 1001;\r\n          backdrop-filter: blur(10px);\r\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\r\n        }\r\n        .notification.success {\r\n          background: rgba(16, 185, 129, 0.9);\r\n          border: 1px solid rgba(16, 185, 129, 0.5);\r\n        }\r\n        .notification.error {\r\n          background: rgba(239, 68, 68, 0.9);\r\n          border: 1px solid rgba(239, 68, 68, 0.5);\r\n        }\r\n        .notification.info {\r\n          background: rgba(59, 130, 246, 0.9);\r\n          border: 1px solid rgba(59, 130, 246, 0.5);\r\n        }\r\n        @keyframes fadeInOut {\r\n          0% { opacity: 0; transform: translate(-50%, 15px); }\r\n          10% { opacity: 1; transform: translate(-50%, 0); }\r\n          90% { opacity: 1; transform: translate(-50%, 0); }\r\n          100% { opacity: 0; transform: translate(-50%, -5px); }\r\n        }\r\n\r\n        /* --- No results - Dark Theme --- */\r\n        .no-results-message {\r\n          text-align: center;\r\n          padding: 30px 20px;\r\n          color: #94a3b8;\r\n          background: rgba(20, 20, 35, 0.6);\r\n          border: 1px dashed rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n        }\r\n\r\n        /* --- Responsive --- */\r\n        @media (max-width: 768px) {\r\n          .auction-header { flex-direction: column; align-items: flex-start; gap: 10px; }\r\n          .auctions-grid { grid-template-columns: 1fr; }\r\n          .list-item { flex-direction: column; align-items: flex-start; }\r\n          .list-item .item-actions { width: 100%; margin-top: 10px; justify-content: flex-end; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":["Auction","_authContext$users","_authContext$loading","_userDoc$cash","_itemsContext$loading","_itemsContext$userIte","authContext","useAuth","itemsContext","useItems","allUsersData","users","authLoading","loading","firebaseUser","user","userDoc","optimisticUpdate","balance","cash","currentUserId","uid","id","classCode","currentUserName","name","displayName","itemsLoading","inventoryItems","userItems","updateUserItemQuantity","activeTab","setActiveTab","useState","searchTerm","setSearchTerm","selectedAssetForAuction","setSelectedAssetForAuction","newAuction","setNewAuction","assetId","assetType","description","startPrice","duration","bidAmount","setBidAmount","notification","setNotification","currentTime","setCurrentTime","Date","auctions","setAuctions","auctionsLoading","setAuctionsLoading","formatPrice","price","isNaN","concat","toLocaleString","useEffect","timer","setInterval","clearInterval","async","auctionsRef","collection","db","q","query","firebaseOrderBy","auctionsData","getDocs","docs","map","doc","_doc$data$endTime","_objectSpread","data","endTime","toDate","now","auctionsToSettle","filter","a","status","length","logger","log","forEach","auction","auctionRef","auctionTaxRate","adminUid","_govSettingsDoc$data","govSettingsDoc","getDoc","_govSettingsDoc$data$","exists","taxSettings","auctionTransactionTaxRate","getClassAdminUid","e","error","winnerExistingItemQuerySnap","highestBidder","originalStoreItemId","winnerInventoryRef","where","runTransaction","auctionDoc","transaction","get","auctionData","sellerItemDoc","sellerItemRef","returnCollection","assetSourceCollection","seller","sellerRef","taxAmount","Math","round","currentBid","sellerProceeds","update","increment","updatedAt","serverTimestamp","adminRef","treasuryRef","set","totalAmount","auctionTaxRevenue","lastUpdated","merge","empty","winnerItemRef","ref","quantity","newWinnerItemRef","itemId","icon","itemIcon","type","purchasedAt","sellerLogRef","timestamp","message","relatedDocId","winnerLogRef","addedAt","refreshUserDocument","refreshData","updateDoc","settleAuction","THREE_DAYS_MS","oldCompletedAuctions","getTime","auctionsRef2","deleteDoc","err","prev","some","old","showNotification","loadAuctions","ongoingAuctions","toLowerCase","includes","myAuctions","myBids","completedAuctions","getTimeLeft","timeDiff","days","floor","hours","minutes","output","trim","arguments","undefined","setTimeout","handleBid","auctionId","userRef","auctionFromState","find","amount","parseInt","Error","currentAuctionData","bidderUserDoc","bidderUserData","previousHighestBidderRef","bidCount","highestBidderName","handleAdminCancelAuction","isAdmin","window","confirm","bidderRef","delete","fetchAllUsers","handleInputChange","value","target","test","handleBidAmountChange","_jsx","AlchanLoading","className","children","durationOptions","i","push","_jsxs","availableItems","item","onClick","placeholder","onChange","_auction$seller","style","marginRight","title","sellerName","substring","inputMode","pattern","disabled","_allUsersData$find","_auction$highestBidde","u","auctionDocSnap","firestoreAuctionData","handleCancelAuction","_auction$seller2","_auction$seller3","_allUsersData$find2","_auction$highestBidde2","onSubmit","preventDefault","parseFloat","durationHours","itemDeducted","itemUpdateResult","success","addDoc","Timestamp","fromDate","createdAt","source","htmlFor","event","selectedId","foundItem","required","label","readOnly","rows"],"ignoreList":[],"sourceRoot":""}