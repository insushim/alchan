{"version":3,"file":"static/js/122.6278a841.chunk.js","mappings":"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","sources":["components/LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/helpContent.js","components/WelcomePopup.js","components/HelpButton.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","components/AlchanLayout.js","utils/avatarSystem.js","components/modals/DonateCouponModal.js","components/Avatar.js","utils/achievementSystem.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","utils/levelSystem.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","components/modals/TransferModal.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (1 )\r\n              const lastUpdated = localStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 60 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    // localStorage    (     )\r\n    localStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/utils/helpContent.js\n//     +    \n\nexport const PAGE_HELP = {\n  '/dashboard/tasks': {\n    title: ' ',\n    icon: '',\n    description: '     !',\n    tips: [\n      '  (/)   ',\n      '   ',\n      '        ',\n    ],\n  },\n  '/my-assets': {\n    title: ' ',\n    icon: '',\n    description: '     .',\n    tips: [\n      '     ',\n      '     ',\n      '     ',\n    ],\n  },\n  '/coupon-goal': {\n    title: ' ',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '     ',\n      '    ',\n    ],\n  },\n  '/my-profile': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '   ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/learning-games/omok': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      ', ,  5   !',\n      '  ',\n    ],\n  },\n  '/learning-games/typing': {\n    title: ' ',\n    icon: '',\n    description: '  !',\n    tips: [\n      '   ',\n      '    ',\n    ],\n  },\n  '/learning-games/science': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '   ',\n      '   !',\n    ],\n  },\n  '/item-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '  \" \" ',\n      '   !',\n    ],\n  },\n  '/my-items': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '      ',\n      '       ',\n    ],\n  },\n  '/personal-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '     ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/banking': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '   ',\n      '    ',\n      '     ',\n    ],\n  },\n  '/stock-trading': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '   ',\n      '  ',\n    ],\n  },\n  '/auction': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '    ',\n      '   ',\n      '   ',\n    ],\n  },\n  '/real-estate': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '    ',\n    ],\n  },\n  '/government': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '  ',\n    ],\n  },\n  '/national-assembly': {\n    title: '',\n    icon: '',\n    description: '  !',\n    tips: [\n      '  /    ',\n      '     ',\n      '   ',\n    ],\n  },\n  '/court': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/police': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '   ',\n      '     ',\n    ],\n  },\n  '/learning-board': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/learning-board/music-request': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      'YouTube      ',\n      '      ',\n    ],\n  },\n};\n\n//     \nexport const WELCOME_GUIDE = {\n  title: '   ! ',\n  subtitle: '    ?',\n  sections: [\n    {\n      icon: '',\n      title: ' ',\n      description: '      .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ' ,  ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: '     .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: ' ,   ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ', ,       .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: '   ?       .',\n    },\n  ],\n};\n\n//    \nexport const getHelpContent = (pathname) => {\n  //   \n  if (PAGE_HELP[pathname]) return PAGE_HELP[pathname];\n\n  //    (: /music-room/xxx)\n  const matchedKey = Object.keys(PAGE_HELP).find(key =>\n    pathname.startsWith(key)\n  );\n  return matchedKey ? PAGE_HELP[matchedKey] : null;\n};\n","// src/components/WelcomePopup.js\n//      \n\nimport React, { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport { WELCOME_GUIDE } from '../utils/helpContent';\n\nconst STORAGE_KEY_NEVER = 'alchan_welcome_never_show';\nconst STORAGE_KEY_TODAY = 'alchan_welcome_closed_date';\n\nfunction shouldShowPopup() {\n  try {\n    // \"  \" \n    if (localStorage.getItem(STORAGE_KEY_NEVER) === 'true') return false;\n\n    // \" \" \n    const closedDate = localStorage.getItem(STORAGE_KEY_TODAY);\n    if (closedDate) {\n      const today = new Date().toISOString().split('T')[0];\n      if (closedDate === today) return false;\n    }\n\n    return true;\n  } catch {\n    return true;\n  }\n}\n\nexport default function WelcomePopup() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (shouldShowPopup()) {\n      const timer = setTimeout(() => setIsVisible(true), 800);\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  if (!isVisible) return null;\n\n  const handleNeverShow = () => {\n    try { localStorage.setItem(STORAGE_KEY_NEVER, 'true'); } catch {}\n    setIsVisible(false);\n  };\n\n  const handleCloseToday = () => {\n    try {\n      const today = new Date().toISOString().split('T')[0];\n      localStorage.setItem(STORAGE_KEY_TODAY, today);\n    } catch {}\n    setIsVisible(false);\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9998] p-4 animate-fadeIn\"\n      onClick={handleCloseToday}\n    >\n      <div\n        className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-lg max-h-[85vh] flex flex-col shadow-[0_0_40px_rgba(0,255,242,0.15)] animate-slideUp\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/*  */}\n        <div className=\"relative px-6 pt-6 pb-4 border-b border-slate-700/50 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"absolute right-4 top-4 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n          <h2 className=\"text-xl font-bold text-white pr-8\">\n            {WELCOME_GUIDE.title}\n          </h2>\n          <p className=\"text-sm text-slate-400 mt-1\">\n            {WELCOME_GUIDE.subtitle}\n          </p>\n        </div>\n\n        {/*   */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3 scrollbar-hide\">\n          {WELCOME_GUIDE.sections.map((section, index) => (\n            <div\n              key={index}\n              className=\"flex items-start gap-3.5 bg-[#0a0a12]/60 rounded-xl px-4 py-3.5 border border-cyan-900/20 hover:border-cyan-500/30 transition-colors\"\n            >\n              <span className=\"text-2xl shrink-0 mt-0.5\">{section.icon}</span>\n              <div>\n                <h4 className=\"text-sm font-bold text-white mb-0.5\">\n                  {section.title}\n                </h4>\n                <p className=\"text-xs text-slate-400 leading-relaxed\">\n                  {section.description}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/*    */}\n        <div className=\"px-6 py-4 border-t border-slate-700/50 space-y-2 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"w-full py-2.5 rounded-xl bg-cyan-500/20 text-cyan-400 text-sm font-bold border border-cyan-500/30 hover:bg-cyan-500/30 transition-colors\"\n          >\n             \n          </button>\n          <button\n            onClick={handleNeverShow}\n            className=\"w-full py-2.5 rounded-xl bg-slate-800/50 text-slate-400 text-sm font-medium border border-slate-700/50 hover:bg-slate-700/50 hover:text-slate-300 transition-colors\"\n          >\n              \n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// src/components/HelpButton.js\n//    +   (  )\n\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { HelpCircle, X } from 'lucide-react';\nimport { getHelpContent } from '../utils/helpContent';\n\nexport default function HelpButton() {\n  const [isOpen, setIsOpen] = useState(false);\n  const location = useLocation();\n  const helpData = getHelpContent(location.pathname);\n\n  //     \n  if (!helpData) return null;\n\n  return (\n    <>\n      {/*    -    */}\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-24 md:bottom-6 right-4 z-40 w-11 h-11 rounded-full bg-indigo-600/90 border border-indigo-400/50 flex items-center justify-center text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 hover:shadow-indigo-500/50 hover:scale-110 transition-all duration-200 backdrop-blur-sm\"\n        title=\"\"\n      >\n        <HelpCircle className=\"w-5 h-5\" />\n      </button>\n\n      {/*   */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4\"\n          onClick={() => setIsOpen(false)}\n        >\n          <div\n            className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-md shadow-[0_0_30px_rgba(0,255,242,0.1)] animate-fadeIn\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/*  */}\n            <div className=\"flex items-center justify-between px-5 py-4 border-b border-slate-700/50\">\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-2xl\">{helpData.icon}</span>\n                <h3 className=\"text-lg font-bold text-white\">{helpData.title}</h3>\n              </div>\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/*  */}\n            <div className=\"px-5 py-4\">\n              <p className=\"text-slate-300 text-sm leading-relaxed mb-4\">\n                {helpData.description}\n              </p>\n\n              {/*   */}\n              {helpData.tips && helpData.tips.length > 0 && (\n                <div className=\"space-y-2.5\">\n                  <h4 className=\"text-xs font-bold text-cyan-400 uppercase tracking-wider\">\n                     \n                  </h4>\n                  {helpData.tips.map((tip, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-start gap-2.5 bg-[#0a0a12]/60 rounded-xl px-3.5 py-2.5 border border-cyan-900/20\"\n                    >\n                      <span className=\"text-cyan-400 text-xs mt-0.5 font-bold shrink-0\">\n                        {index + 1}.\n                      </span>\n                      <p className=\"text-slate-400 text-sm leading-relaxed\">\n                        {tip}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/*   */}\n            <div className=\"px-5 pb-4\">\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-full py-2.5 rounded-xl bg-indigo-500/20 text-indigo-400 text-sm font-bold border border-indigo-500/30 hover:bg-indigo-500/30 transition-colors\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\n//    \r\nconst ClassDataDeletionSection = ({ userClassCode, isAdmin, isSuperAdmin }) => {\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleDeleteClassData = async () => {\r\n    if (!userClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (deleteConfirmText !== \"\") {\r\n      alert(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    //  \r\n    const finalConfirm = window.confirm(\r\n      ` '${userClassCode}'     ?\\n\\n        :\\n-   (role: 'student')\\n-  \\n-  \\n\\n(admin)  .`\r\n    );\r\n\r\n    if (!finalConfirm) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // 1.    (role === 'student' AND classCode === userClassCode)\r\n      const usersRef = firestoreCollection(db, \"users\");\r\n      const studentsQuery = firebaseQuery(\r\n        usersRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode),\r\n        firebaseWhere(\"role\", \"==\", \"student\")\r\n      );\r\n      const studentsSnapshot = await firebaseGetDocs(studentsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${studentsSnapshot.size}`);\r\n\r\n      // 2.   \r\n      const activityLogsRef = firestoreCollection(db, \"activity_logs\");\r\n      const activityLogsQuery = firebaseQuery(\r\n        activityLogsRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n      );\r\n      const activityLogsSnapshot = await firebaseGetDocs(activityLogsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${activityLogsSnapshot.size}`);\r\n\r\n      // 3.    ( userId )\r\n      const studentIds = studentsSnapshot.docs.map(doc => doc.id);\r\n      let transactionsToDelete = [];\r\n\r\n      if (studentIds.length > 0) {\r\n        // Firestore 'in'   10   \r\n        const batches = [];\r\n        for (let i = 0; i < studentIds.length; i += 10) {\r\n          batches.push(studentIds.slice(i, i + 10));\r\n        }\r\n\r\n        for (const batch of batches) {\r\n          const transactionsRef = firestoreCollection(db, \"transactions\");\r\n          const transactionsQuery = firebaseQuery(\r\n            transactionsRef,\r\n            firebaseWhere(\"userId\", \"in\", batch)\r\n          );\r\n          const transactionsSnapshot = await firebaseGetDocs(transactionsQuery);\r\n          transactionsToDelete.push(...transactionsSnapshot.docs);\r\n        }\r\n      }\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${transactionsToDelete.length}`);\r\n\r\n      // 4.    (Firestore   500 )\r\n      const allDocsToDelete = [\r\n        ...studentsSnapshot.docs,\r\n        ...activityLogsSnapshot.docs,\r\n        ...transactionsToDelete,\r\n      ];\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${allDocsToDelete.length}`);\r\n\r\n      //   \r\n      const BATCH_SIZE = 500;\r\n      for (let i = 0; i < allDocsToDelete.length; i += BATCH_SIZE) {\r\n        const batch = writeBatch(db);\r\n        const batchDocs = allDocsToDelete.slice(i, i + BATCH_SIZE);\r\n\r\n        batchDocs.forEach((docSnap) => {\r\n          batch.delete(docSnap.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n        logger.log(`[ClassDataDeletion]  ${Math.floor(i / BATCH_SIZE) + 1}  `);\r\n      }\r\n\r\n      alert(\r\n        `   !\\n\\n :\\n-  : ${studentsSnapshot.size}\\n-  : ${activityLogsSnapshot.size}\\n-  : ${transactionsToDelete.length}`\r\n      );\r\n\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // \r\n      setDeleteConfirmText(\"\");\r\n      setShowConfirmation(false);\r\n    } catch (error) {\r\n      logger.error(\"[ClassDataDeletion]   :\", error);\r\n      alert(` : ${error.message}\\n\\n    .  .`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"section-card mt-6 border-2 border-red-500/50 bg-red-900/10\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <span className=\"text-2xl\"></span>\r\n        <h3 className=\"text-xl font-bold text-red-400\"> :   </h3>\r\n      </div>\r\n\r\n      <div className=\"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30\">\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n          <strong>    !</strong>\r\n        </p>\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n                .\r\n        </p>\r\n        <p className=\"text-sm text-gray-300 mb-2\"> :</p>\r\n        <ul className=\"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1\">\r\n          <li>  (role: 'student')</li>\r\n          <li>  (activity_logs)</li>\r\n          <li>  (transactions)</li>\r\n        </ul>\r\n        <p className=\"text-sm text-green-300 mt-2\">\r\n           (admin)  .\r\n        </p>\r\n        <p className=\"text-sm text-green-300\">\r\n           , ,    .\r\n        </p>\r\n      </div>\r\n\r\n      {!showConfirmation ? (\r\n        <button\r\n          onClick={() => setShowConfirmation(true)}\r\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n             \r\n        </button>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                \"<strong className=\"text-red-400\"></strong>\"  :\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              disabled={isDeleting}\r\n              className=\"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleDeleteClassData}\r\n              disabled={isDeleting || deleteConfirmText !== \"\"}\r\n              className={`px-6 py-2 rounded-lg font-medium transition-colors ${\r\n                deleteConfirmText === \"\" && !isDeleting\r\n                  ? \"bg-red-600 hover:bg-red-700 text-white\"\r\n                  : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\r\n              }`}\r\n            >\r\n              {isDeleting ? \" ...\" : \"  \"}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowConfirmation(false);\r\n                setDeleteConfirmText(\"\");\r\n              }}\r\n              disabled={isDeleting}\r\n              className=\"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  //    \r\n  const [jobTaskSubTab, setJobTaskSubTab] = useState(\"job\");\r\n  const [studentMemberSubTab, setStudentMemberSubTab] = useState(\"student\");\r\n  const [financeMarketSubTab, setFinanceMarketSubTab] = useState(\"financial\");\r\n  const [systemSubTab, setSystemSubTab] = useState(\"database\");\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //   ID     ( )\r\n  useEffect(() => {\r\n    const mapping = {\r\n      taskManagement: ['jobAndTask', () => setJobTaskSubTab('task')],\r\n      jobSettings: ['jobAndTask', () => setJobTaskSubTab('job')],\r\n      studentManagement: ['studentAndMember', () => setStudentMemberSubTab('student')],\r\n      salarySettings: ['studentAndMember', () => setStudentMemberSubTab('salary')],\r\n      memberManagement: ['studentAndMember', () => setStudentMemberSubTab('member')],\r\n      financialProducts: ['financeAndMarket', () => setFinanceMarketSubTab('financial')],\r\n      parkingAccount: ['financeAndMarket', () => setFinanceMarketSubTab('parking')],\r\n      marketControl: ['financeAndMarket', () => setFinanceMarketSubTab('market')],\r\n      databaseManagement: ['system', () => setSystemSubTab('database')],\r\n      systemManagement: ['system', () => setSystemSubTab('system')],\r\n    };\r\n    const mapped = mapping[adminSelectedMenu];\r\n    if (mapped) {\r\n      setAdminSelectedMenu(mapped[0]);\r\n      mapped[1]();\r\n    }\r\n  }, [adminSelectedMenu, setAdminSelectedMenu]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'student') {\r\n      loadStudents();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'member') {\r\n      loadClassMembers();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'financeAndMarket' && financeMarketSubTab === 'market') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, financeMarketSubTab, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobAndTask\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobAndTask\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentAndMember\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"studentAndMember\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financeAndMarket\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financeAndMarket\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"system\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"system\")}\r\n          >\r\n             \r\n          </button>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"jobAndTask\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'job' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('job')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'task' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('task')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"task\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"job\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"studentAndMember\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'student' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('student')}\r\n            >\r\n              / \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'salary' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('salary')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'member' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('member')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"student\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'financial' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('financial')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'parking' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('parking')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'market' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('market')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"financial\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"market\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"parking\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"member\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"salary\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* =====    ===== */}\r\n        {adminSelectedMenu === \"system\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'database' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setSystemSubTab('database')}\r\n            >\r\n              \r\n            </button>\r\n            {isSuperAdmin && (\r\n              <button\r\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'system' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n                onClick={() => setSystemSubTab('system')}\r\n              >\r\n                 \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/*   */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"database\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n\r\n            {/*    */}\r\n            <div className=\"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30\">\r\n              <h3 className=\"text-lg font-bold text-violet-300 mb-3\">  </h3>\r\n              <p className=\"text-sm text-gray-400 mb-4\">    .</p>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <a\r\n                  href=\"/consent-form\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    ( )\r\n                </a>\r\n                <a\r\n                  href=\"/privacy\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                   \r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  :    */}\r\n            <ClassDataDeletionSection\r\n              userClassCode={userClassCode}\r\n              isAdmin={isAdmin}\r\n              isSuperAdmin={isSuperAdmin}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"system\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    gcTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    gcTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    gcTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    gcTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    logger.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\" className=\"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm\">  </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\nimport { logger } from '../../utils/logger';\r\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \"  \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"  \" : \"   \"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // isAdmin   \r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n\r\n        // eslint-disable-next-line react-hooks/rules-of-hooks\r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      logger.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      logger.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    logger.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      logger.log('[MyItems]   inventory   :');\r\n      logger.log(':', allInventoryDocs.size);\r\n      logger.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      logger.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      logger.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          logger.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          logger.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      logger.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            logger.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            logger.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            logger.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            logger.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          logger.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          logger.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          logger.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          logger.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          logger.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      logger.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      logger.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        logger.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        logger.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          logger.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          logger.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          logger.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          logger.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          logger.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      logger.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                logger.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { DailyRewardBanner, getStreakInfo } from './DailyReward';\r\nimport WelcomePopup from './WelcomePopup';\r\nimport HelpButton from './HelpButton';\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport Login from '../pages/auth/Login';\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(() => {\r\n    try {\r\n      const dismissed = localStorage.getItem('alchan_update_dismissed');\r\n      if (!dismissed) return false;\r\n      // 24    \r\n      return Date.now() - parseInt(dismissed) < 24 * 60 * 60 * 1000;\r\n    } catch { return false; }\r\n  });\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => {\r\n            setShowUpdateDismissed(true);\r\n            try { localStorage.setItem('alchan_update_dismissed', Date.now().toString()); } catch {}\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      <HelpButton />\r\n\r\n      {/*     */}\r\n      <WelcomePopup />\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","onClick","e","stopPropagation","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","disabled","required","calculateValue","style","cursor","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","width","borderCollapse","fontSize","borderRadius","overflow","border","thead","backgroundColor","th","padding","textAlign","fontWeight","color","borderBottom","position","top","zIndex","td","tr","transition","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","marginBottom","processDonationData","log","studentsCount","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","concat","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","prev","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","isAdmin","isSuperAdmin","userRole","renderMenuSection","categoryKey","items","childItems","child","isSubGroup","size","charAt","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","formatKoreanNumber","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","config","levelInfo","useMemo","netAssets","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","document","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","Trash2","maxLength","autoFocus","trimmed","trim","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","Date","now","handleBeforeInstall","handleDismiss","toString","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","badge","vibrate","PAGE_HELP","description","tips","WELCOME_GUIDE","subtitle","sections","STORAGE_KEY_NEVER","STORAGE_KEY_TODAY","WelcomePopup","isVisible","setIsVisible","closedDate","toISOString","split","_unused","shouldShowPopup","timer","clearTimeout","handleCloseToday","today","_unused3","section","handleNeverShow","_unused2","HelpButton","setIsOpen","helpData","matchedKey","getHelpContent","tip","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","isCompleted","maxClicks","clicks","taskItemStyle","boxShadow","taskInfoStyle","gap","taskNameStyle","lineHeight","taskActionsStyle","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","Math","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","transform","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","body","bottom","content","left","marginLeft","borderWidth","borderStyle","borderColor","animation","textShadow","perspective","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","letterSpacing","tasks","TaskItem","borderTop","CommonTaskList","gridTemplateColumns","createOptimizedFunction","functionName","fn","httpsCallable","functions","success","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","JSON","stringify","timestamp","warn","maxAge","backup","parsed","parse","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","checked","toLocaleTimeString","marginTop","margin","health","totalUsers","stats","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","toDate","seconds","errorLogs","slice","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","ClassDataDeletionSection","deleteConfirmText","setDeleteConfirmText","isDeleting","setIsDeleting","showConfirmation","setShowConfirmation","usersRef","firestoreCollection","studentsQuery","firebaseQuery","firebaseWhere","studentsSnapshot","firebaseGetDocs","activityLogsRef","activityLogsQuery","activityLogsSnapshot","studentIds","docs","transactionsToDelete","batches","i","batch","transactionsRef","transactionsQuery","transactionsSnapshot","allDocsToDelete","BATCH_SIZE","writeBatch","docSnap","delete","commit","floor","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","savingProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","jobTaskSubTab","setJobTaskSubTab","studentMemberSubTab","setStudentMemberSubTab","financeMarketSubTab","setFinanceMarketSubTab","systemSubTab","setSystemSubTab","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","useOptimizedStudents","useQuery","queryKey","staleTime","gcTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","parseFloat","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","queryRef","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","member","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","stock","stockRef","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","mapped","taskManagement","jobSettings","studentManagement","memberManagement","financialProducts","parkingAccount","marketControl","databaseManagement","formatLastSalaryDate","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","includes","handleToggleStudentSelection","Boolean","join","toLocaleDateString","handleEditStudentJobs","step","products","product","AdminDatabase","href","rel","SystemMonitoring","handleToggleJobSelection","prevStudents","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","EmptyState","Briefcase","ActionButton","variant","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","substr","setupPolling","pollData","jobsQuery","query","where","limit","loadedJobs","getDocs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","toDateString","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","findIndex","t","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","rewardAmount","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","cached","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","storeItems","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","PageContainer","LoadingState","ListTodo","userNickname","RotateCcw","JobList","action","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","priceIncreasePercentage","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialStock","available","initialQuantities","checkMobile","getButtonText","currentUserCash","quantity","totalPrice","canOpenAdminPanel","AdminItemPage","editingItemFromStore","onAddItem","newItemData","onUpdateItem","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","values","recentlyUsedItems","setRecentlyUsedItems","saved","prevItems","itemsChanged","updatedItems","_itemData$itemDetails","itemData","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","quantityToUse","remainingToUse","sortedDocs","amountToUse","classmate","c","recipientName","originalUserItems","","","","","UID","inventoryRef","collection","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","updateDoc","assign","catch","React","PersonalShop","lazy","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","handleDailyRewardClaim","increment","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","DailyRewardBanner","onClaim","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","saveAvatarConfig","dispatchEvent","CustomEvent","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","darkenColor","hex","percent","r","g","f","m","o","noseColor","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","condition","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","stored","normalizeType","cache","getCacheKey","getFromCache","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","q","snapshot","logs","_data$timestamp","normalizedFilterType","hasMore","paginatedLogs","newLastDoc","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","transactions","userIdsCount","allTransactions","_data$timestamp3","getTransactionsData","tx","metadata","convertTransactionsToLogs","handleLoadMore","getActivityTypeColor","typeStr","toLowerCase","formatDate","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","handleRefresh","keysToDelete","clearClassCache","info","typeCounts","typeExamples","count","filters","_log$type","_log$description","desc","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","filterName","filterFunc","matchedLogs","matchedTypes","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","activity","reason","itemName","couponAmount","PageHeader","backButton","_ref1","primary","secondary","outline","danger","ghost","indigo","sm","md","lg","Loader2","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","iconCollection","styles","container","maxWidth","fontFamily","card","header","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","input","boxSizing","textarea","minHeight","resize","gridTwo","iconSelector","selectedIcon","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","handleChange","isEditing","maxHeight","overflowY","handleIconSelect","onMouseEnter","onMouseLeave","number","unit","num","isNegative","units","resultParts","remaining","abs","quotient","maximumFractionDigits","formatKoreanCurrency","STREAK_REWARDS","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","showPopup","setShowPopup","handleClaim","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","StreakDisplay","currentStreak","StreakRewardInfo","ItemContext","createContext","context","useContext","marketListings","marketOffers","updateUserItemQuantity","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","isAuthAdmin","deductCash","addCash","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","newUserItems","tempId","tempNewItem","token","getIdToken","functionUrl","response","fetch","method","headers","ok","errorText","status","json","itemToPurchase","newUserItem","purchasedAt","originalStock","originalPrice","existingIndex","updated","restocked","newStock","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","addDoc","logId"],"ignoreList":[],"sourceRoot":""}