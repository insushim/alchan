{"version":3,"file":"static/js/512.105cd192.chunk.js","mappings":"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","sources":["pages/government/SubmitComplaint.js","pages/government/ComplaintStatus.js","pages/government/TrialRoom.js","pages/government/Court.js"],"sourcesContent":["// src/SubmitComplaint.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// users:    (: [{id: 'user1', name: ''}, ...])\r\n// currentUserId:    ID\r\n// onSubmitComplaint:  (Court.js) handleAddComplaint \r\n// isAdmin:       \r\nconst SubmitComplaint = ({\r\n  onSubmitComplaint,\r\n  users = [],\r\n  currentUserId,\r\n  isAdmin = false,\r\n}) => {\r\n  const [complainantName, setComplainantName] = useState(\"\"); //  ,   \r\n  const [defendantId, setDefendantId] = useState(\"\"); //   ID \r\n  const [reason, setReason] = useState(\"\");\r\n  const [desiredResolution, setDesiredResolution] = useState(\"\");\r\n\r\n  //     \r\n  const [selectedReasonType, setSelectedReasonType] = useState(\"custom\"); // 'custom', 'predefined', 'law'\r\n  const [predefinedReasons, setPredefinedReasons] = useState([]);\r\n  const [selectedPredefinedReason, setSelectedPredefinedReason] = useState(\"\");\r\n  const [approvedLaws, setApprovedLaws] = useState([]);\r\n  const [selectedLaw, setSelectedLaw] = useState(\"\");\r\n\r\n  //      \r\n  const [newReason, setNewReason] = useState(\"\");\r\n  const [showAddReasonModal, setShowAddReasonModal] = useState(false);\r\n\r\n  //    (  ,   )\r\n  useEffect(() => {\r\n    //      \r\n    const savedReasons = localStorage.getItem(\"predefinedComplaintReasons\");\r\n    if (savedReasons) {\r\n      setPredefinedReasons(JSON.parse(savedReasons));\r\n    } else {\r\n      //   \r\n      const initialReasons = [\r\n        \"   \",\r\n        \" \",\r\n        \" \",\r\n        \" \",\r\n        \" \",\r\n      ];\r\n      setPredefinedReasons(initialReasons);\r\n      localStorage.setItem(\r\n        \"predefinedComplaintReasons\",\r\n        JSON.stringify(initialReasons)\r\n      );\r\n    }\r\n\r\n    //     \r\n    const savedLaws = localStorage.getItem(\"nationalAssemblyLaws\");\r\n    if (savedLaws) {\r\n      const parsedLaws = JSON.parse(savedLaws);\r\n      //    (approved, veto_overridden, final_approved )\r\n      const lawsFiltered = parsedLaws.filter(\r\n        (law) =>\r\n          law.status === \"approved\" ||\r\n          law.status === \"veto_overridden\" ||\r\n          law.finalStatus === \"final_approved\"\r\n      );\r\n      setApprovedLaws(lawsFiltered);\r\n    }\r\n  }, []);\r\n\r\n  //     \r\n  useEffect(() => {\r\n    if (predefinedReasons.length > 0) {\r\n      localStorage.setItem(\r\n        \"predefinedComplaintReasons\",\r\n        JSON.stringify(predefinedReasons)\r\n      );\r\n    }\r\n  }, [predefinedReasons]);\r\n\r\n  //     \r\n  const handleAddPredefinedReason = () => {\r\n    if (!newReason.trim()) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const updatedReasons = [...predefinedReasons, newReason.trim()];\r\n    setPredefinedReasons(updatedReasons);\r\n    setNewReason(\"\");\r\n    setShowAddReasonModal(false);\r\n  };\r\n\r\n  //   \r\n  const handleDeleteReason = (index) => {\r\n    if (window.confirm(\"   ?\")) {\r\n      const updatedReasons = [...predefinedReasons];\r\n      updatedReasons.splice(index, 1);\r\n      setPredefinedReasons(updatedReasons);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handleReasonTypeChange = (type) => {\r\n    setSelectedReasonType(type);\r\n\r\n    //         \r\n    if (type === \"custom\") {\r\n      setReason(\"\"); //      \r\n    } else if (type === \"predefined\") {\r\n      setSelectedPredefinedReason(\"\");\r\n      setReason(\"\");\r\n    } else if (type === \"law\") {\r\n      setSelectedLaw(\"\");\r\n      setReason(\"\");\r\n    }\r\n  };\r\n\r\n  //   (    )   \r\n  useEffect(() => {\r\n    if (selectedReasonType === \"predefined\" && selectedPredefinedReason) {\r\n      setReason(selectedPredefinedReason);\r\n    } else if (selectedReasonType === \"law\" && selectedLaw) {\r\n      const selectedLawObj = approvedLaws.find(\r\n        (law) => law.id === parseInt(selectedLaw)\r\n      );\r\n      if (selectedLawObj) {\r\n        setReason(\r\n          ` : ${selectedLawObj.title} - ${selectedLawObj.description}`\r\n        );\r\n      }\r\n    }\r\n  }, [selectedPredefinedReason, selectedLaw, approvedLaws, selectedReasonType]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!defendantId) {\r\n      alert(\" .\");\r\n      return;\r\n    }\r\n    if (!reason.trim()) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    onSubmitComplaint({\r\n      complainantName, //   (   )\r\n      defendantId, //   ID\r\n      reason,\r\n      desiredResolution,\r\n      //      \r\n      lawViolation:\r\n        selectedReasonType === \"law\"\r\n          ? {\r\n              lawId: parseInt(selectedLaw),\r\n              lawTitle:\r\n                approvedLaws.find((law) => law.id === parseInt(selectedLaw))\r\n                  ?.title || \"\",\r\n            }\r\n          : null,\r\n    });\r\n    //  \r\n    setDefendantId(\"\");\r\n    setReason(\"\");\r\n    setDesiredResolution(\"\");\r\n    setSelectedReasonType(\"custom\");\r\n    setSelectedPredefinedReason(\"\");\r\n    setSelectedLaw(\"\");\r\n  };\r\n\r\n  //    (  )\r\n  const defendantOptions = users\r\n    .filter((user) => user.id !== currentUserId) //  \r\n    .map((user) => (\r\n      <option key={user.id} value={user.id}>\r\n        {user.name} {/*  ID  : {user.name} ({user.id}) */}\r\n      </option>\r\n    ));\r\n\r\n  return (\r\n    <div className=\"complaint-submission-container\">\r\n      <h2 className=\"section-title\"> </h2>\r\n\r\n      <form onSubmit={handleSubmit} className=\"submit-complaint-form\">\r\n        {/*    */}\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"defendantSelect\" className=\"form-label\">\r\n             \r\n          </label>\r\n          <select\r\n            id=\"defendantSelect\"\r\n            className=\"form-select\"\r\n            value={defendantId}\r\n            onChange={(e) => setDefendantId(e.target.value)}\r\n            required\r\n          >\r\n            <option value=\"\">--   --</option>\r\n            {defendantOptions}\r\n          </select>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">   </label>\r\n          <div className=\"reason-type-selection\">\r\n            <div className=\"reason-type-option\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"reasonTypeCustom\"\r\n                name=\"reasonType\"\r\n                value=\"custom\"\r\n                checked={selectedReasonType === \"custom\"}\r\n                onChange={() => handleReasonTypeChange(\"custom\")}\r\n              />\r\n              <label htmlFor=\"reasonTypeCustom\"> </label>\r\n            </div>\r\n\r\n            <div className=\"reason-type-option\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"reasonTypePredefined\"\r\n                name=\"reasonType\"\r\n                value=\"predefined\"\r\n                checked={selectedReasonType === \"predefined\"}\r\n                onChange={() => handleReasonTypeChange(\"predefined\")}\r\n              />\r\n              <label htmlFor=\"reasonTypePredefined\">  </label>\r\n            </div>\r\n\r\n            <div className=\"reason-type-option\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"reasonTypeLaw\"\r\n                name=\"reasonType\"\r\n                value=\"law\"\r\n                checked={selectedReasonType === \"law\"}\r\n                onChange={() => handleReasonTypeChange(\"law\")}\r\n              />\r\n              <label htmlFor=\"reasonTypeLaw\"> </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*      / UI */}\r\n        {selectedReasonType === \"custom\" && (\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"reason\" className=\"form-label\">\r\n               \r\n            </label>\r\n            <textarea\r\n              id=\"reason\"\r\n              className=\"form-textarea\"\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              placeholder=\"   \"\r\n              required\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {selectedReasonType === \"predefined\" && (\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"predefinedReason\" className=\"form-label\">\r\n                \r\n            </label>\r\n            <div className=\"predefined-reason-container\">\r\n              <select\r\n                id=\"predefinedReason\"\r\n                className=\"form-select\"\r\n                value={selectedPredefinedReason}\r\n                onChange={(e) => setSelectedPredefinedReason(e.target.value)}\r\n                required\r\n              >\r\n                <option value=\"\">--    --</option>\r\n                {predefinedReasons.map((reason, index) => (\r\n                  <option key={index} value={reason}>\r\n                    {reason}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n\r\n              {/*      */}\r\n              {isAdmin && (\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"add-reason-button\"\r\n                  onClick={() => setShowAddReasonModal(true)}\r\n                >\r\n                  +   \r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/*     */}\r\n            {selectedPredefinedReason && (\r\n              <div className=\"selected-reason-display\">\r\n                <p>  : {selectedPredefinedReason}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {selectedReasonType === \"law\" && (\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"lawViolation\" className=\"form-label\">\r\n                \r\n            </label>\r\n            <select\r\n              id=\"lawViolation\"\r\n              className=\"form-select\"\r\n              value={selectedLaw}\r\n              onChange={(e) => setSelectedLaw(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">--    --</option>\r\n              {approvedLaws.map((law) => (\r\n                <option key={law.id} value={law.id}>\r\n                  {law.title} (: {law.fine})\r\n                </option>\r\n              ))}\r\n            </select>\r\n\r\n            {/*     */}\r\n            {selectedLaw && (\r\n              <div className=\"selected-law-display\">\r\n                {approvedLaws.find(\r\n                  (law) => law.id === parseInt(selectedLaw)\r\n                ) && (\r\n                  <>\r\n                    <p>\r\n                      <strong> :</strong>{\" \"}\r\n                      {\r\n                        approvedLaws.find(\r\n                          (law) => law.id === parseInt(selectedLaw)\r\n                        ).purpose\r\n                      }\r\n                    </p>\r\n                    <p>\r\n                      <strong> :</strong>{\" \"}\r\n                      {\r\n                        approvedLaws.find(\r\n                          (law) => law.id === parseInt(selectedLaw)\r\n                        ).description\r\n                      }\r\n                    </p>\r\n                    <p>\r\n                      <strong>:</strong>{\" \"}\r\n                      {\r\n                        approvedLaws.find(\r\n                          (law) => law.id === parseInt(selectedLaw)\r\n                        ).fine\r\n                      }\r\n                    </p>\r\n                  </>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/*   */}\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"desiredResolution\" className=\"form-label\">\r\n             \r\n          </label>\r\n          <textarea\r\n            id=\"desiredResolution\"\r\n            className=\"form-textarea\"\r\n            value={desiredResolution}\r\n            onChange={(e) => setDesiredResolution(e.target.value)}\r\n            placeholder=\"    ()\"\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"submit-button\">\r\n           \r\n        </button>\r\n      </form>\r\n\r\n      {/*      */}\r\n      {showAddReasonModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-container small\">\r\n            <div className=\"modal-header\">\r\n              <h3 className=\"modal-title\">   </h3>\r\n            </div>\r\n\r\n            <div className=\"modal-content\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"newReason\" className=\"form-label\">\r\n                   \r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"newReason\"\r\n                  className=\"form-input\"\r\n                  value={newReason}\r\n                  onChange={(e) => setNewReason(e.target.value)}\r\n                  placeholder=\"   \"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"modal-button cancel\"\r\n                onClick={() => {\r\n                  setShowAddReasonModal(false);\r\n                  setNewReason(\"\");\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"modal-button submit\"\r\n                onClick={handleAddPredefinedReason}\r\n                disabled={!newReason.trim()}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*      */}\r\n      {isAdmin &&\r\n        selectedReasonType === \"predefined\" &&\r\n        predefinedReasons.length > 0 && (\r\n          <div className=\"admin-reasons-management\">\r\n            <h3>  </h3>\r\n            <div className=\"reasons-list\">\r\n              {predefinedReasons.map((reason, index) => (\r\n                <div key={index} className=\"reason-item\">\r\n                  <span className=\"reason-text\">{reason}</span>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"delete-reason-button\"\r\n                    onClick={() => handleDeleteReason(index)}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubmitComplaint;\r\n","// src/ComplaintStatus.js ( -     )\r\nimport React from \"react\";\r\n\r\n//  props  (complaints, users, isAdmin, currentUserId, onVote, onStartTrial, onOpenJudgment )\r\nconst ComplaintStatus = ({\r\n  complaints,\r\n  users,\r\n  isAdmin,\r\n  currentUserId,\r\n  onVote,\r\n  onStartTrial,\r\n  onOpenJudgment,\r\n  onEditComplaint, //   \r\n  onDeleteComplaint, //   \r\n  onIndictComplaint, //   ()\r\n  onDismissComplaint, //   ()\r\n}) => {\r\n  const getUserNameById = (userId) =>\r\n    users.find((u) => u.id === userId)?.name || \"  \";\r\n\r\n  //      .\r\n  // const pending = complaints.filter(c => c.status === 'pending');\r\n  // const indicted = complaints.filter(c => c.status === 'indicted');\r\n  // ... etc\r\n\r\n  return (\r\n    <div className=\"complaint-list-container\">\r\n      {/* complaints  map     */}\r\n      <ul className=\"complaint-list\">\r\n        {\" \"}\r\n        {/* ul  div  grid    */}\r\n        {complaints.length === 0 ? (\r\n          <li className=\"empty-state\">   .</li>\r\n        ) : (\r\n          complaints.map((complaint) => {\r\n            const likedByCount = complaint.likedBy?.length || 0;\r\n            const dislikedByCount = complaint.dislikedBy?.length || 0;\r\n            const didCurrentUserLike =\r\n              complaint.likedBy?.includes(currentUserId);\r\n            const didCurrentUserDislike =\r\n              complaint.dislikedBy?.includes(currentUserId);\r\n\r\n            //    \r\n            let cardClass = \"complaint-card\";\r\n            if (complaint.status === \"indicted\") cardClass += \" indicted-card\";\r\n            else if (complaint.status === \"on_trial\")\r\n              cardClass += \" on-trial-card\";\r\n            else if (complaint.status === \"dismissed\")\r\n              cardClass += \" dismissed-card\";\r\n            // 'pending'       \r\n\r\n            return (\r\n              <li key={complaint.id} className={cardClass}>\r\n                {\" \"}\r\n                {/* li  div    */}\r\n                {/*  : , , * */}\r\n                <div className=\"complaint-card-header\">\r\n                  <span className=\"case-id\">ID: {complaint.id.slice(-6)}</span>\r\n                  {/*  *   */}\r\n                  <span className=\"parties-display\">\r\n                    {getUserNameById(complaint.complainantId)} *{\" \"}\r\n                    {getUserNameById(complaint.defendantId)}\r\n                  </span>\r\n                  {/*    */}\r\n                  <span className={`case-status status-${complaint.status}`}>\r\n                    {complaint.status === \"pending\"\r\n                      ? \"\"\r\n                      : complaint.status === \"indicted\"\r\n                      ? \"\"\r\n                      : complaint.status === \"on_trial\"\r\n                      ? \"\"\r\n                      : complaint.status === \"dismissed\"\r\n                      ? \"/\"\r\n                      : complaint.status === \"resolved\"\r\n                      ? \"\"\r\n                      : complaint.status}\r\n                  </span>\r\n                </div>\r\n                {/*  :  ,   */}\r\n                <div className=\"complaint-card-content\">\r\n                  <h4> </h4>\r\n                  <p>{complaint.reason}</p>\r\n                  {complaint.desiredResolution && (\r\n                    <>\r\n                      <h4> </h4>\r\n                      <p>{complaint.desiredResolution}</p>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                {/* /  (pending  ,    ) */}\r\n                {complaint.status === \"pending\" && (\r\n                  <div className=\"complaint-voting\">\r\n                    <button\r\n                      className={`vote-button like-button ${\r\n                        didCurrentUserLike ? \"voted\" : \"\"\r\n                      }`}\r\n                      onClick={() => onVote(complaint.id, \"like\")}\r\n                      disabled={!currentUserId}\r\n                      title=\"\"\r\n                    >\r\n                       <span className=\"vote-count\">{likedByCount}</span>\r\n                    </button>\r\n                    <button\r\n                      className={`vote-button dislike-button ${\r\n                        didCurrentUserDislike ? \"voted\" : \"\"\r\n                      }`}\r\n                      onClick={() => onVote(complaint.id, \"dislike\")}\r\n                      disabled={!currentUserId}\r\n                      title=\"\"\r\n                    >\r\n                       <span className=\"vote-count\">{dislikedByCount}</span>\r\n                    </button>\r\n                  </div>\r\n                )}\r\n                {/* /   ( ) */}\r\n                {isAdmin && (\r\n                  <div className=\"complaint-card-actions\">\r\n                    {/*    */}\r\n                    {complaint.status === \"pending\" && (\r\n                      <>\r\n                        <button\r\n                          onClick={() => onIndictComplaint(complaint.id)}\r\n                          className=\"indict-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                        <button\r\n                          onClick={() => onDismissComplaint(complaint.id)}\r\n                          className=\"dismiss-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                        <button\r\n                          onClick={() => onEditComplaint(complaint)}\r\n                          className=\"edit-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                        <button\r\n                          onClick={() => onDeleteComplaint(complaint.id)}\r\n                          className=\"delete-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </>\r\n                    )}\r\n                    {complaint.status === \"indicted\" && (\r\n                      <>\r\n                        {/* \"\"   */}\r\n                        <button\r\n                          onClick={() => onStartTrial(complaint.id)}\r\n                          className=\"start-trial-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                        <button\r\n                          onClick={() => onEditComplaint(complaint)}\r\n                          className=\"edit-button\"\r\n                        >\r\n                           \r\n                        </button>{\" \"}\r\n                        {/*     ? */}\r\n                        <button\r\n                          onClick={() => onDeleteComplaint(complaint.id)}\r\n                          className=\"delete-button\"\r\n                        >\r\n                           /\r\n                        </button>{\" \"}\r\n                        {/*  */}\r\n                      </>\r\n                    )}\r\n                    {complaint.status === \"on_trial\" && (\r\n                      <>\r\n                        {/* \" \"   */}\r\n                        <button\r\n                          onClick={() => onOpenJudgment(complaint)}\r\n                          className=\"write-judgment-button\"\r\n                        >\r\n                           \r\n                        </button>\r\n                        {/*    /    */}\r\n                      </>\r\n                    )}\r\n                    {/* /    (:  ) */}\r\n                    {(complaint.status === \"dismissed\" ||\r\n                      complaint.status === \"resolved\") && (\r\n                      <button\r\n                        onClick={() => onDeleteComplaint(complaint.id)}\r\n                        className=\"delete-button\"\r\n                      >\r\n                         \r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </li>\r\n            );\r\n          })\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComplaintStatus;\r\n","import { processFineTransaction, transferCash } from \"../../firebase\";\r\n// src/TrialRoom.js\r\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport {\r\n  doc,\r\n  updateDoc,\r\n  serverTimestamp,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  collection,\r\n  addDoc,\r\n  query,\r\n  orderBy,\r\n  limit,\r\n  deleteDoc,\r\n  writeBatch,\r\n  getDocs,\r\n  getDoc,\r\n  setDoc,\r\n} from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { db, storage } from \"../../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../../hooks/usePolling\";\r\nimport \"./TrialRoom.css\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//   \r\nconst Avatar = ({ role, name, isActive, userId, onAvatarClick, showSpeechBubble, canGrantPermission }) => {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [isWalking, setIsWalking] = useState(false);\r\n  \r\n  const avatarStyles = {\r\n    judge: { bg: \"#6f42c1\", icon: \"\", title: \"\" },\r\n    prosecutor: { bg: \"#dc3545\", icon: \"\", title: \"\" },\r\n    lawyer: { bg: \"#0d6efd\", icon: \"\", title: \"\" },\r\n    complainant: { bg: \"#198754\", icon: \"\", title: \"\" },\r\n    defendant: { bg: \"#fd7e14\", icon: \"\", title: \"\" },\r\n    jury: { bg: \"#0dcaf0\", icon: \"\", title: \"\" },\r\n    spectator: { bg: \"#6c757d\", icon: \"\", title: \"\" },\r\n  };\r\n\r\n  const style = avatarStyles[role] || avatarStyles.spectator;\r\n\r\n  //    ()\r\n  useEffect(() => {\r\n    if (isActive) {\r\n      const interval = setInterval(() => {\r\n        setIsWalking(true);\r\n        setPosition({\r\n          x: Math.random() * 10 - 5,\r\n          y: Math.random() * 10 - 5\r\n        });\r\n        setTimeout(() => setIsWalking(false), 500);\r\n      }, 5000);\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isActive]);\r\n\r\n  const handleClick = () => {\r\n    if (onAvatarClick) {\r\n      onAvatarClick(userId);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={`avatar ${isActive ? 'active' : ''} ${isWalking ? 'walking' : ''}`}\r\n      onClick={handleClick}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      data-role={role}\r\n      style={{\r\n        transform: `translate(${position.x}px, ${position.y}px)`,\r\n        cursor: canGrantPermission ? 'pointer' : 'default'\r\n      }}\r\n    >\r\n      {/*  -      */}\r\n      {(isHovered || showSpeechBubble) && (\r\n        <div className={`speech-bubble ${showSpeechBubble ? 'show' : ''}`}>\r\n          {showSpeechBubble ? \"  \" : canGrantPermission && userId ? \"   \" : name}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"avatar-circle\" style={{ backgroundColor: style.bg }}>\r\n        <span className=\"avatar-icon\">{style.icon}</span>\r\n      </div>\r\n      <div className=\"avatar-name\">{name || \" \"}</div>\r\n      <div className=\"avatar-role\">{style.title}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TrialRoom = ({ roomId, classCode, currentUser, users, onClose }) => {\r\n  const [roomData, setRoomData] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [userRole, setUserRole] = useState(\"spectator\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [evidence, setEvidence] = useState([]);\r\n  const [uploadingEvidence, setUploadingEvidence] = useState(false);\r\n  const [isSilenced, setIsSilenced] = useState(false); //     \r\n  const [votingData, setVotingData] = useState(null);\r\n  const [myVote, setMyVote] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  //   \r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  //   (onSnapshot  polling)   \r\n  const fetchRoomSnapshot = useCallback(async () => {\r\n    if (!roomId || !classCode) return null;\r\n    const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n    const docSnap = await getDoc(roomRef);\r\n    return docSnap.exists() ? { id: docSnap.id, ...docSnap.data() } : null;\r\n  }, [roomId, classCode]);\r\n\r\n  const { data: polledRoom, loading: roomPolling } = usePolling(fetchRoomSnapshot, {\r\n    interval: 10 * 60 * 1000, //  [] 10   (Firestore  )\r\n    enabled: !!roomId && !!classCode,\r\n    deps: [roomId, classCode],\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (roomPolling) return;\r\n    if (!polledRoom) {\r\n      setRoomData(null);\r\n      setVotingData(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setRoomData(polledRoom);\r\n\r\n    const voting = polledRoom.voting || null;\r\n    setVotingData(voting);\r\n    if (!voting || !voting.isActive) {\r\n      setMyVote(null);\r\n    }\r\n\r\n    let currentRole = \"spectator\";\r\n    if (polledRoom.judgeId === currentUser.id) {\r\n      currentRole = \"judge\";\r\n    } else if (polledRoom.complainantId === currentUser.id) {\r\n      currentRole = \"complainant\";\r\n    } else if (polledRoom.defendantId === currentUser.id) {\r\n      currentRole = \"defendant\";\r\n    } else if (polledRoom.prosecutorId === currentUser.id) {\r\n      currentRole = \"prosecutor\";\r\n    } else if (polledRoom.lawyerId === currentUser.id) {\r\n      currentRole = \"lawyer\";\r\n    } else if (polledRoom.juryIds?.includes(currentUser.id)) {\r\n      currentRole = \"jury\";\r\n    }\r\n    setUserRole(currentRole);\r\n\r\n    setIsSilenced(Boolean(polledRoom.silencedUsers?.includes(currentUser.id)));\r\n    setLoading(false);\r\n  }, [polledRoom, roomPolling, currentUser.id]);\r\n\r\n  useEffect(() => {\r\n    if (!roomId || !classCode) return;\r\n    handleJoinRoom();\r\n    return () => {\r\n      handleLeaveRoom();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [roomId, classCode]);\r\n\r\n  // /   (  )\r\n  const fetchMessages = useCallback(async () => {\r\n    if (!roomId || !classCode) return [];\r\n    const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n    const messagesQuery = query(messagesRef, orderBy(\"timestamp\", \"asc\"), limit(100));\r\n    const snapshot = await getDocs(messagesQuery);\r\n    return snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }, [roomId, classCode]);\r\n\r\n  const fetchEvidence = useCallback(async () => {\r\n    if (!roomId || !classCode) return [];\r\n    const evidenceRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"evidence\");\r\n    const evidenceQuery = query(evidenceRef, orderBy(\"uploadedAt\", \"desc\"), limit(50));\r\n    const snapshot = await getDocs(evidenceQuery);\r\n    return snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }, [roomId, classCode]);\r\n\r\n  const { data: polledMessages } = usePolling(fetchMessages, {\r\n    interval: 10 * 60 * 1000, //  [ ] 5  10\r\n    enabled: !!roomId && !!classCode,\r\n    deps: [roomId, classCode],\r\n  });\r\n\r\n  const { data: polledEvidence } = usePolling(fetchEvidence, {\r\n    interval: POLLING_INTERVALS.NORMAL, // 5 \r\n    enabled: !!roomId && !!classCode,\r\n    deps: [roomId, classCode],\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (polledMessages) setMessages(polledMessages);\r\n  }, [polledMessages]);\r\n\r\n  useEffect(() => {\r\n    if (polledEvidence) setEvidence(polledEvidence);\r\n  }, [polledEvidence]);\r\n\r\n  const handleJoinRoom = async () => {\r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      \r\n      // Get the latest room data to check for available roles\r\n      const roomSnap = await getDoc(roomRef);\r\n      if (!roomSnap.exists()) {\r\n          logger.error(\"Trial room not found!\");\r\n          return;\r\n      }\r\n      const currentRoomData = roomSnap.data();\r\n      let updateData = {\r\n          participants: arrayUnion(currentUser.id),\r\n          lastActivity: serverTimestamp(),\r\n      };\r\n      let assignedRole = '';\r\n\r\n      // Automatic role assignment based on job\r\n      if (currentUser.job === '' && !currentRoomData.judgeId) {\r\n          updateData.judgeId = currentUser.id;\r\n          updateData.judgeName = currentUser.name || currentUser.displayName;\r\n          assignedRole = '';\r\n      } else if (currentUser.job === '' && !currentRoomData.prosecutorId) {\r\n          updateData.prosecutorId = currentUser.id;\r\n          updateData.prosecutorName = currentUser.name || currentUser.displayName;\r\n          assignedRole = '';\r\n      } else if (currentUser.job === '' && !currentRoomData.lawyerId) {\r\n          updateData.lawyerId = currentUser.id;\r\n          updateData.lawyerName = currentUser.name || currentUser.displayName;\r\n          assignedRole = '';\r\n      }\r\n\r\n      await updateDoc(roomRef, updateData);\r\n      \r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      const joinMessage = `${currentUser.name || currentUser.displayName} .`;\r\n      const roleMessage = assignedRole ? ` ${assignedRole}   .` : '';\r\n      \r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: joinMessage + roleMessage,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n\r\n    } catch (error) {\r\n      logger.error(\"Error joining room:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLeaveRoom = async () => {\r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      await updateDoc(roomRef, {\r\n        participants: arrayRemove(currentUser.id),\r\n        lastActivity: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error leaving room:\", error);\r\n    }\r\n  };\r\n\r\n  const handleTakeRole = async (role) => {\r\n    if (!roomData) return;\r\n    \r\n    const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n    let updateData = {};\r\n    let roleTitle = \"\";\r\n    \r\n    switch (role) {\r\n      case \"prosecutor\":\r\n        if (roomData.prosecutorId) return alert(\"  .\");\r\n        updateData.prosecutorId = currentUser.id;\r\n        updateData.prosecutorName = currentUser.name || currentUser.displayName;\r\n        roleTitle = \"\";\r\n        break;\r\n      case \"lawyer\":\r\n        if (roomData.lawyerId) return alert(\"  .\");\r\n        updateData.lawyerId = currentUser.id;\r\n        updateData.lawyerName = currentUser.name || currentUser.displayName;\r\n        roleTitle = \"\";\r\n        break;\r\n      case \"jury\":\r\n        if (roomData.juryIds?.includes(currentUser.id)) return alert(\" .\");\r\n        if ((roomData.juryIds?.length || 0) >= 6) return alert(\"  .\");\r\n        updateData.juryIds = arrayUnion(currentUser.id);\r\n        roleTitle = \"\";\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n    \r\n    try {\r\n      await updateDoc(roomRef, {\r\n        ...updateData,\r\n        lastActivity: serverTimestamp(),\r\n      });\r\n      \r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `${currentUser.name || currentUser.displayName} ${roleTitle}  .`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error taking role:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputMessage.trim() || !roomData) return;\r\n\r\n    //     \r\n    if (isSilenced) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"chat\",\r\n        userId: currentUser.id,\r\n        userName: currentUser.name || currentUser.displayName,\r\n        userRole: userRole,\r\n        text: inputMessage,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n      setInputMessage(\"\");\r\n    } catch (error) {\r\n      logger.error(\"Error sending message:\", error);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleApplySilence = async (userId) => {\r\n    if (userRole !== \"judge\" || !userId) return;\r\n\r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      await updateDoc(roomRef, {\r\n        silencedUsers: arrayUnion(userId),\r\n      });\r\n\r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `  ${getUserName(userId)}   .`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error applying silence:\", error);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleRemoveSilence = async (userId) => {\r\n    if (userRole !== \"judge\" || !userId) return;\r\n\r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      await updateDoc(roomRef, {\r\n        silencedUsers: arrayRemove(userId),\r\n      });\r\n\r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `  ${getUserName(userId)}   .`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error removing silence:\", error);\r\n    }\r\n  };\r\n  \r\n  const handleUploadEvidence = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    if (file.size > 10 * 1024 * 1024) return alert(\"  10MB  .\");\r\n    \r\n    setUploadingEvidence(true);\r\n    \r\n    try {\r\n      const storageRef = ref(storage, `trial-evidence/${classCode}/${roomId}/${Date.now()}_${file.name}`);\r\n      const snapshot = await uploadBytes(storageRef, file);\r\n      const downloadURL = await getDownloadURL(snapshot.ref);\r\n      \r\n      const evidenceRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"evidence\");\r\n      await addDoc(evidenceRef, {\r\n        fileName: file.name,\r\n        fileType: file.type,\r\n        fileSize: file.size,\r\n        url: downloadURL,\r\n        uploadedBy: currentUser.id,\r\n        uploaderName: currentUser.name || currentUser.displayName,\r\n        uploaderRole: userRole,\r\n        uploadedAt: serverTimestamp(),\r\n      });\r\n      \r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `${currentUser.name || currentUser.displayName}   \"${file.name}\" .`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n      \r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"Error uploading evidence:\", error);\r\n      alert(\"     .\");\r\n    } finally {\r\n      setUploadingEvidence(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  const handleStartVoting = async (question, isAnonymous = false) => {\r\n    if (userRole !== \"judge\") return;\r\n    \r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      // Update the main room document with voting data\r\n      await updateDoc(roomRef, {\r\n        voting: {\r\n          question: question,\r\n          isAnonymous: isAnonymous,\r\n          isActive: true,\r\n          startedAt: serverTimestamp(),\r\n          votes: {},\r\n          guilty: 0,\r\n          notGuilty: 0,\r\n        }\r\n      });\r\n      \r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `  : \"${question}\"`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error starting vote:\", error);\r\n    }\r\n  };\r\n\r\n  const handleVote = async (vote) => {\r\n    if (userRole !== \"jury\" || !votingData?.isActive) return;\r\n    \r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      let updateData = {};\r\n      \r\n      if (votingData.isAnonymous) {\r\n        // For anonymous, we still need to increment a counter\r\n        updateData[`voting.${vote}`] = (roomData.voting[vote] || 0) + 1;\r\n      } else {\r\n        // For public, we set the specific user's vote\r\n        updateData[`voting.votes.${currentUser.id}`] = {\r\n          vote: vote,\r\n          voterName: currentUser.name || currentUser.displayName,\r\n          timestamp: serverTimestamp(),\r\n        };\r\n      }\r\n      \r\n      await updateDoc(roomRef, updateData);\r\n      setMyVote(vote);\r\n      alert(` : ${vote === \"guilty\" ? \"\" : \"\"}`);\r\n    } catch (error) {\r\n      logger.error(\"Error voting:\", error);\r\n    }\r\n  };\r\n\r\n  const handleEndVoting = async () => {\r\n    if (userRole !== \"judge\" || !votingData?.isActive) return;\r\n\r\n    try {\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      // We need to get the latest vote counts before declaring the result\r\n      const roomSnap = await getDoc(roomRef);\r\n      const latestRoomData = roomSnap.data();\r\n      const currentVotes = latestRoomData.voting;\r\n\r\n      let resultText = ` . `;\r\n      if (currentVotes.isAnonymous) {\r\n        resultText += `: ${currentVotes.guilty || 0}, : ${currentVotes.notGuilty || 0}`;\r\n      } else {\r\n        const guiltyVotes = Object.values(currentVotes.votes || {}).filter(v => v.vote === \"guilty\").length;\r\n        const notGuiltyVotes = Object.values(currentVotes.votes || {}).filter(v => v.vote === \"notGuilty\").length;\r\n        resultText += `: ${guiltyVotes}, : ${notGuiltyVotes}`;\r\n      }\r\n      \r\n      // Update the voting status within the main room document\r\n      await updateDoc(roomRef, {\r\n        \"voting.isActive\": false,\r\n        \"voting.endedAt\": serverTimestamp(),\r\n      });\r\n      \r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: resultText,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Error ending vote:\", error);\r\n    }\r\n  };\r\n\r\n  //    -   /\r\n  const handleAvatarClick = async (clickedUserId) => {\r\n    if (userRole !== \"judge\" || !clickedUserId || clickedUserId === currentUser.id) return;\r\n\r\n    if (roomData?.silencedUsers?.includes(clickedUserId)) {\r\n      if (window.confirm(`${getUserName(clickedUserId)}   ?`)) {\r\n        await handleRemoveSilence(clickedUserId);\r\n      }\r\n    } else {\r\n      if (window.confirm(`${getUserName(clickedUserId)}   ?`)) {\r\n        await handleApplySilence(clickedUserId);\r\n      }\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleMakeVerdict = async () => {\r\n    if (userRole !== \"judge\") return;\r\n\r\n    const verdict = window.prompt(\"  (: , ,  10,000,  5,000):\");\r\n    if (!verdict || !verdict.trim()) return;\r\n\r\n    const reason = window.prompt(\"  :\");\r\n    if (!reason || !reason.trim()) return;\r\n\r\n    logger.log(\"Making verdict...\", { verdict, reason });\r\n\r\n    try {\r\n      // 1. Parse payment from verdict string\r\n      let paymentAmount = 0;\r\n      let paymentType = null;\r\n      const fineRegex = /\\s*([0-9,]+)/;\r\n      const settlementRegex = /\\s*([0-9,]+)/;\r\n\r\n      const fineMatch = verdict.match(fineRegex);\r\n      const settlementMatch = verdict.match(settlementRegex);\r\n\r\n      if (fineMatch && fineMatch[1]) {\r\n        paymentType = 'fine';\r\n        paymentAmount = parseInt(fineMatch[1].replace(/,/g, ''), 10);\r\n        logger.log(`Fine detected: ${paymentAmount}`);\r\n      } else if (settlementMatch && settlementMatch[1]) {\r\n        paymentType = 'settlement';\r\n        paymentAmount = parseInt(settlementMatch[1].replace(/,/g, ''), 10);\r\n        logger.log(`Settlement detected: ${paymentAmount}`);\r\n      }\r\n\r\n      // 2. Process payment if any\r\n      if (paymentType && paymentAmount > 0) {\r\n        if (paymentType === 'fine') {\r\n          logger.log(`Processing fine of ${paymentAmount} from ${roomData.defendantId}`);\r\n          await processFineTransaction(roomData.defendantId, classCode, paymentAmount, `  : ${reason}`);\r\n          logger.log(\"Fine processed successfully.\");\r\n        } else if (paymentType === 'settlement') {\r\n          logger.log(`Processing settlement of ${paymentAmount} from ${roomData.defendantId} to ${roomData.complainantId}`);\r\n          await transferCash(roomData.defendantId, roomData.complainantId, paymentAmount, ` : ${reason}`);\r\n          logger.log(\"Settlement processed successfully.\");\r\n        }\r\n      }\r\n\r\n      // 3. Save trial result\r\n      logger.log(\"Saving trial result...\");\r\n      const resultsRef = collection(db, \"classes\", classCode, \"trialResults\");\r\n      await addDoc(resultsRef, {\r\n        roomId: roomId,\r\n        caseNumber: roomData.caseNumber,\r\n        caseTitle: roomData.caseTitle || ' ',\r\n        judgeId: roomData.judgeId,\r\n        judgeName: roomData.judgeName,\r\n        complainantId: roomData.complainantId,\r\n        defendantId: roomData.defendantId,\r\n        verdict: verdict,\r\n        verdictReason: reason,\r\n        verdictDate: serverTimestamp(),\r\n        votingResult: votingData || null,\r\n        participants: roomData.participants || [],\r\n        paymentAmount: paymentAmount || 0,\r\n        paymentType: paymentType || null,\r\n      });\r\n      logger.log(\"Trial result saved.\");\r\n\r\n      // 4. Update trial room status\r\n      logger.log(\"Updating trial room status...\");\r\n      const roomRef = doc(db, \"classes\", classCode, \"trialRooms\", roomId);\r\n      await updateDoc(roomRef, {\r\n        status: \"completed\",\r\n        verdict: verdict,\r\n        verdictDate: serverTimestamp(),\r\n      });\r\n      logger.log(\"Trial room status updated.\");\r\n\r\n      // 5. Post system message\r\n      logger.log(\"Posting system message...\");\r\n      const messagesRef = collection(db, \"classes\", classCode, \"trialRooms\", roomId, \"messages\");\r\n      await addDoc(messagesRef, {\r\n        type: \"system\",\r\n        text: `  : ${verdict}\\n: ${reason}`,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n      logger.log(\"System message posted.\");\r\n\r\n      alert(\" .      .\");\r\n\r\n      // 6. Close the trial room\r\n      if (onClose) onClose();\r\n    } catch (error) {\r\n      logger.error(\"Error making verdict:\", error);\r\n      alert(`    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const getUserName = (userId) => {\r\n    const user = users.find(u => u.id === userId);\r\n    return user?.name || user?.displayName || userId || \"  \";\r\n  };\r\n\r\n  const getRoleDisplay = (role) => ({\r\n    judge: \" \", prosecutor: \" \", lawyer: \" \",\r\n    complainant: \" \", defendant: \" \", jury: \" \",\r\n    spectator: \" \",\r\n  }[role] || \"\");\r\n\r\n  const getRoleColor = (role) => ({\r\n    judge: \"#6f42c1\", prosecutor: \"#dc3545\", lawyer: \"#0d6efd\",\r\n    complainant: \"#198754\", defendant: \"#fd7e14\", jury: \"#0dcaf0\",\r\n    spectator: \"#6c757d\",\r\n  }[role] || \"#6c757d\");\r\n\r\n  if (loading) return <div className=\"trial-room-loading\">  ...</div>;\r\n  if (!roomData) return <div className=\"trial-room-error\">   .</div>;\r\n\r\n  return (\r\n    <div className=\"trial-room-container\">\r\n      <div className=\"trial-room-header\">\r\n        <h2> -  {roomData.caseNumber}</h2>\r\n        <button onClick={onClose} className=\"close-room-btn\"> </button>\r\n      </div>\r\n      \r\n      <div className=\"trial-room-layout\">\r\n        <div className=\"courtroom-view\">\r\n          <div className=\"judge-bench\">\r\n            <Avatar \r\n              role=\"judge\" \r\n              name={roomData.judgeName} \r\n              isActive={roomData.participants?.includes(roomData.judgeId)}\r\n              userId={roomData.judgeId}\r\n              onAvatarClick={handleAvatarClick}\r\n              canGrantPermission={userRole === \"judge\"}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"court-floor\">\r\n            <div className=\"left-side\">\r\n              <div className=\"role-position\">\r\n                {roomData.prosecutorId ? (\r\n                  <Avatar\r\n                    role=\"prosecutor\"\r\n                    name={roomData.prosecutorName}\r\n                    isActive={roomData.participants?.includes(roomData.prosecutorId)}\r\n                    userId={roomData.prosecutorId}\r\n                    onAvatarClick={handleAvatarClick}\r\n                    canGrantPermission={userRole === \"judge\"}\r\n                    showSpeechBubble={roomData.silencedUsers?.includes(roomData.prosecutorId)}\r\n                  />\r\n                ) : (\r\n                  <div className=\"empty-role\">\r\n                    <button onClick={() => handleTakeRole(\"prosecutor\")} className=\"take-role-btn\" disabled={userRole !== \"spectator\"}> </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"role-position\">\r\n                <Avatar\r\n                  role=\"complainant\"\r\n                  name={getUserName(roomData.complainantId)}\r\n                  isActive={roomData.participants?.includes(roomData.complainantId)}\r\n                  userId={roomData.complainantId}\r\n                  onAvatarClick={handleAvatarClick}\r\n                  canGrantPermission={userRole === \"judge\"}\r\n                  showSpeechBubble={roomData.silencedUsers?.includes(roomData.complainantId)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"right-side\">\r\n              <div className=\"role-position\">\r\n                {roomData.lawyerId ? (\r\n                  <Avatar\r\n                    role=\"lawyer\"\r\n                    name={roomData.lawyerName}\r\n                    isActive={roomData.participants?.includes(roomData.lawyerId)}\r\n                    userId={roomData.lawyerId}\r\n                    onAvatarClick={handleAvatarClick}\r\n                    canGrantPermission={userRole === \"judge\"}\r\n                    showSpeechBubble={roomData.silencedUsers?.includes(roomData.lawyerId)}\r\n                  />\r\n                ) : (\r\n                  <div className=\"empty-role\">\r\n                    <button onClick={() => handleTakeRole(\"lawyer\")} className=\"take-role-btn\" disabled={userRole !== \"spectator\"}> </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"role-position\">\r\n                <Avatar\r\n                  role=\"defendant\"\r\n                  name={getUserName(roomData.defendantId)}\r\n                  isActive={roomData.participants?.includes(roomData.defendantId)}\r\n                  userId={roomData.defendantId}\r\n                  onAvatarClick={handleAvatarClick}\r\n                  canGrantPermission={userRole === \"judge\"}\r\n                  showSpeechBubble={roomData.silencedUsers?.includes(roomData.defendantId)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"jury-box\">\r\n            <div className=\"jury-label\"></div>\r\n            <div className=\"jury-seats\">\r\n              {[...Array(6)].map((_, index) => (\r\n                <div key={index} className=\"jury-position\">\r\n                  {roomData.juryIds?.[index] ? (\r\n                    <Avatar\r\n                      role=\"jury\"\r\n                      name={getUserName(roomData.juryIds[index])}\r\n                      isActive={roomData.participants?.includes(roomData.juryIds[index])}\r\n                      userId={roomData.juryIds[index]}\r\n                      onAvatarClick={handleAvatarClick}\r\n                      canGrantPermission={userRole === \"judge\"}\r\n                      showSpeechBubble={roomData.silencedUsers?.includes(roomData.juryIds[index])}\r\n                    />\r\n                  ) : (\r\n                    <button onClick={() => handleTakeRole(\"jury\")} className=\"take-jury-btn\" disabled={userRole !== \"spectator\"}> </button>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"trial-sidebar\">\r\n          <div className=\"participant-info\">\r\n            <h3> </h3>\r\n            <div className=\"my-role\" style={{ color: getRoleColor(userRole) }}>{getRoleDisplay(userRole)}</div>\r\n            <div className=\"my-name\">{currentUser.name || currentUser.displayName}</div>\r\n            {isSilenced && (\r\n              <div className=\"silence-badge\" style={{\r\n                marginTop: '10px', background: '#dc3545', color: 'white',\r\n                padding: '6px 12px', borderRadius: '15px', fontSize: '0.85rem'\r\n              }}>\r\n                    \r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"chat-section\">\r\n            <h3> </h3>\r\n            <div className=\"messages-container\">\r\n              {messages.map((msg) => (\r\n                <div key={msg.id} className={`message ${msg.type}`}>\r\n                  {msg.type === \"system\" ? (\r\n                    <div className=\"system-message\">{msg.text}</div>\r\n                  ) : (\r\n                    <div className=\"chat-message\">\r\n                      <span className=\"message-author\" style={{ color: getRoleColor(msg.userRole) }}>\r\n                        {msg.userName}:\r\n                      </span>\r\n                      <span className=\"message-text\">{msg.text}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n            <div className=\"message-input-container\">\r\n              <input type=\"text\" value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                onKeyPress={(e) => e.key === \"Enter\" && handleSendMessage()}\r\n                placeholder={isSilenced ? \"  \" : \" ...\"}\r\n                disabled={isSilenced} className=\"message-input\" />\r\n              <button onClick={handleSendMessage} className=\"send-btn\" disabled={isSilenced}></button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"evidence-section\">\r\n            <h3> </h3>\r\n            <div className=\"evidence-list\">\r\n              {evidence.map((item) => (\r\n                <div key={item.id} className=\"evidence-item\">\r\n                  <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">{item.fileName}</a>\r\n                  <span className=\"evidence-uploader\">- {item.uploaderName}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {[\"judge\", \"prosecutor\", \"lawyer\"].includes(userRole) && (\r\n              <div className=\"evidence-upload\">\r\n                <input type=\"file\" ref={fileInputRef} onChange={handleUploadEvidence}\r\n                  style={{ display: \"none\" }} accept=\"image/*,application/pdf,.doc,.docx\" />\r\n                <button onClick={() => fileInputRef.current?.click()} disabled={uploadingEvidence} className=\"upload-btn\">\r\n                  {uploadingEvidence ? \" ...\" : \" \"}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {userRole === \"judge\" && (\r\n            <div className=\"judge-controls\">\r\n              <h3> </h3>\r\n              <p style={{ fontSize: '0.85rem', color: '#666', marginBottom: '10px' }}>\r\n                    /\r\n              </p>\r\n              <button className=\"judge-action-btn\" onClick={() => {\r\n                const q = window.prompt(\"  :\");\r\n                if (q) {\r\n                  const isAnon = window.confirm(\"  ?\");\r\n                  handleStartVoting(q, isAnon);\r\n                }\r\n              }}>  </button>\r\n              {votingData?.isActive && (\r\n                <button className=\"judge-action-btn\" onClick={handleEndVoting}>\r\n                    \r\n                </button>\r\n              )}\r\n              <button\r\n                className=\"judge-action-btn\"\r\n                onClick={handleMakeVerdict}\r\n                style={{\r\n                  background: '#6f42c1',\r\n                  fontWeight: 'bold',\r\n                  marginTop: '10px'\r\n                }}\r\n              >\r\n                 \r\n              </button>\r\n            </div>\r\n          )}\r\n          \r\n          {userRole === \"jury\" && votingData?.isActive && !myVote && (\r\n            <div className=\"voting-section\">\r\n              <h3> </h3>\r\n              <p className=\"voting-question\">{votingData.question}</p>\r\n              <div className=\"voting-buttons\">\r\n                <button onClick={() => handleVote(\"guilty\")} className=\"vote-btn guilty\"></button>\r\n                <button onClick={() => handleVote(\"notGuilty\")} className=\"vote-btn not-guilty\"></button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {votingData && !votingData.isActive && (\r\n            <div className=\"voting-results\">\r\n              <h3> </h3>\r\n              <p>{votingData.question}</p>\r\n              {votingData.isAnonymous ? (\r\n                <div>\r\n                  <p>: {votingData.guilty || 0}</p>\r\n                  <p>: {votingData.notGuilty || 0}</p>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  {Object.entries(votingData.votes || {}).map(([userId, vote]) => (\r\n                    <p key={userId}>{vote.voterName}: {vote.vote === \"guilty\" ? \"\" : \"\"}</p>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrialRoom;\r\n","// src/Court.js - Tailwind UI \r\nimport React, { useState, useEffect, useContext, useMemo } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db } from \"../../firebase\";\r\nimport \"./Court.css\";\r\nimport SubmitComplaint from \"./SubmitComplaint\";\r\nimport ComplaintStatus from \"./ComplaintStatus\";\r\nimport TrialRoom from \"./TrialRoom\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Scale, FileText, Clock, Gavel } from \"lucide-react\";\r\n\r\nimport { logger } from '../../utils/logger';\nimport {\n  collection,\r\n  doc,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  orderBy,\r\n  limit,\r\n  getDoc,\r\n  setDoc,\r\n  where,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\n\r\n// --- Helper Components ---\r\nconst EditComplaintModal = ({ complaint, onSave, onCancel, users }) => {\r\n  const [reason, setReason] = useState(complaint.reason);\r\n  const [desiredResolution, setDesiredResolution] = useState(\r\n    complaint.desiredResolution\r\n  );\r\n  const [defendantId, setDefendantId] = useState(complaint.defendantId);\r\n\r\n  const handleSave = () => {\r\n    if (!defendantId || !reason.trim() || !desiredResolution.trim()) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    onSave({ ...complaint, reason, desiredResolution, defendantId });\r\n  };\r\n\r\n  const defendantOptions = users\r\n    .filter((user) => user.id !== complaint.complainantId)\r\n    .map((user) => (\r\n      <option key={user.id} value={user.id}>\r\n        {user.name || user.displayName || user.id}\r\n      </option>\r\n    ));\r\n\r\n  // Portal   \r\n  const modalRoot = document.getElementById(\"modal-root\");\r\n  if (!modalRoot) {\r\n    // modal-root  body \r\n    const newModalRoot = document.createElement(\"div\");\r\n    newModalRoot.id = \"modal-root\";\r\n    document.body.appendChild(newModalRoot);\r\n  }\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"modal-overlay\" onClick={onCancel}>\r\n      <div\r\n        className=\"edit-modal-container modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3>  (ID: {complaint.id.slice(-6)})</h3>\r\n          <button className=\"close-button\" onClick={onCancel}>\r\n            \r\n          </button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"defendantSelectEdit\" className=\"form-label\">\r\n              \r\n            </label>\r\n            <select\r\n              id=\"defendantSelectEdit\"\r\n              className=\"form-select\"\r\n              value={defendantId}\r\n              onChange={(e) => setDefendantId(e.target.value)}\r\n            >\r\n              <option value=\"\">--  --</option>\r\n              {defendantOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\"> </label>\r\n            <textarea\r\n              className=\"form-textarea\"\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              rows={5}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\"> </label>\r\n            <textarea\r\n              className=\"form-textarea\"\r\n              value={desiredResolution}\r\n              onChange={(e) => setDesiredResolution(e.target.value)}\r\n              rows={3}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleSave} className=\"modal-button process\">\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById(\"modal-root\") || document.body\r\n  );\r\n};\r\n\r\nconst JudgmentModal = ({ complaint, onSave, onCancel }) => {\r\n  const [judgmentText, setJudgmentText] = useState(complaint.judgment || \"\");\r\n\r\n  const handleSaveClick = () => {\r\n    if (!judgmentText.trim()) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    onSave(complaint.id, judgmentText);\r\n  };\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"modal-overlay\" onClick={onCancel}>\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3>  (ID: {complaint.id.slice(-6)})</h3>\r\n          <button className=\"close-button\" onClick={onCancel}>\r\n            \r\n          </button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"judgmentText\" className=\"form-label\">\r\n               \r\n            </label>\r\n            <textarea\r\n              id=\"judgmentText\"\r\n              className=\"form-textarea judgment-textarea\"\r\n              value={judgmentText}\r\n              onChange={(e) => setJudgmentText(e.target.value)}\r\n              rows={10}\r\n              placeholder=\"   ...\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleSaveClick} className=\"modal-button process\">\r\n             \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById(\"modal-root\") || document.body\r\n  );\r\n};\r\n\r\n//   \r\nconst SettlementModal = ({\r\n  complaint,\r\n  users,\r\n  onSave,\r\n  onCancel,\r\n  getUserNameById,\r\n}) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [senderId, setSenderId] = useState(complaint.defendantId || \"\");\r\n  const [recipientId, setRecipientId] = useState(complaint.complainantId || \"\");\r\n\r\n  const handleSave = async () => {\r\n    if (!amount || isNaN(parseInt(amount)) || parseInt(amount) <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (!senderId || !recipientId) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n    if (senderId === recipientId) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const success = await onSave(complaint.id, parseInt(amount), senderId, recipientId);\r\n      if (success) {\r\n        onCancel(); //   \r\n      }\r\n    } catch (error) {\r\n      logger.error(\"Settlement error:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"modal-overlay\" onClick={onCancel}>\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3>   (: {complaint.id?.slice(-6) || ''})</h3>\r\n          <button className=\"close-button\" onClick={onCancel}>\r\n            \r\n          </button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <p>\r\n            <strong>:</strong> {getUserNameById(complaint.complainantId)}\r\n          </p>\r\n          <p>\r\n            <strong>:</strong> {getUserNameById(complaint.defendantId)}\r\n          </p>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementSender\" className=\"form-label\">\r\n              :\r\n            </label>\r\n            <select\r\n              id=\"settlementSender\"\r\n              className=\"form-select\"\r\n              value={senderId}\r\n              onChange={(e) => setSenderId(e.target.value)}\r\n            >\r\n              <option value=\"\">--  --</option>\r\n              {users.filter(u => u.id !== recipientId).map((user) => (\r\n                <option key={user.id} value={user.id}>\r\n                  {getUserNameById(user.id)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementRecipient\" className=\"form-label\">\r\n              :\r\n            </label>\r\n            <select\r\n              id=\"settlementRecipient\"\r\n              className=\"form-select\"\r\n              value={recipientId}\r\n              onChange={(e) => setRecipientId(e.target.value)}\r\n            >\r\n              <option value=\"\">--  --</option>\r\n              {users.filter(u => u.id !== senderId).map((user) => (\r\n                <option key={user.id} value={user.id}>\r\n                  {getUserNameById(user.id)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"settlementAmount\" className=\"form-label\">\r\n               ():\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"settlementAmount\"\r\n              className=\"form-input\"\r\n              value={amount}\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              placeholder=\" \"\r\n              min=\"1\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleSave} className=\"modal-button process\">\r\n             \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.getElementById(\"modal-root\") || document.body\r\n  );\r\n};\r\n\r\nconst TrialResults = ({ complaints, users, onOpenSettlementModal }) => {\r\n  const getUserNameById = (userId) => {\r\n    const user = users.find((u) => u.id === userId);\r\n    return user?.name || user?.displayName || userId || \"  \";\r\n  };\r\n\r\n  const resolvedComplaints = (complaints || []).filter((c) => c.status === \"resolved\");\r\n\r\n  if (resolvedComplaints.length === 0) {\r\n    return <p className=\"empty-state\">  .</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"trial-results-container\">\r\n      {resolvedComplaints.map((complaint) => (\r\n        <div key={complaint.id} className=\"result-card\">\r\n          <div className=\"result-header\">\r\n            <span className=\"case-id\">: {complaint.id.slice(-6)}</span>\r\n            <span className=\"parties\">\r\n              {getUserNameById(complaint.complainantId)} vs{\" \"}\r\n              {getUserNameById(complaint.defendantId)}\r\n            </span>\r\n            <span className=\"case-status status-resolved\"></span>\r\n          </div>\r\n          <div className=\"result-content\">\r\n            <h4> </h4>\r\n            <p className=\"summary\">\r\n              {complaint.reason.substring(0, 100)}\r\n              {complaint.reason.length > 100 ? \"...\" : \"\"}\r\n            </p>\r\n            <h4></h4>\r\n            <div className=\"judgment-display\">\r\n              <p>{complaint.judgment || \"  .\"}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"result-actions\">\r\n            {complaint.settlementPaid ? (\r\n              <button className=\"settlement-button paid\" disabled>\r\n                 \r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"settlement-button\"\r\n                onClick={() => onOpenSettlementModal(complaint)}\r\n              >\r\n                 \r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n//   \r\nconst BankruptcySection = ({ refetchComplaints }) => {\r\n  const { userDoc, classCode } = useAuth();\r\n  const [hasPendingBankruptcyCase, setHasPendingBankruptcyCase] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (userDoc?.id && classCode) {\r\n      const checkPendingCase = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n          const casesRef = collection(db, \"classes\", classCode, \"courtComplaints\");\r\n          const q = query(\r\n            casesRef,\r\n            where(\"complainantId\", \"==\", userDoc.id),\r\n            where(\"caseType\", \"==\", \"bankruptcy\"),\r\n            where(\"status\", \"==\", \"pending\"),\r\n            limit(10)\r\n          );\r\n          const querySnapshot = await getDocs(q);\r\n          setHasPendingBankruptcyCase(!querySnapshot.empty);\r\n        } catch (error) {\r\n          logger.error(\"    :\", error);\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      };\r\n      checkPendingCase();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [userDoc, classCode]);\r\n\r\n  const handleApplyForBankruptcy = async () => {\r\n    if (window.confirm(\"  ?        .\")) {\r\n      try {\r\n        const casesRef = collection(db, \"classes\", classCode, \"courtComplaints\");\r\n        await addDoc(casesRef, {\r\n          complainantId: userDoc.id,\r\n          complainantName: userDoc.name,\r\n          caseType: \"bankruptcy\",\r\n          defendantId: \"system\",\r\n          defendantName: \"\",\r\n          status: \"pending\",\r\n          reason: ` ${userDoc.money.toLocaleString()}   `,\r\n          desiredResolution: \"    0  \",\r\n          submissionDate: serverTimestamp(),\r\n          likedBy: [],\r\n          dislikedBy: [],\r\n        });\r\n        refetchComplaints();\r\n        alert(\"   .   .\");\r\n        setHasPendingBankruptcyCase(true);\r\n      } catch (error) {\r\n        logger.error(\"    :\", error);\r\n        alert(\"    .\");\r\n      }\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <p>    ...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bankruptcy-section\">\r\n      <h3> </h3>\r\n      <p> : {userDoc?.money ? userDoc.money.toLocaleString() : 0}</p>\r\n      {userDoc?.money < 0 ? (\r\n        <div>\r\n          <p>\r\n              .         . ( )\r\n          </p>\r\n          {hasPendingBankruptcyCase ? (\r\n            <p><strong>    .</strong></p>\r\n          ) : (\r\n            <button onClick={handleApplyForBankruptcy} className=\"action-button delete\">\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <p>       .</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Court Component ---\r\nconst Court = () => {\r\n  const auth = useAuth();\r\n  const currentUserDoc = auth?.userDoc;\r\n  const currentUserId = currentUserDoc?.id;\r\n  const classCode = currentUserDoc?.classCode;\r\n\r\n  const isAdmin = auth?.isAdmin\r\n    ? auth.isAdmin()\r\n    : currentUserDoc?.isAdmin || currentUserDoc?.id === \"admin1\";\r\n\r\n  const [activeTab, setActiveTab] = useState(\"submit\");\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [editingComplaint, setEditingComplaint] = useState(null);\r\n  const [isJudgmentModalOpen, setIsJudgmentModalOpen] = useState(false);\r\n  const [judgingComplaint, setJudgingComplaint] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [usersLoading, setUsersLoading] = useState(true);\r\n  const [isSettlementModalOpen, setIsSettlementModalOpen] = useState(false);\r\n  const [settlementComplaint, setSettlementComplaint] = useState(null);\r\n\r\n  const [activeTrialRoom, setActiveTrialRoom] = useState(null);\r\n\r\n  // modal-root  \r\n  useEffect(() => {\r\n    if (!document.getElementById(\"modal-root\")) {\r\n      const modalRoot = document.createElement(\"div\");\r\n      modalRoot.id = \"modal-root\";\r\n      document.body.appendChild(modalRoot);\r\n    }\r\n  }, []);\r\n\r\n  //  [] AuthContext      (DB  )\r\n  useEffect(() => {\r\n    if (!auth.loading && auth.allClassMembers) {\r\n      setUsers(auth.allClassMembers || []);\r\n      setUsersLoading(false);\r\n    }\r\n  }, [auth.loading, auth.allClassMembers]);\r\n\r\n  // usePolling for complaints\r\n  const { data: complaints = [], loading: complaintsLoading, refetch: refetchComplaints } = usePolling(\r\n    async () => {\r\n      if (!classCode) return [];\r\n      const complaintsRef = collection(db, \"classes\", classCode, \"courtComplaints\");\r\n      const q = query(complaintsRef, orderBy(\"submissionDate\", \"desc\"), limit(100));\r\n      const querySnapshot = await getDocs(q);\r\n      return querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        submissionDate: doc.data().submissionDate?.toDate\r\n          ? doc.data().submissionDate.toDate().toISOString()\r\n          : null,\r\n        indictmentDate: doc.data().indictmentDate?.toDate\r\n          ? doc.data().indictmentDate.toDate().toISOString()\r\n          : null,\r\n      }));\r\n    },\r\n    { interval: 10 * 60 * 1000, enabled: !!classCode, deps: [classCode] } //  [ ] 5  10\r\n  );\r\n\r\n  // usePolling for trial rooms\r\n  const { data: trialRooms = [], loading: trialRoomsLoading, refetch: refetchTrialRooms } = usePolling(\r\n    async () => {\r\n      if (!classCode) return [];\r\n      const trialRoomsRef = collection(db, \"classes\", classCode, \"trialRooms\");\r\n      const q = query(trialRoomsRef, limit(50));\r\n      const querySnapshot = await getDocs(q);\r\n      return querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    { interval: 10 * 60 * 1000, enabled: !!classCode, deps: [classCode] } //  [ ] 5  10\r\n  );\r\n\r\n  // Jobs polling - for prosecutor check\r\n  const jobsQuery = useMemo(() => {\r\n    if (!classCode) return null;\r\n    const jobsRef = collection(db, \"jobs\");\r\n    return query(jobsRef, where(\"classCode\", \"==\", classCode));\r\n  }, [classCode]);\r\n\r\n  const { data: jobs, loading: jobsLoading } = usePolling(\r\n    async () => {\r\n      if (!jobsQuery) return [];\r\n      const snapshot = await getDocs(jobsQuery);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      interval: 30 * 60 * 1000, //  [ ] 5  30 (    )\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  // Check if user is prosecutor\r\n  const isProsecutor = useMemo(() => {\r\n    if (!currentUserDoc?.selectedJobIds || !jobs) return false;\r\n    const selectedJobs = jobs.filter(job =>\r\n      currentUserDoc.selectedJobIds.includes(job.id)\r\n    );\r\n    return selectedJobs.some(job => job.title === '');\r\n  }, [currentUserDoc?.selectedJobIds, jobs]);\r\n\r\n  // Check if user is judge\r\n  const isJudge = useMemo(() => {\r\n    if (!currentUserDoc?.selectedJobIds || !jobs) return false;\r\n    const selectedJobs = jobs.filter(job =>\r\n      currentUserDoc.selectedJobIds.includes(job.id)\r\n    );\r\n    return selectedJobs.some(job => job.title === '');\r\n  }, [currentUserDoc?.selectedJobIds, jobs]);\r\n\r\n  const hasProsecutorPrivileges = isAdmin || isProsecutor;\r\n  const hasJudgePrivileges = isAdmin || isJudge;\r\n  const hasAdminPrivileges = hasJudgePrivileges;\r\n\r\n  const handleAddComplaint = async (newComplaintData) => {\r\n    if (!currentUserId || !classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n    const currentUserInfo =\r\n      users.find((u) => u.id === currentUserId) || currentUserDoc;\r\n\r\n    const complaintToSave = {\r\n      ...newComplaintData,\r\n      caseType: \"general\",\r\n      status: \"pending\",\r\n      submissionDate: serverTimestamp(),\r\n      complainantId: currentUserId,\r\n      complainantName:\r\n        currentUserInfo?.name || currentUserInfo?.displayName || \"  \",\r\n      likedBy: [],\r\n      dislikedBy: [],\r\n      judgment: null,\r\n      indictmentDate: null,\r\n      settlementPaid: false,\r\n      classCode: classCode,\r\n    };\r\n    try {\r\n      const complaintsRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"courtComplaints\"\r\n      );\r\n      await addDoc(complaintsRef, complaintToSave);\r\n      refetchComplaints();\r\n      setActiveTab(\"status\");\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"Error adding complaint to Firestore:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  const handleIndictComplaint = async (id) => {\r\n    if (!(hasProsecutorPrivileges || hasAdminPrivileges) || !classCode)\r\n      return alert(\"  .\");\r\n    const complaintRef = doc(db, \"classes\", classCode, \"courtComplaints\", id);\r\n    try {\r\n      await updateDoc(complaintRef, {\r\n        status: \"indicted\",\r\n        indictmentDate: serverTimestamp(),\r\n      });\r\n      refetchComplaints();\r\n      alert(` ${id.slice(-6)}() .`);\r\n    } catch (error) {\r\n      logger.error(\"Error indicting complaint:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteComplaint = async (id) => {\r\n    if (!(hasProsecutorPrivileges || hasJudgePrivileges || hasAdminPrivileges) || !classCode)\r\n      return alert(\"  .\");\r\n\r\n    if (\r\n      window.confirm(` ${id.slice(-6)}   ?`)\r\n    ) {\r\n      const complaintRef = doc(db, \"classes\", classCode, \"courtComplaints\", id);\r\n      try {\r\n        await deleteDoc(complaintRef);\r\n        refetchComplaints();\r\n        alert(\" .\");\r\n      } catch (error) {\r\n        logger.error(\"Error deleting complaint:\", error);\r\n        alert(\"    .\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDismissComplaint = async (id) => {\r\n    if (!(hasProsecutorPrivileges || hasJudgePrivileges || hasAdminPrivileges) || !classCode)\r\n      return alert(\"  .\");\r\n    const complaintRef = doc(db, \"classes\", classCode, \"courtComplaints\", id);\r\n    try {\r\n      await updateDoc(complaintRef, { status: \"dismissed\" });\r\n      refetchComplaints();\r\n      alert(` ${id.slice(-6)}() / .`);\r\n    } catch (error) {\r\n      logger.error(\"Error dismissing complaint:\", error);\r\n      alert(\"   .\");\r\n    }\r\n  };\r\n\r\n  const handleEditClick = (complaint) => {\r\n    if (!currentUserId) {\r\n      alert(\" .\");\r\n      return;\r\n    }\r\n    const canModify = hasProsecutorPrivileges || hasJudgePrivileges || hasAdminPrivileges;\r\n    const isOwner = complaint.complainantId === currentUserId;\r\n\r\n    if (!canModify && !isOwner) {\r\n      return alert(\"       .\");\r\n    }\r\n\r\n    if (!canModify && isOwner && complaint.status !== \"pending\") {\r\n      return alert(\"      .\");\r\n    }\r\n\r\n    if ([\"resolved\", \"dismissed\"].includes(complaint.status) && !isAdmin) {\r\n      return alert(\"    .\");\r\n    }\r\n\r\n    if (complaint.caseType === 'bankruptcy') {\r\n      return alert(\"    .\");\r\n    }\r\n\r\n    setEditingComplaint(complaint);\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleSaveEdit = async (updatedComplaintData) => {\r\n    if (!classCode || !editingComplaint?.id) return;\r\n\r\n    const complaintRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"courtComplaints\",\r\n      editingComplaint.id\r\n    );\r\n    const {\r\n      id,\r\n      classCode: prevClassCode,\r\n      ...dataToSave\r\n    } = updatedComplaintData;\r\n\r\n    try {\r\n      await updateDoc(complaintRef, {\r\n        ...dataToSave,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      refetchComplaints();\r\n      setIsEditModalOpen(false);\r\n      setEditingComplaint(null);\r\n      alert(` ${editingComplaint.id.slice(-6)}  .`);\r\n    } catch (error) {\r\n      logger.error(\"Error updating complaint:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  const handleCloseEditModal = () => {\r\n    setIsEditModalOpen(false);\r\n    setEditingComplaint(null);\r\n  };\r\n\r\n  const handleVote = async (complaintId, voteType) => {\r\n    if (!currentUserId || !classCode) return alert(\" .\");\r\n    const complaintRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"courtComplaints\",\r\n      complaintId\r\n    );\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const complaintDoc = await transaction.get(complaintRef);\r\n        if (!complaintDoc.exists()) {\r\n          throw \"   .\";\r\n        }\r\n        const complaintData = complaintDoc.data();\r\n        let likedBy = complaintData.likedBy || [];\r\n        let dislikedBy = complaintData.dislikedBy || [];\r\n\r\n        const alreadyLiked = likedBy.includes(currentUserId);\r\n        const alreadyDisliked = dislikedBy.includes(currentUserId);\r\n\r\n        if (voteType === \"like\") {\r\n          likedBy = alreadyLiked\r\n            ? likedBy.filter((id) => id !== currentUserId)\r\n            : [...likedBy, currentUserId];\r\n          dislikedBy = dislikedBy.filter((id) => id !== currentUserId);\r\n        } else if (voteType === \"dislike\") {\r\n          dislikedBy = alreadyDisliked\r\n            ? dislikedBy.filter((id) => id !== currentUserId)\r\n            : [...dislikedBy, currentUserId];\r\n          likedBy = likedBy.filter((id) => id !== currentUserId);\r\n        }\r\n        transaction.update(complaintRef, {\r\n          likedBy,\r\n          dislikedBy,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n      refetchComplaints();\r\n    } catch (error) {\r\n      logger.error(\"Error voting on complaint:\", error);\r\n      alert(\"    : \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleStartTrial = async (complaintId) => {\r\n    if (!hasJudgePrivileges || !classCode)\r\n      return alert(\"   .\");\r\n\r\n    const complaint = (complaints || []).find(c => c.id === complaintId);\r\n    if (!complaint) return alert(\"   .\");\r\n\r\n    try {\r\n      const trialRoomData = {\r\n        caseId: complaintId,\r\n        caseNumber: complaintId.slice(-6),\r\n        judgeId: currentUserId,\r\n        judgeName: currentUserDoc?.name || currentUserDoc?.displayName || \"\",\r\n        complainantId: complaint.complainantId,\r\n        defendantId: complaint.defendantId,\r\n        prosecutorId: null,\r\n        lawyerId: null,\r\n        juryIds: [],\r\n        status: \"active\",\r\n        createdAt: serverTimestamp(),\r\n        participants: [currentUserId],\r\n      };\r\n\r\n      const trialRoomsRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"trialRooms\"\r\n      );\r\n      const newRoomRef = await addDoc(trialRoomsRef, trialRoomData);\r\n\r\n      const complaintRef = doc(db, \"classes\", classCode, \"courtComplaints\", complaintId);\r\n      await updateDoc(complaintRef, {\r\n        status: \"on_trial\",\r\n        trialRoomId: newRoomRef.id\r\n      });\r\n\r\n      refetchComplaints();\r\n      refetchTrialRooms();\r\n\r\n      alert(` ${complaintId.slice(-6)}  .  .`);\r\n\r\n      setActiveTrialRoom(newRoomRef.id);\r\n      setActiveTab(\"trial-room\");\r\n    } catch (error) {\r\n      logger.error(\"Error starting trial:\", error);\r\n      alert(\"     .\");\r\n    }\r\n  };\r\n\r\n  const handleOpenJudgmentModal = (complaint) => {\r\n    if (!hasJudgePrivileges) return alert(\"   .\");\r\n    if (complaint.status !== \"on_trial\")\r\n      return alert(\"      .\");\r\n    setJudgingComplaint(complaint);\r\n    setIsJudgmentModalOpen(true);\r\n  };\r\n\r\n  const handleSaveJudgment = async (complaintId, judgmentText) => {\r\n    if (!classCode) return;\r\n    const complaintRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"courtComplaints\",\r\n      complaintId\r\n    );\r\n    try {\r\n      await updateDoc(complaintRef, {\r\n        judgment: judgmentText,\r\n        status: \"resolved\",\r\n        resolvedAt: serverTimestamp(),\r\n      });\r\n\r\n      const complaint = (complaints || []).find(c => c.id === complaintId);\r\n      if (complaint?.trialRoomId) {\r\n        const trialRoomRef = doc(\r\n          db,\r\n          \"classes\",\r\n          classCode,\r\n          \"trialRooms\",\r\n          complaint.trialRoomId\r\n        );\r\n        await updateDoc(trialRoomRef, {\r\n          status: \"completed\",\r\n          completedAt: serverTimestamp(),\r\n        });\r\n        refetchTrialRooms();\r\n      }\r\n\r\n      refetchComplaints();\r\n\r\n      setIsJudgmentModalOpen(false);\r\n      setJudgingComplaint(null);\r\n      alert(` ${complaintId.slice(-6)}  .`);\r\n      setActiveTab(\"results\");\r\n    } catch (error) {\r\n      logger.error(\"Error saving judgment:\", error);\r\n      alert(\"    .\");\r\n    }\r\n  };\r\n\r\n  const handleCloseJudgmentModal = () => {\r\n    setIsJudgmentModalOpen(false);\r\n    setJudgingComplaint(null);\r\n  };\r\n\r\n  const handleOpenSettlementModal = (complaint) => {\r\n    if (!hasJudgePrivileges && !hasAdminPrivileges)\r\n      return alert(\"       .\");\r\n    if (complaint.status !== \"resolved\")\r\n      return alert(\r\n        \"       .\"\r\n      );\r\n    if (complaint.settlementPaid)\r\n      return alert(\"    .\");\r\n\r\n    setSettlementComplaint(complaint);\r\n    setIsSettlementModalOpen(true);\r\n  };\r\n\r\n  const handleCloseSettlementModal = () => {\r\n    setIsSettlementModalOpen(false);\r\n    setSettlementComplaint(null);\r\n  };\r\n\r\n  const handleSendSettlement = async (\r\n    complaintId,\r\n    amount,\r\n    senderId,\r\n    recipientId\r\n  ) => {\r\n    if (!classCode) {\r\n      alert(\"       .\");\r\n      return false;\r\n    }\r\n    const numericAmount = parseInt(amount, 10);\r\n    if (isNaN(numericAmount) || numericAmount <= 0) {\r\n      alert(\"  .\");\r\n      return false;\r\n    }\r\n    if (!senderId || !recipientId) {\r\n      alert(\"     .\");\r\n      return false;\r\n    }\r\n    if (senderId === recipientId) {\r\n      alert(\"      .\");\r\n      return false;\r\n    }\r\n\r\n    const sender = users.find((u) => u.id === senderId);\r\n    const recipient = users.find((u) => u.id === recipientId);\r\n\r\n    if (!sender || !recipient) {\r\n      alert(\"   .\");\r\n      return false;\r\n    }\r\n    const senderName = sender?.name || sender?.displayName || senderId;\r\n    const recipientName =\r\n      recipient?.name || recipient?.displayName || recipientId;\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const senderRef = doc(db, \"users\", senderId);\r\n        const recipientRef = doc(db, \"users\", recipientId);\r\n        const complaintDocRef = doc(\r\n          db,\r\n          \"classes\",\r\n          classCode,\r\n          \"courtComplaints\",\r\n          complaintId\r\n        );\r\n\r\n        const senderSnap = await transaction.get(senderRef);\r\n        const recipientSnap = await transaction.get(recipientRef);\r\n        const complaintSnap = await transaction.get(complaintDocRef);\r\n\r\n        if (!senderSnap.exists())\r\n          throw new Error(`${senderName}     .`);\r\n        if (!recipientSnap.exists())\r\n          throw new Error(\r\n            `${recipientName}     .`\r\n          );\r\n        if (!complaintSnap.exists())\r\n          throw new Error(\"     .\");\r\n\r\n        const senderCash = senderSnap.data().cash || 0;\r\n\r\n        if (senderCash < numericAmount) {\r\n          throw new Error(`${senderName}  . (: ${senderCash.toLocaleString()})`);\r\n        }\r\n\r\n        transaction.update(senderRef, {\r\n          cash: increment(-numericAmount),\r\n        });\r\n        transaction.update(recipientRef, {\r\n          cash: increment(numericAmount),\r\n        });\r\n        transaction.update(complaintDocRef, {\r\n          settlementPaid: true,\r\n          settlementAmount: numericAmount,\r\n          settlementDate: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      refetchComplaints();\r\n\r\n      alert(\r\n        `${senderName} ${recipientName} ${numericAmount.toLocaleString()}   .`\r\n      );\r\n      handleCloseSettlementModal();\r\n      return true;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(`  : ${error.message}`);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getUserNameById = (userId) => {\r\n    const user = users.find((u) => u.id === userId);\r\n    return user?.name || user?.displayName || userId || \"  \";\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"-\";\r\n    try {\r\n      const date = new Date(dateString);\r\n      if (isNaN(date.getTime())) return \"  \";\r\n      return date.toLocaleString(\"ko-KR\", {\r\n        year: \"numeric\",\r\n        month: \"short\",\r\n        day: \"numeric\",\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n      });\r\n    } catch (error) {\r\n      logger.error(\"Date formatting error:\", dateString, error);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    if (!currentUserId && (activeTab === \"submit\" || activeTab === \"bankruptcy\")) {\r\n      return <p className=\"empty-state\"> .</p>;\r\n    }\r\n\r\n    switch (activeTab) {\r\n      case \"submit\":\r\n        return (\r\n          <>\r\n            <SubmitComplaint\r\n              onSubmitComplaint={handleAddComplaint}\r\n              users={users.filter(\r\n                (u) => u.id !== currentUserId && u.classCode === classCode\r\n              )}\r\n              currentUserId={currentUserId}\r\n            />\r\n          </>\r\n        );\r\n      case \"bankruptcy\":\r\n        return <BankruptcySection refetchComplaints={refetchComplaints} />;\r\n      case \"status\":\r\n        return (\r\n          <ComplaintStatus\r\n            complaints={(complaints || []).filter((c) =>\r\n              [\"pending\", \"indicted\", \"on_trial\", \"dismissed\"].includes(\r\n                c.status\r\n              )\r\n            )}\r\n            onEditComplaint={handleEditClick}\r\n            onDeleteComplaint={handleDeleteComplaint}\r\n            onIndictComplaint={handleIndictComplaint}\r\n            onDismissComplaint={handleDismissComplaint}\r\n            onStartTrial={handleStartTrial}\r\n            onOpenJudgment={handleOpenJudgmentModal}\r\n            onVote={handleVote}\r\n            isAdmin={hasProsecutorPrivileges || hasJudgePrivileges || hasAdminPrivileges}\r\n            currentUserId={currentUserId}\r\n            users={users}\r\n            formatDate={formatDate}\r\n            getUserNameById={getUserNameById}\r\n          />\r\n        );\r\n      case \"results\":\r\n        return (\r\n          <TrialResults\r\n            complaints={complaints}\r\n            users={users}\r\n            onOpenSettlementModal={handleOpenSettlementModal}\r\n          />\r\n        );\r\n      case \"trial-room\":\r\n        return activeTrialRoom ? (\r\n          <TrialRoom\r\n            roomId={activeTrialRoom}\r\n            classCode={classCode}\r\n            currentUser={currentUserDoc}\r\n            users={users}\r\n            onClose={() => {\r\n              setActiveTrialRoom(null);\r\n              setActiveTab(\"status\");\r\n            }}\r\n          />\r\n        ) : (\r\n          <div className=\"trial-rooms-list\">\r\n            <h3>  </h3>\r\n            {trialRooms.filter(r => r.status === \"active\").length > 0 ? (\r\n              <div className=\"rooms-grid\">\r\n                {trialRooms.filter(r => r.status === \"active\").map(room => (\r\n                  <div key={room.id} className=\"room-card\">\r\n                    <h4>: {room.caseNumber}</h4>\r\n                    <p>: {room.judgeName}</p>\r\n                    <p>: {room.participants?.length || 0}</p>\r\n                    <button\r\n                      className=\"enter-room-btn\"\r\n                      onClick={() => {\r\n                        setActiveTrialRoom(room.id);\r\n                      }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"empty-state\">   .</p>\r\n            )}\r\n          </div>\r\n        );\r\n      default:\r\n        return <p> .</p>;\r\n    }\r\n  };\r\n\r\n  if (auth.loading || usersLoading || jobsLoading) {\r\n    return (\r\n      <div className=\"court-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n             ...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (!currentUserDoc) {\r\n    return (\r\n      <div className=\"court-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n            .  .\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (!classCode) {\r\n    return (\r\n      <div className=\"court-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n                .\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (complaintsLoading) {\r\n    return (\r\n      <div className=\"court-container\">\r\n        <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n            ...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"court-container\">\r\n      <div className=\"court-header-container\">\r\n        <h1 className=\"court-header\">\r\n            (: {classCode})\r\n          {hasJudgePrivileges && \" -  \"}\r\n          {hasAdminPrivileges && \" \"}\r\n        </h1>\r\n      </div>\r\n\r\n      <div className=\"court-tabs\">\r\n        <div className=\"main-tabs\">\r\n          <button\r\n            className={`court-tab-button ${activeTab === \"submit\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"submit\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`court-tab-button ${activeTab === \"status\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"status\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`court-tab-button ${activeTab === \"results\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"results\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`court-tab-button ${activeTab === \"trial-room\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"trial-room\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`court-tab-button bankruptcy-tab-button ${activeTab === \"bankruptcy\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"bankruptcy\")}\r\n          >\r\n             \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"court-tab-content\">{renderTabContent()}</div>\r\n\r\n      {/*  */}\r\n      {isEditModalOpen && editingComplaint && (\r\n        <EditComplaintModal\r\n          complaint={editingComplaint}\r\n          onSave={handleSaveEdit}\r\n          onCancel={handleCloseEditModal}\r\n          users={users.filter(\r\n            (u) =>\r\n              u.id !== editingComplaint.complainantId &&\r\n              u.classCode === classCode\r\n          )}\r\n        />\r\n      )}\r\n      {isJudgmentModalOpen && judgingComplaint && (\r\n        <JudgmentModal\r\n          complaint={judgingComplaint}\r\n          onSave={handleSaveJudgment}\r\n          onCancel={handleCloseJudgmentModal}\r\n        />\r\n      )}\r\n      {isSettlementModalOpen && settlementComplaint && (\r\n        <SettlementModal\r\n          complaint={settlementComplaint}\r\n          users={users}\r\n          onSave={handleSendSettlement}\r\n          onCancel={handleCloseSettlementModal}\r\n          getUserNameById={getUserNameById}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Court;"],"names":["_ref","onSubmitComplaint","users","currentUserId","isAdmin","complainantName","setComplainantName","useState","defendantId","setDefendantId","reason","setReason","desiredResolution","setDesiredResolution","selectedReasonType","setSelectedReasonType","predefinedReasons","setPredefinedReasons","selectedPredefinedReason","setSelectedPredefinedReason","approvedLaws","setApprovedLaws","selectedLaw","setSelectedLaw","newReason","setNewReason","showAddReasonModal","setShowAddReasonModal","useEffect","savedReasons","localStorage","getItem","JSON","parse","initialReasons","setItem","stringify","savedLaws","lawsFiltered","filter","law","status","finalStatus","length","handleReasonTypeChange","type","selectedLawObj","find","id","parseInt","concat","title","description","defendantOptions","user","map","_jsxs","value","children","name","className","_jsx","onSubmit","e","_approvedLaws$find","preventDefault","trim","lawViolation","lawId","lawTitle","alert","htmlFor","onChange","target","required","checked","placeholder","index","onClick","fine","_Fragment","purpose","handleAddPredefinedReason","updatedReasons","disabled","window","confirm","splice","handleDeleteReason","complaints","onVote","onStartTrial","onOpenJudgment","onEditComplaint","onDeleteComplaint","onIndictComplaint","onDismissComplaint","getUserNameById","userId","_users$find","u","complaint","_complaint$likedBy","_complaint$dislikedBy","_complaint$likedBy2","_complaint$dislikedBy2","likedByCount","likedBy","dislikedByCount","dislikedBy","didCurrentUserLike","includes","didCurrentUserDislike","cardClass","slice","complainantId","Avatar","role","isActive","onAvatarClick","showSpeechBubble","canGrantPermission","isHovered","setIsHovered","position","setPosition","x","y","isWalking","setIsWalking","avatarStyles","judge","bg","icon","prosecutor","lawyer","complainant","defendant","jury","spectator","style","interval","setInterval","Math","random","setTimeout","clearInterval","handleClick","onMouseEnter","onMouseLeave","transform","cursor","backgroundColor","_ref2","_roomData$participant","_roomData$participant2","_roomData$silencedUse2","_roomData$participant3","_roomData$silencedUse3","_roomData$participant4","_roomData$silencedUse4","_roomData$participant5","_roomData$silencedUse5","roomId","classCode","currentUser","onClose","roomData","setRoomData","messages","setMessages","inputMessage","setInputMessage","userRole","setUserRole","loading","setLoading","evidence","setEvidence","uploadingEvidence","setUploadingEvidence","isSilenced","setIsSilenced","votingData","setVotingData","myVote","setMyVote","messagesEndRef","useRef","fileInputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","fetchRoomSnapshot","useCallback","async","roomRef","doc","db","docSnap","getDoc","exists","_objectSpread","data","polledRoom","roomPolling","usePolling","enabled","deps","_polledRoom$juryIds","_polledRoom$silencedU","voting","currentRole","judgeId","prosecutorId","lawyerId","juryIds","Boolean","silencedUsers","handleJoinRoom","handleLeaveRoom","fetchMessages","messagesRef","collection","messagesQuery","query","orderBy","limit","getDocs","docs","d","fetchEvidence","evidenceRef","evidenceQuery","polledMessages","polledEvidence","POLLING_INTERVALS","NORMAL","roomSnap","logger","error","currentRoomData","updateData","participants","arrayUnion","lastActivity","serverTimestamp","assignedRole","job","lawyerName","displayName","prosecutorName","judgeName","updateDoc","joinMessage","roleMessage","addDoc","text","timestamp","arrayRemove","handleTakeRole","_roomData$juryIds","_roomData$juryIds2","roleTitle","handleSendMessage","userName","handleVote","isAnonymous","vote","voterName","handleAvatarClick","_roomData$silencedUse","clickedUserId","getUserName","handleRemoveSilence","handleApplySilence","getRoleColor","caseNumber","Array","_","_roomData$juryIds3","_roomData$participant6","_roomData$silencedUse6","color","marginTop","background","padding","borderRadius","fontSize","msg","ref","onKeyPress","key","item","href","url","rel","fileName","uploaderName","file","event","files","size","storageRef","storage","Date","now","snapshot","uploadBytes","downloadURL","getDownloadURL","fileType","fileSize","uploadedBy","uploaderRole","uploadedAt","display","accept","_fileInputRef$current","click","marginBottom","q","prompt","question","arguments","undefined","startedAt","votes","guilty","notGuilty","handleStartVoting","currentVotes","resultText","guiltyVotes","Object","values","v","notGuiltyVotes","verdict","log","paymentAmount","paymentType","fineRegex","settlementRegex","fineMatch","match","settlementMatch","replace","processFineTransaction","transferCash","resultsRef","caseTitle","verdictReason","verdictDate","votingResult","message","fontWeight","entries","_ref3","EditComplaintModal","onSave","onCancel","document","getElementById","newModalRoot","createElement","body","appendChild","ReactDOM","stopPropagation","rows","handleSave","JudgmentModal","judgmentText","setJudgmentText","judgment","handleSaveClick","SettlementModal","_complaint$id","amount","setAmount","senderId","setSenderId","recipientId","setRecipientId","min","isNaN","TrialResults","_ref4","onOpenSettlementModal","resolvedComplaints","c","substring","settlementPaid","BankruptcySection","_ref5","refetchComplaints","userDoc","useAuth","hasPendingBankruptcyCase","setHasPendingBankruptcyCase","isLoading","setIsLoading","casesRef","where","querySnapshot","empty","checkPendingCase","money","toLocaleString","caseType","defendantName","submissionDate","Court","auth","currentUserDoc","activeTab","setActiveTab","isEditModalOpen","setIsEditModalOpen","editingComplaint","setEditingComplaint","isJudgmentModalOpen","setIsJudgmentModalOpen","judgingComplaint","setJudgingComplaint","setUsers","usersLoading","setUsersLoading","isSettlementModalOpen","setIsSettlementModalOpen","settlementComplaint","setSettlementComplaint","activeTrialRoom","setActiveTrialRoom","modalRoot","allClassMembers","complaintsLoading","refetch","complaintsRef","_doc$data$submissionD","_doc$data$indictmentD","toDate","toISOString","indictmentDate","trialRooms","trialRoomsLoading","refetchTrialRooms","trialRoomsRef","jobsQuery","useMemo","jobsRef","jobs","jobsLoading","isProsecutor","selectedJobIds","some","isJudge","hasProsecutorPrivileges","hasJudgePrivileges","hasAdminPrivileges","handleAddComplaint","currentUserInfo","complaintToSave","newComplaintData","handleIndictComplaint","complaintRef","handleDeleteComplaint","deleteDoc","handleDismissComplaint","handleEditClick","canModify","isOwner","complaintId","voteType","runTransaction","complaintDoc","transaction","get","complaintData","alreadyLiked","alreadyDisliked","update","updatedAt","handleStartTrial","trialRoomData","caseId","createdAt","newRoomRef","trialRoomId","handleOpenJudgmentModal","handleOpenSettlementModal","handleCloseSettlementModal","formatDate","dateString","date","getTime","year","month","day","hour","minute","renderTabContent","SubmitComplaint","ComplaintStatus","TrialRoom","r","room","_room$participants","prevClassCode","updatedComplaintData","dataToSave","_objectWithoutProperties","_excluded","handleCloseEditModal","resolvedAt","trialRoomRef","completedAt","handleCloseJudgmentModal","numericAmount","sender","recipient","senderName","recipientName","senderRef","recipientRef","complaintDocRef","senderSnap","recipientSnap","complaintSnap","Error","senderCash","cash","increment","settlementAmount","settlementDate"],"ignoreList":[],"sourceRoot":""}