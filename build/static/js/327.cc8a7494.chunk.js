"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[327],{9327(e,i,s){s.r(i),s.d(i,{default:()=>h});var n=s(2555),a=s(5043),t=s(5016),d=s(2419),l=s(5472),r=s(577),c=s(5452),o=s(579);const m=e=>{if(!e)return"\ub0a0\uc9dc \uc815\ubcf4 \uc5c6\uc74c";try{return new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(i){return c.vF.error("Error formatting date:",i),"\ub0a0\uc9dc \ud615\uc2dd \uc624\ub958"}},u=(e,i,s)=>{const{likes:n=0,dislikes:a=0,likedBy:t=[],dislikedBy:d=[]}=e,l=t.includes(s),r=d.includes(s);let c,o;if("like"===i){if(l)return 0;c=n-a,o=r?n+1-(a-1):n+1-a}else{if("dislike"!==i)return 0;if(r)return 0;c=n-a,o=l?n-1-(a+1):n-(a+1)}const m=Math.max(0,Math.floor(c/3));return Math.max(0,Math.floor(o/3))-m},h=()=>{const{userDoc:e,isAdmin:i,addCouponsToUser:s,loading:h}=(0,t.As)(),b=null===e||void 0===e?void 0:e.id,v=null===e||void 0===e?void 0:e.classCode,[p,x]=(0,a.useState)(null),[j,f]=(0,a.useState)(!1),[g,N]=(0,a.useState)(!1),[k,y]=(0,a.useState)({title:"",content:""}),[C,B]=(0,a.useState)(0),[H,w]=(0,a.useState)(""),[A,S]=(0,a.useState)(!1),[D,G]=(0,a.useState)(!1),[I,F]=(0,a.useState)(null),[E,O]=(0,a.useState)(""),[q,M]=(0,a.useState)(!1),J=(0,a.useMemo)(()=>v?(0,l.rJ)(d.db,"classes",v,"learningBoards"):null,[v]),V=(0,a.useCallback)(async()=>{if(!v)return[];const e=(0,l.rJ)(d.db,"classes",v,"learningBoards"),i=(0,l.query)(e,(0,l.orderBy)("name"),(0,l.limit)(100));return(await(0,l.getDocs)(i)).docs.map(e=>(0,n.A)((0,n.A)({id:e.id},e.data()),{},{isHidden:"boolean"===typeof e.data().isHidden&&e.data().isHidden}))},[v]),{data:Z=[],loading:T,refetch:_}=(0,r.nm)(V,{interval:18e5,enabled:!!v,deps:[v]}),K=(0,a.useCallback)(async()=>{if(!p||!v)return[];const e=(0,l.rJ)(d.db,"classes",v,"learningBoards",p.id,"posts"),i=(0,l.query)(e,(0,l.orderBy)("timestamp","desc"),(0,l.limit)(100));return(await(0,l.getDocs)(i)).docs.map(e=>{var i;return(0,n.A)((0,n.A)({id:e.id},e.data()),{},{adminCouponGiven:"boolean"===typeof e.data().adminCouponGiven&&e.data().adminCouponGiven,coupons:Number(e.data().coupons)||0,likes:Number(e.data().likes)||0,dislikes:Number(e.data().dislikes)||0,likedBy:Array.isArray(e.data().likedBy)?e.data().likedBy:[],dislikedBy:Array.isArray(e.data().dislikedBy)?e.data().dislikedBy:[],timestamp:null!==(i=e.data().timestamp)&&void 0!==i&&i.toDate?e.data().timestamp.toDate().toISOString():(new Date).toISOString()})})},[p,v]),{data:L=[],loading:P,refetch:R}=(0,r.nm)(K,{interval:6e5,enabled:!!p&&!!v,deps:[null===p||void 0===p?void 0:p.id,v]}),U=(0,a.useMemo)(()=>i&&i(),[i]);if((0,a.useEffect)(()=>{M(p&&!g||(A||D))},[p,g,A,D]),h)return(0,o.jsx)("div",{className:"info-message",children:"\ud559\uc2b5 \uac8c\uc2dc\ud310 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub529 \uc911..."});if(!e)return(0,o.jsx)("div",{className:"info-message",children:"\uac8c\uc2dc\ud310\uc744 \uc774\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."});if(!v&&!U)return(0,o.jsx)("div",{className:"info-message",children:"\uac8c\uc2dc\ud310\uc744 \uc774\uc6a9\ud558\ub824\uba74 \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."});if(v&&T)return(0,o.jsxs)("div",{className:"info-message",children:["\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911... (\ud559\uae09: ",v,")"]});if(p&&P)return(0,o.jsxs)("div",{className:"info-message",children:["'",p.name,"' \uac8c\uc2dc\uae00 \ub85c\ub529 \uc911... (\ud559\uae09: ",v,")"]});if(U&&!v)return(0,o.jsx)("div",{className:"info-message",children:"\uad00\ub9ac\uc790\ub2d8, \ud604\uc7ac \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \uac8c\uc2dc\ud310 \ub0b4\uc6a9\uc744 \ubcfc \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud504\ub85c\ud544\uc5d0\uc11c \ud559\uae09 \ucf54\ub4dc\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694."});const z=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=Z.find(i=>i.id===e),n=!(!U||"boolean"!==typeof U)&&U;s&&(i||!s.isHidden||n)?(x(s),N(!1),i||G(!1)):s&&s.isHidden&&!n&&!i?(alert("\uc774 \uac8c\uc2dc\ud310\uc740 \ud604\uc7ac \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),x(null)):x(null)},Q=()=>{U&&S(e=>(c.vF.log("[Debug] Admin panel toggle:",!e),!e))},W=async function(e,i,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!v||!b)return;const t=(0,l.H9)(d.db,"classes",v,"learningBoards",e,"posts",i);try{await(0,l.c4)(d.db,async e=>{var i,d;const r=await e.get(t);if(!r.exists())throw"\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.";const c=r.data(),o={};let m=0;const h=null===(i=c.likedBy)||void 0===i?void 0:i.includes(b),v=null===(d=c.dislikedBy)||void 0===d?void 0:d.includes(b);if("like"===n){if(h)return;o.likedBy=(0,l.hq)(b),o.likes=(0,l.GV)(1),v&&(o.dislikedBy=(0,l.C3)(b),o.dislikes=(0,l.GV)(-1)),m=u(c,"like",b)}else if("dislike"===n){if(v)return;o.dislikedBy=(0,l.hq)(b),o.dislikes=(0,l.GV)(1),h&&(o.likedBy=(0,l.C3)(b),o.likes=(0,l.GV)(-1)),m=u(c,"dislike",b)}else{if(!("adminCoupon"===n&&U&&"number"===typeof a&&a>0))return;if(c.adminCouponGiven)return void alert("\uc774 \uac8c\uc2dc\uae00\uc5d0\ub294 \uc774\ubbf8 \uad00\ub9ac\uc790 \ucfe0\ud3f0\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");o.adminCouponGiven=!0,m=a}0!==m&&(o.coupons=(0,l.GV)(m)),o.updatedAt=(0,l.O5)(),e.update(t,o),0!==m&&c.authorId&&c.authorId!==b&&s&&s(c.authorId,m)}),R(),"adminCoupon"===n&&U&&(alert("\uac8c\uc2dc\uae00(ID: ".concat(i.slice(-6),")\uc5d0 \uad00\ub9ac\uc790 \ucfe0\ud3f0 ").concat(a,"\uac1c\uac00 \uc9c0\uae09 \ucc98\ub9ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),B(0))}catch(r){c.vF.error("Error updating post ".concat(n,":"),r),alert("\uac8c\uc2dc\uae00 ".concat(n," \ucc98\ub9ac \uc911 \uc624\ub958: ").concat(r.message))}},X=(e,i,s)=>W(e,i,"adminCoupon",s),Y=()=>{F(null),O("")},$=e=>{O(e.target.value)},ee=async e=>{if(e.preventDefault(),!I||!v||!U)return;const i=E.trim();if(!i)return alert("\uac8c\uc2dc\ud310 \uc774\ub984\uc740 \ube44\uc6cc\ub458 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(Z.some(e=>e.id!==I&&e.name===i))return alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\ub984\uc785\ub2c8\ub2e4.");const s=(0,l.H9)(d.db,"classes",v,"learningBoards",I);try{await(0,l.mZ)(s,{name:i,updatedAt:(0,l.O5)()}),_(),Y()}catch(n){c.vF.error("Error updating board name:",n),alert("\uac8c\uc2dc\ud310 \uc774\ub984 \uc218\uc815 \uc624\ub958.")}},ie=(Z||[]).filter(e=>!e.isHidden),se=Z||[],ne="learning-board-container ".concat(q?"full-width-mode":""," ").concat(A&&U?"admin-panel-active":"");return(0,o.jsxs)("div",{className:ne,children:[(0,o.jsxs)("div",{className:"main-board",children:[U&&(0,o.jsx)("button",{className:"admin-panel-toggle-btn",onClick:Q,children:A?"\uad00\ub9ac\uc790 \ub2eb\uae30":"\uad00\ub9ac\uc790 \uc5f4\uae30"}),(0,o.jsxs)("h1",{children:["\ud559\uc2b5 \uac8c\uc2dc\ud310 ",v&&"(\ud559\uae09: ".concat(v,")")]}),(0,o.jsxs)("div",{className:"board-actions",children:[(0,o.jsx)("button",{className:"write-btn ".concat(j&&g?"active":""),onClick:()=>{v||U?(f(!0),N(!0),x(null),G(!1)):alert("\uae00\uc744 \uc791\uc131\ud560 \ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},children:"\uae00\uc4f0\uae30"}),(0,o.jsx)("button",{className:"view-btn ".concat(!j&&g?"active":""),onClick:()=>{v||U?(f(!1),N(!0),x(null),G(!1)):alert("\uae00\uc744 \uc870\ud68c\ud560 \ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},children:"\uae00\ubcf4\uae30"}),U&&(0,o.jsxs)("button",{className:"hidden-boards-toggle-btn ".concat(D?"active":""),onClick:()=>{if(!U)return;const e=!D;G(e),e&&(N(!1),x(null),f(!1))},children:["\uc228\uae40 \uad00\ub9ac (",Z.filter(e=>e.isHidden).length,")"]})]}),(0,o.jsxs)("div",{className:"board-content-area",children:[g&&!D&&(0,o.jsxs)("div",{className:"board-selection",children:[(0,o.jsx)("h2",{children:j?"\uae00 \uc791\uc131\ud560 \uac8c\uc2dc\ud310 \uc120\ud0dd":"\uc870\ud68c\ud560 \uac8c\uc2dc\ud310 \uc120\ud0dd"}),(0,o.jsx)("div",{className:"board-buttons-container",children:ie.length>0?ie.map(e=>(0,o.jsx)("div",{className:"board-button-item",children:(0,o.jsxs)("button",{className:"board-btn ".concat((null===p||void 0===p?void 0:p.id)===e.id?"selected":""),onClick:()=>z(e.id,!1),title:e.isHidden?"".concat(e.name," (\uc228\uae40)"):e.name,children:[(0,o.jsx)("span",{className:"board-name",children:e.name}),U&&e.isHidden&&(0,o.jsx)("span",{className:"hidden-icon",title:"\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310",children:"\ud83d\udc41\ufe0f"})]})},e.id)):(0,o.jsx)("p",{className:"info-message small",children:T?"\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911...":"\ud45c\uc2dc\ud560 \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]}),D&&U&&(0,o.jsxs)("div",{className:"hidden-boards-list admin-section",children:[(0,o.jsx)("h2",{children:"\uc228\uae40 \uac8c\uc2dc\ud310 \uad00\ub9ac \ubc0f \ubcf4\uae30/\uc4f0\uae30"}),0===se.length&&(0,o.jsx)("p",{className:"info-message small",children:T?"\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911...":"\uc0dd\uc131\ub41c \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,o.jsx)("div",{className:"board-buttons-container",children:se.map(e=>(0,o.jsx)("div",{className:"board-button-item",children:(0,o.jsxs)("button",{className:"board-btn ".concat((null===p||void 0===p?void 0:p.id)===e.id?"selected":""," ").concat(e.isHidden?"hidden-board-for-admin":""),onClick:()=>z(e.id,!0),title:e.isHidden?"".concat(e.name," (\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310)"):e.name,children:[e.isHidden?"\ud83d\udd12":"\ud83d\udcc2"," ",e.name]})},"hidden-view-".concat(e.id)))}),p&&(0,o.jsxs)("div",{className:"board-actions",style:{marginTop:"1rem",marginBottom:"1rem"},children:[(0,o.jsxs)("button",{className:"write-btn",onClick:()=>f(!0),children:["'",p.name,"'\uc5d0 \uae00\uc4f0\uae30"]}),(0,o.jsxs)("button",{className:"view-btn",onClick:()=>f(!1),children:["'",p.name,"' \uae00\ubcf4\uae30"]})]}),(0,o.jsx)("h3",{children:"\uc228\uae40/\ubcf5\uad6c/\uc0ad\uc81c \ucc98\ub9ac:"}),0===Z.length?(0,o.jsx)("p",{className:"info-message small",children:"\uad00\ub9ac\ud560 \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("ul",{children:Z.sort((e,i)=>e.name.localeCompare(i.name)).map(e=>(0,o.jsxs)("li",{className:"hidden-board-item ".concat(e.isHidden?"item-is-hidden":"item-is-visible"),children:[(0,o.jsxs)("span",{children:[e.name," (",e.isHidden?"\uc228\uae40 \uc0c1\ud0dc":"\uacf5\uac1c \uc0c1\ud0dc",")"]}),(0,o.jsxs)("div",{className:"hidden-board-actions",children:[e.isHidden?(0,o.jsx)("button",{className:"restore-board-btn action-btn",title:"".concat(e.name," \ubcf5\uad6c"),onClick:()=>(async e=>{if(!U||!v)return;const i=(0,l.H9)(d.db,"classes",v,"learningBoards",e);try{await(0,l.mZ)(i,{isHidden:!1,updatedAt:(0,l.O5)()}),_()}catch(s){c.vF.error("Error restoring board:",s)}})(e.id),children:"\u2705 \uacf5\uac1c\ub85c"}):(0,o.jsx)("button",{className:"hide-board-btn action-btn",title:"".concat(e.name," \uc228\uae30\uae30"),onClick:()=>(async e=>{if(!U||!v)return;const i=(0,l.H9)(d.db,"classes",v,"learningBoards",e);try{await(0,l.mZ)(i,{isHidden:!0,updatedAt:(0,l.O5)()}),_(),p&&p.id===e&&x(null)}catch(s){c.vF.error("Error hiding board:",s)}})(e.id),children:"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f \uc228\uae30\uae30"}),(0,o.jsx)("button",{className:"delete-board-btn action-btn",title:"".concat(e.name," \uc601\uad6c \uc0ad\uc81c"),onClick:()=>(async e=>{if(!U||!v)return;const i=Z.find(i=>i.id===e);if(window.confirm("'".concat(null===i||void 0===i?void 0:i.name,"' \uac8c\uc2dc\ud310\uacfc \ubaa8\ub4e0 \uac8c\uc2dc\uae00\uc744 \uc601\uad6c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const i=(0,l.H9)(d.db,"classes",v,"learningBoards",e),s=(0,l.rJ)(i,"posts"),n=await(0,l.getDocs)(s),a=(0,l.wP)(d.db);n.docs.forEach(e=>a.delete(e.ref)),a.delete(i),await a.commit(),_(),p&&p.id===e&&x(null)}catch(s){c.vF.error("Error deleting board:",s),alert("\uac8c\uc2dc\ud310 \uc0ad\uc81c \uc624\ub958.")}})(e.id),children:"\u274c \uc0ad\uc81c"})]})]},"manage-".concat(e.id)))})]}),j&&p&&(!p.isHidden||U)&&(0,o.jsxs)("div",{className:"post-form-container",children:[(0,o.jsxs)("h2",{children:[p.name,"\uc5d0 \uae00\uc4f0\uae30"," ",p.isHidden?"(\uc228\uae40 \uac8c\uc2dc\ud310)":""]}),(0,o.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),!p||!v||!b)return void alert("\uae00\uc744 \uc791\uc131\ud560 \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud558\uac70\ub098 \ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.");if(p.isHidden&&!U)return void alert("\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310\uc5d0\ub294 \uae00\uc744 \uc791\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!k.title.trim()||!k.content.trim())return void alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s={title:k.title,content:k.content,author:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.nickname)||"\uc775\uba85",authorId:b,likes:0,dislikes:0,likedBy:[],dislikedBy:[],coupons:0,timestamp:(0,l.O5)(),adminCouponGiven:!1,classCode:v};try{const e=(0,l.rJ)(d.db,"classes",v,"learningBoards",p.id,"posts");await(0,l.addDoc)(e,s),R(),y({title:"",content:""}),alert("\uac8c\uc2dc\uae00\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(n){c.vF.error("Error submitting post:",n),alert("\uac8c\uc2dc\uae00 \uc81c\ucd9c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(n.message))}},className:"post-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"\uc81c\ubaa9"}),(0,o.jsx)("input",{type:"text",value:k.title,onChange:e=>y((0,n.A)((0,n.A)({},k),{},{title:e.target.value})),required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,o.jsx)("textarea",{value:k.content,onChange:e=>y((0,n.A)((0,n.A)({},k),{},{content:e.target.value})),required:!0,rows:"8"})]}),(0,o.jsx)("button",{type:"submit",className:"submit-btn",children:"\uac8c\uc2dc\ud558\uae30"})]})]}),j&&p&&p.isHidden&&!U&&!D&&(0,o.jsx)("p",{className:"info-message",children:"\uc120\ud0dd\ud55c \uac8c\uc2dc\ud310\uc740 \uc228\uaca8\uc838 \uc788\uc5b4 \uae00\uc744 \uc791\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),j&&!p&&(0,o.jsx)("p",{className:"info-message",children:"\uae00\uc744 \uc791\uc131\ud560 \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694. (\uc0c1\ub2e8 \ubaa9\ub85d\uc5d0\uc11c \uc120\ud0dd)"}),!j&&p&&(!p.isHidden||U&&D)&&(0,o.jsxs)("div",{className:"posts-container",children:[(0,o.jsxs)("h2",{children:[p.name," \uae00 \ubaa9\ub85d"," ",p.isHidden?"(\uc228\uae40 \uac8c\uc2dc\ud310 - \uad00\ub9ac\uc790 \ubdf0)":""]}),P?(0,o.jsx)("p",{className:"info-message small",children:"\uac8c\uc2dc\uae00 \ub85c\ub529 \uc911..."}):0===((null===L||void 0===L?void 0:L.length)||0)?(0,o.jsx)("p",{className:"no-posts",children:"\uc544\uc9c1 \uc791\uc131\ub41c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"posts-list",children:L.map(e=>{var i,s,n,a,t,d;return(0,o.jsxs)("div",{className:"post-card",children:[(0,o.jsx)("h3",{children:e.title}),(0,o.jsxs)("div",{className:"post-meta",children:[(0,o.jsxs)("span",{children:["\uc791\uc131\uc790: ",e.author||"\uc54c \uc218 \uc5c6\uc74c"]}),(0,o.jsxs)("span",{children:["\uc791\uc131\uc77c: ",m(e.timestamp)]})]}),(0,o.jsx)("p",{className:"post-content",children:e.content}),(0,o.jsxs)("div",{className:"post-stats",children:[(0,o.jsxs)("div",{className:"likes-container",children:[(0,o.jsxs)("button",{className:"like-btn ".concat(null!==(i=e.likedBy)&&void 0!==i&&i.includes(b)?"active":""," ").concat(e.authorId===b?"disabled":""),onClick:()=>{return i=p.id,s=e.id,W(i,s,"like");var i,s},disabled:(null===(s=e.likedBy)||void 0===s?void 0:s.includes(b))||(null===(n=e.dislikedBy)||void 0===n?void 0:n.includes(b))||e.authorId===b,children:["\ud83d\udc4d \uc88b\uc544\uc694 ",e.likes||0]}),(0,o.jsxs)("button",{className:"dislike-btn ".concat(null!==(a=e.dislikedBy)&&void 0!==a&&a.includes(b)?"active":""," ").concat(e.authorId===b?"disabled":""),onClick:()=>{return i=p.id,s=e.id,W(i,s,"dislike");var i,s},disabled:(null===(t=e.likedBy)||void 0===t?void 0:t.includes(b))||(null===(d=e.dislikedBy)||void 0===d?void 0:d.includes(b))||e.authorId===b,children:["\ud83d\udc4e \uc2eb\uc5b4\uc694 ",e.dislikes||0]})]}),(0,o.jsxs)("div",{className:"coupon-info",children:[(0,o.jsxs)("span",{children:["\ud68d\ub4dd \ucfe0\ud3f0: ",e.coupons||0,"\uac1c"]}),(0,o.jsxs)("span",{children:["\uc2e4\ud6a8 \uc88b\uc544\uc694:"," ",(e.likes||0)-(e.dislikes||0)]}),e.adminCouponGiven&&!U&&(0,o.jsx)("span",{className:"admin-verified-badge",title:"\uad00\ub9ac\uc790\uac00 \ud655\uc778\ud558\uace0 \ucfe0\ud3f0\uc744 \uc9c0\uae09\ud55c \uae00\uc785\ub2c8\ub2e4.",children:"\u2728 \uad00\ub9ac\uc790 \ud655\uc778 \uc644\ub8cc"})]}),U&&(0,o.jsxs)("div",{className:"admin-coupon-controls",children:[(0,o.jsxs)("h4",{children:["\uad00\ub9ac\uc790 \ucfe0\ud3f0 \uc9c0\uae09 (\uae00 ID: ",e.id.slice(-4),")"]}),e.adminCouponGiven?(0,o.jsx)("p",{className:"coupon-given-message",children:"\u2705 \uc774 \uae00\uc5d0\ub294 \uad00\ub9ac\uc790 \ucfe0\ud3f0\uc774 \uc774\ubbf8 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"coupon-buttons",children:[1,3,5].map(i=>(0,o.jsxs)("button",{onClick:()=>X(p.id,e.id,i),children:["+",i," \ucfe0\ud3f0"]},i))}),(0,o.jsxs)("div",{className:"custom-coupon",children:[(0,o.jsx)("input",{type:"number",min:"1",value:0===C?"":C,onChange:e=>{const i=parseInt(e.target.value);B(Number.isNaN(i)?0:i)},placeholder:"\uc9c1\uc811 \uc785\ub825"}),(0,o.jsx)("button",{onClick:()=>X(p.id,e.id,C),disabled:C<=0,children:"\uc9c0\uae09"})]})]})]})]})]},e.id)})})]}),!j&&p&&p.isHidden&&!U&&!D&&(0,o.jsx)("p",{className:"info-message",children:"\uc774 \uac8c\uc2dc\ud310\uc740 \ud604\uc7ac \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),!j&&!p&&!D&&!g&&(0,o.jsx)("p",{className:"info-message",children:"\uac8c\uc2dc\ud310 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc0c1\ub2e8\uc758 '\uae00\uc4f0\uae30' \ub610\ub294 '\uae00\ubcf4\uae30' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})]})]}),U&&(0,o.jsxs)("div",{className:"admin-panel ".concat(A?"visible":""),style:{right:A?"0px":"-100vw",transition:"right 0.4s ease-in-out",display:A?"block":"none",visibility:A?"visible":"hidden",opacity:A?1:0},children:[(0,o.jsx)("button",{className:"admin-panel-close-btn",onClick:Q,children:"\xd7"}),(0,o.jsx)("h2",{children:"\uad00\ub9ac\uc790 \uae30\ub2a5"}),(0,o.jsxs)("div",{className:"admin-section board-management",children:[(0,o.jsx)("h3",{children:"\uac8c\uc2dc\ud310 \uad00\ub9ac (\uc0dd\uc131/\uc774\ub984\ubcc0\uacbd)"}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!U||!v||!J)return void alert("\uac8c\uc2dc\ud310\uc744 \ucd94\uac00\ud560 \uc218 \uc788\ub294 \uc870\uac74\uc774 \ucda9\uc871\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. (\uad00\ub9ac\uc790, \ud559\uae09\ucf54\ub4dc, \uac8c\uc2dc\ud310 \ucc38\uc870 \ud655\uc778)");const i=H.trim();if(!i)return alert("\uac8c\uc2dc\ud310 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(Z.some(e=>e.name===i))return alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uac8c\uc2dc\ud310 \uc774\ub984\uc785\ub2c8\ub2e4.");try{await(0,l.addDoc)(J,{name:i,isHidden:!1,createdAt:(0,l.O5)(),classCode:v}),_(),w("")}catch(s){c.vF.error("Error adding board:",s),alert("\uac8c\uc2dc\ud310 \ucd94\uac00 \uc624\ub958.")}},className:"add-board-form",children:[(0,o.jsx)("input",{type:"text",value:H,onChange:e=>w(e.target.value),placeholder:"\uc0c8 \uac8c\uc2dc\ud310 \uc774\ub984",required:!0}),(0,o.jsx)("button",{type:"submit",className:"add-board-btn",children:"\ucd94\uac00"})]}),(0,o.jsx)("ul",{className:"admin-board-list",children:[...Z].sort((e,i)=>(e.name||"").localeCompare(i.name||"")).map(e=>(0,o.jsx)("li",{className:"admin-board-manage-item ".concat(e.isHidden?"hidden":""),children:I===e.id?(0,o.jsxs)("form",{onSubmit:ee,className:"edit-board-form",children:[(0,o.jsx)("input",{type:"text",value:E,onChange:$,autoFocus:!0}),(0,o.jsx)("button",{type:"submit",className:"save-board-btn action-btn",children:"\ud83d\udcbe"}),(0,o.jsx)("button",{type:"button",className:"cancel-edit-btn action-btn",onClick:Y,children:"\u21a9\ufe0f"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:[e.name," ",e.isHidden?"(\uc228\uae40)":""]}),(0,o.jsx)("div",{className:"admin-board-item-actions",children:(0,o.jsx)("button",{className:"edit-board-btn action-btn",title:"".concat(e.name," \uc774\ub984 \uc218\uc815"),onClick:()=>(e=>{F(e.id),O(e.name)})(e),children:"\u270f\ufe0f"})})]})},e.id))})]}),(0,o.jsxs)("div",{className:"admin-section admin-stats",children:[(0,o.jsx)("h3",{children:"\ud1b5\uacc4"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:["\ucd1d \uac8c\uc2dc\ud310 (\uacf5\uac1c): ",Z.filter(e=>!e.isHidden).length,"\uac1c"]}),(0,o.jsxs)("li",{children:["\ucd1d \uac8c\uc2dc\ud310 (\uc228\uae40): ",Z.filter(e=>e.isHidden).length,"\uac1c"]}),(0,o.jsxs)("li",{children:["(\uc120\ud0dd\ub41c \uac8c\uc2dc\ud310) \ucd1d \uac8c\uc2dc\uae00: ",(null===L||void 0===L?void 0:L.length)||0," \uac1c"]}),(0,o.jsxs)("li",{children:["(\uc120\ud0dd\ub41c \uac8c\uc2dc\ud310) \ucd1d \ud68d\ub4dd \ucfe0\ud3f0:"," ",(L||[]).reduce((e,i)=>e+(i.coupons||0),0)," ","\uac1c"]})]})]})]})]})}}}]);
//# sourceMappingURL=327.cc8a7494.chunk.js.map