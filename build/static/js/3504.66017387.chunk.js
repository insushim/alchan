"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[3504],{3504(e,s,a){a.r(s),a.d(s,{default:()=>h});var t=a(2555),l=a(5043),r=a(2864),n=a(5016),i=a(5472),d=a(577),c=a(5452),o=a(579);const m={vetoOverrideRequired:17,adminPassword:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBym1FtGjHWM5JdZ7GWRIkYGOftQGdUDgc",REACT_APP_FIREBASE_APP_ID:"1:244696722605:web:5fcc744923422b091b6a24",REACT_APP_FIREBASE_AUTH_DOMAIN:"inconomysu-class.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://inconomysu-class-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-QXND3N8942",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"244696722605",REACT_APP_FIREBASE_PROJECT_ID:"inconomysu-class",REACT_APP_FIREBASE_STORAGE_BUCKET:"inconomysu-class.firebasestorage.app",REACT_APP_YOUTUBE_API_KEY:"AIzaSyCLoVzkfTOLt7qtESk0_EKrdogn9nqD9Oc"}.REACT_APP_ADMIN_DEFAULT_PASSWORD||"",lastUpdated:null},h=e=>{let{classCode:s}=e;const{isAdmin:a}=(0,n.As)()||{},[h,v]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[j,p]=(0,l.useState)(!1),[N,A]=(0,l.useState)(null),[f,_]=(0,l.useState)(""),[g,b]=(0,l.useState)(!1),[E,w]=(0,l.useState)(""),[R,S]=(0,l.useState)(!1),[P,C]=(0,l.useState)(m),[O,y]=(0,l.useState)(!1),[D,T]=(0,l.useState)({vetoOverrideRequired:m.vetoOverrideRequired,adminPassword:""}),[I,q]=(0,l.useState)(!0),[k,F]=(0,l.useState)(!0),B=(0,l.useCallback)(async()=>{if(!s)return;q(!0);const e=(0,i.H9)(r.db,"governmentSettings",s);try{const a=await(0,i.x7)(e);a.exists()?(C((0,t.A)((0,t.A)({},m),a.data())),T({vetoOverrideRequired:a.data().vetoOverrideRequired||m.vetoOverrideRequired,adminPassword:""})):(await(0,i.BN)(e,(0,t.A)((0,t.A)({},m),{},{lastUpdated:(0,i.O5)()})),C(m),T({vetoOverrideRequired:m.vetoOverrideRequired,adminPassword:""}),c.vF.log("[".concat(s,"] \uc815\ubd80 \uae30\ubcf8 \uc124\uc815 \uc0dd\uc131 \uc644\ub8cc")))}catch(a){c.vF.error("\uc815\ubd80 \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",a)}finally{q(!1)}},[s]);(0,d.nm)(B,{interval:36e5,enabled:!!s});const U=(0,l.useCallback)(async()=>{if(!s)return;F(!0);const e=(0,i.rJ)(r.db,"laws"),a=(0,i.query)(e,(0,i.where)("classCode","==",s));try{const e=(await(0,i.getDocs)(a)).docs.map(e=>(0,t.A)({id:e.id},e.data())),s=e.filter(e=>"approved"===e.status&&!e.presidentAction),l=e.filter(e=>"vetoed"===e.status);v(s),x(l)}catch(l){c.vF.error("\ubc95\uc548 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",l)}finally{F(!1)}},[s]);(0,d.nm)(U,{interval:18e5,enabled:!!s});const H=()=>{"function"===typeof a&&a()||E===P.adminPassword?(b(!0),S(!1),w("")):alert("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")},M=e=>{if(!e)return"\ub0a0\uc9dc \uc815\ubcf4 \uc5c6\uc74c";let s;return s=e.toDate?e.toDate():new Date(e),isNaN(s.getTime())?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc":"".concat(s.getFullYear(),"\ub144 ").concat(s.getMonth()+1,"\uc6d4 ").concat(s.getDate(),"\uc77c ").concat(s.getHours(),"\uc2dc ").concat(s.getMinutes(),"\ubd84")},G=e=>{if(!e)return"\uae30\ud55c \uc815\ubcf4 \uc5c6\uc74c";const s=new Date,a=new Date(e)-s;if(a<=0)return"\uc2dc\uac04 \ub9cc\ub8cc";const t=Math.floor(a/36e5),l=Math.floor(a%36e5/6e4);return"".concat(t,"\uc2dc\uac04 ").concat(l,"\ubd84 \ub0a8\uc74c")};return s?I||k?(0,o.jsx)("div",{className:"org-chart-container",children:(0,o.jsx)("p",{children:"\uc815\ubd80 \uc870\uc9c1\ub3c4 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})}):(0,o.jsxs)("div",{className:"org-chart-container",children:[(0,o.jsxs)("div",{className:"org-header",children:[(0,o.jsxs)("h1",{className:"org-title",children:["\uc815\ubd80 \uc870\uc9c1\ub3c4 (\ud559\uae09: ",s,")"]}),(0,o.jsxs)("div",{className:"admin-controls",children:[(0,o.jsx)("button",{className:"admin-toggle ".concat(g?"admin-active":""),onClick:()=>{g?b(!1):S(!0)},children:g?"\uad00\ub9ac\uc790 \ubaa8\ub4dc \ud574\uc81c":"\uad00\ub9ac\uc790 \ubaa8\ub4dc"}),g&&(0,o.jsx)("button",{className:"settings-button",onClick:()=>{T({vetoOverrideRequired:P.vetoOverrideRequired,adminPassword:""}),y(!0)},children:"\uc124\uc815"})]})]}),(0,o.jsxs)("div",{className:"president-section",children:[(0,o.jsxs)("div",{className:"president-office",children:[(0,o.jsx)("h2",{children:"\ub300\ud1b5\ub839\uc2e4"}),g&&(0,o.jsx)("div",{className:"admin-indicator",children:"\uad00\ub9ac\uc790 \ub85c\uadf8\uc778\ub428"})]}),(0,o.jsxs)("div",{className:"law-approval-section",children:[(0,o.jsx)("h3",{children:"\uc2b9\uc778 \ub300\uae30 \uc911\uc778 \ubc95\uc548"}),0===h.length?(0,o.jsx)("div",{className:"empty-state",children:"\uc2b9\uc778 \ub300\uae30 \uc911\uc778 \ubc95\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"pending-laws",children:h.map(e=>(0,o.jsxs)("div",{className:"law-card",children:[(0,o.jsxs)("div",{className:"law-header",children:[(0,o.jsx)("h3",{className:"law-title",children:e.title}),(0,o.jsx)("div",{className:"law-status",children:"\uad6d\ud68c \uac00\uacb0 (\uc2b9\uc778 \ub300\uae30)"})]}),(0,o.jsxs)("div",{className:"law-content",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\ucde8\uc9c0:"})," ",e.purpose]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uc124\uba85:"})," ",e.description]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\ubc8c\uae08:"})," ",e.fine?"".concat(e.fine.toLocaleString(),"\uc6d0"):"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uad6d\ud68c \uc2b9\uc778:"})," \ucc2c\uc131 ",e.approvals||0,"\uba85, \ubc18\ub300 ",e.disapprovals||0,"\uba85"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uad6d\ud68c \uac00\uacb0\uc77c:"})," ",M(e.approvalDate)]})]}),(0,o.jsxs)("div",{className:"law-actions",children:[(0,o.jsx)("button",{className:"approve-button",onClick:()=>(async e=>{if(!g||!s)return void alert("\uad00\ub9ac\uc790 \ubaa8\ub4dc\uc5d0\uc11c\ub9cc \uc2b9\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const a=(0,i.H9)(r.db,"laws",e.id);try{await(0,i.mZ)(a,{presidentAction:"approved",finalStatus:"final_approved",finalApprovalDate:(0,i.O5)(),status:"final_approved"}),await U(),alert('"'.concat(e.title,'" \ubc95\uc548\uc774 \ucd5c\uc885 \uc2b9\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4.'))}catch(t){c.vF.error("\ubc95\uc548 \uc2b9\uc778 \uc624\ub958:",t),alert("\ubc95\uc548 \uc2b9\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})(e),disabled:!g,children:"\ucd5c\uc885 \uc2b9\uc778"}),(0,o.jsx)("button",{className:"veto-button",onClick:()=>(e=>{g?(A(e),_(""),p(!0)):alert("\uad00\ub9ac\uc790 \ubaa8\ub4dc\uc5d0\uc11c\ub9cc \uac70\ubd80\uad8c\uc744 \ud589\uc0ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e),disabled:!g,children:"\uac70\ubd80\uad8c \ud589\uc0ac"})]})]},e.id))})]}),(0,o.jsxs)("div",{className:"vetoed-laws-section",children:[(0,o.jsx)("h3",{children:"\uc7ac\uc758\uacb0 \uc9c4\ud589 \uc911\uc778 \ubc95\uc548 (\ub300\ud1b5\ub839 \uac70\ubd80)"}),0===u.length?(0,o.jsx)("div",{className:"empty-state",children:"\uc7ac\uc758\uacb0 \uc9c4\ud589 \uc911\uc778 \ubc95\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"vetoed-laws",children:u.map(e=>(0,o.jsxs)("div",{className:"law-card vetoed",children:[(0,o.jsxs)("div",{className:"law-header",children:[(0,o.jsx)("h3",{className:"law-title",children:e.title}),(0,o.jsx)("div",{className:"veto-status",children:"\uac70\ubd80\uad8c \ud589\uc0ac\ub428 (\uc7ac\uc758\uacb0 \ud544\uc694)"})]}),(0,o.jsxs)("div",{className:"law-content",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\ucde8\uc9c0:"})," ",e.purpose]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uc124\uba85:"})," ",e.description]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\ubc8c\uae08:"})," ",e.fine?"".concat(e.fine.toLocaleString(),"\uc6d0"):"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uac70\ubd80 \uc0ac\uc720:"})," ",e.vetoReason]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uac70\ubd80 \uc2dc\uac04:"})," ",M(e.vetoDate)]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\uc7ac\uc758\uacb0 \ub9c8\uac10:"})," ",M(e.vetoDeadline)," (",G(e.vetoDeadline),")"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\ud604\uc7ac \uc7ac\uc758\uacb0 \ud604\ud669 (\uad6d\ud68c):"})," \ucc2c\uc131"," ",e.approvals||0,"\uba85 / \ud544\uc694"," ",P.vetoOverrideRequired,"\uba85"]})]})]},e.id))})]})]}),j&&N&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-container",children:[(0,o.jsx)("div",{className:"modal-header",children:(0,o.jsx)("h2",{className:"modal-title",children:"\uac70\ubd80\uad8c \ud589\uc0ac"})}),(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsx)("h3",{children:N.title}),(0,o.jsx)("p",{children:"\uc774 \ubc95\uc548\uc5d0 \ub300\ud574 \uac70\ubd80\uad8c\uc744 \ud589\uc0ac\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,o.jsxs)("p",{children:["\uad6d\ud68c \uc7ac\uc758\uacb0\uc744 \uc704\ud574\uc11c\ub294"," ",(0,o.jsxs)("strong",{children:[P.vetoOverrideRequired,"\uba85"]})," \uc774\uc0c1\uc758 \ucc2c\uc131\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"\uac70\ubd80 \uc0ac\uc720 (\ud544\uc218)"}),(0,o.jsx)("textarea",{className:"form-textarea",rows:"4",value:f,onChange:e=>_(e.target.value),placeholder:"\uac70\ubd80 \uc0ac\uc720\ub97c \uc0c1\uc138\ud788 \uc791\uc131\ud574\uc8fc\uc138\uc694."})]})]}),(0,o.jsxs)("div",{className:"modal-footer",children:[(0,o.jsx)("button",{className:"modal-button cancel",onClick:()=>{p(!1),A(null)},children:"\ucde8\uc18c"}),(0,o.jsx)("button",{className:"modal-button veto",onClick:async()=>{if(!f)return void alert("\uac70\ubd80 \uc0ac\uc720\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(!N||!s)return;const e=(0,i.H9)(r.db,"laws",N.id),a=new Date(Date.now()+864e5).toISOString();try{await(0,i.mZ)(e,{status:"vetoed",presidentAction:"vetoed",vetoReason:f,vetoDate:(0,i.O5)(),approvals:0,disapprovals:0,voters:[],vetoDeadline:a,finalStatus:null}),await U(),p(!1),A(null),alert('"'.concat(N.title,'" \ubc95\uc548\uc5d0 \uac70\ubd80\uad8c\uc774 \ud589\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uad6d\ud68c\uc5d0\uc11c \uc7ac\uc758\uacb0 \uc808\ucc28\uac00 \uc2dc\uc791\ub429\ub2c8\ub2e4.'))}catch(t){c.vF.error("\uac70\ubd80\uad8c \ud589\uc0ac \uc624\ub958:",t),alert("\uac70\ubd80\uad8c \ud589\uc0ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},disabled:!f,children:"\uac70\ubd80\uad8c \ud589\uc0ac"})]})]})}),R&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-container small",children:[(0,o.jsx)("div",{className:"modal-header",children:(0,o.jsx)("h2",{className:"modal-title",children:"\uad00\ub9ac\uc790 \ub85c\uadf8\uc778"})}),(0,o.jsx)("div",{className:"modal-content",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"\ube44\ubc00\ubc88\ud638"}),(0,o.jsx)("input",{type:"password",className:"form-input",value:E,onChange:e=>w(e.target.value),placeholder:"\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",onKeyPress:e=>"Enter"===e.key&&H()})]})}),(0,o.jsxs)("div",{className:"modal-footer",children:[(0,o.jsx)("button",{className:"modal-button cancel",onClick:()=>S(!1),children:"\ucde8\uc18c"}),(0,o.jsx)("button",{className:"modal-button submit",onClick:H,children:"\ub85c\uadf8\uc778"})]})]})}),O&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-container",children:[(0,o.jsx)("div",{className:"modal-header",children:(0,o.jsx)("h2",{className:"modal-title",children:"\uad00\ub9ac\uc790 \uc124\uc815"})}),(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"\uc7ac\uc758\uacb0 \ud544\uc694 \ucc2c\uc131\uc218"}),(0,o.jsx)("input",{type:"number",className:"form-input",min:"1",value:D.vetoOverrideRequired,onChange:e=>T((0,t.A)((0,t.A)({},D),{},{vetoOverrideRequired:parseInt(e.target.value)||0}))}),(0,o.jsx)("p",{className:"form-hint",children:"\uac70\ubd80\uad8c \ud589\uc0ac \ud6c4 \ubc95\uc548\uc774 \ucd5c\uc885 \uac00\uacb0\ub418\uae30 \uc704\ud574 \ud544\uc694\ud55c \uad6d\ud68c \ucc2c\uc131\ud45c \uc218"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"\uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd (\uc120\ud0dd)"}),(0,o.jsx)("input",{type:"password",className:"form-input",value:D.adminPassword,onChange:e=>T((0,t.A)((0,t.A)({},D),{},{adminPassword:e.target.value})),placeholder:"\ubcc0\uacbd\ud558\ub824\uba74 \uc785\ub825, \uc544\ub2c8\uba74 \ube44\uc6cc\ub450\uc138\uc694"})]})]}),(0,o.jsxs)("div",{className:"modal-footer",children:[(0,o.jsx)("button",{className:"modal-button cancel",onClick:()=>y(!1),children:"\ucde8\uc18c"}),(0,o.jsx)("button",{className:"modal-button submit",onClick:async()=>{if(!s)return;if(!D.vetoOverrideRequired||D.vetoOverrideRequired<1)return void alert("\uc7ac\uc758\uacb0 \ud544\uc694 \ucc2c\uc131\uc218\ub294 1 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");const e=(0,i.H9)(r.db,"governmentSettings",s),a={vetoOverrideRequired:parseInt(D.vetoOverrideRequired),lastUpdated:(0,i.O5)()};D.adminPassword&&(a.adminPassword=D.adminPassword);try{await(0,i.mZ)(e,a),await B(),y(!1),alert("\uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){c.vF.error("\uc124\uc815 \uc800\uc7a5 \uc624\ub958:",t),alert("\uc124\uc815 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\uc800\uc7a5"})]})]})})]}):(0,o.jsx)("div",{className:"org-chart-container",children:(0,o.jsx)("p",{children:"\uc120\ud0dd\ub41c \ud559\uae09\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ud559\uae09\uc744 \uba3c\uc800 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})})}}}]);
//# sourceMappingURL=3504.66017387.chunk.js.map