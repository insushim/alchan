{"version":3,"file":"static/js/7393.f5de003c.chunk.js","mappings":"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","sources":["pages/games/OmokGame.js"],"sourcesContent":["// src/OmokGame.js - ë­í‚¹ í¬ì¸íŠ¸ ì‹œìŠ¤í…œ ìˆ˜ì • ë° UI ê°œì„  (ì¬ëŒ€ê²° ê¸°ëŠ¥ ì¶”ê°€)\nimport React, {\n  useState,\n  useEffect,\n  useCallback,\n  useMemo,\n  useRef,\n} from \"react\";\nimport {\n  collection,\n  doc,\n  addDoc,\n  updateDoc,\n  getDoc,\n  runTransaction,\n  serverTimestamp,\n  deleteDoc,\n  query,\n  where,\n  getDocs,\n  orderBy,\n  increment,\n} from \"firebase/firestore\";\nimport { db } from \"../../firebase\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { usePolling } from \"../../hooks/usePolling\";\nimport { logActivity, ACTIVITY_TYPES } from \"../../utils/firestoreHelpers\";\nimport \"./OmokGame.css\";\nimport \"./GamePage.css\";\n\nimport { logger } from \"../../utils/logger\";\n// [ë­í¬ ì‹œìŠ¤í…œ] ë­í¬ í¬ì¸íŠ¸(RP) ê¸°ì¤€ ì •ì˜\nconst RANKS = [\n  { title: \"LEGEND\", color: \"#ff0066\", minRP: 2000, icon: \"ğŸ‘‘\" },\n  { title: \"MASTER\", color: \"#ff4500\", minRP: 1500, icon: \"ğŸ’\" },\n  { title: \"DIAMOND\", color: \"#00bfff\", minRP: 1300, icon: \"ğŸ’ \" },\n  { title: \"PLATINUM\", color: \"#4169e1\", minRP: 1150, icon: \"â­\" },\n  { title: \"GOLD\", color: \"#ffd700\", minRP: 1050, icon: \"ğŸ†\" },\n  { title: \"SILVER\", color: \"#c0c0c0\", minRP: 950, icon: \"ğŸ¥ˆ\" },\n  { title: \"BRONZE\", color: \"#cd7f32\", minRP: 0, icon: \"ğŸ¥‰\" },\n];\n\nconst RP_ON_WIN = 15;\nconst RP_ON_LOSS = 8;\nconst BASE_RP = 1000;\n\nconst BOARD_SIZE = 15;\n\n// ===== ì˜¤ëª© AI ì—”ì§„ =====\nconst getIndex = (row, col) => row * BOARD_SIZE + col;\nconst getBoardValue = (board, row, col) => {\n  if (row < 0 || row >= BOARD_SIZE || col < 0 || col >= BOARD_SIZE)\n    return undefined;\n  return board[getIndex(row, col)];\n};\n\n// íŒ¨í„´ í‰ê°€: ìƒˆë¡œìš´ í†µí•© í‰ê°€ í•¨ìˆ˜\nconst evaluatePattern = (board, row, col, color) => {\n  const directions = [\n    [1, 0],\n    [0, 1],\n    [1, 1],\n    [1, -1],\n  ];\n  let totalScore = 0;\n\n  for (const [dr, dc] of directions) {\n    let forward = 0;\n    let backward = 0;\n\n    // ì• ë°©í–¥ìœ¼ë¡œ ê°œìˆ˜ ì„¸ê¸°\n    for (let i = 1; i < 5; i++) {\n      const r = row + i * dr;\n      const c = col + i * dc;\n      if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE) break;\n      if (board[getIndex(r, c)] !== color) break;\n      forward++;\n    }\n\n    // ë’· ë°©í–¥ìœ¼ë¡œ ê°œìˆ˜ ì„¸ê¸°\n    for (let i = 1; i < 5; i++) {\n      const r = row - i * dr;\n      const c = col - i * dc;\n      if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE) break;\n      if (board[getIndex(r, c)] !== color) break;\n      backward++;\n    }\n\n    const total = forward + backward + 1; // í˜„ì¬ ëŒ í¬í•¨\n\n    // ì–‘ ë ìƒíƒœ í™•ì¸\n    const forwardR = row + (forward + 1) * dr;\n    const forwardC = col + (forward + 1) * dc;\n    const backwardR = row - (backward + 1) * dr;\n    const backwardC = col - (backward + 1) * dc;\n\n    let openEnds = 0;\n    // ì•ìª½ ëì´ ì—´ë ¤ìˆìœ¼ë©´\n    if (\n      forwardR >= 0 &&\n      forwardR < BOARD_SIZE &&\n      forwardC >= 0 &&\n      forwardC < BOARD_SIZE\n    ) {\n      if (board[getIndex(forwardR, forwardC)] === null) openEnds++;\n    }\n    // ë’¤ìª½ ëì´ ì—´ë ¤ìˆìœ¼ë©´\n    if (\n      backwardR >= 0 &&\n      backwardR < BOARD_SIZE &&\n      backwardC >= 0 &&\n      backwardC < BOARD_SIZE\n    ) {\n      if (board[getIndex(backwardR, backwardC)] === null) openEnds++;\n    }\n\n    // íŒ¨í„´ì— ë”°ë¥¸ ì ìˆ˜ ë¶€ì—¬\n    if (total >= 5) {\n      totalScore += 100000000; // 5ëª©\n    } else if (total === 4) {\n      if (openEnds === 2)\n        totalScore += 500000; // ì—´ë¦° 4 (í•„ìŠ¹)\n      else if (openEnds === 1) totalScore += 50000; // ë‹«íŒ 4\n    } else if (total === 3) {\n      if (openEnds === 2)\n        totalScore += 10000; // ì—´ë¦° 3\n      else if (openEnds === 1) totalScore += 1000; // ë‹«íŒ 3\n    } else if (total === 2) {\n      if (openEnds === 2)\n        totalScore += 500; // ì—´ë¦° 2\n      else if (openEnds === 1) totalScore += 50; // ë‹«íŒ 2\n    } else if (total === 1) {\n      if (openEnds === 2) totalScore += 10;\n    }\n  }\n\n  return totalScore;\n};\n\nconst evaluateLine = (line) => {\n  const counts = { black: 0, white: 0 };\n  line.forEach((cell) => {\n    if (cell) counts[cell]++;\n  });\n\n  if (counts.black > 0 && counts.white > 0) return 0; // Mixed line\n\n  const player = counts.black > 0 ? \"black\" : \"white\";\n  const count = counts[player];\n\n  if (count === 5) return 100000;\n  if (count === 4) return 10000;\n  if (count === 3) return 100;\n  if (count === 2) return 10;\n  if (count === 1) return 1;\n  return 0;\n};\n\nconst evaluateBoard = (board) => {\n  let score = 0;\n  const directions = [\n    [1, 0],\n    [0, 1],\n    [1, 1],\n    [1, -1],\n  ];\n\n  for (let r = 0; r < BOARD_SIZE; r++) {\n    for (let c = 0; c < BOARD_SIZE; c++) {\n      directions.forEach(([dr, dc]) => {\n        if (\n          r + dr * 4 < BOARD_SIZE &&\n          c + dc * 4 < BOARD_SIZE &&\n          c + dc * 4 >= 0\n        ) {\n          const line = [];\n          for (let i = 0; i < 5; i++) {\n            line.push(getBoardValue(board, r + i * dr, c + i * dc));\n          }\n          score += evaluateLine(line);\n        }\n      });\n    }\n  }\n  return score;\n};\n\n// =======================\n// ìƒˆë¡œìš´ í†µí•© ìŠ¹ë¦¬ íŒì • ë¡œì§\nconst checkForWin = (board, row, col, player) => {\n  const directions = [\n    { y: 0, x: 1 }, // ê°€ë¡œ\n    { y: 1, x: 0 }, // ì„¸ë¡œ\n    { y: 1, x: 1 }, // ëŒ€ê°ì„  (\\)\n    { y: 1, x: -1 }, // ëŒ€ê°ì„  (/)\n  ];\n\n  for (const dir of directions) {\n    let count = 1; // í˜„ì¬ ë†“ì€ ëŒ í¬í•¨\n\n    // ì •ë°©í–¥ íƒìƒ‰\n    for (let i = 1; i < 6; i++) {\n      const r = row + i * dir.y;\n      const c = col + i * dir.x;\n      if (getBoardValue(board, r, c) === player) {\n        count++;\n      } else {\n        break;\n      }\n    }\n\n    // ì—­ë°©í–¥ íƒìƒ‰\n    for (let i = 1; i < 6; i++) {\n      const r = row - i * dir.y;\n      const c = col - i * dir.x;\n      if (getBoardValue(board, r, c) === player) {\n        count++;\n      } else {\n        break;\n      }\n    }\n\n    // 6ëª© ì´ìƒì€ ìŠ¹ë¦¬ê°€ ì•„ë‹˜\n    if (count === 5) {\n      return player;\n    }\n  }\n\n  return null; // ìŠ¹ë¦¬í•˜ì§€ ì•ŠìŒ\n};\n\n// ìœ„ì¹˜ í‰ê°€: ìƒˆë¡œìš´ íŒ¨í„´ ê¸°ë°˜ í‰ê°€ (1ì°¨ì›ì  ì‚¬ê³ )\nconst evaluatePosition = (\n  board,\n  row,\n  col,\n  color,\n  opponentColor,\n  difficulty,\n) => {\n  // í•´ë‹¹ ìœ„ì¹˜ì— ëŒì„ ë†“ì•˜ë‹¤ê³  ê°€ì •í•˜ê³  í‰ê°€\n  const tempBoard = [...board];\n  const idx = getIndex(row, col);\n\n  tempBoard[idx] = color;\n  const myScore = evaluatePattern(tempBoard, row, col, color);\n\n  // ìƒëŒ€ë°©ì´ ì´ ìœ„ì¹˜ì— ë†“ì•˜ì„ ë•Œì˜ ì ìˆ˜ (ë°©ì–´ ê°€ì¹˜)\n  tempBoard[idx] = opponentColor;\n  const opponentScore = evaluatePattern(tempBoard, row, col, opponentColor);\n\n  // ë‚œì´ë„ë³„ ê°€ì¤‘ì¹˜ ì¡°ì •\n  let attackWeight = 1.0;\n  let defenseWeight = 1.0;\n\n  if (difficulty === \"ì´ˆê¸‰\") {\n    attackWeight = 0.8;\n    defenseWeight = 0.6; // ë°©ì–´ ì•½í•¨\n  } else if (difficulty === \"ì¤‘ê¸‰\") {\n    attackWeight = 1.0;\n    defenseWeight = 0.9;\n  } else if (difficulty === \"ìƒê¸‰\") {\n    attackWeight = 1.2;\n    defenseWeight = 1.1; // ë°©ì–´ë„ ì¤‘ìš”í•˜ê²Œ\n  }\n\n  return myScore * attackWeight + opponentScore * defenseWeight;\n};\n\nconst findBestMove = (board, aiColor, difficulty) => {\n  // ëŒì´ ë†“ì¸ ìœ„ì¹˜ ì°¾ê¸°\n  const placedStones = [];\n  for (let i = 0; i < BOARD_SIZE * BOARD_SIZE; i++) {\n    if (board[i]) {\n      placedStones.push({ r: Math.floor(i / BOARD_SIZE), c: i % BOARD_SIZE });\n    }\n  }\n\n  // ì²« ìˆ˜ë¼ë©´ ì¤‘ì•™ ê·¼ì²˜ì— ë†“ê¸°\n  if (placedStones.length <= 1) {\n    const center = Math.floor(BOARD_SIZE / 2);\n    const centerMoves = [\n      { r: center, c: center },\n      { r: center, c: center + 1 },\n      { r: center + 1, c: center },\n      { r: center + 1, c: center + 1 },\n      { r: center - 1, c: center },\n      { r: center, c: center - 1 },\n      { r: center + 1, c: center - 1 },\n      { r: center - 1, c: center + 1 },\n    ];\n    for (const move of centerMoves) {\n      if (!board[getIndex(move.r, move.c)]) {\n        return move;\n      }\n    }\n  }\n\n  const opponentColor = aiColor === \"black\" ? \"white\" : \"black\";\n\n  // ë‚œì´ë„ì— ë”°ë¼ íƒìƒ‰ ë²”ìœ„ ì¡°ì •\n  let searchRange = 2;\n  if (difficulty === \"ì´ˆê¸‰\") searchRange = 1;\n  else if (difficulty === \"ì¤‘ê¸‰\") searchRange = 2;\n  else if (difficulty === \"ìƒê¸‰\") searchRange = 3;\n\n  // ì´ë¯¸ ë†“ì¸ ëŒ ì£¼ë³€ ë²”ìœ„ ì´ë‚´ì˜ ë¹ˆ ìë¦¬ë§Œ íƒìƒ‰\n  const possibleMoves = [];\n  const checkedPositions = new Set();\n\n  for (const stone of placedStones) {\n    for (let dr = -searchRange; dr <= searchRange; dr++) {\n      for (let dc = -searchRange; dc <= searchRange; dc++) {\n        const r = stone.r + dr;\n        const c = stone.c + dc;\n        if (r >= 0 && r < BOARD_SIZE && c >= 0 && c < BOARD_SIZE) {\n          const idx = getIndex(r, c);\n          const key = `${r},${c}`;\n          if (!board[idx] && !checkedPositions.has(key)) {\n            possibleMoves.push({ r, c });\n            checkedPositions.add(key);\n          }\n        }\n      }\n    }\n  }\n\n  if (possibleMoves.length === 0) {\n    // ë§Œì•½ íƒìƒ‰ëœ ìˆ˜ê°€ ì—†ë‹¤ë©´, ê·¸ëƒ¥ ë¹„ì–´ìˆëŠ” ì²«ë²ˆì§¸ ì¹¸ì— ë‘”ë‹¤ (ì˜ˆì™¸ ì²˜ë¦¬)\n    const firstEmpty = board.findIndex((cell) => cell === null);\n    if (firstEmpty !== -1) {\n      return {\n        r: Math.floor(firstEmpty / BOARD_SIZE),\n        c: firstEmpty % BOARD_SIZE,\n      };\n    }\n    return null;\n  }\n\n  // 1ìˆœìœ„: ì¦‰ì‹œ ìŠ¹ë¦¬ ìˆ˜ ì°¾ê¸°\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = aiColor;\n    if (checkForWin(testBoard, move.r, move.c, aiColor)) {\n      return move; // ì¦‰ì‹œ ìŠ¹ë¦¬\n    }\n  }\n\n  // 2ìˆœìœ„: ìƒëŒ€ë°©ì˜ ìŠ¹ë¦¬ ë§‰ê¸° (ë°©ì–´)\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = opponentColor;\n    if (checkForWin(testBoard, move.r, move.c, opponentColor)) {\n      return move; // í•„ìˆ˜ ë°©ì–´\n    }\n  }\n\n  // 3ìˆœìœ„: ë‚´ ì—´ë¦° 4 ì°¾ê¸° (ê±°ì˜ í•„ìŠ¹)\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = aiColor;\n    const patternScore = evaluatePattern(testBoard, move.r, move.c, aiColor);\n    if (patternScore >= 500000) {\n      // ì—´ë¦° 4\n      logger.log(\"[AI] ë‚´ ì—´ë¦° 4 ë°œê²¬:\", move);\n      return move;\n    }\n  }\n\n  // 4ìˆœìœ„: ìƒëŒ€ë°© 4 ë§‰ê¸° (ë‹«íŒ 4 í¬í•¨)\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = opponentColor;\n    const patternScore = evaluatePattern(\n      testBoard,\n      move.r,\n      move.c,\n      opponentColor,\n    );\n    if (patternScore >= 50000) {\n      // ë‹«íŒ 4 ì´ìƒ\n      logger.log(\"[AI] ìƒëŒ€ 4ëª© ë§‰ê¸°:\", move, \"score:\", patternScore);\n      return move;\n    }\n  }\n\n  // 5ìˆœìœ„: ë‚´ ì—´ë¦° 3 ë§Œë“¤ê¸°\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = aiColor;\n    const patternScore = evaluatePattern(testBoard, move.r, move.c, aiColor);\n    if (patternScore >= 10000) {\n      // ì—´ë¦° 3\n      logger.log(\"[AI] ë‚´ ì—´ë¦° 3 ë°œê²¬:\", move);\n      return move;\n    }\n  }\n\n  // 6ìˆœìœ„: ìƒëŒ€ ì—´ë¦° 3 ë§‰ê¸° (ë§¤ìš° ì¤‘ìš”!)\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = opponentColor;\n    const patternScore = evaluatePattern(\n      testBoard,\n      move.r,\n      move.c,\n      opponentColor,\n    );\n    if (patternScore >= 10000) {\n      // ì—´ë¦° 3\n      logger.log(\"[AI] ìƒëŒ€ ì—´ë¦° 3 ë§‰ê¸°:\", move, \"score:\", patternScore);\n      if (difficulty === \"ìƒê¸‰\") {\n        return move; // ìƒê¸‰ì€ ë°˜ë“œì‹œ ë§‰ìŒ\n      } else if (difficulty === \"ì¤‘ê¸‰\" && Math.random() > 0.1) {\n        return move; // ì¤‘ê¸‰ì€ 90% í™•ë¥ ë¡œ ë§‰ìŒ\n      }\n    }\n  }\n\n  // 7ìˆœìœ„: ìƒëŒ€ ë‹«íŒ 3 ë§‰ê¸°\n  if (difficulty !== \"ì´ˆê¸‰\") {\n    for (const move of possibleMoves) {\n      const testBoard = [...board];\n      testBoard[getIndex(move.r, move.c)] = opponentColor;\n      const patternScore = evaluatePattern(\n        testBoard,\n        move.r,\n        move.c,\n        opponentColor,\n      );\n      if (patternScore >= 1000) {\n        // ë‹«íŒ 3\n        logger.log(\"[AI] ìƒëŒ€ ë‹«íŒ 3 ë§‰ê¸°:\", move, \"score:\", patternScore);\n        if (difficulty === \"ìƒê¸‰\" && Math.random() > 0.3) {\n          return move; // ìƒê¸‰ì€ 70% í™•ë¥ ë¡œ ë§‰ìŒ\n        } else if (difficulty === \"ì¤‘ê¸‰\" && Math.random() > 0.5) {\n          return move; // ì¤‘ê¸‰ì€ 50% í™•ë¥ ë¡œ ë§‰ìŒ\n        }\n      }\n    }\n  }\n\n  // 8ìˆœìœ„: ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ìˆ˜ ì„ íƒ\n  let bestMove = null;\n  let bestScore = -Infinity;\n\n  for (const move of possibleMoves) {\n    const testBoard = [...board];\n    testBoard[getIndex(move.r, move.c)] = aiColor;\n\n    let score = evaluatePosition(\n      testBoard,\n      move.r,\n      move.c,\n      aiColor,\n      opponentColor,\n      difficulty,\n    );\n\n    // ì¤‘ì•™ ë¶€ê·¼ì— ê°€ì¤‘ì¹˜ (ì´ˆë°˜ì— ìœ ë¦¬)\n    const center = Math.floor(BOARD_SIZE / 2);\n    const centerDist = Math.abs(move.r - center) + Math.abs(move.c - center);\n    score += (BOARD_SIZE - centerDist) * 5;\n\n    // ë‚œì´ë„ì— ë”°ë¥¸ ëœë¤ì„± ì¶”ê°€ (ì´ˆê¸‰ì€ ë” ë§ì€ ì‹¤ìˆ˜)\n    if (difficulty === \"ì´ˆê¸‰\") {\n      score += (Math.random() - 0.5) * 3000; // í° ëœë¤ì„±\n    } else if (difficulty === \"ì¤‘ê¸‰\") {\n      score += (Math.random() - 0.5) * 300; // ì‘ì€ ëœë¤ì„±\n    }\n    // ìƒê¸‰ì€ ëœë¤ì„± ì—†ìŒ\n\n    if (score > bestScore) {\n      bestScore = score;\n      bestMove = move;\n    }\n  }\n\n  logger.log(\"[AI] ìµœì¢… ì„ íƒ:\", bestMove);\n  return bestMove;\n};\n// =======================\n\n// [ë­í¬ ì‹œìŠ¤í…œ] RP ê¸°ë°˜ìœ¼ë¡œ ë­í¬ ì •ë³´ë¥¼ ê³„ì‚°í•˜ëŠ” í—¬í¼ í•¨ìˆ˜\nconst getOmokRankDetails = (omokStats) => {\n  const wins = omokStats?.wins || 0;\n  const losses = omokStats?.losses || 0;\n  const totalRP = omokStats?.totalRP;\n\n  const currentRP =\n    totalRP !== undefined\n      ? totalRP\n      : Math.max(0, BASE_RP + wins * RP_ON_WIN - losses * RP_ON_LOSS);\n\n  const currentRank = RANKS.find((rank) => currentRP >= rank.minRP);\n  const currentRankIndex = RANKS.findIndex(\n    (rank) => rank.title === currentRank.title,\n  );\n\n  let nextRank = null;\n  let pointsForNextRank = 0;\n\n  if (currentRankIndex > 0) {\n    nextRank = RANKS[currentRankIndex - 1];\n    pointsForNextRank = nextRank.minRP - currentRP;\n  }\n\n  return {\n    currentRank,\n    nextRank,\n    currentRP,\n    pointsForNextRank,\n    wins,\n    losses,\n  };\n};\n\n// [ë­í¬ ì‹œìŠ¤í…œ] ì‚¬ìš©ì ì˜¤ëª© ê¸°ë¡ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (RP í¬í•¨)\nconst updateUserOmokRecord = async (userId, result) => {\n  if (!userId || userId === \"AI\") return;\n  try {\n    const userDocRef = doc(db, \"users\", userId);\n    await runTransaction(db, async (transaction) => {\n      const userDoc = await transaction.get(userDocRef);\n      if (!userDoc.exists()) {\n        logger.error(`ì‚¬ìš©ì ${userId}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);\n        return;\n      }\n\n      const userData = userDoc.data();\n      const currentOmok = userData.omok || {\n        wins: 0,\n        losses: 0,\n        totalRP: BASE_RP,\n      };\n\n      let newWins = currentOmok.wins || 0;\n      let newLosses = currentOmok.losses || 0;\n      let newTotalRP =\n        currentOmok.totalRP !== undefined ? currentOmok.totalRP : BASE_RP;\n\n      if (result === \"win\") {\n        newWins += 1;\n        newTotalRP += RP_ON_WIN;\n      } else if (result === \"loss\") {\n        newLosses += 1;\n        newTotalRP = Math.max(0, newTotalRP - RP_ON_LOSS);\n      }\n\n      const updatedOmok = {\n        wins: newWins,\n        losses: newLosses,\n        totalRP: newTotalRP,\n      };\n\n      transaction.update(userDocRef, { omok: updatedOmok });\n      logger.log(`ì‚¬ìš©ì ${userId} ì˜¤ëª© ê¸°ë¡ ì—…ë°ì´íŠ¸:`, updatedOmok);\n    });\n  } catch (error) {\n    logger.error(\"ì‚¬ìš©ì ì˜¤ëª© ê¸°ë¡ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜:\", error);\n  }\n};\n\n// [UI ì»´í¬ë„ŒíŠ¸] ë­í¬ í‘œì‹œ ì»´í¬ë„ŒíŠ¸\nconst RankDisplay = ({\n  rankDetails,\n  showProgress = false,\n  size = \"normal\",\n}) => {\n  if (!rankDetails) return null;\n\n  const { currentRank, currentRP, nextRank, pointsForNextRank, wins, losses } =\n    rankDetails;\n  const winRate =\n    wins + losses > 0 ? Math.round((wins / (wins + losses)) * 100) : 0;\n\n  const sizeClass = size === \"small\" ? \"rank-display-small\" : \"rank-display\";\n\n  return (\n    <div className={sizeClass}>\n      <div\n        className=\"rank-badge\"\n        style={{ backgroundColor: currentRank.color }}\n      >\n        <span className=\"rank-icon\">{currentRank.icon}</span>\n        <span className=\"rank-title\">{currentRank.title}</span>\n      </div>\n      <div className=\"rp-info\">\n        <span className=\"rp-value\">{currentRP} RP</span>\n        {showProgress && (\n          <div className=\"rank-stats\">\n            <span className=\"win-loss\">\n              {wins}ìŠ¹ {losses}íŒ¨ ({winRate}%)\n            </span>\n            {nextRank && (\n              <div className=\"next-rank-progress\">\n                <span className=\"next-rank-text\">\n                  {nextRank.icon} {nextRank.title}ê¹Œì§€ {pointsForNextRank} RP\n                </span>\n                <div className=\"progress-bar\">\n                  <div\n                    className=\"progress-fill\"\n                    style={{\n                      width: `${Math.max(10, ((currentRP - currentRank.minRP) / (nextRank.minRP - currentRank.minRP)) * 100)}%`,\n                      backgroundColor: nextRank.color,\n                    }}\n                  ></div>\n                </div>\n              </div>\n            )}\n            {!nextRank && <div className=\"max-rank\">ğŸ† ìµœê³  ë­í¬!</div>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst OmokGame = () => {\n  const { user, userDoc, addCouponsToUserById, isAdmin, addCash } = useAuth();\n  const [gameId, setGameId] = useState(null);\n  const [game, setGame] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [createdGameId, setCreatedGameId] = useState(null);\n  const [isThinking, setIsThinking] = useState(false);\n  const [lastMove, setLastMove] = useState(null);\n  const [showWinAnimation, setShowWinAnimation] = useState(false);\n  const [availableGames, setAvailableGames] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedCell, setSelectedCell] = useState(null);\n  const [gameResult, setGameResult] = useState(null);\n  const refetchGameDataRef = useRef(null);\n  const [feedback, setFeedback] = useState({ message: \"\", type: \"\" });\n  const [gameMode, setGameMode] = useState(\"player\"); // 'player' or 'ai'\n  const [aiDifficulty, setAiDifficulty] = useState(\"ì¤‘ê¸‰\"); // 'í•˜ê¸‰', 'ì¤‘ê¸‰', 'ìƒê¸‰'\n  const [dailyPlayCount, setDailyPlayCount] = useState(0);\n  const [omokStats, setOmokStats] = useState(userDoc?.omok);\n\n  useEffect(() => {\n    setOmokStats(userDoc?.omok);\n  }, [userDoc?.omok]);\n\n  // ë¡œì»¬ ìƒíƒœë¥¼ ì´ìš©í•œ ë‚™ê´€ì  ì „ì  ì—…ë°ì´íŠ¸\n  const localOptimisticOmokUpdate = useCallback((result) => {\n    setOmokStats((prevStats) => {\n      if (!prevStats) return null;\n\n      const currentWins = prevStats.wins || 0;\n      const currentLosses = prevStats.losses || 0;\n      const currentRP =\n        prevStats.totalRP !== undefined ? prevStats.totalRP : BASE_RP;\n\n      let newWins = currentWins;\n      let newLosses = currentLosses;\n      let newRP = currentRP;\n\n      if (result === \"win\") {\n        newWins += 1;\n        newRP += RP_ON_WIN;\n      } else if (result === \"loss\") {\n        newLosses += 1;\n        newRP = Math.max(0, newRP - RP_ON_LOSS);\n      }\n\n      const newStats = {\n        wins: newWins,\n        losses: newLosses,\n        totalRP: newRP,\n      };\n      logger.log(\"[LocalOptimistic] ì „ì  ë¡œì»¬ ì—…ë°ì´íŠ¸:\", newStats);\n      return newStats;\n    });\n  }, []);\n\n  const [showRewardSelection, setShowRewardSelection] = useState(false);\n  const [rewardCards, setRewardCards] = useState([]);\n  const [isAiThinking, setIsAiThinking] = useState(false);\n\n  const gameIdRef = useRef(gameId);\n  useEffect(() => {\n    gameIdRef.current = gameId;\n  }, [gameId]);\n  const gameRef = useRef(game);\n  useEffect(() => {\n    gameRef.current = game;\n  }, [game]);\n  const userRef = useRef(user);\n  useEffect(() => {\n    userRef.current = user;\n  }, [user]);\n\n  useEffect(() => {\n    const cleanup = () => {\n      const currentGameId = gameIdRef.current;\n      const currentGame = gameRef.current;\n      const currentUser = userRef.current;\n      // í˜¸ìŠ¤íŠ¸ê°€ ë‚˜ê°€ë©´ í•­ìƒ ë°© ì‚­ì œ (ìƒíƒœ ë¬´ê´€)\n      if (\n        currentGameId &&\n        currentGame &&\n        currentUser &&\n        currentGame.host === currentUser.uid\n      ) {\n        deleteDoc(doc(db, \"omokGames\", currentGameId));\n      }\n    };\n    window.addEventListener(\"beforeunload\", cleanup);\n    return () => {\n      window.removeEventListener(\"beforeunload\", cleanup);\n    };\n  }, []);\n\n  const createEmptyBoard = () => new Array(BOARD_SIZE * BOARD_SIZE).fill(null);\n\n  const fetchAvailableGames = useCallback(async () => {\n    if (!user) return;\n    setLoading(true);\n    try {\n      const gamesRef = collection(db, \"omokGames\");\n      const q = query(\n        gamesRef,\n        where(\"gameStatus\", \"==\", \"waiting\"),\n        orderBy(\"createdAt\", \"desc\"),\n      );\n\n      const querySnapshot = await getDocs(q);\n      const games = querySnapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      setAvailableGames(games);\n    } catch (err) {\n      logger.error(\"ê²Œì„ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:\", err);\n      setError(\"ê²Œì„ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // user ì˜ì¡´ì„± ì œê±° - í•„ìš” ì‹œ userëŠ” í´ë¡œì €ë¡œ ì ‘ê·¼\n\n  const deleteGameRoom = async (roomId, e) => {\n    e.stopPropagation();\n    if (!isAdmin()) {\n      logger.error(\"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.\");\n      return;\n    }\n    if (!window.confirm(\"ì´ ê²Œì„ë°©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) return;\n    try {\n      await deleteDoc(doc(db, \"omokGames\", roomId));\n      logger.log(`[ê´€ë¦¬ì] ê²Œì„ë°© ${roomId} ì‚­ì œ ì™„ë£Œ`);\n      fetchAvailableGames();\n    } catch (err) {\n      logger.error(\"ê²Œì„ë°© ì‚­ì œ ì˜¤ë¥˜:\", err);\n      setError(\"ê²Œì„ë°© ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n    }\n  };\n\n  const createGame = async () => {\n    if (!user || !userDoc) {\n      setError(\"ì‚¬ìš©ì ì •ë³´ê°€ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");\n      return;\n    }\n\n    if (gameMode === \"ai\") {\n      if (dailyPlayCount >= 5) {\n        setError(\"í•˜ë£¨ì— 5ë²ˆë§Œ AI ëŒ€ì „ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\n        return;\n      }\n    }\n\n    setLoading(true);\n    const myName =\n      userDoc.name || userDoc.nickname || user.displayName || \"ìµëª…\";\n    const myClass = userDoc.classCode || \"ë¯¸ì„¤ì •\";\n    const myRankDetails = getOmokRankDetails(omokStats);\n\n    const isAiMode = gameMode === \"ai\";\n    const playerColor = \"black\";\n    const aiColor = \"white\";\n\n    try {\n      const newGame = {\n        board: createEmptyBoard(),\n        players: isAiMode\n          ? { [user.uid]: playerColor, AI: aiColor }\n          : { [user.uid]: \"black\" },\n        playerNames: isAiMode\n          ? { [user.uid]: myName, AI: `AI (${aiDifficulty})` }\n          : { [user.uid]: myName },\n        playerClasses: { [user.uid]: myClass },\n        playerRanks: { [user.uid]: myRankDetails },\n        currentPlayer: user.uid,\n        winner: null,\n        createdAt: serverTimestamp(),\n        host: user.uid,\n        hostName: myName,\n        hostClass: myClass,\n        hostRank: myRankDetails.currentRank,\n        turnStartTime: serverTimestamp(),\n        history: [],\n        gameStatus: isAiMode ? \"playing\" : \"waiting\",\n        statsUpdated: false,\n        rematch: {},\n        aiMode: isAiMode,\n        aiDifficulty: isAiMode ? aiDifficulty : null,\n      };\n\n      const gameDocRef = await addDoc(collection(db, \"omokGames\"), newGame);\n      setGameId(gameDocRef.id);\n\n      // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ê²Œì„ ê°ì²´ë¥¼ ì¦‰ì‹œ ì„¤ì •í•˜ì—¬ UIê°€ ë°”ë¡œ ì „í™˜ë˜ë„ë¡ í•¨\n      setGame({\n        ...newGame,\n        id: gameDocRef.id,\n        createdAt: new Date(), // serverTimestamp ëŒ€ì‹  ì„ì‹œë¡œ í˜„ì¬ ì‹œê°„\n        turnStartTime: new Date(),\n      });\n\n      // AI ëª¨ë“œì—ì„œëŠ” í”Œë ˆì´ì–´ê°€ ì„ ê³µì´ë¯€ë¡œ ì¦‰ì‹œ isThinkingì„ trueë¡œ ì„¤ì •\n      if (isAiMode) {\n        setIsThinking(true);\n      }\n\n      if (!isAiMode) {\n        setCreatedGameId(gameDocRef.id);\n      }\n      setError(\"\");\n      if (refetchGameDataRef.current) refetchGameDataRef.current();\n    } catch (err) {\n      logger.error(\"ê²Œì„ ìƒì„± ì˜¤ë¥˜:\", err);\n      setError(\"ê²Œì„ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const joinGame = async (id) => {\n    if (!user || !userDoc || !id) return;\n    setLoading(true);\n    setError(\"\");\n    const myName =\n      userDoc.name || userDoc.nickname || user.displayName || \"ìµëª…\";\n    const myClass = userDoc.classCode || \"ë¯¸ì„¤ì •\";\n    const myRankDetails = getOmokRankDetails(omokStats);\n\n    try {\n      const gameDocRef = doc(db, \"omokGames\", id);\n      await runTransaction(db, async (transaction) => {\n        const gameDoc = await transaction.get(gameDocRef);\n        if (!gameDoc.exists()) throw new Error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²Œì„ì…ë‹ˆë‹¤.\");\n        const gameData = gameDoc.data();\n        if (\n          Object.keys(gameData.players).length >= 2 &&\n          !gameData.players[user.uid]\n        )\n          throw new Error(\"ì´ë¯¸ ê°€ë“ ì°¬ ë°©ì…ë‹ˆë‹¤.\");\n        if (!gameData.players[user.uid]) {\n          transaction.update(gameDocRef, {\n            players: { ...gameData.players, [user.uid]: \"white\" },\n            playerNames: { ...gameData.playerNames, [user.uid]: myName },\n            playerClasses: { ...gameData.playerClasses, [user.uid]: myClass },\n            playerRanks: { ...gameData.playerRanks, [user.uid]: myRankDetails },\n            gameStatus: \"playing\",\n            turnStartTime: serverTimestamp(),\n          });\n        }\n        setGameId(id);\n      });\n    } catch (err) {\n      logger.error(\"ê²Œì„ ì°¸ê°€ ì˜¤ë¥˜:\", err);\n      setError(err.message);\n      fetchAvailableGames();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const leaveGame = useCallback(async () => {\n    if (!gameId || !game || !user) return;\n\n    const gameDocRef = doc(db, \"omokGames\", gameId);\n    try {\n      // í˜¸ìŠ¤íŠ¸ê°€ ë– ë‚˜ëŠ” ê²½ìš° í•­ìƒ ë°© ì‚­ì œ\n      if (game.host === user.uid) {\n        logger.log(\"[LeaveGame] í˜¸ìŠ¤íŠ¸ê°€ ë°©ì„ ë– ë‚¨ - ë°© ì‚­ì œ\");\n\n        // ê²Œì„ ì§„í–‰ ì¤‘ì´ê³  ìƒëŒ€ë°©ì´ ìˆìœ¼ë©´ ì „ì  ì²˜ë¦¬\n        if (game.gameStatus === \"playing\" && !game.winner) {\n          const opponentId = Object.keys(game.players).find(\n            (p) => p !== user.uid,\n          );\n          if (opponentId && !game.aiMode) {\n            // í˜¸ìŠ¤íŠ¸ íŒ¨ë°°, ìƒëŒ€ë°© ìŠ¹ë¦¬ ì²˜ë¦¬\n            localOptimisticOmokUpdate(\"loss\"); // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n            await updateUserOmokRecord(user.uid, \"loss\");\n            await updateUserOmokRecord(opponentId, \"win\");\n\n            const gameStartTime = game.createdAt?.toDate().getTime();\n            const shouldAwardCoupon =\n              gameStartTime && Date.now() - gameStartTime > 15000;\n            if (shouldAwardCoupon && addCouponsToUserById) {\n              await addCouponsToUserById(opponentId, 1);\n            }\n          } else if (game.aiMode) {\n            // AI ëª¨ë“œì—ì„œëŠ” í˜¸ìŠ¤íŠ¸ íŒ¨ë°°ë§Œ ì²˜ë¦¬\n            localOptimisticOmokUpdate(\"loss\"); // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n            await updateUserOmokRecord(user.uid, \"loss\");\n          }\n        }\n\n        // ë°© ì‚­ì œ\n        await deleteDoc(gameDocRef);\n      } else if (\n        game.gameStatus === \"playing\" &&\n        game.players[user.uid] &&\n        !game.winner\n      ) {\n        // í˜¸ìŠ¤íŠ¸ê°€ ì•„ë‹Œ í”Œë ˆì´ì–´ê°€ ê²Œì„ ì¤‘ ë– ë‚˜ëŠ” ê²½ìš°\n        const opponentId = Object.keys(game.players).find(\n          (p) => p !== user.uid,\n        );\n        if (opponentId) {\n          const gameStartTime = game.createdAt?.toDate().getTime();\n          const shouldAwardCoupon =\n            gameStartTime && Date.now() - gameStartTime > 15000;\n\n          const finalUpdate = {\n            winner: opponentId,\n            gameStatus: \"finished\",\n            statsUpdated: true,\n          };\n          if (shouldAwardCoupon) finalUpdate.couponAwardedTo = opponentId;\n          await updateDoc(gameDocRef, finalUpdate);\n\n          localOptimisticOmokUpdate(\"loss\"); // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n          await updateUserOmokRecord(user.uid, \"loss\");\n          await updateUserOmokRecord(opponentId, \"win\");\n\n          if (shouldAwardCoupon && addCouponsToUserById)\n            await addCouponsToUserById(opponentId, 1);\n        }\n      }\n    } catch (error) {\n      logger.error(\"ê²Œì„ ë‚˜ê°€ê¸° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\", error);\n    } finally {\n      setGameId(null);\n      setGame(null);\n      setError(\"\");\n      setCreatedGameId(null);\n      setShowWinAnimation(false);\n      setSelectedCell(null);\n      setGameResult(null);\n      setShowRewardSelection(false);\n      fetchAvailableGames();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [game, gameId, user, fetchAvailableGames, addCouponsToUserById]);\n\n  const checkForbiddenMove = (board, row, col, player) => false;\n\n  const placeStone = async (row, col) => {\n    logger.log(\"[Player] placeStone í•¨ìˆ˜ ì‹œì‘:\", {\n      row,\n      col,\n      gameId,\n      userId: user.uid,\n    });\n\n    const boardWithNewStone = [...game.board];\n    const myColor = game.players[user.uid];\n    boardWithNewStone[getIndex(row, col)] = myColor;\n\n    logger.log(\"[Player] ë‚´ ìƒ‰:\", myColor, \"ìœ„ì¹˜:\", getIndex(row, col));\n\n    if (myColor === \"black\") {\n      const forbiddenMove = checkForbiddenMove(\n        boardWithNewStone,\n        row,\n        col,\n        \"black\",\n      );\n      if (forbiddenMove) {\n        setError(`ê¸ˆìˆ˜ì…ë‹ˆë‹¤: ${forbiddenMove}. ë‹¤ë¥¸ ê³³ì— ë‘ì„¸ìš”.`);\n        setSelectedCell(null);\n        logger.log(\"[Player] ê¸ˆìˆ˜ë¡œ ì¸í•´ ì¤‘ë‹¨\");\n        return;\n      }\n    }\n\n    const winner = checkForWin(boardWithNewStone, row, col, myColor);\n    const nextPlayer = Object.keys(game.players).find((p) => p !== user.uid);\n    const moveData = { row, col, player: myColor, timestamp: new Date() };\n    const newHistory = [...(game.history || []), moveData];\n\n    logger.log(\"[Player] ìŠ¹ì ì²´í¬:\", winner, \"ë‹¤ìŒ í”Œë ˆì´ì–´:\", nextPlayer);\n\n    try {\n      const gameDocRef = doc(db, \"omokGames\", gameId);\n      const updateData = {\n        board: boardWithNewStone,\n        currentPlayer: winner ? null : nextPlayer,\n        winner: winner ? user.uid : null,\n        history: newHistory,\n        turnStartTime: serverTimestamp(),\n        gameStatus: winner ? \"finished\" : \"playing\",\n      };\n\n      if (winner && !game.aiMode) {\n        const gameStartTime = game.createdAt?.toDate().getTime();\n        const shouldAwardCoupon =\n          gameStartTime && Date.now() - gameStartTime > 15000;\n        if (shouldAwardCoupon) updateData.couponAwardedTo = user.uid;\n      }\n\n      logger.log(\"[Player] Firestore ì—…ë°ì´íŠ¸ ì‹œì‘...\", updateData);\n\n      // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: Firestore ì—…ë°ì´íŠ¸ ì „ì— ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸\n      setGame({\n        ...game,\n        board: boardWithNewStone,\n        currentPlayer: winner ? null : nextPlayer,\n        winner: winner ? user.uid : null,\n        history: newHistory,\n        gameStatus: winner ? \"finished\" : \"playing\",\n      });\n      setLastMove({ row, col });\n      setIsThinking(false);\n      setSelectedCell(null);\n\n      await updateDoc(gameDocRef, updateData);\n      logger.log(\"[Player] Firestore ì—…ë°ì´íŠ¸ ì™„ë£Œ!\");\n\n      setError(\"\");\n\n      logger.log(\"[Player] í”Œë ˆì´ì–´ ëŒ ë°°ì¹˜ ì™„ë£Œ. ë‹¤ìŒ ì°¨ë¡€:\", nextPlayer);\n\n      if (winner) {\n        if (game.aiMode) {\n          // AI ëª¨ë“œì—ì„œ ìŠ¹ë¦¬ ì‹œ í†µê³„ ì—…ë°ì´íŠ¸ ë° ë³´ìƒ ì¹´ë“œ í‘œì‹œ\n          localOptimisticOmokUpdate(\"win\"); // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n          await updateUserOmokRecord(user.uid, \"win\");\n          await updateDoc(gameDocRef, { statsUpdated: true });\n          setGameResult({ outcome: \"win\", rpChange: RP_ON_WIN });\n\n          const cards = generateRewardCards(game.aiDifficulty);\n          setRewardCards(cards);\n          setShowRewardSelection(true);\n        } else {\n          setShowWinAnimation(true);\n          if (updateData.couponAwardedTo && addCouponsToUserById) {\n            await addCouponsToUserById(user.uid, 1);\n          }\n        }\n      }\n    } catch (err) {\n      logger.error(\"ì›€ì§ì„ ì²˜ë¦¬ ì˜¤ë¥˜:\", err);\n      setError(\"ì›€ì§ì„ì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n      // ì—ëŸ¬ ì‹œ ë‹¤ì‹œ ë‚´ ì°¨ë¡€ë¡œ ì„¤ì •\n      setIsThinking(true);\n    }\n  };\n\n  const handleCellClick = async (row, col) => {\n    logger.log(\"[Click] ì…€ í´ë¦­:\", { row, col });\n    logger.log(\"[Click] ìƒíƒœ ì²´í¬:\", {\n      hasGame: !!game,\n      winner: game?.winner,\n      cellValue: getBoardValue(game?.board, row, col),\n      currentPlayer: game?.currentPlayer,\n      userId: user?.uid,\n      isMyTurn: game?.currentPlayer === user?.uid,\n      isThinking,\n      selectedCell,\n    });\n\n    if (\n      !game ||\n      game.winner ||\n      getBoardValue(game.board, row, col) ||\n      game.currentPlayer !== user.uid ||\n      !isThinking\n    ) {\n      logger.log(\"[Click] í´ë¦­ ë¬´ì‹œë¨\");\n      return;\n    }\n\n    // AI ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ 2ëª… ì²´í¬\n    if (!game.aiMode && Object.keys(game.players).length < 2) {\n      logger.log(\"[Click] í”Œë ˆì´ì–´ 2ëª… ë¯¸ë§Œ\");\n      return;\n    }\n\n    if (selectedCell && selectedCell.row === row && selectedCell.col === col) {\n      logger.log(\"[Click] ë‘ ë²ˆì§¸ í´ë¦­ - ëŒ ë°°ì¹˜ ì‹œì‘\");\n      await placeStone(row, col);\n      setSelectedCell(null);\n    } else {\n      logger.log(\"[Click] ì²« ë²ˆì§¸ í´ë¦­ - ë¯¸ë¦¬ë³´ê¸°\");\n      setSelectedCell({ row, col });\n    }\n  };\n\n  // ë¡œë¹„ í™”ë©´ ì§„ì… ì‹œ 1íšŒë§Œ ê²Œì„ ëª©ë¡ ë¡œë“œ (ìë™ í´ë§ ì œê±°)\n  // ğŸ”¥ [ìµœì í™”] sessionStorage ì‚¬ìš©ìœ¼ë¡œ ì¤‘ë³µ í˜¸ì¶œ ì™„ì „ ë°©ì§€\n  const hasFetchedGamesRef = useRef(false);\n  const lastGameIdRef = useRef(null);\n\n  useEffect(() => {\n    // ê²Œì„ì—ì„œ ë‚˜ì™”ì„ ë•Œë§Œ í”Œë˜ê·¸ ë¦¬ì…‹ (gameIdê°€ ìˆì—ˆë‹¤ê°€ ì—†ì–´ì§„ ê²½ìš°)\n    if (lastGameIdRef.current && !gameId) {\n      hasFetchedGamesRef.current = false;\n    }\n    lastGameIdRef.current = gameId;\n\n    // ë¡œë¹„ í™”ë©´ì—ì„œë§Œ ê²Œì„ ëª©ë¡ ë¡œë“œ (í•œ ë²ˆë§Œ)\n    if (user && !gameId && !hasFetchedGamesRef.current) {\n      logger.log(\"[Lobby] ê²Œì„ ëª©ë¡ ìµœì´ˆ ë¡œë“œ\");\n      fetchAvailableGames();\n      hasFetchedGamesRef.current = true;\n    }\n  }, [user, gameId, fetchAvailableGames]);\n\n  const fetchGameData = useCallback(async () => {\n    if (!gameId) return;\n\n    try {\n      const gameDocRef = doc(db, \"omokGames\", gameId);\n      const docSnap = await getDoc(gameDocRef);\n\n      if (docSnap.exists()) {\n        const gameData = docSnap.data();\n        setGame(gameData);\n\n        if (gameData.winner && !gameData.statsUpdated && !gameData.aiMode) {\n          // í”Œë ˆì´ì–´ ëŒ€ì „ ëª¨ë“œì—ì„œë§Œ ì—¬ê¸°ì„œ í†µê³„ ì—…ë°ì´íŠ¸\n          const winnerId = gameData.winner;\n          const loserId = Object.keys(gameData.players).find(\n            (p) => p !== winnerId,\n          );\n\n          if (loserId) {\n            // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n            if (user.uid === winnerId) {\n              localOptimisticOmokUpdate(\"win\");\n            } else if (user.uid === loserId) {\n              localOptimisticOmokUpdate(\"loss\");\n            }\n\n            await updateUserOmokRecord(winnerId, \"win\");\n            await updateUserOmokRecord(loserId, \"loss\");\n            await updateDoc(gameDocRef, { statsUpdated: true });\n\n            if (user.uid === winnerId)\n              setGameResult({ outcome: \"win\", rpChange: RP_ON_WIN });\n            else if (user.uid === loserId)\n              setGameResult({ outcome: \"loss\", rpChange: -RP_ON_LOSS });\n          }\n        }\n\n        const history = gameData.history || [];\n        if (history.length > 0)\n          setLastMove({\n            row: history[history.length - 1].row,\n            col: history[history.length - 1].col,\n          });\n\n        if (\n          gameData.currentPlayer === user.uid &&\n          gameData.gameStatus === \"playing\"\n        ) {\n          setIsThinking(true);\n        } else {\n          setIsThinking(false);\n          setSelectedCell(null);\n        }\n      } else {\n        setGameId(null);\n        setGame(null);\n        setError(\"ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n      }\n    } catch (error) {\n      logger.error(\"ê²Œì„ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:\", error);\n      setError(\"ê²Œì„ ì—°ê²° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n    }\n  }, [gameId, user, localOptimisticOmokUpdate]);\n\n  // í´ë§ í™œì„±í™” ì¡°ê±´: ê²Œì„ IDê°€ ìˆê³ , ê²Œì„ì´ ì§„í–‰ ì¤‘ì´ë©°, AI ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ\n  // AI ëª¨ë“œì—ì„œëŠ” ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì²˜ë¦¬í•˜ë¯€ë¡œ í´ë§ ë¶ˆí•„ìš”\n  const shouldPoll =\n    !!gameId && game?.gameStatus === \"playing\" && !game?.aiMode;\n  const pollingInterval = 30000; // ğŸ”¥ [ìµœì í™”] 10ì´ˆ â†’ 30ì´ˆ (ì½ê¸° ë¹„ìš© ì ˆê°)\n  const { refetch: refetchGameData } = usePolling(fetchGameData, {\n    interval: pollingInterval,\n    enabled: shouldPoll,\n    deps: [gameId, game?.gameStatus, game?.aiMode],\n  });\n  useEffect(() => {\n    refetchGameDataRef.current = refetchGameData;\n  }, [refetchGameData]);\n\n  useEffect(() => {\n    if (showWinAnimation) {\n      const timer = setTimeout(() => setShowWinAnimation(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [showWinAnimation]);\n\n  const handleRematchRequest = async () => {\n    if (!gameId || !user) return;\n    try {\n      await updateDoc(doc(db, \"omokGames\", gameId), {\n        [`rematch.${user.uid}`]: true,\n      });\n    } catch (err) {\n      logger.error(\"ì¬ëŒ€ê²° ìš”ì²­ ì˜¤ë¥˜:\", err);\n      setError(\"ì¬ëŒ€ê²°ì„ ìš”ì²­í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n    }\n  };\n\n  const resetGameForRematch = useCallback(async () => {\n    if (!game || !game.winner || !gameId) return;\n\n    const playerIds = Object.keys(game.players);\n    if (playerIds.length < 2) return;\n\n    const winnerId = game.winner,\n      loserId = playerIds.find((p) => p !== winnerId);\n    if (!loserId) {\n      logger.error(\"ì¬ëŒ€ê²°ì„ ìœ„í•œ íŒ¨ìë¥¼ ê²°ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n      return;\n    }\n\n    const newPlayers = { [loserId]: \"black\", [winnerId]: \"white\" };\n    const newCurrentPlayer = loserId;\n\n    try {\n      await updateDoc(doc(db, \"omokGames\", gameId), {\n        board: createEmptyBoard(),\n        currentPlayer: newCurrentPlayer,\n        players: newPlayers,\n        winner: null,\n        history: [],\n        gameStatus: \"playing\",\n        statsUpdated: false,\n        turnStartTime: serverTimestamp(),\n        couponAwardedTo: null,\n        rematch: {},\n      });\n\n      setGameResult(null);\n      setShowWinAnimation(false);\n      setLastMove(null);\n      setSelectedCell(null);\n      setError(\"\");\n    } catch (error) {\n      logger.error(\"ì¬ëŒ€ê²° ë¦¬ì…‹ ì˜¤ë¥˜:\", error);\n      setError(\"ì¬ëŒ€ê²° ì‹œì‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\n    }\n  }, [game, gameId]);\n\n  useEffect(() => {\n    if (\n      game &&\n      game.gameStatus === \"finished\" &&\n      game.rematch &&\n      user?.uid === game.host &&\n      !game.aiMode\n    ) {\n      const playerIds = Object.keys(game.players);\n      if (\n        playerIds.length === 2 &&\n        game.rematch[playerIds[0]] &&\n        game.rematch[playerIds[1]]\n      ) {\n        resetGameForRematch();\n      }\n    }\n  }, [game, user, resetGameForRematch]);\n\n  // AI í„´ ì²˜ë¦¬ - useRefë¡œ ìµœì‹  game ì°¸ì¡°í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì¬ì‹¤í–‰ ë°©ì§€\n  const aiTurnProcessedRef = useRef(false);\n\n  useEffect(() => {\n    // AI ëª¨ë“œê°€ ì•„ë‹ˆê±°ë‚˜ ê²Œì„ì´ ì—†ìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ\n    if (!game || !game.aiMode || game.winner || !gameId) {\n      aiTurnProcessedRef.current = false;\n      return;\n    }\n\n    // AI ì°¨ë¡€ê°€ ì•„ë‹ˆë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ\n    if (game.currentPlayer !== \"AI\") {\n      logger.log(\"[AI] í˜„ì¬ ì°¨ë¡€:\", game.currentPlayer, \"(AI ì•„ë‹˜)\");\n      setIsAiThinking(false);\n      aiTurnProcessedRef.current = false;\n      return;\n    }\n\n    // ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n    if (aiTurnProcessedRef.current) {\n      logger.log(\"[AI] ì´ë¯¸ ì²˜ë¦¬ ì¤‘ - ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\");\n      return;\n    }\n\n    logger.log(\"[AI] AI ì°¨ë¡€ ì‹œì‘\");\n    aiTurnProcessedRef.current = true;\n    setIsAiThinking(true);\n    const thinkingTime = 500 + Math.random() * 1000;\n\n    const timer = setTimeout(async () => {\n      try {\n        const aiColor = game.players[\"AI\"];\n        logger.log(\"[AI] AI ìƒ‰ìƒ:\", aiColor);\n\n        const bestMove = findBestMove(game.board, aiColor, game.aiDifficulty);\n        logger.log(\"[AI] ìµœì ì˜ ìˆ˜:\", bestMove);\n\n        if (!bestMove) {\n          logger.error(\"[AI] ìœ íš¨í•œ ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\");\n          setIsAiThinking(false);\n          aiTurnProcessedRef.current = false;\n          return;\n        }\n\n        const { r, c } = bestMove;\n        const boardWithNewStone = [...game.board];\n        boardWithNewStone[getIndex(r, c)] = aiColor;\n\n        const winner = checkForWin(boardWithNewStone, r, c, aiColor);\n        const nextPlayer = Object.keys(game.players).find((p) => p !== \"AI\");\n        const moveData = {\n          row: r,\n          col: c,\n          player: aiColor,\n          timestamp: new Date(),\n        };\n        const newHistory = [...(game.history || []), moveData];\n\n        const gameDocRef = doc(db, \"omokGames\", gameId);\n        const updateData = {\n          board: boardWithNewStone,\n          currentPlayer: winner ? null : nextPlayer,\n          winner: winner ? \"AI\" : null,\n          history: newHistory,\n          turnStartTime: serverTimestamp(),\n          gameStatus: winner ? \"finished\" : \"playing\",\n        };\n\n        // AIê°€ ì´ê¸°ë©´ ì‚¬ìš©ìì˜ íŒ¨ë°° ê¸°ë¡ ì—…ë°ì´íŠ¸ ì˜ˆì•½\n        if (winner) {\n          updateData.statsUpdated = false;\n        }\n\n        logger.log(\"[AI] Firestore ì—…ë°ì´íŠ¸ ì‹œì‘\");\n\n        // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: Firestore ì—…ë°ì´íŠ¸ ì „ì— ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸\n        logger.log(\n          \"[AI] setGame í˜¸ì¶œ ì „ - board[\",\n          getIndex(r, c),\n          \"]:\",\n          boardWithNewStone[getIndex(r, c)],\n        );\n        setGame((prevGame) => {\n          const newGame = {\n            ...prevGame,\n            board: boardWithNewStone,\n            currentPlayer: winner ? null : nextPlayer,\n            winner: winner ? \"AI\" : null,\n            history: newHistory,\n            gameStatus: winner ? \"finished\" : \"playing\",\n          };\n          logger.log(\n            \"[AI] setGame í˜¸ì¶œ - ìƒˆë¡œìš´ currentPlayer:\",\n            newGame.currentPlayer,\n          );\n          logger.log(\n            \"[AI] setGame í˜¸ì¶œ - board[\",\n            getIndex(r, c),\n            \"]:\",\n            newGame.board[getIndex(r, c)],\n          );\n          return newGame;\n        });\n        setLastMove({ row: r, col: c });\n        setIsAiThinking(false);\n\n        // AIê°€ ëŒì„ ë†“ê³  í”Œë ˆì´ì–´ ì°¨ë¡€ê°€ ë˜ë©´ isThinkingì„ trueë¡œ ì„¤ì •\n        if (!winner && nextPlayer === user?.uid) {\n          logger.log(\"[AI] í”Œë ˆì´ì–´ ì°¨ë¡€ë¡œ ë³€ê²½ - isThinkingì„ trueë¡œ ì„¤ì •\");\n          setIsThinking(true);\n        }\n\n        await updateDoc(gameDocRef, updateData);\n        logger.log(\"[AI] ëŒ ë°°ì¹˜ ì™„ë£Œ:\", r, c);\n\n        // AI ìŠ¹ë¦¬ ì‹œ ì¦‰ì‹œ ì‚¬ìš©ì íŒ¨ë°° ê¸°ë¡ ì—…ë°ì´íŠ¸\n        if (winner && user?.uid) {\n          localOptimisticOmokUpdate(\"loss\"); // ë¡œì»¬ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\n          await updateUserOmokRecord(user.uid, \"loss\");\n          await updateDoc(gameDocRef, { statsUpdated: true });\n          setGameResult({ outcome: \"loss\", rpChange: -RP_ON_LOSS });\n          logger.log(\"[AI] AI ìŠ¹ë¦¬ ì²˜ë¦¬ ì™„ë£Œ\");\n        }\n\n        setIsAiThinking(false);\n        aiTurnProcessedRef.current = false;\n      } catch (err) {\n        logger.error(\"[AI] ì›€ì§ì„ ì²˜ë¦¬ ì˜¤ë¥˜:\", err);\n        setIsAiThinking(false);\n        aiTurnProcessedRef.current = false;\n      }\n    }, thinkingTime);\n\n    return () => {\n      clearTimeout(timer);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [game?.currentPlayer, game?.aiMode, game?.winner, gameId, user]);\n\n  // ë³´ìƒ ì¹´ë“œ ìƒì„±\n  const generateRewardCards = (difficulty) => {\n    const baseCash = { í•˜ê¸‰: 1000, ì¤‘ê¸‰: 3000, ìƒê¸‰: 5000 };\n    const cashDifficultyBonus = { í•˜ê¸‰: 1000, ì¤‘ê¸‰: 2000, ìƒê¸‰: 4000 };\n    const couponDifficultyBonus = { í•˜ê¸‰: 1, ì¤‘ê¸‰: 2, ìƒê¸‰: 3 };\n\n    const cashAmount =\n      baseCash[difficulty] +\n      Math.floor(Math.random() * cashDifficultyBonus[difficulty]);\n    const couponAmount =\n      1 + Math.floor(Math.random() * couponDifficultyBonus[difficulty]);\n\n    return [\n      { type: \"cash\", amount: cashAmount },\n      { type: \"coupon\", amount: couponAmount },\n    ].sort(() => Math.random() - 0.5); // ì¹´ë“œë¥¼ ëœë¤ìœ¼ë¡œ ì„ìŒ\n  };\n\n  // ë³´ìƒ ì„ íƒ ì²˜ë¦¬\n  const handleRewardSelection = async (selectedCard) => {\n    if (!user || !gameId) {\n      logger.log(\"[Reward] user ë˜ëŠ” gameId ì—†ìŒ\");\n      return;\n    }\n\n    logger.log(\"[Reward] ë³´ìƒ ì„ íƒ:\", selectedCard);\n\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ì¦‰ì‹œ UIì— ë°˜ì˜\n    const today = new Date().toDateString();\n    const storageKey = `omokPlayCount_${user.uid}_${today}`;\n    const newCount = dailyPlayCount + 1;\n\n    localStorage.setItem(storageKey, newCount.toString());\n    setDailyPlayCount(newCount);\n    setShowRewardSelection(false);\n\n    setFeedback({\n      message:\n        selectedCard.type === \"cash\"\n          ? `í˜„ê¸ˆ ${selectedCard.amount.toLocaleString()}ì›ì„ íšë“í–ˆìŠµë‹ˆë‹¤!`\n          : `ì¿ í° ${selectedCard.amount}ê°œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,\n      type: \"success\",\n    });\n\n    try {\n      // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: í—¤ë”ì— ì¦‰ì‹œ ë°˜ì˜\n      if (selectedCard.type === \"cash\") {\n        // optimisticUpdate({ cash: selectedCard.amount });\n        logger.log(\"[Reward] í˜„ê¸ˆ ë‚™ê´€ì  ì—…ë°ì´íŠ¸:\", selectedCard.amount);\n      } else if (selectedCard.type === \"coupon\") {\n        // optimisticUpdate({ coupons: selectedCard.amount });\n        logger.log(\"[Reward] ì¿ í° ë‚™ê´€ì  ì—…ë°ì´íŠ¸:\", selectedCard.amount);\n      }\n\n      // Firestore ì—…ë°ì´íŠ¸\n      if (selectedCard.type === \"cash\") {\n        logger.log(\"[Reward] í˜„ê¸ˆ ì§€ê¸‰:\", selectedCard.amount);\n        await addCash(selectedCard.amount, \"AI ì˜¤ëª© ìŠ¹ë¦¬ ë³´ìƒ\");\n      } else if (selectedCard.type === \"coupon\") {\n        logger.log(\"[Reward] ì¿ í° ì§€ê¸‰:\", selectedCard.amount);\n        await addCouponsToUserById(user.uid, selectedCard.amount);\n      }\n\n      // ğŸ”¥ í™œë™ ë¡œê·¸ ê¸°ë¡ (AI ì˜¤ëª© ìŠ¹ë¦¬ ë³´ìƒ)\n      logActivity(db, {\n        classCode: userDoc?.classCode,\n        userId: user.uid,\n        userName: userDoc?.name || \"ì‚¬ìš©ì\",\n        type: ACTIVITY_TYPES.GAME_WIN,\n        description: `ì˜¤ëª© AI(${game?.aiDifficulty || \"ì¤‘ê¸‰\"}) ìŠ¹ë¦¬ - ${selectedCard.type === \"cash\" ? `í˜„ê¸ˆ ${selectedCard.amount.toLocaleString()}ì›` : `ì¿ í° ${selectedCard.amount}ê°œ`} íšë“`,\n        amount: selectedCard.type === \"cash\" ? selectedCard.amount : 0,\n        couponAmount: selectedCard.type === \"coupon\" ? selectedCard.amount : 0,\n        metadata: {\n          gameType: \"omok\",\n          opponent: \"AI\",\n          difficulty: game?.aiDifficulty || \"ì¤‘ê¸‰\",\n          rewardType: selectedCard.type,\n          rewardAmount: selectedCard.amount,\n        },\n      });\n\n      logger.log(\"[Reward] ë³´ìƒ ì§€ê¸‰ ì™„ë£Œ\");\n      setTimeout(() => leaveGame(), 2000);\n    } catch (error) {\n      logger.error(\"[Reward] Error applying reward:\", error);\n      setFeedback({\n        message: \"ë³´ìƒ ì§€ê¸‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\",\n        type: \"error\",\n      });\n\n      // ì—ëŸ¬ ë°œìƒ ì‹œ ë¡¤ë°± (í”Œë ˆì´ ì¹´ìš´íŠ¸ë§Œ)\n      const rollbackCount = dailyPlayCount;\n      localStorage.setItem(storageKey, rollbackCount.toString());\n      setDailyPlayCount(rollbackCount);\n    }\n  };\n\n  const renderBoard = () => {\n    const cells = [];\n    const starPointCoords = [3, 7, 11];\n\n    // ê°€ë¡œì„  ê·¸ë¦¬ê¸° (ê° ì…€ì˜ ì¤‘ì‹¬ì„ ì§€ë‚˜ë„ë¡)\n    const horizontalLines = [];\n    for (let i = 0; i < BOARD_SIZE; i++) {\n      horizontalLines.push(\n        <div\n          key={`h-line-${i}`}\n          className=\"grid-line horizontal\"\n          style={{\n            top: `calc((${i} + 0.5) * var(--cell-size))`,\n          }}\n        />,\n      );\n    }\n\n    // ì„¸ë¡œì„  ê·¸ë¦¬ê¸° (ê° ì…€ì˜ ì¤‘ì‹¬ì„ ì§€ë‚˜ë„ë¡)\n    const verticalLines = [];\n    for (let j = 0; j < BOARD_SIZE; j++) {\n      verticalLines.push(\n        <div\n          key={`v-line-${j}`}\n          className=\"grid-line vertical\"\n          style={{\n            left: `calc((${j} + 0.5) * var(--cell-size))`,\n          }}\n        />,\n      );\n    }\n\n    for (let i = 0; i < BOARD_SIZE; i++) {\n      for (let j = 0; j < BOARD_SIZE; j++) {\n        const cellValue = getBoardValue(game.board, i, j);\n        const isSelected =\n          selectedCell && selectedCell.row === i && selectedCell.col === j;\n        const isLastMove = lastMove && lastMove.row === i && lastMove.col === j;\n        const isStarPoint =\n          starPointCoords.includes(i) && starPointCoords.includes(j);\n\n        cells.push(\n          <div\n            key={`${i}-${j}`}\n            className={`omok-cell ${game.currentPlayer === user.uid && !cellValue ? \"clickable\" : \"\"} ${isSelected ? \"preview\" : \"\"}`}\n            onClick={() => handleCellClick(i, j)}\n            style={{\n              gridRow: i + 1,\n              gridColumn: j + 1,\n            }}\n          >\n            {isStarPoint && <div className=\"star-point\"></div>}\n            {cellValue && (\n              <div className={`omok-stone ${cellValue}`}>\n                {isLastMove && <div className=\"last-move-indicator\"></div>}\n              </div>\n            )}\n          </div>,\n        );\n      }\n    }\n    return (\n      <div className=\"omok-board\" style={{ \"--board-size\": BOARD_SIZE }}>\n        <div className=\"grid-lines-container\">\n          {horizontalLines}\n          {verticalLines}\n        </div>\n        {cells}\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    const loadDailyPlayCount = () => {\n      if (!user) return;\n\n      const today = new Date().toDateString();\n      const storageKey = `omokPlayCount_${user.uid}_${today}`;\n      const count = parseInt(localStorage.getItem(storageKey) || \"0\", 10);\n      setDailyPlayCount(count);\n    };\n\n    loadDailyPlayCount();\n  }, [user]);\n\n  if (!gameId || !game) {\n    const myRankDetails = getOmokRankDetails(omokStats);\n    return (\n      <div className=\"game-page-container\">\n        <div className=\"omok-header\">\n          <h2>ê¸€ë¡œë²Œ ì˜¤ëª© ê²Œì„</h2>\n          <p>\n            ì „ ì„¸ê³„ ëª¨ë“  í”Œë ˆì´ì–´ì™€ í•¨ê»˜ ë‘ë‡Œ ëŒ€ê²°ì„ í¼ì¹˜ê³  ì¿ í°ì„ íšë“í•˜ì„¸ìš”!\n          </p>\n          <div className=\"my-profile\">\n            <RankDisplay rankDetails={myRankDetails} showProgress={true} />\n            <div className=\"player-info\">\n              <strong>{userDoc?.name || userDoc?.nickname || \"ìµëª…\"}</strong>\n              {userDoc?.classCode && ` (${userDoc.classCode})`}\n              {isAdmin() && <span className=\"admin-badge\">[ê´€ë¦¬ì]</span>}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"omok-lobby\">\n          <div className=\"game-mode-selector\">\n            <h3>ê²Œì„ ëª¨ë“œ ì„ íƒ</h3>\n            <div className=\"mode-options\">\n              <button\n                className={`omok-button ${gameMode === \"player\" ? \"primary\" : \"\"}`}\n                onClick={() => setGameMode(\"player\")}\n              >\n                ğŸ‘¥ í”Œë ˆì´ì–´ ëŒ€ì „\n              </button>\n              <button\n                className={`omok-button ${gameMode === \"ai\" ? \"primary\" : \"\"}`}\n                onClick={() => setGameMode(\"ai\")}\n              >\n                ğŸ¤– AI ëŒ€ì „ ({dailyPlayCount}/5)\n              </button>\n            </div>\n          </div>\n\n          {gameMode === \"ai\" && (\n            <div className=\"ai-difficulty-selector\">\n              <h3>AI ë‚œì´ë„</h3>\n              <div className=\"difficulty-options\">\n                <button\n                  className={aiDifficulty === \"í•˜ê¸‰\" ? \"selected\" : \"\"}\n                  onClick={() => setAiDifficulty(\"í•˜ê¸‰\")}\n                >\n                  ğŸ˜Š í•˜ê¸‰\n                </button>\n                <button\n                  className={aiDifficulty === \"ì¤‘ê¸‰\" ? \"selected\" : \"\"}\n                  onClick={() => setAiDifficulty(\"ì¤‘ê¸‰\")}\n                >\n                  ğŸ¤” ì¤‘ê¸‰\n                </button>\n                <button\n                  className={aiDifficulty === \"ìƒê¸‰\" ? \"selected\" : \"\"}\n                  onClick={() => setAiDifficulty(\"ìƒê¸‰\")}\n                >\n                  ğŸ”¥ ìƒê¸‰\n                </button>\n              </div>\n            </div>\n          )}\n\n          <div className=\"lobby-section\">\n            <h3>ê²Œì„ ì°¸ì—¬í•˜ê¸°</h3>\n            <div className=\"lobby-actions\">\n              <button\n                onClick={createGame}\n                className=\"omok-button primary\"\n                disabled={loading}\n              >\n                {loading\n                  ? \"ìƒì„± ì¤‘...\"\n                  : gameMode === \"ai\"\n                    ? \"AI ëŒ€ì „ ì‹œì‘\"\n                    : \"ìƒˆ ê²Œì„ ë§Œë“¤ê¸°\"}\n              </button>\n              {createdGameId && !error && gameMode === \"player\" && (\n                <div className=\"omok-success\">\n                  ê²Œì„ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!{\" \"}\n                  <strong>ê²Œì„ ID: {createdGameId.slice(-6)}</strong>\n                  <br />\n                  ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì°¸ê°€í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.\n                </div>\n              )}\n            </div>\n          </div>\n\n          {gameMode === \"player\" && (\n            <div className=\"lobby-section\">\n              <div className=\"section-header\">\n                <h3>ğŸŒ ì „ì²´ ê³µê°œë°©({availableGames.length})</h3>\n                <button\n                  onClick={fetchAvailableGames}\n                  className=\"omok-button small\"\n                  disabled={loading}\n                >\n                  {loading ? \"...\" : \"ìƒˆë¡œê³ ì¹¨\"}\n                </button>\n              </div>\n              {availableGames.length > 0 ? (\n                <div className=\"game-rooms\">\n                  {availableGames.map((gameRoom) => {\n                    const hostRankDetails = getOmokRankDetails({\n                      wins: gameRoom.hostRank?.wins || 0,\n                      losses: gameRoom.hostRank?.losses || 0,\n                      totalRP: gameRoom.hostRank?.currentRP || BASE_RP,\n                    });\n                    return (\n                      <div\n                        key={gameRoom.id}\n                        className=\"game-room-card\"\n                        onClick={() => joinGame(gameRoom.id)}\n                      >\n                        {isAdmin() && (\n                          <button\n                            className=\"admin-delete-btn\"\n                            onClick={(e) => deleteGameRoom(gameRoom.id, e)}\n                            title=\"ê²Œì„ë°© ì‚­ì œ\"\n                          >\n                            âœ•\n                          </button>\n                        )}\n                        <div className=\"room-header\">\n                          <div className=\"room-host\">\n                            <RankDisplay\n                              rankDetails={hostRankDetails}\n                              size=\"small\"\n                            />\n                            <span className=\"host-name\">\n                              {gameRoom.hostName}ë‹˜ì˜ ë°©\n                            </span>\n                            <span className=\"host-class\">\n                              ({gameRoom.hostClass || \"ë¯¸ì„¤ì •\"})\n                            </span>\n                          </div>\n                          <div className=\"room-id\">\n                            #{gameRoom.id.slice(-6)}\n                          </div>\n                        </div>\n                        <div className=\"room-info\">\n                          <span className=\"player-count\">\n                            ğŸ‘¥{Object.keys(gameRoom.players).length}/2\n                          </span>\n                          <span className=\"room-status global-status\">\n                            ëŒ€ê¸°ì¤‘\n                          </span>\n                        </div>\n                        <div className=\"room-time\">\n                          {gameRoom.createdAt?.toDate\n                            ? gameRoom.createdAt\n                                .toDate()\n                                .toLocaleTimeString(\"ko-KR\")\n                            : \"ë°©ê¸ˆ ì „\"}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              ) : (\n                <div className=\"no-games\">\n                  {loading\n                    ? \"ê²Œì„ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...\"\n                    : \"í˜„ì¬ ì°¸ê°€ ê°€ëŠ¥í•œ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆ ê²Œì„ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!\"}\n                </div>\n              )}\n            </div>\n          )}\n          {error && <div className=\"omok-error\">{error}</div>}\n          {feedback.message && (\n            <div className={`feedback ${feedback.type}`}>\n              {feedback.message}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n  const myColor = game.players[user.uid];\n  const opponentId = Object.keys(game.players).find((p) => p !== user.uid);\n  const opponentColor = opponentId ? game.players[opponentId] : null;\n  const opponentName = opponentId\n    ? game.playerNames?.[opponentId] || \"ìƒëŒ€\"\n    : \"ëŒ€ê¸° ì¤‘...\";\n  const myRankDetails = game.playerRanks?.[user.uid];\n  const opponentRankDetails =\n    opponentId === \"AI\"\n      ? null\n      : opponentId\n        ? game.playerRanks?.[opponentId]\n        : null;\n  const isMyTurn = game.currentPlayer === user.uid;\n  const iRequestedRematch = game.rematch && game.rematch[user.uid];\n  const opponentRequestedRematch =\n    opponentId && game.rematch && game.rematch[opponentId];\n\n  return (\n    <div className=\"omok-container\">\n      {showWinAnimation && <div className=\"win-animation\">ìŠ¹ë¦¬!</div>}\n\n      {showRewardSelection && (\n        <div className=\"reward-modal\">\n          <div className=\"reward-content\">\n            <h3>ğŸ‰ ìŠ¹ë¦¬ ë³´ìƒ!</h3>\n            <p>í•˜ë‚˜ì˜ ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</p>\n            <div className=\"reward-cards\">\n              {rewardCards.map((card, index) => (\n                <div\n                  key={index}\n                  className=\"reward-card\"\n                  onClick={() => handleRewardSelection(card)}\n                >\n                  <div className=\"card-icon\">\n                    {card.type === \"cash\" ? \"ğŸ’µ\" : \"ğŸ«\"}\n                  </div>\n                  <div className=\"card-title\">\n                    {card.type === \"cash\" ? \"í˜„ê¸ˆ\" : \"ì¿ í°\"}\n                  </div>\n                  <div className=\"card-amount\">\n                    {card.type === \"cash\"\n                      ? `${card.amount.toLocaleString()}ì›`\n                      : `${card.amount}ê°œ`}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"omok-header\">\n        <h2>{game.aiMode ? \"ğŸ¤– AI ëŒ€ì „\" : \"ğŸŒ ê¸€ë¡œë²Œ ì˜¤ëª© ê²Œì„\"}</h2>\n        <div className=\"game-info\">\n          <span className=\"game-id\">ID: {gameId.slice(-6)}</span>\n          <span className=\"game-rules\">ê·œì¹™: ë Œì£¼ë£°</span>\n          {game.aiMode ? (\n            <span className=\"global-match\">ë‚œì´ë„: {game.aiDifficulty}</span>\n          ) : (\n            <span className=\"global-match\">ì „ì„¸ê³„ ë§¤ì¹­</span>\n          )}\n        </div>\n      </div>\n\n      <div className=\"player-status\">\n        <div\n          className={`player-card ${myColor} ${isMyTurn && !game.winner ? \"active\" : \"\"}`}\n        >\n          <div className=\"player-info\">\n            <RankDisplay rankDetails={myRankDetails} size=\"small\" />\n            <span className=\"player-name\">\n              {game.playerNames?.[user.uid] || \"ë‚˜\"}\n            </span>\n            <div className={`stone-indicator ${myColor}`}></div>\n          </div>\n          {isMyTurn && isThinking && !game.winner && (\n            <div className=\"opponent-thinking\">ë‹¹ì‹  ì°¨ë¡€</div>\n          )}\n        </div>\n\n        <div\n          className={`player-card ${opponentColor || \"\"} ${!isMyTurn && !game.winner && opponentId ? \"active\" : \"\"}`}\n        >\n          <div className=\"player-info\">\n            {opponentRankDetails && (\n              <RankDisplay rankDetails={opponentRankDetails} size=\"small\" />\n            )}\n            <span className=\"player-name\">{opponentName}</span>\n            {opponentColor && (\n              <div className={`stone-indicator ${opponentColor}`}></div>\n            )}\n          </div>\n          {((!isMyTurn && opponentId) || isAiThinking) && !game.winner && (\n            <div className=\"opponent-thinking\">ìƒê° ì¤‘...</div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"omok-board-container\">{renderBoard()}</div>\n\n      <div className=\"omok-status\">\n        {game.winner ? (\n          <div className=\"winner-announcement\">\n            {game.winner === \"AI\"\n              ? \"AIì˜ ìŠ¹ë¦¬!\"\n              : (game.playerNames?.[game.winner] || \"ìŠ¹ì\") + \" ë‹˜ì˜ ìŠ¹ë¦¬!\"}\n            {gameResult && (\n              <span className={`rp-change ${gameResult.outcome}`}>\n                ({gameResult.rpChange > 0 ? \"+\" : \"\"}\n                {gameResult.rpChange} RP)\n              </span>\n            )}\n            <br />\n            {!game.aiMode &&\n              game.winner === user.uid &&\n              game.couponAwardedTo === user.uid &&\n              \"ğŸ‰ ì¿ í° 1ê°œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!\"}\n            {!game.aiMode &&\n              game.winner === user.uid &&\n              game.couponAwardedTo !== user.uid &&\n              \"(ê²Œì„ ì‹œê°„ì´ 15ì´ˆ ë¯¸ë§Œì´ë¼ ì¿ í°ì´ ì§€ê¸‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.)\"}\n          </div>\n        ) : (\n          <div className=\"turn-info\">\n            í˜„ì¬ ì°¨ë¡€:{\" \"}\n            {isMyTurn\n              ? \"ë‹¹ì‹ \"\n              : game.currentPlayer === \"AI\"\n                ? \"AI\"\n                : game.playerNames?.[game.currentPlayer] || \"ìƒëŒ€\"}\n            {Object.keys(game.players).length < 2 && !game.aiMode && (\n              <div className=\"waiting-player\">\n                ìƒëŒ€ë°©ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {error && <div className=\"omok-error\">{error}</div>}\n      {feedback.message && (\n        <div className={`feedback ${feedback.type}`}>{feedback.message}</div>\n      )}\n\n      <div className=\"game-controls\">\n        {game.gameStatus === \"finished\" ? (\n          <>\n            {!game.aiMode && !iRequestedRematch && (\n              <button\n                onClick={handleRematchRequest}\n                className=\"omok-button primary\"\n              >\n                ë‹¤ì‹œ í•˜ê¸°\n              </button>\n            )}\n            <button onClick={leaveGame} className=\"omok-button secondary\">\n              ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°\n            </button>\n          </>\n        ) : (\n          <button onClick={leaveGame} className=\"omok-button secondary\">\n            ê¸°ê¶Œí•˜ê³  ë‚˜ê°€ê¸°\n          </button>\n        )}\n      </div>\n\n      {!game.aiMode && game.gameStatus === \"finished\" && (\n        <div\n          className=\"rematch-info\"\n          style={{\n            textAlign: \"center\",\n            marginTop: \"1rem\",\n            color: \"white\",\n            fontWeight: 600,\n          }}\n        >\n          {iRequestedRematch && !opponentRequestedRematch && (\n            <p>ì¬ëŒ€ê²°ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤. ìƒëŒ€ë°©ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤...</p>\n          )}\n          {opponentRequestedRematch && !iRequestedRematch && (\n            <p>ìƒëŒ€ë°©ì´ ì¬ëŒ€ê²°ì„ ì›í•©ë‹ˆë‹¤!</p>\n          )}\n          {iRequestedRematch && opponentRequestedRematch && (\n            <p>ì–‘ìª½ ëª¨ë‘ ì¬ëŒ€ê²°ì„ ì›í•©ë‹ˆë‹¤. ì ì‹œ í›„ ê²Œì„ì´ ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤!</p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OmokGame;\n"],"names":["RANKS","title","color","minRP","icon","BASE_RP","BOARD_SIZE","getIndex","row","col","getBoardValue","board","evaluatePattern","directions","totalScore","dr","dc","forward","backward","i","r","c","total","forwardR","forwardC","backwardR","backwardC","openEnds","checkForWin","player","y","x","dir","count","evaluatePosition","opponentColor","difficulty","tempBoard","idx","myScore","attackWeight","defenseWeight","getOmokRankDetails","omokStats","wins","losses","totalRP","currentRP","undefined","Math","max","currentRank","find","rank","currentRankIndex","findIndex","nextRank","pointsForNextRank","updateUserOmokRecord","async","userId","result","userDocRef","doc","db","runTransaction","userDoc","transaction","get","exists","logger","error","concat","currentOmok","data","omok","newWins","newLosses","newTotalRP","updatedOmok","update","log","RankDisplay","_ref2","rankDetails","showProgress","size","winRate","round","sizeClass","_jsxs","className","children","style","backgroundColor","_jsx","width","OmokGame","_game$playerNames","_game$playerRanks","_game$playerRanks2","_game$playerNames2","_game$playerNames3","_game$playerNames4","user","addCouponsToUserById","isAdmin","addCash","useAuth","gameId","setGameId","useState","game","setGame","setError","createdGameId","setCreatedGameId","isThinking","setIsThinking","lastMove","setLastMove","showWinAnimation","setShowWinAnimation","availableGames","setAvailableGames","loading","setLoading","selectedCell","setSelectedCell","gameResult","setGameResult","refetchGameDataRef","useRef","feedback","setFeedback","message","type","gameMode","setGameMode","aiDifficulty","setAiDifficulty","dailyPlayCount","setDailyPlayCount","setOmokStats","useEffect","localOptimisticOmokUpdate","useCallback","prevStats","newRP","newStats","showRewardSelection","setShowRewardSelection","rewardCards","setRewardCards","isAiThinking","setIsAiThinking","gameIdRef","current","gameRef","userRef","cleanup","currentGameId","currentGame","currentUser","host","uid","deleteDoc","window","addEventListener","removeEventListener","createEmptyBoard","Array","fill","fetchAvailableGames","gamesRef","collection","q","query","where","orderBy","games","getDocs","docs","map","_objectSpread","id","err","createGame","myName","name","nickname","displayName","myClass","classCode","myRankDetails","isAiMode","newGame","players","AI","playerNames","playerClasses","playerRanks","currentPlayer","winner","createdAt","serverTimestamp","hostName","hostClass","hostRank","turnStartTime","history","gameStatus","statsUpdated","rematch","aiMode","gameDocRef","addDoc","Date","leaveGame","opponentId","Object","keys","p","_game$createdAt","gameStartTime","toDate","getTime","now","_game$createdAt2","shouldAwardCoupon","finalUpdate","couponAwardedTo","updateDoc","handleCellClick","hasGame","cellValue","isMyTurn","length","boardWithNewStone","myColor","forbiddenMove","nextPlayer","moveData","timestamp","newHistory","updateData","_game$createdAt3","outcome","rpChange","cards","generateRewardCards","placeStone","hasFetchedGamesRef","lastGameIdRef","fetchGameData","docSnap","getDoc","gameData","winnerId","loserId","shouldPoll","refetch","refetchGameData","usePolling","interval","enabled","deps","timer","setTimeout","clearTimeout","resetGameForRematch","playerIds","newPlayers","newCurrentPlayer","aiTurnProcessedRef","thinkingTime","random","aiColor","bestMove","findBestMove","placedStones","push","floor","center","centerMoves","move","searchRange","possibleMoves","checkedPositions","Set","stone","key","has","add","firstEmpty","cell","testBoard","patternScore","bestScore","score","centerDist","abs","prevGame","amount","í•˜ê¸‰","ì¤‘ê¸‰","ìƒê¸‰","sort","loadDailyPlayCount","today","toDateString","storageKey","parseInt","localStorage","getItem","onClick","disabled","slice","gameRoom","_gameRoom$hostRank","_gameRoom$hostRank2","_gameRoom$hostRank3","_gameRoom$createdAt","hostRankDetails","gameDoc","Error","joinGame","e","roomId","stopPropagation","confirm","deleteGameRoom","toLocaleTimeString","opponentName","opponentRankDetails","iRequestedRematch","opponentRequestedRematch","card","index","selectedCard","newCount","setItem","toString","toLocaleString","logActivity","userName","ACTIVITY_TYPES","GAME_WIN","description","couponAmount","metadata","gameType","opponent","rewardType","rewardAmount","rollbackCount","handleRewardSelection","renderBoard","cells","starPointCoords","horizontalLines","top","verticalLines","j","left","isSelected","isLastMove","isStarPoint","includes","gridRow","gridColumn","_Fragment","textAlign","marginTop","fontWeight"],"ignoreList":[],"sourceRoot":""}