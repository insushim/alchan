{"version":3,"file":"static/js/613.c3d516f5.chunk.js","mappings":"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","sources":["pages/government/NationalAssembly.js"],"sourcesContent":["// src/NationalAssembly.js\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport \"./NationalAssembly.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db } from \"../../firebase\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\n// Firestore v9 ëª¨ë“ˆì‹ APIì—ì„œ í•„ìš”í•œ í•¨ìˆ˜ë“¤ì„ ì§ì ‘ í•œ ë²ˆì— ê°€ì ¸ì˜µë‹ˆë‹¤.\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  increment,\r\n  writeBatch,\r\n  setDoc,\r\n  serverTimestamp,\r\n  runTransaction, // â— runTransaction í•¨ìˆ˜ ì¶”ê°€\r\n} from \"firebase/firestore\";\r\n\r\nconst NationalAssembly = () => {\r\n  const { userDoc: currentUser, loading: authLoading, isAdmin } = useAuth();\r\n\r\n  const { data: jobs } = usePolling(\r\n    async () => {\r\n      if (!currentUser?.classCode) return [];\r\n      const jobsRef = collection(db, \"jobs\");\r\n      const q = query(jobsRef, where(\"classCode\", \"==\", currentUser.classCode));\r\n      const snapshot = await getDocs(q);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      // ğŸ”¥ [ìµœì í™”] 1ë¶„ â†’ 5ë¶„ìœ¼ë¡œ ë³€ê²½ (ì½ê¸° ë¹„ìš© ì ˆê°)\r\n      interval: 300000,\r\n      enabled: !!currentUser?.classCode,\r\n      deps: [currentUser?.classCode],\r\n    }\r\n  );\r\n\r\n  const canProposeLaw = useCallback(() => {\r\n    if (isAdmin()) return true;\r\n    if (!currentUser?.selectedJobIds || !jobs || jobs.length === 0) return false;\r\n    const selectedJobs = jobs.filter(job => currentUser.selectedJobIds.includes(job.id));\r\n    return selectedJobs.some(job => job.title === 'êµ­íšŒì˜ì›');\r\n  }, [isAdmin, currentUser, jobs]);\r\n\r\n  const classCode = currentUser?.classCode;\r\n\r\n  const [activeTab, setActiveTab] = useState(\"propose\");\r\n  const [showProposeLawModal, setShowProposeLawModal] = useState(false);\r\n  const [showEditLawModal, setShowEditLawModal] = useState(false);\r\n  const [newLaw, setNewLaw] = useState({\r\n    title: \"\",\r\n    purpose: \"\",\r\n    description: \"\",\r\n    fine: \"\",\r\n  });\r\n  const [editingLaw, setEditingLaw] = useState(null);\r\n  const [localAdminSettings, setLocalAdminSettings] = useState(null);\r\n  const [localGovSettings, setLocalGovSettings] = useState(null);\r\n\r\n  // ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ë¡œì»¬ ìƒíƒœ\r\n  const [optimisticVotes, setOptimisticVotes] = useState({});\r\n  const [optimisticUserVotes, setOptimisticUserVotes] = useState({});\r\n  const [optimisticDeletedLaws, setOptimisticDeletedLaws] = useState(new Set());\r\n  const [optimisticEditedLaws, setOptimisticEditedLaws] = useState({});\r\n  const [optimisticNewLaws, setOptimisticNewLaws] = useState([]);\r\n\r\n  // ê´€ë¦¬ì ì„¤ì • ë¡œë“œ ë° ì´ˆê¸°í™”\r\n  const { data: adminSettings, loading: adminSettingsLoading } = usePolling(\r\n    async () => {\r\n      if (!classCode) return { totalStudents: 25 };\r\n\r\n      const adminSettingsDocRefNode = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblySettings\",\r\n        \"admin\"\r\n      );\r\n\r\n      const docSnap = await getDoc(adminSettingsDocRefNode);\r\n\r\n      if (docSnap.exists()) {\r\n        return docSnap.data();\r\n      } else {\r\n        const defaultAdminSettings = { totalStudents: 25 };\r\n        await setDoc(adminSettingsDocRefNode, defaultAdminSettings);\r\n        return defaultAdminSettings;\r\n      }\r\n    },\r\n    {\r\n      interval: 300000,\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n      defaultValue: { totalStudents: 25 },\r\n      onError: (error) => {\r\n        console.error(\"Error fetching admin settings:\", error);\r\n      }\r\n    }\r\n  );\r\n\r\n  // ì •ë¶€ ì„¤ì • ë¡œë“œ ë° ì´ˆê¸°í™”\r\n  const { data: governmentSettings, loading: govSettingsLoading } = usePolling(\r\n    async () => {\r\n      if (!classCode || adminSettingsLoading) {\r\n        return {\r\n          vetoOverrideRequired: Math.ceil(\r\n            ((adminSettings?.totalStudents) || 25) * (2 / 3)\r\n          ),\r\n        };\r\n      }\r\n\r\n      const govSettingsDocRefNode = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblySettings\",\r\n        \"government\"\r\n      );\r\n\r\n      const docSnap = await getDoc(govSettingsDocRefNode);\r\n\r\n      if (docSnap.exists()) {\r\n        return docSnap.data();\r\n      } else {\r\n        const defaultGovSettings = {\r\n          vetoOverrideRequired: Math.ceil(\r\n            ((adminSettings?.totalStudents) || 25) * (2 / 3)\r\n          ),\r\n        };\r\n        await setDoc(govSettingsDocRefNode, defaultGovSettings);\r\n        return defaultGovSettings;\r\n      }\r\n    },\r\n    {\r\n      interval: 300000,\r\n      enabled: !!classCode && !adminSettingsLoading,\r\n      deps: [classCode, adminSettings?.totalStudents, adminSettingsLoading],\r\n      defaultValue: {\r\n        vetoOverrideRequired: Math.ceil(\r\n          ((adminSettings?.totalStudents) || 25) * (2 / 3)\r\n        ),\r\n      },\r\n      onError: (error) => {\r\n        console.error(\"Error fetching government settings:\", error);\r\n      }\r\n    }\r\n  );\r\n\r\n  // ë²•ì•ˆ ë°ì´í„° ë¡œë“œ\r\n  const { data: laws, loading: lawsLoading, refetch: refetchLaws } = usePolling(\r\n    async () => {\r\n      if (!classCode) return [];\r\n\r\n      const lawsCollectionRefNode = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblyLaws\"\r\n      );\r\n      const q = query(lawsCollectionRefNode, orderBy(\"timestamp\", \"desc\"), limit(100));\r\n      const querySnapshot = await getDocs(q);\r\n\r\n      return querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        timestamp: doc.data().timestamp?.toDate\r\n          ? doc.data().timestamp.toDate().toISOString()\r\n          : new Date().toISOString(),\r\n        vetoDate: doc.data().vetoDate?.toDate\r\n          ? doc.data().vetoDate.toDate().toISOString()\r\n          : null,\r\n        vetoDeadline: doc.data().vetoDeadline?.toDate\r\n          ? doc.data().vetoDeadline.toDate().toISOString()\r\n          : null,\r\n        finalApprovalDate: doc.data().finalApprovalDate?.toDate\r\n          ? doc.data().finalApprovalDate.toDate().toISOString()\r\n          : null,\r\n      }));\r\n    },\r\n    {\r\n      interval: 300000,\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n      defaultValue: [],\r\n      onError: (error) => {\r\n        console.error(\"Error fetching laws:\", error);\r\n      }\r\n    }\r\n  );\r\n\r\n  // ì‚¬ìš©ì íˆ¬í‘œ ì´ë ¥ ë¡œë“œ\r\n  const { data: userVotes, loading: userVotesLoading } = usePolling(\r\n    async () => {\r\n      if (!classCode || !currentUser?.id) return {};\r\n\r\n      const userVotesDocRefNode = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"userVotes\",\r\n        currentUser.id\r\n      );\r\n\r\n      const docSnap = await getDoc(userVotesDocRefNode);\r\n\r\n      if (docSnap.exists()) {\r\n        return docSnap.data();\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n    {\r\n      interval: 300000,\r\n      enabled: !!classCode && !!currentUser?.id,\r\n      deps: [classCode, currentUser?.id],\r\n      defaultValue: {},\r\n      onError: (error) => {\r\n        console.error(\"Error fetching user votes:\", error);\r\n      }\r\n    }\r\n  );\r\n\r\n  // --- ğŸ”¥ [ìˆ˜ì •] ìƒˆ ë²•ì•ˆ ì œì•ˆ í•¨ìˆ˜ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì ìš©) ---\r\n  const handleProposeLaw = async () => {\r\n    console.log(\"[NationalAssembly] handleProposeLaw ì‹œì‘\");\r\n    console.log(\"[NationalAssembly] classCode:\", classCode);\r\n    console.log(\"[NationalAssembly] currentUser:\", currentUser);\r\n    console.log(\"[NationalAssembly] newLaw:\", newLaw);\r\n\r\n    if (!classCode || !currentUser) {\r\n      console.log(\"[NationalAssembly] í•™ê¸‰ ì •ë³´ ë˜ëŠ” ìœ ì € ì •ë³´ ì—†ìŒ\");\r\n      alert(\"í•™ê¸‰ ì •ë³´ê°€ ì—†ê±°ë‚˜ ë¡œê·¸ì¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!newLaw.title || !newLaw.description || !newLaw.fine) {\r\n      console.log(\"[NationalAssembly] í•„ìˆ˜ í•„ë“œ ëˆ„ë½\");\r\n      alert(\"ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ì„ì‹œ ID ìƒì„± (ë‚™ê´€ì  ì—…ë°ì´íŠ¸ìš©)\r\n    const tempId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ì¦‰ì‹œ UIì— ìƒˆ ë²•ì•ˆ ì¶”ê°€\r\n    const optimisticLaw = {\r\n      id: tempId,\r\n      ...newLaw,\r\n      proposerId: currentUser.id,\r\n      proposerName: currentUser.name || \"ìµëª…\",\r\n      approvals: 0,\r\n      disapprovals: 0,\r\n      status: \"pending\",\r\n      timestamp: new Date().toISOString(),\r\n      classCode: classCode,\r\n      voters: {},\r\n      isOptimistic: true, // ë‚™ê´€ì  ì—…ë°ì´íŠ¸ í”Œë˜ê·¸\r\n    };\r\n\r\n    setOptimisticNewLaws(prev => [optimisticLaw, ...prev]);\r\n    setShowProposeLawModal(false);\r\n    const savedNewLaw = { ...newLaw };\r\n    setNewLaw({ title: \"\", purpose: \"\", description: \"\", fine: \"\" });\r\n\r\n    // ğŸ”¥ collection í•¨ìˆ˜ì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•: db ì¸ìŠ¤í„´ìŠ¤ì™€ ì „ì²´ ê²½ë¡œë¥¼ ì¸ìë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.\r\n    const lawsCollectionRef = collection(db, \"classes\", classCode, \"nationalAssemblyLaws\");\r\n\r\n    const newLawData = {\r\n      ...savedNewLaw,\r\n      proposerId: currentUser.id,\r\n      proposerName: currentUser.name || \"ìµëª…\",\r\n      approvals: 0,\r\n      disapprovals: 0,\r\n      status: \"pending\",\r\n      timestamp: serverTimestamp(),\r\n      classCode: classCode,\r\n      voters: {},\r\n    };\r\n\r\n    try {\r\n      // ğŸ”¥ ìˆ˜ì •ëœ collection ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\r\n      const docRef = await addDoc(lawsCollectionRef, newLawData);\r\n      console.log(\"ìƒˆ ë²•ì•ˆì´ ì„±ê³µì ìœ¼ë¡œ ì œì•ˆë˜ì—ˆìŠµë‹ˆë‹¤:\", newLawData.title);\r\n\r\n      // ì„±ê³µ ì‹œ: ì¦‰ì‹œ ì„œë²„ì—ì„œ ìµœì‹  ë²•ì•ˆ ëª©ë¡ì„ ê°€ì ¸ì˜´\r\n      await refetchLaws();\r\n\r\n      // refetch ì™„ë£Œ í›„ ì„ì‹œ ë²•ì•ˆ ì œê±°\r\n      setOptimisticNewLaws(prev => prev.filter(law => law.id !== tempId));\r\n    } catch (error) {\r\n      console.error(\"Error proposing new law:\", error);\r\n\r\n      // ë¡¤ë°±: ë‚™ê´€ì ìœ¼ë¡œ ì¶”ê°€ëœ ë²•ì•ˆ ì œê±°\r\n      setOptimisticNewLaws(prev => prev.filter(law => law.id !== tempId));\r\n\r\n      alert(\"ë²•ì•ˆ ì œì•ˆ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  const handleOpenEditModal = (law) => {\r\n    if (!isAdmin()) {\r\n      alert(\"ê´€ë¦¬ìë§Œ ë²•ì•ˆì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    setEditingLaw({ ...law });\r\n    setShowEditLawModal(true);\r\n  };\r\n\r\n  const handleSaveEditLaw = async () => {\r\n    if (!classCode || !editingLaw || !editingLaw.id || !isAdmin()) {\r\n      alert(\"ìˆ˜ì • ê¶Œí•œì´ ì—†ê±°ë‚˜ ì •ë³´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!editingLaw.title || !editingLaw.description || !editingLaw.fine) {\r\n      alert(\"ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ì¦‰ì‹œ UIì— ë°˜ì˜\r\n    setOptimisticEditedLaws(prev => ({\r\n      ...prev,\r\n      [editingLaw.id]: editingLaw\r\n    }));\r\n    setShowEditLawModal(false);\r\n    const previousEditingLaw = editingLaw;\r\n    setEditingLaw(null);\r\n\r\n    const lawDocRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"nationalAssemblyLaws\",\r\n      previousEditingLaw.id\r\n    );\r\n    try {\r\n      const {\r\n        id,\r\n        voters,\r\n        timestamp,\r\n        classCode: lawClassCode,\r\n        proposerId,\r\n        proposerName,\r\n        ...dataToUpdate\r\n      } = previousEditingLaw;\r\n      await updateDoc(lawDocRef, {\r\n        ...dataToUpdate,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      // ì„±ê³µ ì‹œ: ì¦‰ì‹œ ì„œë²„ì—ì„œ ìµœì‹  ë²•ì•ˆ ëª©ë¡ì„ ê°€ì ¸ì˜´\r\n      await refetchLaws();\r\n\r\n      // refetch ì™„ë£Œ í›„ ë‚™ê´€ì  ìˆ˜ì • ìƒíƒœ ì œê±°\r\n      setOptimisticEditedLaws(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[previousEditingLaw.id];\r\n        return newState;\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error saving edited law:\", error);\r\n\r\n      // ë¡¤ë°±: ìˆ˜ì • ì·¨ì†Œ\r\n      setOptimisticEditedLaws(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[previousEditingLaw.id];\r\n        return newState;\r\n      });\r\n\r\n      alert(\"ë²•ì•ˆ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  const handleVote = async (lawId, voteType) => {\r\n    if (!classCode || !currentUser?.id) {\r\n      alert(\"íˆ¬í‘œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì •ë³´ ë¶€ì¡±)\");\r\n      return;\r\n    }\r\n\r\n    // ì¤‘ë³µ íˆ¬í‘œ ì²´í¬ (ë‚™ê´€ì  ìƒíƒœ ë˜ëŠ” ì„œë²„ ìƒíƒœ)\r\n    const hasVotedOptimistic = optimisticUserVotes[lawId];\r\n    const hasVotedServer = userVotes[lawId];\r\n    if (!isAdmin() && (hasVotedOptimistic || hasVotedServer)) {\r\n      alert(\"ì´ë¯¸ ì´ ë²•ì•ˆì— íˆ¬í‘œí•˜ì…¨ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    const law = laws.find(l => l.id === lawId);\r\n    if (!law) {\r\n      alert(\"ë²•ì•ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸\r\n    setOptimisticUserVotes(prev => ({ ...prev, [lawId]: voteType }));\r\n    setOptimisticVotes(prev => ({\r\n      ...prev,\r\n      [lawId]: {\r\n        approvals: (prev[lawId]?.approvals || law.approvals || 0) + (voteType === \"approvals\" ? 1 : 0),\r\n        disapprovals: (prev[lawId]?.disapprovals || law.disapprovals || 0) + (voteType === \"disapprovals\" ? 1 : 0),\r\n      }\r\n    }));\r\n\r\n    const userVotesDocRefNode = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"userVotes\",\r\n      currentUser.id\r\n    );\r\n    const lawRef = doc(db, \"classes\", classCode, \"nationalAssemblyLaws\", lawId);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const lawDoc = await transaction.get(lawRef);\r\n        const userVotesDoc = await transaction.get(userVotesDocRefNode);\r\n\r\n        if (!lawDoc.exists()) {\r\n          throw new Error(\"ë²•ì•ˆì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        const lawData = lawDoc.data();\r\n        const userVotesData = userVotesDoc.exists() ? userVotesDoc.data() : {};\r\n\r\n        // ì¬ì˜ê²°ì´ ì•„ë‹Œ ê²½ìš° ì¤‘ë³µ íˆ¬í‘œ í™•ì¸\r\n        if (!isAdmin() && userVotesData[lawId] && lawData.status !== \"vetoed\") {\r\n          throw new Error(\"ì´ë¯¸ ì´ ë²•ì•ˆì— íˆ¬í‘œí•˜ì…¨ìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        const totalStudents = adminSettings.totalStudents;\r\n        const halfStudents = Math.ceil(totalStudents / 2);\r\n        const vetoOverrideRequiredCount = governmentSettings.vetoOverrideRequired;\r\n\r\n        const newApprovals = (lawData.approvals || 0) + (voteType === \"approvals\" ? 1 : 0);\r\n        const newDisapprovals = (lawData.disapprovals || 0) + (voteType === \"disapprovals\" ? 1 : 0);\r\n\r\n        const updates = { updatedAt: serverTimestamp() };\r\n\r\n        if (voteType === \"approvals\") {\r\n          updates.approvals = increment(1);\r\n        } else {\r\n          updates.disapprovals = increment(1);\r\n        }\r\n\r\n        if (!isAdmin()) {\r\n          updates[`voters.${currentUser.id}`] = voteType;\r\n        }\r\n\r\n        // ë²•ì•ˆ ìƒíƒœì— ë”°ë¼ ë¡œì§ ì ìš©\r\n        if (lawData.status === \"vetoed\") {\r\n          if (voteType === \"approvals\" && newApprovals >= vetoOverrideRequiredCount) {\r\n            updates.status = \"veto_overridden\";\r\n            updates.finalStatus = \"final_approved\";\r\n            updates.finalApprovalDate = serverTimestamp();\r\n          }\r\n        } else if ([\"pending\", \"rejected\", \"auto_rejected\"].includes(lawData.status)) {\r\n          if (voteType === \"approvals\" && newApprovals >= 13) {\r\n            updates.status = \"pending_government_approval\";\r\n            updates.approvalDate = serverTimestamp();\r\n          } else if (voteType === \"disapprovals\" && newDisapprovals >= halfStudents) {\r\n            updates.status = \"rejected\";\r\n          }\r\n        } else {\r\n          throw new Error(\"ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ íˆ¬í‘œê°€ ë¶ˆê°€ëŠ¥í•œ ë²•ì•ˆì…ë‹ˆë‹¤.\");\r\n        }\r\n\r\n        transaction.update(lawRef, updates);\r\n\r\n        if (!isAdmin()) {\r\n          transaction.set(userVotesDocRefNode, { [lawId]: voteType }, { merge: true });\r\n        }\r\n      });\r\n\r\n      // íŠ¸ëœì­ì…˜ ì„±ê³µ ì‹œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ìƒíƒœ ì •ë¦¬ (ì„œë²„ ë°ì´í„°ë¡œ ëŒ€ì²´ë¨)\r\n      // usePollingì´ ìë™ìœ¼ë¡œ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì´ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ë³„ë„ ì²˜ë¦¬ ë¶ˆí•„ìš”\r\n    } catch (error) {\r\n      console.error(\"Error voting on law:\", error);\r\n\r\n      // ë¡¤ë°±: ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì·¨ì†Œ\r\n      setOptimisticUserVotes(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[lawId];\r\n        return newState;\r\n      });\r\n      setOptimisticVotes(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[lawId];\r\n        return newState;\r\n      });\r\n\r\n      alert(`íˆ¬í‘œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message || error}`);\r\n    }\r\n  };\r\n\r\n\r\n  const handleResetVotes = async (lawId) => {\r\n    if (!isAdmin() || !classCode) {\r\n      alert(\"ê´€ë¦¬ìë§Œ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (window.confirm(\"ì´ ë²•ì•ˆì˜ ëª¨ë“  íˆ¬í‘œë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\r\n      const lawDocRef = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblyLaws\",\r\n        lawId\r\n      );\r\n      try {\r\n        // ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ìƒíƒœ ì´ˆê¸°í™”\r\n        setOptimisticVotes(prev => {\r\n          const newState = { ...prev };\r\n          delete newState[lawId];\r\n          return newState;\r\n        });\r\n        setOptimisticUserVotes(prev => {\r\n          const newState = { ...prev };\r\n          delete newState[lawId];\r\n          return newState;\r\n        });\r\n\r\n        await updateDoc(lawDocRef, {\r\n          approvals: 0,\r\n          disapprovals: 0,\r\n          status: \"pending\",\r\n          voters: {},\r\n          updatedAt: serverTimestamp(),\r\n          finalStatus: null,\r\n          finalApprovalDate: null,\r\n        });\r\n        alert(\"ë²•ì•ˆ íˆ¬í‘œê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n      } catch (error) {\r\n        console.error(\"Error resetting votes:\", error);\r\n        alert(\"íˆ¬í‘œ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteLaw = async (id) => {\r\n    if (!classCode) return;\r\n    const lawToDelete = laws.find((law) => law.id === id);\r\n    if (!lawToDelete) return;\r\n\r\n    if (\r\n      !isAdmin() &&\r\n      !(\r\n        (lawToDelete.status === \"rejected\" ||\r\n          lawToDelete.status === \"auto_rejected\") &&\r\n        lawToDelete.proposerId === currentUser?.id\r\n      )\r\n    ) {\r\n      alert(\"ê´€ë¦¬ì ë˜ëŠ” ë¶€ê²°ëœ ë²•ì•ˆì˜ ì œì•ˆìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (window.confirm(\"ì •ë§ë¡œ ì´ ë²•ì•ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\r\n      // ë‚™ê´€ì  ì—…ë°ì´íŠ¸: ì¦‰ì‹œ UIì—ì„œ ì œê±°\r\n      setOptimisticDeletedLaws(prev => new Set([...prev, id]));\r\n\r\n      const lawDocRef = doc(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblyLaws\",\r\n        id\r\n      );\r\n      try {\r\n        await deleteDoc(lawDocRef);\r\n\r\n        // ì„±ê³µ ì‹œ: ì¦‰ì‹œ ì„œë²„ì—ì„œ ìµœì‹  ë²•ì•ˆ ëª©ë¡ì„ ê°€ì ¸ì˜´\r\n        await refetchLaws();\r\n\r\n        // refetch ì™„ë£Œ í›„ ë‚™ê´€ì  ì‚­ì œ ìƒíƒœ ì œê±°\r\n        setOptimisticDeletedLaws(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.delete(id);\r\n          return newSet;\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error deleting law:\", error);\r\n\r\n        // ë¡¤ë°±: ì‚­ì œ ì·¨ì†Œ\r\n        setOptimisticDeletedLaws(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.delete(id);\r\n          return newSet;\r\n        });\r\n\r\n        alert(\"ë²•ì•ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSaveAdminSettings = async () => {\r\n    if (!classCode || !isAdmin()) {\r\n      alert(\"ê´€ë¦¬ì ê¶Œí•œì´ ì—†ê±°ë‚˜ í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    const adminSettingsDocRefNode = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"nationalAssemblySettings\",\r\n      \"admin\"\r\n    );\r\n    try {\r\n      const settingsToSave = localAdminSettings || adminSettings;\r\n      await setDoc(\r\n        adminSettingsDocRefNode,\r\n        {\r\n          totalStudents: parseInt(settingsToSave.totalStudents, 10) || 25,\r\n        },\r\n        { merge: true }\r\n      );\r\n      setLocalAdminSettings(null);\r\n      alert(\"ê´€ë¦¬ì ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n    } catch (error) {\r\n      console.error(\"Error saving admin settings:\", error);\r\n      alert(\"ê´€ë¦¬ì ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  const handleSaveGovernmentSettings = async () => {\r\n    if (!classCode || !isAdmin()) {\r\n      alert(\"ì„¤ì • ì €ì¥ ê¶Œí•œì´ ì—†ê±°ë‚˜ í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    const govSettingsDocRefNode = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"nationalAssemblySettings\",\r\n      \"government\"\r\n    );\r\n    try {\r\n      const settingsToSave = localGovSettings || governmentSettings;\r\n      await setDoc(\r\n        govSettingsDocRefNode,\r\n        {\r\n          vetoOverrideRequired:\r\n            parseInt(settingsToSave.vetoOverrideRequired, 10) ||\r\n            Math.ceil(adminSettings.totalStudents * (2 / 3)),\r\n        },\r\n        { merge: true }\r\n      );\r\n      setLocalGovSettings(null);\r\n      alert(\"ì¬ì˜ê²° ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n    } catch (error) {\r\n      console.error(\"Error saving government settings:\", error);\r\n      alert(\"ì¬ì˜ê²° ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  // ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ laws ë°°ì—´ì— ë°˜ì˜\r\n  const displayLaws = useMemo(() => {\r\n    let result = (laws || [])\r\n      // ë‚™ê´€ì ìœ¼ë¡œ ì‚­ì œëœ ë²•ì•ˆ ì œì™¸\r\n      .filter(law => !optimisticDeletedLaws.has(law.id))\r\n      // ë‚™ê´€ì ìœ¼ë¡œ ìˆ˜ì •ëœ ë²•ì•ˆ ë°˜ì˜\r\n      .map(law => {\r\n        if (optimisticEditedLaws[law.id]) {\r\n          return { ...law, ...optimisticEditedLaws[law.id] };\r\n        }\r\n        return law;\r\n      });\r\n\r\n    // ë‚™ê´€ì ìœ¼ë¡œ ì¶”ê°€ëœ ìƒˆ ë²•ì•ˆì„ ë§¨ ì•ì— ì¶”ê°€\r\n    if (optimisticNewLaws.length > 0) {\r\n      result = [...optimisticNewLaws, ...result];\r\n    }\r\n\r\n    return result;\r\n  }, [laws, optimisticDeletedLaws, optimisticEditedLaws, optimisticNewLaws]);\r\n\r\n  const approvedLaws = displayLaws.filter(\r\n    (law) =>\r\n      law.status === \"veto_overridden\" ||\r\n      law.finalStatus === \"final_approved\"\r\n  );\r\n  // âœ¨ ìˆ˜ì •ëœ ë¶€ë¶„: pendingLaws í•„í„°ì— 'pending_government_approval' ì¶”ê°€\r\n  const pendingLaws = displayLaws.filter(\r\n    (law) =>\r\n      law.status === \"pending\" ||\r\n      law.status === \"rejected\" ||\r\n      law.status === \"auto_rejected\" ||\r\n      law.status === \"pending_government_approval\"\r\n  );\r\n  const vetoedLaws = displayLaws.filter((law) => law.status === \"vetoed\");\r\n\r\n  let displayedLaws;\r\n  if (activeTab === \"approved\") {\r\n    displayedLaws = approvedLaws;\r\n  } else if (activeTab === \"vetoed\") {\r\n    displayedLaws = vetoedLaws;\r\n  } else {\r\n    displayedLaws = pendingLaws;\r\n  }\r\n\r\n  const sortedLaws = [...displayedLaws];\r\n\r\n  const getLawStatusDisplay = (law) => {\r\n    if (law.finalStatus === \"final_approved\") {\r\n      return <span className=\"law-status final-approved\">ìµœì¢… ê°€ê²°</span>;\r\n    }\r\n    switch (law.status) {\r\n      // âœ¨ ì¶”ê°€ëœ ë¶€ë¶„: 'ì •ë¶€ ì´ì†¡' ìƒíƒœ í‘œì‹œ\r\n      case \"pending_government_approval\":\r\n        return <span className=\"law-status pending-gov\">ì •ë¶€ ì´ì†¡</span>;\r\n      case \"approved\":\r\n        return <span className=\"law-status approved\">ê°€ê²°ë¨</span>;\r\n      case \"veto_overridden\":\r\n        return <span className=\"law-status override\">ì¬ì˜ê²° ê°€ê²°</span>;\r\n      case \"vetoed\":\r\n        return <span className=\"law-status vetoed\">ê±°ë¶€ê¶Œ í–‰ì‚¬ë¨</span>;\r\n      case \"rejected\":\r\n        return <span className=\"law-status rejected\">ë¶€ê²°ë¨</span>;\r\n      case \"auto_rejected\":\r\n        return <span className=\"law-status auto-rejected\">ìë™ ë¶€ê²°ë¨</span>;\r\n      default:\r\n        return <span className=\"law-status pending\">ì‹¬ì˜ì¤‘</span>;\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"ì •ë³´ ì—†ìŒ\";\r\n    try {\r\n      const date = new Date(dateString);\r\n      if (isNaN(date.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ\";\r\n      return `${date.getFullYear()}ë…„ ${\r\n        date.getMonth() + 1\r\n      }ì›” ${date.getDate()}ì¼ ${date.getHours()}ì‹œ ${date.getMinutes()}ë¶„`;\r\n    } catch (e) {\r\n      return \"ë‚ ì§œ ë³€í™˜ ì˜¤ë¥˜\";\r\n    }\r\n  };\r\n\r\n  const getRemainingTime = (deadlineString) => {\r\n    if (!deadlineString) return \"ê¸°í•œ ì—†ìŒ\";\r\n    const now = new Date();\r\n    const deadlineDate = new Date(deadlineString);\r\n    if (isNaN(deadlineDate.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°í•œ\";\r\n    const diff = deadlineDate - now;\r\n\r\n    if (diff <= 0) return \"ì‹œê°„ ë§Œë£Œ\";\r\n\r\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n\r\n    let remaining = \"\";\r\n    if (days > 0) remaining += `${days}ì¼ `;\r\n    if (hours > 0 || days > 0) remaining += `${hours}ì‹œê°„ `;\r\n    if (minutes > 0 || (days === 0 && hours === 0)) remaining += `${minutes}ë¶„`;\r\n\r\n    return remaining.trim() + \" ë‚¨ìŒ\" || \"ê³§ ë§Œë£Œ\";\r\n  };\r\n\r\n  const renderAdminActions = (law) => {\r\n    if (!isAdmin()) return null;\r\n    return (\r\n      <div className=\"admin-actions\">\r\n        <button\r\n          onClick={() => handleOpenEditModal(law)}\r\n          className=\"admin-button edit-button\"\r\n        >\r\n          ìˆ˜ì •\r\n        </button>\r\n        <button\r\n          onClick={() => handleDeleteLaw(law.id)}\r\n          className=\"admin-button delete-button\"\r\n        >\r\n          ì‚­ì œ\r\n        </button>\r\n        {(law.status === \"pending\" ||\r\n          law.status === \"rejected\" ||\r\n          law.status === \"vetoed\" ||\r\n          law.status === \"auto_rejected\") && (\r\n          <button\r\n            onClick={() => handleResetVotes(law.id)}\r\n            className=\"admin-button reset-button\"\r\n          >\r\n            íˆ¬í‘œ ì´ˆê¸°í™”\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (authLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!currentUser) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. êµ­íšŒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n  if (!classCode) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        êµ­íšŒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ í•™ê¸‰ ì½”ë“œê°€ ì‚¬ìš©ì ì •ë³´ì— ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\r\n        í”„ë¡œí•„ì—ì„œ í•™ê¸‰ ì½”ë“œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n  if (\r\n    lawsLoading ||\r\n    adminSettingsLoading ||\r\n    govSettingsLoading ||\r\n    userVotesLoading\r\n  ) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!adminSettings) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"national-assembly-container\">\r\n      <div className=\"assembly-header\">\r\n        <h1 className=\"assembly-title\">êµ­íšŒ ì˜ì‚¬ë‹¹ (í•™ê¸‰: {classCode})</h1>\r\n        <div className=\"assembly-tabs\">\r\n          <button\r\n            className={`assembly-tab ${\r\n              activeTab === \"propose\" ? \"active\" : \"\"\r\n            }`}\r\n            onClick={() => setActiveTab(\"propose\")}\r\n          >\r\n            ë²•ì•ˆ ì˜¬ë¦¬ê¸°/ì‹¬ì˜\r\n          </button>\r\n          <button\r\n            className={`assembly-tab ${\r\n              activeTab === \"approved\" ? \"active\" : \"\"\r\n            }`}\r\n            onClick={() => setActiveTab(\"approved\")}\r\n          >\r\n            ìš°ë¦¬ë°˜ ë²•\r\n          </button>\r\n          <button\r\n            className={`assembly-tab ${activeTab === \"vetoed\" ? \"active\" : \"\"}`}\r\n            onClick={() => setActiveTab(\"vetoed\")}\r\n          >\r\n            ì¬ì˜ê²° ë²•ì•ˆ\r\n          </button>\r\n          {isAdmin() && (\r\n            <button\r\n              className={`assembly-tab ${\r\n                activeTab === \"admin\" ? \"active\" : \"\"\r\n              }`}\r\n              onClick={() => setActiveTab(\"admin\")}\r\n            >\r\n              ê´€ë¦¬ì ì„¤ì •\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"assembly-content\">\r\n        {activeTab === \"propose\" && (\r\n          <>\r\n            {canProposeLaw() && (\r\n              <div className=\"content-actions\">\r\n                <button\r\n                  onClick={() => setShowProposeLawModal(true)}\r\n                  className=\"action-button propose-button\"\r\n                >\r\n                  ìƒˆ ë²•ì•ˆ ì œì•ˆí•˜ê¸°\r\n                </button>\r\n              </div>\r\n            )}\r\n            {sortedLaws.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                ì•„ì§ ë“±ë¡ë˜ê±°ë‚˜ ì‹¬ì˜ì¤‘ì¸ ë²•ì•ˆì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆ ë²•ì•ˆì„\r\n                ì œì•ˆí•´ë³´ì„¸ìš”!\r\n              </div>\r\n            ) : (\r\n              <div className=\"law-list\">\r\n                {sortedLaws.map((law) => (\r\n                  <div key={law.id} className={`law-card ${law.status}`}>\r\n                    <div className=\"law-content-wrapper\">\r\n                      <div className=\"law-header\">\r\n                        <h2 className=\"law-title\">{law.title}</h2>\r\n                        <div className=\"law-status-container\">\r\n                          {getLawStatusDisplay(law)}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"law-content\">\r\n                        <p>\r\n                          <strong>ì œì•ˆì:</strong>{\" \"}\r\n                          {law.proposerName || \"ì •ë³´ ì—†ìŒ\"}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì·¨ì§€:</strong> {law.purpose}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì„¤ëª…:</strong> {law.description}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ë²Œê¸ˆ:</strong> {law.fine}\r\n                        </p>\r\n                        <p className=\"law-timestamp\">\r\n                          ì œì•ˆì¼: {formatDate(law.timestamp)}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"law-footer\">\r\n                        <div className=\"vote-stats\">\r\n                          <div className=\"vote-count\">\r\n                            <div className=\"vote-type approval\">\r\n                              ì°¬ì„±:{\" \"}\r\n                              <span className=\"vote-number\">\r\n                                {optimisticVotes[law.id]?.approvals ?? law.approvals ?? 0}\r\n                              </span>\r\n                              {/* âœ¨ ìˆ˜ì •ëœ ë¶€ë¶„: í•„ìš” íˆ¬í‘œ ìˆ˜ ì•ˆë‚´ ë¬¸êµ¬ ë³€ê²½ */}\r\n                              <span className=\"vote-required\">\r\n                                /13í‘œ í•„ìš” (ì •ë¶€ ì´ì†¡)\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"vote-type disapproval\">\r\n                              ë°˜ëŒ€:{\" \"}\r\n                              <span className=\"vote-number\">\r\n                                {optimisticVotes[law.id]?.disapprovals ?? law.disapprovals ?? 0}\r\n                              </span>\r\n                              <span className=\"vote-required\">\r\n                                /{Math.ceil(adminSettings.totalStudents / 2)}{\" \"}\r\n                                í•„ìš” (ë¶€ê²°)\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"action-buttons\">\r\n                          {(law.status === \"pending\" ||\r\n                            ((law.status === \"rejected\" ||\r\n                              law.status === \"auto_rejected\") &&\r\n                              law.proposerId === currentUser?.id)) && (\r\n                            <div className=\"vote-actions\">\r\n                              <button\r\n                                onClick={() => handleVote(law.id, \"approvals\")}\r\n                                className={`vote-button approve ${\r\n                                  !isAdmin() && (optimisticUserVotes[law.id] || userVotes[law.id] ||\r\n                                  (law.voters && law.voters[currentUser?.id]))\r\n                                    ? \"voted\"\r\n                                    : \"\"\r\n                                }`}\r\n                                disabled={\r\n                                  !isAdmin() && (optimisticUserVotes[law.id] || userVotes[law.id] ||\r\n                                  (law.voters && law.voters[currentUser?.id]))\r\n                                }\r\n                              >\r\n                                ì°¬ì„±\r\n                              </button>\r\n                              <button\r\n                                onClick={() =>\r\n                                  handleVote(law.id, \"disapprovals\")\r\n                                }\r\n                                className={`vote-button disapprove ${\r\n                                  !isAdmin() && (optimisticUserVotes[law.id] || userVotes[law.id] ||\r\n                                  (law.voters && law.voters[currentUser?.id]))\r\n                                    ? \"voted\"\r\n                                    : \"\"\r\n                                }`}\r\n                                disabled={\r\n                                  !isAdmin() && (optimisticUserVotes[law.id] || userVotes[law.id] ||\r\n                                  (law.voters && law.voters[currentUser?.id]))\r\n                                }\r\n                              >\r\n                                ë°˜ëŒ€\r\n                              </button>\r\n                            </div>\r\n                          )}\r\n                          {(law.status === \"rejected\" ||\r\n                            law.status === \"auto_rejected\") &&\r\n                            law.proposerId === currentUser?.id &&\r\n                            !isAdmin() && (\r\n                              <button\r\n                                onClick={() => handleDeleteLaw(law.id)}\r\n                                className=\"reject-delete-button\"\r\n                              >\r\n                                ë¶€ê²° ë²•ì•ˆ ì‚­ì œ\r\n                              </button>\r\n                            )}\r\n                          {renderAdminActions(law)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {activeTab === \"approved\" && (\r\n          <div className=\"approved-laws-container\">\r\n            <h2 className=\"section-title\">ğŸ“œ ìš°ë¦¬ë°˜ ë²•ì•ˆ ëª©ë¡</h2>\r\n            {approvedLaws.length === 0 ? (\r\n              <div className=\"empty-state\">ì•„ì§ ê°€ê²°ëœ ë²•ì•ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n            ) : (\r\n              <div className=\"law-list\">\r\n                {approvedLaws.map((law) => (\r\n                  <div\r\n                    key={law.id}\r\n                    className={`law-card ${law.finalStatus || law.status}`}\r\n                  >\r\n                    <div className=\"law-content-wrapper\">\r\n                      <div className=\"law-header\">\r\n                        <h2 className=\"law-title\">{law.title}</h2>\r\n                        {getLawStatusDisplay(law)}\r\n                      </div>\r\n                      <div className=\"law-content\">\r\n                        <p>\r\n                          <strong>ì œì•ˆì:</strong>{\" \"}\r\n                          {law.proposerName || \"ì •ë³´ ì—†ìŒ\"}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì·¨ì§€:</strong> {law.purpose}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì„¤ëª…:</strong> {law.description}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ë²Œê¸ˆ:</strong> {law.fine}\r\n                        </p>\r\n                        <p className=\"law-timestamp\">\r\n                          {law.finalStatus === \"final_approved\" &&\r\n                          law.finalApprovalDate\r\n                            ? \"ìµœì¢… ìŠ¹ì¸ì¼: \"\r\n                            : \"ê°€ê²°ì¼: \"}\r\n                          {formatDate(law.finalApprovalDate || law.timestamp)}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"law-footer\">\r\n                        <div className=\"vote-stats\">\r\n                          <div className=\"vote-count\">\r\n                            <div className=\"vote-type approval\">\r\n                              ì°¬ì„±:{\" \"}\r\n                              <span className=\"vote-number\">\r\n                                {law.approvals || 0}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"vote-type disapproval\">\r\n                              ë°˜ëŒ€:{\" \"}\r\n                              <span className=\"vote-number\">\r\n                                {law.disapprovals || 0}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        {renderAdminActions(law)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"vetoed\" && (\r\n          <div className=\"vetoed-laws-container\">\r\n            <h2 className=\"section-title\">ğŸ›ï¸ ì¬ì˜ê²° ì§„í–‰ ì¤‘ì¸ ë²•ì•ˆ</h2>\r\n            {vetoedLaws.length === 0 ? (\r\n              <div className=\"empty-state\">ì¬ì˜ê²° ì¤‘ì¸ ë²•ì•ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n            ) : (\r\n              <div className=\"law-list\">\r\n                {vetoedLaws.map((law) => (\r\n                  <div key={law.id} className=\"law-card vetoed\">\r\n                    <div className=\"law-content-wrapper\">\r\n                      <div className=\"law-header\">\r\n                        <h2 className=\"law-title\">{law.title}</h2>\r\n                        {getLawStatusDisplay(law)}\r\n                      </div>\r\n                      <div className=\"law-content\">\r\n                        <p>\r\n                          <strong>ì œì•ˆì:</strong>{\" \"}\r\n                          {law.proposerName || \"ì •ë³´ ì—†ìŒ\"}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì·¨ì§€:</strong> {law.purpose}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì„¤ëª…:</strong> {law.description}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ë²Œê¸ˆ:</strong> {law.fine}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ê±°ë¶€ ì‚¬ìœ :</strong>{\" \"}\r\n                          {law.vetoReason || \"ì‚¬ìœ  ì—†ìŒ\"}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ê±°ë¶€ ì¼ì‹œ:</strong> {formatDate(law.vetoDate)}\r\n                        </p>\r\n                        <p>\r\n                          <strong>ì¬ì˜ê²° ê¸°í•œ:</strong>{\" \"}\r\n                          {getRemainingTime(law.vetoDeadline)}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"law-footer\">\r\n                        <div className=\"vote-stats\">\r\n                          <div className=\"vote-count\">\r\n                            <div className=\"vote-type approval\">\r\n                              ì°¬ì„±:{\" \"}\r\n                              <span className=\"vote-number\">\r\n                                {optimisticVotes[law.id]?.approvals ?? law.approvals ?? 0}\r\n                              </span>\r\n                              <span className=\"vote-required\">\r\n                                /{governmentSettings.vetoOverrideRequired} í•„ìš”\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"action-buttons\">\r\n                          <div className=\"vote-actions\">\r\n                            <button\r\n                              onClick={() => handleVote(law.id, \"approvals\")}\r\n                              className={`vote-button approve ${\r\n                                !isAdmin() && (optimisticUserVotes[law.id] === \"approvals\" ||\r\n                                userVotes[law.id] === \"approvals\" ||\r\n                                (law.voters &&\r\n                                  law.voters[currentUser?.id] === \"approvals\"))\r\n                                  ? \"voted\"\r\n                                  : \"\"\r\n                              }`}\r\n                              disabled={\r\n                                !isAdmin() && (optimisticUserVotes[law.id] === \"approvals\" ||\r\n                                userVotes[law.id] === \"approvals\" ||\r\n                                (law.voters &&\r\n                                  law.voters[currentUser?.id] === \"approvals\"))\r\n                              }\r\n                            >\r\n                              ì¬ì˜ê²° ì°¬ì„±\r\n                            </button>\r\n                          </div>\r\n                          {renderAdminActions(law)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"admin\" && isAdmin() && (\r\n          <div className=\"admin-container\">\r\n            <h2 className=\"section-title\">ğŸ”’ ê´€ë¦¬ì ì„¤ì •</h2>\r\n            <div className=\"admin-content\">\r\n              <div className=\"admin-setting-card\">\r\n                <div className=\"setting-header\">\r\n                  <h3>ì´ í•™ìƒ ìˆ˜ ì„¤ì •</h3>\r\n                </div>\r\n                <div className=\"setting-content\">\r\n                  <div className=\"form-group\">\r\n                    <div className=\"student-count-control\">\r\n                      <button\r\n                        className=\"count-button decrease\"\r\n                        onClick={() =>\r\n                          setLocalAdminSettings((prev) => ({\r\n                            ...(prev || adminSettings),\r\n                            totalStudents: Math.max(\r\n                              1,\r\n                              ((prev || adminSettings).totalStudents || 25) - 1\r\n                            ),\r\n                          }))\r\n                        }\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        className=\"setting-input student-count\"\r\n                        value={(localAdminSettings || adminSettings).totalStudents || 25}\r\n                        onChange={(e) =>\r\n                          setLocalAdminSettings((prev) => ({\r\n                            ...(prev || adminSettings),\r\n                            totalStudents: Math.max(\r\n                              1,\r\n                              parseInt(e.target.value) || 1\r\n                            ),\r\n                          }))\r\n                        }\r\n                      />\r\n                      <button\r\n                        className=\"count-button increase\"\r\n                        onClick={() =>\r\n                          setLocalAdminSettings((prev) => ({\r\n                            ...(prev || adminSettings),\r\n                            totalStudents: ((prev || adminSettings).totalStudents || 25) + 1,\r\n                          }))\r\n                        }\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"setting-info\">\r\n                    <p>\r\n                      ê°€ê²°/ë¶€ê²° í•„ìš” íˆ¬í‘œ ìˆ˜:{\" \"}\r\n                      <strong>\r\n                        {Math.ceil(((localAdminSettings || adminSettings).totalStudents || 25) / 2)}\r\n                      </strong>\r\n                      ëª…\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={handleSaveAdminSettings}\r\n                    className=\"admin-button save-settings-button\"\r\n                  >\r\n                    í•™ìƒ ìˆ˜ ì €ì¥\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"admin-setting-card\">\r\n                <div className=\"setting-header\">\r\n                  <h3>ì¬ì˜ê²° ì„¤ì •</h3>\r\n                </div>\r\n                <div className=\"setting-content\">\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">\r\n                      ì¬ì˜ê²° í•„ìš” ì°¬ì„±ìˆ˜ (í˜„ì¬:{\" \"}\r\n                      {(localGovSettings || governmentSettings).vetoOverrideRequired ||\r\n                        Math.ceil(\r\n                          (adminSettings.totalStudents || 25) * (2 / 3)\r\n                        )}\r\n                      )\r\n                    </label>\r\n                    <div className=\"student-count-control\">\r\n                      <button\r\n                        className=\"count-button decrease\"\r\n                        onClick={() =>\r\n                          setLocalGovSettings((prev) => ({\r\n                            ...(prev || governmentSettings),\r\n                            vetoOverrideRequired: Math.max(\r\n                              1,\r\n                              ((prev || governmentSettings).vetoOverrideRequired || 1) - 1\r\n                            ),\r\n                          }))\r\n                        }\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max={adminSettings.totalStudents || 25}\r\n                        className=\"setting-input student-count\"\r\n                        value={(localGovSettings || governmentSettings).vetoOverrideRequired || \"\"}\r\n                        onChange={(e) => {\r\n                          const val = parseInt(e.target.value);\r\n                          const maxVal = adminSettings.totalStudents || 25;\r\n                          setLocalGovSettings((prev) => ({\r\n                            ...(prev || governmentSettings),\r\n                            vetoOverrideRequired: Math.max(\r\n                              1,\r\n                              Math.min(val || 1, maxVal)\r\n                            ),\r\n                          }));\r\n                        }}\r\n                      />\r\n                      <button\r\n                        className=\"count-button increase\"\r\n                        onClick={() =>\r\n                          setLocalGovSettings((prev) => ({\r\n                            ...(prev || governmentSettings),\r\n                            vetoOverrideRequired: Math.min(\r\n                              adminSettings.totalStudents || 25,\r\n                              ((prev || governmentSettings).vetoOverrideRequired || 0) + 1\r\n                            ),\r\n                          }))\r\n                        }\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"setting-info\">\r\n                    <p className=\"setting-description\">\r\n                      ê±°ë¶€ê¶Œ í–‰ì‚¬ í›„ ë²•ì•ˆì´ ìµœì¢… ê°€ê²°ë˜ê¸° ìœ„í•´ í•„ìš”í•œ ì°¬ì„±í‘œ\r\n                      ìˆ˜ì…ë‹ˆë‹¤.\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={handleSaveGovernmentSettings}\r\n                    className=\"admin-button save-settings-button\"\r\n                  >\r\n                    ì¬ì˜ê²° ì„¤ì • ì €ì¥\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"admin-setting-card\">\r\n                <div className=\"setting-header\">\r\n                  <h3>ë²•ì•ˆ ê´€ë¦¬</h3>\r\n                </div>\r\n                <div className=\"setting-content\">\r\n                  <p>\r\n                    ë²•ì•ˆ ê°œìˆ˜: <strong>{laws?.length || 0}</strong>ê°œ\r\n                  </p>\r\n                  <p>\r\n                    ê°€ê²°ëœ ë²•ì•ˆ: <strong>{approvedLaws.length}</strong>ê°œ\r\n                  </p>\r\n                  <p>\r\n                    ì‹¬ì˜/ë¶€ê²° ë²•ì•ˆ: <strong>{pendingLaws.length}</strong>ê°œ\r\n                  </p>\r\n                  <p>\r\n                    ì¬ì˜ê²° ì¤‘ì¸ ë²•ì•ˆ: <strong>{vetoedLaws.length}</strong>ê°œ\r\n                  </p>\r\n                  <button\r\n                    className=\"admin-button danger\"\r\n                    onClick={() => {\r\n                      if (\r\n                        window.confirm(\r\n                          \"ëª¨ë“  ë²•ì•ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"\r\n                        )\r\n                      ) {\r\n                        const batch = writeBatch(db);\r\n                        laws.forEach((law) => {\r\n                          const lawDocRef = doc(\r\n                            db,\r\n                            \"classes\",\r\n                            classCode,\r\n                            \"nationalAssemblyLaws\",\r\n                            law.id\r\n                          );\r\n                          batch.delete(lawDocRef);\r\n                        });\r\n                        // ì‚¬ìš©ì íˆ¬í‘œ ì´ë ¥ ë¬¸ì„œë“¤ë„ ì‚­ì œ (ì„ íƒì , ì£¼ì˜ í•„ìš”)\r\n                        // ì˜ˆë¥¼ ë“¤ì–´ ëª¨ë“  userVotes ë¬¸ì„œë¥¼ ê°€ì ¸ì™€ì„œ ì‚­ì œí•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥\r\n                        batch\r\n                          .commit()\r\n                          .then(() => {\r\n                            alert(\"ëª¨ë“  ë²•ì•ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n                          })\r\n                          .catch((err) => {\r\n                            console.error(\"Error deleting all laws:\", err);\r\n                            alert(\"ëª¨ë“  ë²•ì•ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n                          });\r\n                      }\r\n                    }}\r\n                  >\r\n                    ëª¨ë“  ë²•ì•ˆ ì‚­ì œ\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {activeTab === \"admin\" && !isAdmin() && (\r\n          <div className=\"empty-state\">\r\n            ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showProposeLawModal && (\r\n        <div\r\n          className=\"modal-overlay\"\r\n          onClick={() => {\r\n            console.log(\"[NationalAssembly] ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ í´ë¦­ë¨ (ë‹«ê¸°)\");\r\n            setShowProposeLawModal(false);\r\n          }}\r\n        >\r\n          <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2 className=\"modal-title\">âœï¸ ìƒˆ ë²•ì•ˆ ì œì•ˆ</h2>\r\n            </div>\r\n            <div className=\"modal-content\">\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì œëª©</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={newLaw.title}\r\n                  onChange={(e) =>\r\n                    setNewLaw({ ...newLaw, title: e.target.value })\r\n                  }\r\n                  placeholder=\"ë²•ì•ˆì˜ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì·¨ì§€</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={newLaw.purpose}\r\n                  onChange={(e) =>\r\n                    setNewLaw({ ...newLaw, purpose: e.target.value })\r\n                  }\r\n                  placeholder=\"ë²•ì•ˆì˜ ì·¨ì§€ë¥¼ ê°„ëµíˆ ì„¤ëª…í•˜ì„¸ìš”\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì„¤ëª…</label>\r\n                <textarea\r\n                  className=\"form-textarea\"\r\n                  rows=\"3\"\r\n                  value={newLaw.description}\r\n                  onChange={(e) =>\r\n                    setNewLaw({ ...newLaw, description: e.target.value })\r\n                  }\r\n                  placeholder=\"ë²•ì•ˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì‘ì„±í•˜ì„¸ìš”\"\r\n                ></textarea>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²Œê¸ˆ</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={newLaw.fine}\r\n                  onChange={(e) =>\r\n                    setNewLaw({ ...newLaw, fine: e.target.value })\r\n                  }\r\n                  placeholder=\"ìœ„ë°˜ ì‹œ ë²Œê¸ˆ (ì˜ˆ: 5,000ì›)\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={() => {\r\n                  console.log(\"[NationalAssembly] ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ë¨\");\r\n                  setShowProposeLawModal(false);\r\n                }}\r\n                className=\"modal-button cancel\"\r\n              >\r\n                ì·¨ì†Œ\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  console.log(\"[NationalAssembly] ì œì•ˆí•˜ê¸° ë²„íŠ¼ í´ë¦­ë¨\");\r\n                  console.log(\"[NationalAssembly] ë²„íŠ¼ disabled ìƒíƒœ:\", !newLaw.title || !newLaw.description || !newLaw.fine);\r\n                  handleProposeLaw();\r\n                }}\r\n                className=\"modal-button submit\"\r\n                disabled={!newLaw.title || !newLaw.description || !newLaw.fine}\r\n              >\r\n                ì œì•ˆí•˜ê¸°\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showEditLawModal && editingLaw && (\r\n        <div\r\n          className=\"modal-overlay\"\r\n          onClick={() => {\r\n            setShowEditLawModal(false);\r\n            setEditingLaw(null);\r\n          }}\r\n        >\r\n          <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2 className=\"modal-title\">âœï¸ ë²•ì•ˆ ìˆ˜ì •</h2>\r\n            </div>\r\n            <div className=\"modal-content\">\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì œëª©</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={editingLaw.title}\r\n                  onChange={(e) =>\r\n                    setEditingLaw({ ...editingLaw, title: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì·¨ì§€</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={editingLaw.purpose}\r\n                  onChange={(e) =>\r\n                    setEditingLaw({ ...editingLaw, purpose: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²•ì•ˆ ì„¤ëª…</label>\r\n                <textarea\r\n                  className=\"form-textarea\"\r\n                  rows=\"3\"\r\n                  value={editingLaw.description}\r\n                  onChange={(e) =>\r\n                    setEditingLaw({\r\n                      ...editingLaw,\r\n                      description: e.target.value,\r\n                    })\r\n                  }\r\n                ></textarea>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">ë²Œê¸ˆ</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  value={editingLaw.fine}\r\n                  onChange={(e) =>\r\n                    setEditingLaw({ ...editingLaw, fine: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n              {isAdmin() && (\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">ìƒíƒœ</label>\r\n                  <select\r\n                    className=\"form-input\"\r\n                    value={editingLaw.status}\r\n                    onChange={(e) =>\r\n                      setEditingLaw({ ...editingLaw, status: e.target.value })\r\n                    }\r\n                  >\r\n                    <option value=\"pending\">ì‹¬ì˜ì¤‘</option>\r\n                    <option value=\"pending_government_approval\">ì •ë¶€ ì´ì†¡</option>\r\n                    <option value=\"approved\">ê°€ê²°ë¨</option>\r\n                    <option value=\"rejected\">ë¶€ê²°ë¨</option>\r\n                    <option value=\"vetoed\">ê±°ë¶€ê¶Œ í–‰ì‚¬ë¨</option>\r\n                    <option value=\"veto_overridden\">ì¬ì˜ê²° ê°€ê²°ë¨</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowEditLawModal(false);\r\n                  setEditingLaw(null);\r\n                }}\r\n                className=\"modal-button cancel\"\r\n              >\r\n                ì·¨ì†Œ\r\n              </button>\r\n              <button\r\n                onClick={handleSaveEditLaw}\r\n                className=\"modal-button submit\"\r\n                disabled={\r\n                  !editingLaw.title ||\r\n                  !editingLaw.description ||\r\n                  !editingLaw.fine\r\n                }\r\n              >\r\n                ì €ì¥í•˜ê¸°\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NationalAssembly;"],"names":["NationalAssembly","userDoc","currentUser","loading","authLoading","isAdmin","useAuth","data","jobs","usePolling","async","classCode","jobsRef","collection","db","q","query","where","getDocs","docs","map","doc","_objectSpread","id","interval","enabled","deps","canProposeLaw","useCallback","selectedJobIds","length","filter","job","includes","some","title","activeTab","setActiveTab","useState","showProposeLawModal","setShowProposeLawModal","showEditLawModal","setShowEditLawModal","newLaw","setNewLaw","purpose","description","fine","editingLaw","setEditingLaw","localAdminSettings","setLocalAdminSettings","localGovSettings","setLocalGovSettings","optimisticVotes","setOptimisticVotes","optimisticUserVotes","setOptimisticUserVotes","optimisticDeletedLaws","setOptimisticDeletedLaws","Set","optimisticEditedLaws","setOptimisticEditedLaws","optimisticNewLaws","setOptimisticNewLaws","adminSettings","adminSettingsLoading","totalStudents","adminSettingsDocRefNode","docSnap","getDoc","exists","defaultAdminSettings","setDoc","defaultValue","onError","error","console","governmentSettings","govSettingsLoading","vetoOverrideRequired","Math","ceil","govSettingsDocRefNode","defaultGovSettings","laws","lawsLoading","refetch","refetchLaws","lawsCollectionRefNode","orderBy","limit","_doc$data$timestamp","_doc$data$vetoDate","_doc$data$vetoDeadlin","_doc$data$finalApprov","timestamp","toDate","toISOString","Date","vetoDate","vetoDeadline","finalApprovalDate","userVotes","userVotesLoading","userVotesDocRefNode","handleVote","lawId","voteType","alert","hasVotedOptimistic","hasVotedServer","law","find","l","prev","_prev$lawId","_prev$lawId2","approvals","disapprovals","lawRef","runTransaction","lawDoc","transaction","get","userVotesDoc","Error","lawData","userVotesData","status","halfStudents","vetoOverrideRequiredCount","newApprovals","newDisapprovals","updates","updatedAt","serverTimestamp","increment","concat","finalStatus","approvalDate","update","set","merge","newState","message","handleDeleteLaw","lawToDelete","proposerId","window","confirm","lawDocRef","deleteDoc","newSet","delete","displayLaws","useMemo","result","has","approvedLaws","pendingLaws","vetoedLaws","displayedLaws","sortedLaws","getLawStatusDisplay","_jsx","className","children","formatDate","dateString","date","isNaN","getTime","getFullYear","getMonth","getDate","getHours","getMinutes","e","getRemainingTime","deadlineString","now","deadlineDate","diff","days","floor","hours","minutes","remaining","trim","renderAdminActions","_jsxs","onClick","handleOpenEditModal","updateDoc","voters","handleResetVotes","AlchanLoading","_Fragment","_ref","_optimisticVotes$law$","_optimisticVotes$law$2","_ref2","_optimisticVotes$law$3","_optimisticVotes$law$4","proposerName","disabled","_ref3","_optimisticVotes$law$5","_optimisticVotes$law$6","vetoReason","max","type","min","value","onChange","parseInt","target","settingsToSave","val","maxVal","batch","writeBatch","forEach","commit","then","catch","err","log","stopPropagation","placeholder","rows","tempId","random","toString","substr","optimisticLaw","name","isOptimistic","savedNewLaw","lawsCollectionRef","newLawData","addDoc","handleProposeLaw","previousEditingLaw","lawClassCode","dataToUpdate","_objectWithoutProperties","_excluded"],"sourceRoot":""}