"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[380],{3380(e,s,t){t.r(s),t.d(s,{default:()=>d});var a=t(5043),i=t(3216),c=t(2419),n=t(5472),r=t(5452);const l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBym1FtGjHWM5JdZ7GWRIkYGOftQGdUDgc",REACT_APP_FIREBASE_APP_ID:"1:244696722605:web:5fcc744923422b091b6a24",REACT_APP_FIREBASE_AUTH_DOMAIN:"inconomysu-class.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://inconomysu-class-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-QXND3N8942",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"244696722605",REACT_APP_FIREBASE_PROJECT_ID:"inconomysu-class",REACT_APP_FIREBASE_STORAGE_BUCKET:"inconomysu-class.firebasestorage.app"}.REACT_APP_YOUTUBE_API_KEY;var o=t(579);const d=()=>{const{roomId:e}=(0,i.g)(),[s,t]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,E]=(0,a.useState)([]),[_,h]=(0,a.useState)(null),[p,A]=(0,a.useState)(""),[S,b]=(0,a.useState)(!1),[v,R]=(0,a.useState)(""),[x,P]=(0,a.useState)(!1),j=(0,i.Zp)();(0,a.useEffect)(()=>{(async()=>{const s=await(0,n.x7)((0,n.H9)(c.db,"musicRooms",e));s.exists()?t(s.data().name):R("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubc29\uc785\ub2c8\ub2e4.")})()},[e]);return v?(0,o.jsx)("div",{className:"student-request-container error-container",children:v}):(0,o.jsxs)("div",{className:"student-request-container",children:[(0,o.jsx)("h2",{children:s}),x?(0,o.jsxs)("div",{className:"success-section",children:[(0,o.jsxs)("h3",{children:['"',_.snippet.title,'"']}),(0,o.jsx)("p",{children:"\uc74c\uc545 \uc2e0\uccad\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,o.jsxs)("div",{className:"success-actions",children:[(0,o.jsx)("button",{onClick:()=>{P(!1),h(null),u(""),E([])},className:"action-btn continue-btn",children:"\uacc4\uc18d \uc2e0\uccad\ud558\uae30"}),(0,o.jsx)("button",{onClick:()=>j("/learning-board/music-request"),className:"action-btn back-btn",children:"\ub3cc\uc544\uac00\uae30"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim()){b(!0),R("");try{const e=await(async e=>{const s=await fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&q=".concat(e,"&type=video&key=").concat(l,"&maxResults=10"));if(!s.ok){const e=await s.json();throw r.vF.error("YouTube API Error:",e),new Error("YouTube \uc601\uc0c1\uc744 \uac80\uc0c9\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. API \ud0a4\ub098 \uc694\uccad\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")}return(await s.json()).items})(d);E(e),P(!1)}catch(s){R("YouTube \uc601\uc0c1\uc744 \uac80\uc0c9\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),r.vF.error(s)}finally{b(!1)}}},className:"search-form",children:[(0,o.jsx)("input",{type:"text",className:"search-input",value:d,onChange:e=>u(e.target.value),placeholder:"\uc2e0\uccad\ud560 \ub178\ub798 \uc81c\ubaa9\uc774\ub098 \uc544\ud2f0\uc2a4\ud2b8\ub97c \uac80\uc0c9\ud558\uc138\uc694"}),(0,o.jsx)("button",{type:"submit",className:"search-btn",disabled:S,children:S?"\uac80\uc0c9 \uc911...":"\uac80\uc0c9"})]}),m.length>0&&(0,o.jsxs)("div",{className:"search-results",children:[(0,o.jsx)("h4",{children:"\uac80\uc0c9 \uacb0\uacfc"}),(0,o.jsx)("ul",{className:"video-list",children:m.map(e=>(0,o.jsxs)("li",{className:"video-item ".concat((null===_||void 0===_?void 0:_.id.videoId)===e.id.videoId?"selected":""),onClick:()=>h(e),children:[(0,o.jsx)("img",{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}),(0,o.jsx)("p",{children:e.snippet.title})]},e.id.videoId))})]}),_&&(0,o.jsxs)("div",{className:"request-section",children:[(0,o.jsx)("h4",{children:"\uc2e0\uccad \uc815\ubcf4"}),(0,o.jsxs)("p",{children:["\uc120\ud0dd\ub41c \uace1: ",_.snippet.title]}),(0,o.jsx)("input",{type:"text",className:"requester-name-input",value:p,onChange:e=>A(e.target.value),placeholder:"\uc2e0\uccad\uc790 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"}),(0,o.jsx)("button",{onClick:async()=>{if(_&&p.trim())try{await(0,n.addDoc)((0,n.rJ)(c.db,"musicRooms",e,"playlist"),{videoId:_.id.videoId,title:_.snippet.title,requesterName:p.trim(),requestedAt:(0,n.O5)()}),P(!0)}catch(s){R("\uc74c\uc545\uc744 \uc2e0\uccad\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),r.vF.error(s)}else alert("\uc601\uc0c1\uacfc \uc2e0\uccad\uc790 \uc774\ub984\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},className:"request-btn",children:"\uc774 \uace1\uc73c\ub85c \uc2e0\uccad\ud558\uae30"})]})]})]})}}}]);
//# sourceMappingURL=380.25b7b8e3.chunk.js.map