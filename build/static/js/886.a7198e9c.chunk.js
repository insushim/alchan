"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[886],{3886(e,s,t){t.r(s),t.d(s,{default:()=>G});var o=t(2555),r=t(5043),a=t(1985),i=t(402),n=t(9435),c=t(579);const h=(e,s,t)=>"w"===e?{color:"#faf8f0",metalness:.05,roughness:.3,emissive:s?"#00ffcc":t?"#ff3366":"#f5f5ee",emissiveIntensity:s?.6:t?.8:.15}:{color:"#4a4a4a",metalness:.4,roughness:.25,emissive:s?"#00ffcc":t?"#ff3366":"#777777",emissiveIntensity:s?.6:t?.8:.45},d=e=>"w"===e?"#999999":"#dddddd",l=e=>"w"===e?.4:.7,m=e=>{let{geometry:s,position:t,rotation:o,color:r,opacity:a=.5}=e;return(0,c.jsxs)("lineSegments",{position:t,rotation:o,children:[(0,c.jsx)("edgesGeometry",{args:[s]}),(0,c.jsx)("lineBasicMaterial",{color:r,transparent:!0,opacity:a})]})},x=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s);return(0,c.jsxs)("group",{scale:[1,1,1],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.38,.42,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.34,.38,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.26,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.22,.32,.28,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.44,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.24,.24,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.6,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.18,.22,.26,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.78,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.15,.18,.1,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.88,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.2,.16,.1,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,1.08,0],castShadow:!0,children:[(0,c.jsx)("boxGeometry",{args:[.05,.3,.05]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,1,0],castShadow:!0,children:[(0,c.jsx)("boxGeometry",{args:[.18,.05,.05]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsx)(m,{geometry:new n.Ho_(.38,.42,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.22,.32,.28,16),position:[0,.26,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.2,.16,.1,16),position:[0,.88,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.iNn(.05,.3,.05),position:[0,1.08,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.iNn(.18,.05,.05),position:[0,1,0],color:i,opacity:x})]})},j=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s);return(0,c.jsxs)("group",{scale:[.95,.95,.95],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.36,.4,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.32,.36,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.26,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.18,.3,.28,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.44,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.2,.2,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.58,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.14,.18,.22,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.74,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.12,.14,.1,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.86,0],castShadow:!0,children:[(0,c.jsx)("sphereGeometry",{args:[.16,32,24]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,1.02,0],castShadow:!0,children:[(0,c.jsx)("sphereGeometry",{args:[.07,24,16]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsx)(m,{geometry:new n.Ho_(.36,.4,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.18,.3,.28,16),position:[0,.26,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Gu$(.16,16,12),position:[0,.86,0],color:i,opacity:x})]})},p=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s);return(0,c.jsxs)("group",{scale:[.9,.9,.9],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.34,.38,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.3,.34,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.28,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.24,.28,.32,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.48,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.26,.26,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.62,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.22,.24,.22,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.76,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.28,.24,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),[0,1,2,3,4].map(e=>(0,c.jsxs)("mesh",{position:[.2*Math.cos(e*Math.PI*2/5),.88,.2*Math.sin(e*Math.PI*2/5)],castShadow:!0,children:[(0,c.jsx)("boxGeometry",{args:[.1,.18,.1]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]},e)),(0,c.jsx)(m,{geometry:new n.Ho_(.34,.38,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.24,.28,.32,16),position:[0,.28,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.28,.24,.06,16),position:[0,.76,0],color:i,opacity:x}),[0,1,2,3,4].map(e=>(0,c.jsx)(m,{geometry:new n.iNn(.1,.18,.1),position:[.2*Math.cos(e*Math.PI*2/5),.88,.2*Math.sin(e*Math.PI*2/5)],color:i,opacity:x},"e".concat(e)))]})},y=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s),j="w"===s?"#888888":"#cccccc";return(0,c.jsxs)("group",{scale:[.9,.9,.9],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.32,.36,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.28,.32,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.26,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.18,.26,.28,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.44,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.2,.2,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.56,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.14,.18,.18,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.76,0],castShadow:!0,children:[(0,c.jsx)("coneGeometry",{args:[.16,.36,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.78,.1],rotation:[.5,0,0],children:[(0,c.jsx)("boxGeometry",{args:[.08,.025,.01]}),(0,c.jsx)("meshBasicMaterial",{color:j})]}),(0,c.jsxs)("mesh",{position:[0,.98,0],castShadow:!0,children:[(0,c.jsx)("sphereGeometry",{args:[.055,24,16]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsx)(m,{geometry:new n.Ho_(.32,.36,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Ho_(.18,.26,.28,16),position:[0,.26,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.qFE(.16,.36,16),position:[0,.76,0],color:i,opacity:x})]})},u=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s),j="w"===s?"#333333":"#eeeeee";return(0,c.jsxs)("group",{scale:[.9,.9,.9],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.32,.36,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.28,.32,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.24,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.2,.26,.24,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.4,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.22,.22,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.54,.04],rotation:[-.35,0,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.14,.18,.22,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.72,-.02],rotation:[-.4,0,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.1,.14,.26,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.68,.14],rotation:[-.7,0,0],castShadow:!0,children:[(0,c.jsx)("boxGeometry",{args:[.14,.22,.2]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.58,.3],rotation:[-.5,0,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.06,.1,.18,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.52,.38],castShadow:!0,children:[(0,c.jsx)("sphereGeometry",{args:[.07,24,16]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[-.06,.88,.02],rotation:[-.2,0,-.3],castShadow:!0,children:[(0,c.jsx)("coneGeometry",{args:[.035,.12,16]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[.06,.88,.02],rotation:[-.2,0,.3],castShadow:!0,children:[(0,c.jsx)("coneGeometry",{args:[.035,.12,16]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[-.06,.7,.22],children:[(0,c.jsx)("sphereGeometry",{args:[.025,16,12]}),(0,c.jsx)("meshBasicMaterial",{color:j})]}),(0,c.jsxs)("mesh",{position:[.06,.7,.22],children:[(0,c.jsx)("sphereGeometry",{args:[.025,16,12]}),(0,c.jsx)("meshBasicMaterial",{color:j})]}),(0,c.jsx)(m,{geometry:new n.Ho_(.32,.36,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.iNn(.14,.22,.2),position:[0,.68,.14],rotation:[-.7,0,0],color:i,opacity:x})]})},S=e=>{let{color:s,isSelected:t,isCheck:r}=e;const a=h(s,t,r),i=d(s),x=l(s);return(0,c.jsxs)("group",{scale:[.75,.75,.75],children:[(0,c.jsxs)("mesh",{position:[0,.04,0],castShadow:!0,receiveShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.28,.32,.08,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.1,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.24,.28,.04,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.22,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.14,.22,.2,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.36,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.16,.16,.06,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.46,0],castShadow:!0,children:[(0,c.jsx)("cylinderGeometry",{args:[.1,.14,.14,32]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsxs)("mesh",{position:[0,.6,0],castShadow:!0,children:[(0,c.jsx)("sphereGeometry",{args:[.12,32,24]}),(0,c.jsx)("meshStandardMaterial",(0,o.A)({},a))]}),(0,c.jsx)(m,{geometry:new n.Ho_(.28,.32,.08,32),position:[0,.04,0],color:i,opacity:x}),(0,c.jsx)(m,{geometry:new n.Gu$(.12,16,12),position:[0,.6,0],color:i,opacity:x})]})},g=e=>{let{piece:s,position:t,isSelected:o,isCheck:a,onClick:h}=e;const d=(0,r.useRef)(),[l,m]=(0,r.useState)(!1),g=(0,r.useRef)(0);if((0,i.F)(e=>{if(d.current){let s=g.current;o?s=.2+.08*Math.sin(4*e.clock.elapsedTime):l&&(s=.1),d.current.position.y=n.cj9.lerp(d.current.position.y,s,.15)}}),!s)return null;const w=s[0],M=s[1];return(0,c.jsxs)("group",{ref:d,position:[t[0],0,t[2]],onClick:e=>{e.stopPropagation(),h()},onPointerOver:e=>{e.stopPropagation(),m(!0),document.body.style.cursor="pointer"},onPointerOut:e=>{e.stopPropagation(),m(!1),document.body.style.cursor="auto"},children:["K"===M&&(0,c.jsx)(x,{color:w,isSelected:o,isCheck:a}),"Q"===M&&(0,c.jsx)(j,{color:w,isSelected:o,isCheck:a}),"R"===M&&(0,c.jsx)(p,{color:w,isSelected:o,isCheck:a}),"B"===M&&(0,c.jsx)(y,{color:w,isSelected:o,isCheck:a}),"N"===M&&(0,c.jsx)(u,{color:w,isSelected:o,isCheck:a}),"P"===M&&(0,c.jsx)(S,{color:w,isSelected:o,isCheck:a})]})},w=e=>{let{position:s,isLight:t,isSelected:o,isPossibleMove:a,onClick:i}=e;const[h,d]=(0,r.useState)(!1);let l=t?"#F0D9B5":"#B58863";return o?l="#00fff2":a?l=t?"#aaffaa":"#88cc88":h&&(l=t?"#ffffd0":"#daa060"),(0,c.jsxs)("group",{position:[s[0],.01,s[2]],children:[(0,c.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],onClick:e=>{e.stopPropagation(),i()},onPointerOver:()=>d(!0),onPointerOut:()=>d(!1),children:[(0,c.jsx)("planeGeometry",{args:[1,1]}),(0,c.jsx)("meshBasicMaterial",{color:l})]}),(0,c.jsxs)("lineSegments",{rotation:[-Math.PI/2,0,0],position:[0,.001,0],children:[(0,c.jsx)("edgesGeometry",{args:[new n.bdM(1,1)]}),(0,c.jsx)("lineBasicMaterial",{color:"#222222",linewidth:2})]})]})},M=e=>{let{position:s,hasEnemy:t}=e;const o=(0,r.useRef)();return(0,i.F)(e=>{o.current&&(o.current.position.y=.02+.01*Math.sin(3*e.clock.elapsedTime))}),t?(0,c.jsxs)("mesh",{ref:o,position:[s[0],.02,s[2]],rotation:[-Math.PI/2,0,0],children:[(0,c.jsx)("ringGeometry",{args:[.35,.42,32]}),(0,c.jsx)("meshBasicMaterial",{color:"#ff4444",transparent:!0,opacity:.8})]}):(0,c.jsxs)("mesh",{ref:o,position:[s[0],.02,s[2]],rotation:[-Math.PI/2,0,0],children:[(0,c.jsx)("circleGeometry",{args:[.15,32]}),(0,c.jsx)("meshBasicMaterial",{color:"#44cc44",transparent:!0,opacity:.8})]})},f=e=>{let{board:s,selectedPiece:t,possibleMoves:o,onSquareClick:a,myColor:i,isInCheck:n}=e;const h="b"===i?Math.PI:0,d=(0,r.useMemo)(()=>{if(!s)return null;for(let e=0;e<8;e++)for(let t=0;t<8;t++){const o=s[e][t];if(o&&"K"===o[1]){const r=o[0];if(n(s,r))return{row:e,col:t}}}return null},[s,n]);return(0,c.jsxs)("group",{rotation:[0,h,0],children:[(0,c.jsxs)("mesh",{position:[0,-.1,0],receiveShadow:!0,castShadow:!0,children:[(0,c.jsx)("boxGeometry",{args:[9.2,.2,9.2]}),(0,c.jsx)("meshStandardMaterial",{color:"#5d3a1a",metalness:.1,roughness:.8})]}),(0,c.jsxs)("mesh",{position:[0,.005,0],rotation:[-Math.PI/2,0,0],children:[(0,c.jsx)("planeGeometry",{args:[8.2,8.2]}),(0,c.jsx)("meshBasicMaterial",{color:"#654321"})]}),s&&s.map((e,s)=>e.map((e,r)=>{const i=r-3.5,n=s-3.5,h=(s+r)%2===0,d=(null===t||void 0===t?void 0:t.row)===s&&(null===t||void 0===t?void 0:t.col)===r,l=o.some(e=>{let[t,o]=e;return t===s&&o===r});return(0,c.jsx)(w,{position:[i,0,n],isLight:h,isSelected:d,isPossibleMove:l,onClick:()=>a(s,r)},"square-".concat(s,"-").concat(r))})),o.map(e=>{let[t,o]=e;const r=o-3.5,a=t-3.5,i=null!==s[t][o];return(0,c.jsx)(M,{position:[r,0,a],hasEnemy:i},"move-".concat(t,"-").concat(o))}),s&&s.map((e,s)=>e.map((e,o)=>{if(!e)return null;const r=o-3.5,i=s-3.5,n=(null===t||void 0===t?void 0:t.row)===s&&(null===t||void 0===t?void 0:t.col)===o,h=d&&d.row===s&&d.col===o;return(0,c.jsx)(g,{piece:e,position:[r,0,i],isSelected:n,isCheck:h&&"K"===e[1],onClick:()=>a(s,o)},"piece-".concat(s,"-").concat(o))}))]})},v=e=>{let{myColor:s}=e;const{camera:t,gl:o}=(0,i.D)(),a=(0,r.useRef)(!1),n=(0,r.useRef)({x:0,y:0}),c=(0,r.useRef)({theta:0,phi:Math.PI/4,radius:11});return(0,r.useEffect)(()=>{c.current.theta="b"===s?Math.PI:0;const e=()=>{const{theta:e,phi:s,radius:o}=c.current;t.position.x=o*Math.sin(s)*Math.sin(e),t.position.y=o*Math.cos(s),t.position.z=o*Math.sin(s)*Math.cos(e),t.lookAt(0,0,0)};e();const r=e=>{2===e.button&&(a.current=!0,n.current={x:e.clientX,y:e.clientY})},i=s=>{if(!a.current)return;const t=s.clientX-n.current.x,o=s.clientY-n.current.y;c.current.theta-=.008*t,c.current.phi=Math.max(.4,Math.min(1.3,c.current.phi+.008*o)),n.current={x:s.clientX,y:s.clientY},e()},h=()=>{a.current=!1},d=s=>{s.preventDefault(),c.current.radius=Math.max(7,Math.min(18,c.current.radius+.02*s.deltaY)),e()},l=e=>{if(2===e.touches.length){a.current=!0;const s=(e.touches[0].clientX+e.touches[1].clientX)/2,t=(e.touches[0].clientY+e.touches[1].clientY)/2;n.current={x:s,y:t}}},m=s=>{if(!a.current||2!==s.touches.length)return;const t=(s.touches[0].clientX+s.touches[1].clientX)/2,o=(s.touches[0].clientY+s.touches[1].clientY)/2,r=t-n.current.x,i=o-n.current.y;c.current.theta-=.008*r,c.current.phi=Math.max(.4,Math.min(1.3,c.current.phi+.008*i)),n.current={x:t,y:o},e()},x=()=>{a.current=!1},j=e=>{e.preventDefault()},p=o.domElement;return p.addEventListener("mousedown",r),p.addEventListener("mousemove",i),p.addEventListener("mouseup",h),p.addEventListener("mouseleave",h),p.addEventListener("wheel",d,{passive:!1}),p.addEventListener("touchstart",l,{passive:!0}),p.addEventListener("touchmove",m,{passive:!0}),p.addEventListener("touchend",x),p.addEventListener("contextmenu",j),()=>{p.removeEventListener("mousedown",r),p.removeEventListener("mousemove",i),p.removeEventListener("mouseup",h),p.removeEventListener("mouseleave",h),p.removeEventListener("wheel",d),p.removeEventListener("touchstart",l),p.removeEventListener("touchmove",m),p.removeEventListener("touchend",x),p.removeEventListener("contextmenu",j)}},[t,o,s]),null},G=e=>{let{board:s,selectedPiece:t,possibleMoves:o,onSquareClick:r,myColor:i,isInCheck:n}=e;return(0,c.jsx)("div",{style:{width:"100%",height:"600px",background:"#1a1a2e"},children:(0,c.jsxs)(a.Hl,{shadows:!0,dpr:[1,2],camera:{fov:50,position:[0,10,10],near:.1,far:100},gl:{antialias:!0},children:[(0,c.jsx)(v,{myColor:i}),(0,c.jsx)("ambientLight",{intensity:.8}),(0,c.jsx)("directionalLight",{position:[8,15,8],intensity:1.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":50,"shadow-camera-left":-12,"shadow-camera-right":12,"shadow-camera-top":12,"shadow-camera-bottom":-12,"shadow-bias":-1e-4}),(0,c.jsx)("directionalLight",{position:[-5,10,-5],intensity:.7}),(0,c.jsx)("pointLight",{position:[0,8,0],intensity:.7,color:"#ffffff"}),(0,c.jsx)("hemisphereLight",{args:["#ffffff","#8b7355",.7]}),(0,c.jsx)(f,{board:s,selectedPiece:t,possibleMoves:o,onSquareClick:r,myColor:i,isInCheck:n}),(0,c.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.2,0],receiveShadow:!0,children:[(0,c.jsx)("planeGeometry",{args:[60,60]}),(0,c.jsx)("meshStandardMaterial",{color:"#1a1a28"})]}),(0,c.jsx)("fog",{attach:"fog",args:["#1a1a28",20,45]})]})})}}}]);
//# sourceMappingURL=886.a7198e9c.chunk.js.map