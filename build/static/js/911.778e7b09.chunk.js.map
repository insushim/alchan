{"version":3,"file":"static/js/911.778e7b09.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/trending-down.ts","components/EconomicEventPopup.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 17h6v-6', key: 't6n2it' }],\n  ['path', { d: 'm22 17-8.5-8.5-5 5L2 7', key: 'x473p' }],\n];\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMTdoNnYtNiIgLz4KICA8cGF0aCBkPSJtMjIgMTctOC41LTguNS01IDVMMiA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('trending-down', __iconNode);\n\nexport default TrendingDown;\n","// src/components/EconomicEventPopup.js\n// ê²½ì œ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í•™ìƒì—ê²Œ íŒì—…ìœ¼ë¡œ ì•Œë ¤ì£¼ëŠ” ëª¨ë‹¬\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { X, TrendingUp, TrendingDown, Zap } from \"lucide-react\";\n\n// ì´ë²¤íŠ¸ íƒ€ì…ë³„ ìƒì„¸ ì„¤ëª…\nconst EVENT_DETAILS = {\n  REAL_ESTATE_PRICE_CHANGE: (params, result) => {\n    const pct = params?.changePercent || 0;\n    return {\n      isPositive: pct > 0,\n      impact: `ë¶€ë™ì‚° ${result?.affectedCount || 0}ê°œ ê°€ê²©ì´ ${pct > 0 ? \"+\" : \"\"}${pct}% ë³€ë™ë˜ì—ˆìŠµë‹ˆë‹¤.`,\n      tip:\n        pct > 0\n          ? \"ë¶€ë™ì‚° ìì‚° ê°€ì¹˜ê°€ ì˜¬ë¼ê°”ì–´ìš”! ë§¤ë„ íƒ€ì´ë°ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.\"\n          : \"ë¶€ë™ì‚° ê°€ê²©ì´ ë‚´ë ¤ê°”ì–´ìš”. ì €ë ´í•˜ê²Œ ë§¤ìˆ˜í•  ê¸°íšŒì¼ ìˆ˜ ìˆì–´ìš”.\",\n    };\n  },\n  TAX_REFUND: (params, result) => ({\n    isPositive: true,\n    impact:\n      result?.refundedAmount > 0\n        ? `1ì¸ë‹¹ ${result?.perStudent?.toLocaleString() || 0}ì› ì„¸ê¸ˆì´ í™˜ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤! (ì´ ${result?.refundedAmount?.toLocaleString() || 0}ì›)`\n        : \"êµ­ê³ ê°€ ë¶€ì¡±í•´ ì„¸ê¸ˆ í™˜ê¸‰ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\",\n    tip:\n      result?.refundedAmount > 0\n        ? \"ë‚´ ê³„ì¢Œë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!\"\n        : \"êµ­ê³ ë¥¼ ì±„ì›Œì•¼ ë‹¤ìŒ í™˜ê¸‰ì´ ê°€ëŠ¥í•´ìš”.\",\n  }),\n  TAX_EXTRA: (params, result) => ({\n    isPositive: false,\n    impact: `ëª¨ë“  ì‹œë¯¼ì—ê²Œ ì¶”ê°€ ì„¸ê¸ˆì´ ë¶€ê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. (í˜„ê¸ˆì˜ ${((params?.taxRate || 0) * 100).toFixed(0)}%)`,\n    tip: `ì´ ${result?.collectedAmount?.toLocaleString() || 0}ì›ì´ êµ­ê³ ë¡œ ì´ì „ë˜ì—ˆìŠµë‹ˆë‹¤.`,\n  }),\n  CASH_BONUS: (params, result) => ({\n    isPositive: true,\n    impact: `1ì¸ë‹¹ ${result?.perStudent?.toLocaleString() || params?.amount?.toLocaleString() || 0}ì› ì§€ì›ê¸ˆì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤!`,\n    tip: \"ë‚´ ê³„ì¢Œì— ì§€ì›ê¸ˆì´ ì…ê¸ˆë˜ì—ˆì–´ìš”! í™•ì¸í•´ë³´ì„¸ìš”.\",\n  }),\n  CASH_PENALTY: (params, result) => ({\n    isPositive: false,\n    impact: `ê²½ì œ ìœ„ê¸°ë¡œ ëª¨ë“  ì‹œë¯¼ì˜ í˜„ê¸ˆ ${((params?.penaltyRate || 0) * 100).toFixed(0)}%ê°€ ì‚­ê°ë˜ì—ˆìŠµë‹ˆë‹¤.`,\n    tip: `ì´ ${result?.collectedAmount?.toLocaleString() || 0}ì›ì´ êµ­ê³ ë¡œ ì´ì „ë˜ì—ˆìŠµë‹ˆë‹¤.`,\n  }),\n  STORE_PRICE_CHANGE: (params, result) => {\n    const mult = params?.multiplier || 1;\n    return {\n      isPositive: mult < 1,\n      impact:\n        mult >= 1\n          ? `ê´€ë¦¬ì ìƒì  ëª¨ë“  ìƒí’ˆ ê°€ê²©ì´ ${mult}ë°°ë¡œ ì¸ìƒë˜ì—ˆìŠµë‹ˆë‹¤.`\n          : `ê´€ë¦¬ì ìƒì  ëª¨ë“  ìƒí’ˆ ê°€ê²©ì´ ì ˆë°˜ìœ¼ë¡œ ì¸í•˜ë˜ì—ˆìŠµë‹ˆë‹¤!`,\n      tip:\n        mult >= 1\n          ? `${result?.affectedCount || 0}ê°œ ìƒí’ˆ ê°€ê²©ì´ ì˜¬ëì–´ìš”. êµ¬ë§¤ë¥¼ ì„œë‘ë¥´ë©´ ì†í•´!`\n          : `${result?.affectedCount || 0}ê°œ ìƒí’ˆì´ í• ì¸ ì¤‘! ì§€ê¸ˆì´ êµ¬ë§¤ ê¸°íšŒ!`,\n    };\n  },\n  STOCK_TAX_CHANGE: (params) => {\n    const mult = params?.multiplier ?? 1;\n    return {\n      isPositive: mult === 0,\n      impact:\n        mult === 0\n          ? \"24ì‹œê°„ ë™ì•ˆ ì£¼ì‹ ê±°ë˜ì„¸Â·ì–‘ë„ì„¸ê°€ ì™„ì „ ë©´ì œë©ë‹ˆë‹¤!\"\n          : `24ì‹œê°„ ë™ì•ˆ ì£¼ì‹ ê±°ë˜ì„¸Â·ì–‘ë„ì„¸ê°€ ${mult}ë°°ë¡œ ì¸ìƒë©ë‹ˆë‹¤!`,\n      tip:\n        mult === 0\n          ? \"ì§€ê¸ˆ ì£¼ì‹ ê±°ë˜í•˜ë©´ ì„¸ê¸ˆ 0ì›! ì ê·¹ í™œìš©í•˜ì„¸ìš”!\"\n          : \"ì£¼ì‹ ê±°ë˜ ë¹„ìš©ì´ ëŠ˜ì—ˆì–´ìš”. ì‹ ì¤‘í•˜ê²Œ ê±°ë˜í•˜ì„¸ìš”.\",\n    };\n  },\n  MARKET_FEE_CHANGE: (params) => {\n    const mult = params?.multiplier ?? 1;\n    return {\n      isPositive: mult === 0,\n      impact:\n        mult === 0\n          ? \"24ì‹œê°„ ë™ì•ˆ ê°œì¸ìƒì  ê±°ë˜ ìˆ˜ìˆ˜ë£Œê°€ 0%ì…ë‹ˆë‹¤!\"\n          : `24ì‹œê°„ ë™ì•ˆ ê°œì¸ìƒì  ê±°ë˜ ìˆ˜ìˆ˜ë£Œê°€ ${mult}ë°°ë¡œ ì¸ìƒë©ë‹ˆë‹¤!`,\n      tip:\n        mult === 0\n          ? \"ìˆ˜ìˆ˜ë£Œ ì—†ì´ ììœ ë¡­ê²Œ ê±°ë˜í•˜ì„¸ìš”!\"\n          : \"ê°œì¸ìƒì  ê±°ë˜ ë¹„ìš©ì´ ì¦ê°€í–ˆì–´ìš”. ì£¼ì˜í•˜ì„¸ìš”.\",\n    };\n  },\n};\n\nexport default function EconomicEventPopup() {\n  const { userDoc } = useAuth();\n  const classCode = userDoc?.classCode;\n\n  const [activeEvent, setActiveEvent] = useState(null);\n  const [visible, setVisible] = useState(false);\n  const [animating, setAnimating] = useState(false);\n  const lastEventIdRef = useRef(null);\n\n  useEffect(() => {\n    if (!classCode) return;\n\n    const ref = doc(db, \"activeEconomicEvent\", classCode);\n    const unsubscribe = onSnapshot(ref, (snap) => {\n      if (!snap.exists()) {\n        setActiveEvent(null);\n        return;\n      }\n\n      const data = snap.data();\n\n      // ë§Œë£Œ í™•ì¸\n      const expires = data.expiresAt?.toDate?.();\n      if (expires && expires < new Date()) {\n        setActiveEvent(null);\n        return;\n      }\n\n      // ì´ë¯¸ í™•ì¸í•œ ì´ë²¤íŠ¸ì¸ì§€ í™•ì¸ (localStorage)\n      const eventId = data.triggeredAt?.toMillis?.() || data.event?.id || \"\";\n      const seenKey = `evePopup_${classCode}_${eventId}`;\n\n      if (localStorage.getItem(seenKey)) return; // ì´ë¯¸ í™•ì¸í•¨\n\n      // ìƒˆ ì´ë²¤íŠ¸\n      if (lastEventIdRef.current !== eventId) {\n        lastEventIdRef.current = eventId;\n        setActiveEvent({ ...data, _seenKey: seenKey });\n        setAnimating(true);\n        setTimeout(() => {\n          setVisible(true);\n          setAnimating(false);\n        }, 50);\n      }\n    });\n\n    return () => unsubscribe();\n  }, [classCode]);\n\n  const handleClose = () => {\n    if (activeEvent?._seenKey) {\n      localStorage.setItem(activeEvent._seenKey, \"1\");\n    }\n    setVisible(false);\n    setTimeout(() => {\n      setActiveEvent(null);\n      setAnimating(false);\n    }, 300);\n  };\n\n  if (!activeEvent) return null;\n\n  const event = activeEvent.event || {};\n  const result = activeEvent.result || {};\n  const triggeredAt = activeEvent.triggeredAt?.toDate?.() || new Date();\n\n  const detailFn = EVENT_DETAILS[event.type];\n  const detail = detailFn\n    ? detailFn(event.params, result)\n    : { isPositive: true, impact: \"\", tip: \"\" };\n  const isPositive = detail.isPositive;\n\n  const timeStr = triggeredAt.toLocaleTimeString(\"ko-KR\", {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n  const dateStr = triggeredAt.toLocaleDateString(\"ko-KR\", {\n    month: \"long\",\n    day: \"numeric\",\n  });\n\n  return (\n    <div\n      className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\"\n      style={{\n        background: \"rgba(0,0,0,0.75)\",\n        backdropFilter: \"blur(4px)\",\n        opacity: visible ? 1 : 0,\n        transition: \"opacity 0.3s ease\",\n        pointerEvents: visible ? \"auto\" : \"none\",\n      }}\n      onClick={(e) => {\n        if (e.target === e.currentTarget) handleClose();\n      }}\n    >\n      <div\n        style={{\n          transform: visible\n            ? \"scale(1) translateY(0)\"\n            : \"scale(0.9) translateY(20px)\",\n          transition: \"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)\",\n          maxWidth: 480,\n          width: \"100%\",\n        }}\n      >\n        {/* ì¹´ë“œ */}\n        <div\n          className={`relative rounded-2xl overflow-hidden shadow-2xl border ${\n            isPositive\n              ? \"border-emerald-500/40 bg-gradient-to-br from-slate-900 via-emerald-950/40 to-slate-900\"\n              : \"border-red-500/40 bg-gradient-to-br from-slate-900 via-red-950/40 to-slate-900\"\n          }`}\n        >\n          {/* ìƒë‹¨ ê¸€ë¡œìš° */}\n          <div\n            className={`absolute top-0 left-0 right-0 h-1 ${isPositive ? \"bg-gradient-to-r from-emerald-400 via-cyan-400 to-emerald-400\" : \"bg-gradient-to-r from-red-400 via-orange-400 to-red-400\"}`}\n          />\n\n          {/* ë°°ê²½ íŒ¨í„´ */}\n          <div\n            className=\"absolute inset-0 opacity-5\"\n            style={{\n              backgroundImage:\n                \"radial-gradient(circle at 50% 50%, white 1px, transparent 1px)\",\n              backgroundSize: \"24px 24px\",\n            }}\n          />\n\n          {/* í—¤ë” */}\n          <div className={`relative px-6 pt-6 pb-4 flex items-start gap-4`}>\n            {/* ì´ëª¨ì§€ ì•„ì´ì½˜ */}\n            <div\n              className={`flex-shrink-0 w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg ${\n                isPositive\n                  ? \"bg-emerald-500/20 ring-1 ring-emerald-500/30\"\n                  : \"bg-red-500/20 ring-1 ring-red-500/30\"\n              }`}\n            >\n              {event.emoji || \"âš¡\"}\n            </div>\n\n            <div className=\"flex-1 min-w-0\">\n              {/* íƒœê·¸ */}\n              <div className=\"flex items-center gap-2 mb-1\">\n                {isPositive ? (\n                  <TrendingUp className=\"w-3.5 h-3.5 text-emerald-400\" />\n                ) : (\n                  <TrendingDown className=\"w-3.5 h-3.5 text-red-400\" />\n                )}\n                <span\n                  className={`text-xs font-bold uppercase tracking-widest ${isPositive ? \"text-emerald-400\" : \"text-red-400\"}`}\n                >\n                  ì˜¤ëŠ˜ì˜ ê²½ì œ ì´ë²¤íŠ¸\n                </span>\n              </div>\n\n              {/* ì œëª© */}\n              <h2 className=\"text-xl font-bold text-white leading-tight\">\n                {event.title}\n              </h2>\n\n              {/* ë‚ ì§œ */}\n              <p className=\"text-xs text-slate-500 mt-0.5\">\n                {dateStr} {timeStr} ë°œìƒ\n              </p>\n            </div>\n\n            {/* ë‹«ê¸° ë²„íŠ¼ */}\n            <button\n              onClick={handleClose}\n              className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          {/* êµ¬ë¶„ì„  */}\n          <div\n            className={`mx-6 h-px ${isPositive ? \"bg-emerald-500/20\" : \"bg-red-500/20\"}`}\n          />\n\n          {/* ë³¸ë¬¸ */}\n          <div className=\"relative px-6 py-4 space-y-3\">\n            {/* ì´ë²¤íŠ¸ ì„¤ëª… */}\n            <p className=\"text-sm text-slate-300 leading-relaxed\">\n              {event.description}\n            </p>\n\n            {/* ì˜í–¥ */}\n            {detail.impact && (\n              <div\n                className={`rounded-xl p-3 ${isPositive ? \"bg-emerald-500/10 border border-emerald-500/20\" : \"bg-red-500/10 border border-red-500/20\"}`}\n              >\n                <div className=\"flex items-start gap-2\">\n                  <Zap\n                    className={`w-4 h-4 mt-0.5 flex-shrink-0 ${isPositive ? \"text-emerald-400\" : \"text-red-400\"}`}\n                  />\n                  <p\n                    className={`text-sm font-medium ${isPositive ? \"text-emerald-300\" : \"text-red-300\"}`}\n                  >\n                    {detail.impact}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* íŒ */}\n            {detail.tip && (\n              <p className=\"text-xs text-slate-500 pl-1\">ğŸ’¡ {detail.tip}</p>\n            )}\n          </div>\n\n          {/* í™•ì¸ ë²„íŠ¼ */}\n          <div className=\"px-6 pb-6\">\n            <button\n              onClick={handleClose}\n              className={`w-full py-3 rounded-xl font-bold text-sm transition-all active:scale-[0.98] ${\n                isPositive\n                  ? \"bg-emerald-500 hover:bg-emerald-400 text-white shadow-lg shadow-emerald-500/25\"\n                  : \"bg-red-500 hover:bg-red-400 text-white shadow-lg shadow-red-500/25\"\n              }`}\n            >\n              í™•ì¸í–ˆì–´ìš”\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["TrendingDown","createLucideIcon","d","key","EVENT_DETAILS","REAL_ESTATE_PRICE_CHANGE","params","result","pct","changePercent","isPositive","impact","concat","affectedCount","tip","TAX_REFUND","_result$perStudent","_result$refundedAmoun","refundedAmount","perStudent","toLocaleString","TAX_EXTRA","_result$collectedAmou","taxRate","toFixed","collectedAmount","CASH_BONUS","_result$perStudent2","_params$amount","amount","CASH_PENALTY","_result$collectedAmou2","penaltyRate","STORE_PRICE_CHANGE","mult","multiplier","STOCK_TAX_CHANGE","_params$multiplier","MARKET_FEE_CHANGE","_params$multiplier2","EconomicEventPopup","_activeEvent$triggere","_activeEvent$triggere2","userDoc","useAuth","classCode","activeEvent","setActiveEvent","useState","visible","setVisible","animating","setAnimating","lastEventIdRef","useRef","useEffect","ref","doc","db","unsubscribe","onSnapshot","snap","_data$expiresAt","_data$expiresAt$toDat","_data$triggeredAt","_data$triggeredAt$toM","_data$event","exists","data","expires","expiresAt","toDate","call","Date","eventId","triggeredAt","toMillis","event","id","seenKey","localStorage","getItem","current","_objectSpread","_seenKey","setTimeout","handleClose","setItem","detailFn","type","detail","timeStr","toLocaleTimeString","hour","minute","dateStr","toLocaleDateString","month","day","_jsx","className","style","background","backdropFilter","opacity","transition","pointerEvents","onClick","e","target","currentTarget","children","transform","maxWidth","width","_jsxs","backgroundImage","backgroundSize","emoji","TrendingUp","title","X","description","Zap"],"ignoreList":[],"sourceRoot":""}