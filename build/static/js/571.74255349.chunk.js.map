{"version":3,"file":"static/js/571.74255349.chunk.js","mappings":"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","sources":["components/LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/HelpButton.js","components/PageWrapper.js","utils/helpContent.js","utils/avatarSystem.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","components/WelcomePopup.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","components/AlchanLayout.js","components/modals/DonateCouponModal.js","components/Avatar.js","utils/achievementSystem.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","utils/levelSystem.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","components/modals/TransferModal.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/components/HelpButton.js\n//     +  \n\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { HelpCircle, X } from 'lucide-react';\nimport { getHelpContent } from '../utils/helpContent';\n\nexport default function HelpButton() {\n  const [isOpen, setIsOpen] = useState(false);\n  const location = useLocation();\n  const helpData = getHelpContent(location.pathname);\n\n  if (!helpData) return null;\n\n  return (\n    <>\n      {/*   */}\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"w-8 h-8 rounded-full bg-indigo-500/20 border border-indigo-500/40 flex items-center justify-center text-indigo-400 hover:bg-indigo-500/30 hover:border-indigo-400 hover:text-indigo-300 transition-all duration-200 hover:shadow-[0_0_12px_rgba(99,102,241,0.3)]\"\n        title=\"\"\n      >\n        <HelpCircle className=\"w-4 h-4\" />\n      </button>\n\n      {/*   */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4\"\n          onClick={() => setIsOpen(false)}\n        >\n          <div\n            className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-md shadow-[0_0_30px_rgba(0,255,242,0.1)] animate-fadeIn\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/*  */}\n            <div className=\"flex items-center justify-between px-5 py-4 border-b border-slate-700/50\">\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-2xl\">{helpData.icon}</span>\n                <h3 className=\"text-lg font-bold text-white\">{helpData.title}</h3>\n              </div>\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/*  */}\n            <div className=\"px-5 py-4\">\n              <p className=\"text-slate-300 text-sm leading-relaxed mb-4\">\n                {helpData.description}\n              </p>\n\n              {/*   */}\n              {helpData.tips && helpData.tips.length > 0 && (\n                <div className=\"space-y-2.5\">\n                  <h4 className=\"text-xs font-bold text-cyan-400 uppercase tracking-wider\">\n                     \n                  </h4>\n                  {helpData.tips.map((tip, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-start gap-2.5 bg-[#0a0a12]/60 rounded-xl px-3.5 py-2.5 border border-cyan-900/20\"\n                    >\n                      <span className=\"text-cyan-400 text-xs mt-0.5 font-bold shrink-0\">\n                        {index + 1}.\n                      </span>\n                      <p className=\"text-slate-400 text-sm leading-relaxed\">\n                        {tip}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/*   */}\n            <div className=\"px-5 pb-4\">\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-full py-2.5 rounded-xl bg-indigo-500/20 text-indigo-400 text-sm font-bold border border-indigo-500/30 hover:bg-indigo-500/30 transition-colors\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport HelpButton from './HelpButton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n      {action}\r\n      <HelpButton />\r\n    </div>\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/utils/helpContent.js\n//     +    \n\nexport const PAGE_HELP = {\n  '/dashboard/tasks': {\n    title: ' ',\n    icon: '',\n    description: '     !',\n    tips: [\n      '  (/)   ',\n      '   ',\n      '        ',\n    ],\n  },\n  '/my-assets': {\n    title: ' ',\n    icon: '',\n    description: '     .',\n    tips: [\n      '     ',\n      '     ',\n      '     ',\n    ],\n  },\n  '/coupon-goal': {\n    title: ' ',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '     ',\n      '    ',\n    ],\n  },\n  '/my-profile': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '   ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/learning-games/omok': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      ', ,  5   !',\n      '  ',\n    ],\n  },\n  '/learning-games/typing': {\n    title: ' ',\n    icon: '',\n    description: '  !',\n    tips: [\n      '   ',\n      '    ',\n    ],\n  },\n  '/learning-games/science': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '   ',\n      '   !',\n    ],\n  },\n  '/item-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '  \" \" ',\n      '   !',\n    ],\n  },\n  '/my-items': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '      ',\n      '       ',\n    ],\n  },\n  '/personal-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '     ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/banking': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '   ',\n      '    ',\n      '     ',\n    ],\n  },\n  '/stock-trading': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '   ',\n      '  ',\n    ],\n  },\n  '/auction': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '    ',\n      '   ',\n      '   ',\n    ],\n  },\n  '/real-estate': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '    ',\n    ],\n  },\n  '/government': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '  ',\n    ],\n  },\n  '/national-assembly': {\n    title: '',\n    icon: '',\n    description: '  !',\n    tips: [\n      '  /    ',\n      '     ',\n      '   ',\n    ],\n  },\n  '/court': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/police': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '   ',\n      '     ',\n    ],\n  },\n  '/learning-board': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/learning-board/music-request': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      'YouTube      ',\n      '      ',\n    ],\n  },\n};\n\n//     \nexport const WELCOME_GUIDE = {\n  title: '   ! ',\n  subtitle: '    ?',\n  sections: [\n    {\n      icon: '',\n      title: ' ',\n      description: '      .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ' ,  ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: '     .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: ' ,   ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ', ,       .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: '   ?       .',\n    },\n  ],\n};\n\n//    \nexport const getHelpContent = (pathname) => {\n  //   \n  if (PAGE_HELP[pathname]) return PAGE_HELP[pathname];\n\n  //    (: /music-room/xxx)\n  const matchedKey = Object.keys(PAGE_HELP).find(key =>\n    pathname.startsWith(key)\n  );\n  return matchedKey ? PAGE_HELP[matchedKey] : null;\n};\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/components/WelcomePopup.js\n//      \n\nimport React, { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport { WELCOME_GUIDE } from '../utils/helpContent';\n\nconst STORAGE_KEY_NEVER = 'alchan_welcome_never_show';\nconst STORAGE_KEY_TODAY = 'alchan_welcome_closed_date';\n\nfunction shouldShowPopup() {\n  try {\n    // \"  \" \n    if (localStorage.getItem(STORAGE_KEY_NEVER) === 'true') return false;\n\n    // \" \" \n    const closedDate = localStorage.getItem(STORAGE_KEY_TODAY);\n    if (closedDate) {\n      const today = new Date().toISOString().split('T')[0];\n      if (closedDate === today) return false;\n    }\n\n    return true;\n  } catch {\n    return true;\n  }\n}\n\nexport default function WelcomePopup() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (shouldShowPopup()) {\n      const timer = setTimeout(() => setIsVisible(true), 800);\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  if (!isVisible) return null;\n\n  const handleNeverShow = () => {\n    try { localStorage.setItem(STORAGE_KEY_NEVER, 'true'); } catch {}\n    setIsVisible(false);\n  };\n\n  const handleCloseToday = () => {\n    try {\n      const today = new Date().toISOString().split('T')[0];\n      localStorage.setItem(STORAGE_KEY_TODAY, today);\n    } catch {}\n    setIsVisible(false);\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9998] p-4 animate-fadeIn\"\n      onClick={handleCloseToday}\n    >\n      <div\n        className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-lg max-h-[85vh] flex flex-col shadow-[0_0_40px_rgba(0,255,242,0.15)] animate-slideUp\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/*  */}\n        <div className=\"relative px-6 pt-6 pb-4 border-b border-slate-700/50 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"absolute right-4 top-4 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n          <h2 className=\"text-xl font-bold text-white pr-8\">\n            {WELCOME_GUIDE.title}\n          </h2>\n          <p className=\"text-sm text-slate-400 mt-1\">\n            {WELCOME_GUIDE.subtitle}\n          </p>\n        </div>\n\n        {/*   */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3 scrollbar-hide\">\n          {WELCOME_GUIDE.sections.map((section, index) => (\n            <div\n              key={index}\n              className=\"flex items-start gap-3.5 bg-[#0a0a12]/60 rounded-xl px-4 py-3.5 border border-cyan-900/20 hover:border-cyan-500/30 transition-colors\"\n            >\n              <span className=\"text-2xl shrink-0 mt-0.5\">{section.icon}</span>\n              <div>\n                <h4 className=\"text-sm font-bold text-white mb-0.5\">\n                  {section.title}\n                </h4>\n                <p className=\"text-xs text-slate-400 leading-relaxed\">\n                  {section.description}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/*    */}\n        <div className=\"px-6 py-4 border-t border-slate-700/50 space-y-2 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"w-full py-2.5 rounded-xl bg-cyan-500/20 text-cyan-400 text-sm font-bold border border-cyan-500/30 hover:bg-cyan-500/30 transition-colors\"\n          >\n             \n          </button>\n          <button\n            onClick={handleNeverShow}\n            className=\"w-full py-2.5 rounded-xl bg-slate-800/50 text-slate-400 text-sm font-medium border border-slate-700/50 hover:bg-slate-700/50 hover:text-slate-300 transition-colors\"\n          >\n              \n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\n//    \r\nconst ClassDataDeletionSection = ({ userClassCode, isAdmin, isSuperAdmin }) => {\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleDeleteClassData = async () => {\r\n    if (!userClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (deleteConfirmText !== \"\") {\r\n      alert(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    //  \r\n    const finalConfirm = window.confirm(\r\n      ` '${userClassCode}'     ?\\n\\n        :\\n-   (role: 'student')\\n-  \\n-  \\n\\n(admin)  .`\r\n    );\r\n\r\n    if (!finalConfirm) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // 1.    (role === 'student' AND classCode === userClassCode)\r\n      const usersRef = firestoreCollection(db, \"users\");\r\n      const studentsQuery = firebaseQuery(\r\n        usersRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode),\r\n        firebaseWhere(\"role\", \"==\", \"student\")\r\n      );\r\n      const studentsSnapshot = await firebaseGetDocs(studentsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${studentsSnapshot.size}`);\r\n\r\n      // 2.   \r\n      const activityLogsRef = firestoreCollection(db, \"activity_logs\");\r\n      const activityLogsQuery = firebaseQuery(\r\n        activityLogsRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n      );\r\n      const activityLogsSnapshot = await firebaseGetDocs(activityLogsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${activityLogsSnapshot.size}`);\r\n\r\n      // 3.    ( userId )\r\n      const studentIds = studentsSnapshot.docs.map(doc => doc.id);\r\n      let transactionsToDelete = [];\r\n\r\n      if (studentIds.length > 0) {\r\n        // Firestore 'in'   10   \r\n        const batches = [];\r\n        for (let i = 0; i < studentIds.length; i += 10) {\r\n          batches.push(studentIds.slice(i, i + 10));\r\n        }\r\n\r\n        for (const batch of batches) {\r\n          const transactionsRef = firestoreCollection(db, \"transactions\");\r\n          const transactionsQuery = firebaseQuery(\r\n            transactionsRef,\r\n            firebaseWhere(\"userId\", \"in\", batch)\r\n          );\r\n          const transactionsSnapshot = await firebaseGetDocs(transactionsQuery);\r\n          transactionsToDelete.push(...transactionsSnapshot.docs);\r\n        }\r\n      }\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${transactionsToDelete.length}`);\r\n\r\n      // 4.    (Firestore   500 )\r\n      const allDocsToDelete = [\r\n        ...studentsSnapshot.docs,\r\n        ...activityLogsSnapshot.docs,\r\n        ...transactionsToDelete,\r\n      ];\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${allDocsToDelete.length}`);\r\n\r\n      //   \r\n      const BATCH_SIZE = 500;\r\n      for (let i = 0; i < allDocsToDelete.length; i += BATCH_SIZE) {\r\n        const batch = writeBatch(db);\r\n        const batchDocs = allDocsToDelete.slice(i, i + BATCH_SIZE);\r\n\r\n        batchDocs.forEach((docSnap) => {\r\n          batch.delete(docSnap.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n        logger.log(`[ClassDataDeletion]  ${Math.floor(i / BATCH_SIZE) + 1}  `);\r\n      }\r\n\r\n      alert(\r\n        `   !\\n\\n :\\n-  : ${studentsSnapshot.size}\\n-  : ${activityLogsSnapshot.size}\\n-  : ${transactionsToDelete.length}`\r\n      );\r\n\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // \r\n      setDeleteConfirmText(\"\");\r\n      setShowConfirmation(false);\r\n    } catch (error) {\r\n      logger.error(\"[ClassDataDeletion]   :\", error);\r\n      alert(` : ${error.message}\\n\\n    .  .`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"section-card mt-6 border-2 border-red-500/50 bg-red-900/10\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <span className=\"text-2xl\"></span>\r\n        <h3 className=\"text-xl font-bold text-red-400\"> :   </h3>\r\n      </div>\r\n\r\n      <div className=\"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30\">\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n          <strong>    !</strong>\r\n        </p>\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n                .\r\n        </p>\r\n        <p className=\"text-sm text-gray-300 mb-2\"> :</p>\r\n        <ul className=\"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1\">\r\n          <li>  (role: 'student')</li>\r\n          <li>  (activity_logs)</li>\r\n          <li>  (transactions)</li>\r\n        </ul>\r\n        <p className=\"text-sm text-green-300 mt-2\">\r\n           (admin)  .\r\n        </p>\r\n        <p className=\"text-sm text-green-300\">\r\n           , ,    .\r\n        </p>\r\n      </div>\r\n\r\n      {!showConfirmation ? (\r\n        <button\r\n          onClick={() => setShowConfirmation(true)}\r\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n             \r\n        </button>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                \"<strong className=\"text-red-400\"></strong>\"  :\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              disabled={isDeleting}\r\n              className=\"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleDeleteClassData}\r\n              disabled={isDeleting || deleteConfirmText !== \"\"}\r\n              className={`px-6 py-2 rounded-lg font-medium transition-colors ${\r\n                deleteConfirmText === \"\" && !isDeleting\r\n                  ? \"bg-red-600 hover:bg-red-700 text-white\"\r\n                  : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\r\n              }`}\r\n            >\r\n              {isDeleting ? \" ...\" : \"  \"}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowConfirmation(false);\r\n                setDeleteConfirmText(\"\");\r\n              }}\r\n              disabled={isDeleting}\r\n              className=\"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  //    \r\n  const [jobTaskSubTab, setJobTaskSubTab] = useState(\"job\");\r\n  const [studentMemberSubTab, setStudentMemberSubTab] = useState(\"student\");\r\n  const [financeMarketSubTab, setFinanceMarketSubTab] = useState(\"financial\");\r\n  const [systemSubTab, setSystemSubTab] = useState(\"database\");\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //   ID     ( )\r\n  useEffect(() => {\r\n    const mapping = {\r\n      taskManagement: ['jobAndTask', () => setJobTaskSubTab('task')],\r\n      jobSettings: ['jobAndTask', () => setJobTaskSubTab('job')],\r\n      studentManagement: ['studentAndMember', () => setStudentMemberSubTab('student')],\r\n      salarySettings: ['studentAndMember', () => setStudentMemberSubTab('salary')],\r\n      memberManagement: ['studentAndMember', () => setStudentMemberSubTab('member')],\r\n      financialProducts: ['financeAndMarket', () => setFinanceMarketSubTab('financial')],\r\n      parkingAccount: ['financeAndMarket', () => setFinanceMarketSubTab('parking')],\r\n      marketControl: ['financeAndMarket', () => setFinanceMarketSubTab('market')],\r\n      databaseManagement: ['system', () => setSystemSubTab('database')],\r\n      systemManagement: ['system', () => setSystemSubTab('system')],\r\n    };\r\n    const mapped = mapping[adminSelectedMenu];\r\n    if (mapped) {\r\n      setAdminSelectedMenu(mapped[0]);\r\n      mapped[1]();\r\n    }\r\n  }, [adminSelectedMenu, setAdminSelectedMenu]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'student') {\r\n      loadStudents();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'member') {\r\n      loadClassMembers();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'financeAndMarket' && financeMarketSubTab === 'market') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, financeMarketSubTab, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobAndTask\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobAndTask\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentAndMember\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"studentAndMember\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financeAndMarket\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financeAndMarket\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"system\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"system\")}\r\n          >\r\n             \r\n          </button>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"jobAndTask\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'job' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('job')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'task' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('task')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"task\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"job\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"studentAndMember\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'student' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('student')}\r\n            >\r\n              / \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'salary' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('salary')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'member' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('member')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"student\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'financial' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('financial')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'parking' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('parking')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'market' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('market')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"financial\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"market\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"parking\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"member\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"salary\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* =====    ===== */}\r\n        {adminSelectedMenu === \"system\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'database' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setSystemSubTab('database')}\r\n            >\r\n              \r\n            </button>\r\n            {isSuperAdmin && (\r\n              <button\r\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'system' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n                onClick={() => setSystemSubTab('system')}\r\n              >\r\n                 \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/*   */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"database\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n\r\n            {/*    */}\r\n            <div className=\"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30\">\r\n              <h3 className=\"text-lg font-bold text-violet-300 mb-3\">  </h3>\r\n              <p className=\"text-sm text-gray-400 mb-4\">    .</p>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <a\r\n                  href=\"/consent-form\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    ( )\r\n                </a>\r\n                <a\r\n                  href=\"/privacy\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                   \r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  :    */}\r\n            <ClassDataDeletionSection\r\n              userClassCode={userClassCode}\r\n              isAdmin={isAdmin}\r\n              isSuperAdmin={isSuperAdmin}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"system\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    gcTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    gcTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    gcTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    gcTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    logger.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\" className=\"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm\">  </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\nimport { logger } from '../../utils/logger';\r\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \"  \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"  \" : \"   \"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // isAdmin   \r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n\r\n        // eslint-disable-next-line react-hooks/rules-of-hooks\r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      logger.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      logger.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    logger.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      logger.log('[MyItems]   inventory   :');\r\n      logger.log(':', allInventoryDocs.size);\r\n      logger.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      logger.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      logger.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          logger.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          logger.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      logger.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            logger.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            logger.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            logger.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            logger.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          logger.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          logger.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          logger.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          logger.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          logger.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      logger.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      logger.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        logger.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        logger.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          logger.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          logger.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          logger.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          logger.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          logger.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      logger.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                logger.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { DailyRewardBanner, getStreakInfo } from './DailyReward';\r\nimport WelcomePopup from './WelcomePopup';\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport Login from '../pages/auth/Login';\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      <WelcomePopup />\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","onClick","e","stopPropagation","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","disabled","required","calculateValue","style","cursor","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","width","borderCollapse","fontSize","borderRadius","overflow","border","thead","backgroundColor","th","padding","textAlign","fontWeight","color","borderBottom","position","top","zIndex","td","tr","transition","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","marginBottom","processDonationData","log","studentsCount","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","concat","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","HelpButton","isOpen","setIsOpen","location","useLocation","helpData","getHelpContent","pathname","title","HelpCircle","icon","X","description","tips","tip","PageContainer","PageHeader","_ref2","subtitle","Icon","badge","action","backButton","LoadingState","_ref4","EmptyState","_ref6","ActionButton","_ref1","variant","size","primary","secondary","outline","danger","success","ghost","indigo","sm","md","lg","Loader2","PAGE_HELP","WELCOME_GUIDE","sections","matchedKey","key","startsWith","SKIN_TONES","FACE_SHAPES","path","EYE_STYLES","leftX","rightX","y","shape","EYE_COLORS","MOUTH_STYLES","stroke","fill","ALL_FACES","HAIRSTYLES","paths","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","background","expression","getAvatarConfig","saved","localStorage","getItem","JSON","parse","_unused","saveAvatarConfig","config","setItem","stringify","window","dispatchEvent","CustomEvent","detail","_unused2","getAvatarOptions","category","isHairstyleCompatible","hairstyleId","faceShapeId","h","includes","AVATAR_CATEGORIES","AppIcon","viewBox","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","height","stdDeviation","in","rx","d","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","label","LayoutDashboard","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","MenuItem","_ref3","active","hasSubmenu","ChevronDown","SubMenuItem","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","onClose","isCollapsed","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","prev","isActive","some","item","handleItemClick","handleLogout","isAdmin","isSuperAdmin","userRole","renderMenuSection","categoryKey","items","childItems","child","isSubGroup","charAt","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","sounds","setSounds","Moon","Sun","Type","entries","FONT_SIZES","Bell","handleNotificationToggle","newValue","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","ChevronRight","Smartphone","formatMoney","formatKoreanNumber","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","handleAvatarChange","levelInfo","useMemo","netAssets","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","document","level","Avatar","showBorder","Gift","coupons","ChevronLeft","ref","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","Trash2","maxLength","autoFocus","trimmed","trim","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","Date","now","handleBeforeInstall","handleDismiss","toString","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","vibrate","STORAGE_KEY_NEVER","STORAGE_KEY_TODAY","WelcomePopup","isVisible","setIsVisible","closedDate","toISOString","split","shouldShowPopup","timer","clearTimeout","handleCloseToday","today","_unused3","section","handleNeverShow","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","isCompleted","maxClicks","clicks","taskItemStyle","boxShadow","taskInfoStyle","gap","taskNameStyle","lineHeight","taskActionsStyle","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","Math","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","transform","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","body","bottom","content","left","marginLeft","borderWidth","borderStyle","borderColor","animation","textShadow","perspective","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","letterSpacing","tasks","TaskItem","borderTop","CommonTaskList","gridTemplateColumns","createOptimizedFunction","functionName","fn","httpsCallable","functions","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","timestamp","warn","maxAge","backup","parsed","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","checked","toLocaleTimeString","marginTop","margin","health","totalUsers","stats","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","toDate","seconds","errorLogs","slice","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","ClassDataDeletionSection","deleteConfirmText","setDeleteConfirmText","isDeleting","setIsDeleting","showConfirmation","setShowConfirmation","usersRef","firestoreCollection","studentsQuery","firebaseQuery","firebaseWhere","studentsSnapshot","firebaseGetDocs","activityLogsRef","activityLogsQuery","activityLogsSnapshot","studentIds","docs","transactionsToDelete","batches","i","batch","transactionsRef","transactionsQuery","transactionsSnapshot","allDocsToDelete","BATCH_SIZE","writeBatch","docSnap","delete","commit","floor","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","savingProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","jobTaskSubTab","setJobTaskSubTab","studentMemberSubTab","setStudentMemberSubTab","financeMarketSubTab","setFinanceMarketSubTab","systemSubTab","setSystemSubTab","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","useOptimizedStudents","useQuery","queryKey","staleTime","gcTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","parseFloat","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","queryRef","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","member","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","stock","stockRef","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","mapped","taskManagement","jobSettings","studentManagement","memberManagement","financialProducts","parkingAccount","marketControl","databaseManagement","formatLastSalaryDate","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","handleToggleStudentSelection","Boolean","join","toLocaleDateString","handleEditStudentJobs","step","products","product","AdminDatabase","href","rel","SystemMonitoring","handleToggleJobSelection","prevStudents","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","Briefcase","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","substr","setupPolling","pollData","jobsQuery","query","where","limit","loadedJobs","getDocs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","toDateString","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","findIndex","t","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","rewardAmount","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","cached","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","storeItems","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","ListTodo","userNickname","RotateCcw","JobList","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","priceIncreasePercentage","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialStock","available","initialQuantities","checkMobile","getButtonText","currentUserCash","quantity","totalPrice","canOpenAdminPanel","AdminItemPage","editingItemFromStore","onAddItem","newItemData","onUpdateItem","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","values","recentlyUsedItems","setRecentlyUsedItems","prevItems","itemsChanged","updatedItems","_itemData$itemDetails","itemData","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","quantityToUse","remainingToUse","sortedDocs","amountToUse","classmate","c","recipientName","originalUserItems","","","","","UID","inventoryRef","collection","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","updateDoc","assign","catch","React","PersonalShop","lazy","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","handleDailyRewardClaim","increment","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","DailyRewardBanner","onClaim","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","darkenColor","hex","percent","r","g","f","m","o","noseColor","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","condition","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","stored","normalizeType","cache","getCacheKey","getFromCache","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","q","snapshot","logs","_data$timestamp","normalizedFilterType","hasMore","paginatedLogs","newLastDoc","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","transactions","userIdsCount","allTransactions","_data$timestamp3","getTransactionsData","tx","metadata","convertTransactionsToLogs","handleLoadMore","getActivityTypeColor","typeStr","toLowerCase","formatDate","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","handleRefresh","keysToDelete","clearClassCache","info","typeCounts","typeExamples","count","filters","_log$type","_log$description","desc","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","filterName","filterFunc","matchedLogs","matchedTypes","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","activity","reason","itemName","couponAmount","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","iconCollection","styles","container","maxWidth","fontFamily","card","header","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","input","boxSizing","textarea","minHeight","resize","gridTwo","iconSelector","selectedIcon","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","handleChange","isEditing","maxHeight","overflowY","handleIconSelect","onMouseEnter","onMouseLeave","number","unit","num","isNegative","units","resultParts","remaining","abs","quotient","maximumFractionDigits","formatKoreanCurrency","STREAK_REWARDS","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","showPopup","setShowPopup","handleClaim","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","StreakDisplay","currentStreak","StreakRewardInfo","ItemContext","createContext","context","useContext","marketListings","marketOffers","updateUserItemQuantity","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","isAuthAdmin","deductCash","addCash","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","newUserItems","tempId","tempNewItem","token","getIdToken","functionUrl","response","fetch","method","headers","ok","errorText","status","json","itemToPurchase","newUserItem","purchasedAt","originalStock","originalPrice","existingIndex","updated","restocked","newStock","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","addDoc","logId"],"ignoreList":[],"sourceRoot":""}