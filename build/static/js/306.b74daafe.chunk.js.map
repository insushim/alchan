{"version":3,"file":"static/js/306.b74daafe.chunk.js","mappings":"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","sources":["components/LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/modals/DonateCouponModal.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","contexts/ItemContext.js","utils/firestoreHelpers.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","utils/avatarSystem.js","components/Avatar.js","utils/levelSystem.js","utils/achievementSystem.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","components/modals/TransferModal.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","components/DailyReward.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","pages/my-assets/MyAssets.js","pages/market/PersonalShop.js","pages/banking/ParkingAccount.js","pages/banking/Banking.js","components/AvatarEditor.js","pages/my-profile/MyProfile.js","components/AlchanLayout.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n  }, [fetchData, interval, enabled, ...deps]);\r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            console.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n  }, [fetchAllData, interval, enabled, ...deps]);\r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\n//   \r\nconst modalBackdropStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 1000,\r\n};\r\n\r\n//   \r\nconst modalContainerStyle = {\r\n  backgroundColor: \"white\",\r\n  padding: \"20px\",\r\n  borderRadius: \"8px\",\r\n  maxWidth: \"500px\",\r\n  width: \"90%\",\r\n  maxHeight: \"90vh\",\r\n  overflowY: \"auto\",\r\n  boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\r\n};\r\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      console.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      console.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div style={modalBackdropStyle} onClick={handleCancel}>\r\n      <div style={modalContainerStyle} onClick={(e) => e.stopPropagation()}>\r\n        <h3\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"600\",\r\n            marginBottom: \"15px\",\r\n            color: \"#1f2937\",\r\n          }}\r\n        >\r\n           \r\n        </h3>\r\n        <p\r\n          style={{\r\n            marginBottom: \"10px\",\r\n            fontSize: \"14px\",\r\n            color: \"#4b5563\",\r\n          }}\r\n        >\r\n             .\r\n        </p>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n          }}\r\n        >\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n            color: \"#4f46e5\",\r\n          }}\r\n        >\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"15px\" }}>\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              style={{\r\n                display: \"block\",\r\n                marginBottom: \"5px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n              }}\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"8px 12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                outline: \"none\", //     \r\n              }}\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#fee2e2\", //  \r\n                border: \"1px solid #fecaca\", //  \r\n                borderRadius: \"6px\",\r\n                padding: \"12px 15px\",\r\n                marginBottom: \"15px\",\r\n                color: \"#b91c1c\", //   \r\n                fontSize: \"14px\",\r\n              }}\r\n            >\r\n              <p style={{ margin: 0 }}> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n              padding: \"10px 15px\",\r\n              backgroundColor: \"#eef2ff\", //   \r\n              borderRadius: \"6px\",\r\n              borderLeft: \"4px solid #4f46e5\", //   \r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"600\",\r\n                color: \"#1f2937\", //   \r\n              }}\r\n            >\r\n              <span> :</span>\r\n              <span style={{ color: \"#4f46e5\" /*   */ }}>\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"10px\",\r\n              marginTop: \"20px\",\r\n            }}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#f3f4f6\", //   \r\n                color: \"#4b5563\", //   \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                cursor: \"pointer\",\r\n                transition: \"background-color 0.2s ease\",\r\n              }}\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#ef4444\", //   ( )\r\n                color: \"white\", //  \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\", //   \r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1, //  \r\n                transition: \"background-color 0.2s ease, opacity 0.2s ease\",\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing} //  \r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      console.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      console.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop\"\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        zIndex: 1000,\r\n      }}\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal\"\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          padding: \"24px\",\r\n          width: \"90%\",\r\n          maxWidth: \"400px\",\r\n          boxShadow: \"0 10px 25px rgba(0, 0, 0, 0.1)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 style={{ marginTop: 0, color: \"#374151\" }}> </h3>\r\n        <div style={{ marginBottom: \"16px\", color: \"#6b7280\" }}>\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"16px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : console.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"24px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : console.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"modal-actions\"\r\n          style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"10px\" }}\r\n        >\r\n          <button\r\n            className=\"cancel-button\"\r\n            onClick={closeModal}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#f3f4f6\",\r\n              color: \"#4b5563\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#10b981\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"500\",\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showDonationHistoryModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    width: \"100%\",\r\n    maxWidth: \"600px\",\r\n    maxHeight: \"85vh\",\r\n    overflow: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  };\r\n\r\n  const modalHeaderStyle = {\r\n    padding: \"16px 20px\",\r\n    borderBottom: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f9fafb\",\r\n  };\r\n\r\n  const modalBodyStyle = {\r\n    padding: \"20px\",\r\n    overflowY: \"auto\",\r\n    maxHeight: \"calc(85vh - 120px)\",\r\n  };\r\n\r\n  const modalFooterStyle = {\r\n    padding: \"16px 20px\",\r\n    borderTop: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  };\r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        console.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          console.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          console.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          console.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={handleClose}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <div style={modalHeaderStyle}>\r\n          <h3 style={{ margin: 0, fontSize: \"18px\", fontWeight: \"600\", color: \"#1f2937\" }}>\r\n               \r\n            {userClassCode && (\r\n              <span style={{ \r\n                marginLeft: \"8px\", \r\n                fontSize: \"14px\", \r\n                backgroundColor: \"#dbeafe\", \r\n                color: \"#1e40af\", \r\n                padding: \"4px 8px\", \r\n                borderRadius: \"12px\", \r\n                fontWeight: \"500\" \r\n              }}>\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              background: \"none\", \r\n              border: \"none\", \r\n              cursor: \"pointer\", \r\n              fontSize: \"20px\", \r\n              color: \"#9ca3af\", \r\n              padding: \"0\", \r\n              lineHeight: \"1\" \r\n            }} \r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div style={modalBodyStyle}>\r\n          <div style={{ \r\n            backgroundColor: \"#eef2ff\", \r\n            padding: \"12px 15px\", \r\n            borderRadius: \"8px\", \r\n            marginBottom: \"20px\", \r\n            border: \"1px solid #c7d2fe\" \r\n          }}>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\", \r\n              marginBottom: \"8px\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                  \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                   \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div style={{ textAlign: \"center\", padding: \"40px 0\", color: \"#6b7280\" }}>\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div style={{ color: \"#ef4444\", textAlign: \"center\", padding: \"40px 0\" }}>\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span style={{ \r\n                              marginLeft: \"8px\", \r\n                              fontSize: \"12px\", \r\n                              backgroundColor: \"#dbeafe\", \r\n                              color: \"#1e40af\", \r\n                              padding: \"2px 6px\", \r\n                              borderRadius: \"10px\", \r\n                              fontWeight: \"600\", \r\n                              verticalAlign: \"middle\" \r\n                            }}>\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td style={{ \r\n                          ...tableStyles.td, \r\n                          textAlign: \"right\", \r\n                          color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\", \r\n                          fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\" \r\n                        }}>\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p style={{ margin: \"0 0 8px 0\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                            \r\n                  </p>\r\n                  <p style={{ margin: 0, fontSize: \"14px\" }}>\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div style={modalFooterStyle}>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              padding: \"8px 16px\", \r\n              backgroundColor: \"#e5e7eb\", \r\n              color: \"#374151\", \r\n              border: \"none\", \r\n              borderRadius: \"6px\", \r\n              cursor: \"pointer\", \r\n              fontWeight: \"500\", \r\n              transition: \"background-color 0.2s, color 0.2s\" \r\n            }}\r\n            onMouseOver={(e) => {\r\n              e.target.style.backgroundColor = \"#d1d5db\";\r\n              e.target.style.color = \"#1f2937\";\r\n            }}\r\n            onMouseOut={(e) => {\r\n              e.target.style.backgroundColor = \"#e5e7eb\";\r\n              e.target.style.color = \"#374151\";\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 1000,\r\n        padding: \"20px\",\r\n      }}\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n          width: \"100%\",\r\n          maxWidth: \"500px\",\r\n          overflow: \"hidden\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderBottom: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            backgroundColor: \"#f9fafb\",\r\n          }}\r\n        >\r\n          <h3\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"18px\",\r\n              fontWeight: \"600\",\r\n              color: \"#1f2937\",\r\n            }}\r\n          >\r\n             \r\n            {classCode && (\r\n              <span\r\n                style={{\r\n                  marginLeft: \"8px\",\r\n                  fontSize: \"14px\",\r\n                  backgroundColor: \"#dbeafe\",\r\n                  color: \"#1e40af\",\r\n                  padding: \"4px 8px\",\r\n                  borderRadius: \"12px\",\r\n                  fontWeight: \"500\",\r\n                }}\r\n              >\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              background: \"none\",\r\n              border: \"none\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontSize: \"20px\",\r\n              color: \"#9ca3af\",\r\n              padding: \"0\",\r\n              lineHeight: \"1\",\r\n            }}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ padding: \"20px\" }}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                backgroundColor: \"#eef2ff\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #c7d2fe\",\r\n              }}\r\n            >\r\n              <span\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"500\",\r\n                  color: \"#4338ca\",\r\n                }}\r\n              >\r\n                  \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontSize: \"16px\",\r\n                  fontWeight: \"600\",\r\n                  color: \"#4f46e5\",\r\n                }}\r\n              >\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"16px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                resize: \"vertical\",\r\n                minHeight: \"80px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#f0fdf4\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #bbf7d0\",\r\n                marginBottom: \"20px\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={{\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"500\",\r\n                    color: \"#15803d\",\r\n                  }}\r\n                >\r\n                    \r\n                </span>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"16px\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#16a34a\",\r\n                  }}\r\n                >\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderTop: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            gap: \"12px\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#e5e7eb\",\r\n              color: \"#374151\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontWeight: \"500\",\r\n              opacity: isDonating ? 0.6 : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    console.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    console.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    console.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    console.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  console.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  console.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    console.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      console.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    console.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      console.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n  }, [activityTypeFilter, searchTerm]); //     \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      console.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// console.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// console.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// console.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// console.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// console.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// console.log(formatCouponCount(782));             // \"782\"\r\n// console.log(formatCouponCount(38));              // \"38\"","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    console.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      console.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    console.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    console.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        console.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        console.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        console.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      console.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    console.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        console.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        console.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      console.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    console.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    console.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    console.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    console.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    console.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronRight, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, Sparkles, LogOut,\r\n  Boxes, Store, RefreshCw, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  Briefcase, ListTodo, LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category -  ( )\r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n\r\n  //  /  \r\n  { id: 'adminUserGroup', label: '  ', icon: Users, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'classMemberManagement', label: ' ', icon: Users, path: '/admin/class-members', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminAssetGroup', label: '  ', icon: Banknote, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminSettingsGroup', label: '  ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminAppSettings', label: '/ ', icon: Target, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'taskManagement', label: ' ', icon: ListTodo, path: '/admin/task-management', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'jobManagement', label: ' ', icon: Briefcase, path: '/admin/job-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'salarySettings', label: ' ', icon: Banknote, path: '/admin/salary-settings', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //   \r\n  { id: 'adminSystemGroup', label: ' ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminPage', label: ' ', icon: Settings, path: '/admin/page', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            height: '64px',\r\n            minHeight: '64px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: 'linear-gradient(135deg, #4f46e5, #7c3aed, #4f46e5)'\r\n          }}\r\n        >\r\n          <div style={{ padding: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' }}>\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div\r\n          style={{\r\n            height: '72px',\r\n            minHeight: '72px',\r\n            margin: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            alignItems: 'center',\r\n            background: 'linear-gradient(135deg, rgba(10, 10, 18, 0.95), rgba(20, 20, 35, 0.95))',\r\n            border: '1px solid rgba(0, 255, 242, 0.2)',\r\n            boxShadow: '0 0 15px rgba(0, 255, 242, 0.1)',\r\n          }}\r\n        >\r\n          {/*   */}\r\n          <div style={{ position: 'absolute', top: '-20px', right: '-20px', width: '80px', height: '80px', background: 'rgba(255,255,255,0.1)', borderRadius: '50%' }} />\r\n          <div style={{ position: 'absolute', bottom: '-30px', left: '-10px', width: '60px', height: '60px', background: 'rgba(255,255,255,0.08)', borderRadius: '50%' }} />\r\n\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '14px', padding: '0 18px', width: '100%', position: 'relative', zIndex: 10 }}>\r\n            {/*   */}\r\n            <div style={{ padding: '6px', background: 'rgba(255,255,255,0.05)', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0,0,0,0.15)', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <span style={{ fontSize: '22px', fontWeight: '900', color: '#00fff2', fontFamily: \"'Jua', sans-serif\", lineHeight: '1.1', textShadow: '0 0 10px rgba(0, 255, 242, 0.5)' }}></span>\r\n              <span style={{ fontSize: '11px', fontWeight: 'bold', color: 'rgba(232, 232, 255, 0.7)', letterSpacing: '0.2em', lineHeight: '1.1', marginTop: '3px' }}>ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                position: 'absolute',\r\n                right: '12px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                padding: '6px',\r\n                borderRadius: '50%',\r\n                background: 'rgba(255,255,255,0.2)',\r\n                border: 'none',\r\n                color: 'white',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport {\r\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        borderRadius: \"50%\",\r\n        overflow: \"hidden\",\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <div style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, -60%)\", //    \r\n      }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    console.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer\"\r\n              style={{ background: 'rgba(167, 139, 250, 0.2)' }}\r\n            >\r\n              <span style={{ fontSize: '14px' }}>{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span style={{ fontSize: '9px', color: '#9ca3af' }}>LEVEL</span>\r\n                <span style={{ fontSize: '12px', fontWeight: '700', color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span style={{ fontSize: '14px', marginLeft: '2px' }}>{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10\"\r\n        style={{ height: '64px', minHeight: '64px', maxHeight: '64px', padding: '0 16px' }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            style={{\r\n              padding: '8px',\r\n              borderRadius: '8px',\r\n              border: '1px solid rgba(0, 255, 242, 0.1)',\r\n              background: 'rgba(255, 255, 255, 0.05)',\r\n              color: 'white',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div style={{ fontSize: '15px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n               <span style={{ color: '#00fff2', fontFamily: \"'Jua', sans-serif\" }}></span> ! \r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#94a3b8', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(16, 185, 129, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#34d399'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#10b981',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontWeight: 'bold',\r\n              fontSize: '12px'\r\n            }}></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(244, 63, 94, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#fb7185'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#f43f5e',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}><Gift size={14} /></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              padding: '6px 12px',\r\n              background: `rgba(167, 139, 250, 0.1)`,\r\n              borderRadius: '8px',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease',\r\n            }}\r\n            onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.2)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.1)'}\r\n          >\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: '28px',\r\n              height: '28px',\r\n              borderRadius: '6px',\r\n              background: levelInfo?.color || '#a78bfa',\r\n              fontSize: '14px',\r\n            }}>\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', color: levelInfo?.color || '#a78bfa', lineHeight: '1.2' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div style={{ fontSize: '11px', fontWeight: 'bold', color: '#e8e8ff', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px',\r\n                marginLeft: '4px',\r\n                padding: '2px 6px',\r\n                background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                           bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                           bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                borderRadius: '4px',\r\n              }}>\r\n                <span style={{ fontSize: '12px' }}>{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ position: 'relative' }} ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px',\r\n                paddingLeft: '12px',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                background: 'transparent',\r\n                border: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <div style={{ textAlign: 'right' }}>\r\n                <div style={{ fontSize: '13px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName}</div>\r\n                <div style={{ fontSize: '11px', color: '#818cf8', fontWeight: '500', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      console.log('PWA  ');\r\n    } else {\r\n      console.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      console.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                console.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              console.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      console.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        console.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      console.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      console.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    console.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      console.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    console.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    console.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      console.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    borderRadius: \"8px\",\r\n    cursor: isCompleted ? \"default\" : \"pointer\",\r\n    transition: \"all 0.2s ease\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    display: \"flex\",\r\n    flexDirection: \"row\", //   \r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    position: \"relative\",\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    marginBottom: \"8px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n    gap: isMobile ? \"6px\" : \"8px\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n    flexGrow: 1,\r\n    minWidth: 0,\r\n    overflow: \"hidden\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontWeight: \"600\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    whiteSpace: \"nowrap\",\r\n    lineHeight: \"1.4\",\r\n    flex: 1,\r\n    minWidth: 0,\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n    flexShrink: 0,\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    borderRadius: \"10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n    fontWeight: \"500\",\r\n    whiteSpace: \"nowrap\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n      width: isMobile ? \"95%\" : \"90%\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n      marginBottom: isMobile ? \"8px\" : \"10px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n      marginBottom: isMobile ? \"20px\" : \"30px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div style={mobileModalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n          <h3 style={mobileModalTitleStyle}>  </h3>\r\n          <p style={mobileModalSubtitleStyle}>     !</p>\r\n\r\n          <div style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={taskItemStyle}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div style={taskInfoStyle}>\r\n          <span style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  cursor: \"pointer\",\r\n  padding: \"4px\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  position: \"absolute\",\r\n  bottom: \"calc(100% + 8px)\",\r\n  left: \"50%\",\r\n  transform: \"translateX(-50%)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  borderRadius: \"6px\",\r\n  fontSize: \"12px\",\r\n  fontWeight: \"500\",\r\n  whiteSpace: \"nowrap\",\r\n  zIndex: 10,\r\n  pointerEvents: \"none\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  position: \"absolute\",\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 10000,\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  borderRadius: \"20px\",\r\n  padding: \"40px\",\r\n  maxWidth: \"600px\",\r\n  width: \"90%\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  fontSize: \"28px\",\r\n  fontWeight: \"bold\",\r\n  textAlign: \"center\",\r\n  marginBottom: \"10px\",\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  fontSize: \"16px\",\r\n  textAlign: \"center\",\r\n  color: \"#a0a0c0\",\r\n  marginBottom: \"30px\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  display: \"flex\",\r\n  gap: \"20px\",\r\n  justifyContent: \"center\",\r\n  flexWrap: \"wrap\",\r\n};\r\n\r\nconst cardStyle = {\r\n  width: \"200px\",\r\n  height: \"280px\",\r\n  perspective: \"1000px\",\r\n  cursor: \"pointer\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"#fff\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  fontSize: \"24px\",\r\n  fontWeight: \"bold\",\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  fontSize: \"36px\",\r\n  fontWeight: \"bold\",\r\n  color: \"#667eea\",\r\n  marginBottom: \"10px\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  fontSize: \"18px\",\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        borderRadius: \"10px\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        overflow: \"hidden\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        marginBottom: \"15px\",\r\n        backdropFilter: \"blur(5px)\",\r\n        display: \"flex\", // Flexbox  \r\n        flexDirection: \"column\", //   \r\n        height: \"100%\", //      ( )\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text\"\r\n          style={{\r\n            fontWeight: \"700\",\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 1px 3px rgba(0,0,0,0.2)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                marginRight: \"8px\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div style={{ padding: isMobile ? \"8px\" : \"10px\", flexGrow: 1, overflowY: \"auto\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n              textAlign: \"center\",\r\n              margin: \"10px 0\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */ width: \"100%\",\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                borderRadius: \"6px\",\r\n                cursor: \"pointer\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n                marginTop: \"0\", //   \r\n                transition: \"all 0.2s ease\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div style={{ padding: \"20px\", textAlign: \"center\", color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div style={{\r\n      display: \"grid\",\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showTransferModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    padding: \"30px\",\r\n    maxWidth: \"450px\",\r\n    width: \"100%\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    position: \"relative\",\r\n  };\r\n\r\n  const closeButtonStyle = {\r\n    position: \"absolute\",\r\n    top: \"15px\",\r\n    right: \"15px\",\r\n    background: \"none\",\r\n    border: \"none\",\r\n    fontSize: \"24px\",\r\n    cursor: \"pointer\",\r\n    color: \"#6b7280\",\r\n    padding: \"0\",\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  };\r\n\r\n  const inputStyle = {\r\n    width: \"100%\",\r\n    padding: \"10px 12px\",\r\n    border: \"1px solid #d1d5db\",\r\n    borderRadius: \"6px\",\r\n    fontSize: \"14px\",\r\n    outline: \"none\",\r\n    transition: \"border-color 0.2s\",\r\n  };\r\n\r\n  const selectStyle = {\r\n    ...inputStyle,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"white\",\r\n  };\r\n\r\n  const labelStyle = {\r\n    display: \"block\",\r\n    marginBottom: \"8px\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    color: \"#374151\",\r\n  };\r\n\r\n  const buttonStyle = {\r\n    padding: \"10px 20px\",\r\n    borderRadius: \"6px\",\r\n    border: \"none\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.2s\",\r\n  };\r\n\r\n  const primaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#4f46e5\",\r\n    color: \"white\",\r\n  };\r\n\r\n  const secondaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#e5e7eb\",\r\n    color: \"#374151\",\r\n    marginRight: \"10px\",\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={() => setShowTransferModal(false)}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          style={closeButtonStyle}\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 style={{ \r\n          fontSize: \"20px\", \r\n          fontWeight: \"600\", \r\n          marginBottom: \"25px\", \r\n          color: \"#1f2937\" \r\n        }}>\r\n           \r\n        </h2>\r\n\r\n        <div style={{ \r\n          backgroundColor: \"#f3f4f6\", \r\n          borderRadius: \"8px\", \r\n          padding: \"12px\", \r\n          marginBottom: \"20px\" \r\n        }}>\r\n          <p style={{ \r\n            fontSize: \"14px\", \r\n            color: \"#4b5563\", \r\n            margin: \"0\" \r\n          }}>\r\n              : <strong style={{ color: \"#1f2937\" }}>\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              style={selectStyle}\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"25px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={inputStyle}\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: \"flex\", \r\n            justifyContent: \"flex-end\", \r\n            paddingTop: \"10px\", \r\n            borderTop: \"1px solid #e5e7eb\" \r\n          }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              style={secondaryButtonStyle}\r\n              onMouseOver={(e) => {\r\n                e.target.style.backgroundColor = \"#d1d5db\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.backgroundColor = \"#e5e7eb\";\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={primaryButtonStyle}\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n              onMouseOver={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4338ca\";\r\n                }\r\n              }}\r\n              onMouseOut={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4f46e5\";\r\n                }\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      console.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        console.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      console.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      console.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        console.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      console.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        console.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      console.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      console.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          console.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    [db, isSuperAdmin]\r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        console.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'marketControl') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      console.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs\" style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', padding: '16px', background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)', borderRadius: '16px', border: '1px solid #374151' }}>\r\n          <button\r\n            className={adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"taskManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"taskManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"jobSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"jobSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"studentManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"studentManagement\");\r\n              loadStudents();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"salarySettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"salarySettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"financialProducts\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"financialProducts\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"marketControl\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"marketControl\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"parkingAccount\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"parkingAccount\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"memberManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"memberManagement\");\r\n              loadClassMembers();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"databaseManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"databaseManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n            \r\n          </button>\r\n          {isSuperAdmin && (\r\n            <button\r\n              className={adminSelectedMenu === \"systemManagement\" ? \"active\" : \"\"}\r\n              onClick={() => setAdminSelectedMenu(\"systemManagement\")}\r\n              style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n            >\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"taskManagement\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          console.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          console.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobSettings\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    console.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      console.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentManagement\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"financialProducts\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs\" style={{ display: 'flex', gap: '8px', marginBottom: '16px' }}>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div className={`message-box ${financialMessage.type}`} style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form\" style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '12px', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button\" style={{ width: '100%' }}>\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"marketControl\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                  <p style={{ color: 'white' }}>\r\n                     :{\" \"}\r\n                    <span style={{\r\n                      fontWeight: 'bold',\r\n                      color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                      padding: '4px 12px',\r\n                      borderRadius: '16px',\r\n                      background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                    }}>\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px', marginBottom: '16px' }}>\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af' }}>\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: '#d97706',\r\n                  color: 'white',\r\n                  textAlign: 'center'\r\n                }}>\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(239, 68, 68, 0.1)',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(239, 68, 68, 0.3)'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: '#ef4444' }}>   </h4>\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '12px' }}>\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    background: '#ea580c',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"parkingAccount\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <p style={{ color: '#9ca3af', fontSize: '14px' }}>  </p>\r\n                  <p style={{ color: '#22c55e', fontSize: '32px', fontWeight: 'bold' }}>\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label style={{ display: 'block', marginBottom: '8px', color: '#9ca3af' }}>\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input\"\r\n                    style={{ marginBottom: '12px' }}\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginTop: '12px' }}>\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               -  (    )\r\n            ======================================== */}\r\n\r\n        {/*     */}\r\n        {adminSelectedMenu === \"memberManagement\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"salarySettings\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"databaseManagement\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card\" style={{ minHeight: \"500px\", maxHeight: \"70vh\", overflow: \"auto\" }}>\r\n              <AdminDatabase />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"systemManagement\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    cacheTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    cacheTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    cacheTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    cacheTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      console.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      console.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"20px\",\r\n        marginBottom: \"20px\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"8px\",\r\n                marginBottom: \"12px\",\r\n                fontSize: \"13px\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <div>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"10px\",\r\n                  marginBottom: \"6px\",\r\n                }}\r\n              >\r\n                <span style={{ fontSize: \"32px\" }}>\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div\r\n                    style={{\r\n                      color: \"#fff\",\r\n                      fontSize: \"18px\",\r\n                      fontWeight: \"700\",\r\n                    }}\r\n                  >\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div style={{\r\n                      fontSize: \"11px\",\r\n                      color: \"rgba(255,255,255,0.8)\",\r\n                      marginTop: \"2px\"\r\n                    }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{\r\n                color: \"rgba(255,255,255,0.95)\",\r\n                fontSize: \"24px\",\r\n                fontWeight: \"800\",\r\n                marginTop: \"4px\"\r\n              }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                border: \"none\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                padding: \"14px 28px\",\r\n                borderRadius: \"14px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ marginTop: \"16px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                gap: \"4px\",\r\n              }}\r\n            >\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div\r\n                  key={day.day}\r\n                  style={{\r\n                    flex: 1,\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"8px\",\r\n                      borderRadius: \"4px\",\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                      marginBottom: \"4px\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span style={{\r\n                      fontSize: \"9px\",\r\n                      color: \"rgba(255,255,255,0.7)\"\r\n                    }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div style={{\r\n                textAlign: \"center\",\r\n                marginTop: \"8px\",\r\n                fontSize: \"12px\",\r\n                color: \"rgba(255,255,255,0.8)\",\r\n              }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{ textAlign: \"center\", padding: \"10px 0\" }}>\r\n          <div style={{\r\n            fontSize: \"48px\",\r\n            marginBottom: \"12px\",\r\n            animation: \"bounce 0.5s ease\"\r\n          }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div\r\n            style={{\r\n              color: \"#fff\",\r\n              fontSize: \"28px\",\r\n              fontWeight: \"800\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div style={{\r\n            color: \"rgba(255,255,255,0.9)\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"600\"\r\n          }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div style={{\r\n              marginTop: \"10px\",\r\n              padding: \"8px 16px\",\r\n              background: \"rgba(255,255,255,0.2)\",\r\n              borderRadius: \"20px\",\r\n              display: \"inline-block\",\r\n              fontSize: \"14px\",\r\n              color: \"#fff\",\r\n            }}>\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"inline-flex\",\r\n        alignItems: \"center\",\r\n        gap: \"6px\",\r\n        padding: \"4px 12px\",\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        borderRadius: \"14px\",\r\n        fontSize: \"13px\",\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n        fontWeight: \"600\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"16px\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 style={{\r\n        color: \"#e8e8ff\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"700\",\r\n        marginBottom: \"12px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"8px\"\r\n      }}>\r\n            \r\n      </h4>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"6px\" }}>\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              padding: \"6px 10px\",\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              borderRadius: \"8px\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n              fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n              fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n            }}>\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          style={{\r\n            marginTop: \"8px\",\r\n            padding: \"10px\",\r\n            background: \"#f59e0b15\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #f59e0b30\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <span style={{ color: \"#f59e0b\", fontSize: \"13px\", fontWeight: \"600\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\nimport { DailyRewardBanner, getStreakInfo, claimDailyReward } from \"../../components/DailyReward\";\r\n\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      console.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n  //     -     \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        //      (  )\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, {\r\n        cash: increment(rewardAmount),\r\n      });\r\n\r\n      //  \r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n\r\n      //   (  )\r\n      setTimeout(() => {\r\n        setShowDailyRewardPopup(false);\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      console.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        console.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      console.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    console.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      console.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    return () => {\r\n      realtimeManager.current.removeAllListeners();\r\n    };\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      console.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        console.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      console.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        console.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          console.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    console.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          console.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          console.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    console.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      console.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      console.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    console.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      console.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        console.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      console.log(\"[Dashboard]    \");\r\n    }\r\n  }, [userDoc?.classCode, setUserDoc, setJobs]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\"> </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: \"rgba(0, 0, 0, 0.7)\",\r\n            backdropFilter: \"blur(4px)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n            padding: \"20px\",\r\n            animation: \"fadeIn 0.3s ease-out\",\r\n          }}\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              maxWidth: \"400px\",\r\n              animation: \"slideUp 0.3s ease-out\",\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/*   */}\r\n            <div style={{ textAlign: \"right\", marginBottom: \"8px\" }}>\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                style={{\r\n                  background: \"rgba(255,255,255,0.2)\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  width: \"32px\",\r\n                  height: \"32px\",\r\n                  borderRadius: \"50%\",\r\n                  cursor: \"pointer\",\r\n                  fontSize: \"18px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*    */}\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n\r\n            {/*    */}\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              marginTop: \"12px\",\r\n              color: \"rgba(255,255,255,0.6)\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n        \r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      console.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      console.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    console.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      console.log('[MyItems]   inventory   :');\r\n      console.log(':', allInventoryDocs.size);\r\n      console.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      console.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      console.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          console.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          console.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      console.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            console.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            console.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            console.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            console.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          console.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          console.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          console.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          console.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          console.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      console.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        console.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        console.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          console.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          console.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          console.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          console.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          console.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      console.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                console.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                          <button className=\"sell-to-market-button\" onClick={() => {\r\n                            handleOpenSellToMarketModal(group);\r\n                          }} disabled={isSyncing}> </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/pages/my-assets/MyAssets.js - Firestore      \r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  arrayUnion,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n} from \"../../firebase\";\r\nimport { limit, runTransaction } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { DailyRewardBanner } from \"../../components/DailyReward\";\r\n\r\nexport default function MyAssets() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users, //    (    )\r\n    classmates, // ''     (,  )\r\n    allClassMembers, //  [] ''      (  )\r\n    loading: authLoading,\r\n    updateUser: updateUserInAuth,\r\n    addCashToUserById,\r\n    deductCash,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const userName =\r\n    userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  //  [ 1]   \r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false); //    \r\n  const dataFetchRef = useRef({}); //    \r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [deposits, setDeposits] = useState([]); //   \r\n  const [savings, setSavings] = useState([]); //   \r\n  const [loans, setLoans] = useState([]);\r\n  const [realEstateAssets, setRealEstateAssets] = useState([]);\r\n  const [totalNetAssets, setTotalNetAssets] = useState(0);\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n  const [transactionHistory, setTransactionHistory] = useState([]);\r\n  const [forceReload, setForceReload] = useState(0); //      \r\n\r\n  //  [ 2] Firebase Functions   ( )\r\n  const getUserAssetsDataFunction = httpsCallable(functions, 'getUserAssetsData');\r\n  const sellCouponFunction = httpsCallable(functions, 'sellCoupon');\r\n  const giftCouponFunction = httpsCallable(functions, 'giftCoupon');\r\n\r\n  //  [ 4]    \r\n  const CACHE_DURATION = 60 * 60 * 1000; //  [] 1 (Firestore  )\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  //  [ ] Firestore    \r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[MyAssets]     :\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] =\r\n    useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [transferRecipient, setTransferRecipient] = useState(\"\");\r\n  const [transferAmount, setTransferAmount] = useState(\"\");\r\n  const [showAllTransactions, setShowAllTransactions] = useState(false); //   / \r\n\r\n  //  [ 1]  timestamp  \r\n  const safeTimestampToDate = (timestamp) => {\r\n    try {\r\n      // null undefined \r\n      if (!timestamp) {\r\n        return new Date();\r\n      }\r\n\r\n      //  Date  \r\n      if (timestamp instanceof Date) {\r\n        return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n      }\r\n\r\n      // Firestore Timestamp  \r\n      if (timestamp && typeof timestamp.toDate === 'function') {\r\n        const date = timestamp.toDate();\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // seconds   Firestore Timestamp  \r\n      if (timestamp && timestamp.seconds) {\r\n        const date = new Date(timestamp.seconds * 1000);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // ISO  \r\n      if (typeof timestamp === 'string') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //   \r\n      if (typeof timestamp === 'number') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //     \r\n      return new Date();\r\n    } catch (error) {\r\n      return new Date();\r\n    }\r\n  };\r\n\r\n  //  [ 5]    \r\n  const isCacheValid = (cacheKey) => {\r\n    const cachedTime = dataFetchRef.current[cacheKey];\r\n    return cachedTime && (Date.now() - cachedTime) < CACHE_DURATION;\r\n  };\r\n\r\n  //  [ 6] localStorage   \r\n  const getCachedFirestoreData = (key) => {\r\n    try {\r\n      const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached);\r\n        if (Date.now() - timestamp < CACHE_DURATION) {\r\n          return data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const setCachedFirestoreData = (key, data) => {\r\n    try {\r\n      const cacheItem = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      localStorage.setItem(`firestore_cache_${key}_${userId}`, JSON.stringify(cacheItem));\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 2]     -     \r\n  const addTransaction = async (userId, amount, description) => {\r\n    try {\r\n      //    \r\n      const localKey = `pending_transactions_${userId}`;\r\n      const existing = localStorage.getItem(localKey);\r\n      const pendingTransactions = existing ? JSON.parse(existing) : [];\r\n\r\n      //   timestamp   - Date  \r\n      const now = new Date();\r\n      const newTransaction = {\r\n        id: `local_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        amount: Number(amount) || 0, //   \r\n        description: String(description) || \" \", //   \r\n        timestamp: now, // Date   \r\n        timestampISO: now.toISOString(), // ISO  \r\n        synced: false,\r\n      };\r\n\r\n      pendingTransactions.push(newTransaction);\r\n      localStorage.setItem(localKey, JSON.stringify(pendingTransactions, (key, value) => {\r\n        // Date  JSON   ISO  \r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n      //    \r\n      setTransactionHistory(prev => [newTransaction, ...prev.slice(0, 4)]);\r\n\r\n\r\n      //  [ 3]    (    )\r\n      setTimeout(async () => {\r\n        try {\r\n          await syncPendingTransactions(userId);\r\n        } catch (error) {\r\n        }\r\n      }, 1000);\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 4]     \r\n  const syncPendingTransactions = async (userId) => {\r\n    const localKey = `pending_transactions_${userId}`;\r\n    const pendingStr = localStorage.getItem(localKey);\r\n\r\n    if (!pendingStr) return;\r\n\r\n    try {\r\n      const pendingTransactions = JSON.parse(pendingStr, (key, value) => {\r\n        // JSON Date  \r\n        if (key === 'timestamp' && typeof value === 'string') {\r\n          return new Date(value);\r\n        }\r\n        return value;\r\n      });\r\n\r\n      const unsyncedTransactions = pendingTransactions.filter(tx => !tx.synced);\r\n\r\n      if (unsyncedTransactions.length === 0) return;\r\n\r\n      const batch = writeBatch(db);\r\n      const userTransactionsRef = collection(db, \"users\", userId, \"transactions\");\r\n\r\n      unsyncedTransactions.forEach(tx => {\r\n        const docRef = doc(userTransactionsRef);\r\n        batch.set(docRef, {\r\n          amount: tx.amount,\r\n          description: tx.description,\r\n          timestamp: serverTimestamp(), // Firestore serverTimestamp \r\n          localTimestamp: tx.timestampISO || tx.timestamp, //   \r\n          syncedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //   \r\n      const updatedTransactions = pendingTransactions.map(tx =>\r\n        unsyncedTransactions.find(utx => utx.id === tx.id)\r\n          ? { ...tx, synced: true }\r\n          : tx\r\n      );\r\n\r\n      localStorage.setItem(localKey, JSON.stringify(updatedTransactions, (key, value) => {\r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ ]          \r\n  const createDefaultGoalForClass = useCallback(async (classCode, goalId) => {\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", goalId);\r\n      const defaultGoalData = {\r\n        classCode: classCode,\r\n        targetAmount: 1000,\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        title: `${classCode}  `,\r\n        description: `${classCode}   .`,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        createdBy: userId,\r\n      };\r\n\r\n      //        ( )\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n        if (!goalDoc.exists()) {\r\n          transaction.set(goalDocRef, defaultGoalData);\r\n          setCachedFirestoreData(`goal_${goalId}`, defaultGoalData);\r\n        } else {\r\n          const existingData = goalDoc.data();\r\n          setCachedFirestoreData(`goal_${goalId}`, existingData);\r\n        }\r\n      });\r\n\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }, [userId]);\r\n\r\n  //  []     -    \r\n  const loadGoalData = useCallback(async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const cacheKey = `goal_${currentGoalId}`;\r\n    const cachedData = getCachedFirestoreData(cacheKey);\r\n\r\n    if (cachedData) {\r\n      setClassCouponGoal(Number(cachedData.targetAmount) || 1000);\r\n      setGoalProgress(Number(cachedData.progress) || 0);\r\n\r\n      const donations = Array.isArray(cachedData.donations) ? cachedData.donations : [];\r\n      setGoalDonations(donations);\r\n\r\n      const myDonations = donations.filter(d => d.userId === userId);\r\n      const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n      setMyContribution(myTotal);\r\n\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        //   \r\n        setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n        //   \r\n        const donations = Array.isArray(goalData.donations)\r\n          ? goalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(donations);\r\n\r\n        //   \r\n        const myDonations = donations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //   \r\n        setCachedFirestoreData(cacheKey, goalData);\r\n      } else {\r\n        //     \r\n        console.log('[MyAssets]     ');\r\n        await createDefaultGoalForClass(currentUserClassCode, currentGoalId);\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]    :', error);\r\n    }\r\n  }, [currentGoalId, currentUserClassCode, userId, createDefaultGoalForClass, getCachedFirestoreData, setCachedFirestoreData]);\r\n\r\n  const loadMyAssetsData = useCallback(async () => {\r\n    if (!userId || !db) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    //      \r\n    if (loadingRef.current) {\r\n      console.log('[MyAssets]       ');\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //  []     (limit )\r\n      const realEstateRef1 = query(collection(db, \"classes\", currentUserClassCode, \"realEstateProperties\"), where(\"owner\", \"==\", userId), limit(50));\r\n      const realEstateRef2 = query(collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"realestates\"), limit(50));\r\n      const realEstateRef3 = query(collection(db, \"realEstate\"), where(\"ownerId\", \"==\", userId), limit(50));\r\n\r\n      const [snap1, snap2, snap3] = await Promise.all([\r\n        getDocs(realEstateRef1),\r\n        getDocs(realEstateRef2),\r\n        getDocs(realEstateRef3),\r\n      ]);\r\n\r\n      const allRealEstateAssets = [];\r\n      snap1.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap2.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap3.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n\r\n      //    (  )\r\n      const parkingRef1 = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRef2 = collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"parkingAccounts\");\r\n\r\n      const [parkingSnap1, parkingSnap2] = await Promise.all([\r\n        getDoc(parkingRef1),\r\n        getDocs(parkingRef2),\r\n      ]);\r\n\r\n      let totalParkingBalance = 0;\r\n      if (parkingSnap1.exists()) {\r\n        totalParkingBalance += parkingSnap1.data().balance || 0;\r\n      }\r\n\r\n      parkingSnap2.forEach(doc => {\r\n        totalParkingBalance += doc.data().balance || 0;\r\n      });\r\n\r\n      setParkingBalance(totalParkingBalance);\r\n\r\n      //  []    (, ,   products  )\r\n      const productsRef = query(collection(db, \"users\", userId, \"products\"), limit(50));\r\n      const productsSnap = await getDocs(productsRef);\r\n\r\n      const depositsData = [];\r\n      const savingsData = [];\r\n      const loansData = [];\r\n\r\n      productsSnap.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') depositsData.push(product);\r\n        else if (product.type === 'savings') savingsData.push(product);\r\n        else if (product.type === 'loan') loansData.push(product);\r\n      });\r\n\r\n      setDeposits(depositsData);\r\n      setSavings(savingsData);\r\n      setLoans(loansData);\r\n\r\n      setRealEstateAssets(allRealEstateAssets);\r\n\r\n      //  []    useEffect  (  )\r\n      // loadGoalData() [user, currentGoalId]  useEffect \r\n\r\n      //     - activity_logs + transactions   \r\n      let activityData = [];\r\n      let transactionsData = [];\r\n\r\n      // 1. activity_logs   \r\n      try {\r\n        const activityLogsRef = query(\r\n          collection(db, \"activity_logs\"),\r\n          where(\"classCode\", \"==\", currentUserClassCode),\r\n          where(\"userId\", \"==\", userId),\r\n          limit(30)\r\n        );\r\n        const activityLogsSnap = await getDocs(activityLogsRef);\r\n        activityData = activityLogsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || data.type || ' ',\r\n              timestamp: data.timestamp,\r\n              type: data.type,\r\n              couponAmount: data.couponAmount || 0,\r\n              source: 'activity_logs'\r\n            };\r\n          })\r\n          //       \r\n          .filter(tx => tx.amount !== 0 || tx.couponAmount !== 0);\r\n      } catch (activityError) {\r\n        console.log('[MyAssets] activity_logs  :', activityError);\r\n      }\r\n\r\n      // 2.  transactions   ( )\r\n      try {\r\n        const transactionsRef = query(\r\n          collection(db, \"users\", userId, \"transactions\"),\r\n          limit(30)\r\n        );\r\n        const transactionsSnap = await getDocs(transactionsRef);\r\n        transactionsData = transactionsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || ' ',\r\n              timestamp: data.timestamp || data.createdAt,\r\n              type: data.type || 'transaction',\r\n              source: 'transactions'\r\n            };\r\n          })\r\n          .filter(tx => tx.amount !== 0);\r\n      } catch (transactionsError) {\r\n        console.log('[MyAssets] transactions  :', transactionsError);\r\n      }\r\n\r\n      //    (  ID )\r\n      const allTransactions = [...activityData, ...transactionsData];\r\n\r\n      // timestamp  \r\n      allTransactions.sort((a, b) => {\r\n        const dateA = a.timestamp?.toDate ? a.timestamp.toDate() : new Date(a.timestamp?.seconds * 1000 || 0);\r\n        const dateB = b.timestamp?.toDate ? b.timestamp.toDate() : new Date(b.timestamp?.seconds * 1000 || 0);\r\n        return dateB - dateA;\r\n      });\r\n\r\n      //  20 \r\n      setTransactionHistory(allTransactions.slice(0, 20));\r\n\r\n    } catch (fallbackError) {\r\n      console.error('[MyAssets]      :', fallbackError);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, [userId, currentUserClassCode]); // loadGoalData    \r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!authLoading && user) {\r\n      loadMyAssetsData();\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n      setParkingBalance(0);\r\n      setLoans([]);\r\n      setRealEstateAssets([]);\r\n      setTotalNetAssets(0);\r\n      setMyContribution(0);\r\n      setClassCouponGoal(1000);\r\n      setGoalProgress(0);\r\n      setCouponValue(1000);\r\n      setGoalDonations([]);\r\n      setTransactionHistory([]);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user]); // loadMyAssetsData    \r\n\r\n  useEffect(() => {\r\n    const cashValue = Number(userDoc?.cash) || 0;\r\n    const couponMonetaryValue = (Number(userDoc?.coupons) || 0) * Number(couponValue);\r\n    const realEstateValue = realEstateAssets.reduce(\r\n      (sum, asset) => sum + (Number(asset.price) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const depositsTotal = deposits.reduce(\r\n      (sum, deposit) => sum + (Number(deposit.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const savingsTotal = savings.reduce(\r\n      (sum, saving) => sum + (Number(saving.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance  - remainingPrincipal  balance )\r\n    const loanTotal = loans.reduce(\r\n      (sum, loan) => sum + (Number(loan.remainingPrincipal) || Number(loan.balance) || 0),\r\n      0\r\n    );\r\n    const calculatedTotalAssets =\r\n      cashValue +\r\n      couponMonetaryValue +\r\n      Number(parkingBalance) +\r\n      depositsTotal +\r\n      savingsTotal +\r\n      realEstateValue -\r\n      loanTotal;\r\n\r\n    setTotalNetAssets(calculatedTotalAssets);\r\n  }, [\r\n    userDoc?.cash,\r\n    userDoc?.coupons,\r\n    couponValue,\r\n    parkingBalance,\r\n    deposits,\r\n    savings,\r\n    realEstateAssets,\r\n    loans,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  //  []     -  \r\n  //       ( Firestore  )\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!user || !currentGoalId) {\r\n      return;\r\n    }\r\n\r\n    loadGoalData();\r\n  }, [user, currentGoalId]); // loadGoalData    \r\n\r\n  //  []    -   \r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode) {\r\n      alert(\"       .\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"   .\");\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    const currentCoupons = Number(userDoc?.coupons) || 0;\r\n    if (currentCoupons < donationAmount) {\r\n      alert(` . (: ${currentCoupons}, : ${donationAmount})`);\r\n      return false;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    //   (UI  )\r\n    const previousProgress = goalProgress;\r\n    const previousMyContribution = myContribution;\r\n    const previousDonations = goalDonations;\r\n\r\n    const newDonation = {\r\n      userId: userId,\r\n      userName: userName,\r\n      amount: donationAmount,\r\n      timestamp: new Date().toISOString(),\r\n      timestampISO: new Date().toISOString(),\r\n      message: memo || '',\r\n      classCode: currentUserClassCode,\r\n    };\r\n\r\n    setGoalProgress(prev => prev + donationAmount);\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalDonations(prev => [...prev, newDonation]);\r\n\r\n    //    UI  ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n\r\n    try {\r\n      // 1.    (AuthContext )\r\n      const couponDeducted = await updateUserInAuth({\r\n        coupons: increment(-donationAmount)\r\n      });\r\n\r\n      if (!couponDeducted) {\r\n        throw new Error(\"  .\");\r\n      }\r\n\r\n      // 2. Firestore   \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n\r\n        if (!goalDoc.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n\r\n        const firestoreDonation = {\r\n          userId: userId,\r\n          userName: userName,\r\n          amount: donationAmount,\r\n          timestamp: serverTimestamp(),\r\n          timestampISO: new Date().toISOString(),\r\n          message: memo || '',\r\n          classCode: currentUserClassCode,\r\n        };\r\n\r\n        // progress   donations  \r\n        transaction.update(goalDocRef, {\r\n          progress: increment(donationAmount),\r\n          donations: arrayUnion(firestoreDonation),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      // 3. donations   (,  )\r\n      const donationRecordRef = doc(collection(db, \"donations\"));\r\n      await setDoc(donationRecordRef, {\r\n        userId: userId,\r\n        userName: userName,\r\n        amount: donationAmount,\r\n        timestamp: serverTimestamp(),\r\n        timestampISO: new Date().toISOString(),\r\n        message: memo || '',\r\n        classCode: currentUserClassCode,\r\n        goalId: currentGoalId,\r\n      });\r\n\r\n      // 4.  \r\n      await addTransaction(userId, -donationAmount * couponValue, `  ${donationAmount} `);\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_DONATE,\r\n        description: `   ${donationAmount} `,\r\n        couponAmount: -donationAmount,\r\n        metadata: {\r\n          goalId: currentGoalId,\r\n          goalProgress: goalProgress + donationAmount,\r\n          message: memo || ''\r\n        }\r\n      });\r\n\r\n      //  5.   (   )\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      alert(`${donationAmount}   !`);\r\n      setShowDonateModal(false);\r\n\r\n      //  6.     (  Firestore )\r\n      setTimeout(() => {\r\n        loadGoalData();\r\n      }, 500);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[MyAssets]  :', error);\r\n      alert(` : ${error.message}`);\r\n\r\n      //      \r\n      setGoalProgress(previousProgress);\r\n      setMyContribution(previousMyContribution);\r\n      setGoalDonations(previousDonations);\r\n\r\n      //  \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []       \r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //    \r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`firestore_cache_settings_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      console.log('[MyAssets]   , Firestore    ...');\r\n\r\n      //  Firestore    \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n\r\n        //   \r\n        const myDonations = freshDonations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //  \r\n        setCachedFirestoreData(cacheKey, latestGoalData);\r\n\r\n        alert(`   !\\n : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\n : ${freshDonations.length}\\n : ${myTotal}`);\r\n      } else {\r\n        alert(\"    .  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]   :', error);\r\n      alert(`    : ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []     \r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    alert(`   .\\n : ${goalDonations.length}\\n : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  //  [ ] 'resetCouponGoal'  async  \r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"       .\");\r\n      return;\r\n    }\r\n    if (\r\n      !window.confirm(\r\n        ` ${currentUserClassCode}      ?`\r\n      )\r\n    )\r\n      return;\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      //  []   limit \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode),\r\n        limit(100)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //  [ 23]      \r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`(${currentUserClassCode})     .`);\r\n    } catch (error) {\r\n      alert(`  : ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    //        UI  ( )\r\n    const cashGained = amount * couponValue;\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount, cash: cashGained });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_USE,\r\n        description: ` ${amount}  (${cashGained.toLocaleString()})`,\r\n        amount: cashGained,\r\n        couponAmount: -amount,\r\n        metadata: {\r\n          couponsSold: amount,\r\n          cashReceived: cashGained,\r\n          couponValue: couponValue\r\n        }\r\n      });\r\n\r\n      alert(`${amount}  .`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n      //  [] Firebase Function  userDoc \r\n      // AuthContext    UI  (loadMyAssetsData )\r\n    } catch (error) {\r\n      alert(` : ${error.message}`);\r\n\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: amount, cash: -cashGained });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}  ${amount} ?`)) {\r\n      //    UI  ( )\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: -amount });\r\n      }\r\n\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userName,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_SEND,\r\n          description: `${recipientUser.name}  ${amount} `,\r\n          couponAmount: -amount,\r\n          metadata: {\r\n            recipientId: recipientUser.id,\r\n            recipientName: recipientUser.name\r\n          }\r\n        });\r\n\r\n        //     (  ) -   \r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: recipientUser.id,\r\n          userName: recipientUser.name,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_RECEIVE,\r\n          description: `${userName}  ${amount} `,\r\n          couponAmount: amount,\r\n          metadata: {\r\n            senderId: userId,\r\n            senderName: userName\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n        //  [] Firebase Function  userDoc \r\n        // AuthContext    UI  (loadMyAssetsData )\r\n      } catch (error) {\r\n        alert(` : ${error.message}`);\r\n\r\n        //   \r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTransferMoney = async () => {\r\n    setAssetsLoading(true);\r\n    try {\r\n      if (\r\n        !userDoc ||\r\n        !userId ||\r\n        !db ||\r\n        !users ||\r\n        !deductCash ||\r\n        !addCashToUserById\r\n      ) {\r\n        alert(\"   .    .\");\r\n        return;\r\n      }\r\n\r\n      const amount = parseInt(transferAmount, 10);\r\n      if (isNaN(amount) || amount <= 0) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if ((Number(userDoc.cash) || 0) < amount) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const recipientUser = users.find((u) => u.id === transferRecipient);\r\n      if (!recipientUser) {\r\n        alert(\"    .    .\");\r\n        return;\r\n      }\r\n\r\n      if (recipientUser.id === userId) {\r\n        alert(\"    .\");\r\n        return;\r\n      }\r\n\r\n      const recipientName = recipientUser.name || recipientUser.nickname || \"\";\r\n\r\n      //      .\r\n      const deductSuccess = await deductCash(amount, `${recipientName} `);\r\n      if (deductSuccess) {\r\n        const addSuccess = await addCashToUserById(recipientUser.id, amount, `${userName} `);\r\n        if (addSuccess) {\r\n          //     ( )\r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: userId,\r\n            userName: userName,\r\n            type: ACTIVITY_TYPES.TRANSFER_SEND,\r\n            description: `${recipientName} ${amount.toLocaleString()} `,\r\n            amount: -amount,\r\n            metadata: {\r\n              recipientId: recipientUser.id,\r\n              recipientName: recipientName\r\n            }\r\n          });\r\n\r\n          //     ( ) -   \r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: recipientUser.id,\r\n            userName: recipientName,\r\n            type: ACTIVITY_TYPES.TRANSFER_RECEIVE,\r\n            description: `${userName} ${amount.toLocaleString()} `,\r\n            amount: amount,\r\n            metadata: {\r\n              senderId: userId,\r\n              senderName: userName\r\n            }\r\n          });\r\n\r\n          alert(\" .\");\r\n          setShowTransferModal(false);\r\n          setTransferRecipient(\"\");\r\n          setTransferAmount(\"\");\r\n        } else {\r\n          alert(\"     .  .\");\r\n          //       .\r\n          await addCashToUserById(userId, amount, \"   \");\r\n        }\r\n      } else {\r\n        alert(\"    .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"!!!        !!!\", error);\r\n      alert(`   : ${error.message}`);\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: parseInt(transferAmount, 10) || 0 });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForceRefresh = () => {\r\n    //  \r\n    const cacheKey = `myAssets_${userId}`;\r\n    localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n\r\n    console.log('[MyAssets]      ');\r\n\r\n    //   \r\n    loadMyAssetsData();\r\n  };\r\n\r\n  const renderTitle = () => (\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n      <h2\r\n        style={{\r\n          fontSize: \"24px\",\r\n          fontWeight: \"bold\",\r\n          color: \"#00fff2\",\r\n          borderBottom: \"2px solid rgba(0, 255, 242, 0.2)\",\r\n          paddingBottom: \"10px\",\r\n          margin: 0,\r\n          textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n        }}\r\n      >\r\n           \r\n      </h2>\r\n      <button\r\n        onClick={handleForceRefresh}\r\n        disabled={assetsLoading}\r\n        style={{\r\n          padding: \"8px 16px\",\r\n          backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n          color: \"#00fff2\",\r\n          border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n          borderRadius: \"8px\",\r\n          fontSize: \"14px\",\r\n          fontWeight: \"600\",\r\n          cursor: assetsLoading ? \"not-allowed\" : \"pointer\",\r\n          opacity: assetsLoading ? 0.6 : 1,\r\n          transition: \"all 0.2s ease\",\r\n        }}\r\n      >\r\n         \r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderAssetSummary = () => {\r\n    const displayCash = Number(userDoc?.cash) || 0;\r\n    const displayCoupons = Number(userDoc?.coupons) || 0;\r\n\r\n    //     \r\n    const displayedTransactions = showAllTransactions\r\n      ? transactionHistory\r\n      : transactionHistory.slice(0, 5);\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          padding: \"0\",\r\n          background: \"transparent\",\r\n          marginBottom: \"25px\",\r\n        }}\r\n      >\r\n        {/*   -    */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(102, 126, 234, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"42px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            marginBottom: \"15px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {displayCash.toLocaleString()} <span style={{ fontSize: \"28px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <button\r\n              onClick={() => setShowTransferModal(true)}\r\n              style={{\r\n                padding: \"14px 28px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n                color: \"#667eea\",\r\n                border: \"none\",\r\n                borderRadius: \"12px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.1)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n              disabled={assetsLoading || authLoading}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = \"translateY(-2px)\";\r\n                e.target.style.boxShadow = \"0 6px 20px rgba(0,0,0,0.15)\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = \"translateY(0)\";\r\n                e.target.style.boxShadow = \"0 4px 15px rgba(0,0,0,0.1)\";\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    -      */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n               \r\n          </h4>\r\n          {transactionHistory.length > 0 ? (\r\n            <div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n                {displayedTransactions.map((tx) => {\r\n                  let displayDate = \" \";\r\n                  try {\r\n                    const validDate = safeTimestampToDate(tx.timestamp);\r\n                    displayDate = validDate.toLocaleDateString(\"ko-KR\", {\r\n                      month: \"2-digit\",\r\n                      day: \"2-digit\",\r\n                    });\r\n                  } catch (dateError) {\r\n                    displayDate = \"\";\r\n                  }\r\n\r\n                  const txAmount = Number(tx.amount) || 0;\r\n                  const txDescription = String(tx.description) || \" \";\r\n\r\n                  return (\r\n                    <div\r\n                      key={tx.id || Math.random()}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\",\r\n                        fontSize: \"14px\",\r\n                        color: \"#a0a0c0\",\r\n                        padding: \"14px 16px\",\r\n                        backgroundColor: txAmount > 0 ? \"rgba(5, 150, 105, 0.1)\" : \"rgba(220, 38, 38, 0.1)\",\r\n                        border: txAmount > 0 ? \"1px solid rgba(5, 150, 105, 0.3)\" : \"1px solid rgba(220, 38, 38, 0.3)\",\r\n                        borderRadius: \"10px\",\r\n                      }}\r\n                    >\r\n                      <span\r\n                        style={{\r\n                          flex: \"1\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                          marginRight: \"10px\",\r\n                          fontWeight: \"500\",\r\n                          color: \"#e8e8ff\"\r\n                        }}\r\n                      >\r\n                        {displayDate}  {txDescription}\r\n                      </span>\r\n                      <span\r\n                        style={{\r\n                          fontWeight: \"700\",\r\n                          fontSize: \"15px\",\r\n                          color: txAmount > 0 ? \"#34d399\" : \"#f87171\",\r\n                          minWidth: \"110px\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        {txAmount > 0 ? \"+\" : \"\"}\r\n                        {txAmount.toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              {transactionHistory.length > 5 && (\r\n                <button\r\n                  onClick={() => setShowAllTransactions(!showAllTransactions)}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"12px\",\r\n                    padding: \"12px\",\r\n                    backgroundColor: \"rgba(255, 255, 255, 0.05)\",\r\n                    color: \"#a0a0c0\",\r\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n                    borderRadius: \"10px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                    transition: \"all 0.2s ease\",\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.backgroundColor = \"#f3f4f6\";\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.backgroundColor = \"#f9fafb\";\r\n                  }}\r\n                >\r\n                  {showAllTransactions ? \" \" : ` ${transactionHistory.length - 5}  `}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                fontSize: \"13px\",\r\n                color: \"#6b7280\",\r\n                textAlign: \"center\",\r\n                padding: \"20px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.03)\",\r\n                borderRadius: \"10px\",\r\n                border: \"1px dashed rgba(255, 255, 255, 0.1)\"\r\n              }}\r\n            >\r\n                 .\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   -     */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"25px 30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(240, 147, 251, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"8px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"38px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {Number(totalNetAssets).toLocaleString()} <span style={{ fontSize: \"24px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <p style={{\r\n            marginTop: \"8px\",\r\n            fontSize: \"12px\",\r\n            color: \"rgba(255,255,255,0.8)\",\r\n            margin: \"8px 0 0 0\"\r\n          }}>\r\n             +  +  +  +  +  - \r\n          </p>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n             \r\n          </h4>\r\n          <div\r\n            style={{\r\n              background: \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\",\r\n              borderRadius: \"14px\",\r\n              padding: \"20px\",\r\n              border: \"none\",\r\n              boxShadow: \"0 4px 15px rgba(6, 182, 212, 0.2)\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <span style={{ color: \"rgba(255,255,255,0.9)\", fontWeight: \"500\", fontSize: \"14px\" }}>\r\n                \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontWeight: \"800\",\r\n                  fontSize: \"26px\",\r\n                  color: \"#ffffff\",\r\n                  letterSpacing: \"-0.5px\",\r\n                  textAlign: \"right\",\r\n                  display: \"block\"\r\n                }}\r\n              >\r\n                {Number(parkingBalance).toLocaleString()}<span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <p style={{ marginTop: \"10px\", fontSize: \"12px\", color: \"#9ca3af\", textAlign: \"center\" }}>\r\n                  \r\n          </p>\r\n        </div>\r\n\r\n        {/*    -   */}\r\n        <div\r\n          style={{\r\n            padding: \"25px\",\r\n            background: \"rgba(20, 20, 35, 0.4)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid rgba(0, 255, 242, 0.1)\",\r\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n          }}\r\n        >\r\n\r\n          {/*   */}\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            <h4\r\n              style={{\r\n                fontSize: \"15px\",\r\n                color: \"#374151\",\r\n                fontWeight: \"700\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            >\r\n                \r\n            </h4>\r\n            <div\r\n              style={{\r\n                background: \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\",\r\n                borderRadius: \"14px\",\r\n                padding: \"20px\",\r\n                border: \"none\",\r\n                boxShadow: \"0 4px 15px rgba(251, 191, 36, 0.2)\",\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}>\r\n                <div style={{ width: \"100%\" }}>\r\n                  <div style={{\r\n                    fontSize: \"26px\",\r\n                    fontWeight: \"800\",\r\n                    color: \"#ffffff\",\r\n                    letterSpacing: \"-0.5px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    {displayCoupons.toLocaleString()} <span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n                  </div>\r\n                  <div style={{\r\n                    fontSize: \"12px\",\r\n                    color: \"rgba(255,255,255,0.85)\",\r\n                    fontWeight: \"500\",\r\n                    marginTop: \"4px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    1 = {Number(couponValue).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n  if (!userDoc && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .        .\r\n      </div>\r\n    );\r\n  }\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .     .\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        {renderTitle()}\r\n\r\n        {/*     */}\r\n        <DailyRewardBanner\r\n          userId={userId}\r\n          onClaim={async (reward) => {\r\n            try {\r\n              //   \r\n              const userRef = doc(db, \"users\", userId);\r\n              await setDoc(userRef, {\r\n                cash: increment(reward),\r\n                updatedAt: serverTimestamp(),\r\n              }, { merge: true });\r\n\r\n              //   \r\n              await logActivity(db, {\r\n                userId,\r\n                userName,\r\n                classCode: currentUserClassCode,\r\n                type: \"  \",\r\n                description: `   ${reward.toLocaleString()} `,\r\n                amount: reward,\r\n                metadata: { rewardType: \"daily_streak\" }\r\n              });\r\n\r\n              //   \r\n              if (optimisticUpdate) {\r\n                optimisticUpdate({ cash: (userDoc?.cash || 0) + reward });\r\n              }\r\n\r\n              console.log(`Daily reward claimed and added: ${reward}`);\r\n            } catch (error) {\r\n              console.error(\"   :\", error);\r\n              alert(\"    .  .\");\r\n            }\r\n          }}\r\n        />\r\n\r\n        {renderAssetSummary()}\r\n        {showTransferModal && (\r\n          <TransferModal\r\n            showTransferModal={showTransferModal}\r\n            setShowTransferModal={setShowTransferModal}\r\n            recipients={classmates}\r\n            transferRecipient={transferRecipient}\r\n            setTransferRecipient={setTransferRecipient}\r\n            transferAmount={transferAmount}\r\n            setTransferAmount={setTransferAmount}\r\n            handleTransfer={handleTransferMoney}\r\n            userId={userId}\r\n            userCash={Number(userDoc?.cash) || 0}\r\n          />\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","// src/pages/market/PersonalShop.js\r\n//    -     / \r\n// 10%   \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  getDocs,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport \"./PersonalShop.css\";\r\n\r\n//     \r\nconst formatKoreanCurrency = (amount) => {\r\n  if (amount === null || amount === undefined) return \"0\";\r\n  return `${Number(amount).toLocaleString()}`;\r\n};\r\n\r\n//  (10%)\r\nconst VAT_RATE = 0.10;\r\n\r\n//  \r\nconst SHOP_CATEGORIES = [\r\n  { value: \"food\", label: \"/\", icon: \"\" },\r\n  { value: \"craft\", label: \"/\", icon: \"\" },\r\n  { value: \"digital\", label: \"/IT\", icon: \"\" },\r\n  { value: \"education\", label: \"/\", icon: \"\" },\r\n  { value: \"entertainment\", label: \"\", icon: \"\" },\r\n  { value: \"service\", label: \"/\", icon: \"\" },\r\n  { value: \"other\", label: \"\", icon: \"\" },\r\n];\r\n\r\n// / \r\nconst PRODUCT_TYPES = [\r\n  { value: \"product\", label: \"\", icon: \"\", description: \" \" },\r\n  { value: \"service\", label: \"\", icon: \"\", description: \" \" },\r\n];\r\n\r\n// ====================  /  ====================\r\nconst ShopModal = ({ isOpen, onClose, shop, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    shopName: \"\",\r\n    description: \"\",\r\n    category: \"other\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (shop) {\r\n      setFormData({\r\n        shopName: shop.shopName || \"\",\r\n        description: shop.description || \"\",\r\n        category: shop.category || \"other\",\r\n      });\r\n    } else {\r\n      setFormData({ shopName: \"\", description: \"\", category: \"other\" });\r\n    }\r\n  }, [shop, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.shopName.trim()) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await onSave(formData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{shop ? \" \" : \"  \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label>  *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.shopName}\r\n              onChange={(e) => setFormData({ ...formData, shopName: e.target.value })}\r\n              placeholder=\":  \"\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <select\r\n              value={formData.category}\r\n              onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n            >\r\n              {SHOP_CATEGORIES.map((cat) => (\r\n                <option key={cat.value} value={cat.value}>\r\n                  {cat.icon} {cat.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label> </label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"  !\"\r\n              rows={3}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : shop ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==================== /   ====================\r\nconst ProductModal = ({ isOpen, onClose, product, shopId, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    type: \"product\",\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //  \r\n  const taxAmount = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return Math.round(price * VAT_RATE);\r\n  }, [formData.price]);\r\n\r\n  const totalPrice = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return price + taxAmount;\r\n  }, [formData.price, taxAmount]);\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      setFormData({\r\n        type: product.type || \"product\",\r\n        name: product.name || \"\",\r\n        description: product.description || \"\",\r\n        price: product.price?.toString() || \"\",\r\n        stock: product.stock >= 0 ? product.stock.toString() : \"\",\r\n      });\r\n    } else {\r\n      setFormData({ type: \"product\", name: \"\", description: \"\", price: \"\", stock: \"\" });\r\n    }\r\n  }, [product, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.name.trim()) {\r\n      alert(\"/  !\");\r\n      return;\r\n    }\r\n    if (!formData.price || parseInt(formData.price) <= 0) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    if (formData.type === \"product\" && (!formData.stock || parseInt(formData.stock) <= 0)) {\r\n      alert(\"   !\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const productData = {\r\n        type: formData.type,\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim(),\r\n        price: parseInt(formData.price),\r\n        taxAmount: taxAmount,\r\n        totalPrice: totalPrice,\r\n        stock: formData.type === \"service\" ? -1 : parseInt(formData.stock),\r\n      };\r\n      await onSave(productData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{product ? \"/ \" : \" / \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          {/*   */}\r\n          <div className=\"form-group\">\r\n            <label> *</label>\r\n            <div className=\"type-selector\">\r\n              {PRODUCT_TYPES.map((type) => (\r\n                <button\r\n                  key={type.value}\r\n                  type=\"button\"\r\n                  onClick={() => setFormData({ ...formData, type: type.value })}\r\n                  className={`type-button ${formData.type === type.value ? \"active\" : \"\"}`}\r\n                >\r\n                  <span className=\"type-icon\">{type.icon}</span>\r\n                  <span className=\"type-label\">{type.label}</span>\r\n                  <span className=\"type-desc\">{type.description}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label>{formData.type === \"product\" ? \"\" : \"\"} *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder={formData.type === \"product\" ? \":  \" : \":  \"}\r\n              maxLength={30}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"/  \"\r\n              rows={2}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label> () *</label>\r\n            <div className=\"input-with-suffix\">\r\n              <input\r\n                type=\"number\"\r\n                value={formData.price}\r\n                onChange={(e) => setFormData({ ...formData, price: e.target.value })}\r\n                placeholder=\"0\"\r\n                min=\"1\"\r\n              />\r\n              <span className=\"suffix\"></span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          {formData.price && parseInt(formData.price) > 0 && (\r\n            <div className=\"tax-info-box\">\r\n              <div className=\"tax-row\">\r\n                <span> </span>\r\n                <span>{formatKoreanCurrency(parseInt(formData.price))}</span>\r\n              </div>\r\n              <div className=\"tax-row highlight\">\r\n                <span>+  (10%)</span>\r\n                <span>+{formatKoreanCurrency(taxAmount)}</span>\r\n              </div>\r\n              <div className=\"tax-row total\">\r\n                <span> </span>\r\n                <span className=\"neon-text\">{formatKoreanCurrency(totalPrice)}</span>\r\n              </div>\r\n              <p className=\"tax-notice\"> 10%   </p>\r\n            </div>\r\n          )}\r\n\r\n          {/*  ( ) */}\r\n          {formData.type === \"product\" && (\r\n            <div className=\"form-group\">\r\n              <label>  *</label>\r\n              <div className=\"input-with-suffix\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.stock}\r\n                  onChange={(e) => setFormData({ ...formData, stock: e.target.value })}\r\n                  placeholder=\"0\"\r\n                  min=\"1\"\r\n                />\r\n                <span className=\"suffix\"></span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : product ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst PurchaseModal = ({ isOpen, onClose, product, shop, onConfirm }) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const totalAmount = useMemo(() => {\r\n    return product ? product.totalPrice * quantity : 0;\r\n  }, [product, quantity]);\r\n\r\n  const handleConfirm = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onConfirm(quantity);\r\n      onClose();\r\n    } catch (error) {\r\n      alert(error.message || \"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const maxQuantity = product.type === \"service\" ? 10 : Math.min(product.stock, 10);\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3> </h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          <div className=\"purchase-item-info\">\r\n            <div className=\"item-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n            <div className=\"item-details\">\r\n              <h4>{product.name}</h4>\r\n              <p className=\"shop-name\">{shop?.shopName}</p>\r\n              <p className=\"item-price\">{formatKoreanCurrency(product.totalPrice)} ( )</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"quantity-selector\">\r\n            <label>{product.type === \"product\" ? \" \" : \" \"}</label>\r\n            <div className=\"quantity-controls\">\r\n              <button\r\n                onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                -\r\n              </button>\r\n              <span className=\"quantity-value\">{quantity}</span>\r\n              <button\r\n                onClick={() => setQuantity(Math.min(maxQuantity, quantity + 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                +\r\n              </button>\r\n              {product.type === \"product\" && (\r\n                <span className=\"stock-info\">(: {product.stock})</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"total-amount-box\">\r\n            <span>  </span>\r\n            <span className=\"total-price neon-text\">{formatKoreanCurrency(totalAmount)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onClose} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleConfirm} disabled={loading} className=\"modal-button confirm\">\r\n            {loading ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ShopCard = ({ shop, onClick }) => {\r\n  const category = SHOP_CATEGORIES.find((c) => c.value === shop.category);\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"shop-card\">\r\n      <div className=\"shop-card-header\">\r\n        <div className=\"shop-icon\">{category?.icon || \"\"}</div>\r\n        <div className=\"shop-info\">\r\n          <h3 className=\"shop-name\">{shop.shopName}</h3>\r\n          <p className=\"shop-owner\">{shop.ownerName} </p>\r\n        </div>\r\n      </div>\r\n      {shop.description && (\r\n        <p className=\"shop-description\">{shop.description}</p>\r\n      )}\r\n      <div className=\"shop-card-footer\">\r\n        <span className=\"shop-category\">{category?.label || \"\"}</span>\r\n        <span className=\"shop-sales\"> : {formatKoreanCurrency(shop.totalSales || 0)}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ProductCard = ({ product, shop, onBuy, isOwner, onEdit, onDelete }) => {\r\n  return (\r\n    <div className=\"product-card\">\r\n      <div className=\"product-card-header\">\r\n        <div className=\"product-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n        <div className=\"product-info\">\r\n          <div className=\"product-title-row\">\r\n            <h4 className=\"product-name\">{product.name}</h4>\r\n            <span className={`product-type-badge ${product.type}`}>\r\n              {product.type === \"product\" ? \"\" : \"\"}\r\n            </span>\r\n          </div>\r\n          {product.description && (\r\n            <p className=\"product-description\">{product.description}</p>\r\n          )}\r\n          <div className=\"product-price-row\">\r\n            <span className=\"product-price neon-text\">\r\n              {formatKoreanCurrency(product.totalPrice)}\r\n            </span>\r\n            <span className=\"vat-included\">(VAT )</span>\r\n            {product.type === \"product\" && (\r\n              <span className={`stock-badge ${product.stock > 0 ? \"\" : \"soldout\"}`}>\r\n                {product.stock > 0 ? ` ${product.stock}` : \"\"}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"product-card-actions\">\r\n        {isOwner ? (\r\n          <>\r\n            <button onClick={() => onEdit(product)} className=\"action-btn edit\">\r\n               \r\n            </button>\r\n            <button onClick={() => onDelete(product)} className=\"action-btn delete\">\r\n               \r\n            </button>\r\n          </>\r\n        ) : (\r\n          <button\r\n            onClick={() => onBuy(product, shop)}\r\n            disabled={product.type === \"product\" && product.stock <= 0}\r\n            className=\"action-btn buy\"\r\n          >\r\n            {product.type === \"product\" && product.stock <= 0 ? \"\" : \" \"}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================   ====================\r\nconst PersonalShop = () => {\r\n  const { currentUser, userProfile, refreshBalance } = useAuth();\r\n\r\n  //  \r\n  const [activeTab, setActiveTab] = useState(\"browse\"); // browse, myshop, sales\r\n\r\n  //  \r\n  const [shops, setShops] = useState([]);\r\n  const [myShop, setMyShop] = useState(null);\r\n  const [myProducts, setMyProducts] = useState([]);\r\n  const [selectedShop, setSelectedShop] = useState(null);\r\n  const [selectedShopProducts, setSelectedShopProducts] = useState([]);\r\n\r\n  //  \r\n  const [showShopModal, setShowShopModal] = useState(false);\r\n  const [showProductModal, setShowProductModal] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState(null);\r\n  const [purchaseProduct, setPurchaseProduct] = useState(null);\r\n  const [purchaseShop, setPurchaseShop] = useState(null);\r\n\r\n  //  \r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingProducts, setLoadingProducts] = useState(false);\r\n\r\n  // /\r\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  //   \r\n  const loadShops = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      let q = query(\r\n        shopsRef,\r\n        where(\"status\", \"==\", \"active\"),\r\n        orderBy(\"createdAt\", \"desc\"),\r\n        limit(50)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n      const shopsData = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setShops(shopsData);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const loadMyShop = useCallback(async () => {\r\n    if (!currentUser) return;\r\n    try {\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      const q = query(shopsRef, where(\"ownerId\", \"==\", currentUser.uid), limit(1));\r\n      const snapshot = await getDocs(q);\r\n\r\n      if (!snapshot.empty) {\r\n        const shopData = { id: snapshot.docs[0].id, ...snapshot.docs[0].data() };\r\n        setMyShop(shopData);\r\n\r\n        //   \r\n        const productsRef = collection(db, \"shopProducts\");\r\n        const pq = query(\r\n          productsRef,\r\n          where(\"shopId\", \"==\", shopData.id),\r\n          orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const pSnapshot = await getDocs(pq);\r\n        setMyProducts(pSnapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  //   \r\n  const loadShopProducts = useCallback(async (shopId) => {\r\n    try {\r\n      setLoadingProducts(true);\r\n      const productsRef = collection(db, \"shopProducts\");\r\n      const q = query(\r\n        productsRef,\r\n        where(\"shopId\", \"==\", shopId),\r\n        where(\"status\", \"==\", \"available\"),\r\n        orderBy(\"createdAt\", \"desc\")\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      setSelectedShopProducts(snapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n    } finally {\r\n      setLoadingProducts(false);\r\n    }\r\n  }, []);\r\n\r\n  //  \r\n  useEffect(() => {\r\n    loadShops();\r\n    loadMyShop();\r\n  }, [loadShops, loadMyShop]);\r\n\r\n  //     \r\n  useEffect(() => {\r\n    if (selectedShop) {\r\n      loadShopProducts(selectedShop.id);\r\n    }\r\n  }, [selectedShop, loadShopProducts]);\r\n\r\n  //  /\r\n  const handleSaveShop = async (formData) => {\r\n    if (!currentUser) return;\r\n\r\n    if (myShop) {\r\n      // \r\n      await updateDoc(doc(db, \"personalShops\", myShop.id), {\r\n        ...formData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"personalShops\"), {\r\n        ...formData,\r\n        ownerId: currentUser.uid,\r\n        ownerName: userProfile?.name || \"\",\r\n        status: \"active\",\r\n        totalSales: 0,\r\n        totalTaxPaid: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    await loadMyShop();\r\n    await loadShops();\r\n  };\r\n\r\n  //  /\r\n  const handleSaveProduct = async (productData) => {\r\n    if (!myShop) return;\r\n\r\n    if (editingProduct) {\r\n      // \r\n      await updateDoc(doc(db, \"shopProducts\", editingProduct.id), {\r\n        ...productData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"shopProducts\"), {\r\n        ...productData,\r\n        shopId: myShop.id,\r\n        ownerId: currentUser.uid,\r\n        status: \"available\",\r\n        soldCount: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    setEditingProduct(null);\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handleDeleteProduct = async (product) => {\r\n    if (!window.confirm(`\"${product.name}\"() ?`)) return;\r\n\r\n    await deleteDoc(doc(db, \"shopProducts\", product.id));\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handlePurchase = async (quantity) => {\r\n    if (!currentUser || !purchaseProduct || !purchaseShop) {\r\n      throw new Error(\"   .\");\r\n    }\r\n\r\n    const totalAmount = purchaseProduct.totalPrice * quantity;\r\n    const taxAmount = purchaseProduct.taxAmount * quantity;\r\n    const sellerAmount = purchaseProduct.price * quantity;\r\n\r\n    //  \r\n    if ((userProfile?.balance || 0) < totalAmount) {\r\n      throw new Error(\" !\");\r\n    }\r\n\r\n    //    \r\n    if (purchaseShop.ownerId === currentUser.uid) {\r\n      throw new Error(\"    !\");\r\n    }\r\n\r\n    await runTransaction(db, async (transaction) => {\r\n      //   \r\n      const buyerRef = doc(db, \"users\", currentUser.uid);\r\n      transaction.update(buyerRef, {\r\n        balance: increment(-totalAmount),\r\n      });\r\n\r\n      //    ( )\r\n      const sellerRef = doc(db, \"users\", purchaseShop.ownerId);\r\n      transaction.update(sellerRef, {\r\n        balance: increment(sellerAmount),\r\n      });\r\n\r\n      //    ()\r\n      const taxRef = doc(db, \"nationalTax\", \"treasury\");\r\n      transaction.update(taxRef, {\r\n        totalVAT: increment(taxAmount),\r\n        totalTaxCollected: increment(taxAmount),\r\n      });\r\n\r\n      //   \r\n      const shopRef = doc(db, \"personalShops\", purchaseShop.id);\r\n      transaction.update(shopRef, {\r\n        totalSales: increment(sellerAmount),\r\n        totalTaxPaid: increment(taxAmount),\r\n      });\r\n\r\n      //  / \r\n      const productRef = doc(db, \"shopProducts\", purchaseProduct.id);\r\n      const updates = { soldCount: increment(quantity) };\r\n      if (purchaseProduct.type === \"product\") {\r\n        updates.stock = increment(-quantity);\r\n        if (purchaseProduct.stock - quantity <= 0) {\r\n          updates.status = \"soldout\";\r\n        }\r\n      }\r\n      transaction.update(productRef, updates);\r\n\r\n      //  \r\n      const activityRef = collection(db, \"activities\");\r\n      transaction.set(doc(activityRef), {\r\n        type: \"shop_purchase\",\r\n        buyerId: currentUser.uid,\r\n        buyerName: userProfile?.name || \"\",\r\n        sellerId: purchaseShop.ownerId,\r\n        sellerName: purchaseShop.ownerName,\r\n        shopId: purchaseShop.id,\r\n        shopName: purchaseShop.shopName,\r\n        productId: purchaseProduct.id,\r\n        productName: purchaseProduct.name,\r\n        productType: purchaseProduct.type,\r\n        quantity: quantity,\r\n        unitPrice: purchaseProduct.totalPrice,\r\n        totalAmount: totalAmount,\r\n        taxAmount: taxAmount,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    //  \r\n    if (refreshBalance) {\r\n      await refreshBalance();\r\n    }\r\n\r\n    //   \r\n    if (selectedShop) {\r\n      await loadShopProducts(selectedShop.id);\r\n    }\r\n\r\n    setPurchaseProduct(null);\r\n    setPurchaseShop(null);\r\n    alert(\" !\");\r\n  };\r\n\r\n  //   \r\n  const filteredShops = useMemo(() => {\r\n    return shops.filter((shop) => {\r\n      if (categoryFilter !== \"all\" && shop.category !== categoryFilter) return false;\r\n      if (searchQuery) {\r\n        const q = searchQuery.toLowerCase();\r\n        return (\r\n          shop.shopName.toLowerCase().includes(q) ||\r\n          shop.ownerName.toLowerCase().includes(q) ||\r\n          (shop.description && shop.description.toLowerCase().includes(q))\r\n        );\r\n      }\r\n      return true;\r\n    });\r\n  }, [shops, categoryFilter, searchQuery]);\r\n\r\n  //   \r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case \"browse\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {/*    */}\r\n            {selectedShop ? (\r\n              <div className=\"shop-detail-view\">\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedShop(null);\r\n                    setSelectedShopProducts([]);\r\n                  }}\r\n                  className=\"back-button\"\r\n                >\r\n                    \r\n                </button>\r\n\r\n                {/*   */}\r\n                <div className=\"shop-detail-header\">\r\n                  <div className=\"shop-detail-icon\">\r\n                    {SHOP_CATEGORIES.find((c) => c.value === selectedShop.category)?.icon || \"\"}\r\n                  </div>\r\n                  <div className=\"shop-detail-info\">\r\n                    <h2>{selectedShop.shopName}</h2>\r\n                    <p className=\"owner\">{selectedShop.ownerName} </p>\r\n                    {selectedShop.description && (\r\n                      <p className=\"description\">{selectedShop.description}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div className=\"products-section\">\r\n                  <h3> </h3>\r\n                  {loadingProducts ? (\r\n                    <div className=\"loading-state\">  ...</div>\r\n                  ) : selectedShopProducts.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                      <span className=\"empty-icon\"></span>\r\n                      <p>  </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"products-grid\">\r\n                      {selectedShopProducts.map((product) => (\r\n                        <ProductCard\r\n                          key={product.id}\r\n                          product={product}\r\n                          shop={selectedShop}\r\n                          onBuy={(p, s) => {\r\n                            setPurchaseProduct(p);\r\n                            setPurchaseShop(s);\r\n                          }}\r\n                          isOwner={false}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              /*   */\r\n              <div className=\"shop-list-view\">\r\n                {/*  &  */}\r\n                <div className=\"controls-section\">\r\n                  <div className=\"search-box\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                      placeholder=\" ...\"\r\n                      className=\"search-input\"\r\n                    />\r\n                  </div>\r\n                  <select\r\n                    value={categoryFilter}\r\n                    onChange={(e) => setCategoryFilter(e.target.value)}\r\n                    className=\"category-filter\"\r\n                  >\r\n                    <option value=\"all\"> </option>\r\n                    {SHOP_CATEGORIES.map((cat) => (\r\n                      <option key={cat.value} value={cat.value}>\r\n                        {cat.icon} {cat.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/*   */}\r\n                {loading ? (\r\n                  <div className=\"loading-state\">  ...</div>\r\n                ) : filteredShops.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>\r\n                      {searchQuery || categoryFilter !== \"all\"\r\n                        ? \"  \"\r\n                        : \"   \"}\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"shops-grid\">\r\n                    {filteredShops.map((shop) => (\r\n                      <ShopCard\r\n                        key={shop.id}\r\n                        shop={shop}\r\n                        onClick={() => setSelectedShop(shop)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"myshop\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {myShop ? (\r\n              <div className=\"my-shop-view\">\r\n                {/*    */}\r\n                <div className=\"my-shop-header\">\r\n                  <div className=\"my-shop-info\">\r\n                    <div className=\"my-shop-icon\">\r\n                      {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.icon || \"\"}\r\n                    </div>\r\n                    <div className=\"my-shop-details\">\r\n                      <h2>{myShop.shopName}</h2>\r\n                      <p className=\"category\">\r\n                        {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.label}\r\n                      </p>\r\n                      {myShop.description && (\r\n                        <p className=\"description\">{myShop.description}</p>\r\n                      )}\r\n                    </div>\r\n                    <button onClick={() => setShowShopModal(true)} className=\"edit-shop-btn\">\r\n                       \r\n                    </button>\r\n                  </div>\r\n                  <div className=\"my-shop-stats\">\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value neon-text\">{formatKoreanCurrency(myShop.totalSales || 0)}</span>\r\n                    </div>\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value\">{formatKoreanCurrency(myShop.totalTaxPaid || 0)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/*    */}\r\n                <div className=\"products-header\">\r\n                  <h3> / ({myProducts.length})</h3>\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingProduct(null);\r\n                      setShowProductModal(true);\r\n                    }}\r\n                    className=\"add-product-btn\"\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                {/*    */}\r\n                {myProducts.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>  </p>\r\n                    <span className=\"empty-hint\">  !</span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"products-grid\">\r\n                    {myProducts.map((product) => (\r\n                      <ProductCard\r\n                        key={product.id}\r\n                        product={product}\r\n                        shop={myShop}\r\n                        isOwner={true}\r\n                        onEdit={(p) => {\r\n                          setEditingProduct(p);\r\n                          setShowProductModal(true);\r\n                        }}\r\n                        onDelete={handleDeleteProduct}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              /*   -   */\r\n              <div className=\"create-shop-view\">\r\n                <div className=\"create-shop-card\">\r\n                  <span className=\"create-icon\"></span>\r\n                  <h2>  !</h2>\r\n                  <p>    </p>\r\n                  <button onClick={() => setShowShopModal(true)} className=\"create-shop-btn\">\r\n                      \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"sales\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            <div className=\"empty-state\">\r\n              <span className=\"empty-icon\"></span>\r\n              <p>    ...</p>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"personal-shop-container\">\r\n      {/*  */}\r\n      <div className=\"market-header\">\r\n        <h1> </h1>\r\n        <p className=\"header-subtitle\">   / !</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"market-tabs\">\r\n        {[\r\n          { id: \"browse\", label: \" \", icon: \"\" },\r\n          { id: \"myshop\", label: \" \", icon: \"\" },\r\n          { id: \"sales\", label: \" \", icon: \"\" },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => {\r\n              setActiveTab(tab.id);\r\n              setSelectedShop(null);\r\n            }}\r\n            className={`tab-button ${activeTab === tab.id ? \"active\" : \"\"}`}\r\n          >\r\n            <span className=\"tab-icon\">{tab.icon}</span>\r\n            <span className=\"tab-label\">{tab.label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/*  */}\r\n      {renderTabContent()}\r\n\r\n      {/*  */}\r\n      <ShopModal\r\n        isOpen={showShopModal}\r\n        onClose={() => setShowShopModal(false)}\r\n        shop={myShop}\r\n        onSave={handleSaveShop}\r\n      />\r\n\r\n      <ProductModal\r\n        isOpen={showProductModal}\r\n        onClose={() => {\r\n          setShowProductModal(false);\r\n          setEditingProduct(null);\r\n        }}\r\n        product={editingProduct}\r\n        shopId={myShop?.id}\r\n        onSave={handleSaveProduct}\r\n      />\r\n\r\n      <PurchaseModal\r\n        isOpen={!!purchaseProduct}\r\n        onClose={() => {\r\n          setPurchaseProduct(null);\r\n          setPurchaseShop(null);\r\n        }}\r\n        product={purchaseProduct}\r\n        shop={purchaseShop}\r\n        onConfirm={handlePurchase}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalShop;\r\n","// src/ParkingAccount.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, doc, getDoc, setDoc, serverTimestamp, updateDoc, increment, runTransaction, collection, getDocs, deleteDoc, query, where, limit } from \"../../firebase\";\r\nimport { format, isToday, differenceInDays, isPast } from 'date-fns';\r\nimport { PiggyBank, Landmark, HandCoins, Wallet, X, TrendingUp, Building2 } from 'lucide-react';\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\n\r\n// ()   -   \r\nconst getTeacherAccount = async (classCode) => {\r\n  if (!classCode) return null;\r\n\r\n  try {\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(\r\n      usersRef,\r\n      where(\"classCode\", \"==\", classCode),\r\n      where(\"isAdmin\", \"==\", true),\r\n      limit(1)\r\n    );\r\n    const snapshot = await getDocs(q);\r\n\r\n    if (!snapshot.empty) {\r\n      const teacherDoc = snapshot.docs[0];\r\n      return {\r\n        id: teacherDoc.id,\r\n        ...teacherDoc.data()\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error(\"   :\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// --- Styles ---\r\n// --- Styles ---\r\nconst styles = {\r\n  container: {\r\n    fontFamily: 'sans-serif',\r\n    backgroundColor: 'transparent',\r\n    padding: '32px',\r\n    minHeight: 'auto'\r\n  },\r\n  message: (type) => ({\r\n    padding: '16px 20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '28px',\r\n    textAlign: 'center',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    color: type === 'error' ? '#f87171' : '#34d399',\r\n    backgroundColor: type === 'error' ? 'rgba(239, 68, 68, 0.1)' : 'rgba(16, 185, 129, 0.1)',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n    border: `1px solid ${type === 'error' ? 'rgba(239, 68, 68, 0.3)' : 'rgba(16, 185, 129, 0.3)'}`\r\n  }),\r\n  grid: {\r\n    display: 'grid',\r\n    gap: '28px',\r\n    maxWidth: '1200px',\r\n    margin: '0 auto'\r\n  },\r\n  card: {\r\n    backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n    boxShadow: '0 6px 20px rgba(0, 0, 0, 0.2)',\r\n    borderRadius: '16px',\r\n    padding: '32px',\r\n    border: '1px solid rgba(255, 255, 255, 0.05)',\r\n    backdropFilter: 'blur(10px)'\r\n  },\r\n  cardHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '16px',\r\n    marginBottom: '24px',\r\n    paddingBottom: '20px',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.05)'\r\n  },\r\n  cardTitle: {\r\n    fontSize: '26px',\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n    letterSpacing: '-0.5px',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  tabContainer: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n    marginBottom: '20px',\r\n    gap: '8px'\r\n  },\r\n  tabButton: (isActive) => ({\r\n    padding: '12px 24px',\r\n    border: 'none',\r\n    background: isActive ? 'rgba(99, 102, 241, 0.2)' : 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '17px',\r\n    fontWeight: isActive ? '700' : '500',\r\n    color: isActive ? '#00fff2' : '#94a3b8',\r\n    borderBottom: `3px solid ${isActive ? '#00fff2' : 'transparent'}`,\r\n    marginBottom: '-2px',\r\n    borderRadius: '8px 8px 0 0',\r\n    transition: 'all 0.2s ease',\r\n    textShadow: isActive ? '0 0 5px rgba(0, 255, 242, 0.3)' : 'none'\r\n  }),\r\n  button: (disabled, variant = 'primary') => ({\r\n    backgroundColor: variant === 'primary' ? 'rgba(3, 105, 161, 0.8)' : (variant === 'danger' ? 'rgba(220, 38, 38, 0.8)' : (variant === 'success' ? 'rgba(5, 150, 105, 0.8)' : '#4b5563')),\r\n    color: 'white',\r\n    padding: '12px 20px',\r\n    borderRadius: '10px',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    opacity: disabled ? 0.5 : 1,\r\n    fontSize: '15px',\r\n    fontWeight: '600',\r\n    boxShadow: disabled ? 'none' : '0 4px 12px rgba(0,0,0,0.3)',\r\n    transition: 'all 0.2s ease',\r\n    ':hover': !disabled && {\r\n      transform: 'translateY(-2px)',\r\n      boxShadow: '0 6px 16px rgba(0,0,0,0.4)',\r\n      filter: 'brightness(1.1)'\r\n    }\r\n  }),\r\n  noProduct: {\r\n    textAlign: 'center',\r\n    color: '#94a3b8',\r\n    padding: '32px 0',\r\n    fontSize: '16px',\r\n    fontStyle: 'italic'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '14px 16px',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\r\n    border: '2px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '10px',\r\n    marginBottom: '16px',\r\n    fontSize: '16px',\r\n    color: 'white',\r\n    transition: 'border-color 0.2s ease',\r\n    ':focus': {\r\n      outline: 'none',\r\n      borderColor: '#00fff2',\r\n      boxShadow: '0 0 0 2px rgba(0, 255, 242, 0.1)'\r\n    }\r\n  },\r\n  modalOverlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    zIndex: 1000,\r\n    backdropFilter: 'blur(8px)'\r\n  },\r\n  modalContent: {\r\n    background: '#1a1a2e',\r\n    padding: '32px',\r\n    borderRadius: '16px',\r\n    width: '90%',\r\n    maxWidth: '450px',\r\n    position: 'relative',\r\n    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    color: '#e2e8f0'\r\n  },\r\n  modalTitle: {\r\n    fontSize: '24px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '20px',\r\n    color: '#fff',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  modalCloseBtn: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    right: '20px',\r\n    background: 'none',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    color: '#94a3b8',\r\n    transition: 'color 0.2s ease',\r\n    ':hover': {\r\n      color: '#fff'\r\n    }\r\n  },\r\n};\r\n\r\n// --- Helper Functions & Sub-Components ---\r\nconst formatCurrency = (amount) => (typeof amount === 'number' ? Math.round(amount).toLocaleString() : '0');\r\n\r\n//  \r\nconst calculateCompoundInterest = (principal, dailyRate, days) => {\r\n  if (principal <= 0 || !dailyRate || days <= 0) return { interest: 0, total: principal };\r\n  const total = principal * Math.pow(1 + dailyRate / 100, days);\r\n  const interest = total - principal;\r\n  return { interest: Math.round(interest), total: Math.round(total) };\r\n};\r\n\r\n//    ( )\r\nconst calculateDailyInterest = (principal, dailyRate) => {\r\n  //    -  \r\n  return Math.round(principal * (dailyRate / 100));\r\n};\r\n\r\nconst ICON_MAP = {\r\n  parking: <Wallet size={28} style={{ color: '#0369a1' }} />,\r\n  deposits: <Landmark size={28} style={{ color: '#059669' }} />,\r\n  savings: <PiggyBank size={28} style={{ color: '#7c3aed' }} />,\r\n  loans: <HandCoins size={28} style={{ color: '#dc2626' }} />,\r\n};\r\n\r\nconst SubscribedProductItem = ({ product, onCancel, onMaturity }) => {\r\n  const isMatured = product.maturityDate && new Date() >= product.maturityDate;\r\n  const daysRemaining = product.maturityDate ? Math.max(0, differenceInDays(product.maturityDate, new Date())) : 0;\r\n  const dailyRate = product.rate; //   \r\n\r\n  const { interest, total } = calculateCompoundInterest(\r\n    product.balance,\r\n    product.rate, // \r\n    product.termInDays\r\n  );\r\n\r\n  const dailyInterestAmount = calculateDailyInterest(product.balance, product.rate);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: `2px solid ${isMatured ? 'rgba(16, 185, 129, 0.5)' : 'rgba(255, 255, 255, 0.1)'}`,\r\n      borderRadius: '12px',\r\n      marginBottom: '16px',\r\n      background: isMatured ? 'rgba(16, 185, 129, 0.1)' : 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n        <div>\r\n          <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '4px' }}>{product.name}</div>\r\n          {isMatured && <span style={{\r\n            backgroundColor: '#10b981',\r\n            color: 'white',\r\n            padding: '4px 12px',\r\n            borderRadius: '20px',\r\n            fontSize: '13px',\r\n            fontWeight: '600'\r\n          }}></span>}\r\n        </div>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#00fff2' }}>{formatCurrency(product.balance)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#94a3b8', marginTop: '16px', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 0, 0, 0.2)', padding: '16px', borderRadius: '8px' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> ():</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{product.rate}%</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> :</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399' }}>+{formatCurrency(dailyInterestAmount)}/</span>\r\n        </div>\r\n        {product.maturityDate && (\r\n          <>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ fontWeight: '500' }}>:</span>\r\n              <span style={{ fontWeight: '600', color: '#e2e8f0' }}>{format(product.maturityDate, 'yyyy-MM-dd')}</span>\r\n            </div>\r\n            {!isMatured && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ fontWeight: '500' }}> :</span>\r\n                <span style={{ fontWeight: '600', color: '#00fff2' }}>{daysRemaining}</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed rgba(255, 255, 255, 0.1)', margin: '16px 0' }}></div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#e2e8f0', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 255, 242, 0.05)', padding: '16px', borderRadius: '8px', border: '1px solid rgba(0, 255, 242, 0.1)' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '600' }}>   ():</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399', fontSize: '17px' }}>+{formatCurrency(interest)}</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '17px' }}>\r\n          <span style={{ fontWeight: '700' }}>  :</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{formatCurrency(total)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', textAlign: 'right' }}>\r\n        {isMatured ? (\r\n          <button\r\n            onClick={onMaturity}\r\n            style={{ ...styles.button(false, 'success'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n              ({formatCurrency(total)})\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={onCancel}\r\n            style={{ ...styles.button(false, 'danger'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n            {product.type === 'loan' ? ' ' : ' '}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AvailableProductItem = ({ product, onSubscribe }) => {\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest } = calculateCompoundInterest(100000, dailyRate, product.termInDays);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: '2px solid rgba(255, 255, 255, 0.1)',\r\n      borderRadius: '12px',\r\n      marginBottom: '12px',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      background: 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n      transition: 'all 0.2s ease'\r\n    }}>\r\n      <div>\r\n        <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '8px' }}>{product.name}</div>\r\n        <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '6px' }}>\r\n          <strong style={{ color: '#00fff2' }}> {product.dailyRate}%</strong> (: {product.termInDays})\r\n        </div>\r\n        <div style={{ fontSize: '14px', color: '#34d399', fontWeight: '600' }}>\r\n          <TrendingUp size={14} style={{ display: 'inline', marginRight: '4px' }} />\r\n          10    : +{formatCurrency(projectedInterest)}\r\n        </div>\r\n      </div>\r\n      <button\r\n        onClick={onSubscribe}\r\n        style={{ ...styles.button(false), padding: '12px 24px', fontSize: '16px' }}\r\n      >\r\n        \r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProductSection = ({ title, icon, subscribedProducts, availableProducts, onSubscribe, onCancel, onMaturity }) => {\r\n  const [activeTab, setActiveTab] = useState('subscribed');\r\n  return (\r\n    <div style={styles.card}>\r\n      <div style={styles.cardHeader}>\r\n        {icon}\r\n        <h2 style={styles.cardTitle}>{title}</h2>\r\n      </div>\r\n      <div style={styles.tabContainer}>\r\n        <button\r\n          onClick={() => setActiveTab('subscribed')}\r\n          style={styles.tabButton(activeTab === 'subscribed')}\r\n        >\r\n           \r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('available')}\r\n          style={styles.tabButton(activeTab === 'available')}\r\n        >\r\n            \r\n        </button>\r\n      </div>\r\n      <div>\r\n        {activeTab === 'subscribed' && (\r\n          subscribedProducts.length > 0\r\n            ? subscribedProducts.map(p => (\r\n              <SubscribedProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onCancel={() => onCancel(p)}\r\n                onMaturity={() => onMaturity(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>  .</p>\r\n        )}\r\n        {activeTab === 'available' && (\r\n          availableProducts.length > 0\r\n            ? availableProducts.map(p => (\r\n              <AvailableProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onSubscribe={() => onSubscribe(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>   .</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SubscriptionModal = ({ isOpen, onClose, product, onConfirm, isProcessing }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const numAmount = parseFloat(amount);\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest, total: projectedTotal } = !isNaN(numAmount) && numAmount > 0\r\n    ? calculateCompoundInterest(numAmount, dailyRate, product.termInDays)\r\n    : { interest: 0, total: 0 };\r\n\r\n  return (\r\n    <div style={styles.modalOverlay} onClick={onClose}>\r\n      <div style={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n        <button onClick={onClose} style={styles.modalCloseBtn}><X size={24} /></button>\r\n        <h3 style={styles.modalTitle}>{product.name} </h3>\r\n\r\n        <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(0, 255, 242, 0.05)', borderRadius: '10px', border: '1px solid rgba(0, 255, 242, 0.2)' }}>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '8px' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong>  {product.dailyRate}% ()\r\n          </div>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong> {product.termInDays}\r\n          </div>\r\n        </div>\r\n\r\n        <p style={{ marginBottom: '12px', fontSize: '16px', fontWeight: '600', color: '#e2e8f0' }}>  </p>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          style={styles.input}\r\n          placeholder={`${formatCurrency(product.minAmount || 0)} `}\r\n          autoFocus\r\n        />\r\n\r\n        {numAmount > 0 && (\r\n          <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(16, 185, 129, 0.1)', borderRadius: '10px', border: '1px solid rgba(16, 185, 129, 0.3)' }}>\r\n            <div style={{ fontSize: '15px', color: '#34d399', marginBottom: '6px' }}>\r\n                : <strong>+{formatCurrency(projectedInterest)}</strong>\r\n            </div>\r\n            <div style={{ fontSize: '16px', color: '#34d399', fontWeight: '700' }}>\r\n                : {formatCurrency(projectedTotal)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={() => { onConfirm(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing || !amount}\r\n          style={{ ...styles.button(isProcessing || !amount), width: '100%', fontSize: '17px', padding: '16px' }}\r\n        >\r\n          {isProcessing ? ' ...' : ''}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ParkingAccountSection = ({ balance, dailyInterest, onDeposit, onWithdraw, isProcessing, userCash }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  return (\r\n    <div style={{\r\n      ...styles.card,\r\n      background: 'linear-gradient(135deg, rgba(6, 78, 117, 0.85) 0%, rgba(20, 40, 60, 0.9) 100%)',\r\n      color: 'white',\r\n      boxShadow: '0 8px 24px rgba(0, 0, 0, 0.4)',\r\n      border: '1px solid rgba(0, 180, 216, 0.25)'\r\n    }}>\r\n      <div style={{ ...styles.cardHeader, borderBottom: '2px solid rgba(0, 180, 216, 0.2)' }}>\r\n        <Wallet size={32} style={{ color: '#67e8f9' }} />\r\n        <h2 style={{ ...styles.cardTitle, color: '#e0f7fa' }}></h2>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.15)',\r\n        padding: '12px 16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '16px',\r\n        backdropFilter: 'blur(10px)',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <span style={{ fontSize: '16px', fontWeight: '500', color: '#94a3b8' }}> </span>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#e0f7fa' }}>{formatCurrency(userCash || 0)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '42px', fontWeight: 'bold', color: '#e0f7fa', marginBottom: '8px' }}>\r\n        {formatCurrency(balance)}\r\n      </div>\r\n\r\n      <p style={{ fontSize: '16px', color: 'rgba(224, 247, 250, 0.8)', marginBottom: '16px', fontWeight: '500' }}>\r\n              \r\n      </p>\r\n\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.12)',\r\n        padding: '16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '24px',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n          <TrendingUp size={20} style={{ color: '#67e8f9' }} />\r\n          <span style={{ fontSize: '15px', fontWeight: '600', color: '#94a3b8' }}>  </span>\r\n        </div>\r\n        <div style={{ fontSize: '28px', fontWeight: '700', color: '#67e8f9' }}>\r\n          +{formatCurrency(dailyInterest)}/\r\n        </div>\r\n        <div style={{ fontSize: '14px', marginTop: '6px', color: 'rgba(148, 163, 184, 0.9)' }}>\r\n          ( 1%  )\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', gap: '10px' }}>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\" \"\r\n          style={{\r\n            ...styles.input,\r\n            marginBottom: 0,\r\n            fontSize: '17px',\r\n            flex: 1,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n            border: '1px solid rgba(0, 180, 216, 0.3)'\r\n          }}\r\n          disabled={isProcessing}\r\n        />\r\n        <button\r\n          onClick={() => { onDeposit(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing, 'success'),\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n        <button\r\n          onClick={() => { onWithdraw(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing),\r\n            backgroundColor: 'rgba(100, 116, 139, 0.5)',\r\n            color: 'white',\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst ParkingAccount = ({\r\n  auth = {},\r\n  depositProducts = [],\r\n  installmentProducts = [],\r\n  loanProducts = [],\r\n  activeView = 'parking',\r\n  onViewChange,\r\n  onLoadUserProducts,\r\n  allUserProducts = [],\r\n  onDeleteUserProduct\r\n}) => {\r\n  const { user, userDoc, loading, refreshUserDocument, isAdmin, addCash, deductCash } = auth;\r\n  const userId = user?.uid;\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [parkingDailyInterest, setParkingDailyInterest] = useState(0);\r\n  const [userDeposits, setUserDeposits] = useState([]);\r\n  const [userSavings, setUserSavings] = useState([]);\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [modal, setModal] = useState({ isOpen: false, product: null, type: '' });\r\n  const [currentCash, setCurrentCash] = useState(userDoc?.cash || 0);\r\n\r\n  const displayMessage = (text, type = \"info\", duration = 3000) => {\r\n    setMessage(text);\r\n    setMessageType(type);\r\n    if (duration) setTimeout(() => setMessage(null), duration);\r\n  };\r\n\r\n  const loadAllData = useCallback(async () => {\r\n    if (!userId) return;\r\n    setIsProcessing(true);\r\n    try {\r\n      //  \r\n      const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRateProduct = depositProducts.length > 0 ? depositProducts[0] : null;\r\n\r\n      if (parkingRateProduct) {\r\n        const parkingDoc = await getDoc(parkingRef);\r\n        if (parkingDoc.exists()) {\r\n          const data = parkingDoc.data();\r\n          const lastInterestDate = data.lastInterestDate?.toDate();\r\n\r\n          if (!lastInterestDate || !isToday(lastInterestDate)) {\r\n            const daysToApply = lastInterestDate ? differenceInDays(new Date(), lastInterestDate) : 1;\r\n            if (daysToApply > 0) {\r\n              const dailyRate = (parkingRateProduct.dailyRate || 0.0027); //  1%     \r\n              const { interest } = calculateCompoundInterest(data.balance || 0, dailyRate, daysToApply);\r\n\r\n              if (interest > 0) {\r\n                await updateDoc(parkingRef, {\r\n                  balance: increment(interest),\r\n                  lastInterestDate: serverTimestamp()\r\n                });\r\n                displayMessage(`  ${formatCurrency(interest)} .`, 'success');\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          //   \r\n          await setDoc(parkingRef, {\r\n            balance: 0,\r\n            lastInterestDate: serverTimestamp()\r\n          });\r\n        }\r\n      }\r\n\r\n      //   \r\n      const finalParkingDoc = await getDoc(parkingRef);\r\n      if (finalParkingDoc.exists()) {\r\n        const balance = finalParkingDoc.data().balance || 0;\r\n        setParkingBalance(balance);\r\n\r\n        //    (1% )\r\n        const dailyRate = 1; // 1%  \r\n        const dailyInterest = calculateDailyInterest(balance, dailyRate);\r\n        setParkingDailyInterest(dailyInterest);\r\n      }\r\n\r\n      //   \r\n      const productsRef = collection(db, \"users\", userId, \"products\");\r\n      const snapshot = await getDocs(productsRef);\r\n      const deposits = [], savings = [], loans = [];\r\n\r\n      snapshot.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') deposits.push(product);\r\n        else if (product.type === 'savings') savings.push(product);\r\n        else if (product.type === 'loan') loans.push(product);\r\n      });\r\n\r\n      setUserDeposits(deposits);\r\n      setUserSavings(savings);\r\n      setUserLoans(loans);\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      displayMessage(\"   .\", \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [userId, depositProducts]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && userId) loadAllData();\r\n  }, [userId, loading, loadAllData]);\r\n\r\n  // userDoc cash   currentCash \r\n  useEffect(() => {\r\n    if (userDoc?.cash !== undefined) {\r\n      setCurrentCash(userDoc.cash);\r\n      console.log(\"[ParkingAccount] currentCash :\", userDoc.cash);\r\n    }\r\n  }, [userDoc?.cash]);\r\n\r\n  const handleOpenModal = (product, type) => setModal({ isOpen: true, product, type });\r\n  const handleCloseModal = () => setModal({ isOpen: false, product: null, type: '' });\r\n\r\n  const handleSubscribe = async (subscribeAmount) => {\r\n    console.log(\"--- handleSubscribe  ---\");\r\n    const amount = parseFloat(subscribeAmount);\r\n    const { product, type } = modal;\r\n\r\n    console.log(\" :\", product);\r\n    console.log(` : ${type},  : ${amount}`);\r\n\r\n    if (isNaN(amount) || amount <= 0) {\r\n      console.error(\"  :\", subscribeAmount);\r\n      return displayMessage(\"  .\", \"error\");\r\n    }\r\n    if (product.minAmount && amount < product.minAmount) {\r\n      console.error(`   : ${amount} < ${product.minAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.minAmount)}.`, \"error\");\r\n    }\r\n    if (product.maxAmount && amount > product.maxAmount) {\r\n      console.error(`   : ${amount} > ${product.maxAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.maxAmount)}.`, \"error\");\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    handleCloseModal(); // UX     \r\n\r\n    // ---    ---\r\n    const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n    if (!teacherAccount) {\r\n      displayMessage(\"()    .  .\", \"error\");\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n    console.log(\" :\", teacherAccount.name, teacherAccount.id);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const tempId = `temp_${Date.now()}`;\r\n    const maturityDate = new Date(Date.now() + product.termInDays * 24 * 60 * 60 * 1000);\r\n    const optimisticProduct = {\r\n      id: tempId,\r\n      name: product.name,\r\n      termInDays: product.termInDays,\r\n      rate: product.dailyRate,\r\n      balance: amount,\r\n      startDate: new Date(),\r\n      maturityDate: maturityDate,\r\n      type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n      isOptimistic: true //   \r\n    };\r\n\r\n    //    \r\n    if (optimisticProduct.type === 'deposit') {\r\n      setUserDeposits(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'savings') {\r\n      setUserSavings(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'loan') {\r\n      setUserLoans(prev => [...prev, optimisticProduct]);\r\n    }\r\n\r\n    //    \r\n    const cashChangeAmount = type === 'loans' ? amount : -amount;\r\n    setCurrentCash(prev => prev + cashChangeAmount); //  UI   \r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccount.id);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        // /:   \r\n        if (type !== 'loans' && currentCashInDb < amount) {\r\n          throw new Error(\"  .\");\r\n        }\r\n\r\n        // : ()  \r\n        if (type === 'loans' && teacherCashInDb < amount) {\r\n          throw new Error(\"()    .\");\r\n        }\r\n\r\n        const newProductData = {\r\n          name: product.name,\r\n          termInDays: product.termInDays,\r\n          rate: product.dailyRate,\r\n          balance: amount,\r\n          startDate: serverTimestamp(),\r\n          maturityDate: maturityDate,\r\n          type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n          teacherId: teacherAccount.id, //   ID \r\n          teacherName: teacherAccount.name || ''\r\n        };\r\n\r\n        const newProductRef = doc(collection(db, \"users\", userId, \"products\"));\r\n        transaction.set(newProductRef, newProductData);\r\n\r\n        // /:   \r\n        // :   \r\n        if (type === 'loans') {\r\n          // :  \r\n          transaction.update(userRef, { cash: increment(amount) });\r\n          transaction.update(teacherRef, { cash: increment(-amount) });\r\n        } else {\r\n          // /:  \r\n          transaction.update(userRef, { cash: increment(-amount) });\r\n          transaction.update(teacherRef, { cash: increment(amount) });\r\n        }\r\n      });\r\n\r\n      const actionText = type === 'loans' ? '' : '';\r\n      displayMessage(`${product.name} ${actionText} . (  )`, \"success\");\r\n\r\n      //     (// )\r\n      const activityType = type === 'deposits' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n        : type === 'savings' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n          : ACTIVITY_TYPES.LOAN_CREATE;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: `${product.name} ${type === 'loans' ? '' : ''} (${formatCurrency(amount)}) -   `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: product.name,\r\n          productType: type,\r\n          termInDays: product.termInDays,\r\n          dailyRate: product.dailyRate,\r\n          maturityDate: maturityDate.toISOString(),\r\n          teacherId: teacherAccount.id,\r\n          teacherName: teacherAccount.name\r\n        }\r\n      });\r\n\r\n      //        \r\n      await loadAllData();\r\n      if (refreshUserDocument) refreshUserDocument();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      if (optimisticProduct.type === 'deposit') {\r\n        setUserDeposits(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'savings') {\r\n        setUserSavings(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'loan') {\r\n        setUserLoans(prev => prev.filter(p => p.id !== tempId));\r\n      }\r\n\r\n      //   ( UI)\r\n      setCurrentCash(prev => prev - cashChangeAmount);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleMaturity = async (product) => {\r\n    console.log(\"--- handleMaturity  ---\");\r\n    console.log(\" :\", product);\r\n\r\n    const { id, name, type, balance, termInDays, rate, teacherId } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleMaturity: userId .\");\r\n      return;\r\n    }\r\n\r\n    const dailyRate = rate;\r\n    const { total, interest } = calculateCompoundInterest(balance, dailyRate, termInDays);\r\n\r\n    console.log(` : =${balance}, =${interest}, =${total}`);\r\n\r\n    const confirmMsg = isLoan\r\n      ? `  :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`\r\n      : ` :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`;\r\n\r\n    if (!window.confirm(confirmMsg)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"  ...\");\r\n\r\n    //    ( teacherId    )\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    console.log(\"  ID:\", teacherAccountId);\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        if (isLoan) {\r\n          //   :    (+)\r\n          if (currentCashInDb < total) {\r\n            throw new Error(` . (: ${formatCurrency(total)}, : ${formatCurrency(currentCashInDb)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(-total) });\r\n          transaction.update(teacherRef, { cash: increment(total) });\r\n          console.log(` :  -${total},  +${total}`);\r\n        } else {\r\n          // /  :    (+)\r\n          if (teacherCashInDb < total) {\r\n            throw new Error(`()   . (: ${formatCurrency(total)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(total) });\r\n          transaction.update(teacherRef, { cash: increment(-total) });\r\n          console.log(` :  +${total},  -${total}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(total)} (  )`\r\n        : `  : ${formatCurrency(total)} (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_MATURITY;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `\r\n          : `${name}   (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `,\r\n        amount: isLoan ? -total : total,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          interest,\r\n          total,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument().then(() => {\r\n          console.log(\"[ParkingAccount]    userDoc  \");\r\n        });\r\n      }\r\n\r\n      console.log(\"   \");\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      //    currentCash \r\n      if (userDoc?.cash !== undefined) {\r\n        console.log(\"   :\", userDoc.cash);\r\n        setCurrentCash(userDoc.cash);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleMaturity  ---\");\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleCancelEarly = async (product) => {\r\n    console.log(\"--- handleCancelEarly  ---\");\r\n    console.log(\"  :\", product);\r\n\r\n    const { id, name, type, balance } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleCancelEarly: userId .\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = isLoan\r\n      ? ` ${formatCurrency(balance)} ?`\r\n      : `'${name}'()  ? (   )`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"   ...\");\r\n\r\n    //    ( teacherId    )\r\n    const teacherId = product.teacherId;\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    console.log(\"  ID:\", teacherAccountId);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const originalProducts = {\r\n      deposit: [...userDeposits],\r\n      savings: [...userSavings],\r\n      loan: [...userLoans]\r\n    };\r\n    const originalCash = currentCash;\r\n\r\n    const cashChangeAmount = isLoan ? -balance : balance;\r\n    setCurrentCash(prev => prev + cashChangeAmount);\r\n\r\n    if (type === 'deposit') {\r\n      setUserDeposits(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'savings') {\r\n      setUserSavings(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'loan') {\r\n      setUserLoans(prev => prev.filter(p => p.id !== id));\r\n    }\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n        console.log(`   (DB): ${currentCashInDb},   : ${teacherCashInDb}`);\r\n\r\n        if (isLoan) {\r\n          //   :    ()\r\n          if (currentCashInDb < balance) {\r\n            throw new Error(\"   .\");\r\n          }\r\n          transaction.update(userRef, { cash: increment(-balance) });\r\n          transaction.update(teacherRef, { cash: increment(balance) });\r\n          console.log(`  :  -${balance},  +${balance}`);\r\n        } else {\r\n          // /  :    (,  )\r\n          if (teacherCashInDb < balance) {\r\n            throw new Error(`()   . (: ${formatCurrency(balance)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(balance) });\r\n          transaction.update(teacherRef, { cash: increment(-balance) });\r\n          console.log(` :  +${balance},  -${balance}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(balance)} (  )`\r\n        : `  :  ${formatCurrency(balance)}  (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_WITHDRAW;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (${formatCurrency(balance)}) -  `\r\n          : ` : ${name} ( ${formatCurrency(balance)}) -  `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          isEarlyCancellation: true,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument();\r\n      }\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      setUserDeposits(originalProducts.deposit);\r\n      setUserSavings(originalProducts.savings);\r\n      setUserLoans(originalProducts.loan);\r\n      setCurrentCash(originalCash);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleCancelEarly  ---\");\r\n    }\r\n  };\r\n\r\n  const handleParkingDeposit = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev + amount);\r\n\r\n    try {\r\n      //     (AuthContext deductCash )\r\n      const cashDeducted = await deductCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashDeducted) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n\r\n        if (parkingSnapshot.exists()) {\r\n          transaction.update(parkingRef, { balance: increment(amount) });\r\n        } else {\r\n          transaction.set(parkingRef, { balance: amount, lastInterestDate: serverTimestamp() });\r\n        }\r\n      });\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_DEPOSIT,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: -amount,\r\n        metadata: { parkingBalance: parkingBalance + amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleParkingWithdraw = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev - amount);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n        const currentParkingBalance = parkingSnapshot.data()?.balance ?? 0;\r\n\r\n        if (currentParkingBalance < amount) throw new Error(\"  .\");\r\n\r\n        transaction.update(parkingRef, { balance: increment(-amount) });\r\n      });\r\n\r\n      //    (AuthContext addCash )\r\n      const cashAdded = await addCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashAdded) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_WITHDRAW,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: amount,\r\n        metadata: { parkingBalance: parkingBalance - amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteSubscribedProduct = async (product) => {\r\n    if (!isAdmin()) {\r\n      displayMessage(\"  .\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`  (${product.name})  ?     .`)) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", product.id);\r\n      await deleteDoc(productRef);\r\n      displayMessage(\"  .\", \"success\");\r\n      loadAllData();\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(`  : ${error.message}`, \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div style={styles.container}>   ...</div>;\r\n  if (!user) return <div style={styles.container}> .</div>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/*   */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '10px',\r\n        marginBottom: '24px',\r\n        borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n        paddingBottom: '0',\r\n        position: 'relative'\r\n      }}>\r\n        <button\r\n          onClick={() => onViewChange && onViewChange('parking')}\r\n          style={{\r\n            padding: '12px 24px',\r\n            border: 'none',\r\n            background: activeView === 'parking' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '17px',\r\n            fontWeight: activeView === 'parking' ? '700' : '500',\r\n            color: activeView === 'parking' ? '#00fff2' : '#94a3b8',\r\n            borderBottom: `3px solid ${activeView === 'parking' ? '#00fff2' : 'transparent'}`,\r\n            marginBottom: '-2px',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n        >\r\n            \r\n        </button>\r\n        {isAdmin && isAdmin() && (\r\n          <>\r\n            <button\r\n              onClick={() => onViewChange && onViewChange('admin')}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'admin' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'admin' ? '700' : '500',\r\n                color: activeView === 'admin' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'admin' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (onViewChange) onViewChange('userProducts');\r\n                if (onLoadUserProducts) onLoadUserProducts();\r\n              }}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'userProducts' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'userProducts' ? '700' : '500',\r\n                color: activeView === 'userProducts' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'userProducts' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n                \r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {message && <div style={styles.message(messageType)}>{message}</div>}\r\n\r\n      {/*     */}\r\n      {activeView === 'userProducts' && isAdmin && isAdmin() && (\r\n        <div style={{\r\n          backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n          borderRadius: '16px',\r\n          padding: '32px',\r\n          boxShadow: '0 6px 20px rgba(0, 0, 0, 0.3)',\r\n          border: '1px solid rgba(255, 255, 255, 0.05)'\r\n        }}>\r\n          <h2 style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '16px', color: '#fff' }}>\r\n                 \r\n          </h2>\r\n          <p style={{ fontSize: '14px', color: '#94a3b8', marginBottom: '20px' }}>\r\n                       .\r\n          </p>\r\n\r\n          {allUserProducts.length === 0 ? (\r\n            <p style={{ textAlign: 'center', padding: '40px', color: '#94a3b8' }}>\r\n                .\r\n            </p>\r\n          ) : (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                  <tr style={{ backgroundColor: 'rgba(255, 255, 255, 0.05)', borderBottom: '2px solid rgba(255, 255, 255, 0.1)' }}>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>/</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allUserProducts.map((product, index) => {\r\n                    const typeLabel = product.type === 'deposit' ? '' :\r\n                      product.type === 'savings' ? '' :\r\n                        product.type === 'loan' ? '' : '';\r\n                    return (\r\n                      <tr key={`${product.userId}-${product.id}-${index}`} style={{ borderBottom: '1px solid rgba(255, 255, 255, 0.05)' }}>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.userName}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.name}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{typeLabel}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#00fff2' }}>{formatKoreanCurrency(product.balance || 0)}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.rate}%</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.termInDays}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>\r\n                          {product.maturityDate\r\n                            ? new Date(product.maturityDate).toLocaleDateString('ko-KR')\r\n                            : '-'}\r\n                        </td>\r\n                        <td style={{ padding: '12px' }}>\r\n                          <button\r\n                            onClick={() => onDeleteUserProduct && onDeleteUserProduct(product)}\r\n                            style={{\r\n                              ...styles.button(false, 'danger'),\r\n                              fontSize: '12px',\r\n                              padding: '6px 12px'\r\n                            }}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <div style={{ marginTop: '20px', textAlign: 'right', color: '#94a3b8', fontSize: '14px' }}>\r\n                 {allUserProducts.length} \r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {activeView === 'parking' && (\r\n        <div style={styles.grid}>\r\n          <ParkingAccountSection\r\n            balance={parkingBalance}\r\n            dailyInterest={parkingDailyInterest}\r\n            onDeposit={handleParkingDeposit}\r\n            onWithdraw={handleParkingWithdraw}\r\n            isProcessing={isProcessing}\r\n            userCash={currentCash}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.deposits}\r\n            subscribedProducts={userDeposits}\r\n            availableProducts={depositProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'deposits')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.savings}\r\n            subscribedProducts={userSavings}\r\n            availableProducts={installmentProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'savings')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.loans}\r\n            subscribedProducts={userLoans}\r\n            availableProducts={loanProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'loans')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n        </div>\r\n      )}\r\n      <SubscriptionModal\r\n        isOpen={modal.isOpen}\r\n        onClose={handleCloseModal}\r\n        product={modal.product}\r\n        onConfirm={handleSubscribe}\r\n        isProcessing={isProcessing}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParkingAccount;\r\n","// src/Banking.js - Tailwind UI \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ParkingAccount from \"./ParkingAccount\";\r\nimport { getBankingProducts, updateBankingProducts, db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs, collectionGroup, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Landmark, ChevronLeft, Save, Plus, Trash2 } from \"lucide-react\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\nconst convertAdminProductsToAccountFormat = (adminProducts) => {\r\n  if (!Array.isArray(adminProducts)) {\r\n    console.error(\r\n      \"convertAdminProductsToAccountFormat:   .\",\r\n      adminProducts\r\n    );\r\n    return [];\r\n  }\r\n  return adminProducts.map((product) => ({\r\n    id: product.id,\r\n    name: product.name,\r\n    dailyRate:\r\n      product.dailyRate !== undefined && !isNaN(product.dailyRate) ? parseFloat(product.dailyRate) : 0,\r\n    termInDays:\r\n      product.termInDays !== undefined && !isNaN(product.termInDays) ? parseInt(product.termInDays) : 1,\r\n    minAmount:\r\n      product.minAmount !== undefined && !isNaN(product.minAmount) ? parseInt(product.minAmount) : 0,\r\n    maxAmount:\r\n      product.maxAmount !== undefined && !isNaN(product.maxAmount) ? parseInt(product.maxAmount) : 0,\r\n  }));\r\n};\r\n\r\nimport \"./Banking.css\";\r\n\r\nconst Banking = () => {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [activeView, setActiveView] = useState(\"parking\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [parkingDepositProducts, setParkingDepositProducts] = useState([]);\r\n  const [parkingInstallmentProducts, setParkingInstallmentProducts] = useState(\r\n    []\r\n  );\r\n  const [parkingLoanProducts, setParkingLoanProducts] = useState([]);\r\n\r\n  //    \r\n  const [allUserProducts, setAllUserProducts] = useState([]);\r\n\r\n  //     \r\n  const loadAllUserProducts = async () => {\r\n    if (!auth?.userDoc?.classCode || !(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      //      \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", auth.userDoc.classCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      const userMap = {};\r\n      usersSnapshot.forEach((doc) => {\r\n        userMap[doc.id] = {\r\n          id: doc.id,\r\n          name: doc.data().name || doc.data().nickname || \"  \",\r\n          ...doc.data()\r\n        };\r\n      });\r\n\r\n      //  []     -   N+1  \r\n      const allProducts = [];\r\n      const userIds = Object.keys(userMap);\r\n\r\n      //   products   (  Promise.all )\r\n      const productPromises = userIds.map(async (userId) => {\r\n        const productsQuery = collection(db, \"users\", userId, \"products\");\r\n        const productsSnapshot = await getDocs(productsQuery);\r\n\r\n        return productsSnapshot.docs.map((productDoc) => {\r\n          const productData = productDoc.data();\r\n          return {\r\n            firestoreId: productDoc.id, //  Firestore  ID\r\n            userId: userId,\r\n            userName: userMap[userId].name,\r\n            ...productData,\r\n            maturityDate: productData.maturityDate?.toDate ? productData.maturityDate.toDate() : productData.maturityDate\r\n          };\r\n        });\r\n      });\r\n\r\n      //  Promise   \r\n      const productsArrays = await Promise.all(productPromises);\r\n\r\n      // 2D  1D  \r\n      productsArrays.forEach(productsArray => {\r\n        allProducts.push(...productsArray);\r\n      });\r\n\r\n      setAllUserProducts(allProducts);\r\n      console.log(\"   :\", allProducts);\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handleAdminDeleteUserProduct = async (product) => {\r\n    console.log(\" :\", product);\r\n\r\n    if (!(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      console.log(\"  \");\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${product.userName}' '${product.name}'   ?\\n    .`)) {\r\n      console.log(\"  \");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // firestoreId  ( Firestore  ID)\r\n      const productId = product.firestoreId || String(product.id);\r\n      console.log(\" :\", `users/${product.userId}/products/${productId}`);\r\n      console.log(\"  ID:\", productId);\r\n\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", productId);\r\n      console.log(\" ...\");\r\n      await deleteDoc(productRef);\r\n      console.log(\" \");\r\n\r\n      setMessage(\" .\");\r\n      setMessageType(\"success\");\r\n\r\n      //  \r\n      console.log(\"  ...\");\r\n      await loadAllUserProducts();\r\n      console.log(\"  \");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMessage(`   : ${error.message}`);\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const [formattedDepositProducts, setFormattedDepositProducts] = useState([]);\r\n  const [formattedInstallmentProducts, setFormattedInstallmentProducts] =\r\n    useState([]);\r\n  const [formattedLoanProducts, setFormattedLoanProducts] = useState([]);\r\n\r\n  // Firestore  \r\n  const loadAllData = async () => {\r\n    const classCode = auth?.userDoc?.classCode;\r\n    if (!classCode || classCode === '') {\r\n      console.warn(\"[Banking]        .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const bankingData = await getBankingProducts(classCode, true, 'Banking');\r\n\r\n      // deposits savings  ( )\r\n      if (bankingData.deposits) {\r\n        setParkingDepositProducts(bankingData.deposits);\r\n      } else {\r\n        setParkingDepositProducts([]);\r\n      }\r\n\r\n      // savings installments  ( )\r\n      if (bankingData.savings) {\r\n        setParkingInstallmentProducts(bankingData.savings);\r\n      } else {\r\n        setParkingInstallmentProducts([]);\r\n      }\r\n\r\n      // loans   ( )\r\n      if (bankingData.loans) {\r\n        setParkingLoanProducts(bankingData.loans);\r\n      } else {\r\n        setParkingLoanProducts([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"    .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth && !auth.loading && auth.user && auth.userDoc?.classCode) {\r\n      loadAllData();\r\n    } else if (auth && !auth.loading && !auth.user) {\r\n      setParkingSavingsProducts([]);\r\n      setParkingInstallmentProducts([]);\r\n      setParkingLoanProducts([]);\r\n    }\r\n  }, [auth?.user, auth?.loading, auth?.userDoc?.classCode]);\r\n\r\n  useEffect(() => {\r\n    setFormattedDepositProducts(\r\n      convertAdminProductsToAccountFormat(parkingDepositProducts)\r\n    );\r\n    setFormattedInstallmentProducts(\r\n      convertAdminProductsToAccountFormat(parkingInstallmentProducts)\r\n    );\r\n    setFormattedLoanProducts(\r\n      convertAdminProductsToAccountFormat(parkingLoanProducts)\r\n    );\r\n  }, [parkingDepositProducts, parkingInstallmentProducts, parkingLoanProducts]);\r\n\r\n  const handleParkingProductChange = (type, index, field, value) => {\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.map((product, i) => {\r\n      if (i === index) {\r\n        const updatedProduct = { ...product };\r\n        if (\r\n          field === \"termInDays\" ||\r\n          field === \"minAmount\" ||\r\n          field === \"maxAmount\"\r\n        ) {\r\n          const numValue = parseInt(value);\r\n          updatedProduct[field] =\r\n            isNaN(numValue) || numValue < (field === \"termInDays\" ? 1 : 0)\r\n              ? field === \"termInDays\"\r\n                ? 1\r\n                : 0\r\n              : numValue;\r\n        } else if (field === \"dailyRate\") {\r\n          const dailyRateValue = parseFloat(value);\r\n          updatedProduct.dailyRate =\r\n            isNaN(dailyRateValue) || dailyRateValue < 0 ? 0 : dailyRateValue;\r\n        } else if (field === \"name\") {\r\n          updatedProduct[field] = value;\r\n        }\r\n        return updatedProduct;\r\n      }\r\n      return product;\r\n    });\r\n    setProductsState(updatedProducts);\r\n  };\r\n\r\n  const saveParkingProducts = async (type) => {\r\n    if (!auth?.userDoc?.classCode) {\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      let products, firestoreType;\r\n\r\n      switch (type) {\r\n        case \"deposits\":\r\n          products = parkingDepositProducts;\r\n          firestoreType = \"deposits\"; // Firebase deposits \r\n          break;\r\n        case \"installments\":\r\n          products = parkingInstallmentProducts;\r\n          firestoreType = \"savings\"; // Firebase savings \r\n          break;\r\n        case \"loans\":\r\n          products = parkingLoanProducts;\r\n          firestoreType = \"loans\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      await updateBankingProducts(\r\n        auth.userDoc.classCode,\r\n        firestoreType,\r\n        products\r\n      );\r\n\r\n      setMessage(\r\n        `${type === \"deposits\"\r\n          ? \"\"\r\n          : type === \"installments\"\r\n            ? \"\"\r\n            : \"\"\r\n        }   .`\r\n      );\r\n      setMessageType(\"success\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(`${type}    :`, error);\r\n      setMessage(\"   .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addParkingProduct = (type) => {\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: ` ${type === \"deposits\"\r\n        ? \"\"\r\n        : type === \"installments\"\r\n          ? \"\"\r\n          : \"\"\r\n        } `,\r\n      dailyRate: 0.01,\r\n      termInDays: 365,\r\n      minAmount: type === \"loans\" ? 0 : 100000,\r\n      maxAmount: type === \"loans\" ? 1000000 : 0,\r\n    };\r\n\r\n    switch (type) {\r\n      case \"deposits\":\r\n        setParkingDepositProducts([...parkingDepositProducts, newProduct]);\r\n        break;\r\n      case \"installments\":\r\n        setParkingInstallmentProducts([\r\n          ...parkingInstallmentProducts,\r\n          newProduct,\r\n        ]);\r\n        break;\r\n      case \"loans\":\r\n        setParkingLoanProducts([...parkingLoanProducts, newProduct]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const deleteParkingProduct = async (type, indexToDelete) => {\r\n    if (isLoading) return; //   \r\n\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.filter(\r\n      (_, index) => index !== indexToDelete\r\n    );\r\n    setProductsState(updatedProducts);\r\n\r\n    //    \r\n    if (auth?.userDoc?.classCode) {\r\n      setIsLoading(true);\r\n      try {\r\n        const firestoreType =\r\n          type === \"deposits\"\r\n            ? \"deposits\"\r\n            : type === \"installments\"\r\n              ? \"savings\"\r\n              : \"loans\";\r\n        await updateBankingProducts(\r\n          auth.userDoc.classCode,\r\n          firestoreType,\r\n          updatedProducts\r\n        );\r\n        setMessage(\" .\");\r\n        setMessageType(\"info\");\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(\"\");\r\n        }, 2000);\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        setMessage(\"   .\");\r\n        setMessageType(\"error\");\r\n        //         ()\r\n        setProductsState(productsState);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (auth.loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/*   */}\r\n      {isLoading && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <AlchanLoading />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"px-4 py-6 sm:px-6\">\r\n        {/*   */}\r\n        <PageHeader\r\n          title=\"  \"\r\n          subtitle=\", ,   \"\r\n          icon={Landmark}\r\n          backButton={\r\n            <ActionButton\r\n              variant=\"ghost\"\r\n              icon={ChevronLeft}\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              \r\n            </ActionButton>\r\n          }\r\n        />\r\n\r\n        {/*   */}\r\n        {message && (\r\n          <div className={`mb-4 p-4 rounded-xl ${messageType === 'error'\r\n            ? 'bg-red-900/40 text-red-200 border border-red-800/50'\r\n            : messageType === 'success'\r\n              ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-800/50'\r\n              : 'bg-blue-900/40 text-blue-200 border border-blue-800/50'\r\n            }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className={activeView === \"admin\" ? \"content-box\" : \"\"}>\r\n          {(activeView === \"parking\" || activeView === \"userProducts\") && (\r\n            <ParkingAccount\r\n              auth={auth}\r\n              depositProducts={formattedDepositProducts}\r\n              installmentProducts={formattedInstallmentProducts}\r\n              loanProducts={formattedLoanProducts}\r\n              activeView={activeView}\r\n              onViewChange={setActiveView}\r\n              onLoadUserProducts={loadAllUserProducts}\r\n              allUserProducts={allUserProducts}\r\n              onDeleteUserProduct={handleAdminDeleteUserProduct}\r\n              isLoading={isLoading}\r\n            />\r\n          )}\r\n          {activeView === \"admin\" &&\r\n            auth.user &&\r\n            (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\") && (\r\n              <div>\r\n                <h2 className=\"admin-header\">\r\n                   -    (  )\r\n                </h2>\r\n                {/* Savings Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingDepositProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.01\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"deposits\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"deposits\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"deposits\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Installment Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingInstallmentProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.011\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"installments\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"installments\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"installments\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Loan Products */}\r\n                <div className=\"admin-section\" style={{ borderBottom: \"none\" }}>\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingLoanProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.05\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.maxAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"maxAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"loans\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"loans\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"loans\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {activeView === \"admin\" &&\r\n            !(\r\n              auth.user &&\r\n              (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")\r\n            ) && (\r\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800\">\r\n                  .\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default Banking;","// src/components/AvatarEditor.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"./Avatar\";\r\nimport {\r\n  getAvatarConfig,\r\n  saveAvatarConfig,\r\n  getAvatarOptions,\r\n  isHairstyleCompatible,\r\n  AVATAR_CATEGORIES,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *    \r\n */\r\nexport default function AvatarEditor({ isOpen, onClose, userId, onSave }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"skinTone\");\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      const savedConfig = getAvatarConfig(userId);\r\n      setConfig(savedConfig);\r\n      setHasChanges(false);\r\n    }\r\n  }, [isOpen, userId]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const currentOptions = getAvatarOptions(selectedCategory);\r\n\r\n  const handleOptionSelect = (optionId) => {\r\n    const newConfig = { ...config, [selectedCategory]: optionId };\r\n\r\n    //   \r\n    if (selectedCategory === \"faceShape\") {\r\n      if (!isHairstyleCompatible(config.hairstyle, optionId)) {\r\n        //     \r\n        newConfig.hairstyle = \"short\";\r\n      }\r\n    }\r\n\r\n    setConfig(newConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    saveAvatarConfig(userId, config);\r\n    setHasChanges(false);\r\n    if (onSave) onSave(config);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setConfig({ ...DEFAULT_AVATAR });\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleRandomize = () => {\r\n    const randomConfig = {};\r\n    AVATAR_CATEGORIES.forEach(cat => {\r\n      const options = getAvatarOptions(cat.id);\r\n      if (options.length > 0) {\r\n        const randomIndex = Math.floor(Math.random() * options.length);\r\n        randomConfig[cat.id] = options[randomIndex].id;\r\n      }\r\n    });\r\n    setConfig(randomConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  //    \r\n  const getCurrentValue = () => config[selectedCategory];\r\n\r\n  //  \r\n  const renderOptionItem = (option) => {\r\n    const isSelected = getCurrentValue() === option.id;\r\n\r\n    //   \r\n    const isIncompatible = selectedCategory === \"hairstyle\" &&\r\n      !isHairstyleCompatible(option.id, config.faceShape);\r\n\r\n    return (\r\n      <button\r\n        key={option.id}\r\n        onClick={() => !isIncompatible && handleOptionSelect(option.id)}\r\n        disabled={isIncompatible}\r\n        style={{\r\n          padding: \"12px\",\r\n          borderRadius: \"12px\",\r\n          border: isSelected ? \"3px solid #a78bfa\" : \"2px solid #374151\",\r\n          background: isSelected\r\n            ? \"linear-gradient(135deg, #a78bfa20 0%, #8b5cf620 100%)\"\r\n            : \"#1f2937\",\r\n          cursor: isIncompatible ? \"not-allowed\" : \"pointer\",\r\n          opacity: isIncompatible ? 0.4 : 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          gap: \"6px\",\r\n          minWidth: \"70px\",\r\n          transition: \"all 0.2s\",\r\n        }}\r\n      >\r\n        {/*   */}\r\n        {option.color && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: option.color,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n              boxShadow: isSelected ? `0 0 10px ${option.color}` : \"none\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*   */}\r\n        {option.gradient && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              background: `linear-gradient(135deg, ${option.gradient.join(\", \")})`,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*  - SVG  */}\r\n        {selectedCategory === \"faceShape\" && option.path && (\r\n          <div style={{ width: \"36px\", height: \"36px\" }}>\r\n            <svg viewBox=\"0 0 100 100\" width=\"36\" height=\"36\">\r\n              <path\r\n                d={option.path}\r\n                fill=\"#F5DEB3\"\r\n                stroke={isSelected ? \"#a78bfa\" : \"#666\"}\r\n                strokeWidth=\"2\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n        {/*    */}\r\n        {option.icon && selectedCategory !== \"faceShape\" && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"24px\",\r\n            }}\r\n          >\r\n            {option.icon}\r\n          </div>\r\n        )}\r\n        {/*  ( ) - , , path, icon    */}\r\n        {!option.color && !option.gradient && !option.path && !option.icon && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"20px\",\r\n              color: \"#e8e8ff\",\r\n            }}\r\n          >\r\n            {option.id === \"none\" ? \"\" : \"\"}\r\n          </div>\r\n        )}\r\n        <span\r\n          style={{\r\n            fontSize: \"11px\",\r\n            color: isSelected ? \"#a78bfa\" : \"#9ca3af\",\r\n            fontWeight: isSelected ? \"600\" : \"400\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          {option.name}\r\n        </span>\r\n        {isIncompatible && (\r\n          <span style={{ fontSize: \"9px\", color: \"#ef4444\" }}>\r\n            \r\n          </span>\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.85)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 2000,\r\n        padding: \"10px\",\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"20px\",\r\n          maxWidth: \"600px\",\r\n          width: \"100%\",\r\n          maxHeight: \"90vh\",\r\n          overflowY: \"auto\",\r\n          border: \"2px solid #a78bfa40\",\r\n          boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          <h2\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"20px\",\r\n              fontWeight: \"700\",\r\n              color: \"#e8e8ff\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"10px\",\r\n            }}\r\n          >\r\n            <span style={{ fontSize: \"24px\" }}></span>\r\n             \r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: \"transparent\",\r\n              border: \"none\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"24px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginBottom: \"16px\",\r\n            padding: \"16px\",\r\n            background: \"linear-gradient(135deg, #11182750 0%, #1f293750 100%)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid #374151\",\r\n          }}\r\n        >\r\n          <div style={{ position: \"relative\" }}>\r\n            <Avatar key={JSON.stringify(config)} config={config} size={150} />\r\n            {/*   */}\r\n            <button\r\n              onClick={handleRandomize}\r\n              style={{\r\n                position: \"absolute\",\r\n                bottom: \"-10px\",\r\n                right: \"-10px\",\r\n                width: \"40px\",\r\n                height: \"40px\",\r\n                borderRadius: \"50%\",\r\n                background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\r\n                border: \"none\",\r\n                fontSize: \"20px\",\r\n                cursor: \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.4)\",\r\n              }}\r\n              title=\" \"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"6px\",\r\n            overflowX: \"auto\",\r\n            overflowY: \"hidden\",\r\n            paddingBottom: \"12px\",\r\n            marginBottom: \"12px\",\r\n            WebkitOverflowScrolling: \"touch\",\r\n            scrollbarWidth: \"thin\",\r\n            msOverflowStyle: \"auto\",\r\n          }}\r\n        >\r\n          {AVATAR_CATEGORIES.map((cat) => (\r\n            <button\r\n              key={cat.id}\r\n              onClick={() => setSelectedCategory(cat.id)}\r\n              style={{\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"10px\",\r\n                border: selectedCategory === cat.id ? \"2px solid #a78bfa\" : \"2px solid transparent\",\r\n                background:\r\n                  selectedCategory === cat.id\r\n                    ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                    : \"#374151\",\r\n                color: selectedCategory === cat.id ? \"#fff\" : \"#9ca3af\",\r\n                fontSize: \"12px\",\r\n                fontWeight: \"600\",\r\n                cursor: \"pointer\",\r\n                whiteSpace: \"nowrap\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"6px\",\r\n                transition: \"all 0.2s\",\r\n                minWidth: \"fit-content\",\r\n              }}\r\n            >\r\n              {/*    */}\r\n              <span\r\n                style={{\r\n                  width: \"14px\",\r\n                  height: \"14px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: cat.icon,\r\n                  border: \"2px solid rgba(255,255,255,0.3)\",\r\n                  flexShrink: 0,\r\n                }}\r\n              />\r\n              <span>{cat.name}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fill, minmax(70px, 1fr))\",\r\n            gap: \"8px\",\r\n            maxHeight: \"200px\",\r\n            overflowY: \"auto\",\r\n            padding: \"8px\",\r\n            background: \"#11182750\",\r\n            borderRadius: \"12px\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          {currentOptions.map(renderOptionItem)}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"10px\",\r\n            justifyContent: \"flex-end\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleReset}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              borderRadius: \"10px\",\r\n              border: \"1px solid #374151\",\r\n              background: \"transparent\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"14px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!hasChanges}\r\n            style={{\r\n              padding: \"10px 24px\",\r\n              borderRadius: \"10px\",\r\n              border: \"none\",\r\n              background: hasChanges\r\n                ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                : \"#374151\",\r\n              color: hasChanges ? \"#fff\" : \"#6b7280\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"600\",\r\n              cursor: hasChanges ? \"pointer\" : \"not-allowed\",\r\n              boxShadow: hasChanges ? \"0 4px 15px rgba(139, 92, 246, 0.4)\" : \"none\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function AvatarProfileCard({ userId, userName, netAssets, onEditClick }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setConfig(getAvatarConfig(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"20px\",\r\n        padding: \"20px\",\r\n        border: \"2px solid #a78bfa40\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"16px\",\r\n      }}\r\n    >\r\n      {/*  */}\r\n      <div style={{ position: \"relative\" }}>\r\n        <Avatar config={config} size={100} />\r\n        <button\r\n          onClick={onEditClick}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: \"-5px\",\r\n            right: \"-5px\",\r\n            width: \"32px\",\r\n            height: \"32px\",\r\n            borderRadius: \"50%\",\r\n            background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n            border: \"2px solid #1a1a2e\",\r\n            fontSize: \"14px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n          title=\" \"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      {/*  */}\r\n      <div style={{ flex: 1 }}>\r\n        <div\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            color: \"#e8e8ff\",\r\n            marginBottom: \"8px\",\r\n          }}\r\n        >\r\n          {userName}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontSize: \"13px\",\r\n            color: \"#9ca3af\",\r\n          }}\r\n        >\r\n          : {Number(netAssets || 0).toLocaleString()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/pages/my-profile/MyProfile.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { verifyClassCode, db } from \"../../firebase\";\r\nimport { doc, updateDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { updatePassword, EmailAuthProvider, reauthenticateWithCredential, deleteUser } from \"firebase/auth\";\r\nimport Avatar from \"../../components/Avatar\";\r\nimport AvatarEditor from \"../../components/AvatarEditor\";\r\nimport { getAvatarConfig } from \"../../utils/avatarSystem\";\r\nimport { getLevelInfo, LEVEL_THRESHOLDS } from \"../../utils/levelSystem\";\r\nimport { getUserAchievements, getAchievementById } from \"../../utils/achievementSystem\";\r\nimport { StreakDisplay, StreakRewardInfo } from \"../../components/DailyReward\";\r\nimport { formatKoreanCurrency } from \"../../utils/numberFormatter\";\r\nimport { User, Key, Building2, Trash2, LogOut, Settings, ChevronRight } from \"lucide-react\";\r\n\r\nexport default function MyProfile() {\r\n  const { user, userDoc, logout } = useAuth();\r\n  const userId = user?.uid;\r\n  const userName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n  const [achievements, setAchievements] = useState([]);\r\n\r\n  //    \r\n  const [showNicknameModal, setShowNicknameModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showClassCodeModal, setShowClassCodeModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\r\n  //  \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //  \r\n  const cash = Number(userDoc?.cash) || 0;\r\n  const stockValue = Number(userDoc?.stockValue) || 0;\r\n  const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n  const itemValue = Number(userDoc?.itemValue) || 0;\r\n  const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n\r\n  //  \r\n  const levelInfo = getLevelInfo(netAssets);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setAvatarConfig(getAvatarConfig(userId));\r\n      setAchievements(getUserAchievements(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleAvatarSave = (newConfig) => {\r\n    setAvatarConfig(newConfig);\r\n  };\r\n\r\n  //  \r\n  const resetModals = () => {\r\n    setNewNickname(\"\");\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n    setNewClassCode(\"\");\r\n    setDeleteConfirmText(\"\");\r\n    setError(\"\");\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = async () => {\r\n    if (!newNickname.trim()) {\r\n      setError(\" .\");\r\n      return;\r\n    }\r\n    if (newNickname.length < 2 || newNickname.length > 10) {\r\n      setError(\" 2~10  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { nickname: newNickname.trim() });\r\n      alert(\" .\");\r\n      setShowNicknameModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"  .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      setError(\"  6  .\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n      await reauthenticateWithCredential(user, credential);\r\n      await updatePassword(user, newPassword);\r\n      alert(\" .\");\r\n      setShowPasswordModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      if (err.code === \"auth/wrong-password\") {\r\n        setError(\"   .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleChangeClassCode = async () => {\r\n    if (!newClassCode.trim()) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(newClassCode.trim());\r\n      if (!isValid) {\r\n        setError(\"   .\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { classCode: newClassCode.trim() });\r\n      alert(\"  .\");\r\n      setShowClassCodeModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"   .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    if (deleteConfirmText !== \"\") {\r\n      setError(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Firestore   \r\n      const userRef = doc(db, \"users\", userId);\r\n      await deleteDoc(userRef);\r\n\r\n      // Firebase Auth  \r\n      await deleteUser(user);\r\n\r\n      alert(\" .\");\r\n    } catch (err) {\r\n      if (err.code === \"auth/requires-recent-login\") {\r\n        setError(\"     .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     (legendary > epic > rare > common)\r\n  const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n  const sortedAchievements = [...achievements].sort((a, b) => {\r\n    const achA = getAchievementById(a.id);\r\n    const achB = getAchievementById(b.id);\r\n    return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n  });\r\n\r\n  //   (  )\r\n  const bestAchievement = sortedAchievements.length > 0\r\n    ? getAchievementById(sortedAchievements[0].id)\r\n    : null;\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <p className=\"text-gray-400\"> .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\r\n        {/*   */}\r\n        <h1 style={{\r\n          fontSize: \"28px\",\r\n          fontWeight: \"800\",\r\n          background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n          WebkitBackgroundClip: \"text\",\r\n          WebkitTextFillColor: \"transparent\",\r\n          marginBottom: \"24px\",\r\n        }}>\r\n           \r\n        </h1>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n          borderRadius: \"24px\",\r\n          padding: \"32px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n          boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.4)\",\r\n        }}>\r\n          <div style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            gap: \"24px\",\r\n          }}>\r\n            {/*  */}\r\n            <div style={{ position: \"relative\" }}>\r\n              <Avatar config={avatarConfig} size={180} />\r\n              <button\r\n                onClick={() => setShowAvatarEditor(true)}\r\n                style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"5px\",\r\n                  right: \"5px\",\r\n                  width: \"44px\",\r\n                  height: \"44px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"3px solid #1a1a2e\",\r\n                  fontSize: \"18px\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 15px rgba(167, 139, 250, 0.4)\",\r\n                }}\r\n                title=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <h2 style={{\r\n                fontSize: \"24px\",\r\n                fontWeight: \"700\",\r\n                color: \"#e8e8ff\",\r\n                marginBottom: \"8px\",\r\n              }}>\r\n                {userName}\r\n              </h2>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                display: \"inline-flex\",\r\n                alignItems: \"center\",\r\n                gap: \"8px\",\r\n                padding: \"8px 16px\",\r\n                background: `linear-gradient(135deg, ${levelInfo.color}20 0%, ${levelInfo.color}10 100%)`,\r\n                border: `2px solid ${levelInfo.color}`,\r\n                borderRadius: \"20px\",\r\n                marginBottom: \"12px\",\r\n              }}>\r\n                <span style={{ fontSize: \"20px\" }}>{levelInfo.icon}</span>\r\n                <span style={{ color: levelInfo.color, fontWeight: \"700\", fontSize: \"14px\" }}>\r\n                  Lv.{levelInfo.level} {levelInfo.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/*   */}\r\n              {bestAchievement && (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"8px\",\r\n                  marginTop: \"8px\",\r\n                }}>\r\n                  <span style={{ fontSize: \"18px\" }}>{bestAchievement.icon}</span>\r\n                  <span style={{\r\n                    color: bestAchievement.rarity === \"legendary\" ? \"#f59e0b\" :\r\n                           bestAchievement.rarity === \"epic\" ? \"#a78bfa\" :\r\n                           bestAchievement.rarity === \"rare\" ? \"#3b82f6\" : \"#9ca3af\",\r\n                    fontWeight: \"600\",\r\n                    fontSize: \"13px\"\r\n                  }}>\r\n                    {bestAchievement.name}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{ marginTop: \"12px\" }}>\r\n                <StreakDisplay userId={userId} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>  \r\n          </h3>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>\r\n                {levelInfo.icon} Lv.{levelInfo.level} {levelInfo.title}\r\n              </span>\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", fontWeight: \"600\" }}>\r\n                {levelInfo.progress.toFixed(1)}%\r\n              </span>\r\n            </div>\r\n            <div style={{\r\n              height: \"12px\",\r\n              background: \"#374151\",\r\n              borderRadius: \"6px\",\r\n              overflow: \"hidden\",\r\n            }}>\r\n              <div style={{\r\n                width: `${levelInfo.progress}%`,\r\n                height: \"100%\",\r\n                background: `linear-gradient(90deg, ${levelInfo.color} 0%, ${levelInfo.color}99 100%)`,\r\n                borderRadius: \"6px\",\r\n                transition: \"width 0.5s ease\",\r\n              }} />\r\n            </div>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginTop: \"8px\",\r\n              fontSize: \"12px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n              <span>: {formatKoreanCurrency(netAssets)}</span>\r\n              {levelInfo.level < LEVEL_THRESHOLDS.length - 1 && (\r\n                <span>: {formatKoreanCurrency(LEVEL_THRESHOLDS[levelInfo.level + 1]?.minAssets || 0)}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>   ({achievements.length})\r\n          </h3>\r\n\r\n          {achievements.length === 0 ? (\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              padding: \"32px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n                 .\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"repeat(auto-fill, minmax(140px, 1fr))\",\r\n              gap: \"12px\",\r\n            }}>\r\n              {sortedAchievements.map((ach) => {\r\n                const achievement = getAchievementById(ach.id);\r\n                if (!achievement) return null;\r\n\r\n                const rarityColors = {\r\n                  legendary: { bg: \"#f59e0b20\", border: \"#f59e0b\", text: \"#f59e0b\" },\r\n                  epic: { bg: \"#a78bfa20\", border: \"#a78bfa\", text: \"#a78bfa\" },\r\n                  rare: { bg: \"#3b82f620\", border: \"#3b82f6\", text: \"#3b82f6\" },\r\n                  common: { bg: \"#6b728020\", border: \"#6b7280\", text: \"#9ca3af\" },\r\n                };\r\n                const colors = rarityColors[achievement.rarity] || rarityColors.common;\r\n\r\n                return (\r\n                  <div\r\n                    key={ach.id}\r\n                    style={{\r\n                      background: colors.bg,\r\n                      border: `2px solid ${colors.border}`,\r\n                      borderRadius: \"12px\",\r\n                      padding: \"16px\",\r\n                      textAlign: \"center\",\r\n                      transition: \"all 0.2s\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: \"32px\", marginBottom: \"8px\" }}>\r\n                      {achievement.icon}\r\n                    </div>\r\n                    <div style={{\r\n                      color: colors.text,\r\n                      fontSize: \"12px\",\r\n                      fontWeight: \"600\",\r\n                      marginBottom: \"4px\",\r\n                    }}>\r\n                      {achievement.name}\r\n                    </div>\r\n                    <div style={{\r\n                      color: \"#6b7280\",\r\n                      fontSize: \"10px\",\r\n                    }}>\r\n                      {new Date(ach.unlockedAt).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        <StreakRewardInfo />\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <Settings size={20} />  \r\n          </h3>\r\n\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n            {/*     */}\r\n            <div style={{\r\n              padding: \"16px\",\r\n              background: \"#0f0f23\",\r\n              borderRadius: \"12px\",\r\n              border: \"1px solid #374151\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>  </span>\r\n                <span style={{ color: \"#e8e8ff\", fontSize: \"16px\", fontWeight: \"600\" }}>\r\n                  {userDoc?.classCode || \"\"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowNicknameModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <User size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowPasswordModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Key size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*    */}\r\n            <button\r\n              onClick={() => { setShowClassCodeModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Building2 size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}>  </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*  */}\r\n            <button\r\n              onClick={logout}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                marginTop: \"8px\",\r\n              }}\r\n            >\r\n              <LogOut size={20} style={{ color: \"#9ca3af\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}></span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowDeleteModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"rgba(239, 68, 68, 0.1)\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid rgba(239, 68, 68, 0.3)\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Trash2 size={20} style={{ color: \"#ef4444\" }} />\r\n              <span style={{ color: \"#ef4444\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#ef4444\" }} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <AvatarEditor\r\n        isOpen={showAvatarEditor}\r\n        onClose={() => setShowAvatarEditor(false)}\r\n        userId={userId}\r\n        onSave={handleAvatarSave}\r\n      />\r\n\r\n      {/*    */}\r\n      {showNicknameModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowNicknameModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={e => setNewNickname(e.target.value)}\r\n              placeholder=\"  (2~10)\"\r\n              maxLength={10}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowNicknameModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeNickname}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showPasswordModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowPasswordModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              onChange={e => setCurrentPassword(e.target.value)}\r\n              placeholder=\" \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={e => setNewPassword(e.target.value)}\r\n              placeholder=\"  (6 )\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={e => setConfirmPassword(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowPasswordModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangePassword}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {showClassCodeModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowClassCodeModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\" }}>\r\n               : <span style={{ color: \"#a78bfa\", fontWeight: \"600\" }}>{userDoc?.classCode || \"\"}</span>\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCode}\r\n              onChange={e => setNewClassCode(e.target.value.toUpperCase())}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowClassCodeModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeClassCode}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showDeleteModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowDeleteModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #ef4444\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#ef4444\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"16px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\", lineHeight: 1.6 }}>\r\n                      .\r\n                 <span style={{ color: \"#ef4444\", fontWeight: \"600\" }}>''</span> .\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={e => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #ef4444\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowDeleteModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleDeleteAccount}\r\n                disabled={isLoading || deleteConfirmText !== \"\"}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: deleteConfirmText === \"\" ? \"#ef4444\" : \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: (isLoading || deleteConfirmText !== \"\") ? \"not-allowed\" : \"pointer\",\r\n                  opacity: (isLoading || deleteConfirmText !== \"\") ? 0.5 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport MyAssets from '../pages/my-assets/MyAssets';\r\nimport PersonalShop from '../pages/market/PersonalShop';\r\nimport Login from '../pages/auth/Login';\r\nimport Banking from '../pages/banking/Banking';\r\nimport MyProfile from '../pages/my-profile/MyProfile';\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminPage = lazy(() => import('../pages/admin/AdminPage'));\r\nconst AdminPanel = lazy(() => import('../pages/admin/AdminPanel'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  // Jua  \r\n  useEffect(() => {\r\n    const link = document.createElement('link');\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Jua&display=swap';\r\n    link.rel = 'stylesheet';\r\n    document.head.appendChild(link);\r\n    return () => {\r\n      if (document.head.contains(link)) {\r\n        document.head.removeChild(link);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/task-management\" element={<AdminRoute><Dashboard adminTabMode=\"taskManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/salary-settings\" element={<AdminRoute><Dashboard adminTabMode=\"salarySettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/app-management\" element={<AdminRoute><Dashboard adminTabMode=\"appManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/page\" element={<AdminRoute><AdminPage /></AdminRoute>} />\r\n            <Route path=\"/admin-panel\" element={<AdminRoute><AdminPanel onClose={() => navigate(-1)} classCode={userClassCode} /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","console","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","modalBackdropStyle","position","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","modalContainerStyle","padding","borderRadius","maxWidth","width","maxHeight","overflowY","boxShadow","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","style","onClick","e","stopPropagation","fontSize","fontWeight","marginBottom","color","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","border","outline","disabled","required","margin","borderLeft","calculateValue","gap","marginTop","cursor","transition","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","modalOverlayStyle","tableStyles","table","borderCollapse","overflow","thead","th","textAlign","borderBottom","td","tr","emptyContainer","flexDirection","emptyIcon","processDonationData","log","studentsCount","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","marginLeft","background","lineHeight","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","verticalAlign","borderTop","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","resize","minHeight","alert","normalizeType","cache","getCacheKey","concat","JSON","stringify","getFromCache","key","cached","Date","now","timestamp","delete","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","where","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","limit","q","query","collection","db","snapshot","getDocs","logs","doc","_data$timestamp","toDate","normalizedFilterType","hasMore","paginatedLogs","slice","newLastDoc","AdminDatabase","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","trim","useCache","userIds","m","transactions","userIdsCount","warn","batches","i","allTransactions","batch","_data$timestamp3","getTransactionsData","tx","description","includes","metadata","category","convertTransactionsToLogs","prev","handleLoadMore","getActivityTypeColor","typeStr","toString","toLowerCase","formatDate","date","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","some","member","handleRefresh","keysToDelete","startsWith","clearClassCache","info","typeCounts","typeExamples","entries","count","filters","_log$type","_log$description","desc","t","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","_ref2","filterName","filterFunc","matchedLogs","matchedTypes","size","join","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","title","activity","reason","itemName","quantity","couponAmount","PageContainer","PageHeader","subtitle","icon","Icon","badge","action","backButton","LoadingState","_ref4","EmptyState","_ref6","ActionButton","_ref1","variant","primary","secondary","danger","success","ghost","indigo","sm","md","lg","Loader2","iconCollection","styles","container","fontFamily","card","header","tabs","tab","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","label","input","boxSizing","textarea","gridTwo","gridTemplateColumns","iconSelector","selectedIcon","height","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","borderColor","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","editingItemFromStore","onAddItem","onUpdateItem","onClose","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","item","setItem","price","stock","initialStock","available","priceIncreasePercentage","handleChange","checked","handleTabClick","tabName","isEditing","itemData","parseFloat","handleIconSelect","onMouseEnter","transform","onMouseLeave","step","formatKoreanNumber","number","unit","num","replace","isNegative","units","resultParts","remaining","Math","abs","quotient","floor","maximumFractionDigits","formatKoreanCurrency","ItemContext","createContext","useItems","context","useContext","items","userItems","marketListings","marketOffers","addItem","purchaseItem","updateItem","deleteItem","useItem","updateUserItemQuantity","listItemForSale","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","refreshData","ItemProvider","isAdmin","isAuthAdmin","authLoading","deductCash","addCash","optimisticUpdate","currentUserClassCode","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","getItemContextData","useMemo","httpsCallable","functions","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","Error","storeItems","groupedUserItems","updateLocalUserItems","newUserItems","tempId","tempNewItem","newItemData","prevItems","token","getIdToken","functionUrl","response","fetch","method","headers","body","ok","errorText","text","status","json","itemId","updatesToApply","code","itemToPurchase","totalPrice","cash","newUserItem","random","durationMs","purchasedAt","originalUserItems","originalStock","originalPrice","existingIndex","findIndex","updated","restocked","newStock","newPrice","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","quantityToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","_ref3","offerId","quantityChange","contextValue","Provider","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","toISOString","serverTimestamp","createdAt","docRef","addDoc","logId","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","LayoutDashboard","path","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","isSubGroup","ListTodo","Briefcase","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","MenuItem","active","hasSubmenu","ChevronDown","SubMenuItem","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","isOpen","isCollapsed","location","useLocation","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","isActive","pathname","handleItemClick","handleLogout","isSuperAdmin","userRole","renderMenuSection","categoryKey","childItems","child","charAt","textShadow","letterSpacing","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","FONT_SIZES","Bell","handleNotificationToggle","newValue","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","paths","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","getAvatarConfig","saved","parse","_unused","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","darkenColor","hex","percent","r","g","padStart","Avatar","config","showBorder","avatarConfig","f","o","noseColor","borderStyle","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","p","viewBoxY","viewBoxHeight","LEVEL_THRESHOLDS","level","minAssets","getLevelInfo","netAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","ACHIEVEMENTS","FIRST_THOUSAND","condition","stats","totalAssets","rarity","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","coupons","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","getAchievementById","achievementId","values","getUserAchievements","stored","formatMoney","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","setAvatarConfig","handleAvatarChange","detail","levelInfo","stockValue","realEstateValue","itemValue","bestAchievement","achievements","rarityOrder","legendary","epic","rare","common","sorted","achA","achB","handleClickOutside","event","contains","document","Gift","ChevronLeft","whiteSpace","ref","paddingLeft","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","Trash2","maxLength","autoFocus","trimmed","toUpperCase","verifyClassCode","SettingsPanel","Home","MobileNav","isTabActive","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","handleBeforeInstall","handleDismiss","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","vibrate","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","taskInfoStyle","flexGrow","minWidth","taskNameStyle","textOverflow","taskActionsStyle","flexShrink","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","selectedCardStyle","cardInnerStyle","cardFrontStyle","cardBackStyle","cardBackVisibleStyle","pointerEvents","content","borderWidth","animation","perspective","transformStyle","backfaceVisibility","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","marginRight","tasks","TaskItem","CommonTaskList","TransferModal","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","inputStyle","selectStyle","labelStyle","buttonStyle","primaryButtonStyle","secondaryButtonStyle","nameA","substring","nameB","createOptimizedFunction","functionName","fn","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","maxAge","backup","parsed","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","toLocaleTimeString","health","totalUsers","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","seconds","errorLogs","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","history","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","studentsQuery","useOptimizedStudents","useQuery","queryKey","staleTime","cacheTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","studentIds","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","updatedAt","handleSaveSalarySettings","taxRateNum","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","firebaseGetDocs","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","usersRef","queryRef","firebaseQuery","firebaseWhere","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","docSnap","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","writeBatch","stockRef","commit","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","formatLastSalaryDate","getFullYear","getMonth","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","handleToggleStudentSelection","Boolean","toLocaleDateString","handleEditStudentJobs","products","product","SystemMonitoring","handleToggleJobSelection","prevStudents","STREAK_REWARDS","STREAK_BONUS_AFTER_10","getStreakInfo","today","toDateString","lastLogin","yesterday","isNewDay","canClaim","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","DailyRewardBanner","_rewardResult$reward","onClaim","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","nextDay","nextReward","isBigReward","newStreak","isMilestone","handleClaim","newData","claimDailyReward","StreakDisplay","currentStreak","StreakRewardInfo","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","adminTabMode","setUserDoc","refreshUserDocument","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","showDailyRewardPopup","setShowDailyRewardPopup","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","handleDailyRewardClaim","rewardAmount","updateDoc","increment","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","firestoreCollection","substr","setupPolling","pollData","jobsQuery","loadedJobs","docs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","userNickname","RotateCcw","JobList","AdminSettingsModal","StockBadge","badgeClass","ItemStore","setAdminPriceIncrease","adminPriceIncreasePercentage","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","availableItems","_item$initialStock","initialQuantities","checkMobile","getButtonText","currentUserCash","canOpenAdminPanel","AdminItemPage","updatedItemData","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","recentlyUsedItems","setRecentlyUsedItems","itemsChanged","updatedItems","_itemData$itemDetails","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","defaultPrice","handleOpenSellToMarketModal","remainingToUse","sortedDocs","amountToUse","classmate","c","recipientName","","","","","UID","inventoryRef","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","assign","catch","React","MyAssets","updateUserInAuth","addCashToUserById","assetsLoading","setAssetsLoading","loadingRef","parkingBalance","setParkingBalance","deposits","setDeposits","savings","setSavings","loans","setLoans","realEstateAssets","setRealEstateAssets","totalNetAssets","setTotalNetAssets","goalDonations","setGoalDonations","transactionHistory","setTransactionHistory","forceReload","setForceReload","CACHE_DURATION","settingsData","loadCouponValueFromSettings","goalProgress","setGoalProgress","myContribution","setMyContribution","goalAchieved","setGoalAchieved","isResettingGoal","setIsResettingGoal","showAllTransactions","setShowAllTransactions","getCachedFirestoreData","setCachedFirestoreData","cacheItem","createDefaultGoalForClass","goalId","goalDocRef","defaultGoalData","donationCount","createdBy","goalDoc","existingData","loadGoalData","cachedData","myTotal","goalDocSnap","goalData","processedTimestamp","timestampISO","loadMyAssetsData","realEstateRef1","realEstateRef2","realEstateRef3","snap1","snap2","snap3","allRealEstateAssets","parkingRef1","parkingRef2","parkingSnap1","parkingSnap2","totalParkingBalance","balance","productsRef","productsSnap","depositsData","savingsData","loansData","_docSnap$data$maturit","maturityDate","transactionsData","activityLogsRef","source","activityError","transactionsRef","transactionsError","_a$timestamp","_a$timestamp2","_b$timestamp","_b$timestamp2","dateA","fallbackError","cashValue","couponMonetaryValue","asset","depositsTotal","deposit","savingsTotal","saving","loanTotal","loan","remainingPrincipal","calculatedTotalAssets","AlchanLoading","paddingBottom","rewardType","renderAssetSummary","displayCash","displayCoupons","displayedTransactions","displayDate","getTime","safeTimestampToDate","dateError","txAmount","txDescription","recipientUser","u","recipientId","senderId","senderName","SHOP_CATEGORIES","PRODUCT_TYPES","ShopModal","shop","onSave","formData","setFormData","shopName","cat","rows","ProductModal","shopId","taxAmount","_product$price","productData","PurchaseModal","onConfirm","setQuantity","maxQuantity","ShopCard","ownerName","totalSales","ProductCard","onBuy","isOwner","onEdit","onDelete","PersonalShop","currentUser","userProfile","refreshBalance","shops","setShops","myShop","setMyShop","myProducts","setMyProducts","selectedShop","setSelectedShop","selectedShopProducts","setSelectedShopProducts","showShopModal","setShowShopModal","showProductModal","setShowProductModal","editingProduct","setEditingProduct","purchaseProduct","setPurchaseProduct","purchaseShop","setPurchaseShop","loadingProducts","setLoadingProducts","categoryFilter","setCategoryFilter","searchQuery","setSearchQuery","loadShops","shopsRef","shopsData","loadMyShop","shopData","pq","pSnapshot","loadShopProducts","deleteDoc","filteredShops","renderTabContent","_SHOP_CATEGORIES$find","_SHOP_CATEGORIES$find2","_SHOP_CATEGORIES$find3","totalTaxPaid","ownerId","soldCount","sellerAmount","buyerRef","sellerRef","taxRef","totalVAT","totalTaxCollected","shopRef","productRef","updates","activityRef","buyerId","buyerName","productId","productName","productType","unitPrice","getTeacherAccount","teacherDoc","grid","cardHeader","cardTitle","tabContainer","tabButton","noProduct","fontStyle","modalOverlay","modalContent","modalTitle","modalCloseBtn","formatCurrency","calculateCompoundInterest","principal","dailyRate","days","interest","total","pow","calculateDailyInterest","ICON_MAP","parking","PiggyBank","HandCoins","SubscribedProductItem","onMaturity","isMatured","daysRemaining","differenceInDays","termInDays","dailyInterestAmount","format","AvailableProductItem","onSubscribe","projectedInterest","ProductSection","subscribedProducts","availableProducts","SubscriptionModal","setAmount","numAmount","projectedTotal","minAmount","ParkingAccountSection","dailyInterest","onDeposit","onWithdraw","auth","installmentProducts","activeView","onViewChange","onLoadUserProducts","allUserProducts","onDeleteUserProduct","setMessage","messageType","setMessageType","parkingDailyInterest","setParkingDailyInterest","userDeposits","setUserDeposits","userSavings","setUserSavings","userLoans","setUserLoans","modal","setModal","currentCash","setCurrentCash","displayMessage","loadAllData","parkingRef","parkingRateProduct","parkingDoc","_data$lastInterestDat","lastInterestDate","isToday","daysToApply","finalParkingDoc","handleOpenModal","handleCloseModal","handleMaturity","teacherId","isLoan","confirmMsg","teacherAccountId","teacherAccount","_userSnapshot$data$ca2","_userSnapshot$data2","_teacherSnapshot$data3","_teacherSnapshot$data4","teacherRef","userSnapshot","teacherSnapshot","currentCashInDb","teacherCashInDb","successMsg","activityType","handleCancelEarly","confirmMessage","originalProducts","originalCash","cashChangeAmount","_userSnapshot$data$ca3","_userSnapshot$data3","_teacherSnapshot$data5","_teacherSnapshot$data6","isEarlyCancellation","handleAdminDeleteSubscribedProduct","overflowX","typeLabel","amountStr","previousParkingBalance","previousCurrentCash","_parkingSnapshot$data","_parkingSnapshot$data2","onAdminDelete","subscribeAmount","maxAmount","optimisticProduct","isOptimistic","_userSnapshot$data$ca","_userSnapshot$data","_teacherSnapshot$data","_teacherSnapshot$data2","newProductData","teacherName","newProductRef","convertAdminProductsToAccountFormat","adminProducts","Banking","_auth$userDoc8","_auth$userDoc1","_auth$userDoc10","_auth$userDoc11","_auth$userDoc12","setActiveView","parkingDepositProducts","setParkingDepositProducts","parkingInstallmentProducts","setParkingInstallmentProducts","parkingLoanProducts","setParkingLoanProducts","setAllUserProducts","loadAllUserProducts","_auth$userDoc","_auth$userDoc2","_auth$userDoc3","usersQuery","usersSnapshot","userMap","allProducts","productPromises","productsQuery","productDoc","_productData$maturity","firestoreId","productsArray","formattedDepositProducts","setFormattedDepositProducts","formattedInstallmentProducts","setFormattedInstallmentProducts","formattedLoanProducts","setFormattedLoanProducts","_auth$userDoc7","_auth$userDoc6","bankingData","getBankingProducts","setParkingSavingsProducts","handleParkingProductChange","field","productsState","setProductsState","updatedProduct","numValue","dailyRateValue","saveParkingProducts","_auth$userDoc9","firestoreType","updateBankingProducts","addParkingProduct","deleteParkingProduct","indexToDelete","_auth$userDoc0","_","ParkingAccount","_auth$userDoc4","_auth$userDoc5","AvatarEditor","setConfig","hasChanges","setHasChanges","savedConfig","currentOptions","handleRandomize","randomConfig","randomIndex","WebkitOverflowScrolling","scrollbarWidth","msOverflowStyle","option","isSelected","isIncompatible","optionId","newConfig","handleOptionSelect","handleReset","handleSave","dispatchEvent","CustomEvent","_unused2","saveAvatarConfig","MyProfile","_LEVEL_THRESHOLDS","showAvatarEditor","setShowAvatarEditor","setAchievements","showNicknameModal","setShowNicknameModal","showPasswordModal","setShowPasswordModal","showClassCodeModal","setShowClassCodeModal","showDeleteModal","setShowDeleteModal","deleteConfirmText","setDeleteConfirmText","resetModals","sortedAchievements","WebkitBackgroundClip","WebkitTextFillColor","ach","achievement","rarityColors","bg","colors","unlockedAt","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","textTransform","deleteUser","OmokGame","lazy","ChessGame","TypingPracticeGame","AdminPage","AdminPanel","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","link","createElement","href","rel","head","appendChild","removeChild","page","mobile","closeSidebar","toggleSidebarCollapse","Login","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff"],"sourceRoot":""}