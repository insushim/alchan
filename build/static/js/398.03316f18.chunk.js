"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[398],{4398(e,t,a){a.r(t),a.d(t,{default:()=>z});var s=a(2555),n=a(5043),c=a(5016),i=a(5010),o=(a(7262),a(2395)),r=a(577),l=a(5472),d=a(4891),u=a(9270),m=a(5452);const p="stock",h="etf",x="bond",y={TECH:{name:"\uae30\uc220"},FINANCE:{name:"\uae08\uc735"},CONSUMER:{name:"\uc18c\ube44\uc7ac"},HEALTHCARE:{name:"\ud5ec\uc2a4\ucf00\uc5b4"},ENERGY:{name:"\uc5d0\ub108\uc9c0"},INDUSTRIAL:{name:"\uc0b0\uc5c5"},MATERIALS:{name:"\uc18c\uc7ac"},REALESTATE:{name:"\ubd80\ub3d9\uc0b0"},UTILITIES:{name:"\uc720\ud2f8\ub9ac\ud2f0"},COMMUNICATION:{name:"\ud1b5\uc2e0"},ENTERTAINMENT:{name:"\uc5d4\ud130\ud14c\uc778\uba3c\ud2b8"},INDEX:{name:"\uc9c0\uc218"},GOVERNMENT:{name:"\uad6d\ucc44"},CORPORATE:{name:"\ud68c\uc0ac\ucc44"}},g=36e5,b=.003,f=18e5,v={pendingRequests:new Map,loadBatchData:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=d.Eb.generateKey("BATCH",{classCode:e,userId:t});if(a)m.vF.log("[batchDataLoader] forceRefresh=true - \uce90\uc2dc \ubb34\uc2dc\ud558\uace0 \uc11c\ubc84\uc5d0\uc11c \ub85c\ub4dc"),d.Eb.invalidate(s);else{const e=d.Eb.get(s);if(e)return m.vF.log("[batchDataLoader] Cache HIT - \uce90\uc2dc\ub41c \ub370\uc774\ud130 \uc0ac\uc6a9"),e}if(this.pendingRequests.has(s))return await this.pendingRequests.get(s);const n=this._executeBatchLoad(e,t);this.pendingRequests.set(s,n);try{const e=await n;return d.Eb.set(s,e,18e5),e}finally{this.pendingRequests.delete(s)}},_executeBatchLoad:async function(e,t){const[a,s]=await Promise.all([this._loadStocks(e),this._loadPortfolio(t,e)]);return{stocks:a||[],portfolio:s||[],errors:[]}},_loadStocks:async function(e){try{try{const e=(0,o.Qg)(i.Cn,"getStocksSnapshot"),t=await e({});if(t.data&&Array.isArray(t.data.stocks)&&t.data.stocks.length>0)return t.data.stocks}catch(t){console.warn("[batchDataLoader] \uc2a4\ub0c5\uc0f7 \ud568\uc218 \ud638\ucd9c \uc2e4\ud328, \ubb38\uc11c/\ucffc\ub9ac \ud3f4\ubc31 \uc2dc\ub3c4:",t)}try{const e=(0,l.H9)(i.db,"Settings","centralStocksCache"),t=await(0,l.x7)(e),a=t.exists()?t.data():null;if(a&&Array.isArray(a.stocks)&&a.stocks.length>0)return a.stocks}catch(a){console.warn("[batchDataLoader] \uc2a4\ub0c5\uc0f7 \ubb38\uc11c \uc77d\uae30 \uc2e4\ud328:",a)}const e=(0,l.rJ)(i.db,"CentralStocks"),n=(0,l.query)(e,(0,l.where)("isListed","==",!0));return(await(0,l.getDocs)(n)).docs.map(e=>(0,s.A)({id:e.id},e.data()))}catch(n){return console.error("[batchDataLoader] Stocks load error:",n),[]}},_loadPortfolio:async function(e,t){try{const a=(0,l.rJ)(i.db,"users",e,"portfolio"),n=(0,l.query)(a,(0,l.where)("classCode","==",t));return(await(0,l.getDocs)(n)).docs.map(e=>{var t,a;const n=e.data();return(0,s.A)((0,s.A)({id:e.id},n),{},{lastBuyTime:null!==(t=n.lastBuyTime)&&void 0!==t&&t.toDate?n.lastBuyTime.toDate():n.lastBuyTime,delistedAt:null!==(a=n.delistedAt)&&void 0!==a&&a.toDate?n.delistedAt.toDate():n.delistedAt})})}catch(a){return console.error("[batchDataLoader] Portfolio load error:",a),[]}}},j=e=>{const t=(e=>{var t;return null!==e&&void 0!==e&&e.isRealStock&&null!==(t=e.realStockData)&&void 0!==t&&t.marketState?e.realStockData.marketState:null})(e);if(!t)return null;switch(t){case"REGULAR":return"\uc7a5\uc911";case"PRE":return"\uc7a5\uc804";case"POST":return"\uc7a5\ud6c4";default:return"\uc7a5\ub9c8\uac10"}},k=e=>"number"!==typeof e||isNaN(e)?"0\uc6d0":new Intl.NumberFormat("ko-KR").format(Math.round(e))+"\uc6d0",S=e=>{const t=parseFloat(e);return isNaN(t)?"0.00%":(t>=0?"+":"")+t.toFixed(2)+"%"},N=e=>{const t=Math.floor(e/1e3),a=Math.floor(t/60),s=t%60;return"".concat(a,"\ubd84 ").concat(s,"\ucd08")},T=function(e){return e<=0?0:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:p)===x?Math.round(.154*e):Math.round(.22*e)},w=(new Map,e=>{var t;if(!e.lastBuyTime)return 0;let a;if(e.lastBuyTime instanceof Date)a=e.lastBuyTime.getTime();else if(null!==(t=e.lastBuyTime)&&void 0!==t&&t.toDate)a=e.lastBuyTime.toDate().getTime();else if("number"===typeof e.lastBuyTime)a=e.lastBuyTime;else{if("string"!==typeof e.lastBuyTime)return 0;a=new Date(e.lastBuyTime).getTime()}const s=Date.now(),n=g-(s-a);return Math.max(0,n)}),C=e=>{switch(e){case h:return"\ud83d\udcca";case x:return"\ud83d\udcdc";default:return"\ud83d\udcc8"}},A=e=>{switch(e){case h:return"etf";case x:return"bond";default:return"stock"}},E=e=>{d.Eb&&"function"===typeof d.Eb.invalidatePattern&&d.Eb.invalidatePattern(e)},R=()=>{try{const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a&&a.includes("BATCH")&&e.push(a)}e.forEach(e=>{localStorage.removeItem(e)}),e.length>0&&m.vF.log("[\uce90\uc2dc] localStorage BATCH \uce90\uc2dc \uc0ad\uc81c:",e.length,"\uac1c")}catch(e){console.warn("[\uce90\uc2dc] localStorage \uc815\ub9ac \uc624\ub958:",e)}};var F=a(579);const I=e=>{let{size:t=24,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",children:[(0,F.jsx)("polyline",{points:"22,7 13.5,15.5 8.5,10.5 2,17"}),(0,F.jsx)("polyline",{points:"16,7 22,7 22,13"})]})},B=e=>{let{size:t=24,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",children:[(0,F.jsx)("polyline",{points:"22,17 13.5,8.5 8.5,13.5 2,7"}),(0,F.jsx)("polyline",{points:"16,17 22,17 22,11"})]})},L=e=>{let{size:t=24,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",children:[(0,F.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,F.jsx)("path",{d:"M12 1v6m0 6v6m11-7h-6m-6 0H1m17.5-3.5L19 10m-2 2l-2.5 2.5M6.5 6.5L9 9m-2 2l-2.5 2.5"})]})},M=e=>{let{size:t=16,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,F.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,F.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,F.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L20.49 10"}),(0,F.jsx)("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L3.51 14"})]})},D=e=>{let{size:t=24,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",children:[(0,F.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),(0,F.jsx)("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),(0,F.jsx)("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]})},P=e=>{let{size:t=24,color:a="currentColor"}=e;return(0,F.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",children:[(0,F.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,F.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})},O=n.memo(e=>{let{onAddStock:t}=e;const[a,c]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[r,l]=(0,n.useState)({name:"",symbol:"",sector:"TECH",productType:"stock"});return(0,F.jsxs)("div",{style:{marginTop:"10px"},children:[(0,F.jsx)("button",{onClick:()=>c(!a),className:"btn btn-secondary",style:{width:"100%",marginBottom:"10px"},children:a?"\uc811\uae30":"\u2795 \uac1c\ubcc4 \uc8fc\uc2dd/ETF \ucd94\uac00"}),a&&(0,F.jsxs)("div",{style:{background:"rgba(20, 20, 35, 0.8)",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,F.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginBottom:"10px"},children:"\ud83d\udccc \ube60\ub978 \ucd94\uac00 (\ud074\ub9ad\ud558\uba74 \ubc14\ub85c \ucd94\uac00\ub429\ub2c8\ub2e4)"}),(0,F.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"15px"},children:[{name:"\uc0bc\uc131\uc804\uc790",symbol:"005930.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"SK\ud558\uc774\ub2c9\uc2a4",symbol:"000660.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"LG\uc5d0\ub108\uc9c0\uc194\ub8e8\uc158",symbol:"373220.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"NAVER",symbol:"035420.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"\uce74\uce74\uc624",symbol:"035720.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"\ud604\ub300\ucc28",symbol:"005380.KS",type:"\ud55c\uad6d \uc8fc\uc2dd"},{name:"Apple",symbol:"AAPL",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"Microsoft",symbol:"MSFT",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"Google",symbol:"GOOGL",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"Tesla",symbol:"TSLA",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"NVIDIA",symbol:"NVDA",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"Amazon",symbol:"AMZN",type:"\ubbf8\uad6d \uc8fc\uc2dd"},{name:"KODEX 200",symbol:"069500.KS",type:"\ud55c\uad6d ETF"},{name:"KODEX \ub808\ubc84\ub9ac\uc9c0",symbol:"122630.KS",type:"\ud55c\uad6d ETF"},{name:"TIGER \ubbf8\uad6dS&P500",symbol:"360750.KS",type:"\ud55c\uad6d ETF"},{name:"SPY",symbol:"SPY",type:"\ubbf8\uad6d ETF (S&P500)"},{name:"QQQ",symbol:"QQQ",type:"\ubbf8\uad6d ETF (\ub098\uc2a4\ub2e5100)"},{name:"TLT",symbol:"TLT",type:"\ucc44\uad8c ETF (\ubbf8\uad6d \uc7a5\uae30\uad6d\ucc44)"},{name:"GLD",symbol:"GLD",type:"\uc6d0\uc790\uc7ac ETF (\uae08)"}].map(e=>(0,F.jsx)("button",{onClick:()=>(async e=>{if(!i){o(!0);try{await t({name:e.name,symbol:e.symbol}),alert("".concat(e.name," \ucd94\uac00 \uc644\ub8cc!"))}catch(a){alert("\ucd94\uac00 \uc2e4\ud328: "+a.message)}finally{o(!1)}}})(e),disabled:i,style:{padding:"4px 8px",fontSize:"0.75rem",background:e.type.includes("ETF")?"rgba(59, 130, 246, 0.2)":e.type.includes("\ucc44\uad8c")?"rgba(245, 158, 11, 0.2)":e.type.includes("\uc6d0\uc790\uc7ac")?"rgba(236, 72, 153, 0.2)":"rgba(16, 185, 129, 0.2)",border:e.type.includes("ETF")?"1px solid rgba(59, 130, 246, 0.3)":e.type.includes("\ucc44\uad8c")?"1px solid rgba(245, 158, 11, 0.3)":e.type.includes("\uc6d0\uc790\uc7ac")?"1px solid rgba(236, 72, 153, 0.3)":"1px solid rgba(16, 185, 129, 0.3)",color:"white",borderRadius:"4px",cursor:"pointer",whiteSpace:"nowrap"},title:"".concat(e.type," - ").concat(e.symbol),children:e.name},e.symbol))}),(0,F.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginBottom:"8px"},children:"\u270f\ufe0f \uc9c1\uc811 \uc785\ub825 (Yahoo Finance \uc2ec\ubcfc \uc0ac\uc6a9)"}),(0,F.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,F.jsx)("input",{type:"text",placeholder:"\uc774\ub984 (\uc608: \uc0bc\uc131\uc804\uc790)",value:r.name,onChange:e=>l(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value})),style:{flex:1,minWidth:"120px",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0,0,0,0.3)",color:"white"}}),(0,F.jsx)("input",{type:"text",placeholder:"\uc2ec\ubcfc (\uc608: 005930.KS)",value:r.symbol,onChange:e=>l(t=>(0,s.A)((0,s.A)({},t),{},{symbol:e.target.value})),style:{flex:1,minWidth:"120px",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0,0,0,0.3)",color:"white"}}),(0,F.jsx)("button",{onClick:async()=>{if(r.name&&r.symbol){if(!i){o(!0);try{await t(r),alert("".concat(r.name," \ucd94\uac00 \uc644\ub8cc!")),l({name:"",symbol:"",sector:"TECH",productType:"stock"}),c(!1)}catch(e){alert("\ucd94\uac00 \uc2e4\ud328: "+e.message)}finally{o(!1)}}}else alert("\uc774\ub984\uacfc \uc2ec\ubcfc\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:i,className:"btn btn-success",style:{padding:"8px 16px"},children:i?"\ucd94\uac00 \uc911...":"\ucd94\uac00"})]}),(0,F.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"8px"},children:"\ud83d\udca1 \ud55c\uad6d \uc8fc\uc2dd: \uc885\ubaa9\ucf54\ub4dc.KS (\uc608: 005930.KS) | \ubbf8\uad6d \uc8fc\uc2dd: \ud2f0\ucee4 (\uc608: AAPL, TSLA)"})]})]})}),K=n.memo(e=>{let{stocks:t,classCode:a,onClose:c,onAddStock:i,onDeleteStock:o,onEditStock:r,onToggleManualStock:l,cacheStats:d,onManualUpdate:u,onCreateRealStocks:m,onUpdateRealStocks:g,onAddSingleRealStock:b,onDeleteSimulationStocks:f}=e;const[v,j]=(0,n.useState)(!1),[S,N]=(0,n.useState)(!1),[T,w]=(0,n.useState)(!1),[A,E]=(0,n.useState)(!1),[R,I]=(0,n.useState)(!1),[B,M]=(0,n.useState)({name:"",price:"",minListingPrice:"",isManual:!1,sector:"TECH",productType:p,maturityYears:"",couponRate:""});return(0,F.jsxs)("div",{className:"admin-panel-fullscreen",children:[(0,F.jsxs)("div",{className:"admin-header",children:[(0,F.jsxs)("h2",{children:[(0,F.jsx)(L,{size:24})," \uad00\ub9ac\uc790 \ud328\ub110 (",a,")"]}),(0,F.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,F.jsxs)("div",{style:{fontSize:"0.85rem",color:"#666"},children:["\uce90\uc2dc \ud1b5\uacc4: \uc801\uc911 ",d.hits,", \ub204\ub77d ",d.misses,", \uc808\uc57d ",d.savings,"\ud68c"]}),(0,F.jsx)("button",{onClick:c,className:"btn btn-danger",children:"\ub2eb\uae30"})]})]}),(0,F.jsxs)("div",{className:"admin-content",children:[(0,F.jsxs)("div",{className:"admin-section",children:[(0,F.jsx)("h3",{children:"\ud83d\udcca \uc2e4\uc81c \uc8fc\uc2dd \uad00\ub9ac (Yahoo Finance)"}),(0,F.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[(0,F.jsxs)("p",{style:{marginBottom:"10px",color:"#34d399",fontSize:"0.9rem"},children:["\ud83c\udf10 \uc2e4\uc81c \uc8fc\uc2dd \ub370\uc774\ud130\ub97c Yahoo Finance\uc5d0\uc11c \uac00\uc838\uc635\ub2c8\ub2e4.",(0,F.jsx)("br",{}),"\ud83d\udcc8 \uc0bc\uc131\uc804\uc790, SK\ud558\uc774\ub2c9\uc2a4, \uc560\ud50c, \ud14c\uc2ac\ub77c, ETF, \ucc44\uad8c ETF \ub4f1 \uc9c0\uc6d0",(0,F.jsx)("br",{}),"\u23f0 15\ubd84\ub9c8\ub2e4 \uc790\ub3d9\uc73c\ub85c \uac00\uaca9\uc774 \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4. | \ud83d\udcb1 \ud658\uc728: \ud558\ub8e8 1\ud68c \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8"]}),(0,F.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[(0,F.jsx)("button",{onClick:async()=>{if(window.confirm("\uc2e4\uc81c \uc8fc\uc2dd \ub370\uc774\ud130(\uc0bc\uc131\uc804\uc790, \uc560\ud50c \ub4f1)\ub97c \uc0dd\uc131\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(Yahoo Finance\uc5d0\uc11c \uc2e4\uc2dc\uac04 \uac00\uaca9\uc744 \uac00\uc838\uc635\ub2c8\ub2e4)")&&!T){w(!0);try{await m(),alert("\uc2e4\uc81c \uc8fc\uc2dd\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4! 15\ubd84\ub9c8\ub2e4 \uc790\ub3d9\uc73c\ub85c \uac00\uaca9\uc774 \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.")}catch(e){alert("\uc2e4\uc81c \uc8fc\uc2dd \uc0dd\uc131 \uc2e4\ud328: "+e.message)}finally{w(!1)}}},disabled:T,className:"btn btn-success",style:{flex:1,padding:"12px",fontSize:"0.9rem",fontWeight:"bold"},children:T?"\u23f3 \uc0dd\uc131 \uc911...":"\ud83c\udfe2 \uae30\ubcf8 \uc8fc\uc2dd \uc0dd\uc131"}),(0,F.jsx)("button",{onClick:async()=>{if(!A){E(!0);try{await g(),alert("\uc2e4\uc81c \uc8fc\uc2dd \uac00\uaca9\uc774 \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(e){alert("\uc2e4\uc81c \uc8fc\uc2dd \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: "+e.message)}finally{E(!1)}}},disabled:A,className:"btn btn-primary",style:{flex:1,padding:"12px",fontSize:"0.9rem",fontWeight:"bold"},children:A?"\u23f3 \uc5c5\ub370\uc774\ud2b8 \uc911...":"\ud83d\udd04 \uac00\uaca9 \uc989\uc2dc \uc5c5\ub370\uc774\ud2b8"})]}),(0,F.jsx)(O,{onAddStock:b}),(0,F.jsxs)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[(0,F.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f \ubaa8\ub4e0 \uc2dc\ubbac\ub808\uc774\uc158 \uc8fc\uc2dd\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n(\uc2e4\uc81c \uc8fc\uc2dd\uc740 \uc720\uc9c0\ub429\ub2c8\ub2e4)")&&!R){I(!0);try{await f(),alert("\uc2dc\ubbac\ub808\uc774\uc158 \uc8fc\uc2dd\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(e){alert("\uc0ad\uc81c \uc2e4\ud328: "+e.message)}finally{I(!1)}}},disabled:R,className:"btn btn-danger",style:{width:"100%",padding:"10px",fontSize:"0.85rem"},children:R?"\u23f3 \uc0ad\uc81c \uc911...":"\ud83d\uddd1\ufe0f \uc2dc\ubbac\ub808\uc774\uc158 \uc8fc\uc2dd \uc804\uccb4 \uc0ad\uc81c"}),(0,F.jsx)("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"5px",textAlign:"center"},children:"\u26a0\ufe0f \uc2e4\uc81c \uc8fc\uc2dd(\uc2e4\uc2dc\uac04)\ub9cc \ub0a8\uae30\uace0 \uac00\uc0c1 \uc8fc\uc2dd\uc744 \ubaa8\ub450 \uc0ad\uc81c\ud569\ub2c8\ub2e4"})]})]})]}),(0,F.jsxs)("div",{className:"admin-section",children:[(0,F.jsxs)("h3",{children:[(0,F.jsx)(D,{size:20})," \uc0c1\ud488 \ubaa9\ub85d \uad00\ub9ac"]}),(0,F.jsx)("div",{className:"admin-stock-list",children:t.map(e=>{var t;return(0,F.jsxs)("div",{className:"admin-stock-item",children:[(0,F.jsxs)("div",{className:"admin-stock-info",children:[(0,F.jsxs)("span",{className:"stock-name",children:[C(e.productType)," ",e.name,e.isRealStock&&(0,F.jsx)("span",{style:{marginLeft:"6px",background:"#10b981",color:"white",fontSize:"0.65rem",padding:"1px 4px",borderRadius:"3px",fontWeight:"bold"},children:"\uc2e4\uc2dc\uac04"})]}),(0,F.jsxs)("span",{className:"stock-details",children:[k(e.price)," | ",(null===(t=y[e.sector])||void 0===t?void 0:t.name)||"\uae30\ud0c0"," | ",e.isListed?"\uc0c1\uc7a5":"\uc0c1\uc7a5\ud3d0\uc9c0"," | ",e.isManual?"\uc218\ub3d9":e.isRealStock?"\uc2e4\uc2dc\uac04":"\uc790\ub3d9",e.productType===x&&" | \ub9cc\uae30: ".concat(e.maturityYears,"\ub144 | \uc774\uc790\uc728: ").concat(e.couponRate,"%")]})]}),(0,F.jsxs)("div",{className:"form-actions",children:[(0,F.jsx)("button",{onClick:()=>r(e.id),className:"btn btn-primary",children:"\uac00\uaca9 \uc218\uc815"}),(0,F.jsx)("button",{onClick:()=>l(e.id,e.isListed),className:"btn ".concat(e.isListed?"btn-secondary":"btn-success"),children:e.isListed?"\uc0c1\uc7a5\ud3d0\uc9c0":"\uc7ac\uc0c1\uc7a5"}),(0,F.jsx)("button",{onClick:()=>o(e.id,e.name),className:"btn btn-danger",children:"\uc0ad\uc81c"})]})]},e.id)})})]}),(0,F.jsxs)("div",{className:"admin-section",children:[(0,F.jsx)("h3",{children:"\uc0c8 \uc0c1\ud488 \ucd94\uac00"}),(0,F.jsx)("button",{onClick:()=>j(!v),className:"btn btn-primary",children:v?"\ucde8\uc18c":"\uc0c8 \uc0c1\ud488 \ucd94\uac00 \uc591\uc2dd \uc5f4\uae30"}),v&&(0,F.jsxs)("div",{className:"add-stock-form",children:[(0,F.jsxs)("div",{className:"form-grid",children:[(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\uc0c1\ud488 \uc720\ud615"}),(0,F.jsxs)("select",{value:B.productType,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{productType:e.target.value})),className:"form-input",children:[(0,F.jsx)("option",{value:p,children:"\uc8fc\uc2dd"}),(0,F.jsx)("option",{value:h,children:"ETF/\uc9c0\uc218"}),(0,F.jsx)("option",{value:x,children:"\ucc44\uad8c"})]})]}),(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\uc0c1\ud488\uba85"}),(0,F.jsx)("input",{type:"text",value:B.name,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value})),className:"form-input",placeholder:B.productType===x?"\uc608: \uad6d\uace0\ucc44 10\ub144":B.productType===h?"\uc608: KOSPI 200":"\uc608: \uc0bc\uc131\uc804\uc790"})]}),(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\ucd08\uae30 \uac00\uaca9"}),(0,F.jsx)("input",{type:"number",value:B.price,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{price:e.target.value})),className:"form-input"})]}),(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\ucd5c\uc18c \uc0c1\uc7a5\uac00"}),(0,F.jsx)("input",{type:"number",value:B.minListingPrice,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{minListingPrice:e.target.value})),className:"form-input"})]}),B.productType===p&&(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\uc139\ud130"}),(0,F.jsx)("select",{value:B.sector,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{sector:e.target.value})),className:"form-input",children:Object.entries(y).filter(e=>{let[t]=e;return!["INDEX","GOVERNMENT","CORPORATE"].includes(t)}).map(e=>{let[t,a]=e;return(0,F.jsx)("option",{value:t,children:a.name},t)})})]}),B.productType===x&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\ub9cc\uae30 (\ub144)"}),(0,F.jsx)("input",{type:"number",value:B.maturityYears,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{maturityYears:e.target.value})),className:"form-input",placeholder:"\uc608: 10"})]}),(0,F.jsxs)("div",{className:"form-group",children:[(0,F.jsx)("label",{className:"form-label",children:"\ud45c\uba74\uc774\uc790\uc728 (%)"}),(0,F.jsx)("input",{type:"number",step:"0.1",value:B.couponRate,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{couponRate:e.target.value})),className:"form-input",placeholder:"\uc608: 3.5"})]})]}),(0,F.jsxs)("div",{className:"form-group checkbox-group",children:[(0,F.jsx)("input",{type:"checkbox",checked:B.isManual,onChange:e=>M(t=>(0,s.A)((0,s.A)({},t),{},{isManual:e.target.checked})),id:"isManualCheckbox",className:"checkbox-input"}),(0,F.jsx)("label",{htmlFor:"isManualCheckbox",children:"\uc218\ub3d9 \uad00\ub9ac (\uc790\ub3d9 \uac00\uaca9 \ubcc0\ub3d9 \uc81c\uc678)"})]})]}),(0,F.jsx)("div",{className:"form-actions",children:(0,F.jsx)("button",{onClick:async()=>{if(!B.name||!B.price||!B.minListingPrice)return alert("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e=parseFloat(B.price),t=parseFloat(B.minListingPrice);if(e<=0||t<=0)return alert("\uac00\uaca9\uc740 0\ubcf4\ub2e4 \ucee4\uc57c \ud569\ub2c8\ub2e4.");const a={name:B.name,price:e,minListingPrice:t,isListed:!0,isManual:B.isManual,sector:B.sector,productType:B.productType,buyVolume:0,sellVolume:0,recentBuyVolume:0,recentSellVolume:0,volatility:B.productType===x?.005:.02};B.productType===x&&(a.maturityYears=parseFloat(B.maturityYears)||10,a.couponRate=parseFloat(B.couponRate)||3.5,a.sector="GOVERNMENT"),B.productType===h&&(a.sector="INDEX"),await i(a),M({name:"",price:"",minListingPrice:"",isManual:!1,sector:"TECH",productType:p,maturityYears:"",couponRate:""}),j(!1)},className:"btn btn-success",children:"\uc0c1\ud488 \ucd94\uac00"})})]})]})]})]})}),z=()=>{const{user:e,userDoc:t,isAdmin:a,loading:O,firebaseReady:z,functions:H,optimisticUpdate:q,refreshUserDocument:_}=(0,c.As)(),[V,W]=(0,n.useState)(null),[Q,U]=(0,n.useState)([]),[Y,G]=(0,n.useState)([]),[X,Z]=(0,n.useState)(!1),[J,$]=(0,n.useState)({}),[ee,te]=(0,n.useState)({}),[ae,se]=(0,n.useState)(!1),[ne,ce]=(0,n.useState)({}),[ie,oe]=(0,n.useState)("stocks"),[re,le]=(0,n.useState)(null),[de,ue]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(!1),[ye,ge]=(0,n.useState)(!1),[be,fe]=(0,n.useState)({hits:0,misses:0,savings:0}),[ve,je]=(0,n.useState)(null),ke=(0,n.useRef)({stocks:0,portfolio:0,marketStatus:0,batchLoad:0}),Se=(0,n.useRef)(!1);(0,n.useEffect)(()=>{const e=()=>{const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),a=t.getDay(),s=60*t.getHours()+t.getMinutes(),n=a>=1&&a<=5&&s>=540&&s<930,c=new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})),i=c.getDay(),o=60*c.getHours()+c.getMinutes();pe(n||i>=1&&i<=5&&o>=570&&o<960)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,n.useEffect)(()=>{null!==t&&void 0!==t&&t.classCode&&W(t.classCode)},[t]);const Ne=(0,n.useRef)(Y);(0,n.useEffect)(()=>{Ne.current=Y},[Y]),(0,n.useEffect)(()=>{const e=setInterval(()=>{ce(e=>{const t={};return Ne.current.forEach(e=>{const a=w(e);a>0&&(t[e.id]=a)}),t}),fe({hits:d.wn.hits,misses:d.wn.misses,savings:d.wn.savings})},1e3);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{const e={};Y.forEach(t=>{const a=w(t);a>0&&(e[t.id]=a)}),ce(e)},[Y]);const Te=(0,n.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;if(!V)return;if(Se.current&&!t)return void m.vF.log("[StockExchange] \uc774\ubbf8 fetching \uc911\uc774\ubbc0\ub85c \ub300\uae30");const a=Date.now(),s=a-ke.current.batchLoad;if(t||!(s<=f)){Se.current=!0,ue(!0);try{const s=await v.loadBatchData(V,e.uid,t);s.errors&&s.errors.length>0&&console.warn("[StockExchange] \ubc30\uce58 \ub85c\ub4dc \uc911 \uc77c\ubd80 \uc624\ub958 \ubc1c\uc0dd:",s.errors),U(s.stocks||[]),G(s.portfolio||[]),ke.current.batchLoad=a,ke.current.stocks=a,ke.current.portfolio=a,ke.current.marketStatus=a,je(new Date),le(new Date)}catch(n){console.error("[StockExchange] \ubc30\uce58 \ub85c\ub4dc \uc2e4\ud328:",n)}finally{Se.current=!1,ue(!1)}}},[V,e,a]);(0,r.nm)(Te,{interval:36e5,enabled:z&&!!e&&!!V,deps:[e,V,a]});const we=(0,n.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.isSuperAdmin)try{const e=(0,o.Qg)(H,"getVacationModeStatus"),t=await e({});xe(t.data.vacationMode)}catch(e){console.error("[fetchVacationMode] \uc870\ud68c \uc2e4\ud328:",e)}},[H,null===t||void 0===t?void 0:t.isSuperAdmin]);(0,n.useEffect)(()=>{null!==t&&void 0!==t&&t.isSuperAdmin&&H&&we()},[null===t||void 0===t?void 0:t.isSuperAdmin,H,we]);const Ce=(0,n.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.isSuperAdmin){ge(!0);try{const e=(0,o.Qg)(H,"toggleVacationMode"),t=await e({enabled:!he});xe(t.data.vacationMode),alert(t.data.message)}catch(e){console.error("[toggleVacationMode] \ud1a0\uae00 \uc2e4\ud328:",e),alert("\ubc29\ud559 \ubaa8\ub4dc \uc124\uc815 \uc2e4\ud328: "+e.message)}finally{ge(!1)}}},[H,null===t||void 0===t?void 0:t.isSuperAdmin,he]),Ae=(0,n.useCallback)(async()=>{try{const e=(0,o.Qg)(H,"updateStocksSnapshot");await e({}),m.vF.log("[updateStocksSnapshot] \uc2a4\ub0c5\uc0f7 \uac31\uc2e0 \uc644\ub8cc")}catch(e){console.error("[updateStocksSnapshot] \uc2a4\ub0c5\uc0f7 \uac31\uc2e0 \uc2e4\ud328:",e)}},[H]),Ee=(0,n.useCallback)(async t=>{if(!V||!e)return alert("\ud074\ub798\uc2a4 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");try{const a=(0,o.Qg)(H,"addStockDoc");await a({stock:t}),await Ae();const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),alert("".concat(t.name," \uc0c1\ud488\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(a){console.error("[addStock] \ud568\uc218 \ucd94\uac00 \uc2e4\ud328, Firestore \uc9c1\uc811 \uc2dc\ub3c4:",a);try{const a=(0,l.H9)((0,l.rJ)(i.db,"CentralStocks"));await(0,l.BN)(a,(0,s.A)((0,s.A)({},t),{},{initialPrice:t.price,priceHistory:[t.price],createdAt:(0,l.O5)(),holderCount:0,tradingVolume:1e3,buyVolume:0,sellVolume:0,recentBuyVolume:0,recentSellVolume:0,volatility:t.volatility||.02})),await Ae();const n=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(n),E("STOCKS_".concat(V)),await Te(!0),alert("".concat(t.name," \uc0c1\ud488\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(n){console.error("[addStock] Firestore \uc9c1\uc811 \ucd94\uac00 \uc2e4\ud328:",n),alert("\uc0c1\ud488 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uad8c\ud55c/Rules\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.")}}},[V,e,Te,Ae,H]),Re=(0,n.useCallback)(async(t,a)=>{if(!V||!e)return alert("\ud074\ub798\uc2a4 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(window.confirm("'".concat(a,"' \uc0c1\ud488\uc744 \uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{await(0,l.kd)((0,l.H9)(i.db,"CentralStocks",t)),await Ae();const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),alert("".concat(a," \uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(s){alert("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},[V,e,Te,Ae]),Fe=(0,n.useCallback)(async t=>{if(!V||!e)return alert("\ud074\ub798\uc2a4 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const a=Q.find(e=>e.id===t);if(!a)return;const s=prompt("'".concat(a.name,"'\uc758 \uc0c8\ub85c\uc6b4 \uac00\uaca9:"),a.price.toString()),n=parseFloat(s);if(isNaN(n)||n<=0)return alert("\uc720\ud6a8\ud55c \uac00\uaca9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");try{await(0,l.mZ)((0,l.H9)(i.db,"CentralStocks",t),{price:n,priceHistory:[...(a.priceHistory||[]).slice(-19),n]}),await Ae();const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),alert("\uac00\uaca9\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(c){alert("\uac00\uaca9 \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},[Q,V,e,Te,Ae]),Ie=(0,n.useCallback)(async(t,a)=>{if(!V||!e)return alert("\ud074\ub798\uc2a4 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const s=Q.find(e=>e.id===t);if(!s)return;const n=a?"\uc0c1\uc7a5\ud3d0\uc9c0":"\uc7ac\uc0c1\uc7a5";if(window.confirm("'".concat(s.name,"' \uc0c1\ud488\uc744 ").concat(n,"\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const c=a?{isListed:!1,price:0,delistedAt:(0,l.O5)()}:{isListed:!0,price:s.minListingPrice,priceHistory:[s.minListingPrice],delistedAt:null};if(await(0,l.mZ)((0,l.H9)(i.db,"CentralStocks",t),c),a){const e=(0,l.wP)(i.db),a=(0,l.query)((0,l.Cs)(i.db,"portfolio"),(0,l.where)("classCode","==",V),(0,l.where)("stockId","==",t));(await(0,l.getDocs)(a)).forEach(t=>{e.update(t.ref,{delistedAt:(0,l.O5)()})}),await e.commit()}await Ae();const o=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(o),E("STOCKS_".concat(V)),E("PORTFOLIO"),await Te(!0),alert("".concat(n," \ucc98\ub9ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(c){alert("".concat(n," \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))}},[Q,V,e,Te,Ae]),Be=(0,n.useCallback)(async(a,n)=>{if(!me)return alert("\uc8fc\uc2dd\uc2dc\uc7a5\uc774 \ub9c8\uac10\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc6b4\uc601 \uc2dc\uac04: \uc6d4-\uae08 \uc624\uc804 8\uc2dc-\uc624\ud6c4 3\uc2dc");if(ae||!V)return;const c=parseInt(n,10);if(isNaN(c)||c<=0)return alert("\uc720\ud6a8\ud55c \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const r=Q.find(e=>e.id===a);if(!e||!r||!r.isListed)return alert("\ub9e4\uc218\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud0dc\uc785\ub2c8\ub2e4.");const l=r.price*c,p=Math.round(l*b),h=Math.floor(.01*l),x=l+p+h;m.vF.log("[buyStock] \ub9e4\uc218 \uc2dc\uc791:",{stockId:a,stockName:r.name,quantity:c,totalCost:x}),q&&q({cash:-x}),se(!0);try{const n=(0,o.Qg)(H,"buyStock"),l=await n({stockId:a,quantity:c});if(m.vF.log("[buyStock] \ub9e4\uc218 \uc131\uacf5:",l.data),void 0!==l.data.newBalance&&q){const e=(null===t||void 0===t?void 0:t.cash)||0,a=l.data.newBalance-e;q({cash:a}),m.vF.log("[buyStock] \ud604\uae08 \uc815\ud655\ud55c \uac12\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8:",l.data.newBalance)}const y=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(y),E("PORTFOLIO_user_".concat(e.uid)),R(),G(e=>{const t=e.findIndex(e=>e.stockId===a);if(t>=0){const a=e[t],n=a.quantity+c,i=(a.averagePrice*a.quantity+r.price*c)/n;return[...e.slice(0,t),(0,s.A)((0,s.A)({},a),{},{quantity:n,averagePrice:i,lastBuyTime:new Date}),...e.slice(t+1)]}return[...e,{id:"temp_".concat(Date.now()),stockId:a,stockName:r.name,quantity:c,averagePrice:r.price,classCode:V,lastBuyTime:new Date}]}),$(e=>(0,s.A)((0,s.A)({},e),{},{[a]:""})),(0,u.Mx)(i.db,{classCode:V,userId:e.uid,userName:(null===t||void 0===t?void 0:t.name)||e.displayName||"\uc0ac\uc6a9\uc790",type:u.gI.STOCK_BUY,description:"".concat(r.name," ").concat(c,"\uc8fc \ub9e4\uc218 (").concat(k(x),")"),amount:-x,metadata:{stockId:a,stockName:r.name,quantity:c,pricePerShare:r.price,commission:p,taxAmount:h,totalCost:x}}),alert("".concat(r.name," ").concat(c,"\uc8fc \ub9e4\uc218 \uc644\ub8cc!\n\uc218\uc218\ub8cc: ").concat(k(p)))}catch(y){console.error("[buyStock] \ub9e4\uc218 \uc2e4\ud328:",y),q&&q({cash:x}),alert(y.message||"\ub9e4\uc218 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{se(!1)}},[Q,e,ae,V,me,H,Te,E,q,_]),Le=(0,n.useCallback)(async(a,n)=>{if(!me)return alert("\uc8fc\uc2dd\uc2dc\uc7a5\uc774 \ub9c8\uac10\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc6b4\uc601 \uc2dc\uac04: \uc6d4-\uae08 \uc624\uc804 8\uc2dc-\uc624\ud6c4 3\uc2dc");if(ae)return;const c=parseInt(n,10);if(isNaN(c)||c<=0)return alert("\uc720\ud6a8\ud55c \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const r=Y.find(e=>e.id===a);if(!e||!t||!r||c>r.quantity)return alert("\ub9e4\ub3c4\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud0dc\uc785\ub2c8\ub2e4.");if(r.delistedAt)return alert("\uc0c1\uc7a5\ud3d0\uc9c0\ub41c \uc0c1\ud488\uc740 \ub9e4\ub3c4\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!(e=>{var t;if(!e.lastBuyTime)return!0;let a;if(e.lastBuyTime instanceof Date)a=e.lastBuyTime.getTime();else if(null!==(t=e.lastBuyTime)&&void 0!==t&&t.toDate)a=e.lastBuyTime.toDate().getTime();else if("number"===typeof e.lastBuyTime)a=e.lastBuyTime;else{if("string"!==typeof e.lastBuyTime)return!0;a=new Date(e.lastBuyTime).getTime()}return Date.now()-a>=g})(r)){const e=w(r);return alert("\ub9e4\uc218 \ud6c4 1\uc2dc\uac04 \ub3d9\uc548\uc740 \ub9e4\ub3c4\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub0a8\uc740 \uc2dc\uac04: ".concat(N(e)))}const l=Q.find(e=>e.id===r.stockId);if(!l||!l.isListed)return alert("\ud604\uc7ac \uac70\ub798\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud488\uc785\ub2c8\ub2e4.");const p=l.price*c,h=Math.round(p*b),x=(l.price-r.averagePrice)*c,y=p-h-((x>0?Math.floor(.22*x):0)+Math.floor(.01*p));m.vF.log("[sellStock] \ub9e4\ub3c4 \uc2dc\uc791:",{holdingId:a,stockName:l.name,quantity:c,estimatedNetRevenue:y}),q&&q({cash:y}),se(!0);try{const n=(0,o.Qg)(H,"sellStock"),r=await n({holdingId:a,quantity:c});if(m.vF.log("[sellStock] \ub9e4\ub3c4 \uc131\uacf5:",r.data),void 0!==r.data.newBalance&&q){const e=(null===t||void 0===t?void 0:t.cash)||0,a=r.data.newBalance-e;q({cash:a}),m.vF.log("[sellStock] \ud604\uae08 \uc815\ud655\ud55c \uac12\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8:",r.data.newBalance)}const l=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(l),E("PORTFOLIO_user_".concat(e.uid)),R(),G(e=>{const t=e.findIndex(e=>e.id===a);if(t>=0){const a=e[t],n=a.quantity-c;return n<=0?[...e.slice(0,t),...e.slice(t+1)]:[...e.slice(0,t),(0,s.A)((0,s.A)({},a),{},{quantity:n}),...e.slice(t+1)]}return e}),te(e=>(0,s.A)((0,s.A)({},e),{},{[a]:""}));const{stockName:p,sellPrice:h,commission:x,totalTax:y,profit:g,netRevenue:b}=r.data;(0,u.Mx)(i.db,{classCode:V,userId:e.uid,userName:(null===t||void 0===t?void 0:t.name)||e.displayName||"\uc0ac\uc6a9\uc790",type:u.gI.STOCK_SELL,description:"".concat(p," ").concat(c,"\uc8fc \ub9e4\ub3c4 (\uc21c\uc218\uc775: ").concat(k(b),")"),amount:b,metadata:{holdingId:a,stockName:p,quantity:c,sellPrice:h,commission:x,tax:y,profit:g,netRevenue:b}});const f=y>0?"\n\uc138\uae08: ".concat(k(y)):"";alert("".concat(p," ").concat(c,"\uc8fc \ub9e4\ub3c4 \uc644\ub8cc!\n\uc218\uc775: ").concat(k(g)).concat(f,"\n\uc218\uc218\ub8cc: ").concat(k(x),"\n\uc21c\uc218\uc775: ").concat(k(b)))}catch(f){console.error("[sellStock] \ub9e4\ub3c4 \uc2e4\ud328:",f),q&&q({cash:-y}),alert(f.message||"\ub9e4\ub3c4 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{se(!1)}},[Q,Y,e,t,ae,V,me,Te,H,q,_]),Me=(0,n.useCallback)(async t=>{if(e&&V&&window.confirm("\uc774 \uc0c1\ud488(\ud734\uc9c0\uc870\uac01)\uc744 \ud3ec\ud2b8\ud3f4\ub9ac\uc624\uc5d0\uc11c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await(0,l.kd)((0,l.H9)(i.db,"users",e.uid,"portfolio",t));const a=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(a),E("PORTFOLIO_user_".concat(e.uid)),await Te(!0),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},[e,V,Te]),De=(0,n.useCallback)(async()=>{if(!H||!V||!e)throw new Error("Firebase Functions\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");try{m.vF.log("[manualUpdateStockMarket] \uc218\ub3d9 \uc5c5\ub370\uc774\ud2b8 \uc2dc\uc791");const t=(0,o.Qg)(H,"manualUpdateStockMarket"),a=await t({});m.vF.log("[manualUpdateStockMarket] \uc5c5\ub370\uc774\ud2b8 \uc131\uacf5:",a.data);const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});return d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),a.data}catch(t){throw console.error("[manualUpdateStockMarket] \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t),t}},[H,V,e,Te]),Pe=(0,n.useCallback)(async()=>{if(!H||!V||!e)throw new Error("Firebase Functions\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");try{m.vF.log("[createRealStocks] \uc2e4\uc81c \uc8fc\uc2dd \uc0dd\uc131 \uc2dc\uc791");const t=(0,o.Qg)(H,"createRealStocks"),a=await t({});m.vF.log("[createRealStocks] \uc0dd\uc131 \uc131\uacf5:",a.data);const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});return d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),a.data}catch(t){throw console.error("[createRealStocks] \uc0dd\uc131 \uc2e4\ud328:",t),t}},[H,V,e,Te]),Oe=(0,n.useCallback)(async()=>{if(!H||!V||!e)throw new Error("Firebase Functions\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");try{m.vF.log("[updateRealStocks] \uc2e4\uc81c \uc8fc\uc2dd \uc5c5\ub370\uc774\ud2b8 \uc2dc\uc791");const t=(0,o.Qg)(H,"updateRealStocks"),a=await t({});m.vF.log("[updateRealStocks] \uc5c5\ub370\uc774\ud2b8 \uc131\uacf5:",a.data);const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});return d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),a.data}catch(t){throw console.error("[updateRealStocks] \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t),t}},[H,V,e,Te]),Ke=(0,n.useCallback)(async t=>{let{name:a,symbol:s,sector:n,productType:c}=t;if(!H||!V||!e)throw new Error("Firebase Functions\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");try{m.vF.log("[addSingleRealStock] \uac1c\ubcc4 \uc2e4\uc81c \uc8fc\uc2dd \ucd94\uac00 \uc2dc\uc791:",a);const t=(0,o.Qg)(H,"addSingleRealStock"),i=await t({name:a,symbol:s,sector:n,productType:c});m.vF.log("[addSingleRealStock] \ucd94\uac00 \uc131\uacf5:",i.data);const r=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});return d.Eb.invalidate(r),E("STOCKS_".concat(V)),await Te(!0),i.data}catch(i){throw console.error("[addSingleRealStock] \ucd94\uac00 \uc2e4\ud328:",i),i}},[H,V,e,Te]),ze=(0,n.useCallback)(async()=>{if(!H||!V||!e)throw new Error("Firebase Functions\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");try{m.vF.log("[deleteSimulationStocks] \uc2dc\ubbac\ub808\uc774\uc158 \uc8fc\uc2dd \uc0ad\uc81c \uc2dc\uc791");const t=(0,o.Qg)(H,"deleteSimulationStocks"),a=await t({});m.vF.log("[deleteSimulationStocks] \uc0ad\uc81c \uc131\uacf5:",a.data);const s=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});return d.Eb.invalidate(s),E("STOCKS_".concat(V)),await Te(!0),a.data}catch(t){throw console.error("[deleteSimulationStocks] \uc0ad\uc81c \uc2e4\ud328:",t),t}},[H,V,e,Te]),He=(0,n.useMemo)(()=>{const e=new Map;return Q.forEach(t=>e.set(t.id,t)),e},[Q]),qe=(0,n.useMemo)(()=>{let e=0,t=0;Y.forEach(a=>{const s=a.averagePrice*a.quantity;if(t+=s,!a.delistedAt){const t=He.get(a.stockId);t&&t.isListed&&(e+=t.price*a.quantity)}});const a=e-t;return{totalValue:e,totalInvested:t,totalProfit:a,profitPercent:t>0?a/t*100:0}},[Y,He]),_e=(0,n.useMemo)(()=>{const e={stocks:0,etfs:0,bonds:0};return Q.forEach(t=>{t.isListed&&(t.productType===h?e.etfs++:t.productType===x?e.bonds++:e.stocks++)}),e},[Q]),Ve=(0,n.useMemo)(()=>Q.filter(e=>!!e.isListed&&("stocks"===ie?e.productType===p||!e.productType:"etfs"===ie?e.productType===h:"bonds"===ie&&e.productType===x)),[Q,ie]),[We,Qe]=(0,n.useState)(!1),Ue=(0,n.useMemo)(()=>We?Ve:Ve.slice(0,20),[Ve,We]),Ye=(0,n.useCallback)(()=>{if(!V||!e)return;const t=d.Eb.generateKey("BATCH",{classCode:V,userId:e.uid});d.Eb.invalidate(t),Te(!0)},[Te,V,e]);return O||!z?(0,F.jsx)("div",{className:"loading-message",children:"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."}):e&&t?a()||V&&"\ubbf8\uc9c0\uc815"!==V?V||O?X&&a()?(0,F.jsx)(K,{stocks:Q,classCode:V,onClose:()=>Z(!1),onAddStock:Ee,onDeleteStock:Re,onEditStock:Fe,onToggleManualStock:Ie,cacheStats:be,onManualUpdate:De,onCreateRealStocks:Pe,onUpdateRealStocks:Oe,onAddSingleRealStock:Ke,onDeleteSimulationStocks:ze}):(0,F.jsxs)("div",{className:"stock-exchange-container",children:[(0,F.jsx)("header",{className:"stock-header",children:(0,F.jsxs)("div",{className:"stock-header-content",children:[(0,F.jsxs)("div",{className:"logo-title",children:[(0,F.jsx)(D,{size:32,color:"white"}),(0,F.jsxs)("h1",{children:["\ud22c\uc790 \uac70\ub798\uc18c (",V,")"]})]}),(0,F.jsx)("div",{className:"market-status ".concat(me?"open":"closed"),children:me?"\u25cf \uac1c\uc7a5":"\u25cb \ub9c8\uac10"}),(0,F.jsxs)("div",{className:"stock-header-actions",children:[(0,F.jsx)("div",{className:"user-info-display",children:k(t.cash)}),a()&&(0,F.jsxs)("button",{onClick:()=>Z(!0),className:"btn btn-primary",children:[(0,F.jsx)(L,{size:16})," \uad00\ub9ac"]}),(null===t||void 0===t?void 0:t.isSuperAdmin)&&(0,F.jsx)("button",{onClick:Ce,disabled:ye,className:"btn ".concat(he?"btn-warning":"btn-secondary"),style:{marginLeft:"8px"},title:he?"\ubc29\ud559 \ubaa8\ub4dc ON - \uc2a4\ucf00\uc904\ub7ec \uc911\uc9c0\ub428":"\ubc29\ud559 \ubaa8\ub4dc OFF - \uc2a4\ucf00\uc904\ub7ec \uc791\ub3d9 \uc911",children:ye?"...":he?"\ud83c\udfd6\ufe0f \ubc29\ud559\ubaa8\ub4dc ON":"\ud83d\udcc5 \ubc29\ud559\ubaa8\ub4dc OFF"})]})]})}),(0,F.jsxs)("main",{className:"market-section",children:[(0,F.jsxs)("section",{className:"asset-summary",children:[(0,F.jsxs)("div",{className:"asset-cards",children:[(0,F.jsx)("div",{className:"asset-card",children:(0,F.jsxs)("div",{className:"asset-card-content",children:[(0,F.jsxs)("div",{className:"asset-card-info",children:[(0,F.jsx)("h3",{children:"\ud22c\uc790 \ud3c9\uac00\uc561"}),(0,F.jsx)("p",{className:"value",children:k(qe.totalValue)})]}),(0,F.jsx)("div",{className:"asset-card-icon blue",children:"\ud83d\udcca"})]})}),(0,F.jsx)("div",{className:"asset-card",children:(0,F.jsxs)("div",{className:"asset-card-content",children:[(0,F.jsxs)("div",{className:"asset-card-info",children:[(0,F.jsx)("h3",{children:"\ucd1d \uc790\uc0b0"}),(0,F.jsx)("p",{className:"value",children:k(t.cash+qe.totalValue)})]}),(0,F.jsx)("div",{className:"asset-card-icon purple",children:"\ud83d\udc8e"})]})}),(0,F.jsx)("div",{className:"asset-card",children:(0,F.jsxs)("div",{className:"asset-card-content",children:[(0,F.jsxs)("div",{className:"asset-card-info",children:[(0,F.jsx)("h3",{children:"\ud3c9\uac00\uc190\uc775"}),(0,F.jsx)("p",{className:"value ".concat(qe.totalProfit>=0?"profit-positive":"profit-negative"),children:k(qe.totalProfit)})]}),(0,F.jsx)("div",{className:"asset-card-icon ".concat(qe.totalProfit>=0?"red":"blue"),children:qe.totalProfit>=0?(0,F.jsx)(I,{size:24,color:"white"}):(0,F.jsx)(B,{size:24,color:"white"})})]})}),(0,F.jsx)("div",{className:"asset-card",children:(0,F.jsxs)("div",{className:"asset-card-content",children:[(0,F.jsxs)("div",{className:"asset-card-info",children:[(0,F.jsx)("h3",{children:"\uc218\uc775\ub960"}),(0,F.jsx)("p",{className:"value ".concat(qe.profitPercent>=0?"profit-positive":"profit-negative"),children:S(qe.profitPercent)})]}),(0,F.jsx)("div",{className:"asset-card-icon ".concat(qe.profitPercent>=0?"red":"blue"),children:qe.profitPercent>=0?(0,F.jsx)(I,{size:24,color:"white"}):(0,F.jsx)(B,{size:24,color:"white"})})]})})]}),a()&&(0,F.jsxs)("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#f0f9ff",borderRadius:"6px",fontSize:"0.8rem",color:"#0369a1",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)("div",{children:["\ud83d\ude80 \uc131\ub2a5 \ucd5c\uc801\ud654 \uc0c1\ud0dc: \uce90\uc2dc \uc801\uc911 ",be.hits,"\ud68c, \ub204\ub77d ",be.misses,"\ud68c (\uc808\uc57d\ub960: ",be.hits+be.misses>0?Math.round(be.hits/(be.hits+be.misses)*100):0,"%)"]}),ve&&(0,F.jsxs)("div",{children:["\ub9c8\uc9c0\ub9c9 \ubc30\uce58\ub85c\ub4dc: ",ve.toLocaleTimeString()]})]})]}),(0,F.jsxs)("section",{className:"market-list-section",children:[(0,F.jsxs)("div",{className:"section-header",children:[(0,F.jsx)("h2",{className:"section-title",children:"\ud83d\udcc8 \ud22c\uc790 \uc2dc\uc7a5"}),(0,F.jsxs)("div",{className:"update-indicator",children:[(0,F.jsxs)("button",{onClick:Ye,disabled:de,className:"btn btn-secondary",style:{padding:"4px 8px",fontSize:"0.75rem"},children:[(0,F.jsx)(M,{size:12}),de?"\uac31\uc2e0\uc911...":"\uc0c8\ub85c\uace0\uce68"]}),re&&(0,F.jsxs)("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["\ub9c8\uc9c0\ub9c9 \uac31\uc2e0: ",re.toLocaleTimeString()]})]})]}),(0,F.jsxs)("div",{className:"market-tabs",children:[(0,F.jsxs)("button",{onClick:()=>oe("stocks"),className:"tab-button ".concat("stocks"===ie?"active":""),children:["\uc8fc\uc2dd (",_e.stocks,")"]}),(0,F.jsxs)("button",{onClick:()=>oe("etfs"),className:"tab-button ".concat("etfs"===ie?"active":""),children:["ETF/\uc9c0\uc218 (",_e.etfs,")"]}),(0,F.jsxs)("button",{onClick:()=>oe("bonds"),className:"tab-button ".concat("bonds"===ie?"active":""),children:["\ucc44\uad8c (",_e.bonds,")"]})]}),(0,F.jsx)("div",{className:"market-grid",children:Ue.map(e=>{var t;const a=e.priceHistory||[e.price],n=a.length>=2?(a.slice(-1)[0]-a.slice(-2)[0])/a.slice(-2)[0]*100:0,c=!0===e.isRealStock;return(0,F.jsxs)("div",{className:"stock-card ".concat(n>0?"price-up":n<0?"price-down":""," ").concat(c?"real-stock":""),children:[(0,F.jsxs)("div",{className:"stock-card-header",children:[(0,F.jsxs)("div",{className:"stock-info",children:[(0,F.jsxs)("h3",{children:[C(e.productType)," ",e.name]}),(0,F.jsxs)("div",{className:"stock-badges",children:[c&&(0,F.jsx)("span",{className:"stock-badge real",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontWeight:"bold",fontSize:"0.7rem",padding:"2px 6px",borderRadius:"4px",marginRight:"4px"},children:"\uc2e4\uc2dc\uac04"}),(0,F.jsx)("span",{className:"stock-badge ".concat(A(e.productType)),children:e.productType===x?"".concat(e.maturityYears,"\ub144 ").concat(e.couponRate,"%"):(null===(t=y[e.sector])||void 0===t?void 0:t.name)||"\uae30\ud0c0"})]})]}),(0,F.jsxs)("div",{className:"stock-price-section",children:[(0,F.jsx)("div",{className:"stock-price",children:k(e.price)}),(0,F.jsx)("div",{className:"stock-change ".concat(n>0?"up":"down"),children:(0,F.jsx)("span",{children:S(n)})}),c&&(0,F.jsx)("div",{style:{fontSize:"0.7rem",color:"#6b7280",marginTop:"2px"},children:j(e)||"\uc7a5\ub9c8\uac10"})]})]}),(0,F.jsxs)("div",{className:"stock-actions",children:[(0,F.jsx)("input",{type:"number",min:"1",value:J[e.id]||"",onChange:t=>$(a=>(0,s.A)((0,s.A)({},a),{},{[e.id]:t.target.value})),placeholder:"\uc218\ub7c9",className:"quantity-input"}),(0,F.jsx)("button",{onClick:()=>Be(e.id,J[e.id]),disabled:!J[e.id]||ae||!me,className:"trade-button buy",children:"\ub9e4\uc218"})]}),(0,F.jsx)("div",{className:"cost-display",children:J[e.id]&&"\uc608\uc0c1 \ube44\uc6a9: ".concat(k(e.price*parseInt(J[e.id])*1.003))})]},e.id)})}),Ve.length>20&&(0,F.jsx)("div",{className:"load-more-container",children:(0,F.jsx)("button",{onClick:()=>Qe(!We),className:"load-more-button",children:We?"\uc811\uae30":"\ub354 \ubcf4\uae30"})})]}),(0,F.jsxs)("section",{className:"portfolio-section",children:[(0,F.jsx)("div",{className:"section-header",children:(0,F.jsx)("h2",{className:"section-title",children:"\ud83d\udcbc \ub0b4 \ud3ec\ud2b8\ud3f4\ub9ac\uc624"})}),(0,F.jsx)("div",{className:"portfolio-cards",children:0===Y.length?(0,F.jsx)("p",{className:"no-transactions",children:"\ubcf4\uc720\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):Y.map(e=>{const t=He.get(e.stockId);if(e.isWorthless)return(0,F.jsxs)("div",{className:"portfolio-card delisted",children:[(0,F.jsxs)("div",{className:"portfolio-card-header",children:[(0,F.jsxs)("div",{className:"stock-title-section",children:[(0,F.jsx)("h3",{className:"stock-name",children:e.stockName}),(0,F.jsx)("span",{className:"stock-status delisted",children:"\ud83d\uddd1\ufe0f \ud734\uc9c0\uc870\uac01"})]}),(0,F.jsxs)("div",{className:"stock-quantity",children:[e.quantity,(0,F.jsx)("span",{className:"unit",children:"\uc8fc"})]})]}),(0,F.jsx)("div",{className:"portfolio-metrics-compact",children:(0,F.jsxs)("div",{className:"metrics-row",children:[(0,F.jsxs)("div",{className:"metric-item",children:[(0,F.jsx)("span",{className:"metric-label",children:"\ud604\uc7ac \uac00\uce58"}),(0,F.jsx)("span",{className:"metric-value",style:{color:"#ef4444",fontWeight:"bold"},children:"0\uc6d0"})]}),(0,F.jsxs)("div",{className:"metric-item",children:[(0,F.jsx)("span",{className:"metric-label",children:"\uc190\uc2e4"}),(0,F.jsx)("span",{className:"metric-value",style:{color:"#ef4444"},children:"-100%"})]})]})}),(0,F.jsx)("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"8px"},children:"\uc0c1\uc7a5\ud3d0\uc9c0\ub41c \uc0c1\ud488\uc785\ub2c8\ub2e4. 10\ubd84 \ud6c4 \uc790\ub3d9 \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),(0,F.jsx)("div",{className:"portfolio-card-actions",children:(0,F.jsx)("button",{onClick:()=>Me(e.id),className:"action-btn delete-btn",children:"\uc9c0\uae08 \uc0ad\uc81c"})})]},e.id);if(!t)return null;const a=t.price*e.quantity,n=e.averagePrice*e.quantity,c=a-n,i=n>0?c/n*100:0,o=!!ne[e.id];return(0,F.jsxs)("div",{className:"portfolio-card ".concat(c>=0?"profit":"loss"),children:[(0,F.jsxs)("div",{className:"portfolio-card-header",children:[(0,F.jsxs)("div",{className:"stock-title-section",children:[(0,F.jsxs)("h3",{className:"stock-name",children:[C(t.productType)," ",e.stockName]}),o&&(0,F.jsxs)("span",{style:{fontSize:"0.75rem",padding:"2px 8px",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontWeight:"bold",display:"inline-flex",alignItems:"center",gap:"4px"},children:[(0,F.jsx)(P,{size:12}),"\ub9e4\ub3c4 \ubd88\uac00"]})]}),(0,F.jsxs)("div",{className:"stock-quantity",children:[e.quantity,(0,F.jsx)("span",{className:"unit",children:"\uc8fc"})]})]}),(0,F.jsx)("div",{className:"portfolio-metrics-compact",children:(0,F.jsxs)("div",{className:"metrics-row",children:[(0,F.jsxs)("div",{className:"metric-item",children:[(0,F.jsx)("span",{className:"metric-label",children:"\ud3c9\uade0 \ub9e4\uc218\uac00"}),(0,F.jsx)("span",{className:"metric-value",children:k(e.averagePrice)})]}),(0,F.jsxs)("div",{className:"metric-item",children:[(0,F.jsx)("span",{className:"metric-label",children:"\ud604\uc7ac\uac00"}),(0,F.jsx)("span",{className:"metric-value current",children:k(t.price)})]})]})}),(0,F.jsxs)("div",{className:"profit-summary ".concat(c>=0?"profit":"loss"),children:[(0,F.jsx)("div",{className:"profit-amount",children:k(c)}),(0,F.jsx)("div",{className:"profit-percent",children:S(i)})]}),o&&(0,F.jsxs)("div",{style:{padding:"10px 12px",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"4px",marginTop:"8px",border:"1px solid #fbbf24"},children:[(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",color:"#92400e",fontWeight:"bold"},children:[(0,F.jsx)(P,{size:16}),(0,F.jsx)("span",{children:"\ub9e4\ub3c4 \uc81c\ud55c \uc2dc\uac04"})]}),(0,F.jsxs)("div",{style:{fontSize:"1.1rem",color:"#78350f",fontWeight:"bold",textAlign:"center",marginTop:"4px",fontFamily:"monospace"},children:["\u23f1\ufe0f ",N(ne[e.id])," \ub0a8\uc74c"]})]}),(0,F.jsx)("div",{className:"portfolio-card-actions",children:(0,F.jsxs)("div",{className:"trade-section",children:[(0,F.jsxs)("div",{className:"trade-input-group",children:[(0,F.jsx)("input",{type:"number",min:"1",max:e.quantity,value:ee[e.id]||"",onChange:t=>te(a=>(0,s.A)((0,s.A)({},a),{},{[e.id]:t.target.value})),placeholder:"\ub9e4\ub3c4 \uc218\ub7c9",className:"trade-input",disabled:!!ne[e.id]||!me}),(0,F.jsx)("button",{onClick:()=>Le(e.id,ee[e.id]),disabled:!ee[e.id]||ae||!!ne[e.id]||!me,className:"action-btn sell-btn",children:"\ub9e4\ub3c4"})]}),ee[e.id]&&!ne[e.id]&&(0,F.jsxs)("div",{className:"expected-amount",children:["\uc608\uc0c1 \uc218\uc775: ",k(t.price*parseInt(ee[e.id])*.997-T(Math.max(0,(t.price-e.averagePrice)*parseInt(ee[e.id])),t.productType))]})]})})]},e.id)})})]})]})]}):(0,F.jsx)("div",{className:"loading-message",children:"\ucc38\uc5ec \uc911\uc778 \ud074\ub798\uc2a4 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}):(0,F.jsxs)("div",{className:"stock-exchange-container",children:[(0,F.jsx)("header",{className:"stock-header",children:(0,F.jsx)("div",{className:"stock-header-content",children:(0,F.jsxs)("div",{className:"logo-title",children:[(0,F.jsx)(D,{size:32,color:"white"}),(0,F.jsx)("h1",{children:"\ud22c\uc790 \uac70\ub798\uc18c"})]})})}),(0,F.jsx)("main",{className:"market-section",style:{justifyContent:"center",alignItems:"center",display:"flex"},children:(0,F.jsxs)("div",{style:{textAlign:"center",padding:"20px",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,F.jsx)("h2",{children:"\ud559\uae09 \ubbf8\ubc30\uc815 \uc548\ub0b4"}),(0,F.jsx)("p",{style:{marginTop:"10px",fontSize:"1rem",color:"#333"},children:"\uc18c\uc18d\ub41c \ud559\uae09\uc774 \uc5c6\uc5b4 \uc8fc\uc2dd \uc2dc\uc7a5\uc744 \uc774\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,F.jsx)("p",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#666"},children:"\ub2f4\ub2f9 \uc120\uc0dd\ub2d8\uaed8 \ubb38\uc758\ud558\uc5ec \ud559\uae09\uc5d0 \ub4f1\ub85d\ud574\uc8fc\uc138\uc694."})]})})]}):(0,F.jsx)("div",{className:"loading-message",children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})}},7262(e,t,a){a(2555),a(5010),a(5472),a(5452)}}]);
//# sourceMappingURL=398.03316f18.chunk.js.map