{"version":3,"file":"static/js/306.a3377f7a.chunk.js","mappings":"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","sources":["components/LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/modals/DonateCouponModal.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","contexts/ItemContext.js","utils/firestoreHelpers.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","utils/avatarSystem.js","components/Avatar.js","utils/levelSystem.js","utils/achievementSystem.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","components/modals/TransferModal.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","components/DailyReward.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","pages/my-assets/MyAssets.js","pages/market/PersonalShop.js","pages/banking/ParkingAccount.js","pages/banking/Banking.js","components/AvatarEditor.js","pages/my-profile/MyProfile.js","components/AlchanLayout.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronRight, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, Sparkles, LogOut,\r\n  Boxes, Store, RefreshCw, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  Briefcase, ListTodo, LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category -  ( )\r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n\r\n  //  /  \r\n  { id: 'adminUserGroup', label: '  ', icon: Users, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'classMemberManagement', label: ' ', icon: Users, path: '/admin/class-members', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminAssetGroup', label: '  ', icon: Banknote, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminSettingsGroup', label: '  ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminAppSettings', label: '/ ', icon: Target, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'taskManagement', label: ' ', icon: ListTodo, path: '/admin/task-management', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'jobManagement', label: ' ', icon: Briefcase, path: '/admin/job-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'salarySettings', label: ' ', icon: Banknote, path: '/admin/salary-settings', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //   \r\n  { id: 'adminSystemGroup', label: ' ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminPage', label: ' ', icon: Settings, path: '/admin/page', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight\" style={{ fontFamily: \"'Jua', sans-serif\", textShadow: '0 0 10px rgba(0, 255, 242, 0.5)' }}></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer\"\r\n              style={{ background: 'rgba(167, 139, 250, 0.2)' }}\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2]\" style={{ fontFamily: \"'Jua', sans-serif\" }}></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-l border-white/10 bg-transparent cursor-pointer\"\r\n              style={{ border: 'none' }}\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'marketControl') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"taskManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"taskManagement\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobSettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"studentManagement\");\r\n              loadStudents();\r\n            }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"salarySettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"salarySettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financialProducts\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financialProducts\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"marketControl\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"marketControl\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"parkingAccount\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"parkingAccount\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"memberManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"memberManagement\");\r\n              loadClassMembers();\r\n            }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"databaseManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"databaseManagement\")}\r\n          >\r\n            \r\n          </button>\r\n          {isSuperAdmin && (\r\n            <button\r\n              className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"systemManagement\" ? \"active\" : \"\"}`}\r\n              onClick={() => setAdminSelectedMenu(\"systemManagement\")}\r\n            >\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"taskManagement\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobSettings\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentManagement\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"financialProducts\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"marketControl\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"parkingAccount\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               -  (    )\r\n            ======================================== */}\r\n\r\n        {/*     */}\r\n        {adminSelectedMenu === \"memberManagement\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"salarySettings\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"databaseManagement\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"systemManagement\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    cacheTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    cacheTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    cacheTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    cacheTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\nimport { DailyRewardBanner, getStreakInfo, claimDailyReward } from \"../../components/DailyReward\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    logger.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n  //     -     \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        //      (  )\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, {\r\n        cash: increment(rewardAmount),\r\n      });\r\n\r\n      //  \r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n\r\n      //   (  )\r\n      setTimeout(() => {\r\n        setShowDailyRewardPopup(false);\r\n      }, 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\"> </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: \"rgba(0, 0, 0, 0.7)\",\r\n            backdropFilter: \"blur(4px)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n            padding: \"20px\",\r\n            animation: \"fadeIn 0.3s ease-out\",\r\n          }}\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              maxWidth: \"400px\",\r\n              animation: \"slideUp 0.3s ease-out\",\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/*   */}\r\n            <div style={{ textAlign: \"right\", marginBottom: \"8px\" }}>\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                style={{\r\n                  background: \"rgba(255,255,255,0.2)\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  width: \"32px\",\r\n                  height: \"32px\",\r\n                  borderRadius: \"50%\",\r\n                  cursor: \"pointer\",\r\n                  fontSize: \"18px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*    */}\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n\r\n            {/*    */}\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              marginTop: \"12px\",\r\n              color: \"rgba(255,255,255,0.6)\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\nimport { logger } from '../../utils/logger';\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // isAdmin   \r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n\r\n        // eslint-disable-next-line react-hooks/rules-of-hooks\r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      logger.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      logger.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    logger.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      logger.log('[MyItems]   inventory   :');\r\n      logger.log(':', allInventoryDocs.size);\r\n      logger.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      logger.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      logger.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          logger.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          logger.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      logger.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            logger.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            logger.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            logger.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            logger.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          logger.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          logger.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          logger.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          logger.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          logger.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      logger.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      logger.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        logger.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        logger.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          logger.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          logger.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          logger.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          logger.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          logger.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      logger.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                logger.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                          <button className=\"sell-to-market-button\" onClick={() => {\r\n                            handleOpenSellToMarketModal(group);\r\n                          }} disabled={isSyncing}> </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/pages/my-assets/MyAssets.js - Firestore      \r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  arrayUnion,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n} from \"../../firebase\";\r\nimport { limit, runTransaction } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { DailyRewardBanner } from \"../../components/DailyReward\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nexport default function MyAssets() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users, //    (    )\r\n    classmates, // ''     (,  )\r\n    allClassMembers, //  [] ''      (  )\r\n    loading: authLoading,\r\n    updateUser: updateUserInAuth,\r\n    addCashToUserById,\r\n    deductCash,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const userName =\r\n    userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  //  [ 1]   \r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false); //    \r\n  const dataFetchRef = useRef({}); //    \r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [deposits, setDeposits] = useState([]); //   \r\n  const [savings, setSavings] = useState([]); //   \r\n  const [loans, setLoans] = useState([]);\r\n  const [realEstateAssets, setRealEstateAssets] = useState([]);\r\n  const [totalNetAssets, setTotalNetAssets] = useState(0);\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n  const [transactionHistory, setTransactionHistory] = useState([]);\r\n  const [forceReload, setForceReload] = useState(0); //      \r\n\r\n  //  [ 2] Firebase Functions   ( )\r\n  const getUserAssetsDataFunction = httpsCallable(functions, 'getUserAssetsData');\r\n  const sellCouponFunction = httpsCallable(functions, 'sellCoupon');\r\n  const giftCouponFunction = httpsCallable(functions, 'giftCoupon');\r\n\r\n  //  [ 4]    \r\n  const CACHE_DURATION = 60 * 60 * 1000; //  [] 1 (Firestore  )\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  //  [ ] Firestore    \r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[MyAssets]     :\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] =\r\n    useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [transferRecipient, setTransferRecipient] = useState(\"\");\r\n  const [transferAmount, setTransferAmount] = useState(\"\");\r\n  const [showAllTransactions, setShowAllTransactions] = useState(false); //   / \r\n\r\n  //  [ 1]  timestamp  \r\n  const safeTimestampToDate = (timestamp) => {\r\n    try {\r\n      // null undefined \r\n      if (!timestamp) {\r\n        return new Date();\r\n      }\r\n\r\n      //  Date  \r\n      if (timestamp instanceof Date) {\r\n        return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n      }\r\n\r\n      // Firestore Timestamp  \r\n      if (timestamp && typeof timestamp.toDate === 'function') {\r\n        const date = timestamp.toDate();\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // seconds   Firestore Timestamp  \r\n      if (timestamp && timestamp.seconds) {\r\n        const date = new Date(timestamp.seconds * 1000);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // ISO  \r\n      if (typeof timestamp === 'string') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //   \r\n      if (typeof timestamp === 'number') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //     \r\n      return new Date();\r\n    } catch (error) {\r\n      return new Date();\r\n    }\r\n  };\r\n\r\n  //  [ 5]    \r\n  const isCacheValid = (cacheKey) => {\r\n    const cachedTime = dataFetchRef.current[cacheKey];\r\n    return cachedTime && (Date.now() - cachedTime) < CACHE_DURATION;\r\n  };\r\n\r\n  //  [ 6] localStorage   \r\n  const getCachedFirestoreData = (key) => {\r\n    try {\r\n      const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached);\r\n        if (Date.now() - timestamp < CACHE_DURATION) {\r\n          return data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const setCachedFirestoreData = (key, data) => {\r\n    try {\r\n      const cacheItem = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      localStorage.setItem(`firestore_cache_${key}_${userId}`, JSON.stringify(cacheItem));\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 2]     -     \r\n  const addTransaction = async (userId, amount, description) => {\r\n    try {\r\n      //    \r\n      const localKey = `pending_transactions_${userId}`;\r\n      const existing = localStorage.getItem(localKey);\r\n      const pendingTransactions = existing ? JSON.parse(existing) : [];\r\n\r\n      //   timestamp   - Date  \r\n      const now = new Date();\r\n      const newTransaction = {\r\n        id: `local_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        amount: Number(amount) || 0, //   \r\n        description: String(description) || \" \", //   \r\n        timestamp: now, // Date   \r\n        timestampISO: now.toISOString(), // ISO  \r\n        synced: false,\r\n      };\r\n\r\n      pendingTransactions.push(newTransaction);\r\n      localStorage.setItem(localKey, JSON.stringify(pendingTransactions, (key, value) => {\r\n        // Date  JSON   ISO  \r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n      //    \r\n      setTransactionHistory(prev => [newTransaction, ...prev.slice(0, 4)]);\r\n\r\n\r\n      //  [ 3]    (    )\r\n      setTimeout(async () => {\r\n        try {\r\n          await syncPendingTransactions(userId);\r\n        } catch (error) {\r\n        }\r\n      }, 1000);\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 4]     \r\n  const syncPendingTransactions = async (userId) => {\r\n    const localKey = `pending_transactions_${userId}`;\r\n    const pendingStr = localStorage.getItem(localKey);\r\n\r\n    if (!pendingStr) return;\r\n\r\n    try {\r\n      const pendingTransactions = JSON.parse(pendingStr, (key, value) => {\r\n        // JSON Date  \r\n        if (key === 'timestamp' && typeof value === 'string') {\r\n          return new Date(value);\r\n        }\r\n        return value;\r\n      });\r\n\r\n      const unsyncedTransactions = pendingTransactions.filter(tx => !tx.synced);\r\n\r\n      if (unsyncedTransactions.length === 0) return;\r\n\r\n      const batch = writeBatch(db);\r\n      const userTransactionsRef = collection(db, \"users\", userId, \"transactions\");\r\n\r\n      unsyncedTransactions.forEach(tx => {\r\n        const docRef = doc(userTransactionsRef);\r\n        batch.set(docRef, {\r\n          amount: tx.amount,\r\n          description: tx.description,\r\n          timestamp: serverTimestamp(), // Firestore serverTimestamp \r\n          localTimestamp: tx.timestampISO || tx.timestamp, //   \r\n          syncedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //   \r\n      const updatedTransactions = pendingTransactions.map(tx =>\r\n        unsyncedTransactions.find(utx => utx.id === tx.id)\r\n          ? { ...tx, synced: true }\r\n          : tx\r\n      );\r\n\r\n      localStorage.setItem(localKey, JSON.stringify(updatedTransactions, (key, value) => {\r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ ]          \r\n  const createDefaultGoalForClass = useCallback(async (classCode, goalId) => {\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", goalId);\r\n      const defaultGoalData = {\r\n        classCode: classCode,\r\n        targetAmount: 1000,\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        title: `${classCode}  `,\r\n        description: `${classCode}   .`,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        createdBy: userId,\r\n      };\r\n\r\n      //        ( )\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n        if (!goalDoc.exists()) {\r\n          transaction.set(goalDocRef, defaultGoalData);\r\n          setCachedFirestoreData(`goal_${goalId}`, defaultGoalData);\r\n        } else {\r\n          const existingData = goalDoc.data();\r\n          setCachedFirestoreData(`goal_${goalId}`, existingData);\r\n        }\r\n      });\r\n\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userId]);\r\n\r\n  //  []     -    \r\n  const loadGoalData = useCallback(async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const cacheKey = `goal_${currentGoalId}`;\r\n    const cachedData = getCachedFirestoreData(cacheKey);\r\n\r\n    if (cachedData) {\r\n      setClassCouponGoal(Number(cachedData.targetAmount) || 1000);\r\n      setGoalProgress(Number(cachedData.progress) || 0);\r\n\r\n      const donations = Array.isArray(cachedData.donations) ? cachedData.donations : [];\r\n      setGoalDonations(donations);\r\n\r\n      const myDonations = donations.filter(d => d.userId === userId);\r\n      const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n      setMyContribution(myTotal);\r\n\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        //   \r\n        setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n        //   \r\n        const donations = Array.isArray(goalData.donations)\r\n          ? goalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(donations);\r\n\r\n        //   \r\n        const myDonations = donations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //   \r\n        setCachedFirestoreData(cacheKey, goalData);\r\n      } else {\r\n        //     \r\n        logger.log('[MyAssets]     ');\r\n        await createDefaultGoalForClass(currentUserClassCode, currentGoalId);\r\n      }\r\n    } catch (error) {\r\n      logger.error('[MyAssets]    :', error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentGoalId, currentUserClassCode, userId, createDefaultGoalForClass]);\r\n\r\n  const loadMyAssetsData = useCallback(async () => {\r\n    if (!userId || !db) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    //      \r\n    if (loadingRef.current) {\r\n      logger.log('[MyAssets]       ');\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //  []     (limit )\r\n      const realEstateRef1 = query(collection(db, \"classes\", currentUserClassCode, \"realEstateProperties\"), where(\"owner\", \"==\", userId), limit(50));\r\n      const realEstateRef2 = query(collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"realestates\"), limit(50));\r\n      const realEstateRef3 = query(collection(db, \"realEstate\"), where(\"ownerId\", \"==\", userId), limit(50));\r\n\r\n      const [snap1, snap2, snap3] = await Promise.all([\r\n        getDocs(realEstateRef1),\r\n        getDocs(realEstateRef2),\r\n        getDocs(realEstateRef3),\r\n      ]);\r\n\r\n      const allRealEstateAssets = [];\r\n      snap1.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap2.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap3.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n\r\n      //    (  )\r\n      const parkingRef1 = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRef2 = collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"parkingAccounts\");\r\n\r\n      const [parkingSnap1, parkingSnap2] = await Promise.all([\r\n        getDoc(parkingRef1),\r\n        getDocs(parkingRef2),\r\n      ]);\r\n\r\n      let totalParkingBalance = 0;\r\n      if (parkingSnap1.exists()) {\r\n        totalParkingBalance += parkingSnap1.data().balance || 0;\r\n      }\r\n\r\n      parkingSnap2.forEach(doc => {\r\n        totalParkingBalance += doc.data().balance || 0;\r\n      });\r\n\r\n      setParkingBalance(totalParkingBalance);\r\n\r\n      //  []    (, ,   products  )\r\n      const productsRef = query(collection(db, \"users\", userId, \"products\"), limit(50));\r\n      const productsSnap = await getDocs(productsRef);\r\n\r\n      const depositsData = [];\r\n      const savingsData = [];\r\n      const loansData = [];\r\n\r\n      productsSnap.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') depositsData.push(product);\r\n        else if (product.type === 'savings') savingsData.push(product);\r\n        else if (product.type === 'loan') loansData.push(product);\r\n      });\r\n\r\n      setDeposits(depositsData);\r\n      setSavings(savingsData);\r\n      setLoans(loansData);\r\n\r\n      setRealEstateAssets(allRealEstateAssets);\r\n\r\n      //  []    useEffect  (  )\r\n      // loadGoalData() [user, currentGoalId]  useEffect \r\n\r\n      //     - activity_logs + transactions   \r\n      let activityData = [];\r\n      let transactionsData = [];\r\n\r\n      // 1. activity_logs   \r\n      try {\r\n        const activityLogsRef = query(\r\n          collection(db, \"activity_logs\"),\r\n          where(\"classCode\", \"==\", currentUserClassCode),\r\n          where(\"userId\", \"==\", userId),\r\n          limit(30)\r\n        );\r\n        const activityLogsSnap = await getDocs(activityLogsRef);\r\n        activityData = activityLogsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || data.type || ' ',\r\n              timestamp: data.timestamp,\r\n              type: data.type,\r\n              couponAmount: data.couponAmount || 0,\r\n              source: 'activity_logs'\r\n            };\r\n          })\r\n          //       \r\n          .filter(tx => tx.amount !== 0 || tx.couponAmount !== 0);\r\n      } catch (activityError) {\r\n        logger.log('[MyAssets] activity_logs  :', activityError);\r\n      }\r\n\r\n      // 2.  transactions   ( )\r\n      try {\r\n        const transactionsRef = query(\r\n          collection(db, \"users\", userId, \"transactions\"),\r\n          limit(30)\r\n        );\r\n        const transactionsSnap = await getDocs(transactionsRef);\r\n        transactionsData = transactionsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || ' ',\r\n              timestamp: data.timestamp || data.createdAt,\r\n              type: data.type || 'transaction',\r\n              source: 'transactions'\r\n            };\r\n          })\r\n          .filter(tx => tx.amount !== 0);\r\n      } catch (transactionsError) {\r\n        logger.log('[MyAssets] transactions  :', transactionsError);\r\n      }\r\n\r\n      //    (  ID )\r\n      const allTransactions = [...activityData, ...transactionsData];\r\n\r\n      // timestamp  \r\n      allTransactions.sort((a, b) => {\r\n        const dateA = a.timestamp?.toDate ? a.timestamp.toDate() : new Date(a.timestamp?.seconds * 1000 || 0);\r\n        const dateB = b.timestamp?.toDate ? b.timestamp.toDate() : new Date(b.timestamp?.seconds * 1000 || 0);\r\n        return dateB - dateA;\r\n      });\r\n\r\n      //  20 \r\n      setTransactionHistory(allTransactions.slice(0, 20));\r\n\r\n    } catch (fallbackError) {\r\n      logger.error('[MyAssets]      :', fallbackError);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, [userId, currentUserClassCode]); // loadGoalData    \r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!authLoading && user) {\r\n      loadMyAssetsData();\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n      setParkingBalance(0);\r\n      setLoans([]);\r\n      setRealEstateAssets([]);\r\n      setTotalNetAssets(0);\r\n      setMyContribution(0);\r\n      setClassCouponGoal(1000);\r\n      setGoalProgress(0);\r\n      setCouponValue(1000);\r\n      setGoalDonations([]);\r\n      setTransactionHistory([]);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user]); // loadMyAssetsData    \r\n\r\n  useEffect(() => {\r\n    const cashValue = Number(userDoc?.cash) || 0;\r\n    const couponMonetaryValue = (Number(userDoc?.coupons) || 0) * Number(couponValue);\r\n    const realEstateValue = realEstateAssets.reduce(\r\n      (sum, asset) => sum + (Number(asset.price) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const depositsTotal = deposits.reduce(\r\n      (sum, deposit) => sum + (Number(deposit.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const savingsTotal = savings.reduce(\r\n      (sum, saving) => sum + (Number(saving.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance  - remainingPrincipal  balance )\r\n    const loanTotal = loans.reduce(\r\n      (sum, loan) => sum + (Number(loan.remainingPrincipal) || Number(loan.balance) || 0),\r\n      0\r\n    );\r\n    const calculatedTotalAssets =\r\n      cashValue +\r\n      couponMonetaryValue +\r\n      Number(parkingBalance) +\r\n      depositsTotal +\r\n      savingsTotal +\r\n      realEstateValue -\r\n      loanTotal;\r\n\r\n    setTotalNetAssets(calculatedTotalAssets);\r\n  }, [\r\n    userDoc?.cash,\r\n    userDoc?.coupons,\r\n    couponValue,\r\n    parkingBalance,\r\n    deposits,\r\n    savings,\r\n    realEstateAssets,\r\n    loans,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  //  []     -  \r\n  //       ( Firestore  )\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!user || !currentGoalId) {\r\n      return;\r\n    }\r\n\r\n    loadGoalData();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user, currentGoalId]); // loadGoalData    \r\n\r\n  //  []    -   \r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode) {\r\n      alert(\"       .\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"   .\");\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    const currentCoupons = Number(userDoc?.coupons) || 0;\r\n    if (currentCoupons < donationAmount) {\r\n      alert(` . (: ${currentCoupons}, : ${donationAmount})`);\r\n      return false;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    //   (UI  )\r\n    const previousProgress = goalProgress;\r\n    const previousMyContribution = myContribution;\r\n    const previousDonations = goalDonations;\r\n\r\n    const newDonation = {\r\n      userId: userId,\r\n      userName: userName,\r\n      amount: donationAmount,\r\n      timestamp: new Date().toISOString(),\r\n      timestampISO: new Date().toISOString(),\r\n      message: memo || '',\r\n      classCode: currentUserClassCode,\r\n    };\r\n\r\n    setGoalProgress(prev => prev + donationAmount);\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalDonations(prev => [...prev, newDonation]);\r\n\r\n    //    UI  ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n\r\n    try {\r\n      // 1.    (AuthContext )\r\n      const couponDeducted = await updateUserInAuth({\r\n        coupons: increment(-donationAmount)\r\n      });\r\n\r\n      if (!couponDeducted) {\r\n        throw new Error(\"  .\");\r\n      }\r\n\r\n      // 2. Firestore   \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n\r\n        if (!goalDoc.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n\r\n        const firestoreDonation = {\r\n          userId: userId,\r\n          userName: userName,\r\n          amount: donationAmount,\r\n          timestamp: serverTimestamp(),\r\n          timestampISO: new Date().toISOString(),\r\n          message: memo || '',\r\n          classCode: currentUserClassCode,\r\n        };\r\n\r\n        // progress   donations  \r\n        transaction.update(goalDocRef, {\r\n          progress: increment(donationAmount),\r\n          donations: arrayUnion(firestoreDonation),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      // 3. donations   (,  )\r\n      const donationRecordRef = doc(collection(db, \"donations\"));\r\n      await setDoc(donationRecordRef, {\r\n        userId: userId,\r\n        userName: userName,\r\n        amount: donationAmount,\r\n        timestamp: serverTimestamp(),\r\n        timestampISO: new Date().toISOString(),\r\n        message: memo || '',\r\n        classCode: currentUserClassCode,\r\n        goalId: currentGoalId,\r\n      });\r\n\r\n      // 4.  \r\n      await addTransaction(userId, -donationAmount * couponValue, `  ${donationAmount} `);\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_DONATE,\r\n        description: `   ${donationAmount} `,\r\n        couponAmount: -donationAmount,\r\n        metadata: {\r\n          goalId: currentGoalId,\r\n          goalProgress: goalProgress + donationAmount,\r\n          message: memo || ''\r\n        }\r\n      });\r\n\r\n      //  5.   (   )\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      alert(`${donationAmount}   !`);\r\n      setShowDonateModal(false);\r\n\r\n      //  6.     (  Firestore )\r\n      setTimeout(() => {\r\n        loadGoalData();\r\n      }, 500);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('[MyAssets]  :', error);\r\n      alert(` : ${error.message}`);\r\n\r\n      //      \r\n      setGoalProgress(previousProgress);\r\n      setMyContribution(previousMyContribution);\r\n      setGoalDonations(previousDonations);\r\n\r\n      //  \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []       \r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //    \r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`firestore_cache_settings_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      logger.log('[MyAssets]   , Firestore    ...');\r\n\r\n      //  Firestore    \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n\r\n        //   \r\n        const myDonations = freshDonations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //  \r\n        setCachedFirestoreData(cacheKey, latestGoalData);\r\n\r\n        alert(`   !\\n : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\n : ${freshDonations.length}\\n : ${myTotal}`);\r\n      } else {\r\n        alert(\"    .  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error('[MyAssets]   :', error);\r\n      alert(`    : ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []     \r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    alert(`   .\\n : ${goalDonations.length}\\n : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  //  [ ] 'resetCouponGoal'  async  \r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"       .\");\r\n      return;\r\n    }\r\n    if (\r\n      !window.confirm(\r\n        ` ${currentUserClassCode}      ?`\r\n      )\r\n    )\r\n      return;\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      //  []   limit \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode),\r\n        limit(100)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //  [ 23]      \r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`(${currentUserClassCode})     .`);\r\n    } catch (error) {\r\n      alert(`  : ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    //        UI  ( )\r\n    const cashGained = amount * couponValue;\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount, cash: cashGained });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_USE,\r\n        description: ` ${amount}  (${cashGained.toLocaleString()})`,\r\n        amount: cashGained,\r\n        couponAmount: -amount,\r\n        metadata: {\r\n          couponsSold: amount,\r\n          cashReceived: cashGained,\r\n          couponValue: couponValue\r\n        }\r\n      });\r\n\r\n      alert(`${amount}  .`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n      //  [] Firebase Function  userDoc \r\n      // AuthContext    UI  (loadMyAssetsData )\r\n    } catch (error) {\r\n      alert(` : ${error.message}`);\r\n\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: amount, cash: -cashGained });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}  ${amount} ?`)) {\r\n      //    UI  ( )\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: -amount });\r\n      }\r\n\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userName,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_SEND,\r\n          description: `${recipientUser.name}  ${amount} `,\r\n          couponAmount: -amount,\r\n          metadata: {\r\n            recipientId: recipientUser.id,\r\n            recipientName: recipientUser.name\r\n          }\r\n        });\r\n\r\n        //     (  ) -   \r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: recipientUser.id,\r\n          userName: recipientUser.name,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_RECEIVE,\r\n          description: `${userName}  ${amount} `,\r\n          couponAmount: amount,\r\n          metadata: {\r\n            senderId: userId,\r\n            senderName: userName\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n        //  [] Firebase Function  userDoc \r\n        // AuthContext    UI  (loadMyAssetsData )\r\n      } catch (error) {\r\n        alert(` : ${error.message}`);\r\n\r\n        //   \r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTransferMoney = async () => {\r\n    setAssetsLoading(true);\r\n    try {\r\n      if (\r\n        !userDoc ||\r\n        !userId ||\r\n        !db ||\r\n        !users ||\r\n        !deductCash ||\r\n        !addCashToUserById\r\n      ) {\r\n        alert(\"   .    .\");\r\n        return;\r\n      }\r\n\r\n      const amount = parseInt(transferAmount, 10);\r\n      if (isNaN(amount) || amount <= 0) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if ((Number(userDoc.cash) || 0) < amount) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const recipientUser = users.find((u) => u.id === transferRecipient);\r\n      if (!recipientUser) {\r\n        alert(\"    .    .\");\r\n        return;\r\n      }\r\n\r\n      if (recipientUser.id === userId) {\r\n        alert(\"    .\");\r\n        return;\r\n      }\r\n\r\n      const recipientName = recipientUser.name || recipientUser.nickname || \"\";\r\n\r\n      //      .\r\n      const deductSuccess = await deductCash(amount, `${recipientName} `);\r\n      if (deductSuccess) {\r\n        const addSuccess = await addCashToUserById(recipientUser.id, amount, `${userName} `);\r\n        if (addSuccess) {\r\n          //     ( )\r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: userId,\r\n            userName: userName,\r\n            type: ACTIVITY_TYPES.TRANSFER_SEND,\r\n            description: `${recipientName} ${amount.toLocaleString()} `,\r\n            amount: -amount,\r\n            metadata: {\r\n              recipientId: recipientUser.id,\r\n              recipientName: recipientName\r\n            }\r\n          });\r\n\r\n          //     ( ) -   \r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: recipientUser.id,\r\n            userName: recipientName,\r\n            type: ACTIVITY_TYPES.TRANSFER_RECEIVE,\r\n            description: `${userName} ${amount.toLocaleString()} `,\r\n            amount: amount,\r\n            metadata: {\r\n              senderId: userId,\r\n              senderName: userName\r\n            }\r\n          });\r\n\r\n          alert(\" .\");\r\n          setShowTransferModal(false);\r\n          setTransferRecipient(\"\");\r\n          setTransferAmount(\"\");\r\n        } else {\r\n          alert(\"     .  .\");\r\n          //       .\r\n          await addCashToUserById(userId, amount, \"   \");\r\n        }\r\n      } else {\r\n        alert(\"    .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"!!!        !!!\", error);\r\n      alert(`   : ${error.message}`);\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: parseInt(transferAmount, 10) || 0 });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForceRefresh = () => {\r\n    //  \r\n    const cacheKey = `myAssets_${userId}`;\r\n    localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n\r\n    logger.log('[MyAssets]      ');\r\n\r\n    //   \r\n    loadMyAssetsData();\r\n  };\r\n\r\n  const renderTitle = () => (\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n      <h2\r\n        style={{\r\n          fontSize: \"24px\",\r\n          fontWeight: \"bold\",\r\n          color: \"#00fff2\",\r\n          borderBottom: \"2px solid rgba(0, 255, 242, 0.2)\",\r\n          paddingBottom: \"10px\",\r\n          margin: 0,\r\n          textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n        }}\r\n      >\r\n           \r\n      </h2>\r\n      <button\r\n        onClick={handleForceRefresh}\r\n        disabled={assetsLoading}\r\n        style={{\r\n          padding: \"8px 16px\",\r\n          backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n          color: \"#00fff2\",\r\n          border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n          borderRadius: \"8px\",\r\n          fontSize: \"14px\",\r\n          fontWeight: \"600\",\r\n          cursor: assetsLoading ? \"not-allowed\" : \"pointer\",\r\n          opacity: assetsLoading ? 0.6 : 1,\r\n          transition: \"all 0.2s ease\",\r\n        }}\r\n      >\r\n         \r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderAssetSummary = () => {\r\n    const displayCash = Number(userDoc?.cash) || 0;\r\n    const displayCoupons = Number(userDoc?.coupons) || 0;\r\n\r\n    //     \r\n    const displayedTransactions = showAllTransactions\r\n      ? transactionHistory\r\n      : transactionHistory.slice(0, 5);\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          padding: \"0\",\r\n          background: \"transparent\",\r\n          marginBottom: \"25px\",\r\n        }}\r\n      >\r\n        {/*   -    */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(102, 126, 234, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"42px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            marginBottom: \"15px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {displayCash.toLocaleString()} <span style={{ fontSize: \"28px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <button\r\n              onClick={() => setShowTransferModal(true)}\r\n              style={{\r\n                padding: \"14px 28px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n                color: \"#667eea\",\r\n                border: \"none\",\r\n                borderRadius: \"12px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.1)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n              disabled={assetsLoading || authLoading}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = \"translateY(-2px)\";\r\n                e.target.style.boxShadow = \"0 6px 20px rgba(0,0,0,0.15)\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = \"translateY(0)\";\r\n                e.target.style.boxShadow = \"0 4px 15px rgba(0,0,0,0.1)\";\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    -      */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n               \r\n          </h4>\r\n          {transactionHistory.length > 0 ? (\r\n            <div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n                {displayedTransactions.map((tx) => {\r\n                  let displayDate = \" \";\r\n                  try {\r\n                    const validDate = safeTimestampToDate(tx.timestamp);\r\n                    displayDate = validDate.toLocaleDateString(\"ko-KR\", {\r\n                      month: \"2-digit\",\r\n                      day: \"2-digit\",\r\n                    });\r\n                  } catch (dateError) {\r\n                    displayDate = \"\";\r\n                  }\r\n\r\n                  const txAmount = Number(tx.amount) || 0;\r\n                  const txDescription = String(tx.description) || \" \";\r\n\r\n                  return (\r\n                    <div\r\n                      key={tx.id || Math.random()}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\",\r\n                        fontSize: \"14px\",\r\n                        color: \"#a0a0c0\",\r\n                        padding: \"14px 16px\",\r\n                        backgroundColor: txAmount > 0 ? \"rgba(5, 150, 105, 0.1)\" : \"rgba(220, 38, 38, 0.1)\",\r\n                        border: txAmount > 0 ? \"1px solid rgba(5, 150, 105, 0.3)\" : \"1px solid rgba(220, 38, 38, 0.3)\",\r\n                        borderRadius: \"10px\",\r\n                      }}\r\n                    >\r\n                      <span\r\n                        style={{\r\n                          flex: \"1\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                          marginRight: \"10px\",\r\n                          fontWeight: \"500\",\r\n                          color: \"#e8e8ff\"\r\n                        }}\r\n                      >\r\n                        {displayDate}  {txDescription}\r\n                      </span>\r\n                      <span\r\n                        style={{\r\n                          fontWeight: \"700\",\r\n                          fontSize: \"15px\",\r\n                          color: txAmount > 0 ? \"#34d399\" : \"#f87171\",\r\n                          minWidth: \"110px\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        {txAmount > 0 ? \"+\" : \"\"}\r\n                        {txAmount.toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              {transactionHistory.length > 5 && (\r\n                <button\r\n                  onClick={() => setShowAllTransactions(!showAllTransactions)}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"12px\",\r\n                    padding: \"12px\",\r\n                    backgroundColor: \"rgba(255, 255, 255, 0.05)\",\r\n                    color: \"#a0a0c0\",\r\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n                    borderRadius: \"10px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                    transition: \"all 0.2s ease\",\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.backgroundColor = \"#f3f4f6\";\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.backgroundColor = \"#f9fafb\";\r\n                  }}\r\n                >\r\n                  {showAllTransactions ? \" \" : ` ${transactionHistory.length - 5}  `}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                fontSize: \"13px\",\r\n                color: \"#6b7280\",\r\n                textAlign: \"center\",\r\n                padding: \"20px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.03)\",\r\n                borderRadius: \"10px\",\r\n                border: \"1px dashed rgba(255, 255, 255, 0.1)\"\r\n              }}\r\n            >\r\n                 .\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   -     */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"25px 30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(240, 147, 251, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"8px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"38px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {Number(totalNetAssets).toLocaleString()} <span style={{ fontSize: \"24px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <p style={{\r\n            marginTop: \"8px\",\r\n            fontSize: \"12px\",\r\n            color: \"rgba(255,255,255,0.8)\",\r\n            margin: \"8px 0 0 0\"\r\n          }}>\r\n             +  +  +  +  +  - \r\n          </p>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n             \r\n          </h4>\r\n          <div\r\n            style={{\r\n              background: \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\",\r\n              borderRadius: \"14px\",\r\n              padding: \"20px\",\r\n              border: \"none\",\r\n              boxShadow: \"0 4px 15px rgba(6, 182, 212, 0.2)\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <span style={{ color: \"rgba(255,255,255,0.9)\", fontWeight: \"500\", fontSize: \"14px\" }}>\r\n                \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontWeight: \"800\",\r\n                  fontSize: \"26px\",\r\n                  color: \"#ffffff\",\r\n                  letterSpacing: \"-0.5px\",\r\n                  textAlign: \"right\",\r\n                  display: \"block\"\r\n                }}\r\n              >\r\n                {Number(parkingBalance).toLocaleString()}<span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <p style={{ marginTop: \"10px\", fontSize: \"12px\", color: \"#9ca3af\", textAlign: \"center\" }}>\r\n                  \r\n          </p>\r\n        </div>\r\n\r\n        {/*    -   */}\r\n        <div\r\n          style={{\r\n            padding: \"25px\",\r\n            background: \"rgba(20, 20, 35, 0.4)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid rgba(0, 255, 242, 0.1)\",\r\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n          }}\r\n        >\r\n\r\n          {/*   */}\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            <h4\r\n              style={{\r\n                fontSize: \"15px\",\r\n                color: \"#374151\",\r\n                fontWeight: \"700\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            >\r\n                \r\n            </h4>\r\n            <div\r\n              style={{\r\n                background: \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\",\r\n                borderRadius: \"14px\",\r\n                padding: \"20px\",\r\n                border: \"none\",\r\n                boxShadow: \"0 4px 15px rgba(251, 191, 36, 0.2)\",\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}>\r\n                <div style={{ width: \"100%\" }}>\r\n                  <div style={{\r\n                    fontSize: \"26px\",\r\n                    fontWeight: \"800\",\r\n                    color: \"#ffffff\",\r\n                    letterSpacing: \"-0.5px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    {displayCoupons.toLocaleString()} <span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n                  </div>\r\n                  <div style={{\r\n                    fontSize: \"12px\",\r\n                    color: \"rgba(255,255,255,0.85)\",\r\n                    fontWeight: \"500\",\r\n                    marginTop: \"4px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    1 = {Number(couponValue).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n  if (!userDoc && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .        .\r\n      </div>\r\n    );\r\n  }\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .     .\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        {renderTitle()}\r\n\r\n        {/*     */}\r\n        <DailyRewardBanner\r\n          userId={userId}\r\n          onClaim={async (reward) => {\r\n            try {\r\n              //   \r\n              const userRef = doc(db, \"users\", userId);\r\n              await setDoc(userRef, {\r\n                cash: increment(reward),\r\n                updatedAt: serverTimestamp(),\r\n              }, { merge: true });\r\n\r\n              //   \r\n              await logActivity(db, {\r\n                userId,\r\n                userName,\r\n                classCode: currentUserClassCode,\r\n                type: \"  \",\r\n                description: `   ${reward.toLocaleString()} `,\r\n                amount: reward,\r\n                metadata: { rewardType: \"daily_streak\" }\r\n              });\r\n\r\n              //   \r\n              if (optimisticUpdate) {\r\n                optimisticUpdate({ cash: (userDoc?.cash || 0) + reward });\r\n              }\r\n\r\n              logger.log(`Daily reward claimed and added: ${reward}`);\r\n            } catch (error) {\r\n              logger.error(\"   :\", error);\r\n              alert(\"    .  .\");\r\n            }\r\n          }}\r\n        />\r\n\r\n        {renderAssetSummary()}\r\n        {showTransferModal && (\r\n          <TransferModal\r\n            showTransferModal={showTransferModal}\r\n            setShowTransferModal={setShowTransferModal}\r\n            recipients={classmates}\r\n            transferRecipient={transferRecipient}\r\n            setTransferRecipient={setTransferRecipient}\r\n            transferAmount={transferAmount}\r\n            setTransferAmount={setTransferAmount}\r\n            handleTransfer={handleTransferMoney}\r\n            userId={userId}\r\n            userCash={Number(userDoc?.cash) || 0}\r\n          />\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","// src/pages/market/PersonalShop.js\r\n//    -     / \r\n// 10%   \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  getDocs,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport \"./PersonalShop.css\";\r\nimport { logger } from '../../utils/logger';\n\r\n//     \r\nconst formatKoreanCurrency = (amount) => {\r\n  if (amount === null || amount === undefined) return \"0\";\r\n  return `${Number(amount).toLocaleString()}`;\r\n};\r\n\r\n//  (10%)\r\nconst VAT_RATE = 0.10;\r\n\r\n//  \r\nconst SHOP_CATEGORIES = [\r\n  { value: \"food\", label: \"/\", icon: \"\" },\r\n  { value: \"craft\", label: \"/\", icon: \"\" },\r\n  { value: \"digital\", label: \"/IT\", icon: \"\" },\r\n  { value: \"education\", label: \"/\", icon: \"\" },\r\n  { value: \"entertainment\", label: \"\", icon: \"\" },\r\n  { value: \"service\", label: \"/\", icon: \"\" },\r\n  { value: \"other\", label: \"\", icon: \"\" },\r\n];\r\n\r\n// / \r\nconst PRODUCT_TYPES = [\r\n  { value: \"product\", label: \"\", icon: \"\", description: \" \" },\r\n  { value: \"service\", label: \"\", icon: \"\", description: \" \" },\r\n];\r\n\r\n// ====================  /  ====================\r\nconst ShopModal = ({ isOpen, onClose, shop, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    shopName: \"\",\r\n    description: \"\",\r\n    category: \"other\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (shop) {\r\n      setFormData({\r\n        shopName: shop.shopName || \"\",\r\n        description: shop.description || \"\",\r\n        category: shop.category || \"other\",\r\n      });\r\n    } else {\r\n      setFormData({ shopName: \"\", description: \"\", category: \"other\" });\r\n    }\r\n  }, [shop, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.shopName.trim()) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await onSave(formData);\r\n      onClose();\r\n    } catch (error) {\r\n      logger.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{shop ? \" \" : \"  \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label>  *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.shopName}\r\n              onChange={(e) => setFormData({ ...formData, shopName: e.target.value })}\r\n              placeholder=\":  \"\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <select\r\n              value={formData.category}\r\n              onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n            >\r\n              {SHOP_CATEGORIES.map((cat) => (\r\n                <option key={cat.value} value={cat.value}>\r\n                  {cat.icon} {cat.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label> </label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"  !\"\r\n              rows={3}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : shop ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==================== /   ====================\r\nconst ProductModal = ({ isOpen, onClose, product, shopId, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    type: \"product\",\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //  \r\n  const taxAmount = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return Math.round(price * VAT_RATE);\r\n  }, [formData.price]);\r\n\r\n  const totalPrice = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return price + taxAmount;\r\n  }, [formData.price, taxAmount]);\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      setFormData({\r\n        type: product.type || \"product\",\r\n        name: product.name || \"\",\r\n        description: product.description || \"\",\r\n        price: product.price?.toString() || \"\",\r\n        stock: product.stock >= 0 ? product.stock.toString() : \"\",\r\n      });\r\n    } else {\r\n      setFormData({ type: \"product\", name: \"\", description: \"\", price: \"\", stock: \"\" });\r\n    }\r\n  }, [product, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.name.trim()) {\r\n      alert(\"/  !\");\r\n      return;\r\n    }\r\n    if (!formData.price || parseInt(formData.price) <= 0) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    if (formData.type === \"product\" && (!formData.stock || parseInt(formData.stock) <= 0)) {\r\n      alert(\"   !\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const productData = {\r\n        type: formData.type,\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim(),\r\n        price: parseInt(formData.price),\r\n        taxAmount: taxAmount,\r\n        totalPrice: totalPrice,\r\n        stock: formData.type === \"service\" ? -1 : parseInt(formData.stock),\r\n      };\r\n      await onSave(productData);\r\n      onClose();\r\n    } catch (error) {\r\n      logger.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{product ? \"/ \" : \" / \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          {/*   */}\r\n          <div className=\"form-group\">\r\n            <label> *</label>\r\n            <div className=\"type-selector\">\r\n              {PRODUCT_TYPES.map((type) => (\r\n                <button\r\n                  key={type.value}\r\n                  type=\"button\"\r\n                  onClick={() => setFormData({ ...formData, type: type.value })}\r\n                  className={`type-button ${formData.type === type.value ? \"active\" : \"\"}`}\r\n                >\r\n                  <span className=\"type-icon\">{type.icon}</span>\r\n                  <span className=\"type-label\">{type.label}</span>\r\n                  <span className=\"type-desc\">{type.description}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label>{formData.type === \"product\" ? \"\" : \"\"} *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder={formData.type === \"product\" ? \":  \" : \":  \"}\r\n              maxLength={30}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"/  \"\r\n              rows={2}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label> () *</label>\r\n            <div className=\"input-with-suffix\">\r\n              <input\r\n                type=\"number\"\r\n                value={formData.price}\r\n                onChange={(e) => setFormData({ ...formData, price: e.target.value })}\r\n                placeholder=\"0\"\r\n                min=\"1\"\r\n              />\r\n              <span className=\"suffix\"></span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          {formData.price && parseInt(formData.price) > 0 && (\r\n            <div className=\"tax-info-box\">\r\n              <div className=\"tax-row\">\r\n                <span> </span>\r\n                <span>{formatKoreanCurrency(parseInt(formData.price))}</span>\r\n              </div>\r\n              <div className=\"tax-row highlight\">\r\n                <span>+  (10%)</span>\r\n                <span>+{formatKoreanCurrency(taxAmount)}</span>\r\n              </div>\r\n              <div className=\"tax-row total\">\r\n                <span> </span>\r\n                <span className=\"neon-text\">{formatKoreanCurrency(totalPrice)}</span>\r\n              </div>\r\n              <p className=\"tax-notice\"> 10%   </p>\r\n            </div>\r\n          )}\r\n\r\n          {/*  ( ) */}\r\n          {formData.type === \"product\" && (\r\n            <div className=\"form-group\">\r\n              <label>  *</label>\r\n              <div className=\"input-with-suffix\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.stock}\r\n                  onChange={(e) => setFormData({ ...formData, stock: e.target.value })}\r\n                  placeholder=\"0\"\r\n                  min=\"1\"\r\n                />\r\n                <span className=\"suffix\"></span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : product ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst PurchaseModal = ({ isOpen, onClose, product, shop, onConfirm }) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const totalAmount = useMemo(() => {\r\n    return product ? product.totalPrice * quantity : 0;\r\n  }, [product, quantity]);\r\n\r\n  const handleConfirm = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onConfirm(quantity);\r\n      onClose();\r\n    } catch (error) {\r\n      alert(error.message || \"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const maxQuantity = product.type === \"service\" ? 10 : Math.min(product.stock, 10);\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3> </h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          <div className=\"purchase-item-info\">\r\n            <div className=\"item-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n            <div className=\"item-details\">\r\n              <h4>{product.name}</h4>\r\n              <p className=\"shop-name\">{shop?.shopName}</p>\r\n              <p className=\"item-price\">{formatKoreanCurrency(product.totalPrice)} ( )</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"quantity-selector\">\r\n            <label>{product.type === \"product\" ? \" \" : \" \"}</label>\r\n            <div className=\"quantity-controls\">\r\n              <button\r\n                onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                -\r\n              </button>\r\n              <span className=\"quantity-value\">{quantity}</span>\r\n              <button\r\n                onClick={() => setQuantity(Math.min(maxQuantity, quantity + 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                +\r\n              </button>\r\n              {product.type === \"product\" && (\r\n                <span className=\"stock-info\">(: {product.stock})</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"total-amount-box\">\r\n            <span>  </span>\r\n            <span className=\"total-price neon-text\">{formatKoreanCurrency(totalAmount)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onClose} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleConfirm} disabled={loading} className=\"modal-button confirm\">\r\n            {loading ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ShopCard = ({ shop, onClick }) => {\r\n  const category = SHOP_CATEGORIES.find((c) => c.value === shop.category);\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"shop-card\">\r\n      <div className=\"shop-card-header\">\r\n        <div className=\"shop-icon\">{category?.icon || \"\"}</div>\r\n        <div className=\"shop-info\">\r\n          <h3 className=\"shop-name\">{shop.shopName}</h3>\r\n          <p className=\"shop-owner\">{shop.ownerName} </p>\r\n        </div>\r\n      </div>\r\n      {shop.description && (\r\n        <p className=\"shop-description\">{shop.description}</p>\r\n      )}\r\n      <div className=\"shop-card-footer\">\r\n        <span className=\"shop-category\">{category?.label || \"\"}</span>\r\n        <span className=\"shop-sales\"> : {formatKoreanCurrency(shop.totalSales || 0)}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ProductCard = ({ product, shop, onBuy, isOwner, onEdit, onDelete }) => {\r\n  return (\r\n    <div className=\"product-card\">\r\n      <div className=\"product-card-header\">\r\n        <div className=\"product-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n        <div className=\"product-info\">\r\n          <div className=\"product-title-row\">\r\n            <h4 className=\"product-name\">{product.name}</h4>\r\n            <span className={`product-type-badge ${product.type}`}>\r\n              {product.type === \"product\" ? \"\" : \"\"}\r\n            </span>\r\n          </div>\r\n          {product.description && (\r\n            <p className=\"product-description\">{product.description}</p>\r\n          )}\r\n          <div className=\"product-price-row\">\r\n            <span className=\"product-price neon-text\">\r\n              {formatKoreanCurrency(product.totalPrice)}\r\n            </span>\r\n            <span className=\"vat-included\">(VAT )</span>\r\n            {product.type === \"product\" && (\r\n              <span className={`stock-badge ${product.stock > 0 ? \"\" : \"soldout\"}`}>\r\n                {product.stock > 0 ? ` ${product.stock}` : \"\"}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"product-card-actions\">\r\n        {isOwner ? (\r\n          <>\r\n            <button onClick={() => onEdit(product)} className=\"action-btn edit\">\r\n               \r\n            </button>\r\n            <button onClick={() => onDelete(product)} className=\"action-btn delete\">\r\n               \r\n            </button>\r\n          </>\r\n        ) : (\r\n          <button\r\n            onClick={() => onBuy(product, shop)}\r\n            disabled={product.type === \"product\" && product.stock <= 0}\r\n            className=\"action-btn buy\"\r\n          >\r\n            {product.type === \"product\" && product.stock <= 0 ? \"\" : \" \"}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================   ====================\r\nconst PersonalShop = () => {\r\n  const { currentUser, userProfile, refreshBalance } = useAuth();\r\n\r\n  //  \r\n  const [activeTab, setActiveTab] = useState(\"browse\"); // browse, myshop, sales\r\n\r\n  //  \r\n  const [shops, setShops] = useState([]);\r\n  const [myShop, setMyShop] = useState(null);\r\n  const [myProducts, setMyProducts] = useState([]);\r\n  const [selectedShop, setSelectedShop] = useState(null);\r\n  const [selectedShopProducts, setSelectedShopProducts] = useState([]);\r\n\r\n  //  \r\n  const [showShopModal, setShowShopModal] = useState(false);\r\n  const [showProductModal, setShowProductModal] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState(null);\r\n  const [purchaseProduct, setPurchaseProduct] = useState(null);\r\n  const [purchaseShop, setPurchaseShop] = useState(null);\r\n\r\n  //  \r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingProducts, setLoadingProducts] = useState(false);\r\n\r\n  // /\r\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  //    (   )\r\n  const loadShops = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      //  []     -      \r\n      const q = query(shopsRef, where(\"status\", \"==\", \"active\"));\r\n\r\n      const snapshot = await getDocs(q);\r\n      const shopsData = snapshot.docs\r\n        .map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }))\r\n        //    \r\n        .sort((a, b) => {\r\n          const dateA = a.createdAt?.toDate?.() || new Date(0);\r\n          const dateB = b.createdAt?.toDate?.() || new Date(0);\r\n          return dateB - dateA; // \r\n        })\r\n        .slice(0, 50);\r\n\r\n      setShops(shopsData);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const loadMyShop = useCallback(async () => {\r\n    if (!currentUser) return;\r\n    try {\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      const q = query(shopsRef, where(\"ownerId\", \"==\", currentUser.uid), limit(1));\r\n      const snapshot = await getDocs(q);\r\n\r\n      if (!snapshot.empty) {\r\n        const shopData = { id: snapshot.docs[0].id, ...snapshot.docs[0].data() };\r\n        setMyShop(shopData);\r\n\r\n        //   \r\n        const productsRef = collection(db, \"shopProducts\");\r\n        const pq = query(\r\n          productsRef,\r\n          where(\"shopId\", \"==\", shopData.id),\r\n          orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const pSnapshot = await getDocs(pq);\r\n        setMyProducts(pSnapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  //   \r\n  const loadShopProducts = useCallback(async (shopId) => {\r\n    try {\r\n      setLoadingProducts(true);\r\n      const productsRef = collection(db, \"shopProducts\");\r\n      const q = query(\r\n        productsRef,\r\n        where(\"shopId\", \"==\", shopId),\r\n        where(\"status\", \"==\", \"available\"),\r\n        orderBy(\"createdAt\", \"desc\")\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      setSelectedShopProducts(snapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n    } catch (error) {\r\n      logger.error(\"  :\", error);\r\n    } finally {\r\n      setLoadingProducts(false);\r\n    }\r\n  }, []);\r\n\r\n  //  \r\n  useEffect(() => {\r\n    loadShops();\r\n    loadMyShop();\r\n  }, [loadShops, loadMyShop]);\r\n\r\n  //     \r\n  useEffect(() => {\r\n    if (selectedShop) {\r\n      loadShopProducts(selectedShop.id);\r\n    }\r\n  }, [selectedShop, loadShopProducts]);\r\n\r\n  //  /\r\n  const handleSaveShop = async (formData) => {\r\n    if (!currentUser) return;\r\n\r\n    if (myShop) {\r\n      // \r\n      await updateDoc(doc(db, \"personalShops\", myShop.id), {\r\n        ...formData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"personalShops\"), {\r\n        ...formData,\r\n        ownerId: currentUser.uid,\r\n        ownerName: userProfile?.name || \"\",\r\n        status: \"active\",\r\n        totalSales: 0,\r\n        totalTaxPaid: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    await loadMyShop();\r\n    await loadShops();\r\n  };\r\n\r\n  //  /\r\n  const handleSaveProduct = async (productData) => {\r\n    if (!myShop) return;\r\n\r\n    if (editingProduct) {\r\n      // \r\n      await updateDoc(doc(db, \"shopProducts\", editingProduct.id), {\r\n        ...productData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"shopProducts\"), {\r\n        ...productData,\r\n        shopId: myShop.id,\r\n        ownerId: currentUser.uid,\r\n        status: \"available\",\r\n        soldCount: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    setEditingProduct(null);\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handleDeleteProduct = async (product) => {\r\n    if (!window.confirm(`\"${product.name}\"() ?`)) return;\r\n\r\n    await deleteDoc(doc(db, \"shopProducts\", product.id));\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handlePurchase = async (quantity) => {\r\n    if (!currentUser || !purchaseProduct || !purchaseShop) {\r\n      throw new Error(\"   .\");\r\n    }\r\n\r\n    const totalAmount = purchaseProduct.totalPrice * quantity;\r\n    const taxAmount = purchaseProduct.taxAmount * quantity;\r\n    const sellerAmount = purchaseProduct.price * quantity;\r\n\r\n    //  \r\n    if ((userProfile?.balance || 0) < totalAmount) {\r\n      throw new Error(\" !\");\r\n    }\r\n\r\n    //    \r\n    if (purchaseShop.ownerId === currentUser.uid) {\r\n      throw new Error(\"    !\");\r\n    }\r\n\r\n    await runTransaction(db, async (transaction) => {\r\n      //   \r\n      const buyerRef = doc(db, \"users\", currentUser.uid);\r\n      transaction.update(buyerRef, {\r\n        balance: increment(-totalAmount),\r\n      });\r\n\r\n      //    ( )\r\n      const sellerRef = doc(db, \"users\", purchaseShop.ownerId);\r\n      transaction.update(sellerRef, {\r\n        balance: increment(sellerAmount),\r\n      });\r\n\r\n      //    ()\r\n      const taxRef = doc(db, \"nationalTax\", \"treasury\");\r\n      transaction.update(taxRef, {\r\n        totalVAT: increment(taxAmount),\r\n        totalTaxCollected: increment(taxAmount),\r\n      });\r\n\r\n      //   \r\n      const shopRef = doc(db, \"personalShops\", purchaseShop.id);\r\n      transaction.update(shopRef, {\r\n        totalSales: increment(sellerAmount),\r\n        totalTaxPaid: increment(taxAmount),\r\n      });\r\n\r\n      //  / \r\n      const productRef = doc(db, \"shopProducts\", purchaseProduct.id);\r\n      const updates = { soldCount: increment(quantity) };\r\n      if (purchaseProduct.type === \"product\") {\r\n        updates.stock = increment(-quantity);\r\n        if (purchaseProduct.stock - quantity <= 0) {\r\n          updates.status = \"soldout\";\r\n        }\r\n      }\r\n      transaction.update(productRef, updates);\r\n\r\n      //  \r\n      const activityRef = collection(db, \"activities\");\r\n      transaction.set(doc(activityRef), {\r\n        type: \"shop_purchase\",\r\n        buyerId: currentUser.uid,\r\n        buyerName: userProfile?.name || \"\",\r\n        sellerId: purchaseShop.ownerId,\r\n        sellerName: purchaseShop.ownerName,\r\n        shopId: purchaseShop.id,\r\n        shopName: purchaseShop.shopName,\r\n        productId: purchaseProduct.id,\r\n        productName: purchaseProduct.name,\r\n        productType: purchaseProduct.type,\r\n        quantity: quantity,\r\n        unitPrice: purchaseProduct.totalPrice,\r\n        totalAmount: totalAmount,\r\n        taxAmount: taxAmount,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    //  \r\n    if (refreshBalance) {\r\n      await refreshBalance();\r\n    }\r\n\r\n    //   \r\n    if (selectedShop) {\r\n      await loadShopProducts(selectedShop.id);\r\n    }\r\n\r\n    setPurchaseProduct(null);\r\n    setPurchaseShop(null);\r\n    alert(\" !\");\r\n  };\r\n\r\n  //   \r\n  const filteredShops = useMemo(() => {\r\n    return shops.filter((shop) => {\r\n      if (categoryFilter !== \"all\" && shop.category !== categoryFilter) return false;\r\n      if (searchQuery) {\r\n        const q = searchQuery.toLowerCase();\r\n        return (\r\n          shop.shopName.toLowerCase().includes(q) ||\r\n          shop.ownerName.toLowerCase().includes(q) ||\r\n          (shop.description && shop.description.toLowerCase().includes(q))\r\n        );\r\n      }\r\n      return true;\r\n    });\r\n  }, [shops, categoryFilter, searchQuery]);\r\n\r\n  //   \r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case \"browse\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {/*    */}\r\n            {selectedShop ? (\r\n              <div className=\"shop-detail-view\">\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedShop(null);\r\n                    setSelectedShopProducts([]);\r\n                  }}\r\n                  className=\"back-button\"\r\n                >\r\n                    \r\n                </button>\r\n\r\n                {/*   */}\r\n                <div className=\"shop-detail-header\">\r\n                  <div className=\"shop-detail-icon\">\r\n                    {SHOP_CATEGORIES.find((c) => c.value === selectedShop.category)?.icon || \"\"}\r\n                  </div>\r\n                  <div className=\"shop-detail-info\">\r\n                    <h2>{selectedShop.shopName}</h2>\r\n                    <p className=\"owner\">{selectedShop.ownerName} </p>\r\n                    {selectedShop.description && (\r\n                      <p className=\"description\">{selectedShop.description}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div className=\"products-section\">\r\n                  <h3> </h3>\r\n                  {loadingProducts ? (\r\n                    <div className=\"loading-state\">  ...</div>\r\n                  ) : selectedShopProducts.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                      <span className=\"empty-icon\"></span>\r\n                      <p>  </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"products-grid\">\r\n                      {selectedShopProducts.map((product) => (\r\n                        <ProductCard\r\n                          key={product.id}\r\n                          product={product}\r\n                          shop={selectedShop}\r\n                          onBuy={(p, s) => {\r\n                            setPurchaseProduct(p);\r\n                            setPurchaseShop(s);\r\n                          }}\r\n                          isOwner={false}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              /*   */\r\n              <div className=\"shop-list-view\">\r\n                {/*  &  */}\r\n                <div className=\"controls-section\">\r\n                  <div className=\"search-box\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                      placeholder=\" ...\"\r\n                      className=\"search-input\"\r\n                    />\r\n                  </div>\r\n                  <select\r\n                    value={categoryFilter}\r\n                    onChange={(e) => setCategoryFilter(e.target.value)}\r\n                    className=\"category-filter\"\r\n                  >\r\n                    <option value=\"all\"> </option>\r\n                    {SHOP_CATEGORIES.map((cat) => (\r\n                      <option key={cat.value} value={cat.value}>\r\n                        {cat.icon} {cat.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/*   */}\r\n                {loading ? (\r\n                  <div className=\"loading-state\">  ...</div>\r\n                ) : filteredShops.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>\r\n                      {searchQuery || categoryFilter !== \"all\"\r\n                        ? \"  \"\r\n                        : \"   \"}\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"shops-grid\">\r\n                    {filteredShops.map((shop) => (\r\n                      <ShopCard\r\n                        key={shop.id}\r\n                        shop={shop}\r\n                        onClick={() => setSelectedShop(shop)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"myshop\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {myShop ? (\r\n              <div className=\"my-shop-view\">\r\n                {/*    */}\r\n                <div className=\"my-shop-header\">\r\n                  <div className=\"my-shop-info\">\r\n                    <div className=\"my-shop-icon\">\r\n                      {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.icon || \"\"}\r\n                    </div>\r\n                    <div className=\"my-shop-details\">\r\n                      <h2>{myShop.shopName}</h2>\r\n                      <p className=\"category\">\r\n                        {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.label}\r\n                      </p>\r\n                      {myShop.description && (\r\n                        <p className=\"description\">{myShop.description}</p>\r\n                      )}\r\n                    </div>\r\n                    <button onClick={() => setShowShopModal(true)} className=\"edit-shop-btn\">\r\n                       \r\n                    </button>\r\n                  </div>\r\n                  <div className=\"my-shop-stats\">\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value neon-text\">{formatKoreanCurrency(myShop.totalSales || 0)}</span>\r\n                    </div>\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value\">{formatKoreanCurrency(myShop.totalTaxPaid || 0)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/*    */}\r\n                <div className=\"products-header\">\r\n                  <h3> / ({myProducts.length})</h3>\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingProduct(null);\r\n                      setShowProductModal(true);\r\n                    }}\r\n                    className=\"add-product-btn\"\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                {/*    */}\r\n                {myProducts.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>  </p>\r\n                    <span className=\"empty-hint\">  !</span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"products-grid\">\r\n                    {myProducts.map((product) => (\r\n                      <ProductCard\r\n                        key={product.id}\r\n                        product={product}\r\n                        shop={myShop}\r\n                        isOwner={true}\r\n                        onEdit={(p) => {\r\n                          setEditingProduct(p);\r\n                          setShowProductModal(true);\r\n                        }}\r\n                        onDelete={handleDeleteProduct}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              /*   -   */\r\n              <div className=\"create-shop-view\">\r\n                <div className=\"create-shop-card\">\r\n                  <span className=\"create-icon\"></span>\r\n                  <h2>  !</h2>\r\n                  <p>    </p>\r\n                  <button onClick={() => setShowShopModal(true)} className=\"create-shop-btn\">\r\n                      \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"sales\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            <div className=\"empty-state\">\r\n              <span className=\"empty-icon\"></span>\r\n              <p>    ...</p>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"personal-shop-container\">\r\n      {/*  */}\r\n      <div className=\"market-header\">\r\n        <h1> </h1>\r\n        <p className=\"header-subtitle\">   / !</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"market-tabs\">\r\n        {[\r\n          { id: \"browse\", label: \" \", icon: \"\" },\r\n          { id: \"myshop\", label: \" \", icon: \"\" },\r\n          { id: \"sales\", label: \" \", icon: \"\" },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => {\r\n              setActiveTab(tab.id);\r\n              setSelectedShop(null);\r\n            }}\r\n            className={`tab-button ${activeTab === tab.id ? \"active\" : \"\"}`}\r\n          >\r\n            <span className=\"tab-icon\">{tab.icon}</span>\r\n            <span className=\"tab-label\">{tab.label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/*  */}\r\n      {renderTabContent()}\r\n\r\n      {/*  */}\r\n      <ShopModal\r\n        isOpen={showShopModal}\r\n        onClose={() => setShowShopModal(false)}\r\n        shop={myShop}\r\n        onSave={handleSaveShop}\r\n      />\r\n\r\n      <ProductModal\r\n        isOpen={showProductModal}\r\n        onClose={() => {\r\n          setShowProductModal(false);\r\n          setEditingProduct(null);\r\n        }}\r\n        product={editingProduct}\r\n        shopId={myShop?.id}\r\n        onSave={handleSaveProduct}\r\n      />\r\n\r\n      <PurchaseModal\r\n        isOpen={!!purchaseProduct}\r\n        onClose={() => {\r\n          setPurchaseProduct(null);\r\n          setPurchaseShop(null);\r\n        }}\r\n        product={purchaseProduct}\r\n        shop={purchaseShop}\r\n        onConfirm={handlePurchase}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalShop;\r\n","// src/ParkingAccount.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, doc, getDoc, setDoc, serverTimestamp, updateDoc, increment, runTransaction, collection, getDocs, deleteDoc, query, where, limit } from \"../../firebase\";\r\nimport { format, isToday, differenceInDays, isPast } from 'date-fns';\r\nimport { PiggyBank, Landmark, HandCoins, Wallet, X, TrendingUp, Building2 } from 'lucide-react';\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\n\r\nimport { logger } from \"../../utils/logger\";\n// ()   -   \r\nconst getTeacherAccount = async (classCode) => {\r\n  if (!classCode) return null;\r\n\r\n  try {\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(\r\n      usersRef,\r\n      where(\"classCode\", \"==\", classCode),\r\n      where(\"isAdmin\", \"==\", true),\r\n      limit(1)\r\n    );\r\n    const snapshot = await getDocs(q);\r\n\r\n    if (!snapshot.empty) {\r\n      const teacherDoc = snapshot.docs[0];\r\n      return {\r\n        id: teacherDoc.id,\r\n        ...teacherDoc.data()\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// --- Styles ---\r\n// --- Styles ---\r\nconst styles = {\r\n  container: {\r\n    fontFamily: 'sans-serif',\r\n    backgroundColor: 'transparent',\r\n    padding: '32px',\r\n    minHeight: 'auto'\r\n  },\r\n  message: (type) => ({\r\n    padding: '16px 20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '28px',\r\n    textAlign: 'center',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    color: type === 'error' ? '#f87171' : '#34d399',\r\n    backgroundColor: type === 'error' ? 'rgba(239, 68, 68, 0.1)' : 'rgba(16, 185, 129, 0.1)',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n    border: `1px solid ${type === 'error' ? 'rgba(239, 68, 68, 0.3)' : 'rgba(16, 185, 129, 0.3)'}`\r\n  }),\r\n  grid: {\r\n    display: 'grid',\r\n    gap: '28px',\r\n    maxWidth: '1200px',\r\n    margin: '0 auto'\r\n  },\r\n  card: {\r\n    backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n    boxShadow: '0 6px 20px rgba(0, 0, 0, 0.2)',\r\n    borderRadius: '16px',\r\n    padding: '32px',\r\n    border: '1px solid rgba(255, 255, 255, 0.05)',\r\n    backdropFilter: 'blur(10px)'\r\n  },\r\n  cardHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '16px',\r\n    marginBottom: '24px',\r\n    paddingBottom: '20px',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.05)'\r\n  },\r\n  cardTitle: {\r\n    fontSize: '26px',\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n    letterSpacing: '-0.5px',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  tabContainer: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n    marginBottom: '20px',\r\n    gap: '8px'\r\n  },\r\n  tabButton: (isActive) => ({\r\n    padding: '12px 24px',\r\n    border: 'none',\r\n    background: isActive ? 'rgba(99, 102, 241, 0.2)' : 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '17px',\r\n    fontWeight: isActive ? '700' : '500',\r\n    color: isActive ? '#00fff2' : '#94a3b8',\r\n    borderBottom: `3px solid ${isActive ? '#00fff2' : 'transparent'}`,\r\n    marginBottom: '-2px',\r\n    borderRadius: '8px 8px 0 0',\r\n    transition: 'all 0.2s ease',\r\n    textShadow: isActive ? '0 0 5px rgba(0, 255, 242, 0.3)' : 'none'\r\n  }),\r\n  button: (disabled, variant = 'primary') => ({\r\n    backgroundColor: variant === 'primary' ? 'rgba(3, 105, 161, 0.8)' : (variant === 'danger' ? 'rgba(220, 38, 38, 0.8)' : (variant === 'success' ? 'rgba(5, 150, 105, 0.8)' : '#4b5563')),\r\n    color: 'white',\r\n    padding: '12px 20px',\r\n    borderRadius: '10px',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    opacity: disabled ? 0.5 : 1,\r\n    fontSize: '15px',\r\n    fontWeight: '600',\r\n    boxShadow: disabled ? 'none' : '0 4px 12px rgba(0,0,0,0.3)',\r\n    transition: 'all 0.2s ease',\r\n    ':hover': !disabled && {\r\n      transform: 'translateY(-2px)',\r\n      boxShadow: '0 6px 16px rgba(0,0,0,0.4)',\r\n      filter: 'brightness(1.1)'\r\n    }\r\n  }),\r\n  noProduct: {\r\n    textAlign: 'center',\r\n    color: '#94a3b8',\r\n    padding: '32px 0',\r\n    fontSize: '16px',\r\n    fontStyle: 'italic'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '14px 16px',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\r\n    border: '2px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '10px',\r\n    marginBottom: '16px',\r\n    fontSize: '16px',\r\n    color: 'white',\r\n    transition: 'border-color 0.2s ease',\r\n    ':focus': {\r\n      outline: 'none',\r\n      borderColor: '#00fff2',\r\n      boxShadow: '0 0 0 2px rgba(0, 255, 242, 0.1)'\r\n    }\r\n  },\r\n  modalOverlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    zIndex: 1000,\r\n    backdropFilter: 'blur(8px)'\r\n  },\r\n  modalContent: {\r\n    background: '#1a1a2e',\r\n    padding: '32px',\r\n    borderRadius: '16px',\r\n    width: '90%',\r\n    maxWidth: '450px',\r\n    position: 'relative',\r\n    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    color: '#e2e8f0'\r\n  },\r\n  modalTitle: {\r\n    fontSize: '24px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '20px',\r\n    color: '#fff',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  modalCloseBtn: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    right: '20px',\r\n    background: 'none',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    color: '#94a3b8',\r\n    transition: 'color 0.2s ease',\r\n    ':hover': {\r\n      color: '#fff'\r\n    }\r\n  },\r\n};\r\n\r\n// --- Helper Functions & Sub-Components ---\r\nconst formatCurrency = (amount) => (typeof amount === 'number' ? Math.round(amount).toLocaleString() : '0');\r\n\r\n//  \r\nconst calculateCompoundInterest = (principal, dailyRate, days) => {\r\n  if (principal <= 0 || !dailyRate || days <= 0) return { interest: 0, total: principal };\r\n  const total = principal * Math.pow(1 + dailyRate / 100, days);\r\n  const interest = total - principal;\r\n  return { interest: Math.round(interest), total: Math.round(total) };\r\n};\r\n\r\n//    ( )\r\nconst calculateDailyInterest = (principal, dailyRate) => {\r\n  //    -  \r\n  return Math.round(principal * (dailyRate / 100));\r\n};\r\n\r\nconst ICON_MAP = {\r\n  parking: <Wallet size={28} style={{ color: '#0369a1' }} />,\r\n  deposits: <Landmark size={28} style={{ color: '#059669' }} />,\r\n  savings: <PiggyBank size={28} style={{ color: '#7c3aed' }} />,\r\n  loans: <HandCoins size={28} style={{ color: '#dc2626' }} />,\r\n};\r\n\r\nconst SubscribedProductItem = ({ product, onCancel, onMaturity }) => {\r\n  const isMatured = product.maturityDate && new Date() >= product.maturityDate;\r\n  const daysRemaining = product.maturityDate ? Math.max(0, differenceInDays(product.maturityDate, new Date())) : 0;\r\n  const dailyRate = product.rate; //   \r\n\r\n  const { interest, total } = calculateCompoundInterest(\r\n    product.balance,\r\n    product.rate, // \r\n    product.termInDays\r\n  );\r\n\r\n  const dailyInterestAmount = calculateDailyInterest(product.balance, product.rate);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: `2px solid ${isMatured ? 'rgba(16, 185, 129, 0.5)' : 'rgba(255, 255, 255, 0.1)'}`,\r\n      borderRadius: '12px',\r\n      marginBottom: '16px',\r\n      background: isMatured ? 'rgba(16, 185, 129, 0.1)' : 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n        <div>\r\n          <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '4px' }}>{product.name}</div>\r\n          {isMatured && <span style={{\r\n            backgroundColor: '#10b981',\r\n            color: 'white',\r\n            padding: '4px 12px',\r\n            borderRadius: '20px',\r\n            fontSize: '13px',\r\n            fontWeight: '600'\r\n          }}></span>}\r\n        </div>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#00fff2' }}>{formatCurrency(product.balance)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#94a3b8', marginTop: '16px', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 0, 0, 0.2)', padding: '16px', borderRadius: '8px' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> ():</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{product.rate}%</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> :</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399' }}>+{formatCurrency(dailyInterestAmount)}/</span>\r\n        </div>\r\n        {product.maturityDate && (\r\n          <>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ fontWeight: '500' }}>:</span>\r\n              <span style={{ fontWeight: '600', color: '#e2e8f0' }}>{format(product.maturityDate, 'yyyy-MM-dd')}</span>\r\n            </div>\r\n            {!isMatured && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ fontWeight: '500' }}> :</span>\r\n                <span style={{ fontWeight: '600', color: '#00fff2' }}>{daysRemaining}</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed rgba(255, 255, 255, 0.1)', margin: '16px 0' }}></div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#e2e8f0', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 255, 242, 0.05)', padding: '16px', borderRadius: '8px', border: '1px solid rgba(0, 255, 242, 0.1)' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '600' }}>   ():</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399', fontSize: '17px' }}>+{formatCurrency(interest)}</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '17px' }}>\r\n          <span style={{ fontWeight: '700' }}>  :</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{formatCurrency(total)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', textAlign: 'right' }}>\r\n        {isMatured ? (\r\n          <button\r\n            onClick={onMaturity}\r\n            style={{ ...styles.button(false, 'success'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n              ({formatCurrency(total)})\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={onCancel}\r\n            style={{ ...styles.button(false, 'danger'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n            {product.type === 'loan' ? ' ' : ' '}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AvailableProductItem = ({ product, onSubscribe }) => {\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest } = calculateCompoundInterest(100000, dailyRate, product.termInDays);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: '2px solid rgba(255, 255, 255, 0.1)',\r\n      borderRadius: '12px',\r\n      marginBottom: '12px',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      background: 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n      transition: 'all 0.2s ease'\r\n    }}>\r\n      <div>\r\n        <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '8px' }}>{product.name}</div>\r\n        <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '6px' }}>\r\n          <strong style={{ color: '#00fff2' }}> {product.dailyRate}%</strong> (: {product.termInDays})\r\n        </div>\r\n        <div style={{ fontSize: '14px', color: '#34d399', fontWeight: '600' }}>\r\n          <TrendingUp size={14} style={{ display: 'inline', marginRight: '4px' }} />\r\n          10    : +{formatCurrency(projectedInterest)}\r\n        </div>\r\n      </div>\r\n      <button\r\n        onClick={onSubscribe}\r\n        style={{ ...styles.button(false), padding: '12px 24px', fontSize: '16px' }}\r\n      >\r\n        \r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProductSection = ({ title, icon, subscribedProducts, availableProducts, onSubscribe, onCancel, onMaturity }) => {\r\n  const [activeTab, setActiveTab] = useState('subscribed');\r\n  return (\r\n    <div style={styles.card}>\r\n      <div style={styles.cardHeader}>\r\n        {icon}\r\n        <h2 style={styles.cardTitle}>{title}</h2>\r\n      </div>\r\n      <div style={styles.tabContainer}>\r\n        <button\r\n          onClick={() => setActiveTab('subscribed')}\r\n          style={styles.tabButton(activeTab === 'subscribed')}\r\n        >\r\n           \r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('available')}\r\n          style={styles.tabButton(activeTab === 'available')}\r\n        >\r\n            \r\n        </button>\r\n      </div>\r\n      <div>\r\n        {activeTab === 'subscribed' && (\r\n          subscribedProducts.length > 0\r\n            ? subscribedProducts.map(p => (\r\n              <SubscribedProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onCancel={() => onCancel(p)}\r\n                onMaturity={() => onMaturity(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>  .</p>\r\n        )}\r\n        {activeTab === 'available' && (\r\n          availableProducts.length > 0\r\n            ? availableProducts.map(p => (\r\n              <AvailableProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onSubscribe={() => onSubscribe(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>   .</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SubscriptionModal = ({ isOpen, onClose, product, onConfirm, isProcessing }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const numAmount = parseFloat(amount);\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest, total: projectedTotal } = !isNaN(numAmount) && numAmount > 0\r\n    ? calculateCompoundInterest(numAmount, dailyRate, product.termInDays)\r\n    : { interest: 0, total: 0 };\r\n\r\n  return (\r\n    <div style={styles.modalOverlay} onClick={onClose}>\r\n      <div style={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n        <button onClick={onClose} style={styles.modalCloseBtn}><X size={24} /></button>\r\n        <h3 style={styles.modalTitle}>{product.name} </h3>\r\n\r\n        <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(0, 255, 242, 0.05)', borderRadius: '10px', border: '1px solid rgba(0, 255, 242, 0.2)' }}>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '8px' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong>  {product.dailyRate}% ()\r\n          </div>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong> {product.termInDays}\r\n          </div>\r\n        </div>\r\n\r\n        <p style={{ marginBottom: '12px', fontSize: '16px', fontWeight: '600', color: '#e2e8f0' }}>  </p>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          style={styles.input}\r\n          placeholder={`${formatCurrency(product.minAmount || 0)} `}\r\n          autoFocus\r\n        />\r\n\r\n        {numAmount > 0 && (\r\n          <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(16, 185, 129, 0.1)', borderRadius: '10px', border: '1px solid rgba(16, 185, 129, 0.3)' }}>\r\n            <div style={{ fontSize: '15px', color: '#34d399', marginBottom: '6px' }}>\r\n                : <strong>+{formatCurrency(projectedInterest)}</strong>\r\n            </div>\r\n            <div style={{ fontSize: '16px', color: '#34d399', fontWeight: '700' }}>\r\n                : {formatCurrency(projectedTotal)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={() => { onConfirm(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing || !amount}\r\n          style={{ ...styles.button(isProcessing || !amount), width: '100%', fontSize: '17px', padding: '16px' }}\r\n        >\r\n          {isProcessing ? ' ...' : ''}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ParkingAccountSection = ({ balance, dailyInterest, onDeposit, onWithdraw, isProcessing, userCash }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  return (\r\n    <div style={{\r\n      ...styles.card,\r\n      background: 'linear-gradient(135deg, rgba(6, 78, 117, 0.85) 0%, rgba(20, 40, 60, 0.9) 100%)',\r\n      color: 'white',\r\n      boxShadow: '0 8px 24px rgba(0, 0, 0, 0.4)',\r\n      border: '1px solid rgba(0, 180, 216, 0.25)'\r\n    }}>\r\n      <div style={{ ...styles.cardHeader, borderBottom: '2px solid rgba(0, 180, 216, 0.2)' }}>\r\n        <Wallet size={32} style={{ color: '#67e8f9' }} />\r\n        <h2 style={{ ...styles.cardTitle, color: '#e0f7fa' }}></h2>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.15)',\r\n        padding: '12px 16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '16px',\r\n        backdropFilter: 'blur(10px)',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <span style={{ fontSize: '16px', fontWeight: '500', color: '#94a3b8' }}> </span>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#e0f7fa' }}>{formatCurrency(userCash || 0)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '42px', fontWeight: 'bold', color: '#e0f7fa', marginBottom: '8px' }}>\r\n        {formatCurrency(balance)}\r\n      </div>\r\n\r\n      <p style={{ fontSize: '16px', color: 'rgba(224, 247, 250, 0.8)', marginBottom: '16px', fontWeight: '500' }}>\r\n              \r\n      </p>\r\n\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.12)',\r\n        padding: '16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '24px',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n          <TrendingUp size={20} style={{ color: '#67e8f9' }} />\r\n          <span style={{ fontSize: '15px', fontWeight: '600', color: '#94a3b8' }}>  </span>\r\n        </div>\r\n        <div style={{ fontSize: '28px', fontWeight: '700', color: '#67e8f9' }}>\r\n          +{formatCurrency(dailyInterest)}/\r\n        </div>\r\n        <div style={{ fontSize: '14px', marginTop: '6px', color: 'rgba(148, 163, 184, 0.9)' }}>\r\n          ( 1%  )\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', gap: '10px' }}>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\" \"\r\n          style={{\r\n            ...styles.input,\r\n            marginBottom: 0,\r\n            fontSize: '17px',\r\n            flex: 1,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n            border: '1px solid rgba(0, 180, 216, 0.3)'\r\n          }}\r\n          disabled={isProcessing}\r\n        />\r\n        <button\r\n          onClick={() => { onDeposit(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing, 'success'),\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n        <button\r\n          onClick={() => { onWithdraw(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing),\r\n            backgroundColor: 'rgba(100, 116, 139, 0.5)',\r\n            color: 'white',\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst ParkingAccount = ({\r\n  auth = {},\r\n  depositProducts = [],\r\n  installmentProducts = [],\r\n  loanProducts = [],\r\n  activeView = 'parking',\r\n  onViewChange,\r\n  onLoadUserProducts,\r\n  allUserProducts = [],\r\n  onDeleteUserProduct\r\n}) => {\r\n  const { user, userDoc, loading, refreshUserDocument, isAdmin, addCash, deductCash } = auth;\r\n  const userId = user?.uid;\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [parkingDailyInterest, setParkingDailyInterest] = useState(0);\r\n  const [userDeposits, setUserDeposits] = useState([]);\r\n  const [userSavings, setUserSavings] = useState([]);\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [modal, setModal] = useState({ isOpen: false, product: null, type: '' });\r\n  const [currentCash, setCurrentCash] = useState(userDoc?.cash || 0);\r\n\r\n  const displayMessage = (text, type = \"info\", duration = 3000) => {\r\n    setMessage(text);\r\n    setMessageType(type);\r\n    if (duration) setTimeout(() => setMessage(null), duration);\r\n  };\r\n\r\n  const loadAllData = useCallback(async () => {\r\n    if (!userId) return;\r\n    setIsProcessing(true);\r\n    try {\r\n      //  \r\n      const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRateProduct = depositProducts.length > 0 ? depositProducts[0] : null;\r\n\r\n      if (parkingRateProduct) {\r\n        const parkingDoc = await getDoc(parkingRef);\r\n        if (parkingDoc.exists()) {\r\n          const data = parkingDoc.data();\r\n          const lastInterestDate = data.lastInterestDate?.toDate();\r\n\r\n          if (!lastInterestDate || !isToday(lastInterestDate)) {\r\n            const daysToApply = lastInterestDate ? differenceInDays(new Date(), lastInterestDate) : 1;\r\n            if (daysToApply > 0) {\r\n              const dailyRate = (parkingRateProduct.dailyRate || 0.0027); //  1%     \r\n              const { interest } = calculateCompoundInterest(data.balance || 0, dailyRate, daysToApply);\r\n\r\n              if (interest > 0) {\r\n                await updateDoc(parkingRef, {\r\n                  balance: increment(interest),\r\n                  lastInterestDate: serverTimestamp()\r\n                });\r\n                displayMessage(`  ${formatCurrency(interest)} .`, 'success');\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          //   \r\n          await setDoc(parkingRef, {\r\n            balance: 0,\r\n            lastInterestDate: serverTimestamp()\r\n          });\r\n        }\r\n      }\r\n\r\n      //   \r\n      const finalParkingDoc = await getDoc(parkingRef);\r\n      if (finalParkingDoc.exists()) {\r\n        const balance = finalParkingDoc.data().balance || 0;\r\n        setParkingBalance(balance);\r\n\r\n        //    (1% )\r\n        const dailyRate = 1; // 1%  \r\n        const dailyInterest = calculateDailyInterest(balance, dailyRate);\r\n        setParkingDailyInterest(dailyInterest);\r\n      }\r\n\r\n      //   \r\n      const productsRef = collection(db, \"users\", userId, \"products\");\r\n      const snapshot = await getDocs(productsRef);\r\n      const deposits = [], savings = [], loans = [];\r\n\r\n      snapshot.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') deposits.push(product);\r\n        else if (product.type === 'savings') savings.push(product);\r\n        else if (product.type === 'loan') loans.push(product);\r\n      });\r\n\r\n      setUserDeposits(deposits);\r\n      setUserSavings(savings);\r\n      setUserLoans(loans);\r\n    } catch (error) {\r\n      logger.error(\"  :\", error);\r\n      displayMessage(\"   .\", \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [userId, depositProducts]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && userId) loadAllData();\r\n  }, [userId, loading, loadAllData]);\r\n\r\n  // userDoc cash   currentCash \r\n  useEffect(() => {\r\n    if (userDoc?.cash !== undefined) {\r\n      setCurrentCash(userDoc.cash);\r\n      logger.log(\"[ParkingAccount] currentCash :\", userDoc.cash);\r\n    }\r\n  }, [userDoc?.cash]);\r\n\r\n  const handleOpenModal = (product, type) => setModal({ isOpen: true, product, type });\r\n  const handleCloseModal = () => setModal({ isOpen: false, product: null, type: '' });\r\n\r\n  const handleSubscribe = async (subscribeAmount) => {\r\n    logger.log(\"--- handleSubscribe  ---\");\r\n    const amount = parseFloat(subscribeAmount);\r\n    const { product, type } = modal;\r\n\r\n    logger.log(\" :\", product);\r\n    logger.log(` : ${type},  : ${amount}`);\r\n\r\n    if (isNaN(amount) || amount <= 0) {\r\n      logger.error(\"  :\", subscribeAmount);\r\n      return displayMessage(\"  .\", \"error\");\r\n    }\r\n    if (product.minAmount && amount < product.minAmount) {\r\n      logger.error(`   : ${amount} < ${product.minAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.minAmount)}.`, \"error\");\r\n    }\r\n    if (product.maxAmount && amount > product.maxAmount) {\r\n      logger.error(`   : ${amount} > ${product.maxAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.maxAmount)}.`, \"error\");\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    handleCloseModal(); // UX     \r\n\r\n    // ---    ---\r\n    const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n    if (!teacherAccount) {\r\n      displayMessage(\"()    .  .\", \"error\");\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n    logger.log(\" :\", teacherAccount.name, teacherAccount.id);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const tempId = `temp_${Date.now()}`;\r\n    const maturityDate = new Date(Date.now() + product.termInDays * 24 * 60 * 60 * 1000);\r\n    const optimisticProduct = {\r\n      id: tempId,\r\n      name: product.name,\r\n      termInDays: product.termInDays,\r\n      rate: product.dailyRate,\r\n      balance: amount,\r\n      startDate: new Date(),\r\n      maturityDate: maturityDate,\r\n      type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n      isOptimistic: true //   \r\n    };\r\n\r\n    //    \r\n    if (optimisticProduct.type === 'deposit') {\r\n      setUserDeposits(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'savings') {\r\n      setUserSavings(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'loan') {\r\n      setUserLoans(prev => [...prev, optimisticProduct]);\r\n    }\r\n\r\n    //    \r\n    const cashChangeAmount = type === 'loans' ? amount : -amount;\r\n    setCurrentCash(prev => prev + cashChangeAmount); //  UI   \r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccount.id);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        // /:   \r\n        if (type !== 'loans' && currentCashInDb < amount) {\r\n          throw new Error(\"  .\");\r\n        }\r\n\r\n        // : ()  \r\n        if (type === 'loans' && teacherCashInDb < amount) {\r\n          throw new Error(\"()    .\");\r\n        }\r\n\r\n        const newProductData = {\r\n          name: product.name,\r\n          termInDays: product.termInDays,\r\n          rate: product.dailyRate,\r\n          balance: amount,\r\n          startDate: serverTimestamp(),\r\n          maturityDate: maturityDate,\r\n          type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n          teacherId: teacherAccount.id, //   ID \r\n          teacherName: teacherAccount.name || ''\r\n        };\r\n\r\n        const newProductRef = doc(collection(db, \"users\", userId, \"products\"));\r\n        transaction.set(newProductRef, newProductData);\r\n\r\n        // /:   \r\n        // :   \r\n        if (type === 'loans') {\r\n          // :  \r\n          transaction.update(userRef, { cash: increment(amount) });\r\n          transaction.update(teacherRef, { cash: increment(-amount) });\r\n        } else {\r\n          // /:  \r\n          transaction.update(userRef, { cash: increment(-amount) });\r\n          transaction.update(teacherRef, { cash: increment(amount) });\r\n        }\r\n      });\r\n\r\n      const actionText = type === 'loans' ? '' : '';\r\n      displayMessage(`${product.name} ${actionText} . (  )`, \"success\");\r\n\r\n      //     (// )\r\n      const activityType = type === 'deposits' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n        : type === 'savings' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n          : ACTIVITY_TYPES.LOAN_CREATE;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: `${product.name} ${type === 'loans' ? '' : ''} (${formatCurrency(amount)}) -   `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: product.name,\r\n          productType: type,\r\n          termInDays: product.termInDays,\r\n          dailyRate: product.dailyRate,\r\n          maturityDate: maturityDate.toISOString(),\r\n          teacherId: teacherAccount.id,\r\n          teacherName: teacherAccount.name\r\n        }\r\n      });\r\n\r\n      //        \r\n      await loadAllData();\r\n      if (refreshUserDocument) refreshUserDocument();\r\n\r\n    } catch (error) {\r\n      logger.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      if (optimisticProduct.type === 'deposit') {\r\n        setUserDeposits(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'savings') {\r\n        setUserSavings(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'loan') {\r\n        setUserLoans(prev => prev.filter(p => p.id !== tempId));\r\n      }\r\n\r\n      //   ( UI)\r\n      setCurrentCash(prev => prev - cashChangeAmount);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleMaturity = async (product) => {\r\n    logger.log(\"--- handleMaturity  ---\");\r\n    logger.log(\" :\", product);\r\n\r\n    const { id, name, type, balance, termInDays, rate, teacherId } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      logger.error(\"handleMaturity: userId .\");\r\n      return;\r\n    }\r\n\r\n    const dailyRate = rate;\r\n    const { total, interest } = calculateCompoundInterest(balance, dailyRate, termInDays);\r\n\r\n    logger.log(` : =${balance}, =${interest}, =${total}`);\r\n\r\n    const confirmMsg = isLoan\r\n      ? `  :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`\r\n      : ` :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`;\r\n\r\n    if (!window.confirm(confirmMsg)) {\r\n      logger.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    logger.log(\"  ...\");\r\n\r\n    //    ( teacherId    )\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    logger.log(\"  ID:\", teacherAccountId);\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      logger.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        logger.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        if (isLoan) {\r\n          //   :    (+)\r\n          if (currentCashInDb < total) {\r\n            throw new Error(` . (: ${formatCurrency(total)}, : ${formatCurrency(currentCashInDb)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(-total) });\r\n          transaction.update(teacherRef, { cash: increment(total) });\r\n          logger.log(` :  -${total},  +${total}`);\r\n        } else {\r\n          // /  :    (+)\r\n          if (teacherCashInDb < total) {\r\n            throw new Error(`()   . (: ${formatCurrency(total)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(total) });\r\n          transaction.update(teacherRef, { cash: increment(-total) });\r\n          logger.log(` :  +${total},  -${total}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        logger.log(\"   \");\r\n        logger.log(\"  \");\r\n      });\r\n\r\n      logger.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(total)} (  )`\r\n        : `  : ${formatCurrency(total)} (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_MATURITY;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `\r\n          : `${name}   (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `,\r\n        amount: isLoan ? -total : total,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          interest,\r\n          total,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        logger.log(\"userDoc  \");\r\n        refreshUserDocument().then(() => {\r\n          logger.log(\"[ParkingAccount]    userDoc  \");\r\n        });\r\n      }\r\n\r\n      logger.log(\"   \");\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      logger.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      //    currentCash \r\n      if (userDoc?.cash !== undefined) {\r\n        logger.log(\"   :\", userDoc.cash);\r\n        setCurrentCash(userDoc.cash);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n      logger.log(\"--- handleMaturity  ---\");\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleCancelEarly = async (product) => {\r\n    logger.log(\"--- handleCancelEarly  ---\");\r\n    logger.log(\"  :\", product);\r\n\r\n    const { id, name, type, balance } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      logger.error(\"handleCancelEarly: userId .\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = isLoan\r\n      ? ` ${formatCurrency(balance)} ?`\r\n      : `'${name}'()  ? (   )`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      logger.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    logger.log(\"   ...\");\r\n\r\n    //    ( teacherId    )\r\n    const teacherId = product.teacherId;\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    logger.log(\"  ID:\", teacherAccountId);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const originalProducts = {\r\n      deposit: [...userDeposits],\r\n      savings: [...userSavings],\r\n      loan: [...userLoans]\r\n    };\r\n    const originalCash = currentCash;\r\n\r\n    const cashChangeAmount = isLoan ? -balance : balance;\r\n    setCurrentCash(prev => prev + cashChangeAmount);\r\n\r\n    if (type === 'deposit') {\r\n      setUserDeposits(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'savings') {\r\n      setUserSavings(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'loan') {\r\n      setUserLoans(prev => prev.filter(p => p.id !== id));\r\n    }\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      logger.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        logger.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n        logger.log(`   (DB): ${currentCashInDb},   : ${teacherCashInDb}`);\r\n\r\n        if (isLoan) {\r\n          //   :    ()\r\n          if (currentCashInDb < balance) {\r\n            throw new Error(\"   .\");\r\n          }\r\n          transaction.update(userRef, { cash: increment(-balance) });\r\n          transaction.update(teacherRef, { cash: increment(balance) });\r\n          logger.log(`  :  -${balance},  +${balance}`);\r\n        } else {\r\n          // /  :    (,  )\r\n          if (teacherCashInDb < balance) {\r\n            throw new Error(`()   . (: ${formatCurrency(balance)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(balance) });\r\n          transaction.update(teacherRef, { cash: increment(-balance) });\r\n          logger.log(` :  +${balance},  -${balance}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        logger.log(\"   \");\r\n        logger.log(\"  \");\r\n      });\r\n\r\n      logger.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(balance)} (  )`\r\n        : `  :  ${formatCurrency(balance)}  (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_WITHDRAW;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (${formatCurrency(balance)}) -  `\r\n          : ` : ${name} ( ${formatCurrency(balance)}) -  `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          isEarlyCancellation: true,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        logger.log(\"userDoc  \");\r\n        refreshUserDocument();\r\n      }\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      setUserDeposits(originalProducts.deposit);\r\n      setUserSavings(originalProducts.savings);\r\n      setUserLoans(originalProducts.loan);\r\n      setCurrentCash(originalCash);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n      logger.log(\"--- handleCancelEarly  ---\");\r\n    }\r\n  };\r\n\r\n  const handleParkingDeposit = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev + amount);\r\n\r\n    try {\r\n      //     (AuthContext deductCash )\r\n      const cashDeducted = await deductCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashDeducted) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n\r\n        if (parkingSnapshot.exists()) {\r\n          transaction.update(parkingRef, { balance: increment(amount) });\r\n        } else {\r\n          transaction.set(parkingRef, { balance: amount, lastInterestDate: serverTimestamp() });\r\n        }\r\n      });\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_DEPOSIT,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: -amount,\r\n        metadata: { parkingBalance: parkingBalance + amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleParkingWithdraw = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev - amount);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n        const currentParkingBalance = parkingSnapshot.data()?.balance ?? 0;\r\n\r\n        if (currentParkingBalance < amount) throw new Error(\"  .\");\r\n\r\n        transaction.update(parkingRef, { balance: increment(-amount) });\r\n      });\r\n\r\n      //    (AuthContext addCash )\r\n      const cashAdded = await addCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashAdded) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_WITHDRAW,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: amount,\r\n        metadata: { parkingBalance: parkingBalance - amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteSubscribedProduct = async (product) => {\r\n    if (!isAdmin()) {\r\n      displayMessage(\"  .\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`  (${product.name})  ?     .`)) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", product.id);\r\n      await deleteDoc(productRef);\r\n      displayMessage(\"  .\", \"success\");\r\n      loadAllData();\r\n    } catch (error) {\r\n      logger.error(\"    :\", error);\r\n      displayMessage(`  : ${error.message}`, \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div style={styles.container}>   ...</div>;\r\n  if (!user) return <div style={styles.container}> .</div>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/*   */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '10px',\r\n        marginBottom: '24px',\r\n        borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n        paddingBottom: '0',\r\n        position: 'relative'\r\n      }}>\r\n        <button\r\n          onClick={() => onViewChange && onViewChange('parking')}\r\n          style={{\r\n            padding: '12px 24px',\r\n            border: 'none',\r\n            background: activeView === 'parking' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '17px',\r\n            fontWeight: activeView === 'parking' ? '700' : '500',\r\n            color: activeView === 'parking' ? '#00fff2' : '#94a3b8',\r\n            borderBottom: `3px solid ${activeView === 'parking' ? '#00fff2' : 'transparent'}`,\r\n            marginBottom: '-2px',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n        >\r\n            \r\n        </button>\r\n        {isAdmin && isAdmin() && (\r\n          <>\r\n            <button\r\n              onClick={() => onViewChange && onViewChange('admin')}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'admin' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'admin' ? '700' : '500',\r\n                color: activeView === 'admin' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'admin' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (onViewChange) onViewChange('userProducts');\r\n                if (onLoadUserProducts) onLoadUserProducts();\r\n              }}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'userProducts' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'userProducts' ? '700' : '500',\r\n                color: activeView === 'userProducts' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'userProducts' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n                \r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {message && <div style={styles.message(messageType)}>{message}</div>}\r\n\r\n      {/*     */}\r\n      {activeView === 'userProducts' && isAdmin && isAdmin() && (\r\n        <div style={{\r\n          backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n          borderRadius: '16px',\r\n          padding: '32px',\r\n          boxShadow: '0 6px 20px rgba(0, 0, 0, 0.3)',\r\n          border: '1px solid rgba(255, 255, 255, 0.05)'\r\n        }}>\r\n          <h2 style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '16px', color: '#fff' }}>\r\n                 \r\n          </h2>\r\n          <p style={{ fontSize: '14px', color: '#94a3b8', marginBottom: '20px' }}>\r\n                       .\r\n          </p>\r\n\r\n          {allUserProducts.length === 0 ? (\r\n            <p style={{ textAlign: 'center', padding: '40px', color: '#94a3b8' }}>\r\n                .\r\n            </p>\r\n          ) : (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                  <tr style={{ backgroundColor: 'rgba(255, 255, 255, 0.05)', borderBottom: '2px solid rgba(255, 255, 255, 0.1)' }}>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>/</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allUserProducts.map((product, index) => {\r\n                    const typeLabel = product.type === 'deposit' ? '' :\r\n                      product.type === 'savings' ? '' :\r\n                        product.type === 'loan' ? '' : '';\r\n                    return (\r\n                      <tr key={`${product.userId}-${product.id}-${index}`} style={{ borderBottom: '1px solid rgba(255, 255, 255, 0.05)' }}>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.userName}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.name}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{typeLabel}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#00fff2' }}>{formatKoreanCurrency(product.balance || 0)}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.rate}%</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.termInDays}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>\r\n                          {product.maturityDate\r\n                            ? new Date(product.maturityDate).toLocaleDateString('ko-KR')\r\n                            : '-'}\r\n                        </td>\r\n                        <td style={{ padding: '12px' }}>\r\n                          <button\r\n                            onClick={() => onDeleteUserProduct && onDeleteUserProduct(product)}\r\n                            style={{\r\n                              ...styles.button(false, 'danger'),\r\n                              fontSize: '12px',\r\n                              padding: '6px 12px'\r\n                            }}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <div style={{ marginTop: '20px', textAlign: 'right', color: '#94a3b8', fontSize: '14px' }}>\r\n                 {allUserProducts.length} \r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {activeView === 'parking' && (\r\n        <div style={styles.grid}>\r\n          <ParkingAccountSection\r\n            balance={parkingBalance}\r\n            dailyInterest={parkingDailyInterest}\r\n            onDeposit={handleParkingDeposit}\r\n            onWithdraw={handleParkingWithdraw}\r\n            isProcessing={isProcessing}\r\n            userCash={currentCash}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.deposits}\r\n            subscribedProducts={userDeposits}\r\n            availableProducts={depositProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'deposits')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.savings}\r\n            subscribedProducts={userSavings}\r\n            availableProducts={installmentProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'savings')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.loans}\r\n            subscribedProducts={userLoans}\r\n            availableProducts={loanProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'loans')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n        </div>\r\n      )}\r\n      <SubscriptionModal\r\n        isOpen={modal.isOpen}\r\n        onClose={handleCloseModal}\r\n        product={modal.product}\r\n        onConfirm={handleSubscribe}\r\n        isProcessing={isProcessing}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParkingAccount;\r\n","// src/Banking.js - Tailwind UI \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ParkingAccount from \"./ParkingAccount\";\r\nimport { getBankingProducts, updateBankingProducts, db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs, collectionGroup, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Landmark, ChevronLeft, Save, Plus, Trash2 } from \"lucide-react\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\nconst convertAdminProductsToAccountFormat = (adminProducts) => {\r\n  if (!Array.isArray(adminProducts)) {\r\n    logger.error(\r\n      \"convertAdminProductsToAccountFormat:   .\",\r\n      adminProducts\r\n    );\r\n    return [];\r\n  }\r\n  return adminProducts.map((product) => ({\r\n    id: product.id,\r\n    name: product.name,\r\n    dailyRate:\r\n      product.dailyRate !== undefined && !isNaN(product.dailyRate) ? parseFloat(product.dailyRate) : 0,\r\n    termInDays:\r\n      product.termInDays !== undefined && !isNaN(product.termInDays) ? parseInt(product.termInDays) : 1,\r\n    minAmount:\r\n      product.minAmount !== undefined && !isNaN(product.minAmount) ? parseInt(product.minAmount) : 0,\r\n    maxAmount:\r\n      product.maxAmount !== undefined && !isNaN(product.maxAmount) ? parseInt(product.maxAmount) : 0,\r\n  }));\r\n};\r\n\r\nimport \"./Banking.css\";\r\nimport { logger } from \"../../utils/logger\";\r\n\r\nconst Banking = () => {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [activeView, setActiveView] = useState(\"parking\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [parkingDepositProducts, setParkingDepositProducts] = useState([]);\r\n  const [parkingInstallmentProducts, setParkingInstallmentProducts] = useState(\r\n    []\r\n  );\r\n  const [parkingLoanProducts, setParkingLoanProducts] = useState([]);\r\n\r\n  //    \r\n  const [allUserProducts, setAllUserProducts] = useState([]);\r\n\r\n  //     \r\n  const loadAllUserProducts = async () => {\r\n    if (!auth?.userDoc?.classCode || !(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      //      \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", auth.userDoc.classCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      const userMap = {};\r\n      usersSnapshot.forEach((doc) => {\r\n        userMap[doc.id] = {\r\n          id: doc.id,\r\n          name: doc.data().name || doc.data().nickname || \"  \",\r\n          ...doc.data()\r\n        };\r\n      });\r\n\r\n      //  []     -   N+1  \r\n      const allProducts = [];\r\n      const userIds = Object.keys(userMap);\r\n\r\n      //   products   (  Promise.all )\r\n      const productPromises = userIds.map(async (userId) => {\r\n        const productsQuery = collection(db, \"users\", userId, \"products\");\r\n        const productsSnapshot = await getDocs(productsQuery);\r\n\r\n        return productsSnapshot.docs.map((productDoc) => {\r\n          const productData = productDoc.data();\r\n          return {\r\n            firestoreId: productDoc.id, //  Firestore  ID\r\n            userId: userId,\r\n            userName: userMap[userId].name,\r\n            ...productData,\r\n            maturityDate: productData.maturityDate?.toDate ? productData.maturityDate.toDate() : productData.maturityDate\r\n          };\r\n        });\r\n      });\r\n\r\n      //  Promise   \r\n      const productsArrays = await Promise.all(productPromises);\r\n\r\n      // 2D  1D  \r\n      productsArrays.forEach(productsArray => {\r\n        allProducts.push(...productsArray);\r\n      });\r\n\r\n      setAllUserProducts(allProducts);\r\n      logger.log(\"   :\", allProducts);\r\n    } catch (error) {\r\n      logger.error(\"    :\", error);\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handleAdminDeleteUserProduct = async (product) => {\r\n    logger.log(\" :\", product);\r\n\r\n    if (!(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      logger.log(\"  \");\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${product.userName}' '${product.name}'   ?\\n    .`)) {\r\n      logger.log(\"  \");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // firestoreId  ( Firestore  ID)\r\n      const productId = product.firestoreId || String(product.id);\r\n      logger.log(\" :\", `users/${product.userId}/products/${productId}`);\r\n      logger.log(\"  ID:\", productId);\r\n\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", productId);\r\n      logger.log(\" ...\");\r\n      await deleteDoc(productRef);\r\n      logger.log(\" \");\r\n\r\n      setMessage(\" .\");\r\n      setMessageType(\"success\");\r\n\r\n      //  \r\n      logger.log(\"  ...\");\r\n      await loadAllUserProducts();\r\n      logger.log(\"  \");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMessage(`   : ${error.message}`);\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const [formattedDepositProducts, setFormattedDepositProducts] = useState([]);\r\n  const [formattedInstallmentProducts, setFormattedInstallmentProducts] =\r\n    useState([]);\r\n  const [formattedLoanProducts, setFormattedLoanProducts] = useState([]);\r\n\r\n  // Firestore  \r\n  const loadAllData = async () => {\r\n    const classCode = auth?.userDoc?.classCode;\r\n    if (!classCode || classCode === '') {\r\n      logger.warn(\"[Banking]        .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const bankingData = await getBankingProducts(classCode, true, 'Banking');\r\n\r\n      // deposits savings  ( )\r\n      if (bankingData.deposits) {\r\n        setParkingDepositProducts(bankingData.deposits);\r\n      } else {\r\n        setParkingDepositProducts([]);\r\n      }\r\n\r\n      // savings installments  ( )\r\n      if (bankingData.savings) {\r\n        setParkingInstallmentProducts(bankingData.savings);\r\n      } else {\r\n        setParkingInstallmentProducts([]);\r\n      }\r\n\r\n      // loans   ( )\r\n      if (bankingData.loans) {\r\n        setParkingLoanProducts(bankingData.loans);\r\n      } else {\r\n        setParkingLoanProducts([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      logger.error(\"    :\", error);\r\n      setMessage(\"    .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth && !auth.loading && auth.user && auth.userDoc?.classCode) {\r\n      loadAllData();\r\n    } else if (auth && !auth.loading && !auth.user) {\r\n      setParkingSavingsProducts([]);\r\n      setParkingInstallmentProducts([]);\r\n      setParkingLoanProducts([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [auth?.user, auth?.loading, auth?.userDoc?.classCode]); // loadAllData  , auth      \r\n\r\n  useEffect(() => {\r\n    setFormattedDepositProducts(\r\n      convertAdminProductsToAccountFormat(parkingDepositProducts)\r\n    );\r\n    setFormattedInstallmentProducts(\r\n      convertAdminProductsToAccountFormat(parkingInstallmentProducts)\r\n    );\r\n    setFormattedLoanProducts(\r\n      convertAdminProductsToAccountFormat(parkingLoanProducts)\r\n    );\r\n  }, [parkingDepositProducts, parkingInstallmentProducts, parkingLoanProducts]);\r\n\r\n  const handleParkingProductChange = (type, index, field, value) => {\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.map((product, i) => {\r\n      if (i === index) {\r\n        const updatedProduct = { ...product };\r\n        if (\r\n          field === \"termInDays\" ||\r\n          field === \"minAmount\" ||\r\n          field === \"maxAmount\"\r\n        ) {\r\n          const numValue = parseInt(value);\r\n          updatedProduct[field] =\r\n            isNaN(numValue) || numValue < (field === \"termInDays\" ? 1 : 0)\r\n              ? field === \"termInDays\"\r\n                ? 1\r\n                : 0\r\n              : numValue;\r\n        } else if (field === \"dailyRate\") {\r\n          const dailyRateValue = parseFloat(value);\r\n          updatedProduct.dailyRate =\r\n            isNaN(dailyRateValue) || dailyRateValue < 0 ? 0 : dailyRateValue;\r\n        } else if (field === \"name\") {\r\n          updatedProduct[field] = value;\r\n        }\r\n        return updatedProduct;\r\n      }\r\n      return product;\r\n    });\r\n    setProductsState(updatedProducts);\r\n  };\r\n\r\n  const saveParkingProducts = async (type) => {\r\n    if (!auth?.userDoc?.classCode) {\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      let products, firestoreType;\r\n\r\n      switch (type) {\r\n        case \"deposits\":\r\n          products = parkingDepositProducts;\r\n          firestoreType = \"deposits\"; // Firebase deposits \r\n          break;\r\n        case \"installments\":\r\n          products = parkingInstallmentProducts;\r\n          firestoreType = \"savings\"; // Firebase savings \r\n          break;\r\n        case \"loans\":\r\n          products = parkingLoanProducts;\r\n          firestoreType = \"loans\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      await updateBankingProducts(\r\n        auth.userDoc.classCode,\r\n        firestoreType,\r\n        products\r\n      );\r\n\r\n      setMessage(\r\n        `${type === \"deposits\"\r\n          ? \"\"\r\n          : type === \"installments\"\r\n            ? \"\"\r\n            : \"\"\r\n        }   .`\r\n      );\r\n      setMessageType(\"success\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      logger.error(`${type}    :`, error);\r\n      setMessage(\"   .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addParkingProduct = (type) => {\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: ` ${type === \"deposits\"\r\n        ? \"\"\r\n        : type === \"installments\"\r\n          ? \"\"\r\n          : \"\"\r\n        } `,\r\n      dailyRate: 0.01,\r\n      termInDays: 365,\r\n      minAmount: type === \"loans\" ? 0 : 100000,\r\n      maxAmount: type === \"loans\" ? 1000000 : 0,\r\n    };\r\n\r\n    switch (type) {\r\n      case \"deposits\":\r\n        setParkingDepositProducts([...parkingDepositProducts, newProduct]);\r\n        break;\r\n      case \"installments\":\r\n        setParkingInstallmentProducts([\r\n          ...parkingInstallmentProducts,\r\n          newProduct,\r\n        ]);\r\n        break;\r\n      case \"loans\":\r\n        setParkingLoanProducts([...parkingLoanProducts, newProduct]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const deleteParkingProduct = async (type, indexToDelete) => {\r\n    if (isLoading) return; //   \r\n\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.filter(\r\n      (_, index) => index !== indexToDelete\r\n    );\r\n    setProductsState(updatedProducts);\r\n\r\n    //    \r\n    if (auth?.userDoc?.classCode) {\r\n      setIsLoading(true);\r\n      try {\r\n        const firestoreType =\r\n          type === \"deposits\"\r\n            ? \"deposits\"\r\n            : type === \"installments\"\r\n              ? \"savings\"\r\n              : \"loans\";\r\n        await updateBankingProducts(\r\n          auth.userDoc.classCode,\r\n          firestoreType,\r\n          updatedProducts\r\n        );\r\n        setMessage(\" .\");\r\n        setMessageType(\"info\");\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(\"\");\r\n        }, 2000);\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        setMessage(\"   .\");\r\n        setMessageType(\"error\");\r\n        //         ()\r\n        setProductsState(productsState);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (auth.loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/*   */}\r\n      {isLoading && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <AlchanLoading />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"px-4 py-6 sm:px-6\">\r\n        {/*   */}\r\n        <PageHeader\r\n          title=\"  \"\r\n          subtitle=\", ,   \"\r\n          icon={Landmark}\r\n          backButton={\r\n            <ActionButton\r\n              variant=\"ghost\"\r\n              icon={ChevronLeft}\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              \r\n            </ActionButton>\r\n          }\r\n        />\r\n\r\n        {/*   */}\r\n        {message && (\r\n          <div className={`mb-4 p-4 rounded-xl ${messageType === 'error'\r\n            ? 'bg-red-900/40 text-red-200 border border-red-800/50'\r\n            : messageType === 'success'\r\n              ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-800/50'\r\n              : 'bg-blue-900/40 text-blue-200 border border-blue-800/50'\r\n            }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className={activeView === \"admin\" ? \"content-box\" : \"\"}>\r\n          {(activeView === \"parking\" || activeView === \"userProducts\") && (\r\n            <ParkingAccount\r\n              auth={auth}\r\n              depositProducts={formattedDepositProducts}\r\n              installmentProducts={formattedInstallmentProducts}\r\n              loanProducts={formattedLoanProducts}\r\n              activeView={activeView}\r\n              onViewChange={setActiveView}\r\n              onLoadUserProducts={loadAllUserProducts}\r\n              allUserProducts={allUserProducts}\r\n              onDeleteUserProduct={handleAdminDeleteUserProduct}\r\n              isLoading={isLoading}\r\n            />\r\n          )}\r\n          {activeView === \"admin\" &&\r\n            auth.user &&\r\n            (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\") && (\r\n              <div>\r\n                <h2 className=\"admin-header\">\r\n                   -    (  )\r\n                </h2>\r\n                {/* Savings Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingDepositProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.01\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"deposits\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"deposits\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"deposits\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Installment Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingInstallmentProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.011\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"installments\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"installments\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"installments\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Loan Products */}\r\n                <div className=\"admin-section\" style={{ borderBottom: \"none\" }}>\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingLoanProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.05\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.maxAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"maxAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"loans\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"loans\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"loans\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {activeView === \"admin\" &&\r\n            !(\r\n              auth.user &&\r\n              (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")\r\n            ) && (\r\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800\">\r\n                  .\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default Banking;","// src/components/AvatarEditor.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"./Avatar\";\r\nimport {\r\n  getAvatarConfig,\r\n  saveAvatarConfig,\r\n  getAvatarOptions,\r\n  isHairstyleCompatible,\r\n  AVATAR_CATEGORIES,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *    \r\n */\r\nexport default function AvatarEditor({ isOpen, onClose, userId, onSave }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"skinTone\");\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      const savedConfig = getAvatarConfig(userId);\r\n      setConfig(savedConfig);\r\n      setHasChanges(false);\r\n    }\r\n  }, [isOpen, userId]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const currentOptions = getAvatarOptions(selectedCategory);\r\n\r\n  const handleOptionSelect = (optionId) => {\r\n    const newConfig = { ...config, [selectedCategory]: optionId };\r\n\r\n    //   \r\n    if (selectedCategory === \"faceShape\") {\r\n      if (!isHairstyleCompatible(config.hairstyle, optionId)) {\r\n        //     \r\n        newConfig.hairstyle = \"short\";\r\n      }\r\n    }\r\n\r\n    setConfig(newConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    saveAvatarConfig(userId, config);\r\n    setHasChanges(false);\r\n    if (onSave) onSave(config);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setConfig({ ...DEFAULT_AVATAR });\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleRandomize = () => {\r\n    const randomConfig = {};\r\n    AVATAR_CATEGORIES.forEach(cat => {\r\n      const options = getAvatarOptions(cat.id);\r\n      if (options.length > 0) {\r\n        const randomIndex = Math.floor(Math.random() * options.length);\r\n        randomConfig[cat.id] = options[randomIndex].id;\r\n      }\r\n    });\r\n    setConfig(randomConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  //    \r\n  const getCurrentValue = () => config[selectedCategory];\r\n\r\n  //  \r\n  const renderOptionItem = (option) => {\r\n    const isSelected = getCurrentValue() === option.id;\r\n\r\n    //   \r\n    const isIncompatible = selectedCategory === \"hairstyle\" &&\r\n      !isHairstyleCompatible(option.id, config.faceShape);\r\n\r\n    return (\r\n      <button\r\n        key={option.id}\r\n        onClick={() => !isIncompatible && handleOptionSelect(option.id)}\r\n        disabled={isIncompatible}\r\n        className=\"p-3 rounded-xl flex flex-col items-center gap-1.5 min-w-[70px] transition-all\"\r\n        style={{\r\n          border: isSelected ? \"3px solid #a78bfa\" : \"2px solid #374151\",\r\n          background: isSelected\r\n            ? \"linear-gradient(135deg, #a78bfa20 0%, #8b5cf620 100%)\"\r\n            : \"#1f2937\",\r\n          cursor: isIncompatible ? \"not-allowed\" : \"pointer\",\r\n          opacity: isIncompatible ? 0.4 : 1,\r\n        }}\r\n      >\r\n        {/*   */}\r\n        {option.color && (\r\n          <div\r\n            className=\"w-7 h-7 rounded-full\"\r\n            style={{\r\n              backgroundColor: option.color,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n              boxShadow: isSelected ? `0 0 10px ${option.color}` : \"none\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*   */}\r\n        {option.gradient && (\r\n          <div\r\n            className=\"w-7 h-7 rounded-full\"\r\n            style={{\r\n              background: `linear-gradient(135deg, ${option.gradient.join(\", \")})`,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*  - SVG  */}\r\n        {selectedCategory === \"faceShape\" && option.path && (\r\n          <div className=\"w-9 h-9\">\r\n            <svg viewBox=\"0 0 100 100\" width=\"36\" height=\"36\">\r\n              <path\r\n                d={option.path}\r\n                fill=\"#F5DEB3\"\r\n                stroke={isSelected ? \"#a78bfa\" : \"#666\"}\r\n                strokeWidth=\"2\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n        {/*    */}\r\n        {option.icon && selectedCategory !== \"faceShape\" && (\r\n          <div className=\"w-7 h-7 flex items-center justify-center text-2xl\">\r\n            {option.icon}\r\n          </div>\r\n        )}\r\n        {/*  ( ) - , , path, icon    */}\r\n        {!option.color && !option.gradient && !option.path && !option.icon && (\r\n          <div className=\"w-7 h-7 flex items-center justify-center text-xl\" style={{ color: \"#e8e8ff\" }}>\r\n            {option.id === \"none\" ? \"\" : \"\"}\r\n          </div>\r\n        )}\r\n        <span\r\n          className=\"text-xs text-center\"\r\n          style={{\r\n            color: isSelected ? \"#a78bfa\" : \"#9ca3af\",\r\n            fontWeight: isSelected ? \"600\" : \"400\",\r\n          }}\r\n        >\r\n          {option.name}\r\n        </span>\r\n        {isIncompatible && (\r\n          <span className=\"text-[9px]\" style={{ color: \"#ef4444\" }}>\r\n            \r\n          </span>\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 flex items-center justify-center z-[2000] p-2.5\"\r\n      style={{ backgroundColor: \"rgba(0, 0, 0, 0.85)\" }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"rounded-2xl p-5 w-full max-w-[600px] max-h-[90vh] overflow-y-auto\"\r\n        style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n          border: \"2px solid #a78bfa40\",\r\n          boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"m-0 text-xl font-bold flex items-center gap-2.5\" style={{ color: \"#e8e8ff\" }}>\r\n            <span className=\"text-2xl\"></span>\r\n             \r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"bg-transparent border-none text-2xl cursor-pointer\"\r\n            style={{ color: \"#9ca3af\" }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          className=\"flex justify-center mb-4 p-4 rounded-2xl\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #11182750 0%, #1f293750 100%)\",\r\n            border: \"1px solid #374151\",\r\n          }}\r\n        >\r\n          <div className=\"relative\">\r\n            <Avatar key={JSON.stringify(config)} config={config} size={150} />\r\n            {/*   */}\r\n            <button\r\n              onClick={handleRandomize}\r\n              className=\"absolute -bottom-2.5 -right-2.5 w-10 h-10 rounded-full border-none text-xl cursor-pointer flex items-center justify-center\"\r\n              style={{\r\n                background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\r\n                boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.4)\",\r\n              }}\r\n              title=\" \"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"flex gap-1.5 overflow-x-auto overflow-y-hidden pb-3 mb-3\" style={{\r\n            WebkitOverflowScrolling: \"touch\",\r\n            scrollbarWidth: \"thin\",\r\n            msOverflowStyle: \"auto\",\r\n          }}>\r\n          {AVATAR_CATEGORIES.map((cat) => (\r\n            <button\r\n              key={cat.id}\r\n              onClick={() => setSelectedCategory(cat.id)}\r\n              className=\"px-3 py-2 rounded-xl text-xs font-semibold cursor-pointer whitespace-nowrap flex items-center gap-1.5 transition-all min-w-fit\"\r\n              style={{\r\n                border: selectedCategory === cat.id ? \"2px solid #a78bfa\" : \"2px solid transparent\",\r\n                background:\r\n                  selectedCategory === cat.id\r\n                    ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                    : \"#374151\",\r\n                color: selectedCategory === cat.id ? \"#fff\" : \"#9ca3af\",\r\n              }}\r\n            >\r\n              {/*    */}\r\n              <span\r\n                className=\"w-3.5 h-3.5 rounded-full flex-shrink-0\"\r\n                style={{\r\n                  backgroundColor: cat.icon,\r\n                  border: \"2px solid rgba(255,255,255,0.3)\",\r\n                }}\r\n              />\r\n              <span>{cat.name}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          className=\"grid gap-2 max-h-[200px] overflow-y-auto p-2 rounded-xl mb-4\"\r\n          style={{\r\n            gridTemplateColumns: \"repeat(auto-fill, minmax(70px, 1fr))\",\r\n            background: \"#11182750\",\r\n          }}\r\n        >\r\n          {currentOptions.map(renderOptionItem)}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"flex gap-2.5 justify-end\">\r\n          <button\r\n            onClick={handleReset}\r\n            className=\"px-5 py-2.5 rounded-xl bg-transparent text-sm cursor-pointer\"\r\n            style={{\r\n              border: \"1px solid #374151\",\r\n              color: \"#9ca3af\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!hasChanges}\r\n            className=\"px-6 py-2.5 rounded-xl border-none text-sm font-semibold\"\r\n            style={{\r\n              background: hasChanges\r\n                ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                : \"#374151\",\r\n              color: hasChanges ? \"#fff\" : \"#6b7280\",\r\n              cursor: hasChanges ? \"pointer\" : \"not-allowed\",\r\n              boxShadow: hasChanges ? \"0 4px 15px rgba(139, 92, 246, 0.4)\" : \"none\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function AvatarProfileCard({ userId, userName, netAssets, onEditClick }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setConfig(getAvatarConfig(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 flex items-center gap-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #a78bfa40\",\r\n      }}\r\n    >\r\n      {/*  */}\r\n      <div className=\"relative\">\r\n        <Avatar config={config} size={100} />\r\n        <button\r\n          onClick={onEditClick}\r\n          className=\"absolute -bottom-1 -right-1 w-8 h-8 rounded-full text-sm cursor-pointer flex items-center justify-center\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n            border: \"2px solid #1a1a2e\",\r\n          }}\r\n          title=\" \"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      {/*  */}\r\n      <div className=\"flex-1\">\r\n        <div className=\"text-lg font-bold mb-2\" style={{ color: \"#e8e8ff\" }}>\r\n          {userName}\r\n        </div>\r\n        <div className=\"text-sm\" style={{ color: \"#9ca3af\" }}>\r\n          : {Number(netAssets || 0).toLocaleString()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/pages/my-profile/MyProfile.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { verifyClassCode, db } from \"../../firebase\";\r\nimport { doc, updateDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { updatePassword, EmailAuthProvider, reauthenticateWithCredential, deleteUser } from \"firebase/auth\";\r\nimport Avatar from \"../../components/Avatar\";\r\nimport AvatarEditor from \"../../components/AvatarEditor\";\r\nimport { getAvatarConfig } from \"../../utils/avatarSystem\";\r\nimport { getLevelInfo, LEVEL_THRESHOLDS } from \"../../utils/levelSystem\";\r\nimport { getUserAchievements, getAchievementById } from \"../../utils/achievementSystem\";\r\nimport { StreakDisplay, StreakRewardInfo } from \"../../components/DailyReward\";\r\nimport { formatKoreanCurrency } from \"../../utils/numberFormatter\";\r\nimport { User, Key, Building2, Trash2, LogOut, Settings, ChevronRight } from \"lucide-react\";\r\n\r\nexport default function MyProfile() {\r\n  const { user, userDoc, logout } = useAuth();\r\n  const userId = user?.uid;\r\n  const userName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n  const [achievements, setAchievements] = useState([]);\r\n\r\n  //    \r\n  const [showNicknameModal, setShowNicknameModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showClassCodeModal, setShowClassCodeModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\r\n  //  \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //  \r\n  const cash = Number(userDoc?.cash) || 0;\r\n  const stockValue = Number(userDoc?.stockValue) || 0;\r\n  const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n  const itemValue = Number(userDoc?.itemValue) || 0;\r\n  const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n\r\n  //  \r\n  const levelInfo = getLevelInfo(netAssets);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setAvatarConfig(getAvatarConfig(userId));\r\n      setAchievements(getUserAchievements(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleAvatarSave = (newConfig) => {\r\n    setAvatarConfig(newConfig);\r\n  };\r\n\r\n  //  \r\n  const resetModals = () => {\r\n    setNewNickname(\"\");\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n    setNewClassCode(\"\");\r\n    setDeleteConfirmText(\"\");\r\n    setError(\"\");\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = async () => {\r\n    if (!newNickname.trim()) {\r\n      setError(\" .\");\r\n      return;\r\n    }\r\n    if (newNickname.length < 2 || newNickname.length > 10) {\r\n      setError(\" 2~10  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { nickname: newNickname.trim() });\r\n      alert(\" .\");\r\n      setShowNicknameModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"  .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      setError(\"  6  .\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n      await reauthenticateWithCredential(user, credential);\r\n      await updatePassword(user, newPassword);\r\n      alert(\" .\");\r\n      setShowPasswordModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      if (err.code === \"auth/wrong-password\") {\r\n        setError(\"   .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleChangeClassCode = async () => {\r\n    if (!newClassCode.trim()) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(newClassCode.trim());\r\n      if (!isValid) {\r\n        setError(\"   .\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { classCode: newClassCode.trim() });\r\n      alert(\"  .\");\r\n      setShowClassCodeModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"   .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    if (deleteConfirmText !== \"\") {\r\n      setError(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Firestore   \r\n      const userRef = doc(db, \"users\", userId);\r\n      await deleteDoc(userRef);\r\n\r\n      // Firebase Auth  \r\n      await deleteUser(user);\r\n\r\n      alert(\" .\");\r\n    } catch (err) {\r\n      if (err.code === \"auth/requires-recent-login\") {\r\n        setError(\"     .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     (legendary > epic > rare > common)\r\n  const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n  const sortedAchievements = [...achievements].sort((a, b) => {\r\n    const achA = getAchievementById(a.id);\r\n    const achB = getAchievementById(b.id);\r\n    return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n  });\r\n\r\n  //   (  )\r\n  const bestAchievement = sortedAchievements.length > 0\r\n    ? getAchievementById(sortedAchievements[0].id)\r\n    : null;\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <p className=\"text-gray-400\"> .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\r\n        {/*   */}\r\n        <h1 style={{\r\n          fontSize: \"28px\",\r\n          fontWeight: \"800\",\r\n          background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n          WebkitBackgroundClip: \"text\",\r\n          WebkitTextFillColor: \"transparent\",\r\n          marginBottom: \"24px\",\r\n        }}>\r\n           \r\n        </h1>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n          borderRadius: \"24px\",\r\n          padding: \"32px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n          boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.4)\",\r\n        }}>\r\n          <div style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            gap: \"24px\",\r\n          }}>\r\n            {/*  */}\r\n            <div style={{ position: \"relative\" }}>\r\n              <Avatar config={avatarConfig} size={180} />\r\n              <button\r\n                onClick={() => setShowAvatarEditor(true)}\r\n                style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"5px\",\r\n                  right: \"5px\",\r\n                  width: \"44px\",\r\n                  height: \"44px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"3px solid #1a1a2e\",\r\n                  fontSize: \"18px\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 15px rgba(167, 139, 250, 0.4)\",\r\n                }}\r\n                title=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <h2 style={{\r\n                fontSize: \"24px\",\r\n                fontWeight: \"700\",\r\n                color: \"#e8e8ff\",\r\n                marginBottom: \"8px\",\r\n              }}>\r\n                {userName}\r\n              </h2>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                display: \"inline-flex\",\r\n                alignItems: \"center\",\r\n                gap: \"8px\",\r\n                padding: \"8px 16px\",\r\n                background: `linear-gradient(135deg, ${levelInfo.color}20 0%, ${levelInfo.color}10 100%)`,\r\n                border: `2px solid ${levelInfo.color}`,\r\n                borderRadius: \"20px\",\r\n                marginBottom: \"12px\",\r\n              }}>\r\n                <span style={{ fontSize: \"20px\" }}>{levelInfo.icon}</span>\r\n                <span style={{ color: levelInfo.color, fontWeight: \"700\", fontSize: \"14px\" }}>\r\n                  Lv.{levelInfo.level} {levelInfo.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/*   */}\r\n              {bestAchievement && (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"8px\",\r\n                  marginTop: \"8px\",\r\n                }}>\r\n                  <span style={{ fontSize: \"18px\" }}>{bestAchievement.icon}</span>\r\n                  <span style={{\r\n                    color: bestAchievement.rarity === \"legendary\" ? \"#f59e0b\" :\r\n                           bestAchievement.rarity === \"epic\" ? \"#a78bfa\" :\r\n                           bestAchievement.rarity === \"rare\" ? \"#3b82f6\" : \"#9ca3af\",\r\n                    fontWeight: \"600\",\r\n                    fontSize: \"13px\"\r\n                  }}>\r\n                    {bestAchievement.name}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{ marginTop: \"12px\" }}>\r\n                <StreakDisplay userId={userId} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>  \r\n          </h3>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>\r\n                {levelInfo.icon} Lv.{levelInfo.level} {levelInfo.title}\r\n              </span>\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", fontWeight: \"600\" }}>\r\n                {levelInfo.progress.toFixed(1)}%\r\n              </span>\r\n            </div>\r\n            <div style={{\r\n              height: \"12px\",\r\n              background: \"#374151\",\r\n              borderRadius: \"6px\",\r\n              overflow: \"hidden\",\r\n            }}>\r\n              <div style={{\r\n                width: `${levelInfo.progress}%`,\r\n                height: \"100%\",\r\n                background: `linear-gradient(90deg, ${levelInfo.color} 0%, ${levelInfo.color}99 100%)`,\r\n                borderRadius: \"6px\",\r\n                transition: \"width 0.5s ease\",\r\n              }} />\r\n            </div>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginTop: \"8px\",\r\n              fontSize: \"12px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n              <span>: {formatKoreanCurrency(netAssets)}</span>\r\n              {levelInfo.level < LEVEL_THRESHOLDS.length - 1 && (\r\n                <span>: {formatKoreanCurrency(LEVEL_THRESHOLDS[levelInfo.level + 1]?.minAssets || 0)}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>   ({achievements.length})\r\n          </h3>\r\n\r\n          {achievements.length === 0 ? (\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              padding: \"32px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n                 .\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"repeat(auto-fill, minmax(140px, 1fr))\",\r\n              gap: \"12px\",\r\n            }}>\r\n              {sortedAchievements.map((ach) => {\r\n                const achievement = getAchievementById(ach.id);\r\n                if (!achievement) return null;\r\n\r\n                const rarityColors = {\r\n                  legendary: { bg: \"#f59e0b20\", border: \"#f59e0b\", text: \"#f59e0b\" },\r\n                  epic: { bg: \"#a78bfa20\", border: \"#a78bfa\", text: \"#a78bfa\" },\r\n                  rare: { bg: \"#3b82f620\", border: \"#3b82f6\", text: \"#3b82f6\" },\r\n                  common: { bg: \"#6b728020\", border: \"#6b7280\", text: \"#9ca3af\" },\r\n                };\r\n                const colors = rarityColors[achievement.rarity] || rarityColors.common;\r\n\r\n                return (\r\n                  <div\r\n                    key={ach.id}\r\n                    style={{\r\n                      background: colors.bg,\r\n                      border: `2px solid ${colors.border}`,\r\n                      borderRadius: \"12px\",\r\n                      padding: \"16px\",\r\n                      textAlign: \"center\",\r\n                      transition: \"all 0.2s\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: \"32px\", marginBottom: \"8px\" }}>\r\n                      {achievement.icon}\r\n                    </div>\r\n                    <div style={{\r\n                      color: colors.text,\r\n                      fontSize: \"12px\",\r\n                      fontWeight: \"600\",\r\n                      marginBottom: \"4px\",\r\n                    }}>\r\n                      {achievement.name}\r\n                    </div>\r\n                    <div style={{\r\n                      color: \"#6b7280\",\r\n                      fontSize: \"10px\",\r\n                    }}>\r\n                      {new Date(ach.unlockedAt).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        <StreakRewardInfo />\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <Settings size={20} />  \r\n          </h3>\r\n\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n            {/*     */}\r\n            <div style={{\r\n              padding: \"16px\",\r\n              background: \"#0f0f23\",\r\n              borderRadius: \"12px\",\r\n              border: \"1px solid #374151\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>  </span>\r\n                <span style={{ color: \"#e8e8ff\", fontSize: \"16px\", fontWeight: \"600\" }}>\r\n                  {userDoc?.classCode || \"\"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowNicknameModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <User size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowPasswordModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Key size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*    */}\r\n            <button\r\n              onClick={() => { setShowClassCodeModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Building2 size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}>  </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*  */}\r\n            <button\r\n              onClick={logout}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                marginTop: \"8px\",\r\n              }}\r\n            >\r\n              <LogOut size={20} style={{ color: \"#9ca3af\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}></span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowDeleteModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"rgba(239, 68, 68, 0.1)\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid rgba(239, 68, 68, 0.3)\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Trash2 size={20} style={{ color: \"#ef4444\" }} />\r\n              <span style={{ color: \"#ef4444\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#ef4444\" }} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <AvatarEditor\r\n        isOpen={showAvatarEditor}\r\n        onClose={() => setShowAvatarEditor(false)}\r\n        userId={userId}\r\n        onSave={handleAvatarSave}\r\n      />\r\n\r\n      {/*    */}\r\n      {showNicknameModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowNicknameModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={e => setNewNickname(e.target.value)}\r\n              placeholder=\"  (2~10)\"\r\n              maxLength={10}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowNicknameModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeNickname}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showPasswordModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowPasswordModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              onChange={e => setCurrentPassword(e.target.value)}\r\n              placeholder=\" \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={e => setNewPassword(e.target.value)}\r\n              placeholder=\"  (6 )\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={e => setConfirmPassword(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowPasswordModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangePassword}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {showClassCodeModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowClassCodeModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\" }}>\r\n               : <span style={{ color: \"#a78bfa\", fontWeight: \"600\" }}>{userDoc?.classCode || \"\"}</span>\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCode}\r\n              onChange={e => setNewClassCode(e.target.value.toUpperCase())}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowClassCodeModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeClassCode}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showDeleteModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowDeleteModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #ef4444\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#ef4444\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"16px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\", lineHeight: 1.6 }}>\r\n                      .\r\n                 <span style={{ color: \"#ef4444\", fontWeight: \"600\" }}>''</span> .\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={e => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #ef4444\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowDeleteModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleDeleteAccount}\r\n                disabled={isLoading || deleteConfirmText !== \"\"}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: deleteConfirmText === \"\" ? \"#ef4444\" : \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: (isLoading || deleteConfirmText !== \"\") ? \"not-allowed\" : \"pointer\",\r\n                  opacity: (isLoading || deleteConfirmText !== \"\") ? 0.5 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport MyAssets from '../pages/my-assets/MyAssets';\r\nimport PersonalShop from '../pages/market/PersonalShop';\r\nimport Login from '../pages/auth/Login';\r\nimport Banking from '../pages/banking/Banking';\r\nimport MyProfile from '../pages/my-profile/MyProfile';\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminPage = lazy(() => import('../pages/admin/AdminPage'));\r\nconst AdminPanel = lazy(() => import('../pages/admin/AdminPanel'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  // Jua  \r\n  useEffect(() => {\r\n    const link = document.createElement('link');\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Jua&display=swap';\r\n    link.rel = 'stylesheet';\r\n    document.head.appendChild(link);\r\n    return () => {\r\n      if (document.head.contains(link)) {\r\n        document.head.removeChild(link);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/task-management\" element={<AdminRoute><Dashboard adminTabMode=\"taskManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/salary-settings\" element={<AdminRoute><Dashboard adminTabMode=\"salarySettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/app-management\" element={<AdminRoute><Dashboard adminTabMode=\"appManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/page\" element={<AdminRoute><AdminPage /></AdminRoute>} />\r\n            <Route path=\"/admin-panel\" element={<AdminRoute><AdminPanel onClose={() => navigate(-1)} classCode={userClassCode} /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","onClick","e","stopPropagation","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","disabled","required","calculateValue","style","cursor","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","width","borderCollapse","fontSize","borderRadius","overflow","border","thead","backgroundColor","th","padding","textAlign","fontWeight","color","borderBottom","position","top","zIndex","td","tr","transition","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","marginBottom","processDonationData","log","studentsCount","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","concat","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","alert","normalizeType","cache","getCacheKey","JSON","stringify","getFromCache","key","cached","Date","now","timestamp","delete","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","where","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","limit","q","query","collection","db","snapshot","getDocs","logs","doc","_data$timestamp","toDate","normalizedFilterType","hasMore","paginatedLogs","slice","newLastDoc","AdminDatabase","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","trim","useCache","userIds","m","transactions","userIdsCount","warn","batches","i","allTransactions","batch","_data$timestamp3","getTransactionsData","tx","description","includes","metadata","category","convertTransactionsToLogs","prev","handleLoadMore","getActivityTypeColor","typeStr","toString","toLowerCase","formatDate","date","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","some","member","handleRefresh","keysToDelete","startsWith","clearClassCache","info","typeCounts","typeExamples","entries","count","filters","_log$type","_log$description","desc","t","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","_ref2","filterName","filterFunc","matchedLogs","matchedTypes","size","join","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","title","activity","reason","itemName","quantity","couponAmount","PageContainer","PageHeader","subtitle","icon","Icon","badge","action","backButton","LoadingState","_ref4","EmptyState","_ref6","ActionButton","_ref1","variant","primary","secondary","outline","danger","success","ghost","indigo","sm","md","lg","Loader2","iconCollection","styles","container","maxWidth","margin","fontFamily","card","boxShadow","header","background","tabs","marginTop","tab","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","label","input","boxSizing","textarea","minHeight","resize","gridTwo","gridTemplateColumns","gap","iconSelector","selectedIcon","height","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","borderColor","priceIncreaseSection","helpText","lineHeight","checkboxWrapper","checkbox","buttonGroup","paddingTop","borderTop","editingItemFromStore","onAddItem","onUpdateItem","onClose","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","item","setItem","price","stock","initialStock","available","priceIncreasePercentage","handleChange","checked","handleTabClick","tabName","isEditing","itemData","parseFloat","maxHeight","overflowY","handleIconSelect","onMouseEnter","transform","onMouseLeave","step","formatKoreanNumber","number","unit","num","replace","isNegative","units","resultParts","remaining","Math","abs","quotient","floor","maximumFractionDigits","formatKoreanCurrency","ItemContext","createContext","useItems","context","useContext","items","userItems","marketListings","marketOffers","addItem","purchaseItem","updateItem","deleteItem","useItem","updateUserItemQuantity","listItemForSale","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","refreshData","ItemProvider","isAdmin","isAuthAdmin","authLoading","deductCash","addCash","optimisticUpdate","currentUserClassCode","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","getItemContextData","useMemo","httpsCallable","functions","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","Error","storeItems","groupedUserItems","updateLocalUserItems","newUserItems","tempId","tempNewItem","newItemData","prevItems","token","getIdToken","functionUrl","response","fetch","method","headers","body","ok","errorText","text","status","json","itemId","updatesToApply","code","itemToPurchase","totalPrice","cash","newUserItem","random","durationMs","purchasedAt","originalUserItems","originalStock","originalPrice","existingIndex","findIndex","updated","restocked","newStock","newPrice","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","quantityToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","_ref3","offerId","quantityChange","contextValue","Provider","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","toISOString","serverTimestamp","createdAt","docRef","addDoc","logId","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","LayoutDashboard","path","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","isSubGroup","ListTodo","Briefcase","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","MenuItem","active","hasSubmenu","ChevronDown","SubMenuItem","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","isOpen","isCollapsed","location","useLocation","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","isActive","pathname","handleItemClick","handleLogout","isSuperAdmin","userRole","renderMenuSection","categoryKey","childItems","child","charAt","textShadow","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","FONT_SIZES","Bell","handleNotificationToggle","newValue","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","paths","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","getAvatarConfig","saved","parse","_unused","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","darkenColor","hex","percent","r","g","padStart","Avatar","config","showBorder","avatarConfig","f","o","noseColor","borderStyle","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","p","viewBoxY","viewBoxHeight","LEVEL_THRESHOLDS","level","minAssets","getLevelInfo","netAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","ACHIEVEMENTS","FIRST_THOUSAND","condition","stats","totalAssets","rarity","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","coupons","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","getAchievementById","achievementId","values","getUserAchievements","stored","formatMoney","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","setAvatarConfig","handleAvatarChange","detail","levelInfo","stockValue","realEstateValue","itemValue","bestAchievement","achievements","rarityOrder","legendary","epic","rare","common","sorted","achA","achB","handleClickOutside","event","contains","document","Gift","ChevronLeft","ref","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","Trash2","maxLength","autoFocus","trimmed","toUpperCase","verifyClassCode","SettingsPanel","Home","MobileNav","isTabActive","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","handleBeforeInstall","handleDismiss","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","vibrate","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","taskInfoStyle","taskNameStyle","taskActionsStyle","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","bottom","content","left","marginLeft","borderWidth","animation","perspective","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","letterSpacing","tasks","TaskItem","CommonTaskList","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","createOptimizedFunction","functionName","fn","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","maxAge","backup","parsed","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","toLocaleTimeString","health","totalUsers","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","seconds","errorLogs","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","history","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","studentsQuery","useOptimizedStudents","useQuery","queryKey","staleTime","cacheTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","studentIds","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","updatedAt","handleSaveSalarySettings","taxRateNum","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","firebaseGetDocs","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","usersRef","queryRef","firebaseQuery","firebaseWhere","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","docSnap","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","writeBatch","stockRef","commit","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","formatLastSalaryDate","getFullYear","getMonth","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","handleToggleStudentSelection","Boolean","toLocaleDateString","handleEditStudentJobs","products","product","SystemMonitoring","handleToggleJobSelection","prevStudents","STREAK_REWARDS","getStreakInfo","today","toDateString","lastLogin","yesterday","isNewDay","canClaim","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","DailyRewardBanner","_rewardResult$reward","onClaim","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","nextDay","nextReward","isBigReward","newStreak","isMilestone","handleClaim","newData","claimDailyReward","StreakDisplay","currentStreak","StreakRewardInfo","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","adminTabMode","setUserDoc","refreshUserDocument","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","showDailyRewardPopup","setShowDailyRewardPopup","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","handleDailyRewardClaim","rewardAmount","updateDoc","increment","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","firestoreCollection","substr","setupPolling","pollData","jobsQuery","loadedJobs","docs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","userNickname","RotateCcw","JobList","AdminSettingsModal","right","StockBadge","badgeClass","ItemStore","setAdminPriceIncrease","adminPriceIncreasePercentage","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","availableItems","_item$initialStock","initialQuantities","checkMobile","getButtonText","currentUserCash","canOpenAdminPanel","AdminItemPage","updatedItemData","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","recentlyUsedItems","setRecentlyUsedItems","itemsChanged","updatedItems","_itemData$itemDetails","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","defaultPrice","handleOpenSellToMarketModal","remainingToUse","sortedDocs","amountToUse","classmate","c","recipientName","","","","","UID","inventoryRef","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","assign","catch","React","MyAssets","updateUserInAuth","addCashToUserById","assetsLoading","setAssetsLoading","loadingRef","parkingBalance","setParkingBalance","deposits","setDeposits","savings","setSavings","loans","setLoans","realEstateAssets","setRealEstateAssets","totalNetAssets","setTotalNetAssets","goalDonations","setGoalDonations","transactionHistory","setTransactionHistory","forceReload","setForceReload","CACHE_DURATION","settingsData","loadCouponValueFromSettings","goalProgress","setGoalProgress","myContribution","setMyContribution","goalAchieved","setGoalAchieved","isResettingGoal","setIsResettingGoal","showAllTransactions","setShowAllTransactions","setCachedFirestoreData","cacheItem","createDefaultGoalForClass","goalId","goalDocRef","defaultGoalData","donationCount","createdBy","goalDoc","existingData","loadGoalData","cachedData","getCachedFirestoreData","myTotal","goalDocSnap","goalData","processedTimestamp","timestampISO","loadMyAssetsData","realEstateRef1","realEstateRef2","realEstateRef3","snap1","snap2","snap3","allRealEstateAssets","parkingRef1","parkingRef2","parkingSnap1","parkingSnap2","totalParkingBalance","balance","productsRef","productsSnap","depositsData","savingsData","loansData","_docSnap$data$maturit","maturityDate","transactionsData","activityLogsRef","source","activityError","transactionsRef","transactionsError","_a$timestamp","_a$timestamp2","_b$timestamp","_b$timestamp2","dateA","fallbackError","cashValue","couponMonetaryValue","asset","depositsTotal","deposit","savingsTotal","saving","loanTotal","loan","remainingPrincipal","calculatedTotalAssets","AlchanLoading","paddingBottom","rewardType","renderAssetSummary","displayCash","displayCoupons","displayedTransactions","displayDate","getTime","safeTimestampToDate","dateError","txAmount","txDescription","whiteSpace","textOverflow","marginRight","minWidth","TransferModal","recipientUser","u","recipientId","senderId","senderName","SHOP_CATEGORIES","PRODUCT_TYPES","ShopModal","shop","onSave","formData","setFormData","shopName","cat","rows","ProductModal","shopId","taxAmount","_product$price","productData","PurchaseModal","onConfirm","setQuantity","maxQuantity","ShopCard","ownerName","totalSales","ProductCard","onBuy","isOwner","onEdit","onDelete","PersonalShop","currentUser","userProfile","refreshBalance","shops","setShops","myShop","setMyShop","myProducts","setMyProducts","selectedShop","setSelectedShop","selectedShopProducts","setSelectedShopProducts","showShopModal","setShowShopModal","showProductModal","setShowProductModal","editingProduct","setEditingProduct","purchaseProduct","setPurchaseProduct","purchaseShop","setPurchaseShop","loadingProducts","setLoadingProducts","categoryFilter","setCategoryFilter","searchQuery","setSearchQuery","loadShops","shopsRef","shopsData","_a$createdAt","_a$createdAt$toDate","_b$createdAt","_b$createdAt$toDate","loadMyShop","shopData","pq","pSnapshot","loadShopProducts","deleteDoc","filteredShops","renderTabContent","_SHOP_CATEGORIES$find","_SHOP_CATEGORIES$find2","_SHOP_CATEGORIES$find3","totalTaxPaid","ownerId","soldCount","sellerAmount","buyerRef","sellerRef","taxRef","totalVAT","totalTaxCollected","shopRef","productRef","updates","activityRef","buyerId","buyerName","productId","productName","productType","unitPrice","getTeacherAccount","teacherDoc","grid","cardHeader","cardTitle","tabContainer","tabButton","noProduct","fontStyle","modalOverlay","modalContent","modalTitle","modalCloseBtn","formatCurrency","calculateCompoundInterest","principal","dailyRate","days","interest","total","pow","calculateDailyInterest","ICON_MAP","parking","PiggyBank","HandCoins","SubscribedProductItem","onMaturity","isMatured","daysRemaining","differenceInDays","termInDays","dailyInterestAmount","format","AvailableProductItem","onSubscribe","projectedInterest","ProductSection","subscribedProducts","availableProducts","SubscriptionModal","setAmount","numAmount","projectedTotal","minAmount","ParkingAccountSection","dailyInterest","onDeposit","onWithdraw","auth","installmentProducts","activeView","onViewChange","onLoadUserProducts","allUserProducts","onDeleteUserProduct","setMessage","messageType","setMessageType","parkingDailyInterest","setParkingDailyInterest","userDeposits","setUserDeposits","userSavings","setUserSavings","userLoans","setUserLoans","modal","setModal","currentCash","setCurrentCash","displayMessage","loadAllData","parkingRef","parkingRateProduct","parkingDoc","_data$lastInterestDat","lastInterestDate","isToday","daysToApply","finalParkingDoc","handleOpenModal","handleCloseModal","handleMaturity","teacherId","isLoan","confirmMsg","teacherAccountId","teacherAccount","_userSnapshot$data$ca2","_userSnapshot$data2","_teacherSnapshot$data3","_teacherSnapshot$data4","teacherRef","userSnapshot","teacherSnapshot","currentCashInDb","teacherCashInDb","successMsg","activityType","handleCancelEarly","confirmMessage","originalProducts","originalCash","cashChangeAmount","_userSnapshot$data$ca3","_userSnapshot$data3","_teacherSnapshot$data5","_teacherSnapshot$data6","isEarlyCancellation","handleAdminDeleteSubscribedProduct","overflowX","typeLabel","amountStr","previousParkingBalance","previousCurrentCash","_parkingSnapshot$data","_parkingSnapshot$data2","onAdminDelete","subscribeAmount","maxAmount","optimisticProduct","isOptimistic","_userSnapshot$data$ca","_userSnapshot$data","_teacherSnapshot$data","_teacherSnapshot$data2","newProductData","teacherName","newProductRef","convertAdminProductsToAccountFormat","adminProducts","Banking","_auth$userDoc8","_auth$userDoc1","_auth$userDoc10","_auth$userDoc11","_auth$userDoc12","setActiveView","parkingDepositProducts","setParkingDepositProducts","parkingInstallmentProducts","setParkingInstallmentProducts","parkingLoanProducts","setParkingLoanProducts","setAllUserProducts","loadAllUserProducts","_auth$userDoc","_auth$userDoc2","_auth$userDoc3","usersQuery","usersSnapshot","userMap","allProducts","productPromises","productsQuery","productDoc","_productData$maturity","firestoreId","productsArray","formattedDepositProducts","setFormattedDepositProducts","formattedInstallmentProducts","setFormattedInstallmentProducts","formattedLoanProducts","setFormattedLoanProducts","_auth$userDoc7","_auth$userDoc6","bankingData","getBankingProducts","setParkingSavingsProducts","handleParkingProductChange","field","productsState","setProductsState","updatedProduct","numValue","dailyRateValue","saveParkingProducts","_auth$userDoc9","firestoreType","updateBankingProducts","addParkingProduct","deleteParkingProduct","indexToDelete","_auth$userDoc0","_","ParkingAccount","_auth$userDoc4","_auth$userDoc5","AvatarEditor","setConfig","hasChanges","setHasChanges","savedConfig","currentOptions","handleRandomize","randomConfig","randomIndex","WebkitOverflowScrolling","scrollbarWidth","msOverflowStyle","option","isSelected","isIncompatible","optionId","newConfig","handleOptionSelect","handleReset","handleSave","dispatchEvent","CustomEvent","_unused2","saveAvatarConfig","MyProfile","_LEVEL_THRESHOLDS","showAvatarEditor","setShowAvatarEditor","setAchievements","showNicknameModal","setShowNicknameModal","showPasswordModal","setShowPasswordModal","showClassCodeModal","setShowClassCodeModal","showDeleteModal","setShowDeleteModal","deleteConfirmText","setDeleteConfirmText","resetModals","sortedAchievements","WebkitBackgroundClip","WebkitTextFillColor","ach","achievement","rarityColors","bg","colors","unlockedAt","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","textTransform","deleteUser","OmokGame","lazy","ChessGame","TypingPracticeGame","AdminPage","AdminPanel","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","link","createElement","href","rel","head","appendChild","removeChild","page","mobile","closeSidebar","toggleSidebarCollapse","Login","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff"],"ignoreList":[],"sourceRoot":""}