"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[4589],{577(e,t,s){s.d(t,{nm:()=>l,v5:()=>n});var a=s(5043),i=s(5452);const n={REALTIME:6e5,NORMAL:18e5,LOW:36e5,MANUAL:null};let o=[],r=!1;const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{interval:s=n.NORMAL,enabled:l=!0,deps:c=[]}=t,[d,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(!0),b=(0,a.useRef)(e);(0,a.useEffect)(()=>{b.current=e},[e]);const y=(0,a.useCallback)(async()=>{if(l)try{p(null);const e=await b.current();f.current&&(m(e),u(!1))}catch(e){i.vF.error("[usePolling] \ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",e),f.current&&(p(e),u(!1))}else u(!1)},[l]),v=(0,a.useCallback)(()=>(u(!0),y()),[y]);return(0,a.useEffect)(()=>{if(f.current=!0,g.current&&(clearInterval(g.current),g.current=null),l&&s!==n.MANUAL)return o.push(y),(async()=>{if(!r&&0!==o.length){for(r=!0;o.length>0;){const e=o.shift();await e(),await new Promise(e=>setTimeout(e,100))}r=!1}})(),s&&s>0&&(g.current=setInterval(y,s)),()=>{f.current=!1,g.current&&(clearInterval(g.current),g.current=null)};u(!1)},[y,s,l,...c]),{data:d,loading:x,error:h,refetch:v}}},4148(e,t,s){s.d(t,{BN:()=>r,Cr:()=>i,Dt:()=>h,FJ:()=>u,Hi:()=>n,Ri:()=>o,Sk:()=>y,YQ:()=>p,g4:()=>m,hF:()=>l,i0:()=>j,jC:()=>d,jw:()=>x,k_:()=>b,l9:()=>v,sZ:()=>g,tW:()=>N,yU:()=>w});var a=s(2555);const i=[{id:"fair",name:"\ubc1d\uc740 \ud53c\ubd80",color:"#FFE4C4"},{id:"light",name:"\uc5f0\ud55c \ud53c\ubd80",color:"#F5DEB3"},{id:"medium",name:"\uc911\uac04 \ud53c\ubd80",color:"#DEB887"},{id:"tan",name:"\uadf8\uc744\ub9b0 \ud53c\ubd80",color:"#D2A679"},{id:"dark",name:"\uc5b4\ub450\uc6b4 \ud53c\ubd80",color:"#8B7355"}],n=[{id:"round",name:"\ub465\uadfc\ud615",icon:"\ud83d\udd35",path:"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10"},{id:"oval",name:"\uacc4\ub780\ud615",icon:"\ud83e\udd5a",path:"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8"},{id:"square",name:"\uac01\uc9c4\ud615",icon:"\ud83d\udfe7",path:"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10"},{id:"heart",name:"\ud558\ud2b8\ud615",icon:"\ud83d\udc9c",path:"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10"},{id:"long",name:"\uae34\ud615",icon:"\ud83d\udccf",path:"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5"}],o=[{id:"normal",name:"\uae30\ubcf8",leftX:35,rightX:65,y:45,size:6},{id:"big",name:"\ud070 \ub208",leftX:35,rightX:65,y:45,size:8},{id:"small",name:"\uc791\uc740 \ub208",leftX:35,rightX:65,y:45,size:4},{id:"almond",name:"\uc544\ubaac\ub4dc\ud615",leftX:35,rightX:65,y:45,size:6,shape:"almond"},{id:"round",name:"\ub3d9\uadf8\ub780 \ub208",leftX:35,rightX:65,y:45,size:7,shape:"round"}],r=[{id:"black",name:"\uac80\uc740\uc0c9",color:"#1a1a1a"},{id:"brown",name:"\uac08\uc0c9",color:"#654321"},{id:"hazel",name:"\ud5e4\uc774\uc990",color:"#8E7618"},{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#1E90FF"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#228B22"},{id:"gray",name:"\ud68c\uc0c9",color:"#696969"}],l=[{id:"smile",name:"\ubbf8\uc18c",path:"M35,65 Q50,75 65,65",stroke:!0},{id:"grin",name:"\ud65c\uc9dd \uc6c3\uc74c",path:"M30,62 Q50,80 70,62",stroke:!0},{id:"neutral",name:"\ubb34\ud45c\uc815",path:"M38,65 L62,65",stroke:!0},{id:"small_smile",name:"\uc791\uc740 \ubbf8\uc18c",path:"M40,65 Q50,70 60,65",stroke:!0},{id:"open",name:"\ubc8c\ub9b0 \uc785",path:"M35,63 Q50,75 65,63 Q50,80 35,63",fill:!0}],c=["round","oval","square","heart","long"],d=[{id:"none",name:"\ubbfc\uba38\ub9ac",paths:[],compatibleFaces:c},{id:"short",name:"\uc9e7\uc740 \uba38\ub9ac",paths:["M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z"],compatibleFaces:c},{id:"medium",name:"\uc911\uac04 \uba38\ub9ac",paths:["M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z"],bangsPath:"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z",compatibleFaces:c},{id:"long",name:"\uae34 \uba38\ub9ac",paths:["M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z"],bangsPath:"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z",compatibleFaces:c},{id:"bob",name:"\ub2e8\ubc1c",paths:["M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z"],bangsPath:"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z",compatibleFaces:c},{id:"ponytail",name:"\ud3ec\ub2c8\ud14c\uc77c",paths:["M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z","M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z"],compatibleFaces:c},{id:"twintail",name:"\ud2b8\uc708\ud14c\uc77c",paths:["M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z","M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z","M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z"],compatibleFaces:c},{id:"curly",name:"\uacf1\uc2ac\uba38\ub9ac",paths:["M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z","M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z","M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z"],compatibleFaces:c},{id:"mohawk",name:"\ubaa8\ud788\uce78",paths:["M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z"],compatibleFaces:c}],m=[{id:"black",name:"\uac80\uc740\uc0c9",color:"#1a1a1a"},{id:"dark_brown",name:"\uc9c4\ud55c \uac08\uc0c9",color:"#3d2314"},{id:"brown",name:"\uac08\uc0c9",color:"#6b4423"},{id:"light_brown",name:"\ubc1d\uc740 \uac08\uc0c9",color:"#a0522d"},{id:"blonde",name:"\uae08\ubc1c",color:"#f4d03f"},{id:"red",name:"\ube68\uac04\uc0c9",color:"#c0392b"},{id:"orange",name:"\uc8fc\ud669\uc0c9",color:"#e67e22"},{id:"pink",name:"\ud551\ud06c",color:"#ff69b4"},{id:"purple",name:"\ubcf4\ub77c\uc0c9",color:"#9b59b6"},{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#3498db"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#27ae60"},{id:"gray",name:"\ud68c\uc0c9",color:"#7f8c8d"},{id:"white",name:"\ud770\uc0c9",color:"#ecf0f1"},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"]}],x=[{id:"none",name:"\uc5c6\uc74c",color:null},{id:"tshirt",name:"\ud2f0\uc154\uce20",baseColor:"#3498db",path:"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95",sleeves:"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100"},{id:"suit",name:"\uc815\uc7a5",baseColor:"#2c3e50",path:"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95",tie:!0,lapels:!0},{id:"hoodie",name:"\ud6c4\ub4dc\ud2f0",baseColor:"#e74c3c",path:"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95",hood:!0,pocket:!0},{id:"dress",name:"\uc6d0\ud53c\uc2a4",baseColor:"#9b59b6",path:"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92"},{id:"uniform",name:"\uad50\ubcf5",baseColor:"#34495e",path:"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95",collar:!0,buttons:!0}],u=[{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#3498db"},{id:"red",name:"\ube68\uac04\uc0c9",color:"#e74c3c"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#27ae60"},{id:"purple",name:"\ubcf4\ub77c\uc0c9",color:"#9b59b6"},{id:"yellow",name:"\ub178\ub780\uc0c9",color:"#f1c40f"},{id:"orange",name:"\uc8fc\ud669\uc0c9",color:"#e67e22"},{id:"pink",name:"\ud551\ud06c",color:"#ff69b4"},{id:"black",name:"\uac80\uc740\uc0c9",color:"#2c3e50"},{id:"white",name:"\ud770\uc0c9",color:"#ecf0f1"},{id:"navy",name:"\ub124\uc774\ube44",color:"#2c3e50"}],h=[{id:"none",name:"\uc5c6\uc74c"},{id:"glasses",name:"\uc548\uacbd",path:"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43",color:"#1a1a1a"},{id:"sunglasses",name:"\uc120\uae00\ub77c\uc2a4",path:"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40",color:"#1a1a1a",fill:!0},{id:"earrings",name:"\uadc0\uac78\uc774",type:"earrings",color:"#f1c40f"},{id:"necklace",name:"\ubaa9\uac78\uc774",path:"M35,88 Q50,95 65,88",color:"#f1c40f"},{id:"hat",name:"\ubaa8\uc790",path:"M15,15 L85,15 L85,5 Q50,-5 15,5 Z",color:"#e74c3c"},{id:"crown",name:"\uc655\uad00",type:"crown",color:"#f1c40f"},{id:"headband",name:"\uba38\ub9ac\ub760",path:"M12,25 Q50,18 88,25",color:"#ff69b4"},{id:"bow",name:"\ub9ac\ubcf8",type:"bow",color:"#ff69b4"},{id:"mask",name:"\ub9c8\uc2a4\ud06c",path:"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z",color:"#ffffff"}],p=[{id:"none",name:"\uc5c6\uc74c",color:"transparent"},{id:"sky_blue",name:"\ud558\ub298\uc0c9",color:"#87CEEB"},{id:"sunset",name:"\uc11d\uc591",gradient:["#ff7e5f","#feb47b"]},{id:"night",name:"\ubc24\ud558\ub298",gradient:["#0f0c29","#302b63","#24243e"]},{id:"forest",name:"\uc232",gradient:["#134e5e","#71b280"]},{id:"ocean",name:"\ubc14\ub2e4",gradient:["#2193b0","#6dd5ed"]},{id:"pink",name:"\ud551\ud06c",gradient:["#ee9ca7","#ffdde1"]},{id:"purple",name:"\ubcf4\ub77c",gradient:["#667eea","#764ba2"]},{id:"gold",name:"\uace8\ub4dc",gradient:["#f7971e","#ffd200"]},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"]},{id:"galaxy",name:"\uc740\ud558\uc218",gradient:["#0f0c29","#302b63","#24243e"],stars:!0}],g=[{id:"none",name:"\uc5c6\uc74c",style:null},{id:"simple",name:"\ub2e8\uc21c",color:"#ffffff",width:3},{id:"gold",name:"\uace8\ub4dc",color:"#f1c40f",width:4,glow:!0},{id:"silver",name:"\uc2e4\ubc84",color:"#bdc3c7",width:4,glow:!0},{id:"bronze",name:"\ube0c\ub860\uc988",color:"#cd7f32",width:4,glow:!0},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"],width:4,animated:!0},{id:"neon_blue",name:"\ub124\uc628 \ube14\ub8e8",color:"#00fff2",width:3,glow:!0,glowColor:"#00fff2"},{id:"neon_pink",name:"\ub124\uc628 \ud551\ud06c",color:"#ff69b4",width:3,glow:!0,glowColor:"#ff69b4"},{id:"fire",name:"\ubd88\uaf43",gradient:["#ff4500","#ff6347","#ffa500"],width:4,animated:!0},{id:"ice",name:"\uc5bc\uc74c",gradient:["#00bfff","#87ceeb","#e0ffff"],width:4,glow:!0}],f=[{id:"normal",name:"\uae30\ubcf8",eyeMod:null,mouthMod:null},{id:"happy",name:"\ud589\ubcf5",eyeMod:"happy",mouthMod:"grin"},{id:"sad",name:"\uc2ac\ud514",eyeMod:"sad",mouthMod:"sad"},{id:"angry",name:"\ud654\ub0a8",eyeMod:"angry",mouthMod:"angry"},{id:"surprised",name:"\ub180\ub78c",eyeMod:"wide",mouthMod:"open"},{id:"wink",name:"\uc719\ud06c",eyeMod:"wink",mouthMod:"smile"},{id:"love",name:"\uc0ac\ub791",eyeMod:"hearts",mouthMod:"smile"},{id:"cool",name:"\uba4b\uc9d0",eyeMod:"sunglasses",mouthMod:"smirk"}],b={skinTone:"light",faceShape:"oval",eyeStyle:"normal",eyeColor:"brown",mouthStyle:"smile",hairstyle:"short",hairColor:"black",outfit:"tshirt",outfitColor:"blue",accessory:"none",background:"sky_blue",border:"simple",expression:"normal"};function y(e){try{const t=localStorage.getItem("avatar_".concat(e));if(t)return(0,a.A)((0,a.A)({},b),JSON.parse(t))}catch(t){}return(0,a.A)({},b)}function v(e,t){try{return localStorage.setItem("avatar_".concat(e),JSON.stringify(t)),window.dispatchEvent(new CustomEvent("avatarChanged",{detail:{userId:e,config:t}})),!0}catch(s){return!1}}function j(e){switch(e){case"skinTone":return i;case"faceShape":return n;case"eyeStyle":return o;case"eyeColor":return r;case"mouthStyle":return l;case"hairstyle":return d;case"hairColor":return m;case"outfit":return x;case"outfitColor":return u;case"accessory":return h;case"background":return p;case"border":return g;case"expression":return f;default:return[]}}function w(e,t){const s=d.find(t=>t.id===e);return!s||s.compatibleFaces.includes(t)}const N=[{id:"skinTone",name:"\ud53c\ubd80",icon:"#FFE4C4"},{id:"faceShape",name:"\uc5bc\uad74",icon:"#F5DEB3"},{id:"eyeStyle",name:"\ub208",icon:"#1E90FF"},{id:"eyeColor",name:"\ub208\uc0c9",icon:"#654321"},{id:"mouthStyle",name:"\uc785",icon:"#e74c3c"},{id:"hairstyle",name:"\ud5e4\uc5b4",icon:"#3d2314"},{id:"hairColor",name:"\uba38\ub9ac\uc0c9",icon:"#1a1a1a"},{id:"outfit",name:"\uc758\uc0c1",icon:"#3498db"},{id:"outfitColor",name:"\uc758\uc0c1\uc0c9",icon:"#e74c3c"},{id:"accessory",name:"\uc545\uc138",icon:"#f1c40f"},{id:"background",name:"\ubc30\uacbd",icon:"#87CEEB"},{id:"border",name:"\ud14c\ub450\ub9ac",icon:"#a78bfa"}]},4589(e,t,s){s.r(t),s.d(t,{AlchanLoading:()=>Ct,default:()=>Lt});var a=s(5043),i=s(3216),n=s(5016),o=s(8719),r=s(2555),l=s(4379),c=s(2029),d=s(3165),m=s(5326),x=s(9868),u=s(4473),h=s(2629),p=s(1990),g=s(2171),f=s(6511),b=s(7095),y=s(7118),v=s(4919),j=s(6790),w=s(7033),N=s(830),C=s(3639),k=s(920),A=s(8012),S=s(2489),I=s(1680),L=s(2626),E=s(9829),M=s(7365),_=s(2054),T=s(73),Q=s(2382),O=s(614),D=s(9493),R=s(579);const F=e=>{let{className:t,style:s}=e;return(0,R.jsxs)("svg",{className:t,style:s,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsxs)("defs",{children:[(0,R.jsxs)("linearGradient",{id:"iconGradient",x1:"0",y1:"0",x2:"100",y2:"100",gradientUnits:"userSpaceOnUse",children:[(0,R.jsx)("stop",{offset:"0%",stopColor:"#7C3AED"}),(0,R.jsx)("stop",{offset:"100%",stopColor:"#4F46E5"})]}),(0,R.jsxs)("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,R.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,R.jsxs)("feMerge",{children:[(0,R.jsx)("feMergeNode",{in:"coloredBlur"}),(0,R.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,R.jsx)("rect",{x:"5",y:"5",width:"90",height:"90",rx:"22",fill:"url(#iconGradient)"}),(0,R.jsx)("path",{d:"M28 52 L42 66 L72 36",stroke:"white",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),(0,R.jsx)("path",{d:"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z",fill:"#FFD700",stroke:"#B45309",strokeWidth:"1"})]})},z=[{id:"todayTasks",label:"\uc54c\ucc2c \uc624\ub298\uc758 \ud560\uc77c",icon:l.A,path:"/dashboard/tasks",category:"main"},{id:"myAssets",label:"\uc54c\ucc2c \ub098\uc758 \uc790\uc0b0",icon:c.A,path:"/my-assets",category:"main"},{id:"couponGoal",label:"\uc54c\ucc2c \ucfe0\ud3f0 \ubaa9\ud45c",icon:d.A,path:"/coupon-goal",category:"main"},{id:"gamesCategory",label:"\uc54c\ucc2c \ud559\uc2b5 \uac8c\uc784",icon:m.A,isCategory:!0,category:"play"},{id:"omokGame",label:"\uc624\ubaa9",icon:x.A,path:"/learning-games/omok",parentId:"gamesCategory"},{id:"typingGame",label:"\ud0c0\uc790\uc5f0\uc2b5",icon:u.A,path:"/learning-games/typing",parentId:"gamesCategory"},{id:"chessGame",label:"\uccb4\uc2a4 \uac8c\uc784",icon:h.A,path:"/learning-games/science",parentId:"gamesCategory"},{id:"itemsCategory",label:"\uc54c\ucc2c \uc544\uc774\ud15c",icon:p.A,isCategory:!0,category:"economy"},{id:"myItems",label:"\ub0b4 \uc544\uc774\ud15c",icon:g.A,path:"/my-items",parentId:"itemsCategory"},{id:"itemStore",label:"\uc544\uc774\ud15c \uc0c1\uc810",icon:f.A,path:"/item-shop",parentId:"itemsCategory"},{id:"personalShop",label:"\uac1c\uc778 \uc0c1\uc810",icon:b.A,path:"/personal-shop",parentId:"itemsCategory"},{id:"groupPurchase",label:"\ud568\uaed8\uad6c\ub9e4",icon:y.A,path:"/group-purchase",parentId:"itemsCategory"},{id:"financeCategory",label:"\uc54c\ucc2c \uae08\uc735",icon:v.A,isCategory:!0,category:"economy"},{id:"banking",label:"\uc740\ud589",icon:j.A,path:"/banking",parentId:"financeCategory"},{id:"stockTrading",label:"\uc8fc\uc2dd \uac70\ub798\uc18c",icon:w.A,path:"/stock-trading",parentId:"financeCategory"},{id:"auction",label:"\uacbd\ub9e4\uc7a5",icon:N.A,path:"/auction",parentId:"financeCategory"},{id:"realEstate",label:"\ubd80\ub3d9\uc0b0",icon:C.A,path:"/real-estate",parentId:"financeCategory"},{id:"publicCategory",label:"\uc54c\ucc2c \uacf5\uacf5\uae30\uad00",icon:k.A,isCategory:!0,category:"society"},{id:"government",label:"\uc815\ubd80",icon:k.A,path:"/government",parentId:"publicCategory"},{id:"nationalAssembly",label:"\uad6d\ud68c",icon:y.A,path:"/national-assembly",parentId:"publicCategory"},{id:"court",label:"\ubc95\uc6d0",icon:A.A,path:"/court",parentId:"publicCategory"},{id:"policeStation",label:"\uacbd\ucc30\uc11c",icon:S.A,path:"/police",parentId:"publicCategory"},{id:"organizationChart",label:"\ub300\ud1b5\ub839\uc2e4",icon:C.A,path:"/organization-chart",parentId:"publicCategory"},{id:"boardCategory",label:"\uc54c\ucc2c \uac8c\uc2dc\ud310",icon:I.A,isCategory:!0,category:"community"},{id:"learningBoard",label:"\ud559\uc2b5 \uac8c\uc2dc\ud310",icon:L.A,path:"/learning-board",parentId:"boardCategory"},{id:"musicRequest",label:"\uc74c\uc545 \uc2e0\uccad",icon:E.A,path:"/learning-board/music-request",parentId:"boardCategory"},{id:"adminCategory",label:"\uc54c\ucc2c \uad00\ub9ac\uc790",icon:M.A,isCategory:!0,category:"admin",adminOnly:!0},{id:"taskApprovals",label:"\ud560\uc77c \uc2b9\uc778",icon:_.A,path:"/admin/approvals",parentId:"adminCategory",adminOnly:!0},{id:"adminSettings",label:"\uad00\ub9ac\uc790 \uc124\uc815",icon:M.A,path:"/admin/app-settings",parentId:"adminCategory",adminOnly:!0},{id:"studentManagement",label:"\ud559\uc0dd \ubaa9\ub85d",icon:y.A,path:"/admin/students",parentId:"adminCategory",adminOnly:!0},{id:"moneyTransfer",label:"\ub3c8 \ubcf4\ub0b4\uae30/\uac00\uc838\uc624\uae30",icon:j.A,path:"/admin/money-transfer",parentId:"adminCategory",adminOnly:!0},{id:"couponTransfer",label:"\ucfe0\ud3f0 \ubcf4\ub0b4\uae30/\uac00\uc838\uc624\uae30",icon:d.A,path:"/admin/coupon-transfer",parentId:"adminCategory",adminOnly:!0},{id:"activityLog",label:"\ub370\uc774\ud130\ubca0\uc774\uc2a4",icon:I.A,path:"/admin/activity-log",parentId:"adminCategory",adminOnly:!0},{id:"economicEvents",label:"\uacbd\uc81c \uc774\ubca4\ud2b8",icon:T.A,path:"/admin/economic-events",parentId:"adminCategory",adminOnly:!0},{id:"superAdminCategory",label:"\uc571 \uad00\ub9ac\uc790",icon:S.A,isCategory:!0,category:"superadmin",superAdminOnly:!0},{id:"superAdminDashboard",label:"\uc571 \uad00\ub9ac \ub300\uc2dc\ubcf4\ub4dc",icon:S.A,path:"/super-admin",parentId:"superAdminCategory",superAdminOnly:!0}],P={main:"\uba54\uc778",play:"\uac8c\uc784",economy:"\uacbd\uc81c",society:"\uc0ac\ud68c",community:"\ucee4\ubba4\ub2c8\ud2f0",admin:"\uad00\ub9ac",superadmin:"\uc571 \uad00\ub9ac"},q=(0,a.memo)(e=>{let{title:t,children:s}=e;return(0,R.jsxs)("div",{className:"mb-6",children:[(0,R.jsx)("h3",{className:"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:t}),(0,R.jsx)("ul",{className:"space-y-1",children:s})]})}),U=(0,a.memo)(e=>{let{icon:t,label:s,active:a,hasSubmenu:i,onClick:n}=e;return(0,R.jsx)("li",{children:(0,R.jsxs)("button",{onClick:n,className:"w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ".concat(a?"bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"),children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(t,{className:"w-[18px] h-[18px] ".concat(a?"text-indigo-400":"text-slate-500 group-hover:text-slate-300")}),(0,R.jsx)("span",{className:"text-sm",children:s})]}),i&&(0,R.jsx)(Q.A,{className:"w-3.5 h-3.5 text-slate-400"})]})})}),W=(0,a.memo)(e=>{let{icon:t,label:s,active:a,onClick:i}=e;return(0,R.jsxs)("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(a?"text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"text-slate-500 hover:text-slate-200 hover:bg-white/5"),children:[(0,R.jsx)(t,{className:"w-3.5 h-3.5"}),s]})}),B=e=>{let{category:t,children:s,isExpanded:a,onToggle:i,hasActiveChild:n}=e;const o=t.icon;return(0,R.jsxs)("div",{className:"mb-1",children:[(0,R.jsxs)("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ".concat(n?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"text-slate-400 hover:bg-white/5 hover:text-slate-200"),children:[(0,R.jsx)(o,{className:"w-[18px] h-[18px] transition-colors flex-shrink-0 ".concat(n?"text-indigo-400":"text-slate-500 group-hover:text-slate-300")}),(0,R.jsx)("span",{className:"flex-1 text-left",children:t.label}),(0,R.jsx)(Q.A,{className:"w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ".concat(a?"rotate-180":"")})]}),(0,R.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(a?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,R.jsx)("div",{className:"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4",children:s})})]})};function X(e){let{isOpen:t,onClose:s,isCollapsed:o=!1}=e;const l=(0,i.zy)(),c=(0,i.Zp)(),{userDoc:d,logout:m}=(0,n.As)(),[x,u]=(0,a.useState)({}),[h,p]=(0,a.useState)(window.innerWidth<768);(0,a.useEffect)(()=>{let e;const t=()=>{clearTimeout(e),e=setTimeout(()=>p(window.innerWidth<768),150)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[]);const g=(0,a.useCallback)(e=>{u(t=>(0,r.A)((0,r.A)({},t),{},{[e]:!t[e]}))},[]),f=(0,a.useCallback)(e=>!!e&&(l.pathname===e||l.pathname.startsWith("".concat(e,"/"))),[l.pathname]),b=(0,a.useCallback)(e=>z.some(t=>t.parentId===e&&f(t.path)),[f]),y=(0,a.useCallback)(e=>{e.path&&(c(e.path),h&&(null===s||void 0===s||s()))},[c,h,s]),v=(0,a.useCallback)(async()=>{try{m&&(await m(),c("/login"))}catch(e){c("/login")}},[m,c]),j=(null===d||void 0===d?void 0:d.isAdmin)||(null===d||void 0===d?void 0:d.isSuperAdmin),w=null===d||void 0===d?void 0:d.isSuperAdmin;let N="\ud559\uc0dd";null!==d&&void 0!==d&&d.isSuperAdmin?N="\uc571 \uad00\ub9ac\uc790":null!==d&&void 0!==d&&d.isAdmin&&(N="\uad50\uc0ac");const C=(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.nickname)||"\uc0ac\uc6a9\uc790",k=e=>{const t=z.filter(t=>t.category===e&&(!(t.adminOnly&&!j)&&!(t.superAdminOnly&&!w)));return 0===t.length?null:(0,R.jsx)(q,{title:P[e],children:t.map(e=>{if(e.isCategory){const t=z.filter(t=>t.parentId===e.id&&(!(t.adminOnly&&!j)&&!(t.superAdminOnly&&!w)));return 0===t.length?null:(0,R.jsx)(B,{category:e,isExpanded:x[e.id]||b(e.id),onToggle:()=>g(e.id),hasActiveChild:b(e.id),children:t.map(e=>e.isSubGroup?(0,R.jsx)("div",{className:"mt-3 mb-1 first:mt-0",children:(0,R.jsx)("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2",children:e.label})},e.id):(0,R.jsx)(W,{icon:e.icon,label:e.label,active:f(e.path),onClick:()=>y(e)},e.id))},e.id)}return e.parentId?null:(0,R.jsx)(U,{icon:e.icon,label:e.label,active:f(e.path),onClick:()=>y(e)},e.id)})},e)};return o&&!h?(0,R.jsxs)("aside",{className:"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300",children:[(0,R.jsx)("div",{className:"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600",children:(0,R.jsx)("div",{className:"p-1 bg-white/10 rounded-lg shadow-md",children:(0,R.jsx)(F,{style:{width:"32px",height:"32px"}})})}),(0,R.jsx)("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-2",children:z.filter(e=>!e.parentId&&!e.isCategory).map(e=>{if(e.adminOnly&&!j)return null;if(e.superAdminOnly&&!w)return null;const t=e.icon,s=f(e.path);return(0,R.jsx)("button",{onClick:()=>y(e),title:e.label,className:"w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ".concat(s?"bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none":"bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30"),children:(0,R.jsx)(t,{size:24})},e.id)})}),(0,R.jsx)("div",{className:"p-4 border-t border-slate-800 bg-[#0a0a12]/50",children:(0,R.jsx)("div",{className:"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold",children:C.charAt(0)})})]}):(0,R.jsxs)(R.Fragment,{children:[h&&t&&(0,R.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden",onClick:s}),(0,R.jsxs)("aside",{className:"\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\n          ".concat(h?t?"translate-x-0":"-translate-x-full":"relative translate-x-0","\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\n        "),children:[(0,R.jsxs)("div",{className:"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]",children:[(0,R.jsx)("div",{className:"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full"}),(0,R.jsx)("div",{className:"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full"}),(0,R.jsxs)("div",{className:"flex items-center gap-3.5 px-4 w-full relative z-10",children:[(0,R.jsx)("div",{className:"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10",children:(0,R.jsx)(F,{style:{width:"36px",height:"36px"}})}),(0,R.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,R.jsx)("span",{className:"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]",children:"\uc54c\ucc2c"}),(0,R.jsx)("span",{className:"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5",children:"ALCHAN"})]})]}),h&&(0,R.jsx)("button",{onClick:s,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer",children:(0,R.jsx)(O.A,{size:18})})]}),(0,R.jsxs)("nav",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide",children:[k("main"),k("play"),k("economy"),k("society"),k("community"),k("admin"),k("superadmin")]}),(0,R.jsx)("div",{className:"p-4 border-t border-slate-800 bg-[#0a0a12]/50",children:(0,R.jsxs)("div",{onClick:v,className:"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group",children:[(0,R.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold",children:C.charAt(0)}),(0,R.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,R.jsx)("p",{className:"text-sm font-bold text-slate-200 truncate",children:C}),(0,R.jsx)("p",{className:"text-xs text-slate-500 truncate",children:N})]}),(0,R.jsx)(D.A,{className:"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors"})]})})]})]})}var G=s(2864),H=s(5746),Z=s(3946),Y=s(8326),K=s(9463),V=s(4459),J=s(7737),$=s(9855),ee=s(3005),te=s(5472),se=s(5452),ae=s(6099),ie=s(6210);ae.A,c.A,d.A,b.A,m.A,v.A,y.A,ie.A;var ne=s(8393),oe=s(7940),re=s(2300),le=s(9233),ce=s(3677),de=s(7666),me=s(6963);const xe=function(e){let{isOpen:t,onClose:s}=e;const{isDarkMode:i,toggleDarkMode:o,fontSize:r,setFontSize:l}=(0,ee.DP)(),{resetTutorial:c}=function(){const{user:e}=(0,n.As)(),[t,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.uid?(async()=>{try{const t=(0,te.H9)(G.db,"users",e.uid,"settings","tutorial"),a=await(0,te.x7)(t);a.exists()&&a.data().completed||s(!0)}catch(t){se.vF.error("\ud29c\ud1a0\ub9ac\uc5bc \uccb4\ud06c \uc624\ub958:",t)}finally{o(!1)}})():o(!1)},[null===e||void 0===e?void 0:e.uid]),{showTutorial:t,loading:i,completeTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,te.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,te.BN)(t,{completed:!0,completedAt:(0,te.O5)()}),s(!1)}catch(t){se.vF.error("\ud29c\ud1a0\ub9ac\uc5bc \uc644\ub8cc \uc800\uc7a5 \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid]),skipTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,te.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,te.BN)(t,{completed:!0,skipped:!0,skippedAt:(0,te.O5)()}),s(!1)}catch(t){se.vF.error("\ud29c\ud1a0\ub9ac\uc5bc \uc2a4\ud0b5 \uc800\uc7a5 \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid]),resetTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,te.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,te.BN)(t,{completed:!1}),s(!0)}catch(t){se.vF.error("\ud29c\ud1a0\ub9ac\uc5bc \ub9ac\uc14b \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid])}}(),[d,m]=(0,a.useState)("false"!==localStorage.getItem("alchan-notifications")),[x,u]=(0,a.useState)("false"!==localStorage.getItem("alchan-sounds"));return t?(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,R.jsx)("h2",{className:"text-lg font-bold text-white",children:"\uc124\uc815"}),(0,R.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700 transition-colors",children:(0,R.jsx)(O.A,{size:20,className:"text-gray-400"})})]}),(0,R.jsxs)("div",{className:"overflow-y-auto p-4 space-y-6",children:[(0,R.jsxs)("section",{children:[(0,R.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider",children:"\ud654\uba74"}),(0,R.jsxs)("div",{className:"bg-gray-700/50 rounded-2xl p-4 space-y-4",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,R.jsx)(ne.A,{size:20,className:"text-indigo-500"}):(0,R.jsx)(oe.A,{size:20,className:"text-amber-500"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\ub2e4\ud06c \ubaa8\ub4dc"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"\uc5b4\ub450\uc6b4 \ud654\uba74\uc73c\ub85c \ub208\uc758 \ud53c\ub85c\ub97c \uc904\uc5ec\uc694"})]})]}),(0,R.jsx)("button",{onClick:o,className:"w-12 h-7 rounded-full transition-colors relative ".concat(i?"bg-indigo-500":"bg-gray-500"),children:(0,R.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(i?"left-6":"left-1")})})]}),(0,R.jsxs)("div",{className:"pt-4 border-t border-gray-600",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,R.jsx)(re.A,{size:20,className:"text-blue-500"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\uae00\uaf34 \ud06c\uae30"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"\uc77d\uae30 \ud3b8\ud55c \ud06c\uae30\ub97c \uc120\ud0dd\ud558\uc138\uc694"})]})]}),(0,R.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(ee.$N).map(e=>{let[t,{label:s}]=e;return(0,R.jsx)("button",{onClick:()=>l(t),className:"py-2 rounded-xl text-sm font-medium transition-all ".concat(r===t?"bg-indigo-500 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:s},t)})})]})]})]}),(0,R.jsxs)("section",{children:[(0,R.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider",children:"\uc54c\ub9bc"}),(0,R.jsxs)("div",{className:"bg-gray-700/50 rounded-2xl divide-y divide-gray-600",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(le.A,{size:20,className:"text-green-500"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\ud478\uc2dc \uc54c\ub9bc"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"\uc0c8 \uc18c\uc2dd\uc744 \uc54c\ub824\ub4dc\ub824\uc694"})]})]}),(0,R.jsx)("button",{onClick:()=>{const e=!d;m(e),localStorage.setItem("alchan-notifications",String(e))},className:"w-12 h-7 rounded-full transition-colors relative ".concat(d?"bg-green-500":"bg-gray-500"),children:(0,R.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(d?"left-6":"left-1")})})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(ce.A,{size:20,className:"text-purple-500"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\uc18c\ub9ac"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"\uc54c\ub9bc\uc74c\uacfc \ud6a8\uacfc\uc74c"})]})]}),(0,R.jsx)("button",{onClick:()=>{const e=!x;u(e),localStorage.setItem("alchan-sounds",String(e))},className:"w-12 h-7 rounded-full transition-colors relative ".concat(x?"bg-purple-500":"bg-gray-500"),children:(0,R.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(x?"left-6":"left-1")})})]})]})]}),(0,R.jsxs)("section",{children:[(0,R.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider",children:"\uae30\ud0c0"}),(0,R.jsxs)("div",{className:"bg-gray-700/50 rounded-2xl divide-y divide-gray-600",children:[(0,R.jsxs)("button",{onClick:()=>{window.confirm("\ud29c\ud1a0\ub9ac\uc5bc\uc744 \ub2e4\uc2dc \ubcf4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(c(),s())},className:"flex items-center justify-between p-4 w-full hover:bg-gray-600/50 transition-colors",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(de.A,{size:20,className:"text-amber-500"}),(0,R.jsxs)("div",{className:"text-left",children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\ud29c\ud1a0\ub9ac\uc5bc \ub2e4\uc2dc \ubcf4\uae30"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"\uc0ac\uc6a9\ubc95\uc744 \ub2e4\uc2dc \ubc30\uc6cc\uc694"})]})]}),(0,R.jsx)(Y.A,{size:20,className:"text-gray-400"})]}),(0,R.jsx)("div",{className:"p-4",children:(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(me.A,{size:20,className:"text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"font-medium text-white",children:"\uc571 \ubc84\uc804"}),(0,R.jsx)("p",{className:"text-sm text-gray-400",children:"v1.0.0"})]})]})})]})]})]}),(0,R.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,R.jsx)("button",{onClick:s,className:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors",children:"\uc644\ub8cc"})})]})}):null};var ue=s(5540),he=s(4148),pe=s(6825),ge=s(5704),fe=s(8343);const be=e=>(0,fe.FR)(e,(0,fe.mx)()),ye=e=>{let{isOpen:t,onClose:s,title:a,children:i}=e;return t?(0,R.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:s,children:(0,R.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,R.jsxs)("div",{className:"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between",children:[(0,R.jsx)("h3",{className:"text-lg font-bold text-white",children:a}),(0,R.jsx)("button",{onClick:s,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors",children:(0,R.jsx)(O.A,{size:18})})]}),(0,R.jsx)("div",{className:"p-6",children:i})]})}):null},ve=(0,a.memo)(e=>{let{toggleSidebar:t,isSidebarCollapsed:s,onToggleSidebarCollapse:o}=e;const r=(0,i.Zp)(),{user:c,userDoc:d,logout:m,updateUser:x,changePassword:u,deleteCurrentUserAccount:h,loginWithEmailPassword:p}=(0,n.As)(),[g,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),v=(0,a.useRef)(null),[j,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),[A,S]=(0,a.useState)(""),[I,L]=(0,a.useState)(""),[E,_]=(0,a.useState)(""),[T,Q]=(0,a.useState)(""),[O,F]=(0,a.useState)(""),[z,P]=(0,a.useState)(""),[q,U]=(0,a.useState)(!1),[W,B]=(0,a.useState)(""),[X,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(!1),ae=(null===d||void 0===d?void 0:d.isAdmin)||"admin"===(null===d||void 0===d?void 0:d.role)||(null===d||void 0===d?void 0:d.isSuperAdmin),ie=(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.nickname)||(null===c||void 0===c?void 0:c.displayName)||"\uc0ac\uc6a9\uc790";let ne="\ud559\uc0dd";null!==d&&void 0!==d&&d.isSuperAdmin?ne="\uc571 \uad00\ub9ac\uc790":null!==d&&void 0!==d&&d.isAdmin&&(ne="\uad50\uc0ac");const[oe,re]=(0,a.useState)(null);(0,a.useEffect)(()=>{null!==c&&void 0!==c&&c.uid&&re((0,he.Sk)(c.uid));const e=e=>{e.detail.userId===(null===c||void 0===c?void 0:c.uid)&&re(e.detail.config)};return window.addEventListener("avatarChanged",e),()=>window.removeEventListener("avatarChanged",e)},[null===c||void 0===c?void 0:c.uid]);const le=(0,a.useMemo)(()=>{const e=(Number(null===d||void 0===d?void 0:d.cash)||0)+(Number(null===d||void 0===d?void 0:d.stockValue)||0)+(Number(null===d||void 0===d?void 0:d.realEstateValue)||0)+(Number(null===d||void 0===d?void 0:d.itemValue)||0);return(0,pe.ht)(e)},[null===d||void 0===d?void 0:d.cash,null===d||void 0===d?void 0:d.stockValue,null===d||void 0===d?void 0:d.realEstateValue,null===d||void 0===d?void 0:d.itemValue]),ce=(0,a.useMemo)(()=>{if(null===c||void 0===c||!c.uid)return null;const e=(0,ge.uk)(c.uid);if(0===e.length)return null;const t={legendary:0,epic:1,rare:2,common:3},s=[...e].sort((e,s)=>{const a=(0,ge.UM)(e.id),i=(0,ge.UM)(s.id);return(t[null===a||void 0===a?void 0:a.rarity]||99)-(t[null===i||void 0===i?void 0:i.rarity]||99)});return(0,ge.UM)(s[0].id)},[null===c||void 0===c?void 0:c.uid]);(0,a.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const de=()=>{w(null),L(""),P(""),U(!1),ee(""),se(!1),_(""),Q(""),F("")};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("header",{className:"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10",children:[(0,R.jsxs)("div",{className:"h-14 px-3 flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("button",{onClick:t,className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors",children:(0,R.jsx)(l.A,{size:22,className:"text-white"})}),(0,R.jsxs)("h2",{className:"text-sm font-bold text-white whitespace-nowrap",children:["\uc624\ub298\ub3c4 ",(0,R.jsx)("span",{className:"text-[#00fff2]",children:"\uc54c\ucc2c"})," \ud558\ub8e8!"]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsxs)("div",{onClick:()=>r("/my-profile"),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20",children:[(0,R.jsx)("span",{className:"text-sm",children:(null===le||void 0===le?void 0:le.icon)||"\ud83c\udf1f"}),(0,R.jsxs)("div",{className:"flex flex-col leading-none",children:[(0,R.jsx)("span",{className:"text-[9px] text-gray-400",children:"LEVEL"}),(0,R.jsx)("span",{className:"text-xs font-bold",style:{color:(null===le||void 0===le?void 0:le.color)||"#a78bfa"},children:(null===le||void 0===le?void 0:le.level)||1})]}),ce&&(0,R.jsx)("span",{className:"text-sm ml-0.5",children:ce.icon})]}),(0,R.jsx)("div",{onClick:()=>r("/my-profile"),className:"cursor-pointer",children:(0,R.jsx)(ue.A,{config:oe,size:40,showBorder:!0})})]})]}),(0,R.jsxs)("div",{className:"px-4 pb-3 flex gap-3",children:[(0,R.jsxs)("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0",children:(0,R.jsx)("span",{className:"font-bold text-xs",children:"\u20a9"})}),(0,R.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,R.jsx)("p",{className:"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none",children:"\ud604\uae08"}),(0,R.jsx)("p",{className:"text-sm font-bold text-white truncate",children:be((null===d||void 0===d?void 0:d.cash)||0)})]}),!(null!==d&&void 0!==d&&d.isAdmin)&&(0,R.jsx)("button",{onClick:()=>r("/my-assets?transfer=true"),className:"w-7 h-7 rounded-lg bg-emerald-500/20 text-emerald-300 flex items-center justify-center flex-shrink-0 active:scale-90 transition-transform",title:"\uc1a1\uae08",children:(0,R.jsx)(H.A,{size:12})})]}),(0,R.jsxs)("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0",children:(0,R.jsx)(Z.A,{size:14})}),(0,R.jsxs)("div",{className:"min-w-0",children:[(0,R.jsx)("p",{className:"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none",children:"\ucfe0\ud3f0"}),(0,R.jsxs)("p",{className:"text-sm font-bold text-white truncate",children:[(null===d||void 0===d?void 0:d.coupons)||0,"\uac1c"]})]})]})]})]}),(0,R.jsxs)("header",{className:"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("button",{onClick:o,className:"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center",children:s?(0,R.jsx)(Y.A,{size:16}):(0,R.jsx)(K.A,{size:16})}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"text-[15px] font-bold text-white whitespace-nowrap leading-tight",children:["\uc624\ub298\ub3c4 ",(0,R.jsx)("span",{className:"text-[#00fff2] font-jua",children:"\uc54c\ucc2c"})," ","\ud558\ub8e8! \ud83d\udc4b"]}),(0,R.jsxs)("div",{className:"text-xs text-slate-400 whitespace-nowrap leading-tight",children:[ie,"\ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4"]})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs",children:"\u20a9"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-[10px] font-semibold opacity-70 leading-tight",children:"\ud604\uae08"}),(0,R.jsx)("div",{className:"text-[13px] font-bold whitespace-nowrap leading-tight",children:be((null===d||void 0===d?void 0:d.cash)||0)})]}),!(null!==d&&void 0!==d&&d.isAdmin)&&(0,R.jsx)("button",{onClick:()=>r("/my-assets?transfer=true"),className:"w-7 h-7 rounded-lg bg-emerald-500/20 text-emerald-300 flex items-center justify-center hover:bg-emerald-500/30 transition-colors",title:"\uc1a1\uae08",children:(0,R.jsx)(H.A,{size:13})})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center",children:(0,R.jsx)(Z.A,{size:14})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-[10px] font-semibold opacity-70 leading-tight",children:"\ucfe0\ud3f0"}),(0,R.jsxs)("div",{className:"text-[13px] font-bold whitespace-nowrap leading-tight",children:[(null===d||void 0===d?void 0:d.coupons)||0,"\uac1c"]})]})]}),(0,R.jsxs)("div",{onClick:()=>r("/my-profile"),className:"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20",children:[(0,R.jsx)("div",{className:"flex items-center justify-center w-7 h-7 rounded-md text-sm",style:{background:(null===le||void 0===le?void 0:le.color)||"#a78bfa"},children:(null===le||void 0===le?void 0:le.icon)||"\ud83c\udf1f"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"text-[10px] font-semibold leading-tight",style:{color:(null===le||void 0===le?void 0:le.color)||"#a78bfa"},children:["Lv.",(null===le||void 0===le?void 0:le.level)||1]}),(0,R.jsx)("div",{className:"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight",children:(null===le||void 0===le?void 0:le.title)||"\uc0c8\uc2f9"})]}),ce&&(0,R.jsx)("div",{className:"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded",style:{background:"legendary"===ce.rarity?"rgba(245, 158, 11, 0.2)":"epic"===ce.rarity?"rgba(167, 139, 250, 0.2)":"rare"===ce.rarity?"rgba(59, 130, 246, 0.2)":"rgba(107, 114, 128, 0.2)"},children:(0,R.jsx)("span",{className:"text-xs",children:ce.icon})})]}),(0,R.jsxs)("div",{className:"relative",ref:v,children:[(0,R.jsxs)("button",{onClick:()=>f(!g),className:"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer",children:[(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("div",{className:"text-[13px] font-bold text-white whitespace-nowrap leading-tight",children:ie}),(0,R.jsx)("div",{className:"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight",children:ne})]}),(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),r("/my-profile")},className:"cursor-pointer",children:(0,R.jsx)(ue.A,{config:oe,size:40,showBorder:!0})})]}),g&&(0,R.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50",children:[(0,R.jsxs)("div",{className:"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700",children:[(0,R.jsx)("p",{className:"font-bold text-white",children:ie}),(0,R.jsxs)("p",{className:"text-sm text-slate-400 flex items-center gap-2 mt-1",children:[ae&&(0,R.jsx)("span",{className:"text-indigo-400 font-semibold",children:"\uad00\ub9ac\uc790"}),(null===d||void 0===d?void 0:d.classCode)&&(0,R.jsxs)("span",{children:["\ud559\uae09: ",d.classCode]})]})]}),(0,R.jsxs)("div",{className:"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700",children:[(0,R.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,R.jsx)("span",{className:"text-sm text-slate-400",children:"\ud604\uae08"}),(0,R.jsx)("span",{className:"font-bold text-emerald-400",children:be((null===d||void 0===d?void 0:d.cash)||0)})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-sm text-slate-400",children:"\ucfe0\ud3f0"}),(0,R.jsxs)("span",{className:"font-bold text-rose-400",children:[(null===d||void 0===d?void 0:d.coupons)||0,"\uac1c"]})]})]}),(0,R.jsxs)("div",{className:"p-2",children:[(0,R.jsxs)("button",{onClick:()=>{r("/my-profile"),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2",children:[(0,R.jsx)(V.A,{size:18,className:"text-indigo-400"}),"\ub0b4 \ud504\ub85c\ud544",(0,R.jsxs)("span",{className:"ml-auto text-xs text-indigo-400",children:["Lv.",(null===le||void 0===le?void 0:le.level)||0]})]}),(0,R.jsx)("div",{className:"h-px bg-slate-700 my-2"}),(0,R.jsxs)("button",{onClick:()=>{S((null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.nickname)||""),w("nickname"),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[(0,R.jsx)(V.A,{size:18,className:"text-slate-400"}),"\ub2c9\ub124\uc784 \ubcc0\uacbd"]}),(0,R.jsxs)("button",{onClick:()=>{w("password"),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[(0,R.jsx)(J.A,{size:18,className:"text-slate-400"}),"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"]}),(0,R.jsxs)("button",{onClick:()=>{B((null===d||void 0===d?void 0:d.classCode)||""),w("classCode"),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[(0,R.jsx)(C.A,{size:18,className:"text-slate-400"}),"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd"]}),(0,R.jsxs)("button",{onClick:()=>{k(!0),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[(0,R.jsx)(M.A,{size:18,className:"text-slate-400"}),"\uc124\uc815"]}),(0,R.jsx)("div",{className:"h-px bg-slate-600 my-2"}),(0,R.jsxs)("button",{onClick:async()=>{f(!1);if("\uacc4\uc815\uc0ad\uc81c"===window.prompt("\uc815\ub9d0\ub85c \uacc4\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\ub824\uba74 '\uacc4\uc815\uc0ad\uc81c'\ub77c\uace0 \uc785\ub825\ud574\uc8fc\uc138\uc694.")){const t=window.prompt("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(t)try{await p(c.email,t,!0),await h(),alert("\uacc4\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){alert("\uc0ad\uc81c \uc624\ub958: ".concat(e.message))}}},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/20 transition-colors",children:[(0,R.jsx)($.A,{size:18}),"\uacc4\uc815 \uc0ad\uc81c"]}),(0,R.jsx)("div",{className:"h-px bg-slate-600 my-2"}),(0,R.jsxs)("button",{onClick:async()=>{try{m&&(await m(),r("/login"))}catch(e){r("/login")}f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-white/10 transition-colors",children:[(0,R.jsx)(D.A,{size:18,className:"text-slate-400"}),"\ub85c\uadf8\uc544\uc6c3"]})]})]})]})]})]}),(0,R.jsx)(ye,{isOpen:"nickname"===j,onClose:de,title:"\ub2c9\ub124\uc784 \ubcc0\uacbd",children:(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ub2c9\ub124\uc784"}),(0,R.jsx)("input",{type:"text",value:A,onChange:e=>S(e.target.value),placeholder:"2-12\uc790",maxLength:12,className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors",autoFocus:!0})]}),I&&(0,R.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:I}),(0,R.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,R.jsx)("button",{onClick:de,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,R.jsx)("button",{onClick:async()=>{const e=A.trim();if(!e)return L("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(e.length<2)return L("\ub2c9\ub124\uc784\uc740 \ucd5c\uc18c 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(e.length>12)return L("\ub2c9\ub124\uc784\uc740 \ucd5c\ub300 12\uc790\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4.");y(!0);try{await x({name:e})?(alert("\ub2c9\ub124\uc784\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),de()):L("\ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(t){L("\uc624\ub958: ".concat(t.message))}y(!1)},disabled:b,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:b?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})}),(0,R.jsx)(ye,{isOpen:"password"===j,onClose:de,title:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd",children:(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,R.jsx)("input",{type:"password",value:E,onChange:e=>_(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,R.jsx)("input",{type:"password",value:T,onChange:e=>Q(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,R.jsx)("input",{type:"password",value:O,onChange:e=>F(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),z&&(0,R.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:z}),q&&(0,R.jsx)("p",{className:"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl",children:"\ube44\ubc00\ubc88\ud638\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,R.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,R.jsx)("button",{onClick:de,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,R.jsx)("button",{onClick:async()=>{if(!E||!T||!O)return P("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(T.length<6)return P("\uc0c8 \ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(T!==O)return P("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");y(!0);try{await p(c.email,E,!0),await u(T),U(!0),setTimeout(de,2e3)}catch(e){"auth/wrong-password"===e.code||"auth/invalid-credential"===e.code?P("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."):P("\uc624\ub958: ".concat(e.message))}y(!1)},disabled:b||q,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:b?"\ubcc0\uacbd \uc911...":"\ubcc0\uacbd"})]})]})}),(0,R.jsx)(ye,{isOpen:"classCode"===j,onClose:de,title:"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd",children:(0,R.jsxs)("div",{className:"space-y-4",children:[(null===d||void 0===d?void 0:d.classCode)&&(0,R.jsxs)("p",{className:"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl",children:["\ud604\uc7ac \ud559\uae09 \ucf54\ub4dc:"," ",(0,R.jsx)("strong",{className:"text-white",children:d.classCode})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ud559\uae09 \ucf54\ub4dc"}),(0,R.jsx)("input",{type:"text",value:W,onChange:e=>B(e.target.value.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()),placeholder:"\uc601\ubb38\uc790\uc640 \uc22b\uc790\ub9cc",maxLength:20,className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors",autoFocus:!0}),(0,R.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"\uc601\ubb38\uc790\uc640 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),X&&(0,R.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:X}),te&&(0,R.jsx)("p",{className:"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,R.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,R.jsx)("button",{onClick:de,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,R.jsx)("button",{onClick:async()=>{const e=W.trim().toUpperCase();if(!e)return ee("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");y(!0);try{if(!await(0,G.JK)(e))return ee("'".concat(e,"'\ub294 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ud559\uae09 \ucf54\ub4dc\uc785\ub2c8\ub2e4.")),void y(!1);await x({classCode:e})?(se(!0),setTimeout(()=>{alert("\ud559\uae09 \ucf54\ub4dc\uac00 '".concat(e,"'\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")),de()},1e3)):ee("\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(t){ee("\uc624\ub958: ".concat(t.message))}y(!1)},disabled:b,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:b?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})}),(0,R.jsx)(xe,{isOpen:N,onClose:()=>k(!1)})]})});const je=[{id:"home",icon:s(3658).A,label:"\ud648",path:"/dashboard/tasks"},{id:"assets",icon:c.A,label:"\uc790\uc0b0",path:"/my-assets"},{id:"game",icon:m.A,label:"\uac8c\uc784",paths:["/learning-games"]},{id:"community",icon:y.A,label:"\ucee4\ubba4\ub2c8\ud2f0",path:"/learning-board"}],we=(0,a.memo)(function(){const e=(0,i.zy)(),t=(0,i.Zp)(),s=(0,a.useCallback)(t=>t.paths?t.paths.some(t=>e.pathname.startsWith(t)):e.pathname===t.path||e.pathname.startsWith(t.path+"/"),[e.pathname]),n=(0,a.useCallback)(e=>{e.paths?t(e.paths[0]+"/omok"):t(e.path)},[t]);return(0,R.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50",children:(0,R.jsx)("div",{className:"flex justify-between items-center max-w-md mx-auto",children:je.map(e=>{const t=s(e),a=e.icon;return(0,R.jsxs)("button",{onClick:()=>n(e),className:"flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ".concat(t?"text-indigo-600 -translate-y-1":"text-gray-400"),children:[(0,R.jsx)(a,{size:24,strokeWidth:t?2.5:2,className:t?"drop-shadow-md":""}),(0,R.jsx)("span",{className:"text-[10px] font-medium ".concat(t?"opacity-100":"opacity-70"),children:e.label})]},e.id)})})})});var Ne=s(441),Ce=s(1360),ke=s(7104);function Ae(){const[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(o(e),window.matchMedia("(display-mode: standalone)").matches)return void l(!0);const s=localStorage.getItem("pwa-install-dismissed");if(s){const e=parseInt(s,10);if(Date.now()-e<6048e5)return}const a=e=>{e.preventDefault(),t(e),setTimeout(()=>i(!0),2e3)};window.addEventListener("beforeinstallprompt",a),e&&!window.matchMedia("(display-mode: standalone)").matches&&setTimeout(()=>i(!0),3e3);const n=()=>{l(!0),i(!1),t(null)};return window.addEventListener("appinstalled",n),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",n)}},[]);const c=()=>{i(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r||!s?null:(0,R.jsx)("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,R.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,R.jsx)(me.A,{size:20}),(0,R.jsx)("span",{className:"font-semibold",children:"\uc571 \uc124\uce58\ud558\uae30"})]}),(0,R.jsx)("button",{onClick:c,className:"text-white/80 hover:text-white transition-colors",children:(0,R.jsx)(O.A,{size:20})})]}),(0,R.jsxs)("div",{className:"p-4",children:[(0,R.jsxs)("div",{className:"flex items-start gap-4",children:[(0,R.jsx)("div",{className:"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50",children:(0,R.jsx)("span",{className:"text-white text-2xl",children:"\u2728"})}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"\uc54c\ucc2c \uc571\uc744 \uc124\uce58\ud558\uc138\uc694!"}),(0,R.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:"\ud648 \ud654\uba74\uc5d0 \ucd94\uac00\ud558\uba74 \ub354 \ube60\ub974\uac8c \uc811\uc18d\ud558\uace0, \uc624\ud504\ub77c\uc778\uc5d0\uc11c\ub3c4 \uc77c\ubd80 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."})]})]}),n?(0,R.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-xl",children:[(0,R.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"iOS\uc5d0\uc11c \uc124\uce58\ud558\uae30:"}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,R.jsx)(Ne.A,{size:16,className:"text-indigo-500"}),(0,R.jsx)("span",{children:"1. \ud558\ub2e8\uc758 \uacf5\uc720 \ubc84\ud2bc \ud0ed"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,R.jsx)(Ce.A,{size:16,className:"text-indigo-500"}),(0,R.jsx)("span",{children:'2. "\ud648 \ud654\uba74\uc5d0 \ucd94\uac00" \uc120\ud0dd'})]})]})]}):(0,R.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,R.jsx)("button",{onClick:c,className:"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors",children:"\ub098\uc911\uc5d0"}),(0,R.jsxs)("button",{onClick:async()=>{if(!e)return;e.prompt();const{outcome:s}=await e.userChoice;"accepted"===s?se.vF.log("PWA \uc124\uce58 \uc218\ub77d"):se.vF.log("PWA \uc124\uce58 \uac70\uc808"),t(null),i(!1)},className:"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50",children:[(0,R.jsx)(ke.A,{size:18}),"\uc124\uce58\ud558\uae30"]})]})]}),(0,R.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:(0,R.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"\uc124\uce58\ud574\ub3c4 \uc800\uc7a5\uacf5\uac04\uc744 \uac70\uc758 \ucc28\uc9c0\ud558\uc9c0 \uc54a\uc544\uc694"})})]})})}var Se=s(516);const Ie=(0,a.memo)(function(e){let{onUpdate:t,onDismiss:s}=e;return(0,R.jsx)("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up",children:(0,R.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white",children:(0,R.jsxs)("div",{className:"flex items-start gap-3",children:[(0,R.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,R.jsx)(Se.A,{size:20,className:"animate-spin-slow"})}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h3",{className:"font-bold mb-1",children:"\uc0c8 \ubc84\uc804\uc774 \uc788\uc5b4\uc694!"}),(0,R.jsx)("p",{className:"text-sm text-white/80 mb-3",children:"\ub354 \ub098\uc740 \uc54c\ucc2c\uc744 \uc704\ud574 \uc5c5\ub370\uc774\ud2b8\ub97c \uc801\uc6a9\ud574\uc8fc\uc138\uc694."}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)("button",{onClick:s,className:"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"\ub098\uc911\uc5d0"}),(0,R.jsxs)("button",{onClick:t,className:"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1",children:[(0,R.jsx)(Se.A,{size:14}),"\uc9c0\uae08 \uc5c5\ub370\uc774\ud2b8"]})]})]}),(0,R.jsx)("button",{onClick:s,className:"text-white/60 hover:text-white transition-colors",children:(0,R.jsx)(O.A,{size:18})})]})})})});function Le(){const[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(navigator.onLine);(0,a.useEffect)(()=>{const e=()=>o(!0),t=()=>o(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),"serviceWorker"in navigator&&d(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const[l,c]=(0,a.useState)(null);(0,a.useEffect)(()=>()=>{l&&clearInterval(l)},[l]);const d=async()=>{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});t(e),se.vF.log("[PWA] \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ub4f1\ub85d \uc131\uacf5:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{if("installed"===t.state&&navigator.serviceWorker.controller){const e=localStorage.getItem("alchan_updated");if(e&&Date.now()-parseInt(e)<36e5)return void se.vF.log("[PWA] \ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8\ub428 - \uc54c\ub9bc \uc0dd\ub7b5");se.vF.log("[PWA] \uc0c8 \ubc84\uc804 \uc0ac\uc6a9 \uac00\ub2a5"),i(!0)}})});const s=setInterval(()=>{e.update()},36e5);c(s)}catch(e){se.vF.error("[PWA] \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ub4f1\ub85d \uc2e4\ud328:",e)}},m=(0,a.useCallback)(()=>{i(!1),localStorage.setItem("alchan_updated",Date.now().toString()),e&&e.waiting?(navigator.serviceWorker.addEventListener("controllerchange",()=>{se.vF.log("[PWA] \uc0c8 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ud65c\uc131\ud654\ub428 - \uc0c8\ub85c\uace0\uce68"),window.location.reload()}),e.waiting.postMessage({type:"SKIP_WAITING"})):(se.vF.log("[PWA] \ub300\uae30 \uc911\uc778 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \uc5c6\uc74c - \uac15\uc81c \uc0c8\ub85c\uace0\uce68"),window.location.reload())},[e]),x=(0,a.useCallback)(async()=>{if(!("Notification"in window))return se.vF.log("[PWA] \uc774 \ube0c\ub77c\uc6b0\uc800\ub294 \uc54c\ub9bc\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission){return"granted"===await Notification.requestPermission()}return!1},[]),u=(0,a.useCallback)(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await x()&&e&&e.showNotification(t,(0,r.A)({icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",vibrate:[100,50,100]},s))},[e,x]);return{registration:e,updateAvailable:s,updateServiceWorker:m,isOnline:n,requestNotificationPermission:x,showNotification:u}}var Ee=s(5881),Me=s(2861),_e=s(8379);function Te(){var e,t,s;const{userDoc:i}=(0,n.As)(),o=null===i||void 0===i?void 0:i.classCode,[l,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(!o)return;const e=(0,te.H9)(G.db,"activeEconomicEvent",o),t=(0,te.aQ)(e,e=>{var t,s,a,i,n;if(!e.exists())return void c(null);const l=e.data(),d=new Date,x=null===(t=l.expiresAt)||void 0===t||null===(s=t.toDate)||void 0===s?void 0:s.call(t);if(x&&x<d)return void c(null);const u=(null===(a=l.triggeredAt)||void 0===a||null===(i=a.toMillis)||void 0===i?void 0:i.call(a))||(null===(n=l.event)||void 0===n?void 0:n.id)||"",h="eveBanner_".concat(o,"_").concat(u);if(localStorage.getItem(h))return m(!0),void c(l);c((0,r.A)((0,r.A)({},l),{},{_dismissKey:h})),m(!1)});return()=>t()},[o]),!l||d)return null;const x=l.event||{},u=l.result||{},h=(null===(e=l.triggeredAt)||void 0===e||null===(t=e.toDate)||void 0===t?void 0:t.call(e))||new Date,p=()=>{const e=x.type;if("REAL_ESTATE_PRICE_CHANGE"===e){var t;const e=(null===(t=x.params)||void 0===t?void 0:t.changePercent)||0;return"\ubd80\ub3d9\uc0b0 ".concat(u.affectedCount||0,"\uac1c ").concat(e>0?"+":"").concat(e,"% \ubcc0\ub3d9")}var s,a,i,n,o;return"TAX_REFUND"===e?u.refundedAmount>0?"\ucd1d ".concat(u.refundedAmount.toLocaleString(),"\uc6d0 \ud658\uae09 (1\uc778\ub2f9 ").concat((null===(s=u.perStudent)||void 0===s?void 0:s.toLocaleString())||0,"\uc6d0)"):"\uad6d\uace0\uac00 \ubd80\uc871\ud574 \ud658\uae09\uc774 \uc774\ub8e8\uc5b4\uc9c0\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4":"TAX_EXTRA"===e?"\ucd1d ".concat((null===(a=u.collectedAmount)||void 0===a?void 0:a.toLocaleString())||0,"\uc6d0 \ucd94\uac00 \uc9d5\uc218 (").concat(u.affectedCount||0,"\uba85)"):"CASH_BONUS"===e?"1\uc778\ub2f9 ".concat((null===(i=u.perStudent)||void 0===i?void 0:i.toLocaleString())||0,"\uc6d0 \uc9c0\uae09 (").concat(u.affectedCount||0,"\uba85)"):"LOTTERY"===e?(null===(n=u.winnerNames)||void 0===n?void 0:n.length)>0?"\ud83c\udf89 \ub2f9\ucca8\uc790: ".concat(u.winnerNames.join(", ")," (").concat((null===(o=u.prizeAmount)||void 0===o?void 0:o.toLocaleString())||0,"\uc6d0)"):"\ucd94\ucca8 \uc644\ub8cc":""},g=["REAL_ESTATE_PRICE_CHANGE","TAX_REFUND","CASH_BONUS","LOTTERY"].includes(x.type)&&!("REAL_ESTATE_PRICE_CHANGE"===x.type&&((null===(s=x.params)||void 0===s?void 0:s.changePercent)||0)<0),f=h.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),b=h.toLocaleDateString("ko-KR",{month:"long",day:"numeric"});return(0,R.jsxs)("div",{className:"relative flex items-start gap-3 px-4 py-3 ".concat(g?"bg-gradient-to-r from-emerald-900/80 to-cyan-900/80 border-b border-emerald-500/30":"bg-gradient-to-r from-red-900/80 to-orange-900/80 border-b border-red-500/30"),children:[(0,R.jsx)("div",{className:"absolute inset-0 opacity-10 pointer-events-none ".concat(g?"bg-emerald-400":"bg-red-400"),style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.05) 10px, rgba(255,255,255,0.05) 20px)"}}),(0,R.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-base ".concat(g?"bg-emerald-500/20":"bg-red-500/20"),children:x.emoji||"\u26a1"}),(0,R.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,R.jsx)(T.A,{className:"w-3.5 h-3.5 ".concat(g?"text-emerald-400":"text-red-400")}),(0,R.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide ".concat(g?"text-emerald-400":"text-red-400"),children:"\uacbd\uc81c \uc774\ubca4\ud2b8"}),(0,R.jsxs)("span",{className:"text-xs text-gray-400",children:[b," ",f]})]}),(0,R.jsx)("p",{className:"text-sm font-bold text-white mt-0.5",children:x.title}),(0,R.jsx)("p",{className:"text-xs text-gray-300 mt-0.5",children:x.description}),p()&&(0,R.jsxs)("p",{className:"text-xs mt-1 font-medium ".concat(g?"text-emerald-300":"text-red-300"),children:["\u2192 ",p()]})]}),(0,R.jsx)("button",{onClick:()=>{null!==l&&void 0!==l&&l._dismissKey&&localStorage.setItem(l._dismissKey,"1"),m(!0)},className:"relative z-10 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white hover:bg-white/10 transition-colors","aria-label":"\ubc30\ub108 \ub2eb\uae30",children:(0,R.jsx)(O.A,{className:"w-5 h-5"})})]})}var Qe=s(4891);function Oe(e){return(0,a.lazy)(()=>e().catch(()=>sessionStorage.getItem("chunk_reload")?(sessionStorage.removeItem("chunk_reload"),e()):(sessionStorage.setItem("chunk_reload","1"),window.location.reload(),new Promise(()=>{}))))}const De=Oe(()=>s.e(5911).then(s.bind(s,5911))),Re=Oe(()=>s.e(131).then(s.bind(s,131))),Fe=Oe(()=>Promise.resolve().then(s.bind(s,8379)).then(e=>({default:e.DailyRewardBanner}))),ze=Oe(()=>s.e(5227).then(s.bind(s,5227))),Pe=Oe(()=>s.e(502).then(s.bind(s,502))),qe=Oe(()=>s.e(3203).then(s.bind(s,3203))),Ue=Oe(()=>s.e(6456).then(s.bind(s,6456))),We=Oe(()=>Promise.all([s.e(3066),s.e(5967),s.e(3433)]).then(s.bind(s,8625))),Be=Oe(()=>s.e(5078).then(s.bind(s,5078))),Xe=Oe(()=>s.e(5635).then(s.bind(s,5635))),Ge=Oe(()=>s.e(1070).then(s.bind(s,1070))),He=Oe(()=>s.e(1117).then(s.bind(s,1117))),Ze=Oe(()=>Promise.all([s.e(8906),s.e(9530)]).then(s.bind(s,9530))),Ye=Oe(()=>s.e(9594).then(s.bind(s,9594))),Ke=Oe(()=>s.e(7614).then(s.bind(s,7614))),Ve=Oe(()=>s.e(7393).then(s.bind(s,7393))),Je=Oe(()=>s.e(6757).then(s.bind(s,6757))),$e=Oe(()=>s.e(3864).then(s.bind(s,3864))),et=Oe(()=>s.e(8718).then(s.bind(s,8718))),tt=Oe(()=>s.e(8164).then(s.bind(s,8164))),st=Oe(()=>Promise.all([s.e(5967),s.e(1657)]).then(s.bind(s,5967))),at=Oe(()=>s.e(2079).then(s.bind(s,2079))),it=Oe(()=>s.e(2896).then(s.bind(s,2896))),nt=Oe(()=>s.e(716).then(s.bind(s,716))),ot=Oe(()=>s.e(3765).then(s.bind(s,3765))),rt=Oe(()=>s.e(8518).then(s.bind(s,8518))),lt=Oe(()=>s.e(9327).then(s.bind(s,9327))),ct=Oe(()=>s.e(4665).then(s.bind(s,4665))),dt=Oe(()=>s.e(7610).then(s.bind(s,7610))),mt=Oe(()=>s.e(3380).then(s.bind(s,3380))),xt=Oe(()=>s.e(4398).then(s.bind(s,4398))),ut=Oe(()=>s.e(5785).then(s.bind(s,5785))),ht=Oe(()=>s.e(5613).then(s.bind(s,5613))),pt=Oe(()=>s.e(5317).then(s.bind(s,5317))),gt=Oe(()=>s.e(7512).then(s.bind(s,7512))),ft=Oe(()=>s.e(8044).then(s.bind(s,8044))),bt=Oe(()=>s.e(3504).then(s.bind(s,3504))),yt=Oe(()=>s.e(7005).then(s.bind(s,7005))),vt=Oe(()=>s.e(9234).then(s.bind(s,9234))),jt=Oe(()=>s.e(4358).then(s.bind(s,4358))),wt=Oe(()=>s.e(367).then(s.bind(s,367))),Nt=["/learning-games/omok","/learning-games/science","/learning-games/typing","/court","/national-assembly","/music-room"],Ct=e=>{let{message:t="\ub85c\ub529 \uc911..."}=e;return(0,R.jsx)(Ee.Cg,{message:t})},kt=e=>{let{children:t}=e;const{user:s,loading:a}=(0,n.As)(),o=(0,i.zy)();return a?(0,R.jsx)(Ct,{}):s?t:(0,R.jsx)(i.C5,{to:"/login",state:{from:o},replace:!0})},At=e=>{let{children:t}=e;const{user:s,userDoc:a,loading:o}=(0,n.As)(),r=(0,i.zy)();if(o)return(0,R.jsx)(Ct,{});if(!s)return(0,R.jsx)(i.C5,{to:"/login",state:{from:r},replace:!0});return(null===a||void 0===a?void 0:a.isAdmin)||"admin"===(null===a||void 0===a?void 0:a.role)||(null===a||void 0===a?void 0:a.isSuperAdmin)?t:(0,R.jsx)(i.C5,{to:"/dashboard/tasks",replace:!0})},St=e=>{let{children:t}=e;const{user:s,userDoc:a,loading:o}=(0,n.As)(),r=(0,i.zy)();if(o)return(0,R.jsx)(Ct,{});if(!s)return(0,R.jsx)(i.C5,{to:"/login",state:{from:r},replace:!0});return(null===a||void 0===a?void 0:a.isTeacher)||(null===a||void 0===a?void 0:a.isAdmin)||(null===a||void 0===a?void 0:a.isSuperAdmin)?t:(0,R.jsx)(i.C5,{to:"/dashboard/tasks",replace:!0})},It=e=>{let{children:t}=e;const{user:s,userDoc:a,loading:o}=(0,n.As)(),r=(0,i.zy)();return o?(0,R.jsx)(Ct,{}):s?null!==a&&void 0!==a&&a.isSuperAdmin?t:(0,R.jsx)(i.C5,{to:"/dashboard/tasks",replace:!0}):(0,R.jsx)(i.C5,{to:"/login",state:{from:r},replace:!0})};function Lt(){const e=(0,i.zy)(),{user:t,userDoc:s,loading:r,logout:l}=(0,n.As)(),[c,d]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(window.innerWidth<768),[p,g]=(0,a.useState)(()=>{try{const e=localStorage.getItem("alchan_update_dismissed");return!!e&&Date.now()-parseInt(e)<864e5}catch(e){return!1}}),[f,b]=(0,a.useState)(!1),{updateAvailable:y,updateServiceWorker:v,isOnline:j}=Le();(0,a.useEffect)(()=>{if(null!==s&&void 0!==s&&s.uid&&(null===s||void 0===s||!s.isAdmin)&&(null===s||void 0===s||!s.isSuperAdmin)&&(null===s||void 0===s||!s.isTeacher)){if((0,_e.vb)(s.uid).canClaim){const e=setTimeout(()=>{b(!0)},500);return()=>clearTimeout(e)}}},[null===s||void 0===s?void 0:s.uid,null===s||void 0===s?void 0:s.isAdmin,null===s||void 0===s?void 0:s.isSuperAdmin,null===s||void 0===s?void 0:s.isTeacher]);const w=(0,a.useCallback)(async e=>{if(null!==s&&void 0!==s&&s.uid&&e)try{const t=(0,G.H9)(G.db,"users",s.uid);await(0,G.mZ)(t,{cash:(0,G.GV)(e)}),Qe.Ay.invalidate("user_".concat(s.uid)),setTimeout(()=>b(!1),3e3)}catch(t){se.vF.error("\ucd9c\uc11d \ubcf4\uc0c1 \uc9c0\uae09 \uc2e4\ud328:",t)}},[null===s||void 0===s?void 0:s.uid]);(0,a.useEffect)(()=>{Nt.some(t=>e.pathname.startsWith(t))&&!u&&x(!0)},[e.pathname,u]),(0,a.useEffect)(()=>{let e;const t=()=>{clearTimeout(e),e=setTimeout(()=>{const e=window.innerWidth<768;h(e),e&&d(!1)},150)};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[]);const N=(0,a.useCallback)(()=>{d(e=>!e)},[]),C=(0,a.useCallback)(()=>{d(!1)},[]),k=(0,a.useCallback)(()=>{x(e=>!e)},[]);return r||t?r||t&&!s?(0,R.jsx)(Ct,{}):"/login"===e.pathname?(0,R.jsx)(i.C5,{to:t?"/dashboard/tasks":"/login",replace:!0}):s.classCode?(0,R.jsx)(o.px,{children:(0,R.jsxs)("div",{className:"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex",children:[(0,R.jsx)(X,{isOpen:c,onClose:C,isCollapsed:m}),(0,R.jsxs)("main",{className:"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible",children:[(0,R.jsx)(ve,{toggleSidebar:N,isMobile:u,isSidebarCollapsed:m,onToggleSidebarCollapse:k}),(0,R.jsx)(Te,{}),(0,R.jsx)("div",{className:"w-full pb-20 md:pb-4",children:(0,R.jsx)(a.Suspense,{fallback:(0,R.jsx)(Ct,{message:"\ud398\uc774\uc9c0 \ub85c\ub529 \uc911..."}),children:(0,R.jsxs)(i.BV,{children:[(0,R.jsx)(i.qh,{path:"/dashboard/tasks",element:(0,R.jsx)(kt,{children:(0,R.jsx)(We,{})})}),(0,R.jsx)(i.qh,{path:"/my-assets",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ke,{})})}),(0,R.jsx)(i.qh,{path:"/my-profile",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ye,{})})}),(0,R.jsx)(i.qh,{path:"/coupon-goal",element:(0,R.jsx)(kt,{children:(0,R.jsx)(wt,{})})}),(0,R.jsx)(i.qh,{path:"/learning-games/omok",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ve,{})})}),(0,R.jsx)(i.qh,{path:"/learning-games/typing",element:(0,R.jsx)(kt,{children:(0,R.jsx)($e,{})})}),(0,R.jsx)(i.qh,{path:"/learning-games/science",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Je,{})})}),(0,R.jsx)(i.qh,{path:"/item-shop",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Be,{})})}),(0,R.jsx)(i.qh,{path:"/my-items",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Xe,{})})}),(0,R.jsx)(i.qh,{path:"/item-market",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ge,{})})}),(0,R.jsx)(i.qh,{path:"/personal-shop",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ge,{})})}),(0,R.jsx)(i.qh,{path:"/group-purchase",element:(0,R.jsx)(kt,{children:(0,R.jsx)(He,{})})}),(0,R.jsx)(i.qh,{path:"/banking",element:(0,R.jsx)(kt,{children:(0,R.jsx)(Ze,{})})}),(0,R.jsx)(i.qh,{path:"/stock-trading",element:(0,R.jsx)(kt,{children:(0,R.jsx)(xt,{})})}),(0,R.jsx)(i.qh,{path:"/auction",element:(0,R.jsx)(kt,{children:(0,R.jsx)(yt,{})})}),(0,R.jsx)(i.qh,{path:"/real-estate",element:(0,R.jsx)(kt,{children:(0,R.jsx)(ut,{})})}),(0,R.jsx)(i.qh,{path:"/government",element:(0,R.jsx)(kt,{children:(0,R.jsx)(pt,{})})}),(0,R.jsx)(i.qh,{path:"/national-assembly",element:(0,R.jsx)(kt,{children:(0,R.jsx)(ht,{})})}),(0,R.jsx)(i.qh,{path:"/court",element:(0,R.jsx)(kt,{children:(0,R.jsx)(gt,{})})}),(0,R.jsx)(i.qh,{path:"/police",element:(0,R.jsx)(kt,{children:(0,R.jsx)(ft,{})})}),(0,R.jsx)(i.qh,{path:"/organization-chart",element:(0,R.jsx)(kt,{children:(0,R.jsx)(bt,{classCode:s.classCode})})}),(0,R.jsx)(i.qh,{path:"/learning-board",element:(0,R.jsx)(kt,{children:(0,R.jsx)(lt,{})})}),(0,R.jsx)(i.qh,{path:"/learning-board/music-request",element:(0,R.jsx)(kt,{children:(0,R.jsx)(ct,{user:t})})}),(0,R.jsx)(i.qh,{path:"/music-room/:roomId",element:(0,R.jsx)(kt,{children:(0,R.jsx)(dt,{user:t})})}),(0,R.jsx)(i.qh,{path:"/student-request/:roomId",element:(0,R.jsx)(mt,{})}),(0,R.jsx)(i.qh,{path:"/admin/app-settings",element:(0,R.jsx)(At,{children:(0,R.jsx)(We,{adminTabMode:"generalSettings"})})}),(0,R.jsx)(i.qh,{path:"/admin/job-settings",element:(0,R.jsx)(At,{children:(0,R.jsx)(We,{adminTabMode:"jobSettings"})})}),(0,R.jsx)(i.qh,{path:"/admin/class-members",element:(0,R.jsx)(At,{children:(0,R.jsx)(We,{adminTabMode:"memberManagement"})})}),(0,R.jsx)(i.qh,{path:"/admin/coupon-transfer",element:(0,R.jsx)(At,{children:(0,R.jsx)(jt,{})})}),(0,R.jsx)(i.qh,{path:"/admin/money-transfer",element:(0,R.jsx)(At,{children:(0,R.jsx)(vt,{})})}),(0,R.jsx)(i.qh,{path:"/admin/approvals",element:(0,R.jsx)(At,{children:(0,R.jsx)(et,{})})}),(0,R.jsx)(i.qh,{path:"/admin/activity-log",element:(0,R.jsx)(At,{children:(0,R.jsx)(st,{})})}),(0,R.jsx)(i.qh,{path:"/admin/items",element:(0,R.jsx)(At,{children:(0,R.jsx)(tt,{})})}),(0,R.jsx)(i.qh,{path:"/admin/economic-events",element:(0,R.jsx)(At,{children:(0,R.jsx)(at,{})})}),(0,R.jsx)(i.qh,{path:"/admin/students",element:(0,R.jsx)(St,{children:(0,R.jsx)(ot,{})})}),(0,R.jsx)(i.qh,{path:"/super-admin",element:(0,R.jsx)(It,{children:(0,R.jsx)(rt,{})})}),(0,R.jsx)(i.qh,{path:"/super-admin/*",element:(0,R.jsx)(It,{children:(0,R.jsx)(rt,{})})}),(0,R.jsx)(i.qh,{path:"/doctor",element:(0,R.jsx)(kt,{children:(0,R.jsx)(it,{})})}),(0,R.jsx)(i.qh,{path:"/recover-donations",element:(0,R.jsx)(kt,{children:(0,R.jsx)(nt,{})})}),(0,R.jsx)(i.qh,{path:"/",element:(0,R.jsx)(i.C5,{to:"/dashboard/tasks",replace:!0})}),(0,R.jsx)(i.qh,{path:"*",element:(0,R.jsx)(i.C5,{to:"/dashboard/tasks",replace:!0})})]})})}),(0,R.jsx)("footer",{className:"hidden md:block py-8 text-center text-sm text-gray-400 font-medium",children:"\xa9 2025 \uc54c\ucc2c Corp. All rights reserved."})]}),(0,R.jsx)(we,{}),(0,R.jsx)(Ae,{}),y&&!p&&(0,R.jsx)(Ie,{onUpdate:v,onDismiss:()=>{g(!0);try{localStorage.setItem("alchan_update_dismissed",Date.now().toString())}catch(e){}}}),!j&&(0,R.jsxs)("div",{className:"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2",children:[(0,R.jsx)(Me.A,{size:16}),"\uc624\ud504\ub77c\uc778 \uc0c1\ud0dc\uc785\ub2c8\ub2e4. \uc77c\ubd80 \uae30\ub2a5\uc774 \uc81c\ud55c\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,R.jsx)(Pe,{}),(0,R.jsx)(ze,{}),(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(De,{})}),(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Re,{})}),(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(qe,{})}),(0,R.jsx)(a.Suspense,{fallback:null,children:(0,R.jsx)(Ue,{})}),f&&(null===s||void 0===s?void 0:s.uid)&&(0,R.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn",onClick:()=>b(!1),children:(0,R.jsxs)("div",{className:"w-full max-w-[400px] animate-slideUp",onClick:e=>e.stopPropagation(),children:[(0,R.jsx)("div",{className:"text-right mb-2",children:(0,R.jsx)("button",{onClick:()=>b(!1),className:"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20",children:"\u2715"})}),(0,R.jsx)(Fe,{userId:s.uid,onClaim:w}),(0,R.jsx)("div",{className:"text-center mt-3 text-[13px] text-white/60",children:"\ubc30\uacbd\uc744 \ud130\uce58\ud558\uba74 \ub2eb\ud799\ub2c8\ub2e4"})]})})]})}):(0,R.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center",children:[(0,R.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl",children:"\u26a0\ufe0f"}),(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,R.jsx)("p",{className:"text-gray-500 mb-6",children:"\uc120\uc0dd\ub2d8\uaed8 \ud559\uae09 \ucf54\ub4dc\ub97c \ubc1b\uc544 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),(0,R.jsx)("button",{onClick:()=>l(),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors",children:"\ub85c\uadf8\uc544\uc6c3"})]})}):(0,R.jsx)(i.C5,{to:"/login",state:{from:e},replace:!0})}},5540(e,t,s){s.d(t,{A:()=>r});var a=s(2555),i=(s(5043),s(4148)),n=s(579);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if(!e||"none"===e||"transparent"===e)return e;let s=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return s=Math.max(0,Math.floor(s*(100-t)/100)),a=Math.max(0,Math.floor(a*(100-t)/100)),i=Math.max(0,Math.floor(i*(100-t)/100)),"#".concat(s.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0"))}function r(e){let{config:t={},size:s=100,showBorder:r=!0,onClick:l}=e;const c=(0,a.A)((0,a.A)({},i.k_),t),d=i.Cr.find(e=>e.id===c.skinTone)||i.Cr[1],m=i.Hi.find(e=>e.id===c.faceShape)||i.Hi[1],x=i.Ri.find(e=>e.id===c.eyeStyle)||i.Ri[0],u=i.BN.find(e=>e.id===c.eyeColor)||i.BN[1],h=i.hF.find(e=>e.id===c.mouthStyle)||i.hF[0],p=i.jC.find(e=>e.id===c.hairstyle)||i.jC[1],g=i.g4.find(e=>e.id===c.hairColor)||i.g4[0],f=i.jw.find(e=>e.id===c.outfit)||i.jw[1],b=i.FJ.find(e=>e.id===c.outfitColor)||i.FJ[0],y=i.Dt.find(e=>e.id===c.accessory),v=i.YQ.find(e=>e.id===c.background)||i.YQ[0],j=i.sZ.find(e=>e.id===c.border),w=o(d.color,12),N=j&&"none"!==j.id&&r?{stroke:j.gradient?"url(#border-gradient-".concat(j.id,")"):j.color,strokeWidth:j.width||3,filter:j.glow?"drop-shadow(0 0 ".concat(2*j.width,"px ").concat(j.glowColor||j.color,")"):void 0}:null,C=()=>null!==g&&void 0!==g&&g.gradient?"url(#hair-rainbow)":(null===g||void 0===g?void 0:g.color)||"#1a1a1a";return(0,n.jsxs)("svg",{width:s,height:s,viewBox:"-15 ".concat(-25," 130 ").concat(150),onClick:l,style:{cursor:l?"pointer":"default",overflow:"visible"},preserveAspectRatio:"xMidYMid meet",children:[(0,n.jsxs)("defs",{children:[(null===v||void 0===v?void 0:v.gradient)&&(0,n.jsx)("linearGradient",{id:"bg-gradient-".concat(v.id),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:v.gradient.map((e,t)=>(0,n.jsx)("stop",{offset:"".concat(t/(v.gradient.length-1)*100,"%"),stopColor:e},t))}),(null===j||void 0===j?void 0:j.gradient)&&(0,n.jsx)("linearGradient",{id:"border-gradient-".concat(j.id),x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:j.gradient.map((e,t)=>(0,n.jsx)("stop",{offset:"".concat(t/(j.gradient.length-1)*100,"%"),stopColor:e},t))}),(null===g||void 0===g?void 0:g.gradient)&&(0,n.jsx)("linearGradient",{id:"hair-rainbow",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:g.gradient.map((e,t)=>(0,n.jsx)("stop",{offset:"".concat(t/(g.gradient.length-1)*100,"%"),stopColor:e},t))}),(0,n.jsx)("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:(0,n.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.3"})}),(0,n.jsx)("clipPath",{id:"face-clip",children:(0,n.jsx)("path",{d:m.path})})]}),v&&"none"!==v.id&&(0,n.jsx)("rect",{x:"-15",y:-25,width:"130",height:150,fill:v&&"none"!==v.id?v.gradient?"url(#bg-gradient-".concat(v.id,")"):v.color:"#1a1a2e",rx:"10"}),(null===v||void 0===v?void 0:v.stars)&&(0,n.jsxs)("g",{children:[(0,n.jsx)("circle",{cx:"15",cy:"10",r:"1.5",fill:"white",opacity:"0.9"}),(0,n.jsx)("circle",{cx:"85",cy:"15",r:"2",fill:"white",opacity:"0.8"}),(0,n.jsx)("circle",{cx:"45",cy:"-5",r:"1.2",fill:"white",opacity:"0.9"}),(0,n.jsx)("circle",{cx:"70",cy:"0",r:"1.5",fill:"white",opacity:"0.7"}),(0,n.jsx)("circle",{cx:"25",cy:"20",r:"1",fill:"white",opacity:"0.8"}),(0,n.jsx)("circle",{cx:"95",cy:"25",r:"1.2",fill:"white",opacity:"0.7"}),(0,n.jsx)("circle",{cx:"5",cy:"30",r:"1.5",fill:"white",opacity:"0.6"}),(0,n.jsx)("circle",{cx:"60",cy:"100",r:"1",fill:"white",opacity:"0.9"}),(0,n.jsx)("circle",{cx:"30",cy:"110",r:"1.2",fill:"white",opacity:"0.7"})]}),(0,n.jsx)("rect",{x:"42",y:"85",width:"16",height:"12",fill:d.color}),f&&"none"!==f.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:f.path,fill:(null===b||void 0===b?void 0:b.color)||f.baseColor}),f.collar&&(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M40,95 L50,103 L60,95",stroke:"#ffffff",strokeWidth:"3",fill:"none"})}),f.buttons&&(0,n.jsxs)("g",{children:[(0,n.jsx)("circle",{cx:"50",cy:"103",r:"2",fill:"#f1c40f"}),(0,n.jsx)("circle",{cx:"50",cy:"110",r:"2",fill:"#f1c40f"})]}),f.tie&&(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M47,95 L50,98 L53,95",fill:"#c0392b"}),(0,n.jsx)("path",{d:"M48,98 L50,118 L52,98 Z",fill:"#e74c3c"})]}),f.hood&&(0,n.jsx)("path",{d:"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92",fill:o((null===b||void 0===b?void 0:b.color)||f.baseColor,15)})]}),(0,n.jsxs)("g",{children:[(()=>{const e={round:{leftX:7,rightX:93,y:50},oval:{leftX:9,rightX:91,y:48},square:{leftX:7,rightX:93,y:50},heart:{leftX:7,rightX:93,y:48},long:{leftX:17,rightX:83,y:50}},t=e[m.id]||e.round;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ellipse",{cx:t.leftX,cy:t.y,rx:"5",ry:"8",fill:d.color}),(0,n.jsx)("ellipse",{cx:t.leftX+1,cy:t.y,rx:"2",ry:"4",fill:o(d.color,12)}),(0,n.jsx)("ellipse",{cx:t.rightX,cy:t.y,rx:"5",ry:"8",fill:d.color}),(0,n.jsx)("ellipse",{cx:t.rightX-1,cy:t.y,rx:"2",ry:"4",fill:o(d.color,12)})]})})(),(0,n.jsx)("path",{d:m.path,fill:d.color}),(0,n.jsx)("ellipse",{cx:"30",cy:"60",rx:"8",ry:"5",fill:"#ffb6c1",opacity:"0.3"}),(0,n.jsx)("ellipse",{cx:"70",cy:"60",rx:"8",ry:"5",fill:"#ffb6c1",opacity:"0.3"})]}),(0,n.jsxs)("g",{children:[(0,n.jsx)("ellipse",{cx:x.leftX,cy:x.y,rx:x.size,ry:.75*x.size,fill:"white"}),(0,n.jsx)("circle",{cx:x.leftX,cy:x.y,r:.55*x.size,fill:u.color}),(0,n.jsx)("circle",{cx:x.leftX-1,cy:x.y-1,r:.22*x.size,fill:"white"}),(0,n.jsx)("ellipse",{cx:x.rightX,cy:x.y,rx:x.size,ry:.75*x.size,fill:"white"}),(0,n.jsx)("circle",{cx:x.rightX,cy:x.y,r:.55*x.size,fill:u.color}),(0,n.jsx)("circle",{cx:x.rightX-1,cy:x.y-1,r:.22*x.size,fill:"white"}),(0,n.jsx)("path",{d:"M".concat(x.leftX-7,",").concat(x.y-11," Q").concat(x.leftX,",").concat(x.y-14," ").concat(x.leftX+7,",").concat(x.y-11),stroke:null!==g&&void 0!==g&&g.gradient?"#1a1a1a":(null===g||void 0===g?void 0:g.color)||"#1a1a1a",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M".concat(x.rightX-7,",").concat(x.y-11," Q").concat(x.rightX,",").concat(x.y-14," ").concat(x.rightX+7,",").concat(x.y-11),stroke:null!==g&&void 0!==g&&g.gradient?"#1a1a1a":(null===g||void 0===g?void 0:g.color)||"#1a1a1a",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"})]}),(0,n.jsx)("path",{d:"M48,53 L50,60 L52,53",stroke:w,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:h.path,stroke:h.stroke?"#c0392b":"none",strokeWidth:"2.5",fill:h.fill?"#c0392b":"none",strokeLinecap:"round"}),p&&"none"!==p.id&&(0,n.jsxs)("g",{children:[p.paths&&p.paths[0]&&(0,n.jsx)("path",{d:p.paths[0],fill:C(),stroke:"#1a1a1a"===(null===g||void 0===g?void 0:g.color)?"#333":"none",strokeWidth:"1"}),p.paths&&p.paths.slice(1).map((e,t)=>(0,n.jsx)("path",{d:e,fill:C(),stroke:"#1a1a1a"===(null===g||void 0===g?void 0:g.color)?"#333":"none",strokeWidth:"1"},"hair-".concat(t))),p.bangsPath&&(0,n.jsx)("path",{d:p.bangsPath,fill:C(),stroke:"#1a1a1a"===(null===g||void 0===g?void 0:g.color)?"#333":"none",strokeWidth:"1"})]}),y&&"none"!==y.id&&(0,n.jsxs)("g",{children:["glasses"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("circle",{cx:"35",cy:"45",r:"10",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("circle",{cx:"65",cy:"45",r:"10",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M45,45 Q50,42 55,45",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M25,45 L10,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M75,45 L90,42",stroke:"#1a1a1a",strokeWidth:"2"})]}),"sunglasses"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("ellipse",{cx:"35",cy:"45",rx:"12",ry:"8",fill:"#1a1a1a"}),(0,n.jsx)("ellipse",{cx:"65",cy:"45",rx:"12",ry:"8",fill:"#1a1a1a"}),(0,n.jsx)("path",{d:"M47,45 Q50,42 53,45",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M23,45 L8,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M77,45 L92,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,n.jsx)("ellipse",{cx:"32",cy:"43",rx:"3",ry:"2",fill:"white",opacity:"0.3"}),(0,n.jsx)("ellipse",{cx:"62",cy:"43",rx:"3",ry:"2",fill:"white",opacity:"0.3"})]}),"earrings"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("circle",{cx:"6",cy:"58",r:"4",fill:"#f1c40f"}),(0,n.jsx)("circle",{cx:"94",cy:"58",r:"4",fill:"#f1c40f"}),(0,n.jsx)("circle",{cx:"5",cy:"56",r:"1",fill:"white",opacity:"0.6"}),(0,n.jsx)("circle",{cx:"93",cy:"56",r:"1",fill:"white",opacity:"0.6"})]}),"necklace"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M30,88 Q50,95 70,88",fill:"none",stroke:"#f1c40f",strokeWidth:"2"}),(0,n.jsx)("circle",{cx:"50",cy:"94",r:"4",fill:"#f1c40f"}),(0,n.jsx)("circle",{cx:"49",cy:"92",r:"1",fill:"white",opacity:"0.5"})]}),"hat"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("ellipse",{cx:"50",cy:"8",rx:"45",ry:"8",fill:"#e74c3c"}),(0,n.jsx)("path",{d:"M15,8 Q15,-15 50,-18 Q85,-15 85,8",fill:"#e74c3c"}),(0,n.jsx)("rect",{x:"15",y:"5",width:"70",height:"5",fill:"#c0392b"})]}),"crown"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z",fill:"#f1c40f",stroke:"#d4ac0d",strokeWidth:"1"}),(0,n.jsx)("circle",{cx:"32",cy:"-2",r:"4",fill:"#e74c3c"}),(0,n.jsx)("circle",{cx:"50",cy:"-5",r:"5",fill:"#3498db"}),(0,n.jsx)("circle",{cx:"68",cy:"-2",r:"4",fill:"#2ecc71"}),(0,n.jsx)("circle",{cx:"31",cy:"-4",r:"1.5",fill:"white",opacity:"0.5"}),(0,n.jsx)("circle",{cx:"49",cy:"-7",r:"2",fill:"white",opacity:"0.5"}),(0,n.jsx)("circle",{cx:"67",cy:"-4",r:"1.5",fill:"white",opacity:"0.5"})]}),"headband"===y.id&&(0,n.jsx)("path",{d:"M10,22 Q50,15 90,22",fill:"none",stroke:"#ff69b4",strokeWidth:"4"}),"bow"===y.id&&(0,n.jsxs)("g",{transform:"translate(78, 15)",children:[(0,n.jsx)("ellipse",{cx:"-10",cy:"0",rx:"10",ry:"6",fill:"#ff69b4"}),(0,n.jsx)("ellipse",{cx:"10",cy:"0",rx:"10",ry:"6",fill:"#ff69b4"}),(0,n.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#e91e8c"})]}),"mask"===y.id&&(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z",fill:"#ffffff",stroke:"#e0e0e0",strokeWidth:"1"}),(0,n.jsx)("path",{d:"M35,62 L65,62",stroke:"#e0e0e0",strokeWidth:"1"})]})]}),N&&r&&(0,n.jsx)("rect",{x:"-13",y:-23,width:"126",height:146,fill:"none",stroke:N.stroke,strokeWidth:N.strokeWidth,rx:"12",style:{filter:N.filter}})]})}},5704(e,t,s){s.d(t,{UM:()=>n,uk:()=>o});var a=s(5452);const i={FIRST_THOUSAND:{id:"first_thousand",name:"\uccab \ucc9c \uc6d0",description:"1,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83e\ude99",category:"wealth",condition:e=>e.totalAssets>=1e3,rarity:"common",points:10},FIRST_TEN_THOUSAND:{id:"first_ten_thousand",name:"\ub9cc \uc6d0\uc758 \uae30\uc068",description:"10,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udcb5",category:"wealth",condition:e=>e.totalAssets>=1e4,rarity:"common",points:25},HUNDRED_THOUSAND:{id:"hundred_thousand",name:"10\ub9cc \uc6d0 \ud074\ub7fd",description:"100,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udcb0",category:"wealth",condition:e=>e.totalAssets>=1e5,rarity:"uncommon",points:50},MILLIONAIRE:{id:"millionaire",name:"\ubc31\ub9cc\uc7a5\uc790",description:"1,000,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83e\udd11",category:"wealth",condition:e=>e.totalAssets>=1e6,rarity:"rare",points:100},MULTI_MILLIONAIRE:{id:"multi_millionaire",name:"\ucc9c\ub9cc\uc7a5\uc790",description:"10,000,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udc8e",category:"wealth",condition:e=>e.totalAssets>=1e7,rarity:"legendary",points:500},COUPON_COLLECTOR:{id:"coupon_collector",name:"\ucfe0\ud3f0 \uc218\uc9d1\uac00",description:"\ucfe0\ud3f0 10\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udf9f\ufe0f",category:"coupon",condition:e=>e.coupons>=10,rarity:"common",points:15},COUPON_MASTER:{id:"coupon_master",name:"\ucfe0\ud3f0 \ub9c8\uc2a4\ud130",description:"\ucfe0\ud3f0 50\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udfab",category:"coupon",condition:e=>e.coupons>=50,rarity:"uncommon",points:40},COUPON_HOARDER:{id:"coupon_hoarder",name:"\ucfe0\ud3f0 \ubd80\uc790",description:"\ucfe0\ud3f0 100\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udff7\ufe0f",category:"coupon",condition:e=>e.coupons>=100,rarity:"rare",points:80},FIRST_TRADE:{id:"first_trade",name:"\uccab \uac70\ub798",description:"\uccab \ubc88\uc9f8 \uac70\ub798 \uc644\ub8cc\ud558\uae30",icon:"\ud83e\udd1d",category:"trading",condition:e=>e.totalTransactions>=1,rarity:"common",points:10},ACTIVE_TRADER:{id:"active_trader",name:"\ud65c\ubc1c\ud55c \uac70\ub798\uc790",description:"10\ud68c \uc774\uc0c1 \uac70\ub798\ud558\uae30",icon:"\ud83d\udcca",category:"trading",condition:e=>e.totalTransactions>=10,rarity:"common",points:25},TRADING_EXPERT:{id:"trading_expert",name:"\uac70\ub798 \uc804\ubb38\uac00",description:"50\ud68c \uc774\uc0c1 \uac70\ub798\ud558\uae30",icon:"\ud83d\udcc8",category:"trading",condition:e=>e.totalTransactions>=50,rarity:"uncommon",points:50},GENEROUS_HEART:{id:"generous_heart",name:"\ub530\ub73b\ud55c \ub9c8\uc74c",description:"\ud559\uae09 \ubaa9\ud45c\uc5d0 \ucc98\uc74c\uc73c\ub85c \uae30\ubd80\ud558\uae30",icon:"\u2764\ufe0f",category:"donation",condition:e=>e.totalDonations>=1,rarity:"common",points:20},PHILANTHROPIST:{id:"philanthropist",name:"\uc790\uc120\uac00",description:"\ucd1d 10\uac1c \uc774\uc0c1 \uae30\ubd80\ud558\uae30",icon:"\ud83c\udf81",category:"donation",condition:e=>e.totalDonations>=10,rarity:"uncommon",points:50},DONATION_KING:{id:"donation_king",name:"\uae30\ubd80\uc655",description:"\ucd1d 100\uac1c \uc774\uc0c1 \uae30\ubd80\ud558\uae30",icon:"\ud83d\udc51",category:"donation",condition:e=>e.totalDonations>=100,rarity:"rare",points:150},SAVER_BEGINNER:{id:"saver_beginner",name:"\uc800\ucd95\uc758 \uc2dc\uc791",description:"\uccab \uc608\uae08 \ub610\ub294 \uc801\uae08 \uac00\uc785\ud558\uae30",icon:"\ud83c\udfe6",category:"saving",condition:e=>e.savingProducts>=1,rarity:"common",points:15},SMART_SAVER:{id:"smart_saver",name:"\ub611\ub611\ud55c \uc800\ucd95\ub7ec",description:"\uc608\uae08/\uc801\uae08 3\uac1c \uc774\uc0c1 \uac00\uc785\ud558\uae30",icon:"\ud83d\udcb3",category:"saving",condition:e=>e.savingProducts>=3,rarity:"uncommon",points:40},FIRST_PROPERTY:{id:"first_property",name:"\uccab \ubd80\ub3d9\uc0b0",description:"\uccab \ubc88\uc9f8 \ubd80\ub3d9\uc0b0 \uad6c\ub9e4\ud558\uae30",icon:"\ud83c\udfe0",category:"realestate",condition:e=>e.properties>=1,rarity:"common",points:30},REAL_ESTATE_INVESTOR:{id:"real_estate_investor",name:"\ubd80\ub3d9\uc0b0 \ud22c\uc790\uc790",description:"\ubd80\ub3d9\uc0b0 3\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udfe2",category:"realestate",condition:e=>e.properties>=3,rarity:"uncommon",points:70},PROPERTY_TYCOON:{id:"property_tycoon",name:"\ubd80\ub3d9\uc0b0 \uc7ac\ubc8c",description:"\ubd80\ub3d9\uc0b0 5\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udff0",category:"realestate",condition:e=>e.properties>=5,rarity:"rare",points:150},PERFECT_ATTENDANCE:{id:"perfect_attendance",name:"\uac1c\uadfc\uc0c1",description:"7\uc77c \uc5f0\uc18d \uc811\uc18d\ud558\uae30",icon:"\ud83d\udcc5",category:"special",condition:e=>e.loginStreak>=7,rarity:"uncommon",points:100},MONTHLY_STREAK:{id:"monthly_streak",name:"\ud55c \ub2ec \ucd9c\uc11d\uc655",description:"30\uc77c \uc5f0\uc18d \uc811\uc18d\ud558\uae30",icon:"\ud83d\uddd3\ufe0f",category:"special",condition:e=>e.loginStreak>=30,rarity:"rare",points:300},EARLY_BIRD:{id:"early_bird",name:"\uc5bc\ub9ac\ubc84\ub4dc",description:"\uc11c\ube44\uc2a4 \ucd08\uae30 \uc0ac\uc6a9\uc790",icon:"\ud83d\udc26",category:"special",condition:()=>!1,rarity:"legendary",points:200}};function n(e){return Object.values(i).find(t=>t.id===e)||null}function o(e){if(!e)return[];try{const t="alchan_achievements_".concat(e),s=localStorage.getItem(t);return s?JSON.parse(s):[]}catch(t){return a.vF.error("\uc5c5\uc801 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",t),[]}}},6825(e,t,s){s.d(t,{ht:()=>i,wQ:()=>a});const a=[{level:0,minAssets:0,title:"\uacbd\uc81c \uc785\ubb38\uc790",icon:"\ud83c\udf31",color:"#6b7280",badge:"\ud83c\udfc5",description:"\uacbd\uc81c \uc5ec\uc815\uc758 \uc2dc\uc791"},{level:1,minAssets:1e7,title:"\ucc9c\ub9cc\uc7a5\uc790",icon:"\ud83d\udcb0",color:"#22c55e",badge:"\ud83e\udd49",description:"\uccab \ucc9c\ub9cc\uc6d0 \ub2ec\uc131!"},{level:2,minAssets:5e7,title:"\uc624\ucc9c\ub9cc \ud074\ub7fd",icon:"\ud83d\udcb5",color:"#84cc16",badge:"\ud83e\udd48",description:"\ubc18\uc5b5 \ub3cc\ud30c!"},{level:3,minAssets:1e8,title:"\uc5b5\ub300 \uc790\uc0b0\uac00",icon:"\ud83d\udc8e",color:"#eab308",badge:"\ud83e\udd47",description:"\uc5b5\ub300 \uc790\uc0b0 \ubcf4\uc720\uc790"},{level:4,minAssets:2e8,title:"\uc790\uc0b0 \uad00\ub9ac\uc0ac",icon:"\ud83d\udcca",color:"#f97316",badge:"\ud83c\udfc6",description:"2\uc5b5 \uc790\uc0b0 \ub2ec\uc131"},{level:5,minAssets:3e8,title:"\ud22c\uc790 \uc804\ubb38\uac00",icon:"\ud83d\udcc8",color:"#ef4444",badge:"\ud83d\udcab",description:"3\uc5b5 \uace0\uc9c0 \uc810\ub839"},{level:6,minAssets:5e8,title:"\ubd80\ub3d9\uc0b0 \uc655",icon:"\ud83c\udfe2",color:"#ec4899",badge:"\u2b50",description:"5\uc5b5 \uc790\uc0b0\uac00"},{level:7,minAssets:1e9,title:"10\uc5b5 \ud074\ub7fd",icon:"\ud83d\udc51",color:"#a855f7",badge:"\ud83c\udf1f",description:"10\uc5b5 \ub3cc\ud30c! \uc9c4\uc815\ud55c \ubd80\uc790"},{level:8,minAssets:5e9,title:"\uacbd\uc81c \uac70\ubb3c",icon:"\ud83e\udd81",color:"#8b5cf6",badge:"\ud83d\udc8e",description:"50\uc5b5 \uc790\uc0b0\uc758 \uac70\ubb3c"},{level:9,minAssets:1e10,title:"100\uc5b5 \uc7ac\ubc8c",icon:"\ud83d\udc09",color:"#6366f1",badge:"\ud83d\udc51",description:"100\uc5b5! \uc7ac\ubc8c\uc758 \ubc18\uc5f4"},{level:10,minAssets:5e10,title:"\uacbd\uc81c \ud669\uc81c",icon:"\ud83c\udff0",color:"#3b82f6",badge:"\ud83c\udfef",description:"500\uc5b5 \uacbd\uc81c \ud669\uc81c"},{level:11,minAssets:1e11,title:"\ucc9c\uc5b5 \ud0c0\uc774\ucfe4",icon:"\ud83c\udf0d",color:"#0ea5e9",badge:"\ud83c\udf0d",description:"1000\uc5b5! \uae00\ub85c\ubc8c \ud0c0\uc774\ucfe4"},{level:12,minAssets:1e12,title:"\uc54c\ucc2c \uc804\uc124",icon:"\ud83c\udf0c",color:"#00fff2",badge:"\ud83c\udf0c",description:"1\uc870 \ub2ec\uc131! \uc804\uc124\uc774 \ub418\ub2e4"}];function i(e){const t=Number(e)||0;let s=a[0];for(let r=a.length-1;r>=0;r--)if(t>=a[r].minAssets){s=a[r];break}const i=a.findIndex(e=>e.level===s.level+1),n=-1!==i?a[i]:null;let o=100;if(n){const e=s.minAssets,a=n.minAssets;o=Math.min(100,Math.floor((t-e)/(a-e)*100))}return{level:s.level,title:s.title,icon:s.icon,color:s.color,badge:s.badge,description:s.description,progress:o,nextLevel:n,currentAssets:t,assetsToNextLevel:n?n.minAssets-t:0}}},8379(e,t,s){s.d(t,{DailyRewardBanner:()=>c,Xe:()=>d,vb:()=>r,yW:()=>m});var a=s(2555),i=s(5043),n=s(579);const o=[{day:1,reward:1e4,icon:"\ud83c\udf81",label:"1\uc77c\ucc28"},{day:2,reward:15e3,icon:"\ud83c\udf81",label:"2\uc77c\ucc28"},{day:3,reward:2e4,icon:"\ud83c\udf81",label:"3\uc77c\ucc28"},{day:4,reward:3e4,icon:"\ud83c\udf81",label:"4\uc77c\ucc28"},{day:5,reward:4e4,icon:"\ud83c\udf81",label:"5\uc77c\ucc28"},{day:6,reward:5e4,icon:"\ud83c\udf81",label:"6\uc77c\ucc28"},{day:7,reward:6e4,icon:"\ud83c\udf89",label:"7\uc77c\ucc28"},{day:8,reward:7e4,icon:"\ud83c\udf89",label:"8\uc77c\ucc28"},{day:9,reward:85e3,icon:"\ud83c\udf89",label:"9\uc77c\ucc28"},{day:10,reward:1e5,icon:"\ud83c\udfc6",label:"10\uc77c\ucc28!"}];function r(e){const t="dailyStreak_".concat(e),s=(new Date).toDateString();try{const e=localStorage.getItem(t);if(e){const t=JSON.parse(e),i=new Date(t.lastLogin).toDateString(),n=new Date(Date.now()-864e5).toDateString();return i===s?(0,a.A)((0,a.A)({},t),{},{isNewDay:!1,canClaim:!1}):i===n?{streak:t.streak,lastLogin:t.lastLogin,totalClaimed:t.totalClaimed||0,isNewDay:!0,canClaim:!0}:{streak:0,lastLogin:null,totalClaimed:t.totalClaimed||0,isNewDay:!0,canClaim:!0,streakBroken:!0}}return{streak:0,lastLogin:null,totalClaimed:0,isNewDay:!0,canClaim:!0}}catch(i){return{streak:0,lastLogin:null,totalClaimed:0,isNewDay:!0,canClaim:!0}}}function l(e){var t;return e<=10?(null===(t=o[e-1])||void 0===t?void 0:t.reward)||1e4:1e5}function c(e){var t;let{userId:s,onClaim:a,autoPopup:c=!0}=e;const[d,m]=(0,i.useState)(null),[x,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[g,f]=(0,i.useState)(!1),[b,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(s){const e=r(s);m(e),f(e.canClaim),c&&e.canClaim&&y(!0)}},[s,c]);const v=()=>{const e=function(e){const t="dailyStreak_".concat(e),s=(new Date).toISOString(),a=r(e);if(!a.canClaim)return{success:!1,message:"\uc624\ub298 \uc774\ubbf8 \ubcf4\uc0c1\uc744 \ubc1b\uc558\uc2b5\ub2c8\ub2e4."};const i=a.streak+1,n=l(i),o=i>=10?"\ud83c\udfc6":i>=7?"\ud83c\udf89":"\ud83c\udf81",c={streak:i,lastLogin:s,totalClaimed:(a.totalClaimed||0)+n};return localStorage.setItem(t,JSON.stringify(c)),{success:!0,reward:n,newStreak:i,icon:o,message:"".concat(i,"\uc77c\ucc28 \ucd9c\uc11d \ubcf4\uc0c1: ").concat(n.toLocaleString(),"\uc6d0!"),isMilestone:10===i||i%30===0}}(s);p(e),u(!0),e.success&&a&&a(e.reward),setTimeout(()=>{f(!1)},5e3)};if(!g||!d)return null;const j=d.streak+1,w=l(j),N=j>=10;return b&&!x?(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>y(!1),children:(0,n.jsxs)("div",{className:"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up",onClick:e=>e.stopPropagation(),style:{background:N?"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",border:"2px solid rgba(255,255,255,0.3)"},children:[(0,n.jsx)("button",{onClick:()=>y(!1),className:"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer",children:"\u2715"}),(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:N?"\ud83c\udfc6":"\ud83c\udf81"}),(0,n.jsxs)("div",{className:"text-white text-2xl font-bold mb-2",children:[j,"\uc77c\ucc28 \ucd9c\uc11d \ubcf4\uc0c1"]}),d.streakBroken&&(0,n.jsx)("div",{className:"px-4 py-2 rounded-xl mb-3 text-sm",style:{background:"rgba(0,0,0,0.2)",color:"rgba(255,255,255,0.9)"},children:"\ud83d\ude22 \uc5f0\uc18d \ucd9c\uc11d\uc774 \ub04a\uc5b4\uc84c\uc5b4\uc694. \ub2e4\uc2dc 1\uc77c\ucc28\ubd80\ud130!"}),(0,n.jsxs)("div",{className:"text-4xl font-extrabold text-white mt-3",children:["+",w.toLocaleString(),"\uc6d0"]})]}),(0,n.jsx)("button",{onClick:()=>{v(),y(!1)},className:"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105",style:{background:"rgba(255,255,255,0.95)",color:N?"#ea580c":"#6366f1",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:"\ubc1b\uae30! \ud83c\udf89"}),(0,n.jsx)("div",{className:"flex justify-between gap-1 mt-5",children:o.map((e,t)=>(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"w-full h-2 rounded",style:{background:t<d.streak?"rgba(255,255,255,0.9)":t===d.streak?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)"}})},e.day))})]})}):(0,n.jsx)("div",{className:"rounded-2xl p-5 mb-5",style:{background:x?"linear-gradient(135deg, #10b981 0%, #059669 100%)":N?"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",boxShadow:x?"0 4px 20px rgba(16, 185, 129, 0.4)":N?"0 4px 20px rgba(245, 158, 11, 0.4)":"0 4px 20px rgba(139, 92, 246, 0.4)",animation:"slideDown 0.3s ease-out",border:"2px solid rgba(255,255,255,0.2)"},children:x?(0,n.jsxs)("div",{className:"text-center py-2.5",children:[(0,n.jsx)("div",{className:"text-5xl mb-3",style:{animation:"bounce 0.5s ease"},children:(null===h||void 0===h?void 0:h.icon)||"\ud83c\udf89"}),(0,n.jsxs)("div",{className:"text-white text-3xl font-extrabold mb-2",children:["+",null===h||void 0===h||null===(t=h.reward)||void 0===t?void 0:t.toLocaleString(),"\uc6d0"]}),(0,n.jsxs)("div",{className:"text-base font-semibold",style:{color:"rgba(255,255,255,0.9)"},children:["\ud83d\udd25 ",null===h||void 0===h?void 0:h.newStreak,"\uc77c \uc5f0\uc18d \ucd9c\uc11d!"]}),(null===h||void 0===h?void 0:h.isMilestone)&&(0,n.jsx)("div",{className:"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white",style:{background:"rgba(255,255,255,0.2)"},children:"\ud83c\udfc6 \ucd95\ud558\ud569\ub2c8\ub2e4! \ub9c8\uc77c\uc2a4\ud1a4 \ub2ec\uc131!"})]}):(0,n.jsxs)(n.Fragment,{children:[d.streakBroken&&(0,n.jsx)("div",{className:"px-3 py-2 rounded-lg mb-3 text-sm",style:{background:"rgba(0,0,0,0.2)",color:"rgba(255,255,255,0.9)"},children:"\ud83d\ude22 \uc5f0\uc18d \ucd9c\uc11d\uc774 \ub04a\uc5b4\uc84c\uc5b4\uc694. \ub2e4\uc2dc 1\uc77c\ucc28\ubd80\ud130 \uc2dc\uc791!"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2.5 mb-1.5",children:[(0,n.jsx)("span",{className:"text-3xl",children:N?"\ud83c\udfc6":"\ud83c\udf81"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-white text-lg font-bold",children:[j,"\uc77c\ucc28 \ucd9c\uc11d \ubcf4\uc0c1"]}),j>=10&&(0,n.jsxs)("div",{className:"text-xs mt-0.5",style:{color:"rgba(255,255,255,0.8)"},children:["\ud83d\udd25 ",j,"\uc77c \uc5f0\uc18d \ucd9c\uc11d \uc911!"]})]})]}),(0,n.jsxs)("div",{className:"text-2xl font-extrabold mt-1",style:{color:"rgba(255,255,255,0.95)"},children:["+",w.toLocaleString(),"\uc6d0"]})]}),(0,n.jsx)("button",{onClick:v,className:"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all",style:{background:"rgba(255,255,255,0.95)",color:N?"#ea580c":"#6366f1",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:"\ubc1b\uae30! \ud83c\udf89"})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{className:"flex justify-between gap-1",children:o.map((e,t)=>(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-full h-2 rounded mb-1",style:{background:t<d.streak?"rgba(255,255,255,0.9)":t===d.streak?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)"}}),(0===t||4===t||9===t)&&(0,n.jsxs)("span",{className:"text-[9px]",style:{color:"rgba(255,255,255,0.7)"},children:[t+1,"\uc77c"]})]},e.day))}),j>10&&(0,n.jsx)("div",{className:"text-center mt-2 text-xs",style:{color:"rgba(255,255,255,0.8)"},children:"\u2728 10\uc77c \uc774\uc0c1 \uc5f0\uc18d \ucd9c\uc11d \uc2dc \ub9e4\uc77c 10\ub9cc\uc6d0!"})]})]})})}function d(e){let{userId:t}=e;const[s,a]=(0,i.useState)({streak:0});(0,i.useEffect)(()=>{if(t){const e=r(t);a(e)}},[t]);const o=s.streak||0;return 0===o?null:(0,n.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold",style:{background:o>=10?"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)":"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)",border:"1px solid ".concat(o>=10?"#f59e0b40":"#8b5cf640"),color:o>=10?"#f59e0b":"#a78bfa"},children:[(0,n.jsx)("span",{children:"\ud83d\udd25"}),(0,n.jsxs)("span",{children:[o,"\uc77c \uc5f0\uc18d"]}),o>=10&&(0,n.jsx)("span",{children:"\ud83c\udfc6"})]})}function m(){return(0,n.jsxs)("div",{className:"rounded-2xl p-4",style:{background:"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)",border:"2px solid #8b5cf640"},children:[(0,n.jsx)("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2",style:{color:"#e8e8ff"},children:"\ud83c\udf81 \uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1 \uc548\ub0b4"}),(0,n.jsxs)("div",{className:"flex flex-col gap-1.5",children:[o.map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center px-2.5 py-1.5 rounded-lg",style:{background:10===e.day?"#f59e0b15":"transparent",border:10===e.day?"1px solid #f59e0b30":"none"},children:[(0,n.jsxs)("span",{className:"text-sm",style:{color:10===e.day?"#f59e0b":"#9ca3af"},children:[e.icon," ",e.label]}),(0,n.jsxs)("span",{style:{color:10===e.day?"#f59e0b":"#e8e8ff",fontWeight:10===e.day?"700":"500",fontSize:10===e.day?"15px":"13px"},children:[e.reward.toLocaleString(),"\uc6d0"]})]},e.day)),(0,n.jsx)("div",{className:"mt-2 p-2.5 rounded-xl text-center",style:{background:"#f59e0b15",border:"1px solid #f59e0b30"},children:(0,n.jsx)("span",{className:"text-sm font-semibold",style:{color:"#f59e0b"},children:"\ud83c\udfc6 10\uc77c \uc774\ud6c4: \ub9e4\uc77c 100,000\uc6d0!"})})]})]})}},8719(e,t,s){s.d(t,{px:()=>u,wB:()=>x});var a=s(2555),i=s(5043),n=s(5016),o=s(2864),r=s(577),l=s(9270),c=s(5452),d=s(579);const m=(0,i.createContext)(null),x=()=>{const e=(0,i.useContext)(m);return e||(c.vF.warn("useItems: ItemContext \ubc94\uc704 \ubc16\uc5d0\uc11c \uc0ac\uc6a9\ub428"),{items:[],userItems:[],marketListings:[],marketOffers:[],loading:!0,error:null,addItem:async()=>({success:!1,message:"Context not available"}),purchaseItem:async()=>({success:!1,message:"Context not available"}),updateItem:async()=>({success:!1,message:"Context not available"}),deleteItem:async()=>({success:!1,message:"Context not available"}),useItem:async()=>({success:!1,message:"Context not available"}),updateUserItemQuantity:async()=>({success:!1,message:"Context not available"}),listItemForSale:async()=>({success:!1,message:"Context not available"}),buyMarketItem:async()=>({success:!1,message:"Context not available"}),cancelSale:async()=>({success:!1,message:"Context not available"}),makeOffer:async()=>({success:!1,message:"Context not available"}),respondToOffer:async()=>({success:!1,message:"Context not available"}),adminCancelSale:async()=>({success:!1,message:"Context not available"}),adminDeleteItem:async()=>({success:!1,message:"Context not available"}),refreshData:async()=>{}})},u=e=>{let{children:t}=e;const{user:s,userDoc:x,isAdmin:u,loading:h,deductCash:p,addCash:g,optimisticUpdate:f}=(0,n.As)()||{},b=null===s||void 0===s?void 0:s.uid,y=null===x||void 0===x?void 0:x.classCode,[v,j]=(0,i.useState)([]),[w,N]=(0,i.useState)([]),[C,k]=(0,i.useState)([]),[A,S]=(0,i.useState)([]),[I,L]=(0,i.useState)(!0),[E,M]=(0,i.useState)(null),_=h||I,T=(0,i.useMemo)(()=>(0,o.Qg)(o.Cn,"getItemContextData"),[]),Q=(0,i.useMemo)(()=>({addStoreItem:(0,o.Qg)(o.Cn,"addStoreItem"),updateStoreItem:(0,o.Qg)(o.Cn,"updateStoreItem"),deleteStoreItem:(0,o.Qg)(o.Cn,"deleteStoreItem"),purchaseStoreItem:(0,o.Qg)(o.Cn,"purchaseStoreItem"),useUserItem:(0,o.Qg)(o.Cn,"useUserItem"),updateUserItemQuantity:(0,o.Qg)(o.Cn,"updateUserItemQuantity"),listUserItemForSale:(0,o.Qg)(o.Cn,"listUserItemForSale"),buyMarketItem:(0,o.Qg)(o.Cn,"buyMarketItem"),cancelMarketSale:(0,o.Qg)(o.Cn,"cancelMarketSale"),makeOffer:(0,o.Qg)(o.Cn,"makeOffer"),respondToOffer:(0,o.Qg)(o.Cn,"respondToOffer"),adminCancelSale:(0,o.Qg)(o.Cn,"adminCancelSale"),adminDeleteItem:(0,o.Qg)(o.Cn,"adminDeleteItem")}),[]),O=(0,i.useCallback)(async()=>{if(b&&y){L(!0);try{const e=await T();if(!e.data.success)throw new Error(e.data.message||"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");{const{storeItems:t,userItems:s,marketListings:a,marketOffers:i}=e.data.data;j(t||[]),N(s||[]),k(a||[]),S(i||[]),M(null)}}catch(e){c.vF.error("[ItemContext] \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",e),M(e)}finally{L(!1)}}else L(!1)},[b,y,T]);(0,r.nm)(O,{interval:18e5,enabled:!h&&!!b&&!!y,deps:[h,b,y]});const D=(0,i.useCallback)(()=>O(),[O]),R=(0,i.useCallback)(e=>{c.vF.log("[ItemContext] \ub85c\uceec userItems \uc5c5\ub370\uc774\ud2b8:",null===e||void 0===e?void 0:e.length,"\uac1c"),N(e)},[]),F=(0,i.useCallback)(async e=>{if("function"!==typeof u||!u())return{success:!1,message:"\uad00\ub9ac\uc790 \uad8c\ud55c \ud544\uc694"};const t="temp_".concat(Date.now()),i=(0,a.A)((0,a.A)({},e),{},{id:t});j(e=>[...e,i]);try{const t=await(null===s||void 0===s?void 0:s.getIdToken());if(!t)throw new Error("\uc778\uc99d \ud1a0\ud070\uc744 \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const a="https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem",i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({data:{newItemData:e}})});if(!i.ok){const e=await i.text();throw new Error(e||"\uc11c\ubc84 \uc624\ub958: ".concat(i.status))}const n=await i.json();if(n.data.success)return await D(),{success:!0};throw new Error(n.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}catch(E){return j(e=>e.filter(e=>e.id!==t)),{success:!1,message:E.message}}},[u,s,D]),z=(0,i.useCallback)(async(e,t)=>{if("function"!==typeof u||!u())return{success:!1,message:"\uad00\ub9ac\uc790 \uad8c\ud55c \ud544\uc694"};try{return await Q.updateStoreItem({itemId:e,updatesToApply:t}),D(),{success:!0}}catch(E){return"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \uc218\uc815 \ud568\uc218(updateStoreItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[u,Q,D]),P=(0,i.useCallback)(async e=>{if("function"!==typeof u||!u())return{success:!1,message:"\uad00\ub9ac\uc790 \uad8c\ud55c \ud544\uc694"};try{return await Q.deleteStoreItem({itemId:e}),D(),{success:!0}}catch(E){return"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \uc0ad\uc81c \ud568\uc218(deleteStoreItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[u,Q,D]),q=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};const s=v.find(t=>t.id===e);if(!s)return{success:!1,message:"\uc544\uc774\ud15c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."};const i=s.price*t;f&&f({cash:-i});const n={id:"temp-".concat(Date.now(),"-").concat(Math.random()),itemId:s.id,name:s.name,icon:s.icon||"\ud83d\udd2e",description:s.description||"",type:s.type||"general",quantity:t,price:s.price,durationMs:s.durationMs||3e5,purchasedAt:new Date};c.vF.log("[ItemContext] \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8: Store \uc544\uc774\ud15c \ucd94\uac00",n);const r=[...w],d=s.stock,m=s.price;N(e=>{const s=e.findIndex(e=>e.itemId===n.itemId);if(s>=0){const i=[...e];return i[s]=(0,a.A)((0,a.A)({},i[s]),{},{quantity:i[s].quantity+t}),i}return[...e,n]});try{const n=await Q.purchaseStoreItem({itemId:e,quantity:t});if(n.data.success){const{restocked:r,newStock:u,newPrice:h}=n.data;return c.vF.log("[ItemContext] \uad6c\ub9e4 \uc131\uacf5:",{itemId:e,quantity:t,restocked:r,newStock:u,newPrice:h,oldPrice:m,oldStock:d}),(0,l.Mx)(o.db,{classCode:y,userId:b,userName:(null===x||void 0===x?void 0:x.name)||"\uc0ac\uc6a9\uc790",type:l.gI.ITEM_PURCHASE,description:"".concat(s.name," ").concat(t,"\uac1c \uad6c\ub9e4 (").concat(i.toLocaleString(),"\uc6d0)"),amount:-i,metadata:{itemId:e,itemName:s.name,quantity:t,pricePerItem:s.price,totalPrice:i}}),void 0!==s.stock&&j(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{stock:u,price:h}):t)),{success:!0,restocked:r,newStock:u,newPrice:h}}throw c.vF.warn("[ItemContext] \uad6c\ub9e4 \uc2e4\ud328, \ub864\ubc31 \uc218\ud589"),f&&f({cash:i}),N(r),new Error(n.data.message||"\uad6c\ub9e4\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(E){return c.vF.error("[ItemContext] \uad6c\ub9e4 \uc5d0\ub7ec, \ub864\ubc31 \uc218\ud589:",E),f&&f({cash:i}),N(r),D(),"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \uad6c\ub9e4 \ud568\uc218(purchaseStoreItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D,v,w,f,y,x]),U=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};const s=w.find(t=>t.id===e||t.itemId===e),i=(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.itemName)||"\uc544\uc774\ud15c",n=[...w];N(s=>s.map(s=>{if(s.id===e||s.itemId===e){const e=s.quantity-t;return e<=0?null:(0,a.A)((0,a.A)({},s),{},{quantity:e})}return s}).filter(Boolean));try{return await Q.useUserItem({itemId:e,quantityToUse:t,sourceCollection:"inventory"}),(0,l.Mx)(o.db,{classCode:y,userId:b,userName:(null===x||void 0===x?void 0:x.name)||"\uc0ac\uc6a9\uc790",type:l.gI.ITEM_USE,description:"".concat(i," ").concat(t,"\uac1c \uc0ac\uc6a9"),metadata:{itemId:e,itemName:i,quantity:t}}),D(),{success:!0}}catch(E){return c.vF.error("[ItemContext] \uc544\uc774\ud15c \uc0ac\uc6a9 \uc5d0\ub7ec, \ub864\ubc31 \uc218\ud589:",E),N(n),D(),"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \uc0ac\uc6a9 \ud568\uc218(useUserItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,w,y,x,Q,D]),W=(0,i.useCallback)(async e=>{let{itemId:t,quantity:s,price:i}=e;if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};const n=w.find(e=>e.id===t||e.itemId===t),r=(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.itemName)||"\uc544\uc774\ud15c",d=[...w];N(e=>e.map(e=>{if(e.id===t||e.itemId===t){const t=e.quantity-s;return t<=0?null:(0,a.A)((0,a.A)({},e),{},{quantity:t})}return e}).filter(Boolean));try{return await Q.listUserItemForSale({inventoryItemId:t,quantity:s,price:i,sourceCollection:"inventory"}),(0,l.Mx)(o.db,{classCode:y,userId:b,userName:(null===x||void 0===x?void 0:x.name)||"\uc0ac\uc6a9\uc790",type:l.gI.ITEM_MARKET_LIST,description:"".concat(r," ").concat(s,"\uac1c \uc2dc\uc7a5 \ub4f1\ub85d (").concat(i.toLocaleString(),"\uc6d0)"),metadata:{itemId:t,itemName:r,quantity:s,price:i}}),D(),{success:!0}}catch(E){return c.vF.error("[ItemContext] \uc2dc\uc7a5 \ub4f1\ub85d \uc5d0\ub7ec, \ub864\ubc31 \uc218\ud589:",E),N(d),D(),"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \ud310\ub9e4 \ub4f1\ub85d \ud568\uc218(listUserItemForSale)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D,w,y,x]),B=(0,i.useCallback)(async e=>{if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};const t=C.find(t=>t.id===e);if(!t)return{success:!1,message:"\ud310\ub9e4 \ubaa9\ub85d\uc5d0\uc11c \uc544\uc774\ud15c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."};const s=t.price||t.totalPrice||0;if(!await p(s,"".concat(t.itemName," \uad6c\ub9e4")))return{success:!1,message:"\ud604\uae08 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."};const i={id:"temp-".concat(Date.now(),"-").concat(Math.random()),itemId:t.itemId||t.id,name:t.itemName,icon:t.icon||"\ud83d\udd2e",description:t.description||"",type:t.category||t.itemType||"general",quantity:t.quantity||1,purchasedAt:new Date};c.vF.log("[ItemContext] \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8: \uc544\uc774\ud15c \ucd94\uac00",i);const n=[...w],r=[...C];N(e=>{const t=e.findIndex(e=>e.itemId===i.itemId);if(t>=0){const s=[...e];return s[t]=(0,a.A)((0,a.A)({},s[t]),{},{quantity:s[t].quantity+i.quantity}),s}return[...e,i]}),k(t=>t.filter(t=>t.id!==e));try{const a=await Q.buyMarketItem({listingId:e});if(a.data.success)return c.vF.log("[ItemContext] \uad6c\ub9e4 \uc131\uacf5, \uc11c\ubc84 \ub370\uc774\ud130\ub85c \ub3d9\uae30\ud654"),(0,l.Mx)(o.db,{classCode:y,userId:b,userName:(null===x||void 0===x?void 0:x.name)||"\uc0ac\uc6a9\uc790",type:l.gI.ITEM_MARKET_BUY,description:"".concat(t.itemName," ").concat(t.quantity||1,"\uac1c \uc2dc\uc7a5 \uad6c\ub9e4 (").concat(s.toLocaleString(),"\uc6d0)"),amount:-s,metadata:{listingId:e,itemName:t.itemName,quantity:t.quantity||1,sellerId:t.sellerId,sellerName:t.sellerName,price:s}}),D(),{success:!0};throw c.vF.warn("[ItemContext] \uad6c\ub9e4 \uc2e4\ud328, \ub864\ubc31 \uc218\ud589"),await g(s,"".concat(t.itemName," \uad6c\ub9e4 \uc2e4\ud328 (\ub864\ubc31)")),N(n),k(r),new Error(a.data.message||"\uad6c\ub9e4\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(E){return c.vF.error("[ItemContext] \uad6c\ub9e4 \uc5d0\ub7ec, \ub864\ubc31 \uc218\ud589:",E),await g(s,"".concat(t.itemName," \uad6c\ub9e4 \uc2e4\ud328 (\ub864\ubc31)")),N(n),k(r),"not-found"===E.code?{success:!1,message:"\uad6c\ub9e4 \ucc98\ub9ac \ud568\uc218(buyMarketItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D,C,w,p,g,y,x]),X=(0,i.useCallback)(async e=>{if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};try{return await Q.cancelMarketSale({listingId:e}),D(),{success:!0}}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\ud310\ub9e4 \ucde8\uc18c \ud568\uc218(cancelMarketSale)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D]),G=(0,i.useCallback)(async e=>{let{listingId:t,offerPrice:s,quantity:a=1}=e;if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};try{const e=await Q.makeOffer({listingId:t,offerPrice:s,quantity:a});return D(),{success:!0,offerId:e.data.offerId}}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\uac00\uaca9 \uc81c\uc548 \ud568\uc218(makeOffer)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D]),H=(0,i.useCallback)(async e=>{let{offerId:t,response:s}=e;if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};try{return await Q.respondToOffer({offerId:t,response:s}),D(),{success:!0}}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\uc81c\uc548 \uc751\ub2f5 \ud568\uc218(respondToOffer)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D]),Z=(0,i.useCallback)(async e=>{if("function"!==typeof u||!u())return{success:!1,message:"\uad00\ub9ac\uc790 \uad8c\ud55c \ud544\uc694"};try{return await Q.adminCancelSale({listingId:e}),D(),{success:!0}}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\uad00\ub9ac\uc790 \ud310\ub9e4 \ucde8\uc18c \ud568\uc218(adminCancelSale)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[u,Q,D]),Y=(0,i.useCallback)(async e=>{if("function"!==typeof u||!u())return{success:!1,message:"\uad00\ub9ac\uc790 \uad8c\ud55c \ud544\uc694"};try{return await Q.adminDeleteItem({listingId:e}),D(),{success:!0}}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\uad00\ub9ac\uc790 \uc544\uc774\ud15c \uc0ad\uc81c \ud568\uc218(adminDeleteItem)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[u,Q,D]),K=(0,i.useCallback)(async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inventory";if(!b)return{success:!1,message:"\ub85c\uadf8\uc778 \ud544\uc694"};try{const a=await Q.updateUserItemQuantity({itemId:e,quantityChange:t,sourceCollection:s});if(a.data.success)return D(),{success:!0};throw new Error(a.data.message||"\uc544\uc774\ud15c \uc218\ub7c9 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(E){return D(),"not-found"===E.code?{success:!1,message:"\uc544\uc774\ud15c \uc218\ub7c9 \uc5c5\ub370\uc774\ud2b8 \ud568\uc218(updateUserItemQuantity)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}:{success:!1,message:E.message}}},[b,Q,D]),V=(0,i.useMemo)(()=>({items:v,userItems:w,marketListings:C,marketOffers:A,loading:_,error:E,addItem:F,updateItem:z,deleteItem:P,purchaseItem:q,useItem:U,updateUserItemQuantity:K,listItemForSale:W,buyMarketItem:B,cancelSale:X,makeOffer:G,respondToOffer:H,adminCancelSale:Z,adminDeleteItem:Y,refreshData:D,updateLocalUserItems:R}),[v,w,C,A,_,E,F,z,P,q,U,K,W,B,X,G,H,Z,Y,D,R]);return(0,d.jsx)(m.Provider,{value:V,children:t})}},9270(e,t,s){s.d(t,{C7:()=>l,Mx:()=>m,Tp:()=>r,_v:()=>c,gI:()=>d});var a=s(2555),i=s(5472),n=s(2864),o=s(5452);function r(e){try{if(!e)return new Date;if(e instanceof Date)return isNaN(e.getTime())?new Date:e;if("function"===typeof e.toDate){const t=e.toDate();return isNaN(t.getTime())?new Date:t}if(e.seconds){const t=new Date(1e3*e.seconds);return isNaN(t.getTime())?new Date:t}if("string"===typeof e||"number"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}return new Date}catch(t){return new Date}}function l(e,t,s){try{const a=localStorage.getItem("firestore_cache_".concat(e,"_").concat(t));if(a){const{data:e,timestamp:t}=JSON.parse(a);if(Date.now()-t<s)return e}}catch(a){o.vF.warn("[Cache] getCachedFirestoreData failed:",a)}return null}function c(e,t,s){try{localStorage.setItem("firestore_cache_".concat(e,"_").concat(t),JSON.stringify({data:s,timestamp:Date.now()}))}catch(a){o.vF.warn("[Cache] setCachedFirestoreData failed:",a)}}const d={CASH_INCOME:"\ud604\uae08 \uc785\uae08",CASH_EXPENSE:"\ud604\uae08 \ucd9c\uae08",TRANSFER_SEND:"\uc1a1\uae08 \ubc1c\uc1a1",TRANSFER_RECEIVE:"\uc1a1\uae08 \uc218\uc2e0",STOCK_BUY:"\uc8fc\uc2dd \ub9e4\uc218",STOCK_SELL:"\uc8fc\uc2dd \ub9e4\ub3c4",ITEM_PURCHASE:"\uc544\uc774\ud15c \uad6c\ub9e4",ITEM_SELL:"\uc544\uc774\ud15c \ud310\ub9e4",ITEM_USE:"\uc544\uc774\ud15c \uc0ac\uc6a9",ITEM_MARKET_LIST:"\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d",ITEM_MARKET_BUY:"\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4",DEPOSIT_CREATE:"\uc608\uae08 \uac00\uc785",DEPOSIT_WITHDRAW:"\uc608\uae08 \ucd9c\uae08",DEPOSIT_MATURITY:"\uc608\uae08 \ub9cc\uae30",LOAN_CREATE:"\ub300\ucd9c \uc2e4\ud589",LOAN_REPAY:"\ub300\ucd9c \uc0c1\ud658",PARKING_DEPOSIT:"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08",PARKING_WITHDRAW:"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08",PARKING_INTEREST:"\ud30c\ud0b9\ud1b5\uc7a5 \uc774\uc790",COUPON_EARN:"\ucfe0\ud3f0 \ud68d\ub4dd",COUPON_USE:"\ucfe0\ud3f0 \uc0ac\uc6a9",COUPON_GIVE:"\ucfe0\ud3f0 \uc9c0\uae09",COUPON_DONATE:"\ucfe0\ud3f0 \uae30\ubd80",COUPON_GIFT_SEND:"\ucfe0\ud3f0 \uc120\ubb3c",COUPON_GIFT_RECEIVE:"\ucfe0\ud3f0 \uc218\uc2e0",GAME_WIN:"\uac8c\uc784 \uc2b9\ub9ac",GAME_LOSE:"\uac8c\uc784 \ud328\ubc30",GAME_REWARD:"\uac8c\uc784 \ubcf4\uc0c1",GAME_BET:"\uac8c\uc784 \ubca0\ud305",AUCTION_BID:"\uacbd\ub9e4 \uc785\ucc30",AUCTION_WIN:"\uacbd\ub9e4 \ub099\ucc30",AUCTION_SOLD:"\uacbd\ub9e4 \ud310\ub9e4",AUCTION_REFUND:"\uacbd\ub9e4 \ud658\ubd88",REALESTATE_BUY:"\ubd80\ub3d9\uc0b0 \uad6c\ub9e4",REALESTATE_SELL:"\ubd80\ub3d9\uc0b0 \ud310\ub9e4",REALESTATE_RENT:"\uc784\ub300\ub8cc \uc218\uc785",TAX_PAYMENT:"\uc138\uae08 \ub0a9\ubd80",FINE_PAYMENT:"\ubc8c\uae08 \ub0a9\ubd80",SALARY_RECEIVE:"\uae09\uc5ec \uc218\ub839",ADMIN_GIVE:"\uad00\ub9ac\uc790 \uc9c0\uae09",ADMIN_TAKE:"\uad00\ub9ac\uc790 \ud68c\uc218"};async function m(e,t){let{classCode:s,userId:r,userName:l,type:c,description:d,amount:m=0,couponAmount:x=0,metadata:u={}}=t;if(!s||!r||!c)return o.vF.warn("[logActivity] \ud544\uc218 \ud30c\ub77c\ubbf8\ud130 \ub204\ub77d:",{classCode:s,userId:r,type:c}),{success:!1,error:"\ud544\uc218 \ud30c\ub77c\ubbf8\ud130 \ub204\ub77d"};const h=e||n.db;try{const e=(0,i.rJ)(h,"activity_logs"),t={classCode:s,userId:r,userName:l||"\uc54c \uc218 \uc5c6\uc74c",type:c,description:d||c,amount:m||0,couponAmount:x||0,metadata:(0,a.A)((0,a.A)({},u),{},{timestamp:(new Date).toISOString()}),timestamp:(0,i.O5)(),createdAt:(0,i.O5)()},n=await(0,i.addDoc)(e,t);return o.vF.log("[logActivity] \ud65c\ub3d9 \ub85c\uadf8 \uae30\ub85d:",c,d),{success:!0,logId:n.id}}catch(p){return o.vF.error("[logActivity] \ub85c\uadf8 \uae30\ub85d \uc2e4\ud328:",p),{success:!1,error:p.message}}}}}]);
//# sourceMappingURL=4589.a55dea1e.chunk.js.map