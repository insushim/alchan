"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[317],{956(){},5317(e,t,a){a.r(t),a.d(t,{default:()=>f});var s=a(2555),n=a(5043),l=(a(956),a(2419)),r=a(5472),o=a(577),i=a(8343),d=a(5452),c=a(579);const m=e=>{if(!e)return"-";const t=e.toDate?e.toDate():new Date(e);return isNaN(t.getTime())?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc":t.toLocaleString("ko-KR")},x={totalAmount:0,stockTaxRevenue:0,stockCommissionRevenue:0,realEstateTransactionTaxRevenue:0,vatRevenue:0,auctionTaxRevenue:0,propertyHoldingTaxRevenue:0,itemMarketTaxRevenue:0,incomeTaxRevenue:0,corporateTaxRevenue:0,otherTaxRevenue:0,lastUpdated:null},b={stockTransactionTaxRate:.01,realEstateTransactionTaxRate:.03,itemStoreVATRate:.1,auctionTransactionTaxRate:.03,propertyHoldingTaxRate:.002,propertyHoldingTaxInterval:"weekly",itemMarketTransactionTaxRate:.03,lastUpdated:null},h=e=>{let{classCode:t}=e;const[a,h]=(0,n.useState)(x),[u,p]=(0,n.useState)(b),[g,v]=(0,n.useState)(0),[f,j]=(0,n.useState)(!0),[w,N]=(0,n.useState)(!0),[y,T]=(0,n.useState)("overview"),[R,k]=(0,n.useState)(b),A=(0,n.useCallback)(async()=>{if(t)try{const e=(0,r.rJ)(l.db,"users"),a=(0,r.query)(e,(0,r.where)("classCode","==",t),(0,r.where)("isAdmin","==",!0)),s=await(0,r.getDocs)(a);if(s.empty)v(0);else{const e=s.docs[0].data();v(e.cash||0)}}catch(e){d.vF.error("[".concat(t,"] \uad00\ub9ac\uc790 \ud604\uae08(\uad6d\uace0) \ub85c\ub4dc \uc2e4\ud328:"),e),v(0)}else v(0)},[t]),S=(0,n.useCallback)(async()=>{if(!t)return j(!1),void h(x);j(!0),await A();const e=(0,r.H9)(l.db,"nationalTreasuries",t);try{const a=await(0,l.gn)("nationalTreasuries",t,3e5);if(a)return h((0,s.A)((0,s.A)({},x),a)),void j(!1);const n=await(0,r.x7)(e);n.exists()?(h((0,s.A)((0,s.A)({},x),n.data())),(0,l.gm)("doc_nationalTreasuries_".concat(t))):(await(0,r.BN)(e,(0,s.A)((0,s.A)({},x),{},{createdAt:(0,r.O5)(),lastUpdated:(0,r.O5)()})),(0,l.gm)("doc_nationalTreasuries_".concat(t)),h((0,s.A)((0,s.A)({},x),{},{lastUpdated:new Date}))),j(!1)}catch(a){d.vF.error("[".concat(t,"] \uc138\uc218 \ud1b5\uacc4 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:"),a),j(!1)}},[t,A]),{refetch:C}=(0,o.nm)(S,{interval:9e5,enabled:!!t}),D=(0,n.useCallback)(async()=>{if(!t)return N(!1),p(b),void k(b);N(!0);const e=(0,r.H9)(l.db,"governmentSettings",t);try{const a=await(0,l.gn)("governmentSettings",t,3e5);if(null!==a&&void 0!==a&&a.taxSettings){const e=(0,s.A)((0,s.A)({},b),a.taxSettings);return p(e),k(e),void N(!1)}const n=await(0,r.x7)(e);if(n.exists()&&n.data().taxSettings){const e=(0,s.A)((0,s.A)({},b),n.data().taxSettings);p(e),k(e),(0,l.gm)("doc_governmentSettings_".concat(t))}else await(0,r.BN)(e,{taxSettings:(0,s.A)((0,s.A)({},b),{},{lastUpdated:(0,r.O5)()})},{merge:!0}),(0,l.gm)("doc_governmentSettings_".concat(t)),p(b),k(b);N(!1)}catch(a){d.vF.error("[".concat(t,"] \uc138\uae08 \uc815\ucc45 \ub85c\ub4dc \uc2e4\ud328:"),a),N(!1)}},[t]),{refetch:L}=(0,o.nm)(D,{interval:36e5,enabled:!!t}),_=e=>{const{name:t,value:a}=e.target,n=""===a?"":parseFloat(a);k(e=>(0,s.A)((0,s.A)({},e),{},{[t]:n}))},H=e=>{const{name:t,value:a}=e.target;k(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};if(!t)return(0,c.jsxs)("div",{className:"p-8 text-center",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,c.jsx)("p",{className:"text-slate-500",children:"\uc815\ubd80 \uba54\ub274\uc5d0\uc11c \uad6d\uc138\uccad \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \ud559\uae09\uc5d0 \uba3c\uc800 \ucc38\uc5ec\ud574\uc57c \ud569\ub2c8\ub2e4."})]});if(f||w)return(0,c.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,c.jsxs)("p",{className:"text-slate-500 font-medium",children:["\uad6d\uc138\uccad \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 (\ud559\uae09: ",t,")..."]})]})});const F=Object.keys(a).filter(e=>e.endsWith("Revenue")&&"totalAmount"!==e).reduce((e,t)=>e+(a[t]||0),0);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-violet-600 to-purple-600 rounded-2xl p-8 text-white shadow-xl",children:[(0,c.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["\ud83c\udfdb\ufe0f ",t," \ud559\uae09 \uad6d\uc138\uccad"]}),(0,c.jsx)("p",{className:"text-white/80 text-lg",children:"\uc138\uae08 \uc815\ucc45 \uad00\ub9ac \ubc0f \uad6d\uace0 \uc6b4\uc601"})]}),(0,c.jsx)("div",{className:"flex gap-2 border-b border-slate-200 pb-0",children:[{id:"overview",label:"\uac1c\uc694",icon:"\ud83d\udcca"},{id:"revenue",label:"\uc138\uc218 \ud604\ud669",icon:"\ud83d\udcb0"},{id:"policy",label:"\uc138\uae08 \uc815\ucc45",icon:"\ud83d\udccb"},{id:"analytics",label:"\ubd84\uc11d",icon:"\ud83d\udcc8"}].map(e=>(0,c.jsxs)("button",{onClick:()=>T(e.id),className:"px-6 py-3 rounded-t-xl font-bold text-sm transition-all ".concat(y===e.id?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"),children:[e.icon," ",e.label]},e.id))}),"overview"===y&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg border border-emerald-400/30",children:[(0,c.jsx)("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"\ud83d\udcb0 \ucd1d \uad6d\uace0"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(g)}),(0,c.jsx)("p",{className:"text-emerald-200 text-xs mt-1",children:"= \ud559\uae09 \uad00\ub9ac\uc790 \ud604\uae08"})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg border border-blue-400/30",children:[(0,c.jsx)("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"\ud83d\udcc8 \uc8fc\uc2dd \uac70\ub798\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.stockTaxRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg border border-indigo-400/30",children:[(0,c.jsx)("p",{className:"text-indigo-100 text-sm font-medium mb-1",children:"\ud83d\udcca \uc8fc\uc2dd \uac70\ub798 \uc218\uc218\ub8cc \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.stockCommissionRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-6 text-white shadow-lg border border-amber-400/30",children:[(0,c.jsx)("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"\ud83c\udfe0 \ubd80\ub3d9\uc0b0 \uac70\ub798\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.realEstateTransactionTaxRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl p-6 text-white shadow-lg border border-pink-400/30",children:[(0,c.jsx)("p",{className:"text-pink-100 text-sm font-medium mb-1",children:"\ud83d\uded2 \uc544\uc774\ud15c \ubd80\uac00\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.vatRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-6 text-white shadow-lg border border-cyan-400/30",children:[(0,c.jsx)("p",{className:"text-cyan-100 text-sm font-medium mb-1",children:"\ud83d\udd28 \uacbd\ub9e4\uc7a5 \uac70\ub798\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.auctionTaxRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-lime-500 to-lime-600 rounded-2xl p-6 text-white shadow-lg border border-lime-400/30",children:[(0,c.jsx)("p",{className:"text-lime-100 text-sm font-medium mb-1",children:"\ud83c\udfd8\ufe0f \ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.propertyHoldingTaxRevenue)})]}),(0,c.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg border border-orange-400/30",children:[(0,c.jsx)("p",{className:"text-orange-100 text-sm font-medium mb-1",children:"\ud83c\udfea \uc544\uc774\ud15c \uc2dc\uc7a5 \uac70\ub798\uc138 \uc218\uc785"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.itemMarketTaxRevenue)})]})]}),(0,c.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,c.jsx)("h3",{className:"text-lg font-bold text-[#00fff2] mb-4",children:"\ud83d\udcc5 \ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8"}),(0,c.jsxs)("div",{className:"space-y-2 text-slate-300",children:[(0,c.jsxs)("p",{children:["\uad6d\uace0 \ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",(0,c.jsx)("span",{className:"font-medium text-white",children:m(a.lastUpdated)})]}),(0,c.jsxs)("p",{children:["\uc138\uae08 \uc815\ucc45 \ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",(0,c.jsx)("span",{className:"font-medium text-white",children:m(u.lastUpdated)})]})]})]})]}),"revenue"===y&&(0,c.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-[#00fff2]",children:"\ud83d\udcb0 \uc138\uc218 \ud604\ud669 \ubd84\uc11d"}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsx)("p",{className:"text-sm text-slate-400",children:"\uc138\uc218 \ucd1d\ud569"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-white text-shadow-sm",children:(0,i.bL)(F)})]})]}),(0,c.jsx)("div",{className:"space-y-4",children:[{label:"\uc8fc\uc2dd \uac70\ub798\uc138",amount:a.stockTaxRevenue,color:"bg-blue-500"},{label:"\uc8fc\uc2dd \uc218\uc218\ub8cc",amount:a.stockCommissionRevenue,color:"bg-indigo-500"},{label:"\ubd80\ub3d9\uc0b0 \uac70\ub798\uc138",amount:a.realEstateTransactionTaxRevenue,color:"bg-amber-500"},{label:"\ubd80\uac00\uc138",amount:a.vatRevenue,color:"bg-pink-500"},{label:"\uacbd\ub9e4\uc7a5 \uac70\ub798\uc138",amount:a.auctionTaxRevenue,color:"bg-cyan-500"},{label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138",amount:a.propertyHoldingTaxRevenue,color:"bg-lime-500"},{label:"\uc544\uc774\ud15c \uc2dc\uc7a5\uc138",amount:a.itemMarketTaxRevenue,color:"bg-orange-500"}].map(e=>{const t=F>0?(e.amount/F*100).toFixed(1):"0.0";return(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"w-32 font-medium text-slate-300",children:e.label}),(0,c.jsx)("div",{className:"flex-1 h-6 bg-slate-800 rounded-full overflow-hidden border border-slate-700",children:(0,c.jsx)("div",{className:"h-full ".concat(e.color," transition-all duration-500 shadow-[0_0_10px_rgba(0,0,0,0.5)]"),style:{width:"".concat(t,"%")}})}),(0,c.jsxs)("div",{className:"w-40 text-right text-sm",children:[(0,c.jsx)("span",{className:"font-bold text-white",children:(0,i.bL)(e.amount)}),(0,c.jsxs)("span",{className:"text-slate-400 ml-2",children:["(",t,"%)"]})]})]},e.label)})})]}),"policy"===y&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,c.jsxs)("h3",{className:"text-xl font-bold text-[#00fff2] mb-6",children:["\ud83d\udccb \ud604\ud589 \uc138\uae08 \uc815\ucc45 (\ud559\uae09: ",t,")"]}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"stockTransactionTaxRate",label:"\uc8fc\uc2dd \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"realEstateTransactionTaxRate",label:"\ubd80\ub3d9\uc0b0 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"itemStoreVATRate",label:"\uc544\uc774\ud15c \uc0c1\uc810 \ubd80\uac00\uc138\uc728",type:"number",step:"0.01",min:"0",max:"1"},{name:"auctionTransactionTaxRate",label:"\uacbd\ub9e4\uc7a5 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"propertyHoldingTaxRate",label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138\uc728",type:"number",step:"0.0001",min:"0",max:"1"},{name:"propertyHoldingTaxInterval",label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138 \uc9d5\uc218 \uc8fc\uae30",type:"select",options:["daily","weekly","monthly"]},{name:"itemMarketTransactionTaxRate",label:"\uc544\uc774\ud15c \uc2dc\uc7a5 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"}].map(e=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:[e.label,(0,c.jsxs)("span",{className:"text-[#00fff2] font-normal ml-2",children:["(\ud604\uc7ac: ","select"===e.type?u[e.name]:"".concat((100*(u[e.name]||0)).toFixed(e.name.includes("propertyHoldingTaxRate")?2:1),"%"),")"]})]}),"select"===e.type?(0,c.jsx)("select",{name:e.name,value:R[e.name]||b[e.name],onChange:H,className:"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors",children:e.options.map(e=>(0,c.jsx)("option",{value:e,children:"daily"===e?"\ub9e4\uc77c":"weekly"===e?"\ub9e4\uc8fc":"\ub9e4\uc6d4"},e))}):(0,c.jsx)("input",{type:e.type,name:e.name,value:""===R[e.name]?"":R[e.name],onChange:_,step:e.step,min:e.min,max:e.max,placeholder:"\uc608: ".concat(e.label.includes("\ubd80\uac00")?"0.1 (10%)":"0.03 (3%)"),className:"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors placeholder-slate-600"})]},e.name))}),(0,c.jsx)("button",{onClick:async()=>{if(!t)return;for(const t in R)if(t.endsWith("Rate")&&(R[t]<0||R[t]>1)&&""!==R[t]&&!("itemStoreVATRate"===t&&R[t]>1))return void alert("".concat(t," \uc138\uc728\uc740 0\uacfc 1 \uc0ac\uc774\uc758 \uac12\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4 (\uc608: 3%\ub294 0.03). \ud604\uc7ac\uac12: ").concat(R[t]));const e=(0,r.H9)(l.db,"governmentSettings",t);try{await(0,r.mZ)(e,{taxSettings:(0,s.A)((0,s.A)({},R),{},{lastUpdated:(0,r.O5)()})}),L(),alert("\uc138\uae08 \uc815\ucc45\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){d.vF.error("\uc138\uae08 \uc815\ucc45 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",a),alert("\uc138\uae08 \uc815\ucc45 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"mt-6 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-bold transition-all shadow-lg border border-indigo-400/30",children:"\uc138\uae08 \uc815\ucc45 \uc800\uc7a5"})]}),(0,c.jsxs)("div",{className:"bg-[#13131f] rounded-2xl p-6 border border-blue-500/30 shadow-lg",children:[(0,c.jsx)("h3",{className:"text-lg font-bold text-blue-400 mb-3",children:"\ud83d\udca1 \uc138\uae08 \uc815\ucc45 \ubaa9\ud45c"}),(0,c.jsxs)("ul",{className:"text-blue-300 space-y-2",children:[(0,c.jsx)("li",{children:"\u2022 \uacf5\uc815\ud55c \uc2dc\uc7a5 \uacbd\uc81c \uc9c8\uc11c \ud655\ub9bd"}),(0,c.jsx)("li",{children:"\u2022 \uc548\uc815\uc801\uc778 \ud559\uae09 \uc7ac\uc815 \uc815\ubcf4 \ubc0f \uacf5\uacf5 \uc11c\ube44\uc2a4 \ud22c\uc790"}),(0,c.jsx)("li",{children:"\u2022 \uacbd\uc81c \ud65c\ub3d9 \ucc38\uc5ec\uc640 \uac10\uc758 \ud615\ud3c9\uc131 \uc81c\uace0"})]})]})]}),"analytics"===y&&(0,c.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg",children:[(0,c.jsxs)("h3",{className:"text-xl font-bold text-[#00fff2] mb-4",children:["\ud83d\udcc8 \uc138\uc218 \ubd84\uc11d (\ud559\uae09: ",t,")"]}),(0,c.jsxs)("div",{className:"bg-[#13131f] rounded-xl p-8 text-center border border-slate-700",children:[(0,c.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,c.jsx)("p",{className:"text-slate-300",children:"\ucd94\ud6c4 \ub2e4\uc591\ud55c \uc138\uc218 \ubd84\uc11d \ucc28\ud2b8\uc640 \uc0c1\uc138 \uc815\ubcf4\uac00 \ud45c\uc2dc\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."}),(0,c.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"\uc608: \uc2dc\uac04\uc5d0 \ub530\ub978 \uc138\uc218 \ubcc0\ud654, \uce74\ud14c\uace0\ub9ac\ubcc4 \uae30\uc5ec\ub3c4 \ub4f1"})]})]})]})};var u=a(5016),p=a(481);const g=e=>{if(!e)return"\uc815\ubcf4 \uc5c6\uc74c";try{const t=new Date(e);return isNaN(t.getTime())?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc":"".concat(t.getFullYear(),"\ub144 ").concat(t.getMonth()+1,"\uc6d4 ").concat(t.getDate(),"\uc77c")}catch(t){return"\ub0a0\uc9dc \ubcc0\ud658 \uc624\ub958"}},v=e=>{let{classCode:t}=e;const[a,i]=(0,n.useState)([]),{isAdmin:m,userDoc:x}=(0,u.As)(),{data:b}=(0,o.nm)(async()=>{if(!t)return[];const e=(0,r.rJ)(l.db,"jobs"),a=(0,r.query)(e,(0,r.where)("classCode","==",t));return(await(0,r.getDocs)(a)).docs.map(e=>(0,s.A)({id:e.id},e.data()))},{interval:18e5,enabled:!!t,deps:[t]}),h=(0,n.useCallback)(()=>{if(m())return!0;if(null===x||void 0===x||!x.selectedJobIds||!b||0===b.length)return!1;return b.filter(e=>x.selectedJobIds.includes(e.id)).some(e=>"\ub300\ud1b5\ub839"===e.title)},[m,x,b]),{loading:v,refetch:f}=(0,o.nm)(async()=>{if(t)try{const e=(0,r.rJ)(l.db,"classes",t,"nationalAssemblyLaws"),a=(0,r.query)(e,(0,r.where)("status","==","pending_government_approval")),n=(await(0,r.getDocs)(a)).docs.map(e=>(0,s.A)({id:e.id},e.data()));i(n)}catch(e){d.vF.error("Error fetching pending laws:",e),alert("\uc815\ubd80 \uc774\uc1a1 \ubc95\uc548\uc744 \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ucf58\uc194\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")}},{interval:9e5,enabled:!!t});return v?(0,c.jsx)(p.AlchanLoading,{}):(0,c.jsxs)("div",{className:"law-management-container",children:[(0,c.jsx)("h2",{children:"\uc815\ubd80 \uc774\uc1a1 \ubc95\uc548 \ubaa9\ub85d"}),0===a.length?(0,c.jsx)("div",{className:"empty-state",children:"\ud604\uc7ac \uc815\ubd80\ub85c \uc774\uc1a1\ub41c \ubc95\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,c.jsx)("div",{className:"law-list",children:a.map(e=>{var a;return(0,c.jsx)("div",{className:"law-card pending-gov",children:(0,c.jsxs)("div",{className:"law-content-wrapper",children:[(0,c.jsxs)("div",{className:"law-header",children:[(0,c.jsx)("h3",{className:"law-title",children:e.title}),(0,c.jsx)("span",{className:"law-status pending-gov",children:"\uc815\ubd80 \uc2ec\uc758\uc911"})]}),(0,c.jsxs)("div",{className:"law-content",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc81c\uc548\uc790:"})," ",e.proposerName||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ucde8\uc9c0:"})," ",e.purpose]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\uc124\uba85:"})," ",e.description]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"\ubc8c\uae08:"})," ",e.fine]}),(0,c.jsxs)("p",{className:"law-timestamp",children:["\uad6d\ud68c \ud1b5\uacfc\uc77c: ",g(null===(a=e.approvalDate)||void 0===a?void 0:a.toDate().toISOString())]})]}),h()&&(0,c.jsxs)("div",{className:"law-footer government-actions",children:[(0,c.jsx)("button",{onClick:()=>(async e=>{if(h()){if(window.confirm("\uc774 \ubc95\uc548\uc744 \ucd5c\uc885 \uc2b9\uc778\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){const s=(0,r.H9)(l.db,"classes",t,"nationalAssemblyLaws",e);try{await(0,r.mZ)(s,{status:"approved",finalStatus:"final_approved",finalApprovalDate:(0,r.O5)()}),alert("\ubc95\uc548\uc774 \ucd5c\uc885 \uc2b9\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),f()}catch(a){d.vF.error("Error approving law:",a),alert("\ubc95\uc548 \uc2b9\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}}else alert("\ub300\ud1b5\ub839 \ub610\ub294 \uad00\ub9ac\uc790\ub9cc \ubc95\uc548\uc744 \uc2b9\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e.id),className:"gov-action-button approve",children:"\uc2b9\uc778"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(!h())return void alert("\ub300\ud1b5\ub839 \ub610\ub294 \uad00\ub9ac\uc790\ub9cc \uac70\ubd80\uad8c\uc744 \ud589\uc0ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const a=prompt("\uac70\ubd80\uad8c \ud589\uc0ac \uc0ac\uc720\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(a&&""!==a.trim()){const n=(0,r.H9)(l.db,"classes",t,"nationalAssemblyLaws",e),o=new Date;o.setDate(o.getDate()+7);try{await(0,r.mZ)(n,{status:"vetoed",vetoReason:a,vetoDate:(0,r.O5)(),vetoDeadline:o,approvals:0,disapprovals:0,voters:{}}),alert("\uac70\ubd80\uad8c\uc774 \ud589\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \ubc95\uc548\uc740 \uad6d\ud68c\uc5d0\uc11c \uc7ac\uc758\uacb0 \uc808\ucc28\ub97c \uac70\uce69\ub2c8\ub2e4."),f()}catch(s){d.vF.error("Error vetoing law:",s),alert("\uac70\ubd80\uad8c \ud589\uc0ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else alert("\uac70\ubd80 \uc0ac\uc720\ub97c \ubc18\ub4dc\uc2dc \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4.")})(e.id),className:"gov-action-button veto",children:"\uac70\ubd80\uad8c \ud589\uc0ac"})]})]})},e.id)})})]})},f=()=>{const{userDoc:e}=(0,u.As)(),t=null===e||void 0===e?void 0:e.classCode,[a,s]=(0,n.useState)("lawManage"),l=e=>{s(e)};return(0,c.jsxs)("div",{className:"government-container",children:[(0,c.jsxs)("h1",{className:"government-header",children:["\uc815\ubd80 (",t?"\ud559\uae09: ".concat(t):"\ud559\uae09 \uc815\ubcf4 \uc5c6\uc74c",")"]}),(0,c.jsxs)("div",{className:"government-tabs",children:[(0,c.jsx)("button",{className:"gov-tab-button ".concat("lawManage"===a?"active":""),onClick:()=>l("lawManage"),disabled:!t,children:"\ubc95\uc548 \uad00\ub9ac"}),(0,c.jsx)("button",{className:"gov-tab-button ".concat("tax"===a?"active":""),onClick:()=>l("tax"),disabled:!t,children:"\uad6d\uc138\uccad"})]}),(0,c.jsx)("div",{className:"government-tab-content",children:(()=>{if(!t)return(0,c.jsx)(p.AlchanLoading,{});switch(a){case"lawManage":default:return(0,c.jsx)(v,{classCode:t});case"tax":return(0,c.jsx)(h,{classCode:t})}})()})]})}}}]);
//# sourceMappingURL=317.abcd3287.chunk.js.map