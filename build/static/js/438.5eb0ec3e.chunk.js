/*! For license information please see 438.5eb0ec3e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[438],{1438:(e,s,a)=>{a.r(s),a.d(s,{default:()=>re});var t=a(4919),r=a(5043),l=a(5016),n=a(791),c=a(5472),i=a(458),d=a(7118),o=a(7784);const x=(0,o.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),m=(0,o.A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),h=(0,o.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var u=a(516),g=a(9855);const p=(0,o.A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var b=a(4459),y=a(9797),f=a(5727),j=a(7104),N=a(6833),v=a(7819),w=a(6210);const k=(0,o.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var C=a(9222),A=a(2024),z=a(2382),S=a(614);const M=(0,o.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),H=(0,o.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var T=a(579);const L=["children","variant","size","disabled","loading","icon","iconPosition","fullWidth","className"],B=["children","className","hover","padding"],F=["label","error","helper","icon","className","containerClassName"],R=["label","error","options","placeholder","className","containerClassName"],O=["label","error","helper","className","containerClassName"],I={primary:"bg-indigo-500 hover:bg-indigo-600 text-white shadow-md hover:shadow-lg",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200",outline:"border-2 border-indigo-500 text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20",ghost:"text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-500 hover:bg-red-600 text-white shadow-md",success:"bg-emerald-500 hover:bg-emerald-600 text-white shadow-md",warning:"bg-amber-500 hover:bg-amber-600 text-white shadow-md"},E={xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-5 py-3 text-base",xl:"px-6 py-3.5 text-lg"},J=(0,r.forwardRef)((e,s)=>{let{children:a,variant:r="primary",size:l="md",disabled:n=!1,loading:c=!1,icon:i,iconPosition:d="left",fullWidth:o=!1,className:x=""}=e,m=(0,C.A)(e,L);return(0,T.jsxs)("button",(0,t.A)((0,t.A)({ref:s,disabled:n||c,className:"\n        inline-flex items-center justify-center gap-2\n        font-medium rounded-xl\n        transition-all duration-200\n        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\n        disabled:opacity-50 disabled:cursor-not-allowed\n        ".concat(I[r],"\n        ").concat(E[l],"\n        ").concat(o?"w-full":"","\n        ").concat(x,"\n      ")},m),{},{children:[c&&(0,T.jsx)(A.A,{className:"w-4 h-4 animate-spin"}),!c&&i&&"left"===d&&(0,T.jsx)(i,{className:"w-4 h-4"}),a,!c&&i&&"right"===d&&(0,T.jsx)(i,{className:"w-4 h-4"})]}))});J.displayName="Button";const Z=(0,r.forwardRef)((e,s)=>{let{children:a,className:r="",hover:l=!1,padding:n="md"}=e,c=(0,C.A)(e,B);return(0,T.jsx)("div",(0,t.A)((0,t.A)({ref:s,className:"\n        rounded-2xl\n        shadow-sm\n        ".concat(l?"hover:shadow-md transition-all duration-200":"","\n        ").concat({none:"",sm:"p-3",md:"p-4 sm:p-6",lg:"p-6 sm:p-8"}[n],"\n        ").concat(r,"\n      "),style:{background:"rgba(20, 20, 35, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)"}},c),{},{children:a}))});Z.displayName="Card";const _=(0,r.forwardRef)((e,s)=>{let{label:a,error:r,helper:l,icon:n,className:c="",containerClassName:i=""}=e,d=(0,C.A)(e,F);return(0,T.jsxs)("div",{className:"space-y-1.5 ".concat(i),children:[a&&(0,T.jsx)("label",{className:"block text-sm font-medium",style:{color:"#00fff2"},children:a}),(0,T.jsxs)("div",{className:"relative",children:[n&&(0,T.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:"#94a3b8"},children:(0,T.jsx)(n,{size:18})}),(0,T.jsx)("input",(0,t.A)({ref:s,className:"\n            w-full px-4 py-2.5\n            ".concat(n?"pl-10":"","\n            rounded-xl\n            focus:outline-none focus:ring-2 focus:ring-offset-0\n            transition-colors duration-200\n            ").concat(c,"\n          "),style:{background:"rgba(0, 0, 0, 0.3)",border:r?"2px solid #ef4444":"2px solid rgba(255, 255, 255, 0.1)",color:"#e2e8f0"}},d))]}),r&&(0,T.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,T.jsx)(v.A,{size:14}),r]}),l&&!r&&(0,T.jsx)("p",{className:"text-sm",style:{color:"#94a3b8"},children:l})]})});_.displayName="Input";const q=(0,r.forwardRef)((e,s)=>{let{label:a,error:r,options:l=[],placeholder:n="\uc120\ud0dd\ud558\uc138\uc694",className:c="",containerClassName:i=""}=e,d=(0,C.A)(e,R);return(0,T.jsxs)("div",{className:"space-y-1.5 ".concat(i),children:[a&&(0,T.jsx)("label",{className:"block text-sm font-medium",style:{color:"#00fff2"},children:a}),(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsxs)("select",(0,t.A)((0,t.A)({ref:s,className:"\n            w-full px-4 py-2.5 pr-10\n            rounded-xl\n            focus:outline-none focus:ring-2 focus:ring-offset-0\n            transition-colors duration-200\n            appearance-none cursor-pointer\n            ".concat(c,"\n          "),style:{background:"rgba(0, 0, 0, 0.3)",border:r?"2px solid #ef4444":"2px solid rgba(255, 255, 255, 0.1)",color:"#e2e8f0"}},d),{},{children:[(0,T.jsx)("option",{value:"",children:n}),l.map(e=>(0,T.jsx)("option",{value:e.value,children:e.label},e.value))]})),(0,T.jsx)(z.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 pointer-events-none",style:{color:"#94a3b8"}})]}),r&&(0,T.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,T.jsx)(v.A,{size:14}),r]})]})});q.displayName="Select";const P=(0,r.forwardRef)((e,s)=>{let{label:a,error:r,helper:l,className:n="",containerClassName:c=""}=e,i=(0,C.A)(e,O);return(0,T.jsxs)("div",{className:"space-y-1.5 ".concat(c),children:[a&&(0,T.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),(0,T.jsx)("textarea",(0,t.A)({ref:s,className:"\n          w-full px-4 py-3\n          bg-white dark:bg-gray-800\n          border rounded-xl\n          ".concat(r?"border-red-500 focus:ring-red-500":"border-gray-200 dark:border-gray-600 focus:border-indigo-500 focus:ring-indigo-500","\n          text-gray-900 dark:text-white\n          placeholder-gray-400 dark:placeholder-gray-500\n          focus:outline-none focus:ring-2 focus:ring-offset-0\n          transition-colors duration-200\n          resize-none\n          ").concat(n,"\n        ")},i)),r&&(0,T.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,T.jsx)(v.A,{size:14}),r]}),l&&!r&&(0,T.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l})]})});P.displayName="Textarea";const D=e=>{let{isOpen:s,onClose:a,title:t,children:l,size:n="md",showCloseButton:c=!0,footer:i,className:d=""}=e;return(0,r.useEffect)(()=>(document.body.style.overflow=s?"hidden":"",()=>{document.body.style.overflow=""}),[s]),s?(0,T.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,T.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),(0,T.jsxs)("div",{className:"\n        relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl",full:"max-w-full mx-4"}[n],"\n        rounded-2xl shadow-xl\n        max-h-[90vh] overflow-hidden\n        animate-fade-in\n        ").concat(d,"\n      "),style:{background:"rgba(20, 20, 35, 0.95)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(t||c)&&(0,T.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[t&&(0,T.jsx)("h2",{className:"text-lg font-bold",style:{color:"#00fff2"},children:t}),c&&(0,T.jsx)("button",{onClick:a,className:"p-2 rounded-xl transition-colors",style:{color:"#94a3b8"},children:(0,T.jsx)(S.A,{size:20})})]}),(0,T.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[60vh]",style:{color:"#e2e8f0"},children:l}),i&&(0,T.jsx)("div",{className:"flex items-center justify-end gap-3 p-4 sm:p-6",style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:i})]})]}):null},G={info:{container:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",icon:(0,T.jsx)(M,{className:"w-5 h-5 text-blue-500"}),title:"text-blue-800 dark:text-blue-300"},success:{container:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800",icon:(0,T.jsx)(N.A,{className:"w-5 h-5 text-emerald-500"}),title:"text-emerald-800 dark:text-emerald-300"},warning:{container:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",icon:(0,T.jsx)(H,{className:"w-5 h-5 text-amber-500"}),title:"text-amber-800 dark:text-amber-300"},danger:{container:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",icon:(0,T.jsx)(v.A,{className:"w-5 h-5 text-red-500"}),title:"text-red-800 dark:text-red-300"}},U=e=>{let{variant:s="info",title:a,children:t,className:r="",onClose:l}=e;const n=G[s];return(0,T.jsxs)("div",{className:"\n      flex gap-3 p-4 rounded-xl border\n      ".concat(n.container,"\n      ").concat(r,"\n    "),children:[n.icon,(0,T.jsxs)("div",{className:"flex-1",children:[a&&(0,T.jsx)("h4",{className:"font-semibold mb-1 ".concat(n.title),children:a}),(0,T.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t})]}),l&&(0,T.jsx)("button",{onClick:l,className:"self-start",children:(0,T.jsx)(S.A,{size:18,className:"text-gray-400 hover:text-gray-600"})})]})},V=e=>{let{size:s="md",className:a=""}=e;return(0,T.jsx)(A.A,{className:"animate-spin text-indigo-500 ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[s]," ").concat(a)})},W=e=>{let{icon:s,title:a,description:t,action:r,className:l=""}=e;return(0,T.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center ".concat(l),children:[s&&(0,T.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mb-4",style:{background:"rgba(0, 255, 242, 0.1)"},children:(0,T.jsx)(s,{className:"w-8 h-8",style:{color:"#00fff2"}})}),a&&(0,T.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:"#ffffff"},children:a}),t&&(0,T.jsx)("p",{className:"mb-6 max-w-sm",style:{color:"#94a3b8"},children:t}),r]})},K=e=>{let{title:s,subtitle:a,icon:t,action:r,className:l=""}=e;return(0,T.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 ".concat(l),children:[(0,T.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,T.jsx)("div",{className:"p-2.5 rounded-xl",style:{background:"rgba(0, 255, 242, 0.1)"},children:(0,T.jsx)(t,{className:"w-6 h-6",style:{color:"#00fff2"}})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",style:{color:"#ffffff"},children:s}),a&&(0,T.jsx)("p",{className:"text-sm mt-0.5",style:{color:"#94a3b8"},children:a})]})]}),r]})},Q=e=>{let{children:s,className:a=""}=e;return(0,T.jsx)("div",{className:"overflow-x-auto rounded-xl",style:{border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,T.jsx)("table",{className:"w-full ".concat(a),style:{background:"rgba(20, 20, 35, 0.8)"},children:s})})},X=e=>{let{children:s,className:a=""}=e;return(0,T.jsx)("thead",{className:a,style:{background:"rgba(0, 0, 0, 0.3)"},children:s})},Y=e=>{let{children:s,className:a=""}=e;return(0,T.jsx)("tbody",{className:a,style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:s})},$=e=>{let{children:s,className:a="",onClick:t}=e;return(0,T.jsx)("tr",{className:"\n      ".concat(t?"cursor-pointer":"","\n      ").concat(a,"\n    "),style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},onClick:t,onMouseEnter:e=>e.currentTarget.style.background="rgba(0, 255, 242, 0.05)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:s})},ee=e=>{let{children:s,className:a=""}=e;return(0,T.jsx)("th",{className:"\n    px-4 py-3\n    text-left text-xs font-semibold uppercase tracking-wider\n    ".concat(a,"\n  "),style:{color:"#00fff2"},children:s})},se=e=>{let{children:s,className:a=""}=e;return(0,T.jsx)("td",{className:"\n    px-4 py-3\n    text-sm\n    ".concat(a,"\n  "),style:{color:"#e2e8f0"},children:s})},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;const s="abcdefghjkmnpqrstuvwxyz23456789";let a="";for(let t=0;t<e;t++)a+=s.charAt(Math.floor(31*Math.random()));return a},te=(e,s)=>"".concat(e.toLowerCase(),"@").concat(s.toLowerCase(),".alchan"),re=()=>{const{userDoc:e,classmates:s}=(0,l.As)(),a=null===e||void 0===e?void 0:e.classCode,[o,C]=(0,r.useState)([]),[A,z]=(0,r.useState)(!0),[S,M]=(0,r.useState)(""),[H,L]=(0,r.useState)(new Set),[B,F]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1),[q,P]=(0,r.useState)(null),[G,re]=(0,r.useState)(""),[le,ne]=(0,r.useState)(""),[ce,ie]=(0,r.useState)(""),[de,oe]=(0,r.useState)(""),[xe,me]=(0,r.useState)([]),[he,ue]=(0,r.useState)(1),[ge,pe]=(0,r.useState)(!1),[be,ye]=(0,r.useState)({success:[],failed:[]}),[fe,je]=(0,r.useState)(null);(0,r.useEffect)(()=>{Ne()},[a,s]);const Ne=async()=>{if(a){z(!0);try{if(s&&s.length>0){const e=s.filter(e=>!e.isTeacher&&!e.isAdmin);C(e)}else{const e=(0,c.rJ)(n.db,"users"),s=(0,c.P)(e,(0,c._M)("classCode","==",a)),r=(await(0,c.GG)(s)).docs.map(e=>(0,t.A)({id:e.id},e.data())).filter(e=>!e.isTeacher&&!e.isAdmin);C(r)}}catch(e){console.error("Failed to load students:",e)}finally{z(!1)}}else z(!1)},ve=(0,r.useMemo)(()=>{if(!S)return o;const e=S.toLowerCase();return o.filter(s=>{var a,t,r;return(null===(a=s.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(t=s.studentNumber)||void 0===t?void 0:t.toString().includes(e))||(null===(r=s.email)||void 0===r?void 0:r.toLowerCase().includes(e))})},[o,S]),we=()=>{O(!1),ue(1),oe(""),me([]),ye({success:[],failed:[]})};return a?A?(0,T.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,T.jsx)(V,{size:"lg"})}):(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsx)(K,{title:"\ud559\uc0dd \uad00\ub9ac",subtitle:"\ud559\uae09 \ucf54\ub4dc: ".concat(a," | \ucd1d ").concat(o.length,"\uba85"),icon:d.A,action:(0,T.jsxs)("div",{className:"flex gap-2",children:[(0,T.jsx)(J,{variant:"outline",size:"sm",icon:x,onClick:()=>O(!0),children:"\uc77c\uad04 \ucd94\uac00"}),(0,T.jsx)(J,{size:"sm",icon:m,onClick:()=>F(!0),children:"\ud559\uc0dd \ucd94\uac00"})]})}),(0,T.jsx)(Z,{children:(0,T.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,T.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,T.jsx)(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,T.jsx)("input",{type:"text",value:S,onChange:e=>M(e.target.value),placeholder:"\uc774\ub984, \ubc88\ud638, \uc774\uba54\uc77c\ub85c \uac80\uc0c9...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,T.jsxs)("div",{className:"flex gap-2",children:[(0,T.jsx)(J,{variant:"ghost",size:"sm",icon:u.A,onClick:Ne,children:"\uc0c8\ub85c\uace0\uce68"}),H.size>0&&(0,T.jsxs)(J,{variant:"danger",size:"sm",icon:g.A,onClick:async()=>{if(0===H.size)return;if(!window.confirm("\uc120\ud0dd\ub41c ".concat(H.size,"\uba85\uc758 \ud559\uc0dd\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return;pe(!0);const e=(0,c.wP)(n.db);let s=0;for(const a of H)e.delete((0,c.H9)(n.db,"users",a)),s++;try{await e.commit();const t=(0,c.H9)(n.db,"classes",a),r=await(0,c.x7)(t);r.exists()&&await(0,c.mZ)(t,{studentCount:Math.max(0,(r.data().studentCount||0)-s)}),L(new Set),alert("".concat(s,"\uba85\uc758 \ud559\uc0dd\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),Ne()}catch(t){console.error("Failed to bulk delete:",t),alert("\uc77c\uad04 \uc0ad\uc81c \uc2e4\ud328: ".concat(t.message))}finally{pe(!1)}},children:["\uc120\ud0dd \uc0ad\uc81c (",H.size,")"]})]})]})}),0===ve.length?(0,T.jsx)(Z,{children:(0,T.jsx)(W,{icon:d.A,title:"\ud559\uc0dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",description:"\ud559\uc0dd\uc744 \ucd94\uac00\ud558\uac70\ub098 \uc77c\uad04 \uac00\uc838\uc624\uae30\ub97c \uc0ac\uc6a9\ud574\uc8fc\uc138\uc694.",action:(0,T.jsx)(J,{icon:m,onClick:()=>F(!0),children:"\ud559\uc0dd \ucd94\uac00"})})}):(0,T.jsx)(Z,{padding:"none",children:(0,T.jsxs)(Q,{children:[(0,T.jsx)(X,{children:(0,T.jsxs)($,{children:[(0,T.jsx)(ee,{className:"w-12",children:(0,T.jsx)("input",{type:"checkbox",checked:H.size===ve.length,onChange:e=>{e.target.checked?L(new Set(ve.map(e=>e.id))):L(new Set)},className:"w-4 h-4 rounded"})}),(0,T.jsx)(ee,{children:"\ubc88\ud638"}),(0,T.jsx)(ee,{children:"\uc774\ub984"}),(0,T.jsx)(ee,{children:"\uc774\uba54\uc77c"}),(0,T.jsx)(ee,{children:"\ud604\uae08"}),(0,T.jsx)(ee,{children:"\ucfe0\ud3f0"}),(0,T.jsx)(ee,{className:"text-right",children:"\uad00\ub9ac"})]})}),(0,T.jsx)(Y,{children:ve.map(e=>(0,T.jsxs)($,{children:[(0,T.jsx)(se,{children:(0,T.jsx)("input",{type:"checkbox",checked:H.has(e.id),onChange:s=>{const a=new Set(H);s.target.checked?a.add(e.id):a.delete(e.id),L(a)},className:"w-4 h-4 rounded"})}),(0,T.jsx)(se,{className:"font-medium",children:e.studentNumber||"-"}),(0,T.jsx)(se,{className:"font-semibold",children:e.name}),(0,T.jsx)(se,{className:"text-gray-500 text-sm",children:e.email}),(0,T.jsxs)(se,{children:[(e.cash||0).toLocaleString(),"\uc6d0"]}),(0,T.jsxs)(se,{children:[e.coupons||0,"\uc7a5"]}),(0,T.jsx)(se,{children:(0,T.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,T.jsx)("button",{onClick:()=>{P(e),E(!0)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,T.jsx)(p,{size:16,className:"text-gray-500"})}),(0,T.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("".concat(e.name," \ud559\uc0dd\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc8fc\uc758: \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){pe(!0);try{await(0,c.kd)((0,c.H9)(n.db,"users",e.id));const s=(0,c.H9)(n.db,"classes",a),t=await(0,c.x7)(s);t.exists()&&await(0,c.mZ)(s,{studentCount:Math.max(0,(t.data().studentCount||0)-1)}),alert("\ud559\uc0dd\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Ne()}catch(s){console.error("Failed to delete student:",s),alert("\uc0ad\uc81c \uc2e4\ud328: ".concat(s.message))}finally{pe(!1)}}})(e),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,T.jsx)(g.A,{size:16,className:"text-red-500"})})]})})]},e.id))})]})}),(0,T.jsx)(D,{isOpen:B,onClose:()=>F(!1),title:"\ud559\uc0dd \ucd94\uac00",size:"md",footer:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J,{variant:"secondary",onClick:()=>F(!1),children:"\ucde8\uc18c"}),(0,T.jsx)(J,{onClick:async()=>{if(!G.trim()||!le.trim())return void alert("\uc774\ub984\uacfc \ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");pe(!0);const s=ce||ae(),t=te(le,a);try{const r=(await(0,i.eJ)(n.j2,t,s)).user;await(0,i.r7)(r,{displayName:G.trim()});const l=await(0,c.x7)((0,c.H9)(n.db,"classes",a)),d=l.exists()?l.data().settings:{},o=d.initialCash||1e5,x=d.initialCoupons||10;await(0,c.BN)((0,c.H9)(n.db,"users",r.uid),{name:G.trim(),nickname:G.trim(),email:t,classCode:a,studentNumber:parseInt(le),isAdmin:!1,isSuperAdmin:!1,isTeacher:!1,cash:o,coupons:x,selectedJobIds:[],myContribution:0,createdAt:(0,c.O5)(),createdBy:null===e||void 0===e?void 0:e.id});const m=(0,c.H9)(n.db,"classes",a),h=await(0,c.x7)(m);h.exists()&&await(0,c.mZ)(m,{studentCount:(h.data().studentCount||0)+1}),alert("\ud559\uc0dd \ucd94\uac00 \uc644\ub8cc!\n\uc774\uba54\uc77c: ".concat(t,"\n\ube44\ubc00\ubc88\ud638: ").concat(s)),re(""),ne(""),ie(""),F(!1),Ne()}catch(r){console.error("Failed to add student:",r),alert("\ud559\uc0dd \ucd94\uac00 \uc2e4\ud328: ".concat(r.message))}finally{pe(!1)}},loading:ge,children:"\ucd94\uac00"})]}),children:(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsx)(_,{label:"\ud559\uc0dd \uc774\ub984",icon:b.A,value:G,onChange:e=>re(e.target.value),placeholder:"\ud64d\uae38\ub3d9"}),(0,T.jsx)(_,{label:"\ubc88\ud638 (\ud559\ubc88)",icon:y.A,type:"number",value:le,onChange:e=>ne(e.target.value),placeholder:"1"}),(0,T.jsx)(_,{label:"\ube44\ubc00\ubc88\ud638 (\ubbf8\uc785\ub825\uc2dc \uc790\ub3d9 \uc0dd\uc131)",icon:f.A,type:"text",value:ce,onChange:e=>ie(e.target.value),placeholder:"\uc790\ub3d9 \uc0dd\uc131\ub428"}),(0,T.jsxs)(U,{variant:"info",children:["\uc0dd\uc131\ub418\ub294 \uc774\uba54\uc77c: ",le?te(le,a):"\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"]})]})}),(0,T.jsxs)(D,{isOpen:R,onClose:we,title:"\ud559\uc0dd \uc77c\uad04 \ucd94\uac00",size:"xl",footer:1===he?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J,{variant:"secondary",onClick:we,children:"\ucde8\uc18c"}),(0,T.jsx)(J,{onClick:()=>{const e=de.trim().split("\n").filter(e=>e.trim()),s=[];for(const t of e){const e=t.split(/[\t,]/).map(e=>e.trim());if(e.length>=2){const[t,r]=e,l=e[2]||ae(),n=te(t,a);s.push({number:parseInt(t)||t,name:r,email:n,password:l,status:"pending"})}else 1===e.length&&e[0]&&s.push({number:s.length+1,name:e[0],email:te((s.length+1).toString(),a),password:ae(),status:"pending"})}me(s),ue(2)},disabled:!de.trim(),children:"\ub2e4\uc74c"})]}):2===he?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J,{variant:"secondary",onClick:()=>ue(1),children:"\uc774\uc804"}),(0,T.jsxs)(J,{onClick:async()=>{if(0===xe.length)return;pe(!0);const s=[],t=[],r=await(0,c.x7)((0,c.H9)(n.db,"classes",a)),l=r.exists()?r.data().settings:{},d=l.initialCash||1e5,o=l.initialCoupons||10;for(let m=0;m<xe.length;m++){const r=xe[m];try{const t=(await(0,i.eJ)(n.j2,r.email,r.password)).user;await(0,i.r7)(t,{displayName:r.name}),await(0,c.BN)((0,c.H9)(n.db,"users",t.uid),{name:r.name,nickname:r.name,email:r.email,classCode:a,studentNumber:r.number,isAdmin:!1,isSuperAdmin:!1,isTeacher:!1,cash:d,coupons:o,selectedJobIds:[],myContribution:0,createdAt:(0,c.O5)(),createdBy:null===e||void 0===e?void 0:e.id}),r.status="success",r.uid=t.uid,s.push(r)}catch(x){r.status="failed",r.error=x.message,t.push(r)}me([...xe])}if(s.length>0){const e=(0,c.H9)(n.db,"classes",a),t=await(0,c.x7)(e);t.exists()&&await(0,c.mZ)(e,{studentCount:(t.data().studentCount||0)+s.length})}ye({success:s,failed:t}),ue(3),pe(!1),Ne()},loading:ge,children:[xe.length,"\uba85 \uc0dd\uc131"]})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J,{variant:"secondary",onClick:()=>{const e=[["\ubc88\ud638","\uc774\ub984","\uc774\uba54\uc77c","\ube44\ubc00\ubc88\ud638","\uc0c1\ud0dc"]];[...be.success,...be.failed].forEach(s=>{e.push([s.number,s.name,s.email,s.password,"success"===s.status?"\uc131\uacf5":"\uc2e4\ud328: ".concat(s.error)])});const s=e.map(e=>e.join(",")).join("\n"),t=new Blob(["\ufeff"+s],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download="\ud559\uc0dd\ubaa9\ub85d_".concat(a,"_").concat((new Date).toISOString().split("T")[0],".csv"),l.click()},icon:j.A,children:"CSV \ub2e4\uc6b4\ub85c\ub4dc"}),(0,T.jsx)(J,{onClick:we,children:"\uc644\ub8cc"})]}),children:[1===he&&(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsxs)(U,{variant:"info",title:"\uc785\ub825 \ud615\uc2dd",children:["\uac01 \uc904\uc5d0 \ud559\uc0dd \uc815\ubcf4\ub97c \uc785\ub825\ud558\uc138\uc694.",(0,T.jsx)("br",{}),"\ud615\uc2dd: ",(0,T.jsx)("code",{children:"\ubc88\ud638, \uc774\ub984"})," \ub610\ub294 ",(0,T.jsx)("code",{children:"\ubc88\ud638, \uc774\ub984, \ube44\ubc00\ubc88\ud638"}),(0,T.jsx)("br",{}),"\uc608: 1, \ud64d\uae38\ub3d9 \ub610\ub294 1, \ud64d\uae38\ub3d9, password123"]}),(0,T.jsx)("textarea",{value:de,onChange:e=>oe(e.target.value),placeholder:"1, \ud64d\uae38\ub3d9\n2, \uae40\ucca0\uc218\n3, \uc774\uc601\ud76c, mypassword",className:"w-full h-64 px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),2===he&&(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsxs)(U,{variant:"warning",children:["\uc544\ub798 ",xe.length,"\uba85\uc758 \ud559\uc0dd \uacc4\uc815\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4. \ud655\uc778 \ud6c4 \uc9c4\ud589\ud574\uc8fc\uc138\uc694."]}),(0,T.jsx)("div",{className:"max-h-80 overflow-y-auto rounded-xl border border-gray-200 dark:border-gray-700",children:(0,T.jsxs)("table",{className:"w-full text-sm",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\ubc88\ud638"}),(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\uc774\ub984"}),(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\uc774\uba54\uc77c"}),(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\ube44\ubc00\ubc88\ud638"})]})}),(0,T.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:xe.map((e,s)=>(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"px-4 py-2",children:e.number}),(0,T.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,T.jsx)("td",{className:"px-4 py-2 text-gray-500",children:e.email}),(0,T.jsx)("td",{className:"px-4 py-2 font-mono",children:e.password})]},s))})]})})]}),3===he&&(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,T.jsx)("div",{style:{background:"rgba(16, 185, 129, 0.15)",border:"2px solid rgba(16, 185, 129, 0.3)",borderRadius:"16px",padding:"20px"},children:(0,T.jsxs)("div",{className:"flex items-center gap-3",children:[(0,T.jsx)(N.A,{className:"w-8 h-8 text-emerald-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:be.success.length}),(0,T.jsx)("p",{className:"text-sm text-emerald-300",children:"\uc131\uacf5"})]})]})}),(0,T.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.3)",borderRadius:"16px",padding:"20px"},children:(0,T.jsxs)("div",{className:"flex items-center gap-3",children:[(0,T.jsx)(v.A,{className:"w-8 h-8 text-red-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-2xl font-bold text-red-400",children:be.failed.length}),(0,T.jsx)("p",{className:"text-sm text-red-300",children:"\uc2e4\ud328"})]})]})})]}),be.success.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"font-semibold text-emerald-700 mb-2",children:"\uc0dd\uc131\ub41c \uacc4\uc815"}),(0,T.jsx)("div",{className:"max-h-48 overflow-y-auto rounded-xl border border-gray-200 dark:border-gray-700",children:(0,T.jsxs)("table",{className:"w-full text-sm",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\uc774\ub984"}),(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\uc774\uba54\uc77c"}),(0,T.jsx)("th",{className:"px-4 py-2 text-left",children:"\ube44\ubc00\ubc88\ud638"}),(0,T.jsx)("th",{className:"px-4 py-2 w-10"})]})}),(0,T.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:be.success.map((e,s)=>(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,T.jsx)("td",{className:"px-4 py-2 text-gray-500",children:e.email}),(0,T.jsx)("td",{className:"px-4 py-2 font-mono",children:e.password}),(0,T.jsx)("td",{className:"px-4 py-2",children:(0,T.jsx)("button",{onClick:()=>{return a="".concat(e.email,"\t").concat(e.password),t=s,navigator.clipboard.writeText(a),je(t),void setTimeout(()=>je(null),2e3);var a,t},className:"p-1 hover:bg-gray-100 rounded",children:fe===s?(0,T.jsx)(w.A,{size:16,className:"text-emerald-500"}):(0,T.jsx)(k,{size:16,className:"text-gray-400"})})})]},s))})]})})]}),be.failed.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"font-semibold text-red-700 mb-2",children:"\uc2e4\ud328\ud55c \ud56d\ubaa9"}),(0,T.jsx)("div",{className:"space-y-2",children:be.failed.map((e,s)=>(0,T.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,T.jsxs)("p",{className:"font-medium",children:[e.name," (",e.email,")"]}),(0,T.jsx)("p",{className:"text-sm text-red-600",children:e.error})]},s))})]})]})]}),(0,T.jsx)(D,{isOpen:I,onClose:()=>{E(!1),P(null)},title:"\ud559\uc0dd \uc815\ubcf4 \uc218\uc815",size:"md",footer:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(J,{variant:"secondary",onClick:()=>E(!1),children:"\ucde8\uc18c"}),(0,T.jsx)(J,{onClick:async()=>{if(q){pe(!0);try{await(0,c.mZ)((0,c.H9)(n.db,"users",q.id),{name:q.name,nickname:q.name,studentNumber:q.studentNumber}),E(!1),P(null),Ne()}catch(e){alert("\uc218\uc815 \uc2e4\ud328: ".concat(e.message))}finally{pe(!1)}}},loading:ge,children:"\uc800\uc7a5"})]}),children:q&&(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsx)(_,{label:"\uc774\ub984",value:q.name,onChange:e=>P((0,t.A)((0,t.A)({},q),{},{name:e.target.value}))}),(0,T.jsx)(_,{label:"\ubc88\ud638",type:"number",value:q.studentNumber||"",onChange:e=>P((0,t.A)((0,t.A)({},q),{},{studentNumber:parseInt(e.target.value)}))}),(0,T.jsxs)("div",{className:"space-y-1.5",children:[(0,T.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc774\uba54\uc77c (\uc77d\uae30 \uc804\uc6a9)"}),(0,T.jsx)("input",{type:"text",value:q.email,disabled:!0,className:"w-full px-4 py-2.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-500"})]})]})})]}):(0,T.jsx)(W,{icon:d.A,title:"\ud559\uae09 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4",description:"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})}}}]);
//# sourceMappingURL=438.5eb0ec3e.chunk.js.map