{"version":3,"file":"static/js/367.95668c1f.chunk.js","mappings":"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","sources":["components/LoginWarning.js","components/CouponGoal.js","components/modals/DonateCouponModal.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","pages/coupon/CouponGoalPage.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h3>\r\n      <p>ì•„ì´í…œì„ êµ¬ë§¤í•˜ê±°ë‚˜ ì‚¬ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/CouponGoal.js\r\nimport React from \"react\";\r\n\r\n// ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ì»´í¬ë„ŒíŠ¸\r\nconst CircularProgress = ({ percentage, size = 140, strokeWidth = 12, color, children }) => {\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = radius * 2 * Math.PI;\r\n  const offset = circumference - (percentage / 100) * circumference;\r\n\r\n  return (\r\n    <div className=\"relative\" style={{ width: size, height: size }}>\r\n      <svg width={size} height={size} style={{ transform: \"rotate(-90deg)\" }}>\r\n        {/* ë°°ê²½ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke=\"rgba(255, 255, 255, 0.1)\"\r\n          strokeWidth={strokeWidth}\r\n        />\r\n        {/* í”„ë¡œê·¸ë ˆìŠ¤ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke={color}\r\n          strokeWidth={strokeWidth}\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={offset}\r\n          strokeLinecap=\"round\"\r\n          style={{ transition: \"stroke-dashoffset 0.5s ease\" }}\r\n        />\r\n      </svg>\r\n      {/* ì¤‘ì•™ ì½˜í…ì¸  */}\r\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function CouponGoal({\r\n  classCouponGoal,\r\n  goalProgress,\r\n  myContribution,\r\n  currentCoupons,\r\n  couponValue,\r\n  setShowDonateModal,\r\n  setShowSellCouponModal,\r\n  setShowDonationHistoryModal,\r\n  setShowGiftCouponModal,\r\n  goalAchieved,\r\n  resetGoalButton,\r\n  isResettingGoal,\r\n}) {\r\n  const validClassCouponGoal =\r\n    typeof classCouponGoal === \"number\" && classCouponGoal > 0\r\n      ? classCouponGoal\r\n      : 1;\r\n\r\n  const goalPercentage = Math.min(\r\n    Math.round((goalProgress / validClassCouponGoal) * 100),\r\n    100\r\n  );\r\n\r\n  const myContributionPercentage =\r\n    validClassCouponGoal > 0\r\n      ? Math.min(Math.round((myContribution / validClassCouponGoal) * 100), 100)\r\n      : 0;\r\n\r\n  const mainColor = goalAchieved ? \"#10b981\" : \"#6366f1\";\r\n\r\n  return (\r\n    <div\r\n      className=\"class-coupon-goal p-6 rounded-2xl relative overflow-hidden\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        boxShadow: goalAchieved\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.25)\"\r\n          : \"0 4px 20px rgba(0, 255, 242, 0.15)\",\r\n        border: goalAchieved ? \"2px solid #10b981\" : \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        backdropFilter: \"blur(10px)\",\r\n      }}\r\n    >\r\n      {/* ë°°ê²½ ì¥ì‹ */}\r\n      <div\r\n        className=\"absolute -top-12 -right-12 w-36 h-36 rounded-full\"\r\n        style={{\r\n          background: goalAchieved\r\n            ? \"radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%)\"\r\n            : \"radial-gradient(circle, rgba(99,102,241,0.1) 0%, transparent 70%)\",\r\n        }}\r\n      />\r\n\r\n      {/* í—¤ë” */}\r\n      <div className=\"flex justify-between items-center mb-5\">\r\n        <div className=\"flex items-center gap-2.5\">\r\n          <span className=\"text-3xl\">ğŸ¯</span>\r\n          <h3\r\n            className=\"text-xl font-bold m-0\"\r\n            style={{\r\n              color: \"#e8e8ff\",\r\n              textShadow: \"0 0 5px rgba(0, 255, 242, 0.5)\",\r\n            }}\r\n          >\r\n            í•™ê¸‰ ì¿ í° ëª©í‘œ\r\n          </h3>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 items-center\">\r\n          {goalAchieved && (\r\n            <span\r\n              className=\"text-white px-3.5 py-1.5 rounded-2xl text-sm font-bold\"\r\n              style={{\r\n                background: \"linear-gradient(135deg, #10b981, #059669)\",\r\n                boxShadow: \"0 2px 8px rgba(16, 185, 129, 0.4)\",\r\n                animation: \"pulse 2s infinite\",\r\n              }}\r\n            >\r\n              ğŸ‰ ëª©í‘œ ë‹¬ì„±!\r\n            </span>\r\n          )}\r\n          {resetGoalButton && (\r\n            <button\r\n              onClick={resetGoalButton}\r\n              disabled={isResettingGoal}\r\n              className=\"text-white border-none rounded-xl px-3 py-1.5 text-xs font-semibold\"\r\n              style={{\r\n                backgroundColor: isResettingGoal ? \"#9ca3af\" : \"#ef4444\",\r\n                cursor: isResettingGoal ? \"not-allowed\" : \"pointer\",\r\n                opacity: isResettingGoal ? 0.7 : 1,\r\n              }}\r\n            >\r\n              {isResettingGoal ? \"ì´ˆê¸°í™” ì¤‘...\" : \"ì´ˆê¸°í™”\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ë©”ì¸ í”„ë¡œê·¸ë ˆìŠ¤ ì˜ì—­ */}\r\n      <div className=\"flex items-center justify-center gap-7 py-5 flex-wrap\">\r\n        {/* í•™ê¸‰ ëª©í‘œ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div className=\"text-center\">\r\n          <CircularProgress\r\n            percentage={goalPercentage}\r\n            size={150}\r\n            strokeWidth={14}\r\n            color={mainColor}\r\n          >\r\n            <div className=\"text-3xl font-extrabold\" style={{ color: mainColor }}>\r\n              {goalPercentage}%\r\n            </div>\r\n            <div className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}>\r\n              ë‹¬ì„±ë¥ \r\n            </div>\r\n          </CircularProgress>\r\n          <div className=\"mt-3\">\r\n            <div className=\"text-2xl font-extrabold\" style={{ color: \"#e8e8ff\" }}>\r\n              {(goalProgress || 0).toLocaleString()}\r\n              <span className=\"text-sm font-medium\" style={{ color: \"#a0a0c0\" }}> / {validClassCouponGoal.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"text-xs mt-0.5\" style={{ color: \"#6b7280\" }}>í•™ê¸‰ ì „ì²´ ê¸°ë¶€ëŸ‰</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ê¸°ì—¬ë„ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div className=\"text-center\">\r\n          <CircularProgress\r\n            percentage={myContributionPercentage}\r\n            size={120}\r\n            strokeWidth={10}\r\n            color=\"#f59e0b\"\r\n          >\r\n            <div className=\"text-2xl font-extrabold\" style={{ color: \"#f59e0b\" }}>\r\n              {myContributionPercentage}%\r\n            </div>\r\n            <div className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}>\r\n              ë‚´ ê¸°ì—¬\r\n            </div>\r\n          </CircularProgress>\r\n          <div className=\"mt-3\">\r\n            <div className=\"text-lg font-bold\" style={{ color: \"#e8e8ff\" }}>\r\n              {(myContribution || 0).toLocaleString()}\r\n              <span className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}> ì¿ í°</span>\r\n            </div>\r\n            <div className=\"text-xs mt-0.5\" style={{ color: \"#6b7280\" }}>ë‚´ê°€ ê¸°ë¶€í•œ ì¿ í°</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ë³´ìœ ëŸ‰ ì¹´ë“œ */}\r\n        <div\r\n          className=\"rounded-2xl p-5 text-center min-w-[130px]\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.1)\",\r\n            border: \"1px solid rgba(251, 191, 36, 0.3)\",\r\n          }}\r\n        >\r\n          <div className=\"text-3xl mb-2\">ğŸ«</div>\r\n          <div className=\"text-3xl font-extrabold\" style={{ color: \"#fbbf24\", textShadow: \"0 0 10px rgba(251, 191, 36, 0.3)\" }}>\r\n            {(currentCoupons || 0).toLocaleString()}\r\n          </div>\r\n          <div className=\"text-xs font-semibold mt-1\" style={{ color: \"#fcd34d\" }}>\r\n            ë³´ìœ  ì¿ í°\r\n          </div>\r\n          <div className=\"text-xs mt-2 px-2 py-1 rounded-lg\" style={{ color: \"#fcd34d\", background: \"rgba(0,0,0,0.3)\" }}>\r\n            1ì¿ í° = {typeof couponValue === \"number\" ? couponValue.toLocaleString() : \"0\"}ì›\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}\r\n      <div className=\"grid grid-cols-4 gap-2 mt-5\">\r\n        <button\r\n          onClick={() => setShowDonateModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(99, 102, 241, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ’°</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° ì‘ëª¨</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowSellCouponModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f87171 0%, #ef4444 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(239, 68, 68, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ’µ</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° íŒë§¤</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowGiftCouponModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #34d399 0%, #10b981 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(16, 185, 129, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° ì„ ë¬¼</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowDonationHistoryModal(true)}\r\n          className=\"rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #374151 0%, #1f2937 100%)\",\r\n            border: \"1px solid #4b5563\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ“‹</span>\r\n          <span className=\"text-sm font-bold\" style={{ color: \"#4b5563\" }}>ê¸°ë¶€ ë‚´ì—­</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì¿ í° ëª©í‘œ ê¸€ì”¨ í¬ê¸° ì „ì²´ í™•ëŒ€ */}\r\n      <style>{`\r\n        .class-coupon-goal { font-size: 1.05rem; }\r\n        .class-coupon-goal h3 { font-size: 1.3rem !important; }\r\n        .class-coupon-goal .text-xs { font-size: 0.85rem !important; }\r\n        .class-coupon-goal .text-sm { font-size: 0.95rem !important; }\r\n        .class-coupon-goal .text-2xl { font-size: 1.6rem !important; }\r\n        .class-coupon-goal .text-3xl { font-size: 2rem !important; }\r\n      `}</style>\r\n\r\n      {/* ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ */}\r\n      <style>{`\r\n        @keyframes pulse {\r\n          0%, 100% { transform: scale(1); }\r\n          50% { transform: scale(1.05); }\r\n        }\r\n        .class-coupon-goal button:hover {\r\n          transform: translateY(-2px);\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","// src/DonateCouponModal.js\r\n// ğŸ”¥ ì„±ëŠ¥ ìµœì í™”: React.memo ì ìš©\r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, // ğŸ”¥ userId, currentGoalIdëŠ” ë” ì´ìƒ í•„ìš” ì—†ìŒ\r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ì˜¬ë°”ë¥¸ ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"ë³´ìœ  ì¿ í°ë³´ë‹¤ ë§ì´ ê¸°ë¶€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonateëŠ” MyAssets.jsì˜ handleDonateCoupon í•¨ìˆ˜\r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        // ğŸ”¥ ì„±ê³µ ì‹œ ëª¨ë‹¬ì„ ë‹«ê³  ìƒíƒœë¥¼ ì´ˆê¸°í™”\r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal] ê¸°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:\", error);\r\n      alert(\"ê¸°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* í—¤ë” */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n            ì¿ í° ê¸°ë¶€í•˜ê¸°\r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"ë‹«ê¸°\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/* ë‚´ìš© */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                í˜„ì¬ ë³´ìœ  ì¿ í°\r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} ê°œ\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n              ê¸°ë¶€í•  ì¿ í° ìˆ˜ëŸ‰\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"ê¸°ë¶€í•  ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n              ê¸°ë¶€ ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"ê¸°ë¶€ì™€ í•¨ê»˜ ì „í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n            />\r\n          </div>\r\n\r\n          {/* ì˜ˆìƒ ê¸°ë¶€ì•¡ í‘œì‹œ */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                  ê¸°ë¶€ ì˜ˆì • ì¿ í°\r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} ê°œ\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* í‘¸í„° */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \"ê¸°ë¶€ ì¤‘...\" : \"ê¸°ë¶€í•˜ê¸°\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/SellCouponModal.js\r\n// ğŸ”¥ ì„±ëŠ¥ ìµœì í™”: React.memo ì ìš©\r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard ë˜ëŠ” MyAssetsë¡œë¶€í„° ì‹¤ì œ íŒë§¤ ì²˜ë¦¬ í•¨ìˆ˜ë¥¼ propsë¡œ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.\r\n  // ì´ì „ ë‹µë³€ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´, Dashboard.jsì—ì„œëŠ” <SellCouponModal SellCoupon={handleSellCoupon} ... /> í˜•íƒœë¡œ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.\r\n  // ì´ prop ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\r\n  SellCoupon, // ì‹¤ì œ íŒë§¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ (Dashboard ë˜ëŠ” MyAssets ì—ì„œ ì „ë‹¬ë°›ìŒ)\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ëª¨ë‹¬ì´ í‘œì‹œë˜ì§€ ì•Šì„ ë•ŒëŠ” ë Œë”ë§í•˜ì§€ ì•ŠìŒ\r\n  if (!showSellCouponModal) return null;\r\n\r\n  // íŒë§¤ ê¸ˆì•¡ ê³„ì‚°\r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit í•¨ìˆ˜ì—ì„œ Dashboardì˜ handleSellCoupon (propsë¡œ ì „ë‹¬ë°›ì€ SellCoupon)ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    // ì˜¤ë¥˜ ë©”ì‹œì§€ ì´ˆê¸°í™”\r\n    setError(\"\");\r\n\r\n    // ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€\r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"ìœ íš¨í•œ ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"ë³´ìœ í•œ ì¿ í°ë³´ë‹¤ ë§ì€ ìˆ˜ëŸ‰ì„ íŒë§¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon propì´ í•¨ìˆ˜ì¸ì§€ í™•ì¸\r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"íŒë§¤ ì²˜ë¦¬ í•¨ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      // ì‚¬ìš©ìì—ê²Œ ì´ ì˜¤ë¥˜ë¥¼ ì§ì ‘ ì•Œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\r\n      // alert(\"íŒë§¤ ì²˜ë¦¬ ì¤‘ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard ë˜ëŠ” MyAssetsë¡œë¶€í„° ì „ë‹¬ë°›ì€ SellCoupon í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\r\n      // Dashboard.jsì˜ handleSellCoupon í•¨ìˆ˜ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ sellAmount ìƒíƒœë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ,\r\n      // í•´ë‹¹ í•¨ìˆ˜ëŠ” ë³„ë„ì˜ ì¸ì ì—†ì´ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (Dashboard.js êµ¬í˜„ì— ë”°ë¦„).\r\n      await SellCoupon(); // Dashboardì˜ handleSellCoupon ë˜ëŠ” MyAssetsì˜ handleSellCoupon í˜¸ì¶œ\r\n\r\n      // íŒë§¤ ì„±ê³µ í›„ì˜ ì²˜ë¦¬ëŠ” Dashboard.js ë˜ëŠ” MyAssets.jsì˜ handleSellCoupon í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ\r\n      // ëª¨ë‹¬ì„ ë‹«ê³ , sellAmountë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ê²ƒìœ¼ë¡œ ê¸°ëŒ€í•©ë‹ˆë‹¤.\r\n      // (ì˜ˆ: setShowSellCouponModal(false); setSellAmount(\"\"); ë“±ì„ í•´ë‹¹ í•¨ìˆ˜ ë‚´ì—ì„œ í˜¸ì¶œ)\r\n      // í˜„ì¬ Dashboard.jsì˜ handleSellCoupon í•¨ìˆ˜ëŠ” ì„±ê³µ ì‹œ ëª¨ë‹¬ì„ ë‹«ê³  sellAmountë¥¼ ì´ˆê¸°í™”í•˜ë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\r\n    } catch (err) {\r\n      logger.error(\"íŒë§¤ ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜:\", err);\r\n      // err.messageê°€ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê¸°ì— ì ì ˆí•œ ë‚´ìš©ì¸ì§€ í™•ì¸ í•„ìš”\r\n      setError(\r\n        err.message || \"íŒë§¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ isProcessing ìƒíƒœëŠ” falseë¡œ ë³€ê²½\r\n      // ì„±ê³µ ì‹œ ëª¨ë‹¬ ë‹«ê¸° ë° ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”ëŠ” SellCoupon í•¨ìˆ˜ê°€ ë‹´ë‹¹\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  // íŒë§¤ ë²„íŠ¼ í™œì„±í™” ì¡°ê±´\r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n          ì¿ í° íŒë§¤í•˜ê¸°\r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n          ì¿ í°ì„ íŒë§¤í•˜ê³  í˜„ê¸ˆìœ¼ë¡œ êµí™˜í•˜ì„¸ìš”.\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>í˜„ì¬ ë³´ìœ  ì¿ í°:</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1ì¿ í° íŒë§¤ê°€:</span>\r\n          <strong>{couponValue.toLocaleString()}ì›</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n              íŒë§¤í•  ì¿ í° ìˆ˜:\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} // ìµœëŒ€ê°’ ì„¤ì •\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5 ê¸°ë³¸ ìœ íš¨ì„± ê²€ì‚¬\r\n            />\r\n          </div>\r\n\r\n          {/* ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\">âš ï¸ {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span>ì˜ˆìƒ ìˆ˜ë ¹ì•¡:</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}ì›\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              ì·¨ì†Œ\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \"ì²˜ë¦¬ ì¤‘...\" : \"íŒë§¤í•˜ê¸°\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","// ğŸ”¥ ì„±ëŠ¥ ìµœì í™”: React.memo ì ìš©\r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, // ì´ í•¨ìˆ˜ëŠ” Dashboardì—ì„œ ì „ë‹¬ë˜ì–´ì•¼ í•¨\r\n  giftAmount,\r\n  setGiftAmount, // ì´ í•¨ìˆ˜ê°€ Dashboardì—ì„œ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ì–´ì•¼ í•¨\r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // --- ì˜¤ë¥˜ ë°œìƒ ì§€ì  ---\r\n    // setGiftAmountì™€ setGiftRecipientê°€ í•¨ìˆ˜ í˜•íƒœë¡œ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë˜ì—ˆëŠ”ì§€ í™•ì¸ í•„ìš”\r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); // ëª¨ë‹¬ ë‹«ì„ ë•Œ ìƒíƒœ ì´ˆê¸°í™”\r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°\r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} // ëª¨ë‹¬ ë‚´ë¶€ í´ë¦­ ì‹œ ë‹«í˜ ë°©ì§€\r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\">ì¿ í° ì„ ë¬¼í•˜ê¸°</h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n            í˜„ì¬ ë³´ìœ  ì¿ í°: <strong>{currentCoupons}ê°œ</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n            ë°›ëŠ” ì‚¬ëŒ\r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange í•¸ë“¤ëŸ¬ì—ì„œ setGiftRecipientê°€ í•¨ìˆ˜ì¸ì§€ í™•ì¸\r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">ë°›ëŠ” ë¶„ì„ ì„ íƒí•˜ì„¸ìš”</option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n            ì„ ë¬¼í•  ì¿ í° ìˆ˜ëŸ‰\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange í•¸ë“¤ëŸ¬ì—ì„œ setGiftAmountê°€ í•¨ìˆ˜ì¸ì§€ í™•ì¸\r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"ì„ ë¬¼í•  ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            ì„ ë¬¼í•˜ê¸°\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n// ğŸ”¥ ì„±ëŠ¥ ìµœì í™”: React.memo ì ìš©\r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  // ìŠ¤íƒ€ì¼ì€ Tailwind í´ë˜ìŠ¤ë¡œ ë³€í™˜ë¨\r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal] ë°ì´í„° ì²˜ë¦¬ ì‹œì‘:\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"í•™ê¸‰ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ì–´ ê¸°ë¶€ ë‚´ì—­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          // ëª¨ë“  ê¸°ë¶€ ê¸°ë¡ì„ ì²˜ë¦¬í•˜ì—¬ í•™ìƒë³„ ê¸°ë¶€ì•¡ê³¼ ì´ ê¸°ë¶€ì•¡ì„ ê³„ì‚°\r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì\";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              // ì´ë¦„ ì—…ë°ì´íŠ¸ (ê°€ì¥ ìµœì‹  ì´ë¦„ ì‚¬ìš©)\r\n              if (donorName && donorName !== \"ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì\") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal] ê¸°ë¶€ ì§‘ê³„:\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          // ğŸ”¥ ìˆ˜ì •: students ë°°ì—´ì˜ ëª¨ë“  í•™ìƒ í¬í•¨ + donationsì—ë§Œ ìˆëŠ” ì‚¬ìš©ìë„ í¬í•¨\r\n          const allStudentIds = new Set();\r\n\r\n          // students ë°°ì—´ì˜ ëª¨ë“  í•™ìƒ ì¶”ê°€\r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donationsì—ë§Œ ìˆëŠ” ì‚¬ìš©ì ì¶”ê°€\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          // í•™ìƒ ì •ë³´ë¥¼ ë‹´ì„ Map ìƒì„±\r\n          const studentInfoMap = new Map();\r\n\r\n          // students ë°°ì—´ì—ì„œ í•™ìƒ ì •ë³´ ì¶”ê°€\r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"ì•Œ ìˆ˜ ì—†ëŠ” í•™ìƒ\";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donationsì—ì„œ ì´ë¦„ ì •ë³´ ì¶”ê°€ (ìš°ì„ ìˆœìœ„: donationsì˜ userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì\") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          // ëª¨ë“  í•™ìƒ ëª©ë¡ ìƒì„± (ê¸°ë¶€ 0ì› í•™ìƒ í¬í•¨)\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"ì•Œ ìˆ˜ ì—†ëŠ” í•™ìƒ\";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            // ì´ë¦„ ê¸°ì¤€ìœ¼ë¡œ ê°€ë‚˜ë‹¤ìˆœ ì •ë ¬ (ã„±, ã„´, ã„· ìˆœ)\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal] ìµœì¢… í•™ìƒ ëª©ë¡:\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal] ê¸°ë¶€ ë‚´ì—­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:\", err);\r\n          setError(\"ê¸°ë¶€ ë‚´ì—­ì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n            ìš°ë¦¬ í•™ê¸‰ ê¸°ë¶€ í˜„í™©\r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"ë‹«ê¸°\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                ë‚´ ëˆ„ì  ê¸°ë¶€ì•¡\r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} ì¿ í°\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                ìš°ë¦¬ í•™ê¸‰ ì´ ê¸°ë¶€ì•¡\r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} ì¿ í°\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n              ê¸°ë¶€ í˜„í™©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}>í•™ìƒ ì´ë¦„</th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                        ëˆ„ì  ê¸°ë¶€ ì¿ í°\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              ë‚˜\r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} ì¿ í°\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}>ğŸ‘¥</div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                    í•™ê¸‰ í•™ìƒ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ê±°ë‚˜ ë“±ë¡ëœ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤\r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                    ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì—¬ í•™ê¸‰ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            ë‹«ê¸°\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/pages/coupon/CouponGoalPage.js - ì¿ í° ëª©í‘œ ì „ìš© í˜ì´ì§€\r\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  runTransaction,\r\n} from \"../../firebase\";\r\nimport CouponGoal from \"../../components/CouponGoal\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { safeTimestampToDate, getCachedFirestoreData, setCachedFirestoreData } from '../../utils/firestoreHelpers';\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nexport default function CouponGoalPage() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users,\r\n    classmates,\r\n    allClassMembers,\r\n    loading: authLoading,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false);\r\n  const loadGoalDataRef = useRef(null); // ğŸ”¥ loadGoalData í•¨ìˆ˜ë¥¼ ì €ì¥í•  ref\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n\r\n  const donateCouponFunction = useMemo(() => httpsCallable(functions, 'donateCoupon'), []);\r\n  const sellCouponFunction = useMemo(() => httpsCallable(functions, 'sellCoupon'), []);\r\n  const giftCouponFunction = useMemo(() => httpsCallable(functions, 'giftCoupon'), []);\r\n\r\n  const CACHE_DURATION = 5 * 60 * 1000;\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  // ğŸ”¥ [ë²„ê·¸ ìˆ˜ì •] Firestoreì—ì„œ ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ\r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[CouponGoalPage] ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] = useState(false);\r\n\r\n  // ğŸ”¥ [ìµœì í™”] ë°ì´í„° ì²˜ë¦¬ í—¬í¼ í•¨ìˆ˜ (ìºì‹œ/Firestore ê³µìš©)\r\n  const processGoalData = useCallback((goalData) => {\r\n    setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n    setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n    // ê¸°ë¶€ ë‚´ì—­ ì²˜ë¦¬ - timestamp ì¼ê´€ì„± ìœ ì§€\r\n    const donations = Array.isArray(goalData.donations)\r\n      ? goalData.donations.map((donation) => {\r\n        let processedTimestamp;\r\n        if (donation.timestamp && donation.timestamp.toDate) {\r\n          processedTimestamp = donation.timestamp.toDate().toISOString();\r\n        } else if (donation.timestamp && donation.timestamp.seconds) {\r\n          processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n        } else if (donation.timestampISO) {\r\n          processedTimestamp = donation.timestampISO;\r\n        } else if (typeof donation.timestamp === 'string') {\r\n          processedTimestamp = donation.timestamp;\r\n        } else {\r\n          processedTimestamp = new Date().toISOString();\r\n        }\r\n\r\n        return {\r\n          ...donation,\r\n          amount: Number(donation.amount) || 0,\r\n          timestamp: processedTimestamp,\r\n          userId: donation.userId || '',\r\n          userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n          message: donation.message || '',\r\n          classCode: donation.classCode || currentUserClassCode,\r\n        };\r\n      })\r\n      : [];\r\n\r\n    setGoalDonations(donations);\r\n\r\n    // ë‚´ ê¸°ì—¬ë„ ê³„ì‚°\r\n    const myDonations = donations.filter(d => d.userId === userId);\r\n    const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n    setMyContribution(myTotal);\r\n  }, [currentUserClassCode, userId]);\r\n\r\n  // ğŸ”¥ loadGoalData í•¨ìˆ˜ - useCallback ì œê±°í•˜ê³  ì¼ë°˜ í•¨ìˆ˜ë¡œ ë³€ê²½\r\n  const loadGoalData = async (forceRefresh = false) => {\r\n    if (!userId || !currentUserClassCode || !currentGoalId) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (loadingRef.current) {\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // ğŸ”¥ [ìµœì í™”] ìºì‹œ ìš°ì„  ë¡œë“œ - Firestore ì½ê¸° ì ˆê°\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      if (!forceRefresh) {\r\n        const cachedData = getCachedFirestoreData(cacheKey, userId, CACHE_DURATION);\r\n        if (cachedData) {\r\n          processGoalData(cachedData);\r\n          setAssetsLoading(false);\r\n          loadingRef.current = false;\r\n          return;\r\n        }\r\n      }\r\n\r\n      // ğŸ”¥ Firestoreì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        // ğŸ”¥ [ìµœì í™”] ê³µìš© í—¬í¼ í•¨ìˆ˜ë¡œ ì²˜ë¦¬\r\n        processGoalData(goalData);\r\n\r\n        // ğŸ”¥ ìºì‹œì— ì €ì¥\r\n        const cacheKey = `goal_${currentGoalId}`;\r\n        setCachedFirestoreData(cacheKey, userId, goalData);\r\n      } else {\r\n        logger.warn('[CouponGoalPage] ëª©í‘œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');\r\n      }\r\n    } catch (error) {\r\n      logger.error('[CouponGoalPage] ëª©í‘œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ refì— loadGoalData í•¨ìˆ˜ ì €ì¥\r\n  loadGoalDataRef.current = loadGoalData;\r\n\r\n  // ğŸ”¥ ì´ˆê¸° ë¡œë“œ useEffect - loadGoalDataRef ì‚¬ìš©\r\n  useEffect(() => {\r\n    if (!authLoading && user && currentUserClassCode && currentGoalId) {\r\n      if (loadGoalDataRef.current) {\r\n        loadGoalDataRef.current();\r\n      }\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user, currentUserClassCode, currentGoalId]);\r\n\r\n  // ğŸ”¥ [ì œê±°] userDoc.myContribution ì‚¬ìš© ì¤‘ë‹¨ - donations ë°°ì—´ì—ì„œ ì§ì ‘ ê³„ì‚°\r\n  // useEffect(() => {\r\n  //   if (userDoc) {\r\n  //     setMyContribution(userDoc.myContribution || 0);\r\n  //   }\r\n  // }, [userDoc]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode || !userDoc) {\r\n      alert(\"ì‚¬ìš©ì ë˜ëŠ” í•™ê¸‰ ì •ë³´ê°€ ì—†ì–´ ê¸°ë¶€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return false;\r\n    }\r\n\r\n    // ğŸ”¥ ì¿ í° ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalProgress(prev => prev + donationAmount);\r\n\r\n    // ğŸ”¥ ë¡œë”© ìƒíƒœ í‘œì‹œ\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // Call the server function in the background\r\n      const result = await donateCouponFunction({ amount: donationAmount, message: memo });\r\n\r\n      // ğŸ”¥ ìºì‹œ ë¬´íš¨í™”\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      // ğŸ”¥ ì¦‰ì‹œ ìµœì‹  ë°ì´í„° ë¡œë“œ\r\n      loadingRef.current = false;\r\n      if (loadGoalDataRef.current) {\r\n        await loadGoalDataRef.current();\r\n      }\r\n\r\n      alert(`${donationAmount} ì¿ í° ê¸°ë¶€ ì™„ë£Œ!`);\r\n      setShowDonateModal(false);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('[CouponGoalPage] ê¸°ë¶€ ì˜¤ë¥˜ (ìƒì„¸):', {\r\n        error,\r\n        message: error.message,\r\n        code: error.code,\r\n        details: error.details,\r\n        stack: error.stack\r\n      });\r\n      alert(`ê¸°ë¶€ ì˜¤ë¥˜: ${error.message}`);\r\n\r\n      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n        setCachedFirestoreData(`goal_${currentGoalId}`, userId, latestGoalData);\r\n\r\n        alert(`ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ!\\nëª©í‘œ ì§„í–‰ë¥ : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\nê¸°ë¶€ ë‚´ì—­: ${freshDonations.length}ê°œ`);\r\n      } else {\r\n        alert(\"ëª©í‘œ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.\");\r\n      }\r\n    } catch (error) {\r\n      alert(`ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    logger.log('[CouponGoalPage Debug]', debugInfo);\r\n    alert(`ë””ë²„ê·¸ ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\nê¸°ë¶€ ë‚´ì—­: ${goalDonations.length}ê°œ\\nëª©í‘œ ì§„í–‰ë¥ : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"ê´€ë¦¬ìë§Œ ì´ˆê¸°í™” ê°€ëŠ¥í•©ë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"í•™ê¸‰ ì½”ë“œë‚˜ ëª©í‘œ ì •ë³´ê°€ ì—†ì–´ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!window.confirm(`ì •ë§ë¡œ ${currentUserClassCode} í•™ê¸‰ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      return;\r\n    }\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`í•™ê¸‰(${currentUserClassCode})ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n    } catch (error) {\r\n      alert(`ëª©í‘œ ì´ˆê¸°í™” ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({\r\n        coupons: -amount,\r\n        cash: amount * couponValue\r\n      });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n      alert(`${amount}ê°œ ì¿ í°ì„ íŒë§¤í–ˆìŠµë‹ˆë‹¤.`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n\r\n      // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n      setTimeout(() => {\r\n        loadingRef.current = false;\r\n        if (loadGoalDataRef.current) {\r\n          loadGoalDataRef.current();\r\n        }\r\n      }, 500);\r\n    } catch (error) {\r\n      alert(`íŒë§¤ ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    logger.log(\"handleGiftCoupon called\"); // í•¨ìˆ˜ í˜¸ì¶œ í™•ì¸ ë¡œê·¸\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"ë°›ëŠ” ì‚¬ëŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ì˜¬ë°”ë¥¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount });\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}ë‹˜ì—ê²Œ ì¿ í° ${amount}ê°œë¥¼ ì„ ë¬¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n        alert(\"ì¿ í° ì„ ë¬¼ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n\r\n        // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n        setTimeout(() => {\r\n          loadingRef.current = false;\r\n          if (loadGoalDataRef.current) {\r\n            loadGoalDataRef.current();\r\n          }\r\n        }, 500);\r\n      } catch (error) {\r\n        alert(`ì„ ë¬¼ ì˜¤ë¥˜: ${error.message}`);\r\n        // ë¡¤ë°±\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n        í•™ê¸‰ ì½”ë“œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì—¬ í•™ê¸‰ ì½”ë“œë¥¼ í• ë‹¹ë°›ìœ¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-400 border-b-2 border-emerald-900 pb-3 mb-6\" style={{ textShadow: \"0 0 10px rgba(52, 211, 153, 0.3)\" }}>\r\n          ğŸ¯ ì¿ í° ëª©í‘œ (í•™ê¸‰: {currentUserClassCode})\r\n        </h2>\r\n\r\n        {currentUserClassCode && currentGoalId && (\r\n          <>\r\n            <CouponGoal\r\n              classCouponGoal={classCouponGoal}\r\n              goalProgress={goalProgress}\r\n              myContribution={myContribution}\r\n              currentCoupons={Number(userDoc?.coupons) || 0}\r\n              couponValue={couponValue}\r\n              setShowDonateModal={setShowDonateModal}\r\n              setShowSellCouponModal={setShowSellCouponModal}\r\n              setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n              setShowGiftCouponModal={setShowGiftCouponModal}\r\n              goalAchieved={goalAchieved}\r\n              resetGoalButton={\r\n                userDoc?.isAdmin || userDoc?.isSuperAdmin ? resetCouponGoal : null\r\n              }\r\n              isResettingGoal={isResettingGoal}\r\n            />\r\n\r\n            <div\r\n              style={{\r\n                marginTop: \"20px\",\r\n                padding: \"15px\",\r\n                backgroundColor: \"rgba(20, 20, 35, 0.85)\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.15)\",\r\n              }}\r\n            >\r\n              <h4\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  color: \"#00fff2\",\r\n                  marginBottom: \"10px\",\r\n                  fontWeight: \"600\",\r\n                }}\r\n              >\r\n                ğŸ”§ ë°ì´í„° ê´€ë¦¬ ë„êµ¬\r\n              </h4>\r\n              <div style={{ display: \"flex\", gap: \"10px\", flexWrap: \"wrap\" }}>\r\n                <button\r\n                  onClick={forceRefreshGoalData}\r\n                  disabled={assetsLoading}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#17a2b8\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ“Š ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n                <button\r\n                  onClick={showDebugInfo}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#6c757d\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ” ë””ë²„ê·¸ ì •ë³´ í™•ì¸\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    localStorage.clear();\r\n                    alert(\"ë¡œì»¬ ìºì‹œê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.\");\r\n                    window.location.reload();\r\n                  }}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#dc3545\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ—‘ï¸ ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n              </div>\r\n              <p\r\n                style={{\r\n                  fontSize: \"11px\",\r\n                  color: \"#868e96\",\r\n                  marginTop: \"8px\",\r\n                  marginBottom: \"0\",\r\n                  lineHeight: \"1.4\",\r\n                }}\r\n              >\r\n                â€¢ ê¸°ë¶€ ë‚´ì—­ì´ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©´ \"ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”\r\n                <br />\r\n                â€¢ ë¬¸ì œê°€ ì§€ì†ë˜ë©´ \"ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\"ì„ ì‹œë„í•´ë³´ì„¸ìš”\r\n                <br />â€¢ í˜„ì¬ ìƒíƒœ: ê¸°ë¶€ ë‚´ì—­ {goalDonations.length}ê°œ, ëª©í‘œ ì§„í–‰ë¥ {\" \"}\r\n                {goalProgress}/{classCouponGoal}\r\n              </p>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {showDonateModal && currentUserClassCode && currentGoalId && (\r\n          <DonateCouponModal\r\n            showDonateModal={showDonateModal}\r\n            setShowDonateModal={setShowDonateModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            onDonate={handleDonateCoupon}\r\n            classCode={currentUserClassCode}\r\n          />\r\n        )}\r\n        {showSellCouponModal && (\r\n          <SellCouponModal\r\n            showSellCouponModal={showSellCouponModal}\r\n            setShowSellCouponModal={setShowSellCouponModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            couponValue={couponValue}\r\n            sellAmount={sellAmount}\r\n            setSellAmount={setSellAmount}\r\n            SellCoupon={handleSellCoupon}\r\n          />\r\n        )}\r\n        {showGiftCouponModal && (\r\n          <GiftCouponModal\r\n            showGiftCouponModal={showGiftCouponModal}\r\n            setShowGiftCouponModal={setShowGiftCouponModal}\r\n            recipients={classmates}\r\n            giftRecipient={giftRecipient}\r\n            setGiftRecipient={setGiftRecipient}\r\n            giftAmount={giftAmount}\r\n            setGiftAmount={setGiftAmount}\r\n            handleGiftCoupon={handleGiftCoupon}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            userId={userId}\r\n          />\r\n        )}\r\n        {showDonationHistoryModal && currentUserClassCode && currentGoalId && (\r\n          <DonationHistoryModal\r\n            showDonationHistoryModal={showDonationHistoryModal}\r\n            setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n            students={allClassMembers || []}\r\n            classCode={currentUserClassCode}\r\n            donations={goalDonations}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","CircularProgress","_ref","percentage","size","strokeWidth","color","radius","circumference","Math","PI","offset","style","width","height","transform","cx","cy","r","fill","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","transition","CouponGoal","_ref2","classCouponGoal","goalProgress","myContribution","currentCoupons","couponValue","setShowDonateModal","setShowSellCouponModal","setShowDonationHistoryModal","setShowGiftCouponModal","goalAchieved","resetGoalButton","isResettingGoal","validClassCouponGoal","goalPercentage","min","round","myContributionPercentage","mainColor","backgroundColor","boxShadow","border","backdropFilter","background","textShadow","animation","onClick","disabled","cursor","opacity","toLocaleString","memo","showDonateModal","onDonate","classCode","donateAmount","setDonateAmount","useState","donateMessage","setDonateMessage","isDonating","setIsDonating","handleClose","e","stopPropagation","concat","type","max","value","onChange","target","placeholder","isNaN","parseInt","async","amount","alert","error","logger","showSellCouponModal","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","setError","handleCancel","isInvalidAmount","onSubmit","preventDefault","err","message","htmlFor","id","required","calculateValue","showGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","_studentDonationSumma","showDonationHistoryModal","students","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","loading","setLoading","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","borderCollapse","fontSize","borderRadius","overflow","thead","th","padding","textAlign","fontWeight","borderBottom","position","top","zIndex","td","tr","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","marginBottom","useEffect","processDonationData","log","studentsCount","length","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","formatAmount","myTotalDonation","find","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","CouponGoalPage","users","classmates","allClassMembers","authLoading","optimisticUpdate","currentUserClassCode","assetsLoading","setAssetsLoading","loadingRef","useRef","loadGoalDataRef","goalDonations","setGoalDonations","donateCouponFunction","useMemo","httpsCallable","functions","sellCouponFunction","giftCouponFunction","currentGoalId","setClassCouponGoal","setCouponValue","settingsRef","doc","db","settingsSnap","getDoc","exists","settingsData","data","loadCouponValueFromSettings","setGoalProgress","setMyContribution","setGoalAchieved","setIsResettingGoal","processGoalData","useCallback","goalData","targetAmount","progress","processedTimestamp","timestamp","toDate","toISOString","seconds","Date","timestampISO","myTotal","d","reduce","sum","current","forceRefresh","arguments","undefined","cacheKey","cachedData","getCachedFirestoreData","goalDocRef","goalDocSnap","setCachedFirestoreData","warn","AlchanLoading","coupons","isAdmin","isSuperAdmin","window","confirm","batch","writeBatch","goalRef","usersQuery","query","collection","where","getDocs","userDocument","userRef","update","updatedAt","serverTimestamp","donationCount","resetAt","resetBy","commit","localStorage","removeItem","marginTop","gap","flexWrap","latestGoalData","freshDonations","showDebugInfo","debugInfo","userCoupons","userCash","cash","clear","location","reload","lineHeight","DonateCouponModal","donationAmount","prev","code","details","stack","SellCouponModal","setTimeout","GiftCouponModal","recipientUser","u","recipientId","DonationHistoryModal"],"ignoreList":[],"sourceRoot":""}