{"version":3,"file":"static/js/438.5c27e0da.chunk.js","mappings":"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","sources":["CouponGoal.js","CouponGoalPage.js"],"sourcesContent":["// src/CouponGoal.js\r\nimport React from \"react\";\r\n\r\n// ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ì»´í¬ë„ŒíŠ¸\r\nconst CircularProgress = ({ percentage, size = 140, strokeWidth = 12, color, children }) => {\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = radius * 2 * Math.PI;\r\n  const offset = circumference - (percentage / 100) * circumference;\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", width: size, height: size }}>\r\n      <svg width={size} height={size} style={{ transform: \"rotate(-90deg)\" }}>\r\n        {/* ë°°ê²½ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke=\"rgba(255, 255, 255, 0.1)\"\r\n          strokeWidth={strokeWidth}\r\n        />\r\n        {/* í”„ë¡œê·¸ë ˆìŠ¤ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke={color}\r\n          strokeWidth={strokeWidth}\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={offset}\r\n          strokeLinecap=\"round\"\r\n          style={{ transition: \"stroke-dashoffset 0.5s ease\" }}\r\n        />\r\n      </svg>\r\n      {/* ì¤‘ì•™ ì½˜í…ì¸  */}\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          textAlign: \"center\",\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function CouponGoal({\r\n  classCouponGoal,\r\n  goalProgress,\r\n  myContribution,\r\n  currentCoupons,\r\n  couponValue,\r\n  setShowDonateModal,\r\n  setShowSellCouponModal,\r\n  setShowDonationHistoryModal,\r\n  setShowGiftCouponModal,\r\n  goalAchieved,\r\n  resetGoalButton,\r\n  isResettingGoal,\r\n}) {\r\n  const validClassCouponGoal =\r\n    typeof classCouponGoal === \"number\" && classCouponGoal > 0\r\n      ? classCouponGoal\r\n      : 1;\r\n\r\n  const goalPercentage = Math.min(\r\n    Math.round((goalProgress / validClassCouponGoal) * 100),\r\n    100\r\n  );\r\n\r\n  const myContributionPercentage =\r\n    validClassCouponGoal > 0\r\n      ? Math.min(Math.round((myContribution / validClassCouponGoal) * 100), 100)\r\n      : 0;\r\n\r\n  const mainColor = goalAchieved ? \"#10b981\" : \"#6366f1\";\r\n\r\n  return (\r\n    <div\r\n      className=\"class-coupon-goal\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        padding: \"24px\",\r\n        borderRadius: \"20px\",\r\n        boxShadow: goalAchieved\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.25)\"\r\n          : \"0 4px 20px rgba(0, 255, 242, 0.15)\",\r\n        border: goalAchieved ? \"2px solid #10b981\" : \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n        backdropFilter: \"blur(10px)\",\r\n      }}\r\n    >\r\n      {/* ë°°ê²½ ì¥ì‹ */}\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"-50px\",\r\n          right: \"-50px\",\r\n          width: \"150px\",\r\n          height: \"150px\",\r\n          background: goalAchieved\r\n            ? \"radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%)\"\r\n            : \"radial-gradient(circle, rgba(99,102,241,0.1) 0%, transparent 70%)\",\r\n          borderRadius: \"50%\",\r\n        }}\r\n      />\r\n\r\n      {/* í—¤ë” */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: \"20px\",\r\n        }}\r\n      >\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}>\r\n          <span style={{ fontSize: \"28px\" }}>ğŸ¯</span>\r\n          <h3\r\n            style={{\r\n              fontSize: \"20px\",\r\n              fontWeight: \"700\",\r\n              color: \"#e8e8ff\",\r\n              margin: 0,\r\n              textShadow: \"0 0 5px rgba(0, 255, 242, 0.5)\",\r\n            }}\r\n          >\r\n            í•™ê¸‰ ì¿ í° ëª©í‘œ\r\n          </h3>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", gap: \"8px\", alignItems: \"center\" }}>\r\n          {goalAchieved && (\r\n            <span\r\n              style={{\r\n                background: \"linear-gradient(135deg, #10b981, #059669)\",\r\n                color: \"white\",\r\n                padding: \"6px 14px\",\r\n                borderRadius: \"20px\",\r\n                fontSize: \"13px\",\r\n                fontWeight: \"700\",\r\n                boxShadow: \"0 2px 8px rgba(16, 185, 129, 0.4)\",\r\n                animation: \"pulse 2s infinite\",\r\n              }}\r\n            >\r\n              ğŸ‰ ëª©í‘œ ë‹¬ì„±!\r\n            </span>\r\n          )}\r\n          {resetGoalButton && (\r\n            <button\r\n              onClick={resetGoalButton}\r\n              disabled={isResettingGoal}\r\n              style={{\r\n                backgroundColor: isResettingGoal ? \"#9ca3af\" : \"#ef4444\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: \"12px\",\r\n                padding: \"6px 12px\",\r\n                fontSize: \"12px\",\r\n                fontWeight: \"600\",\r\n                cursor: isResettingGoal ? \"not-allowed\" : \"pointer\",\r\n                opacity: isResettingGoal ? 0.7 : 1,\r\n              }}\r\n            >\r\n              {isResettingGoal ? \"ì´ˆê¸°í™” ì¤‘...\" : \"ì´ˆê¸°í™”\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ë©”ì¸ í”„ë¡œê·¸ë ˆìŠ¤ ì˜ì—­ */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          gap: \"30px\",\r\n          padding: \"20px 0\",\r\n          flexWrap: \"wrap\",\r\n        }}\r\n      >\r\n        {/* í•™ê¸‰ ëª©í‘œ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <CircularProgress\r\n            percentage={goalPercentage}\r\n            size={150}\r\n            strokeWidth={14}\r\n            color={mainColor}\r\n          >\r\n            <div style={{ fontSize: \"32px\", fontWeight: \"800\", color: mainColor }}>\r\n              {goalPercentage}%\r\n            </div>\r\n            <div style={{ fontSize: \"11px\", color: \"#a0a0c0\", fontWeight: \"500\" }}>\r\n              ë‹¬ì„±ë¥ \r\n            </div>\r\n          </CircularProgress>\r\n          <div style={{ marginTop: \"12px\" }}>\r\n            <div style={{ fontSize: \"22px\", fontWeight: \"800\", color: \"#e8e8ff\" }}>\r\n              {(goalProgress || 0).toLocaleString()}\r\n              <span style={{ fontSize: \"14px\", color: \"#a0a0c0\", fontWeight: \"500\" }}> / {validClassCouponGoal.toLocaleString()}</span>\r\n            </div>\r\n            <div style={{ fontSize: \"12px\", color: \"#6b7280\", marginTop: \"2px\" }}>í•™ê¸‰ ì „ì²´ ê¸°ë¶€ëŸ‰</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ê¸°ì—¬ë„ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <CircularProgress\r\n            percentage={myContributionPercentage}\r\n            size={120}\r\n            strokeWidth={10}\r\n            color=\"#f59e0b\"\r\n          >\r\n            <div style={{ fontSize: \"24px\", fontWeight: \"800\", color: \"#f59e0b\" }}>\r\n              {myContributionPercentage}%\r\n            </div>\r\n            <div style={{ fontSize: \"10px\", color: \"#a0a0c0\", fontWeight: \"500\" }}>\r\n              ë‚´ ê¸°ì—¬\r\n            </div>\r\n          </CircularProgress>\r\n          <div style={{ marginTop: \"12px\" }}>\r\n            <div style={{ fontSize: \"18px\", fontWeight: \"700\", color: \"#e8e8ff\" }}>\r\n              {(myContribution || 0).toLocaleString()}\r\n              <span style={{ fontSize: \"12px\", color: \"#a0a0c0\", fontWeight: \"500\" }}> ì¿ í°</span>\r\n            </div>\r\n            <div style={{ fontSize: \"11px\", color: \"#6b7280\", marginTop: \"2px\" }}>ë‚´ê°€ ê¸°ë¶€í•œ ì¿ í°</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ë³´ìœ ëŸ‰ ì¹´ë“œ */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%)\",\r\n            borderRadius: \"16px\",\r\n            padding: \"20px\",\r\n            textAlign: \"center\",\r\n            minWidth: \"130px\",\r\n            boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.1)\",\r\n            border: \"1px solid rgba(251, 191, 36, 0.3)\",\r\n          }}\r\n        >\r\n          <div style={{ fontSize: \"32px\", marginBottom: \"8px\" }}>ğŸ«</div>\r\n          <div style={{ fontSize: \"28px\", fontWeight: \"800\", color: \"#fbbf24\", textShadow: \"0 0 10px rgba(251, 191, 36, 0.3)\" }}>\r\n            {(currentCoupons || 0).toLocaleString()}\r\n          </div>\r\n          <div style={{ fontSize: \"12px\", color: \"#fcd34d\", fontWeight: \"600\", marginTop: \"4px\" }}>\r\n            ë³´ìœ  ì¿ í°\r\n          </div>\r\n          <div style={{ fontSize: \"10px\", color: \"#fcd34d\", marginTop: \"8px\", padding: \"4px 8px\", background: \"rgba(0,0,0,0.3)\", borderRadius: \"8px\" }}>\r\n            1ì¿ í° = {typeof couponValue === \"number\" ? couponValue.toLocaleString() : \"0\"}ì›\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}\r\n      <div\r\n        style={{\r\n          display: \"grid\",\r\n          gridTemplateColumns: \"repeat(4, 1fr)\",\r\n          gap: \"8px\",\r\n          marginTop: \"20px\",\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => setShowDonateModal(true)}\r\n          style={{\r\n            background: \"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)\",\r\n            border: \"none\",\r\n            borderRadius: \"14px\",\r\n            padding: \"14px 8px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: \"6px\",\r\n            boxShadow: \"0 4px 12px rgba(99, 102, 241, 0.35)\",\r\n            transition: \"transform 0.2s, box-shadow 0.2s\",\r\n          }}\r\n        >\r\n          <span style={{ fontSize: \"22px\" }}>ğŸ’°</span>\r\n          <span style={{ color: \"#fff\", fontSize: \"12px\", fontWeight: \"700\" }}>ì¿ í° ê¸°ë¶€</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowSellCouponModal(true)}\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f87171 0%, #ef4444 100%)\",\r\n            border: \"none\",\r\n            borderRadius: \"14px\",\r\n            padding: \"14px 8px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: \"6px\",\r\n            boxShadow: \"0 4px 12px rgba(239, 68, 68, 0.35)\",\r\n            transition: \"transform 0.2s, box-shadow 0.2s\",\r\n          }}\r\n        >\r\n          <span style={{ fontSize: \"22px\" }}>ğŸ’µ</span>\r\n          <span style={{ color: \"#fff\", fontSize: \"12px\", fontWeight: \"700\" }}>ì¿ í° íŒë§¤</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowGiftCouponModal(true)}\r\n          style={{\r\n            background: \"linear-gradient(135deg, #34d399 0%, #10b981 100%)\",\r\n            border: \"none\",\r\n            borderRadius: \"14px\",\r\n            padding: \"14px 8px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: \"6px\",\r\n            boxShadow: \"0 4px 12px rgba(16, 185, 129, 0.35)\",\r\n            transition: \"transform 0.2s, box-shadow 0.2s\",\r\n          }}\r\n        >\r\n          <span style={{ fontSize: \"22px\" }}>ğŸ</span>\r\n          <span style={{ color: \"#fff\", fontSize: \"12px\", fontWeight: \"700\" }}>ì¿ í° ì„ ë¬¼</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowDonationHistoryModal(true)}\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)\",\r\n            border: \"1px solid #d1d5db\",\r\n            borderRadius: \"14px\",\r\n            padding: \"14px 8px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            gap: \"6px\",\r\n            transition: \"transform 0.2s, box-shadow 0.2s\",\r\n          }}\r\n        >\r\n          <span style={{ fontSize: \"22px\" }}>ğŸ“‹</span>\r\n          <span style={{ color: \"#a0a0c0\", fontSize: \"12px\", fontWeight: \"700\" }}>ê¸°ë¶€ ë‚´ì—­</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ */}\r\n      <style>{`\r\n        @keyframes pulse {\r\n          0%, 100% { transform: scale(1); }\r\n          50% { transform: scale(1.05); }\r\n        }\r\n        .class-coupon-goal button:hover {\r\n          transform: translateY(-2px);\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","// src/CouponGoalPage.js - ì¿ í° ëª©í‘œ ì „ìš© í˜ì´ì§€\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  runTransaction,\r\n} from \"./firebase\";\r\nimport CouponGoal from \"./CouponGoal\";\r\nimport LoginWarning from \"./LoginWarning\";\r\nimport DonateCouponModal from \"./components/modals/DonateCouponModal\";\r\nimport SellCouponModal from \"./components/modals/SellCouponModal\";\r\nimport GiftCouponModal from \"./components/modals/GiftCouponModal\";\r\nimport DonationHistoryModal from \"./components/modals/DonationHistoryModal\";\r\nimport { AlchanLoading } from \"./components/AlchanLayout\";\r\n\r\nexport default function CouponGoalPage() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users,\r\n    classmates,\r\n    allClassMembers,\r\n    loading: authLoading,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false);\r\n  const loadGoalDataRef = useRef(null); // ğŸ”¥ loadGoalData í•¨ìˆ˜ë¥¼ ì €ì¥í•  ref\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n\r\n  const donateCouponFunction = httpsCallable(functions, 'donateCoupon');\r\n  const sellCouponFunction = httpsCallable(functions, 'sellCoupon');\r\n  const giftCouponFunction = httpsCallable(functions, 'giftCoupon');\r\n\r\n  const CACHE_DURATION = 5 * 60 * 1000;\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  // ğŸ”¥ [ë²„ê·¸ ìˆ˜ì •] Firestoreì—ì„œ ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ\r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[CouponGoalPage] ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] = useState(false);\r\n\r\n  const safeTimestampToDate = (timestamp) => {\r\n    try {\r\n      if (!timestamp) return new Date();\r\n      if (timestamp instanceof Date) {\r\n        return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n      }\r\n      if (timestamp && typeof timestamp.toDate === 'function') {\r\n        const date = timestamp.toDate();\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n      if (timestamp && timestamp.seconds) {\r\n        const date = new Date(timestamp.seconds * 1000);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n      if (typeof timestamp === 'string') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n      if (typeof timestamp === 'number') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n      return new Date();\r\n    } catch (error) {\r\n      return new Date();\r\n    }\r\n  };\r\n\r\n  const getCachedFirestoreData = useCallback((key) => {\r\n    try {\r\n      const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached);\r\n        if (Date.now() - timestamp < CACHE_DURATION) {\r\n          return data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n    }\r\n    return null;\r\n  }, [userId]);\r\n\r\n  const setCachedFirestoreData = useCallback((key, data) => {\r\n    try {\r\n      const cacheItem = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      localStorage.setItem(`firestore_cache_${key}_${userId}`, JSON.stringify(cacheItem));\r\n    } catch (error) {\r\n    }\r\n  }, [userId]);\r\n\r\n  // ğŸ”¥ [ìµœì í™”] ë°ì´í„° ì²˜ë¦¬ í—¬í¼ í•¨ìˆ˜ (ìºì‹œ/Firestore ê³µìš©)\r\n  const processGoalData = useCallback((goalData) => {\r\n    setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n    setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n    // ê¸°ë¶€ ë‚´ì—­ ì²˜ë¦¬ - timestamp ì¼ê´€ì„± ìœ ì§€\r\n    const donations = Array.isArray(goalData.donations)\r\n      ? goalData.donations.map((donation) => {\r\n        let processedTimestamp;\r\n        if (donation.timestamp && donation.timestamp.toDate) {\r\n          processedTimestamp = donation.timestamp.toDate().toISOString();\r\n        } else if (donation.timestamp && donation.timestamp.seconds) {\r\n          processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n        } else if (donation.timestampISO) {\r\n          processedTimestamp = donation.timestampISO;\r\n        } else if (typeof donation.timestamp === 'string') {\r\n          processedTimestamp = donation.timestamp;\r\n        } else {\r\n          processedTimestamp = new Date().toISOString();\r\n        }\r\n\r\n        return {\r\n          ...donation,\r\n          amount: Number(donation.amount) || 0,\r\n          timestamp: processedTimestamp,\r\n          userId: donation.userId || '',\r\n          userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n          message: donation.message || '',\r\n          classCode: donation.classCode || currentUserClassCode,\r\n        };\r\n      })\r\n      : [];\r\n\r\n    setGoalDonations(donations);\r\n\r\n    // ë‚´ ê¸°ì—¬ë„ ê³„ì‚°\r\n    const myDonations = donations.filter(d => d.userId === userId);\r\n    const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n    setMyContribution(myTotal);\r\n  }, [currentUserClassCode, userId]);\r\n\r\n  // ğŸ”¥ loadGoalData í•¨ìˆ˜ - useCallback ì œê±°í•˜ê³  ì¼ë°˜ í•¨ìˆ˜ë¡œ ë³€ê²½\r\n  const loadGoalData = async (forceRefresh = false) => {\r\n    if (!userId || !currentUserClassCode || !currentGoalId) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (loadingRef.current) {\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // ğŸ”¥ [ìµœì í™”] ìºì‹œ ìš°ì„  ë¡œë“œ - Firestore ì½ê¸° ì ˆê°\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      if (!forceRefresh) {\r\n        const cachedData = getCachedFirestoreData(cacheKey);\r\n        if (cachedData) {\r\n          processGoalData(cachedData);\r\n          setAssetsLoading(false);\r\n          loadingRef.current = false;\r\n          return;\r\n        }\r\n      }\r\n\r\n      // ğŸ”¥ Firestoreì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        // ğŸ”¥ [ìµœì í™”] ê³µìš© í—¬í¼ í•¨ìˆ˜ë¡œ ì²˜ë¦¬\r\n        processGoalData(goalData);\r\n\r\n        // ğŸ”¥ ìºì‹œì— ì €ì¥\r\n        const cacheKey = `goal_${currentGoalId}`;\r\n        setCachedFirestoreData(cacheKey, goalData);\r\n      } else {\r\n        console.warn('[CouponGoalPage] ëª©í‘œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');\r\n      }\r\n    } catch (error) {\r\n      console.error('[CouponGoalPage] ëª©í‘œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ refì— loadGoalData í•¨ìˆ˜ ì €ì¥\r\n  loadGoalDataRef.current = loadGoalData;\r\n\r\n  // ğŸ”¥ ì´ˆê¸° ë¡œë“œ useEffect - loadGoalDataRef ì‚¬ìš©\r\n  useEffect(() => {\r\n    if (!authLoading && user && currentUserClassCode && currentGoalId) {\r\n      if (loadGoalDataRef.current) {\r\n        loadGoalDataRef.current();\r\n      }\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user, currentUserClassCode, currentGoalId]);\r\n\r\n  // ğŸ”¥ [ì œê±°] userDoc.myContribution ì‚¬ìš© ì¤‘ë‹¨ - donations ë°°ì—´ì—ì„œ ì§ì ‘ ê³„ì‚°\r\n  // useEffect(() => {\r\n  //   if (userDoc) {\r\n  //     setMyContribution(userDoc.myContribution || 0);\r\n  //   }\r\n  // }, [userDoc]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode || !userDoc) {\r\n      alert(\"ì‚¬ìš©ì ë˜ëŠ” í•™ê¸‰ ì •ë³´ê°€ ì—†ì–´ ê¸°ë¶€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return false;\r\n    }\r\n\r\n    // ğŸ”¥ ì¿ í° ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalProgress(prev => prev + donationAmount);\r\n\r\n    // ğŸ”¥ ë¡œë”© ìƒíƒœ í‘œì‹œ\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // Call the server function in the background\r\n      const result = await donateCouponFunction({ amount: donationAmount, message: memo });\r\n\r\n      // ğŸ”¥ ìºì‹œ ë¬´íš¨í™”\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      // ğŸ”¥ ì¦‰ì‹œ ìµœì‹  ë°ì´í„° ë¡œë“œ\r\n      loadingRef.current = false;\r\n      if (loadGoalDataRef.current) {\r\n        await loadGoalDataRef.current();\r\n      }\r\n\r\n      alert(`${donationAmount} ì¿ í° ê¸°ë¶€ ì™„ë£Œ!`);\r\n      setShowDonateModal(false);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[CouponGoalPage] ê¸°ë¶€ ì˜¤ë¥˜ (ìƒì„¸):', {\r\n        error,\r\n        message: error.message,\r\n        code: error.code,\r\n        details: error.details,\r\n        stack: error.stack\r\n      });\r\n      alert(`ê¸°ë¶€ ì˜¤ë¥˜: ${error.message}`);\r\n\r\n      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n        setCachedFirestoreData(`goal_${currentGoalId}`, latestGoalData);\r\n\r\n        alert(`ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ!\\nëª©í‘œ ì§„í–‰ë¥ : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\nê¸°ë¶€ ë‚´ì—­: ${freshDonations.length}ê°œ`);\r\n      } else {\r\n        alert(\"ëª©í‘œ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.\");\r\n      }\r\n    } catch (error) {\r\n      alert(`ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    console.log('[CouponGoalPage Debug]', debugInfo);\r\n    alert(`ë””ë²„ê·¸ ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\nê¸°ë¶€ ë‚´ì—­: ${goalDonations.length}ê°œ\\nëª©í‘œ ì§„í–‰ë¥ : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"ê´€ë¦¬ìë§Œ ì´ˆê¸°í™” ê°€ëŠ¥í•©ë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"í•™ê¸‰ ì½”ë“œë‚˜ ëª©í‘œ ì •ë³´ê°€ ì—†ì–´ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!window.confirm(`ì •ë§ë¡œ ${currentUserClassCode} í•™ê¸‰ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      return;\r\n    }\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`í•™ê¸‰(${currentUserClassCode})ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n    } catch (error) {\r\n      alert(`ëª©í‘œ ì´ˆê¸°í™” ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({\r\n        coupons: -amount,\r\n        cash: amount * couponValue\r\n      });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n      alert(`${amount}ê°œ ì¿ í°ì„ íŒë§¤í–ˆìŠµë‹ˆë‹¤.`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n\r\n      // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n      setTimeout(() => {\r\n        loadingRef.current = false;\r\n        if (loadGoalDataRef.current) {\r\n          loadGoalDataRef.current();\r\n        }\r\n      }, 500);\r\n    } catch (error) {\r\n      alert(`íŒë§¤ ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    console.log(\"handleGiftCoupon called\"); // í•¨ìˆ˜ í˜¸ì¶œ í™•ì¸ ë¡œê·¸\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"ë°›ëŠ” ì‚¬ëŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ì˜¬ë°”ë¥¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount });\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}ë‹˜ì—ê²Œ ì¿ í° ${amount}ê°œë¥¼ ì„ ë¬¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n        alert(\"ì¿ í° ì„ ë¬¼ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n\r\n        // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n        setTimeout(() => {\r\n          loadingRef.current = false;\r\n          if (loadGoalDataRef.current) {\r\n            loadGoalDataRef.current();\r\n          }\r\n        }, 500);\r\n      } catch (error) {\r\n        alert(`ì„ ë¬¼ ì˜¤ë¥˜: ${error.message}`);\r\n        // ë¡¤ë°±\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n        í•™ê¸‰ ì½”ë“œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì—¬ í•™ê¸‰ ì½”ë“œë¥¼ í• ë‹¹ë°›ìœ¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-400 border-b-2 border-emerald-900 pb-3 mb-6\" style={{ textShadow: \"0 0 10px rgba(52, 211, 153, 0.3)\" }}>\r\n          ğŸ¯ ì¿ í° ëª©í‘œ (í•™ê¸‰: {currentUserClassCode})\r\n        </h2>\r\n\r\n        {currentUserClassCode && currentGoalId && (\r\n          <>\r\n            <CouponGoal\r\n              classCouponGoal={classCouponGoal}\r\n              goalProgress={goalProgress}\r\n              myContribution={myContribution}\r\n              currentCoupons={Number(userDoc?.coupons) || 0}\r\n              couponValue={couponValue}\r\n              setShowDonateModal={setShowDonateModal}\r\n              setShowSellCouponModal={setShowSellCouponModal}\r\n              setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n              setShowGiftCouponModal={setShowGiftCouponModal}\r\n              goalAchieved={goalAchieved}\r\n              resetGoalButton={\r\n                userDoc?.isAdmin || userDoc?.isSuperAdmin ? resetCouponGoal : null\r\n              }\r\n              isResettingGoal={isResettingGoal}\r\n            />\r\n\r\n            <div\r\n              style={{\r\n                marginTop: \"20px\",\r\n                padding: \"15px\",\r\n                backgroundColor: \"rgba(20, 20, 35, 0.85)\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.15)\",\r\n              }}\r\n            >\r\n              <h4\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  color: \"#00fff2\",\r\n                  marginBottom: \"10px\",\r\n                  fontWeight: \"600\",\r\n                }}\r\n              >\r\n                ğŸ”§ ë°ì´í„° ê´€ë¦¬ ë„êµ¬\r\n              </h4>\r\n              <div style={{ display: \"flex\", gap: \"10px\", flexWrap: \"wrap\" }}>\r\n                <button\r\n                  onClick={forceRefreshGoalData}\r\n                  disabled={assetsLoading}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#17a2b8\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ“Š ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n                <button\r\n                  onClick={showDebugInfo}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#6c757d\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ” ë””ë²„ê·¸ ì •ë³´ í™•ì¸\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    localStorage.clear();\r\n                    alert(\"ë¡œì»¬ ìºì‹œê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.\");\r\n                    window.location.reload();\r\n                  }}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#dc3545\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ—‘ï¸ ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n              </div>\r\n              <p\r\n                style={{\r\n                  fontSize: \"11px\",\r\n                  color: \"#868e96\",\r\n                  marginTop: \"8px\",\r\n                  marginBottom: \"0\",\r\n                  lineHeight: \"1.4\",\r\n                }}\r\n              >\r\n                â€¢ ê¸°ë¶€ ë‚´ì—­ì´ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©´ \"ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”\r\n                <br />\r\n                â€¢ ë¬¸ì œê°€ ì§€ì†ë˜ë©´ \"ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\"ì„ ì‹œë„í•´ë³´ì„¸ìš”\r\n                <br />â€¢ í˜„ì¬ ìƒíƒœ: ê¸°ë¶€ ë‚´ì—­ {goalDonations.length}ê°œ, ëª©í‘œ ì§„í–‰ë¥ {\" \"}\r\n                {goalProgress}/{classCouponGoal}\r\n              </p>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {showDonateModal && currentUserClassCode && currentGoalId && (\r\n          <DonateCouponModal\r\n            showDonateModal={showDonateModal}\r\n            setShowDonateModal={setShowDonateModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            onDonate={handleDonateCoupon}\r\n            classCode={currentUserClassCode}\r\n          />\r\n        )}\r\n        {showSellCouponModal && (\r\n          <SellCouponModal\r\n            showSellCouponModal={showSellCouponModal}\r\n            setShowSellCouponModal={setShowSellCouponModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            couponValue={couponValue}\r\n            sellAmount={sellAmount}\r\n            setSellAmount={setSellAmount}\r\n            SellCoupon={handleSellCoupon}\r\n          />\r\n        )}\r\n        {showGiftCouponModal && (\r\n          <GiftCouponModal\r\n            showGiftCouponModal={showGiftCouponModal}\r\n            setShowGiftCouponModal={setShowGiftCouponModal}\r\n            recipients={classmates}\r\n            giftRecipient={giftRecipient}\r\n            setGiftRecipient={setGiftRecipient}\r\n            giftAmount={giftAmount}\r\n            setGiftAmount={setGiftAmount}\r\n            handleGiftCoupon={handleGiftCoupon}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            userId={userId}\r\n          />\r\n        )}\r\n        {showDonationHistoryModal && currentUserClassCode && currentGoalId && (\r\n          <DonationHistoryModal\r\n            showDonationHistoryModal={showDonationHistoryModal}\r\n            setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n            students={allClassMembers || []}\r\n            classCode={currentUserClassCode}\r\n            donations={goalDonations}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CircularProgress","_ref","percentage","size","strokeWidth","color","children","radius","circumference","Math","PI","offset","_jsxs","style","position","width","height","transform","_jsx","cx","cy","r","fill","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","transition","top","left","textAlign","CouponGoal","_ref2","classCouponGoal","goalProgress","myContribution","currentCoupons","couponValue","setShowDonateModal","setShowSellCouponModal","setShowDonationHistoryModal","setShowGiftCouponModal","goalAchieved","resetGoalButton","isResettingGoal","validClassCouponGoal","goalPercentage","min","round","myContributionPercentage","mainColor","className","backgroundColor","padding","borderRadius","boxShadow","border","overflow","backdropFilter","right","background","display","justifyContent","alignItems","marginBottom","gap","fontSize","fontWeight","margin","textShadow","animation","onClick","disabled","cursor","opacity","flexWrap","marginTop","toLocaleString","minWidth","gridTemplateColumns","flexDirection","CouponGoalPage","user","userDoc","users","classmates","allClassMembers","loading","authLoading","optimisticUpdate","useAuth","userId","uid","currentUserClassCode","classCode","assetsLoading","setAssetsLoading","useState","loadingRef","useRef","loadGoalDataRef","goalDonations","setGoalDonations","donateCouponFunction","httpsCallable","functions","sellCouponFunction","giftCouponFunction","currentGoalId","concat","setClassCouponGoal","setCouponValue","useEffect","async","settingsRef","doc","db","settingsSnap","getDoc","exists","settingsData","data","Number","error","console","loadCouponValueFromSettings","setGoalProgress","setMyContribution","setGoalAchieved","setIsResettingGoal","showDonateModal","showSellCouponModal","sellAmount","setSellAmount","showGiftCouponModal","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","showDonationHistoryModal","getCachedFirestoreData","useCallback","key","cached","localStorage","getItem","timestamp","JSON","parse","Date","now","setCachedFirestoreData","cacheItem","setItem","stringify","processGoalData","goalData","targetAmount","progress","donations","Array","isArray","map","donation","processedTimestamp","toDate","toISOString","seconds","timestampISO","_objectSpread","amount","userName","message","myTotal","filter","d","reduce","sum","current","forceRefresh","arguments","length","undefined","cacheKey","cachedData","goalDocRef","goalDocSnap","warn","AlchanLoading","_Fragment","coupons","isAdmin","isSuperAdmin","window","confirm","batch","writeBatch","goalRef","usersQuery","query","collection","where","getDocs","forEach","userDocument","userRef","id","update","updatedAt","serverTimestamp","donationCount","resetAt","resetBy","commit","removeItem","alert","latestGoalData","freshDonations","showDebugInfo","debugInfo","donationsCount","userCoupons","userCash","cash","log","clear","location","reload","lineHeight","DonateCouponModal","onDonate","memo","donationAmount","parseInt","isNaN","prev","code","details","stack","SellCouponModal","SellCoupon","setTimeout","GiftCouponModal","recipients","handleGiftCoupon","recipientUser","find","u","name","recipientId","DonationHistoryModal","students","LoginWarning"],"sourceRoot":""}