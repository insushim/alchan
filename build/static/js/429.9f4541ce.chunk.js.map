{"version":3,"file":"static/js/429.9f4541ce.chunk.js","mappings":"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","sources":["hooks/usePolling.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","components/AlchanLayout.js","utils/avatarSystem.js","components/Avatar.js","utils/achievementSystem.js","utils/levelSystem.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo, memo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard, CheckCircle\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'taskApprovals', label: ' ', icon: CheckCircle, path: '/admin/approvals', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = memo(({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n));\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = memo(({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n));\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = memo(({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n));\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    let timeoutId;\r\n    const handleResize = () => {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => setIsMobile(window.innerWidth < 768), 150);\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Gift, Settings, LayoutDashboard\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo, memo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nconst MobileNav = memo(function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n});\n\nexport default MobileNav;\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    const handleAppInstalled = () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    };\r\n    window.addEventListener('appinstalled', handleAppInstalled);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n      window.removeEventListener('appinstalled', handleAppInstalled);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React, { memo } from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nconst UpdateNotification = memo(function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\n\nexport default UpdateNotification;\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (1 )\r\n              const lastUpdated = localStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 60 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    // localStorage    (     )\r\n    localStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { getStreakInfo } from './DailyReward';\r\nconst DailyRewardBanner = lazy(() => import('./DailyReward').then(m => ({ default: m.DailyRewardBanner })));\r\nconst WelcomePopup = lazy(() => import('./WelcomePopup'));\r\nconst HelpButton = lazy(() => import('./HelpButton'));\r\nimport { db, doc, updateDoc, increment } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    - Dashboard lazy \r\nconst Dashboard = lazy(() => import('../pages/dashboard/Dashboard'));\r\n\r\n//  []       -  \r\nconst ItemStore = lazy(() => import('../pages/market/ItemStore'));\r\nconst MyItems = lazy(() => import('../pages/my-items/MyItems'));\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminApprovalPanel = lazy(() => import('../pages/admin/AdminApprovalPanel'));\r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(() => {\r\n    try {\r\n      const dismissed = localStorage.getItem('alchan_update_dismissed');\r\n      if (!dismissed) return false;\r\n      // 24    \r\n      return Date.now() - parseInt(dismissed) < 24 * 60 * 60 * 1000;\r\n    } catch { return false; }\r\n  });\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && !userDoc?.isAdmin && !userDoc?.isSuperAdmin && !userDoc?.isTeacher) {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.isAdmin, userDoc?.isSuperAdmin, userDoc?.isTeacher]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //    ( )\r\n  useEffect(() => {\r\n    let timeoutId;\r\n    const handleResize = () => {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => {\r\n        const mobile = window.innerWidth < 768;\r\n        setIsMobile(mobile);\r\n        if (mobile) {\r\n          setIsSidebarOpen(false);\r\n        }\r\n      }, 150);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return <Navigate to={user ? '/dashboard/tasks' : '/login'} replace />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/approvals\" element={<AdminRoute><AdminApprovalPanel /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => {\r\n            setShowUpdateDismissed(true);\r\n            try { localStorage.setItem('alchan_update_dismissed', Date.now().toString()); } catch {}\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      <HelpButton />\r\n\r\n      {/*     */}\r\n      <WelcomePopup />\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   index.css  */}\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\n\r\n// ============================================================\r\n//    \r\n// ============================================================\r\n\r\n/**\r\n * Firestore Timestamp, Date, ISO ,      Date  \r\n * @param {any} timestamp -  \r\n * @returns {Date}\r\n */\r\nexport function safeTimestampToDate(timestamp) {\r\n  try {\r\n    if (!timestamp) return new Date();\r\n    if (timestamp instanceof Date) {\r\n      return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n    }\r\n    if (typeof timestamp.toDate === 'function') {\r\n      const date = timestamp.toDate();\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    if (timestamp.seconds) {\r\n      const date = new Date(timestamp.seconds * 1000);\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    if (typeof timestamp === 'string' || typeof timestamp === 'number') {\r\n      const date = new Date(timestamp);\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    return new Date();\r\n  } catch {\r\n    return new Date();\r\n  }\r\n}\r\n\r\n/**\r\n * localStorage  Firestore   \r\n * @param {string} key -  \r\n * @param {string} userId -  ID\r\n * @param {number} cacheDuration -   (ms)\r\n * @returns {any|null}\r\n */\r\nexport function getCachedFirestoreData(key, userId, cacheDuration) {\r\n  try {\r\n    const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n    if (cached) {\r\n      const { data, timestamp } = JSON.parse(cached);\r\n      if (Date.now() - timestamp < cacheDuration) {\r\n        return data;\r\n      }\r\n    }\r\n  } catch (error) {\r\n    logger.warn('[Cache] getCachedFirestoreData failed:', error);\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * localStorage  Firestore   \r\n * @param {string} key -  \r\n * @param {string} userId -  ID\r\n * @param {any} data -  \r\n */\r\nexport function setCachedFirestoreData(key, userId, data) {\r\n  try {\r\n    localStorage.setItem(\r\n      `firestore_cache_${key}_${userId}`,\r\n      JSON.stringify({ data, timestamp: Date.now() })\r\n    );\r\n  } catch (error) {\r\n    logger.warn('[Cache] setCachedFirestoreData failed:', error);\r\n  }\r\n}\r\n\r\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","AppIcon","_ref","className","style","_jsxs","viewBox","fill","xmlns","children","id","x1","y1","x2","y2","gradientUnits","_jsx","offset","stopColor","x","y","width","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","filter","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","CheckCircle","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","memo","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","onClick","concat","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","userDoc","logout","useAuth","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","timeoutId","handleResize","clearTimeout","addEventListener","removeEventListener","toggleCategory","categoryId","prev","_objectSpread","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","e","isAdmin","isSuperAdmin","userRole","userName","name","nickname","renderMenuSection","categoryKey","items","map","childItems","child","isSubGroup","size","charAt","_Fragment","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","fontSize","setFontSize","useTheme","resetTutorial","user","showTutorial","setShowTutorial","uid","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","Object","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","amount","formatKoreanNumber","Modal","stopPropagation","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","userId","config","levelInfo","useMemo","netAssets","Number","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","sort","a","b","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","target","document","closeModal","color","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","classCode","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","message","Trash2","type","value","onChange","placeholder","maxLength","autoFocus","trimmed","trim","disabled","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","parseInt","Date","now","handleBeforeInstall","preventDefault","handleAppInstalled","handleDismiss","toString","Share","Plus","outcome","userChoice","log","Download","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","badge","vibrate","DailyRewardBanner","lazy","then","m","default","WelcomePopup","HelpButton","Dashboard","ItemStore","MyItems","PersonalShop","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","AdminApprovalPanel","AdminItemPage","AdminDatabase","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","from","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","_unused","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","timer","handleDailyRewardClaim","rewardAmount","userRef","updateDoc","increment","globalCacheService","invalidate","page","mobile","closeSidebar","toggleSidebarCollapse","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","adminTabMode","MobileNav","UpdateNotification","_unused2","WifiOff","onClaim","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","border","expression","saved","JSON","parse","saveAvatarConfig","stringify","dispatchEvent","CustomEvent","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","find","h","includes","AVATAR_CATEGORIES","darkenColor","hex","percent","r","slice","g","Math","max","floor","padStart","s","f","o","noseColor","borderStyle","getHairFill","cursor","overflow","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","opacity","earPositions","round","oval","square","heart","long","earPos","ry","i","transform","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","description","condition","stats","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","values","stored","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","findIndex","l","nextLevel","progress","currentMin","nextMin","min","currentAssets","assetsToNextLevel","number","unit","num","parseFloat","isNaN","isNegative","units","resultParts","remaining","abs","quotient","toLocaleString","maximumFractionDigits","join","formatKoreanCurrency","STREAK_REWARDS","day","reward","today","toDateString","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","showPopup","setShowPopup","info","handleClaim","toISOString","success","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","boxShadow","animation","StreakDisplay","currentStreak","StreakRewardInfo","fontWeight","ItemContext","createContext","useItems","context","useContext","warn","userItems","marketListings","marketOffers","addItem","purchaseItem","updateItem","deleteItem","useItem","updateUserItemQuantity","listItemForSale","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","refreshData","isAuthAdmin","authLoading","deductCash","addCash","optimisticUpdate","currentUserClassCode","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","getItemContextData","httpsCallable","functions","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","Error","storeItems","groupedUserItems","updateLocalUserItems","newUserItems","tempId","tempNewItem","newItemData","prevItems","token","getIdToken","functionUrl","response","fetch","method","headers","body","ok","errorText","text","status","json","itemId","updatesToApply","quantity","itemToPurchase","totalPrice","price","newUserItem","random","durationMs","purchasedAt","originalUserItems","originalStock","stock","originalPrice","existingIndex","updated","restocked","newStock","newPrice","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","metadata","itemName","pricePerItem","inventoryItemId","itemToUse","quantityToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","safeTimestampToDate","timestamp","getTime","toDate","date","seconds","getCachedFirestoreData","cacheDuration","cached","setCachedFirestoreData","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","couponAmount","firestore","logsRef","collection","logData","createdAt","docRef","addDoc","logId"],"ignoreList":[],"sourceRoot":""}