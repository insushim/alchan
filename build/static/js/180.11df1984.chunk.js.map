{"version":3,"file":"static/js/180.11df1984.chunk.js","mappings":"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","sources":["LoginWarning.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/modals/DonateCouponModal.js","numberFormatter.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","pages/admin/AdminItemPage.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","utils/avatarSystem.js","components/Avatar.js","utils/levelSystem.js","utils/achievementSystem.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","TaskItem.js","utils/jobTaskRewards.js","JobList.js","CommonTaskList.js","components/modals/TransferModal.js","services/optimizedFirebaseService.js","SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","components/DailyReward.js","Dashboard.js","pages/market/ItemStore.js","MyItems.js","MyAssets.js","pages/market/ItemMarket.js","pages/banking/ParkingAccount.js","pages/banking/Banking.js","components/AvatarEditor.js","MyProfile.js","components/AlchanLayout.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\n//   \r\nconst modalBackdropStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 1000,\r\n};\r\n\r\n//   \r\nconst modalContainerStyle = {\r\n  backgroundColor: \"white\",\r\n  padding: \"20px\",\r\n  borderRadius: \"8px\",\r\n  maxWidth: \"500px\",\r\n  width: \"90%\",\r\n  maxHeight: \"90vh\",\r\n  overflowY: \"auto\",\r\n  boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\r\n};\r\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      console.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      console.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div style={modalBackdropStyle} onClick={handleCancel}>\r\n      <div style={modalContainerStyle} onClick={(e) => e.stopPropagation()}>\r\n        <h3\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"600\",\r\n            marginBottom: \"15px\",\r\n            color: \"#1f2937\",\r\n          }}\r\n        >\r\n           \r\n        </h3>\r\n        <p\r\n          style={{\r\n            marginBottom: \"10px\",\r\n            fontSize: \"14px\",\r\n            color: \"#4b5563\",\r\n          }}\r\n        >\r\n             .\r\n        </p>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n          }}\r\n        >\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n            color: \"#4f46e5\",\r\n          }}\r\n        >\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"15px\" }}>\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              style={{\r\n                display: \"block\",\r\n                marginBottom: \"5px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n              }}\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"8px 12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                outline: \"none\", //     \r\n              }}\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#fee2e2\", //  \r\n                border: \"1px solid #fecaca\", //  \r\n                borderRadius: \"6px\",\r\n                padding: \"12px 15px\",\r\n                marginBottom: \"15px\",\r\n                color: \"#b91c1c\", //   \r\n                fontSize: \"14px\",\r\n              }}\r\n            >\r\n              <p style={{ margin: 0 }}> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n              padding: \"10px 15px\",\r\n              backgroundColor: \"#eef2ff\", //   \r\n              borderRadius: \"6px\",\r\n              borderLeft: \"4px solid #4f46e5\", //   \r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"600\",\r\n                color: \"#1f2937\", //   \r\n              }}\r\n            >\r\n              <span> :</span>\r\n              <span style={{ color: \"#4f46e5\" /*   */ }}>\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"10px\",\r\n              marginTop: \"20px\",\r\n            }}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#f3f4f6\", //   \r\n                color: \"#4b5563\", //   \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                cursor: \"pointer\",\r\n                transition: \"background-color 0.2s ease\",\r\n              }}\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#ef4444\", //   ( )\r\n                color: \"white\", //  \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\", //   \r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1, //  \r\n                transition: \"background-color 0.2s ease, opacity 0.2s ease\",\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing} //  \r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      console.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      console.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop\"\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        zIndex: 1000,\r\n      }}\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal\"\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          padding: \"24px\",\r\n          width: \"90%\",\r\n          maxWidth: \"400px\",\r\n          boxShadow: \"0 10px 25px rgba(0, 0, 0, 0.1)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 style={{ marginTop: 0, color: \"#374151\" }}> </h3>\r\n        <div style={{ marginBottom: \"16px\", color: \"#6b7280\" }}>\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"16px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : console.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"24px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : console.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"modal-actions\"\r\n          style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"10px\" }}\r\n        >\r\n          <button\r\n            className=\"cancel-button\"\r\n            onClick={closeModal}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#f3f4f6\",\r\n              color: \"#4b5563\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#10b981\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"500\",\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showDonationHistoryModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    width: \"100%\",\r\n    maxWidth: \"600px\",\r\n    maxHeight: \"85vh\",\r\n    overflow: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  };\r\n\r\n  const modalHeaderStyle = {\r\n    padding: \"16px 20px\",\r\n    borderBottom: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f9fafb\",\r\n  };\r\n\r\n  const modalBodyStyle = {\r\n    padding: \"20px\",\r\n    overflowY: \"auto\",\r\n    maxHeight: \"calc(85vh - 120px)\",\r\n  };\r\n\r\n  const modalFooterStyle = {\r\n    padding: \"16px 20px\",\r\n    borderTop: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  };\r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        console.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          console.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          console.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          console.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={handleClose}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <div style={modalHeaderStyle}>\r\n          <h3 style={{ margin: 0, fontSize: \"18px\", fontWeight: \"600\", color: \"#1f2937\" }}>\r\n               \r\n            {userClassCode && (\r\n              <span style={{ \r\n                marginLeft: \"8px\", \r\n                fontSize: \"14px\", \r\n                backgroundColor: \"#dbeafe\", \r\n                color: \"#1e40af\", \r\n                padding: \"4px 8px\", \r\n                borderRadius: \"12px\", \r\n                fontWeight: \"500\" \r\n              }}>\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              background: \"none\", \r\n              border: \"none\", \r\n              cursor: \"pointer\", \r\n              fontSize: \"20px\", \r\n              color: \"#9ca3af\", \r\n              padding: \"0\", \r\n              lineHeight: \"1\" \r\n            }} \r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div style={modalBodyStyle}>\r\n          <div style={{ \r\n            backgroundColor: \"#eef2ff\", \r\n            padding: \"12px 15px\", \r\n            borderRadius: \"8px\", \r\n            marginBottom: \"20px\", \r\n            border: \"1px solid #c7d2fe\" \r\n          }}>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\", \r\n              marginBottom: \"8px\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                  \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                   \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div style={{ textAlign: \"center\", padding: \"40px 0\", color: \"#6b7280\" }}>\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div style={{ color: \"#ef4444\", textAlign: \"center\", padding: \"40px 0\" }}>\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span style={{ \r\n                              marginLeft: \"8px\", \r\n                              fontSize: \"12px\", \r\n                              backgroundColor: \"#dbeafe\", \r\n                              color: \"#1e40af\", \r\n                              padding: \"2px 6px\", \r\n                              borderRadius: \"10px\", \r\n                              fontWeight: \"600\", \r\n                              verticalAlign: \"middle\" \r\n                            }}>\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td style={{ \r\n                          ...tableStyles.td, \r\n                          textAlign: \"right\", \r\n                          color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\", \r\n                          fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\" \r\n                        }}>\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p style={{ margin: \"0 0 8px 0\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                            \r\n                  </p>\r\n                  <p style={{ margin: 0, fontSize: \"14px\" }}>\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div style={modalFooterStyle}>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              padding: \"8px 16px\", \r\n              backgroundColor: \"#e5e7eb\", \r\n              color: \"#374151\", \r\n              border: \"none\", \r\n              borderRadius: \"6px\", \r\n              cursor: \"pointer\", \r\n              fontWeight: \"500\", \r\n              transition: \"background-color 0.2s, color 0.2s\" \r\n            }}\r\n            onMouseOver={(e) => {\r\n              e.target.style.backgroundColor = \"#d1d5db\";\r\n              e.target.style.color = \"#1f2937\";\r\n            }}\r\n            onMouseOut={(e) => {\r\n              e.target.style.backgroundColor = \"#e5e7eb\";\r\n              e.target.style.color = \"#374151\";\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 1000,\r\n        padding: \"20px\",\r\n      }}\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n          width: \"100%\",\r\n          maxWidth: \"500px\",\r\n          overflow: \"hidden\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderBottom: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            backgroundColor: \"#f9fafb\",\r\n          }}\r\n        >\r\n          <h3\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"18px\",\r\n              fontWeight: \"600\",\r\n              color: \"#1f2937\",\r\n            }}\r\n          >\r\n             \r\n            {classCode && (\r\n              <span\r\n                style={{\r\n                  marginLeft: \"8px\",\r\n                  fontSize: \"14px\",\r\n                  backgroundColor: \"#dbeafe\",\r\n                  color: \"#1e40af\",\r\n                  padding: \"4px 8px\",\r\n                  borderRadius: \"12px\",\r\n                  fontWeight: \"500\",\r\n                }}\r\n              >\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              background: \"none\",\r\n              border: \"none\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontSize: \"20px\",\r\n              color: \"#9ca3af\",\r\n              padding: \"0\",\r\n              lineHeight: \"1\",\r\n            }}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ padding: \"20px\" }}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                backgroundColor: \"#eef2ff\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #c7d2fe\",\r\n              }}\r\n            >\r\n              <span\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"500\",\r\n                  color: \"#4338ca\",\r\n                }}\r\n              >\r\n                  \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontSize: \"16px\",\r\n                  fontWeight: \"600\",\r\n                  color: \"#4f46e5\",\r\n                }}\r\n              >\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"16px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                resize: \"vertical\",\r\n                minHeight: \"80px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#f0fdf4\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #bbf7d0\",\r\n                marginBottom: \"20px\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={{\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"500\",\r\n                    color: \"#15803d\",\r\n                  }}\r\n                >\r\n                    \r\n                </span>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"16px\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#16a34a\",\r\n                  }}\r\n                >\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderTop: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            gap: \"12px\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#e5e7eb\",\r\n              color: \"#374151\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontWeight: \"500\",\r\n              opacity: isDonating ? 0.6 : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// console.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// console.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// console.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// console.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// console.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// console.log(formatCouponCount(782));             // \"782\"\r\n// console.log(formatCouponCount(38));              // \"38\"","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    console.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    console.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    console.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    console.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  console.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  console.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    console.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      console.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    console.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      console.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n  }, [activityTypeFilter, searchTerm]); //     \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      console.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronRight, ChevronDown,\r\n  LayoutDashboard, Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, Sparkles, LogOut,\r\n  Boxes, Store, RefreshCw, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  Briefcase, ListTodo\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'gonuGame', label: ' ', icon: LayoutDashboard, path: '/gonu-game', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'itemMarket', label: ' ', icon: RefreshCw, path: '/item-market', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category -  ( )\r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n\r\n  //  /  \r\n  { id: 'adminUserGroup', label: '  ', icon: Users, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'classMemberManagement', label: ' ', icon: Users, path: '/admin/class-members', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminAssetGroup', label: '  ', icon: Banknote, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminSettingsGroup', label: '  ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminAppSettings', label: '/ ', icon: Target, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'taskManagement', label: ' ', icon: ListTodo, path: '/admin/task-management', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'jobManagement', label: ' ', icon: Briefcase, path: '/admin/job-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'salarySettings', label: ' ', icon: Banknote, path: '/admin/salary-settings', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //   \r\n  { id: 'adminSystemGroup', label: ' ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminPage', label: ' ', icon: Settings, path: '/admin/page', parentId: 'adminCategory', adminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = (categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  };\r\n\r\n  const isActive = (path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  };\r\n\r\n  const hasActiveChild = (categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  };\r\n\r\n  const handleItemClick = (item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  };\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            height: '64px',\r\n            minHeight: '64px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: 'linear-gradient(135deg, #4f46e5, #7c3aed, #4f46e5)'\r\n          }}\r\n        >\r\n          <div style={{ padding: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' }}>\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div\r\n          style={{\r\n            height: '72px',\r\n            minHeight: '72px',\r\n            margin: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            alignItems: 'center',\r\n            background: 'linear-gradient(135deg, rgba(10, 10, 18, 0.95), rgba(20, 20, 35, 0.95))',\r\n            border: '1px solid rgba(0, 255, 242, 0.2)',\r\n            boxShadow: '0 0 15px rgba(0, 255, 242, 0.1)',\r\n          }}\r\n        >\r\n          {/*   */}\r\n          <div style={{ position: 'absolute', top: '-20px', right: '-20px', width: '80px', height: '80px', background: 'rgba(255,255,255,0.1)', borderRadius: '50%' }} />\r\n          <div style={{ position: 'absolute', bottom: '-30px', left: '-10px', width: '60px', height: '60px', background: 'rgba(255,255,255,0.08)', borderRadius: '50%' }} />\r\n\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '14px', padding: '0 18px', width: '100%', position: 'relative', zIndex: 10 }}>\r\n            {/*   */}\r\n            <div style={{ padding: '6px', background: 'rgba(255,255,255,0.05)', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0,0,0,0.15)', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <span style={{ fontSize: '22px', fontWeight: '900', color: '#00fff2', fontFamily: \"'Jua', sans-serif\", lineHeight: '1.1', textShadow: '0 0 10px rgba(0, 255, 242, 0.5)' }}></span>\r\n              <span style={{ fontSize: '11px', fontWeight: 'bold', color: 'rgba(232, 232, 255, 0.7)', letterSpacing: '0.2em', lineHeight: '1.1', marginTop: '3px' }}>ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                position: 'absolute',\r\n                right: '12px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                padding: '6px',\r\n                borderRadius: '50%',\r\n                background: 'rgba(255,255,255,0.2)',\r\n                border: 'none',\r\n                color: 'white',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport {\r\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ', ,   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        borderRadius: \"50%\",\r\n        overflow: \"hidden\",\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <div style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, -60%)\", //    \r\n      }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    console.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\n\r\n//  \r\nconst formatMoney = (amount) => {\r\n  if (amount >= 100000000) {\r\n    const ok = Math.floor(amount / 100000000);\r\n    const man = Math.floor((amount % 100000000) / 10000);\r\n    if (man > 0) return `${ok} ${man.toLocaleString()}`;\r\n    return `${ok}`;\r\n  }\r\n  if (amount >= 10000) {\r\n    const man = Math.floor(amount / 10000);\r\n    return `${man.toLocaleString()}`;\r\n  }\r\n  return new Intl.NumberFormat('ko-KR').format(amount);\r\n};\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer\"\r\n              style={{ background: 'rgba(167, 139, 250, 0.2)' }}\r\n            >\r\n              <span style={{ fontSize: '14px' }}>{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span style={{ fontSize: '9px', color: '#9ca3af' }}>LEVEL</span>\r\n                <span style={{ fontSize: '12px', fontWeight: '700', color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span style={{ fontSize: '14px', marginLeft: '2px' }}>{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10\"\r\n        style={{ height: '64px', minHeight: '64px', maxHeight: '64px', padding: '0 16px' }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            style={{\r\n              padding: '8px',\r\n              borderRadius: '8px',\r\n              border: '1px solid rgba(0, 255, 242, 0.1)',\r\n              background: 'rgba(255, 255, 255, 0.05)',\r\n              color: 'white',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div style={{ fontSize: '15px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n               <span style={{ color: '#00fff2', fontFamily: \"'Jua', sans-serif\" }}></span> ! \r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#94a3b8', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(16, 185, 129, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#34d399'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#10b981',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontWeight: 'bold',\r\n              fontSize: '12px'\r\n            }}></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(244, 63, 94, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#fb7185'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#f43f5e',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}><Gift size={14} /></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              padding: '6px 12px',\r\n              background: `rgba(167, 139, 250, 0.1)`,\r\n              borderRadius: '8px',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease',\r\n            }}\r\n            onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.2)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.1)'}\r\n          >\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: '28px',\r\n              height: '28px',\r\n              borderRadius: '6px',\r\n              background: levelInfo?.color || '#a78bfa',\r\n              fontSize: '14px',\r\n            }}>\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', color: levelInfo?.color || '#a78bfa', lineHeight: '1.2' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div style={{ fontSize: '11px', fontWeight: 'bold', color: '#e8e8ff', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px',\r\n                marginLeft: '4px',\r\n                padding: '2px 6px',\r\n                background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                           bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                           bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                borderRadius: '4px',\r\n              }}>\r\n                <span style={{ fontSize: '12px' }}>{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ position: 'relative' }} ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px',\r\n                paddingLeft: '12px',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                background: 'transparent',\r\n                border: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <div style={{ textAlign: 'right' }}>\r\n                <div style={{ fontSize: '13px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName}</div>\r\n                <div style={{ fontSize: '11px', color: '#818cf8', fontWeight: '500', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games', '/gonu-game'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = (tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  };\r\n\r\n  const handleTabClick = (tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      console.log('PWA  ');\r\n    } else {\r\n      console.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      console.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                console.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              console.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //    (1)\r\n      setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n\r\n    } catch (error) {\r\n      console.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        console.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      console.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      console.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"./utils/jobTaskRewards\";\r\n\r\nexport default function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    console.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      console.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    console.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    console.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      console.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    borderRadius: \"8px\",\r\n    cursor: isCompleted ? \"default\" : \"pointer\",\r\n    transition: \"all 0.2s ease\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    display: \"flex\",\r\n    flexDirection: \"row\", //   \r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    position: \"relative\",\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    marginBottom: \"8px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n    gap: isMobile ? \"6px\" : \"8px\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n    flexGrow: 1,\r\n    minWidth: 0,\r\n    overflow: \"hidden\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontWeight: \"600\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    whiteSpace: \"nowrap\",\r\n    lineHeight: \"1.4\",\r\n    flex: 1,\r\n    minWidth: 0,\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n    flexShrink: 0,\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    borderRadius: \"10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n    fontWeight: \"500\",\r\n    whiteSpace: \"nowrap\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n      width: isMobile ? \"95%\" : \"90%\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n      marginBottom: isMobile ? \"8px\" : \"10px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n      marginBottom: isMobile ? \"20px\" : \"30px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div style={mobileModalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n          <h3 style={mobileModalTitleStyle}>  </h3>\r\n          <p style={mobileModalSubtitleStyle}>     !</p>\r\n\r\n          <div style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={taskItemStyle}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div style={taskInfoStyle}>\r\n          <span style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n}\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  cursor: \"pointer\",\r\n  padding: \"4px\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  position: \"absolute\",\r\n  bottom: \"calc(100% + 8px)\",\r\n  left: \"50%\",\r\n  transform: \"translateX(-50%)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  borderRadius: \"6px\",\r\n  fontSize: \"12px\",\r\n  fontWeight: \"500\",\r\n  whiteSpace: \"nowrap\",\r\n  zIndex: 10,\r\n  pointerEvents: \"none\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  position: \"absolute\",\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 10000,\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  borderRadius: \"20px\",\r\n  padding: \"40px\",\r\n  maxWidth: \"600px\",\r\n  width: \"90%\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  fontSize: \"28px\",\r\n  fontWeight: \"bold\",\r\n  textAlign: \"center\",\r\n  marginBottom: \"10px\",\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  fontSize: \"16px\",\r\n  textAlign: \"center\",\r\n  color: \"#a0a0c0\",\r\n  marginBottom: \"30px\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  display: \"flex\",\r\n  gap: \"20px\",\r\n  justifyContent: \"center\",\r\n  flexWrap: \"wrap\",\r\n};\r\n\r\nconst cardStyle = {\r\n  width: \"200px\",\r\n  height: \"280px\",\r\n  perspective: \"1000px\",\r\n  cursor: \"pointer\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"#fff\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  fontSize: \"24px\",\r\n  fontWeight: \"bold\",\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  fontSize: \"36px\",\r\n  fontWeight: \"bold\",\r\n  color: \"#667eea\",\r\n  marginBottom: \"10px\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  fontSize: \"18px\",\r\n  color: \"#666\",\r\n};","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nexport default function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        borderRadius: \"10px\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        overflow: \"hidden\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        marginBottom: \"15px\",\r\n        backdropFilter: \"blur(5px)\",\r\n        display: \"flex\", // Flexbox  \r\n        flexDirection: \"column\", //   \r\n        height: \"100%\", //      ( )\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text\"\r\n          style={{\r\n            fontWeight: \"700\",\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 1px 3px rgba(0,0,0,0.2)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                marginRight: \"8px\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div style={{ padding: isMobile ? \"8px\" : \"10px\", flexGrow: 1, overflowY: \"auto\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n              textAlign: \"center\",\r\n              margin: \"10px 0\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */ width: \"100%\",\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                borderRadius: \"6px\",\r\n                cursor: \"pointer\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n                marginTop: \"0\", //   \r\n                transition: \"all 0.2s ease\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div style={{ padding: \"20px\", textAlign: \"center\", color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div style={{\r\n      display: \"grid\",\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showTransferModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    padding: \"30px\",\r\n    maxWidth: \"450px\",\r\n    width: \"100%\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    position: \"relative\",\r\n  };\r\n\r\n  const closeButtonStyle = {\r\n    position: \"absolute\",\r\n    top: \"15px\",\r\n    right: \"15px\",\r\n    background: \"none\",\r\n    border: \"none\",\r\n    fontSize: \"24px\",\r\n    cursor: \"pointer\",\r\n    color: \"#6b7280\",\r\n    padding: \"0\",\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  };\r\n\r\n  const inputStyle = {\r\n    width: \"100%\",\r\n    padding: \"10px 12px\",\r\n    border: \"1px solid #d1d5db\",\r\n    borderRadius: \"6px\",\r\n    fontSize: \"14px\",\r\n    outline: \"none\",\r\n    transition: \"border-color 0.2s\",\r\n  };\r\n\r\n  const selectStyle = {\r\n    ...inputStyle,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"white\",\r\n  };\r\n\r\n  const labelStyle = {\r\n    display: \"block\",\r\n    marginBottom: \"8px\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    color: \"#374151\",\r\n  };\r\n\r\n  const buttonStyle = {\r\n    padding: \"10px 20px\",\r\n    borderRadius: \"6px\",\r\n    border: \"none\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.2s\",\r\n  };\r\n\r\n  const primaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#4f46e5\",\r\n    color: \"white\",\r\n  };\r\n\r\n  const secondaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#e5e7eb\",\r\n    color: \"#374151\",\r\n    marginRight: \"10px\",\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={() => setShowTransferModal(false)}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          style={closeButtonStyle}\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 style={{ \r\n          fontSize: \"20px\", \r\n          fontWeight: \"600\", \r\n          marginBottom: \"25px\", \r\n          color: \"#1f2937\" \r\n        }}>\r\n           \r\n        </h2>\r\n\r\n        <div style={{ \r\n          backgroundColor: \"#f3f4f6\", \r\n          borderRadius: \"8px\", \r\n          padding: \"12px\", \r\n          marginBottom: \"20px\" \r\n        }}>\r\n          <p style={{ \r\n            fontSize: \"14px\", \r\n            color: \"#4b5563\", \r\n            margin: \"0\" \r\n          }}>\r\n              : <strong style={{ color: \"#1f2937\" }}>\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              style={selectStyle}\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"25px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={inputStyle}\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: \"flex\", \r\n            justifyContent: \"flex-end\", \r\n            paddingTop: \"10px\", \r\n            borderTop: \"1px solid #e5e7eb\" \r\n          }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              style={secondaryButtonStyle}\r\n              onMouseOver={(e) => {\r\n                e.target.style.backgroundColor = \"#d1d5db\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.backgroundColor = \"#e5e7eb\";\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={primaryButtonStyle}\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n              onMouseOver={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4338ca\";\r\n                }\r\n              }}\r\n              onMouseOut={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4f46e5\";\r\n                }\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      console.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"./firebase\";\r\nimport \"./SystemMonitoring.css\";\r\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        console.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      console.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      console.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        console.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      console.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        console.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      console.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      console.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          console.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    [db, isSuperAdmin]\r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        console.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'marketControl') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      console.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs\" style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', padding: '16px', background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)', borderRadius: '16px', border: '1px solid #374151' }}>\r\n          <button\r\n            className={adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"taskManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"taskManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"jobSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"jobSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"studentManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"studentManagement\");\r\n              loadStudents();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"salarySettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"salarySettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"financialProducts\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"financialProducts\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"marketControl\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"marketControl\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"parkingAccount\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"parkingAccount\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"memberManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"memberManagement\");\r\n              loadClassMembers();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"databaseManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"databaseManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n            \r\n          </button>\r\n          {isSuperAdmin && (\r\n            <button\r\n              className={adminSelectedMenu === \"systemManagement\" ? \"active\" : \"\"}\r\n              onClick={() => setAdminSelectedMenu(\"systemManagement\")}\r\n              style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n            >\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"taskManagement\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          console.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          console.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobSettings\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    console.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      console.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentManagement\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"financialProducts\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs\" style={{ display: 'flex', gap: '8px', marginBottom: '16px' }}>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div className={`message-box ${financialMessage.type}`} style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form\" style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '12px', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button\" style={{ width: '100%' }}>\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"marketControl\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                  <p style={{ color: 'white' }}>\r\n                     :{\" \"}\r\n                    <span style={{\r\n                      fontWeight: 'bold',\r\n                      color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                      padding: '4px 12px',\r\n                      borderRadius: '16px',\r\n                      background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                    }}>\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px', marginBottom: '16px' }}>\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af' }}>\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: '#d97706',\r\n                  color: 'white',\r\n                  textAlign: 'center'\r\n                }}>\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(239, 68, 68, 0.1)',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(239, 68, 68, 0.3)'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: '#ef4444' }}>   </h4>\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '12px' }}>\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    background: '#ea580c',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"parkingAccount\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <p style={{ color: '#9ca3af', fontSize: '14px' }}>  </p>\r\n                  <p style={{ color: '#22c55e', fontSize: '32px', fontWeight: 'bold' }}>\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label style={{ display: 'block', marginBottom: '8px', color: '#9ca3af' }}>\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input\"\r\n                    style={{ marginBottom: '12px' }}\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginTop: '12px' }}>\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*     */}\r\n        {adminSelectedMenu === \"memberManagement\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"salarySettings\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"databaseManagement\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card\" style={{ minHeight: \"500px\", maxHeight: \"70vh\", overflow: \"auto\" }}>\r\n              <AdminDatabase />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"systemManagement\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    cacheTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    cacheTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    cacheTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    cacheTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      console.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      console.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"20px\",\r\n        marginBottom: \"20px\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"8px\",\r\n                marginBottom: \"12px\",\r\n                fontSize: \"13px\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <div>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"10px\",\r\n                  marginBottom: \"6px\",\r\n                }}\r\n              >\r\n                <span style={{ fontSize: \"32px\" }}>\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div\r\n                    style={{\r\n                      color: \"#fff\",\r\n                      fontSize: \"18px\",\r\n                      fontWeight: \"700\",\r\n                    }}\r\n                  >\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div style={{\r\n                      fontSize: \"11px\",\r\n                      color: \"rgba(255,255,255,0.8)\",\r\n                      marginTop: \"2px\"\r\n                    }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{\r\n                color: \"rgba(255,255,255,0.95)\",\r\n                fontSize: \"24px\",\r\n                fontWeight: \"800\",\r\n                marginTop: \"4px\"\r\n              }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                border: \"none\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                padding: \"14px 28px\",\r\n                borderRadius: \"14px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ marginTop: \"16px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                gap: \"4px\",\r\n              }}\r\n            >\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div\r\n                  key={day.day}\r\n                  style={{\r\n                    flex: 1,\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"8px\",\r\n                      borderRadius: \"4px\",\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                      marginBottom: \"4px\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span style={{\r\n                      fontSize: \"9px\",\r\n                      color: \"rgba(255,255,255,0.7)\"\r\n                    }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div style={{\r\n                textAlign: \"center\",\r\n                marginTop: \"8px\",\r\n                fontSize: \"12px\",\r\n                color: \"rgba(255,255,255,0.8)\",\r\n              }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{ textAlign: \"center\", padding: \"10px 0\" }}>\r\n          <div style={{\r\n            fontSize: \"48px\",\r\n            marginBottom: \"12px\",\r\n            animation: \"bounce 0.5s ease\"\r\n          }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div\r\n            style={{\r\n              color: \"#fff\",\r\n              fontSize: \"28px\",\r\n              fontWeight: \"800\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div style={{\r\n            color: \"rgba(255,255,255,0.9)\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"600\"\r\n          }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div style={{\r\n              marginTop: \"10px\",\r\n              padding: \"8px 16px\",\r\n              background: \"rgba(255,255,255,0.2)\",\r\n              borderRadius: \"20px\",\r\n              display: \"inline-block\",\r\n              fontSize: \"14px\",\r\n              color: \"#fff\",\r\n            }}>\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"inline-flex\",\r\n        alignItems: \"center\",\r\n        gap: \"6px\",\r\n        padding: \"4px 12px\",\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        borderRadius: \"14px\",\r\n        fontSize: \"13px\",\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n        fontWeight: \"600\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"16px\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 style={{\r\n        color: \"#e8e8ff\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"700\",\r\n        marginBottom: \"12px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"8px\"\r\n      }}>\r\n            \r\n      </h4>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"6px\" }}>\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              padding: \"6px 10px\",\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              borderRadius: \"8px\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n              fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n              fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n            }}>\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          style={{\r\n            marginTop: \"8px\",\r\n            padding: \"10px\",\r\n            background: \"#f59e0b15\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #f59e0b30\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <span style={{ color: \"#f59e0b\", fontSize: \"13px\", fontWeight: \"600\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","// src/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { db, functions } from \"./firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from './numberFormatter';\r\nimport JobList from \"./JobList\";\r\nimport CommonTaskList from \"./CommonTaskList\";\r\nimport TransferModal from \"./components/modals/TransferModal\";\r\nimport DonateCouponModal from \"./components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"./components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"./components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"./components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"./components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"./components/PageWrapper\";\r\nimport globalCacheService from \"./services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\nimport { DailyRewardBanner, getStreakInfo, claimDailyReward } from \"./components/DailyReward\";\r\n\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      console.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n  //     -     \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        //      (  )\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, {\r\n        cash: increment(rewardAmount),\r\n      });\r\n\r\n      //  \r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n\r\n      //   (  )\r\n      setTimeout(() => {\r\n        setShowDailyRewardPopup(false);\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      console.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        console.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      console.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    console.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      console.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    return () => {\r\n      realtimeManager.current.removeAllListeners();\r\n    };\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      console.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        console.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      console.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        console.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          console.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    console.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          console.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    console.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      console.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      console.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    console.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      console.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        console.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      console.log(\"[Dashboard]    \");\r\n    }\r\n  }, [userDoc?.classCode, setUserDoc, setJobs]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\"> </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: \"rgba(0, 0, 0, 0.7)\",\r\n            backdropFilter: \"blur(4px)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n            padding: \"20px\",\r\n            animation: \"fadeIn 0.3s ease-out\",\r\n          }}\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              maxWidth: \"400px\",\r\n              animation: \"slideUp 0.3s ease-out\",\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/*   */}\r\n            <div style={{ textAlign: \"right\", marginBottom: \"8px\" }}>\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                style={{\r\n                  background: \"rgba(255,255,255,0.2)\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  width: \"32px\",\r\n                  height: \"32px\",\r\n                  borderRadius: \"50%\",\r\n                  cursor: \"pointer\",\r\n                  fontSize: \"18px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*    */}\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n\r\n            {/*    */}\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              marginTop: \"12px\",\r\n              color: \"rgba(255,255,255,0.6)\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { useItems } from \"./contexts/ItemContext\";\r\nimport \"./styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"./LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"./firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n        \r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      console.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      console.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    console.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      console.log('[MyItems]   inventory   :');\r\n      console.log(':', allInventoryDocs.size);\r\n      console.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      console.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      console.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          console.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          console.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      console.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            console.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            console.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            console.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            console.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          console.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          console.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          console.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          console.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          console.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      console.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        console.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        console.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          console.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          console.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          console.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          console.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          console.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      console.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                console.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                          <button className=\"sell-to-market-button\" onClick={() => {\r\n                            handleOpenSellToMarketModal(group);\r\n                          }} disabled={isSyncing}> </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/MyAssets.js - Firestore      \r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  arrayUnion,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n} from \"./firebase\";\r\nimport { limit, runTransaction } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from './numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from './utils/firestoreHelpers';\r\nimport LoginWarning from \"./LoginWarning\";\r\nimport TransferModal from \"./components/modals/TransferModal\";\r\nimport { AlchanLoading } from \"./components/AlchanLayout\";\r\nimport { DailyRewardBanner } from \"./components/DailyReward\";\r\n\r\nexport default function MyAssets() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users, //    (    )\r\n    classmates, // ''     (,  )\r\n    allClassMembers, //  [] ''      (  )\r\n    loading: authLoading,\r\n    updateUser: updateUserInAuth,\r\n    addCashToUserById,\r\n    deductCash,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const userName =\r\n    userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  //  [ 1]   \r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false); //    \r\n  const dataFetchRef = useRef({}); //    \r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [deposits, setDeposits] = useState([]); //   \r\n  const [savings, setSavings] = useState([]); //   \r\n  const [loans, setLoans] = useState([]);\r\n  const [realEstateAssets, setRealEstateAssets] = useState([]);\r\n  const [totalNetAssets, setTotalNetAssets] = useState(0);\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n  const [transactionHistory, setTransactionHistory] = useState([]);\r\n  const [forceReload, setForceReload] = useState(0); //      \r\n\r\n  //  [ 2] Firebase Functions   ( )\r\n  const getUserAssetsDataFunction = httpsCallable(functions, 'getUserAssetsData');\r\n  const sellCouponFunction = httpsCallable(functions, 'sellCoupon');\r\n  const giftCouponFunction = httpsCallable(functions, 'giftCoupon');\r\n\r\n  //  [ 4]    \r\n  const CACHE_DURATION = 60 * 60 * 1000; //  [] 1 (Firestore  )\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  //  [ ] Firestore    \r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[MyAssets]     :\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] =\r\n    useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [transferRecipient, setTransferRecipient] = useState(\"\");\r\n  const [transferAmount, setTransferAmount] = useState(\"\");\r\n  const [showAllTransactions, setShowAllTransactions] = useState(false); //   / \r\n\r\n  //  [ 1]  timestamp  \r\n  const safeTimestampToDate = (timestamp) => {\r\n    try {\r\n      // null undefined \r\n      if (!timestamp) {\r\n        return new Date();\r\n      }\r\n\r\n      //  Date  \r\n      if (timestamp instanceof Date) {\r\n        return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n      }\r\n\r\n      // Firestore Timestamp  \r\n      if (timestamp && typeof timestamp.toDate === 'function') {\r\n        const date = timestamp.toDate();\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // seconds   Firestore Timestamp  \r\n      if (timestamp && timestamp.seconds) {\r\n        const date = new Date(timestamp.seconds * 1000);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // ISO  \r\n      if (typeof timestamp === 'string') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //   \r\n      if (typeof timestamp === 'number') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //     \r\n      return new Date();\r\n    } catch (error) {\r\n      return new Date();\r\n    }\r\n  };\r\n\r\n  //  [ 5]    \r\n  const isCacheValid = (cacheKey) => {\r\n    const cachedTime = dataFetchRef.current[cacheKey];\r\n    return cachedTime && (Date.now() - cachedTime) < CACHE_DURATION;\r\n  };\r\n\r\n  //  [ 6] localStorage   \r\n  const getCachedFirestoreData = (key) => {\r\n    try {\r\n      const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached);\r\n        if (Date.now() - timestamp < CACHE_DURATION) {\r\n          return data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const setCachedFirestoreData = (key, data) => {\r\n    try {\r\n      const cacheItem = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      localStorage.setItem(`firestore_cache_${key}_${userId}`, JSON.stringify(cacheItem));\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 2]     -     \r\n  const addTransaction = async (userId, amount, description) => {\r\n    try {\r\n      //    \r\n      const localKey = `pending_transactions_${userId}`;\r\n      const existing = localStorage.getItem(localKey);\r\n      const pendingTransactions = existing ? JSON.parse(existing) : [];\r\n\r\n      //   timestamp   - Date  \r\n      const now = new Date();\r\n      const newTransaction = {\r\n        id: `local_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        amount: Number(amount) || 0, //   \r\n        description: String(description) || \" \", //   \r\n        timestamp: now, // Date   \r\n        timestampISO: now.toISOString(), // ISO  \r\n        synced: false,\r\n      };\r\n\r\n      pendingTransactions.push(newTransaction);\r\n      localStorage.setItem(localKey, JSON.stringify(pendingTransactions, (key, value) => {\r\n        // Date  JSON   ISO  \r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n      //    \r\n      setTransactionHistory(prev => [newTransaction, ...prev.slice(0, 4)]);\r\n\r\n\r\n      //  [ 3]    (    )\r\n      setTimeout(async () => {\r\n        try {\r\n          await syncPendingTransactions(userId);\r\n        } catch (error) {\r\n        }\r\n      }, 1000);\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 4]     \r\n  const syncPendingTransactions = async (userId) => {\r\n    const localKey = `pending_transactions_${userId}`;\r\n    const pendingStr = localStorage.getItem(localKey);\r\n\r\n    if (!pendingStr) return;\r\n\r\n    try {\r\n      const pendingTransactions = JSON.parse(pendingStr, (key, value) => {\r\n        // JSON Date  \r\n        if (key === 'timestamp' && typeof value === 'string') {\r\n          return new Date(value);\r\n        }\r\n        return value;\r\n      });\r\n\r\n      const unsyncedTransactions = pendingTransactions.filter(tx => !tx.synced);\r\n\r\n      if (unsyncedTransactions.length === 0) return;\r\n\r\n      const batch = writeBatch(db);\r\n      const userTransactionsRef = collection(db, \"users\", userId, \"transactions\");\r\n\r\n      unsyncedTransactions.forEach(tx => {\r\n        const docRef = doc(userTransactionsRef);\r\n        batch.set(docRef, {\r\n          amount: tx.amount,\r\n          description: tx.description,\r\n          timestamp: serverTimestamp(), // Firestore serverTimestamp \r\n          localTimestamp: tx.timestampISO || tx.timestamp, //   \r\n          syncedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //   \r\n      const updatedTransactions = pendingTransactions.map(tx =>\r\n        unsyncedTransactions.find(utx => utx.id === tx.id)\r\n          ? { ...tx, synced: true }\r\n          : tx\r\n      );\r\n\r\n      localStorage.setItem(localKey, JSON.stringify(updatedTransactions, (key, value) => {\r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ ]          \r\n  const createDefaultGoalForClass = useCallback(async (classCode, goalId) => {\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", goalId);\r\n      const defaultGoalData = {\r\n        classCode: classCode,\r\n        targetAmount: 1000,\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        title: `${classCode}  `,\r\n        description: `${classCode}   .`,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        createdBy: userId,\r\n      };\r\n\r\n      //        ( )\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n        if (!goalDoc.exists()) {\r\n          transaction.set(goalDocRef, defaultGoalData);\r\n          setCachedFirestoreData(`goal_${goalId}`, defaultGoalData);\r\n        } else {\r\n          const existingData = goalDoc.data();\r\n          setCachedFirestoreData(`goal_${goalId}`, existingData);\r\n        }\r\n      });\r\n\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }, [userId]);\r\n\r\n  //  []     -    \r\n  const loadGoalData = useCallback(async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const cacheKey = `goal_${currentGoalId}`;\r\n    const cachedData = getCachedFirestoreData(cacheKey);\r\n\r\n    if (cachedData) {\r\n      setClassCouponGoal(Number(cachedData.targetAmount) || 1000);\r\n      setGoalProgress(Number(cachedData.progress) || 0);\r\n\r\n      const donations = Array.isArray(cachedData.donations) ? cachedData.donations : [];\r\n      setGoalDonations(donations);\r\n\r\n      const myDonations = donations.filter(d => d.userId === userId);\r\n      const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n      setMyContribution(myTotal);\r\n\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        //   \r\n        setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n        //   \r\n        const donations = Array.isArray(goalData.donations)\r\n          ? goalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(donations);\r\n\r\n        //   \r\n        const myDonations = donations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //   \r\n        setCachedFirestoreData(cacheKey, goalData);\r\n      } else {\r\n        //     \r\n        console.log('[MyAssets]     ');\r\n        await createDefaultGoalForClass(currentUserClassCode, currentGoalId);\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]    :', error);\r\n    }\r\n  }, [currentGoalId, currentUserClassCode, userId, createDefaultGoalForClass, getCachedFirestoreData, setCachedFirestoreData]);\r\n\r\n  const loadMyAssetsData = useCallback(async () => {\r\n    if (!userId || !db) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    //      \r\n    if (loadingRef.current) {\r\n      console.log('[MyAssets]       ');\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //  []     (limit )\r\n      const realEstateRef1 = query(collection(db, \"classes\", currentUserClassCode, \"realEstateProperties\"), where(\"owner\", \"==\", userId), limit(50));\r\n      const realEstateRef2 = query(collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"realestates\"), limit(50));\r\n      const realEstateRef3 = query(collection(db, \"realEstate\"), where(\"ownerId\", \"==\", userId), limit(50));\r\n\r\n      const [snap1, snap2, snap3] = await Promise.all([\r\n        getDocs(realEstateRef1),\r\n        getDocs(realEstateRef2),\r\n        getDocs(realEstateRef3),\r\n      ]);\r\n\r\n      const allRealEstateAssets = [];\r\n      snap1.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap2.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap3.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n\r\n      //    (  )\r\n      const parkingRef1 = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRef2 = collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"parkingAccounts\");\r\n\r\n      const [parkingSnap1, parkingSnap2] = await Promise.all([\r\n        getDoc(parkingRef1),\r\n        getDocs(parkingRef2),\r\n      ]);\r\n\r\n      let totalParkingBalance = 0;\r\n      if (parkingSnap1.exists()) {\r\n        totalParkingBalance += parkingSnap1.data().balance || 0;\r\n      }\r\n\r\n      parkingSnap2.forEach(doc => {\r\n        totalParkingBalance += doc.data().balance || 0;\r\n      });\r\n\r\n      setParkingBalance(totalParkingBalance);\r\n\r\n      //  []    (, ,   products  )\r\n      const productsRef = query(collection(db, \"users\", userId, \"products\"), limit(50));\r\n      const productsSnap = await getDocs(productsRef);\r\n\r\n      const depositsData = [];\r\n      const savingsData = [];\r\n      const loansData = [];\r\n\r\n      productsSnap.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') depositsData.push(product);\r\n        else if (product.type === 'savings') savingsData.push(product);\r\n        else if (product.type === 'loan') loansData.push(product);\r\n      });\r\n\r\n      setDeposits(depositsData);\r\n      setSavings(savingsData);\r\n      setLoans(loansData);\r\n\r\n      setRealEstateAssets(allRealEstateAssets);\r\n\r\n      //  []    useEffect  (  )\r\n      // loadGoalData() [user, currentGoalId]  useEffect \r\n\r\n      //     - activity_logs + transactions   \r\n      let activityData = [];\r\n      let transactionsData = [];\r\n\r\n      // 1. activity_logs   \r\n      try {\r\n        const activityLogsRef = query(\r\n          collection(db, \"activity_logs\"),\r\n          where(\"classCode\", \"==\", currentUserClassCode),\r\n          where(\"userId\", \"==\", userId),\r\n          limit(30)\r\n        );\r\n        const activityLogsSnap = await getDocs(activityLogsRef);\r\n        activityData = activityLogsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || data.type || ' ',\r\n              timestamp: data.timestamp,\r\n              type: data.type,\r\n              couponAmount: data.couponAmount || 0,\r\n              source: 'activity_logs'\r\n            };\r\n          })\r\n          //       \r\n          .filter(tx => tx.amount !== 0 || tx.couponAmount !== 0);\r\n      } catch (activityError) {\r\n        console.log('[MyAssets] activity_logs  :', activityError);\r\n      }\r\n\r\n      // 2.  transactions   ( )\r\n      try {\r\n        const transactionsRef = query(\r\n          collection(db, \"users\", userId, \"transactions\"),\r\n          limit(30)\r\n        );\r\n        const transactionsSnap = await getDocs(transactionsRef);\r\n        transactionsData = transactionsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || ' ',\r\n              timestamp: data.timestamp || data.createdAt,\r\n              type: data.type || 'transaction',\r\n              source: 'transactions'\r\n            };\r\n          })\r\n          .filter(tx => tx.amount !== 0);\r\n      } catch (transactionsError) {\r\n        console.log('[MyAssets] transactions  :', transactionsError);\r\n      }\r\n\r\n      //    (  ID )\r\n      const allTransactions = [...activityData, ...transactionsData];\r\n\r\n      // timestamp  \r\n      allTransactions.sort((a, b) => {\r\n        const dateA = a.timestamp?.toDate ? a.timestamp.toDate() : new Date(a.timestamp?.seconds * 1000 || 0);\r\n        const dateB = b.timestamp?.toDate ? b.timestamp.toDate() : new Date(b.timestamp?.seconds * 1000 || 0);\r\n        return dateB - dateA;\r\n      });\r\n\r\n      //  20 \r\n      setTransactionHistory(allTransactions.slice(0, 20));\r\n\r\n    } catch (fallbackError) {\r\n      console.error('[MyAssets]      :', fallbackError);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, [userId, currentUserClassCode]); // loadGoalData    \r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!authLoading && user) {\r\n      loadMyAssetsData();\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n      setParkingBalance(0);\r\n      setLoans([]);\r\n      setRealEstateAssets([]);\r\n      setTotalNetAssets(0);\r\n      setMyContribution(0);\r\n      setClassCouponGoal(1000);\r\n      setGoalProgress(0);\r\n      setCouponValue(1000);\r\n      setGoalDonations([]);\r\n      setTransactionHistory([]);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user]); // loadMyAssetsData    \r\n\r\n  useEffect(() => {\r\n    const cashValue = Number(userDoc?.cash) || 0;\r\n    const couponMonetaryValue = (Number(userDoc?.coupons) || 0) * Number(couponValue);\r\n    const realEstateValue = realEstateAssets.reduce(\r\n      (sum, asset) => sum + (Number(asset.price) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const depositsTotal = deposits.reduce(\r\n      (sum, deposit) => sum + (Number(deposit.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const savingsTotal = savings.reduce(\r\n      (sum, saving) => sum + (Number(saving.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance  - remainingPrincipal  balance )\r\n    const loanTotal = loans.reduce(\r\n      (sum, loan) => sum + (Number(loan.remainingPrincipal) || Number(loan.balance) || 0),\r\n      0\r\n    );\r\n    const calculatedTotalAssets =\r\n      cashValue +\r\n      couponMonetaryValue +\r\n      Number(parkingBalance) +\r\n      depositsTotal +\r\n      savingsTotal +\r\n      realEstateValue -\r\n      loanTotal;\r\n\r\n    setTotalNetAssets(calculatedTotalAssets);\r\n  }, [\r\n    userDoc?.cash,\r\n    userDoc?.coupons,\r\n    couponValue,\r\n    parkingBalance,\r\n    deposits,\r\n    savings,\r\n    realEstateAssets,\r\n    loans,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  //  []     -  \r\n  //       ( Firestore  )\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!user || !currentGoalId) {\r\n      return;\r\n    }\r\n\r\n    loadGoalData();\r\n  }, [user, currentGoalId]); // loadGoalData    \r\n\r\n  //  []    -   \r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode) {\r\n      alert(\"       .\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"   .\");\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    const currentCoupons = Number(userDoc?.coupons) || 0;\r\n    if (currentCoupons < donationAmount) {\r\n      alert(` . (: ${currentCoupons}, : ${donationAmount})`);\r\n      return false;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    //   (UI  )\r\n    const previousProgress = goalProgress;\r\n    const previousMyContribution = myContribution;\r\n    const previousDonations = goalDonations;\r\n\r\n    const newDonation = {\r\n      userId: userId,\r\n      userName: userName,\r\n      amount: donationAmount,\r\n      timestamp: new Date().toISOString(),\r\n      timestampISO: new Date().toISOString(),\r\n      message: memo || '',\r\n      classCode: currentUserClassCode,\r\n    };\r\n\r\n    setGoalProgress(prev => prev + donationAmount);\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalDonations(prev => [...prev, newDonation]);\r\n\r\n    //    UI  ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n\r\n    try {\r\n      // 1.    (AuthContext )\r\n      const couponDeducted = await updateUserInAuth({\r\n        coupons: increment(-donationAmount)\r\n      });\r\n\r\n      if (!couponDeducted) {\r\n        throw new Error(\"  .\");\r\n      }\r\n\r\n      // 2. Firestore   \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n\r\n        if (!goalDoc.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n\r\n        const firestoreDonation = {\r\n          userId: userId,\r\n          userName: userName,\r\n          amount: donationAmount,\r\n          timestamp: serverTimestamp(),\r\n          timestampISO: new Date().toISOString(),\r\n          message: memo || '',\r\n          classCode: currentUserClassCode,\r\n        };\r\n\r\n        // progress   donations  \r\n        transaction.update(goalDocRef, {\r\n          progress: increment(donationAmount),\r\n          donations: arrayUnion(firestoreDonation),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      // 3. donations   (,  )\r\n      const donationRecordRef = doc(collection(db, \"donations\"));\r\n      await setDoc(donationRecordRef, {\r\n        userId: userId,\r\n        userName: userName,\r\n        amount: donationAmount,\r\n        timestamp: serverTimestamp(),\r\n        timestampISO: new Date().toISOString(),\r\n        message: memo || '',\r\n        classCode: currentUserClassCode,\r\n        goalId: currentGoalId,\r\n      });\r\n\r\n      // 4.  \r\n      await addTransaction(userId, -donationAmount * couponValue, `  ${donationAmount} `);\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_DONATE,\r\n        description: `   ${donationAmount} `,\r\n        couponAmount: -donationAmount,\r\n        metadata: {\r\n          goalId: currentGoalId,\r\n          goalProgress: goalProgress + donationAmount,\r\n          message: memo || ''\r\n        }\r\n      });\r\n\r\n      //  5.   (   )\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      alert(`${donationAmount}   !`);\r\n      setShowDonateModal(false);\r\n\r\n      //  6.     (  Firestore )\r\n      setTimeout(() => {\r\n        loadGoalData();\r\n      }, 500);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[MyAssets]  :', error);\r\n      alert(` : ${error.message}`);\r\n\r\n      //      \r\n      setGoalProgress(previousProgress);\r\n      setMyContribution(previousMyContribution);\r\n      setGoalDonations(previousDonations);\r\n\r\n      //  \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []       \r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //    \r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`firestore_cache_settings_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      console.log('[MyAssets]   , Firestore    ...');\r\n\r\n      //  Firestore    \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n\r\n        //   \r\n        const myDonations = freshDonations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //  \r\n        setCachedFirestoreData(cacheKey, latestGoalData);\r\n\r\n        alert(`   !\\n : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\n : ${freshDonations.length}\\n : ${myTotal}`);\r\n      } else {\r\n        alert(\"    .  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]   :', error);\r\n      alert(`    : ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []     \r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    alert(`   .\\n : ${goalDonations.length}\\n : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  //  [ ] 'resetCouponGoal'  async  \r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"       .\");\r\n      return;\r\n    }\r\n    if (\r\n      !window.confirm(\r\n        ` ${currentUserClassCode}      ?`\r\n      )\r\n    )\r\n      return;\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      //  []   limit \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode),\r\n        limit(100)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //  [ 23]      \r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`(${currentUserClassCode})     .`);\r\n    } catch (error) {\r\n      alert(`  : ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    //        UI  ( )\r\n    const cashGained = amount * couponValue;\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount, cash: cashGained });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_USE,\r\n        description: ` ${amount}  (${cashGained.toLocaleString()})`,\r\n        amount: cashGained,\r\n        couponAmount: -amount,\r\n        metadata: {\r\n          couponsSold: amount,\r\n          cashReceived: cashGained,\r\n          couponValue: couponValue\r\n        }\r\n      });\r\n\r\n      alert(`${amount}  .`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n      //  [] Firebase Function  userDoc \r\n      // AuthContext    UI  (loadMyAssetsData )\r\n    } catch (error) {\r\n      alert(` : ${error.message}`);\r\n\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: amount, cash: -cashGained });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}  ${amount} ?`)) {\r\n      //    UI  ( )\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: -amount });\r\n      }\r\n\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userName,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_SEND,\r\n          description: `${recipientUser.name}  ${amount} `,\r\n          couponAmount: -amount,\r\n          metadata: {\r\n            recipientId: recipientUser.id,\r\n            recipientName: recipientUser.name\r\n          }\r\n        });\r\n\r\n        //     (  ) -   \r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: recipientUser.id,\r\n          userName: recipientUser.name,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_RECEIVE,\r\n          description: `${userName}  ${amount} `,\r\n          couponAmount: amount,\r\n          metadata: {\r\n            senderId: userId,\r\n            senderName: userName\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n        //  [] Firebase Function  userDoc \r\n        // AuthContext    UI  (loadMyAssetsData )\r\n      } catch (error) {\r\n        alert(` : ${error.message}`);\r\n\r\n        //   \r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTransferMoney = async () => {\r\n    setAssetsLoading(true);\r\n    try {\r\n      if (\r\n        !userDoc ||\r\n        !userId ||\r\n        !db ||\r\n        !users ||\r\n        !deductCash ||\r\n        !addCashToUserById\r\n      ) {\r\n        alert(\"   .    .\");\r\n        return;\r\n      }\r\n\r\n      const amount = parseInt(transferAmount, 10);\r\n      if (isNaN(amount) || amount <= 0) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if ((Number(userDoc.cash) || 0) < amount) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const recipientUser = users.find((u) => u.id === transferRecipient);\r\n      if (!recipientUser) {\r\n        alert(\"    .    .\");\r\n        return;\r\n      }\r\n\r\n      if (recipientUser.id === userId) {\r\n        alert(\"    .\");\r\n        return;\r\n      }\r\n\r\n      const recipientName = recipientUser.name || recipientUser.nickname || \"\";\r\n\r\n      //      .\r\n      const deductSuccess = await deductCash(amount, `${recipientName} `);\r\n      if (deductSuccess) {\r\n        const addSuccess = await addCashToUserById(recipientUser.id, amount, `${userName} `);\r\n        if (addSuccess) {\r\n          //     ( )\r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: userId,\r\n            userName: userName,\r\n            type: ACTIVITY_TYPES.TRANSFER_SEND,\r\n            description: `${recipientName} ${amount.toLocaleString()} `,\r\n            amount: -amount,\r\n            metadata: {\r\n              recipientId: recipientUser.id,\r\n              recipientName: recipientName\r\n            }\r\n          });\r\n\r\n          //     ( ) -   \r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: recipientUser.id,\r\n            userName: recipientName,\r\n            type: ACTIVITY_TYPES.TRANSFER_RECEIVE,\r\n            description: `${userName} ${amount.toLocaleString()} `,\r\n            amount: amount,\r\n            metadata: {\r\n              senderId: userId,\r\n              senderName: userName\r\n            }\r\n          });\r\n\r\n          alert(\" .\");\r\n          setShowTransferModal(false);\r\n          setTransferRecipient(\"\");\r\n          setTransferAmount(\"\");\r\n        } else {\r\n          alert(\"     .  .\");\r\n          //       .\r\n          await addCashToUserById(userId, amount, \"   \");\r\n        }\r\n      } else {\r\n        alert(\"    .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"!!!        !!!\", error);\r\n      alert(`   : ${error.message}`);\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: parseInt(transferAmount, 10) || 0 });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForceRefresh = () => {\r\n    //  \r\n    const cacheKey = `myAssets_${userId}`;\r\n    localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n\r\n    console.log('[MyAssets]      ');\r\n\r\n    //   \r\n    loadMyAssetsData();\r\n  };\r\n\r\n  const renderTitle = () => (\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n      <h2\r\n        style={{\r\n          fontSize: \"24px\",\r\n          fontWeight: \"bold\",\r\n          color: \"#00fff2\",\r\n          borderBottom: \"2px solid rgba(0, 255, 242, 0.2)\",\r\n          paddingBottom: \"10px\",\r\n          margin: 0,\r\n          textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n        }}\r\n      >\r\n           \r\n      </h2>\r\n      <button\r\n        onClick={handleForceRefresh}\r\n        disabled={assetsLoading}\r\n        style={{\r\n          padding: \"8px 16px\",\r\n          backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n          color: \"#00fff2\",\r\n          border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n          borderRadius: \"8px\",\r\n          fontSize: \"14px\",\r\n          fontWeight: \"600\",\r\n          cursor: assetsLoading ? \"not-allowed\" : \"pointer\",\r\n          opacity: assetsLoading ? 0.6 : 1,\r\n          transition: \"all 0.2s ease\",\r\n        }}\r\n      >\r\n         \r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderAssetSummary = () => {\r\n    const displayCash = Number(userDoc?.cash) || 0;\r\n    const displayCoupons = Number(userDoc?.coupons) || 0;\r\n\r\n    //     \r\n    const displayedTransactions = showAllTransactions\r\n      ? transactionHistory\r\n      : transactionHistory.slice(0, 5);\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          padding: \"0\",\r\n          background: \"transparent\",\r\n          marginBottom: \"25px\",\r\n        }}\r\n      >\r\n        {/*   -    */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(102, 126, 234, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"42px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            marginBottom: \"15px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {displayCash.toLocaleString()} <span style={{ fontSize: \"28px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <button\r\n              onClick={() => setShowTransferModal(true)}\r\n              style={{\r\n                padding: \"14px 28px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n                color: \"#667eea\",\r\n                border: \"none\",\r\n                borderRadius: \"12px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.1)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n              disabled={assetsLoading || authLoading}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = \"translateY(-2px)\";\r\n                e.target.style.boxShadow = \"0 6px 20px rgba(0,0,0,0.15)\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = \"translateY(0)\";\r\n                e.target.style.boxShadow = \"0 4px 15px rgba(0,0,0,0.1)\";\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    -      */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n               \r\n          </h4>\r\n          {transactionHistory.length > 0 ? (\r\n            <div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n                {displayedTransactions.map((tx) => {\r\n                  let displayDate = \" \";\r\n                  try {\r\n                    const validDate = safeTimestampToDate(tx.timestamp);\r\n                    displayDate = validDate.toLocaleDateString(\"ko-KR\", {\r\n                      month: \"2-digit\",\r\n                      day: \"2-digit\",\r\n                    });\r\n                  } catch (dateError) {\r\n                    displayDate = \"\";\r\n                  }\r\n\r\n                  const txAmount = Number(tx.amount) || 0;\r\n                  const txDescription = String(tx.description) || \" \";\r\n\r\n                  return (\r\n                    <div\r\n                      key={tx.id || Math.random()}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\",\r\n                        fontSize: \"14px\",\r\n                        color: \"#a0a0c0\",\r\n                        padding: \"14px 16px\",\r\n                        backgroundColor: txAmount > 0 ? \"rgba(5, 150, 105, 0.1)\" : \"rgba(220, 38, 38, 0.1)\",\r\n                        border: txAmount > 0 ? \"1px solid rgba(5, 150, 105, 0.3)\" : \"1px solid rgba(220, 38, 38, 0.3)\",\r\n                        borderRadius: \"10px\",\r\n                      }}\r\n                    >\r\n                      <span\r\n                        style={{\r\n                          flex: \"1\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                          marginRight: \"10px\",\r\n                          fontWeight: \"500\",\r\n                          color: \"#e8e8ff\"\r\n                        }}\r\n                      >\r\n                        {displayDate}  {txDescription}\r\n                      </span>\r\n                      <span\r\n                        style={{\r\n                          fontWeight: \"700\",\r\n                          fontSize: \"15px\",\r\n                          color: txAmount > 0 ? \"#34d399\" : \"#f87171\",\r\n                          minWidth: \"110px\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        {txAmount > 0 ? \"+\" : \"\"}\r\n                        {txAmount.toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              {transactionHistory.length > 5 && (\r\n                <button\r\n                  onClick={() => setShowAllTransactions(!showAllTransactions)}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"12px\",\r\n                    padding: \"12px\",\r\n                    backgroundColor: \"rgba(255, 255, 255, 0.05)\",\r\n                    color: \"#a0a0c0\",\r\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n                    borderRadius: \"10px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                    transition: \"all 0.2s ease\",\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.backgroundColor = \"#f3f4f6\";\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.backgroundColor = \"#f9fafb\";\r\n                  }}\r\n                >\r\n                  {showAllTransactions ? \" \" : ` ${transactionHistory.length - 5}  `}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                fontSize: \"13px\",\r\n                color: \"#6b7280\",\r\n                textAlign: \"center\",\r\n                padding: \"20px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.03)\",\r\n                borderRadius: \"10px\",\r\n                border: \"1px dashed rgba(255, 255, 255, 0.1)\"\r\n              }}\r\n            >\r\n                 .\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   -     */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"25px 30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(240, 147, 251, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"8px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"38px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {Number(totalNetAssets).toLocaleString()} <span style={{ fontSize: \"24px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <p style={{\r\n            marginTop: \"8px\",\r\n            fontSize: \"12px\",\r\n            color: \"rgba(255,255,255,0.8)\",\r\n            margin: \"8px 0 0 0\"\r\n          }}>\r\n             +  +  +  +  +  - \r\n          </p>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n             \r\n          </h4>\r\n          <div\r\n            style={{\r\n              background: \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\",\r\n              borderRadius: \"14px\",\r\n              padding: \"20px\",\r\n              border: \"none\",\r\n              boxShadow: \"0 4px 15px rgba(6, 182, 212, 0.2)\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <span style={{ color: \"rgba(255,255,255,0.9)\", fontWeight: \"500\", fontSize: \"14px\" }}>\r\n                \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontWeight: \"800\",\r\n                  fontSize: \"26px\",\r\n                  color: \"#ffffff\",\r\n                  letterSpacing: \"-0.5px\",\r\n                  textAlign: \"right\",\r\n                  display: \"block\"\r\n                }}\r\n              >\r\n                {Number(parkingBalance).toLocaleString()}<span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <p style={{ marginTop: \"10px\", fontSize: \"12px\", color: \"#9ca3af\", textAlign: \"center\" }}>\r\n                  \r\n          </p>\r\n        </div>\r\n\r\n        {/*    -   */}\r\n        <div\r\n          style={{\r\n            padding: \"25px\",\r\n            background: \"rgba(20, 20, 35, 0.4)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid rgba(0, 255, 242, 0.1)\",\r\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n          }}\r\n        >\r\n\r\n          {/*   */}\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            <h4\r\n              style={{\r\n                fontSize: \"15px\",\r\n                color: \"#374151\",\r\n                fontWeight: \"700\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            >\r\n                \r\n            </h4>\r\n            <div\r\n              style={{\r\n                background: \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\",\r\n                borderRadius: \"14px\",\r\n                padding: \"20px\",\r\n                border: \"none\",\r\n                boxShadow: \"0 4px 15px rgba(251, 191, 36, 0.2)\",\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}>\r\n                <div style={{ width: \"100%\" }}>\r\n                  <div style={{\r\n                    fontSize: \"26px\",\r\n                    fontWeight: \"800\",\r\n                    color: \"#ffffff\",\r\n                    letterSpacing: \"-0.5px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    {displayCoupons.toLocaleString()} <span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n                  </div>\r\n                  <div style={{\r\n                    fontSize: \"12px\",\r\n                    color: \"rgba(255,255,255,0.85)\",\r\n                    fontWeight: \"500\",\r\n                    marginTop: \"4px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    1 = {Number(couponValue).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n  if (!userDoc && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .        .\r\n      </div>\r\n    );\r\n  }\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .     .\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        {renderTitle()}\r\n\r\n        {/*     */}\r\n        <DailyRewardBanner\r\n          userId={userId}\r\n          onClaim={async (reward) => {\r\n            try {\r\n              //   \r\n              const userRef = doc(db, \"users\", userId);\r\n              await setDoc(userRef, {\r\n                cash: increment(reward),\r\n                updatedAt: serverTimestamp(),\r\n              }, { merge: true });\r\n\r\n              //   \r\n              await logActivity(db, {\r\n                userId,\r\n                userName,\r\n                classCode: currentUserClassCode,\r\n                type: \"  \",\r\n                description: `   ${reward.toLocaleString()} `,\r\n                amount: reward,\r\n                metadata: { rewardType: \"daily_streak\" }\r\n              });\r\n\r\n              //   \r\n              if (optimisticUpdate) {\r\n                optimisticUpdate({ cash: (userDoc?.cash || 0) + reward });\r\n              }\r\n\r\n              console.log(`Daily reward claimed and added: ${reward}`);\r\n            } catch (error) {\r\n              console.error(\"   :\", error);\r\n              alert(\"    .  .\");\r\n            }\r\n          }}\r\n        />\r\n\r\n        {renderAssetSummary()}\r\n        {showTransferModal && (\r\n          <TransferModal\r\n            showTransferModal={showTransferModal}\r\n            setShowTransferModal={setShowTransferModal}\r\n            recipients={classmates}\r\n            transferRecipient={transferRecipient}\r\n            setTransferRecipient={setTransferRecipient}\r\n            transferAmount={transferAmount}\r\n            setTransferAmount={setTransferAmount}\r\n            handleTransfer={handleTransferMoney}\r\n            userId={userId}\r\n            userCash={Number(userDoc?.cash) || 0}\r\n          />\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","// src/ItemMarket.js - Firestore    (,  ,  )\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport {\r\n  db,\r\n  addActivityLog,\r\n  addTransaction,\r\n} from \"../../firebase\";\r\n\r\nimport {\r\n  collection,\r\n  doc,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  orderBy,\r\n  where,\r\n  getDoc,\r\n  getDocs,\r\n  limit,\r\n  startAfter,\r\n} from \"firebase/firestore\";\r\n\r\nimport \"./ItemMarket.css\";\r\nimport { formatKoreanCurrency } from '../../numberFormatter';\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return '  ';\r\n  if (date.toDate) return date.toDate().toLocaleDateString(); // Firestore Timestamp\r\n  if (date.toLocaleDateString) return date.toLocaleDateString(); // JavaScript Date\r\n  return '  ';\r\n};\r\n\r\n//   \r\nconst ProposalModal = ({ item, onSave, onCancel, currentUser }) => {\r\n  const [proposalPrice, setProposalPrice] = useState(\"\");\r\n  const [proposalMessage, setProposalMessage] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSave = async () => {\r\n    if (isSubmitting) {\r\n      return;\r\n    }\r\n\r\n    const price = parseInt(proposalPrice, 10);\r\n\r\n    if (isNaN(price) || price <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (price > (currentUser?.cash || 0)) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    const proposalData = {\r\n      itemId: item.id,\r\n      proposedPrice: price,\r\n      message: proposalMessage.trim() || \" \",\r\n    };\r\n\r\n    try {\r\n      await onSave(proposalData);\r\n    } catch (error) {\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-overlay\"\r\n      onClick={onCancel}\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999\r\n      }}\r\n    >\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n        style={{\r\n          backgroundColor: '#1a1a2e',\r\n          borderRadius: '24px',\r\n          padding: '20px',\r\n          minWidth: '400px',\r\n          maxWidth: '500px',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto',\r\n          border: '1px solid rgba(255, 255, 255, 0.1)',\r\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n          color: '#e2e8f0'\r\n        }}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3> </h3>\r\n          <button className=\"close-button\" onClick={onCancel}></button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"proposal-item-info\">\r\n            <h4>{item.itemName}</h4>\r\n            <p> : {(item.price || item.totalPrice || 0).toLocaleString()}</p>\r\n            <p>: {item.sellerName}</p>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"proposalPrice\">  ()</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"proposalPrice\"\r\n              value={proposalPrice}\r\n              onChange={(e) => {\r\n                setProposalPrice(e.target.value);\r\n              }}\r\n              placeholder=\"  \"\r\n              min=\"1\"\r\n              max={currentUser?.cash || 0}\r\n              disabled={isSubmitting}\r\n            />\r\n            <p className=\"form-hint\">\r\n               : {(currentUser?.cash || 0).toLocaleString()}\r\n            </p>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"proposalMessage\"> ()</label>\r\n            <textarea\r\n              id=\"proposalMessage\"\r\n              value={proposalMessage}\r\n              onChange={(e) => {\r\n                setProposalMessage(e.target.value);\r\n              }}\r\n              placeholder=\"   \"\r\n              rows=\"3\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={() => {\r\n            onCancel();\r\n          }} className=\"modal-button cancel\" disabled={isSubmitting}>\r\n            \r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              handleSave();\r\n            }}\r\n            className=\"modal-button propose\"\r\n            disabled={isSubmitting || !proposalPrice}\r\n          >\r\n            {isSubmitting ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n//    \r\nconst ItemRegistrationModal = ({ onSave, onCancel, userItems = [] }) => {\r\n  const [registrationType, setRegistrationType] = useState(\"inventory\"); // \"inventory\" or \"custom\"\r\n  const [selectedInventoryItem, setSelectedInventoryItem] = useState(\"\");\r\n  const [selectedQuantity, setSelectedQuantity] = useState(1);\r\n  const [itemName, setItemName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  //    \r\n  const groupedInventoryItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) return [];\r\n\r\n    const itemsMap = new Map();\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general'\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (registrationType === \"inventory\" && selectedInventoryItem) {\r\n      const selectedGroup = groupedInventoryItems.find(group =>\r\n        group.displayInfo.itemId === selectedInventoryItem\r\n      );\r\n\r\n      if (selectedGroup) {\r\n        setItemName(selectedGroup.displayInfo.name);\r\n        setDescription(selectedGroup.displayInfo.description);\r\n        setCategory(selectedGroup.displayInfo.type);\r\n        setSelectedQuantity(1);\r\n      }\r\n    }\r\n  }, [selectedInventoryItem, registrationType, groupedInventoryItems]);\r\n\r\n  const handleSave = async () => {\r\n    if (isSubmitting) return;\r\n\r\n    if (registrationType === \"inventory\") {\r\n      if (!selectedInventoryItem) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n      if (selectedQuantity <= 0) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const selectedGroup = groupedInventoryItems.find(group =>\r\n        group.displayInfo.itemId === selectedInventoryItem\r\n      );\r\n\r\n      if (!selectedGroup || selectedGroup.totalQuantity < selectedQuantity) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n    } else {\r\n      if (!itemName.trim()) {\r\n        alert(\" .\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    const numericPrice = parseInt(price, 10);\r\n    if (isNaN(numericPrice) || numericPrice <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const itemData = {\r\n        itemName: itemName.trim(),\r\n        description: description.trim(),\r\n        price: numericPrice,\r\n        category,\r\n        registrationType\r\n      };\r\n\r\n      if (registrationType === \"inventory\") {\r\n        const selectedGroup = groupedInventoryItems.find(group =>\r\n          group.displayInfo.itemId === selectedInventoryItem\r\n        );\r\n\r\n        //  inventory  ID  (   )\r\n        itemData.inventoryItemId = selectedGroup.sourceDocs[0].id;\r\n        itemData.quantity = selectedQuantity;\r\n        itemData.sourceDocs = selectedGroup.sourceDocs;\r\n        itemData.icon = selectedGroup.displayInfo.icon;\r\n      }\r\n\r\n      await onSave(itemData);\r\n    } catch (error) {\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-overlay\"\r\n      onClick={onCancel}\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999,\r\n        backdropFilter: 'blur(8px)'\r\n      }}\r\n    >\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => e.stopPropagation()}\r\n        style={{\r\n          backgroundColor: '#1a1a2e',\r\n          borderRadius: '24px',\r\n          padding: '20px',\r\n          minWidth: '400px',\r\n          maxWidth: '500px',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto',\r\n          border: '1px solid rgba(255, 255, 255, 0.1)',\r\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n          color: '#e2e8f0'\r\n        }}\r\n      >\r\n        <div className=\"modal-header\">\r\n          <h3> </h3>\r\n          <button className=\"close-button\" onClick={onCancel}></button>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label> </label>\r\n            <div className=\"radio-group\">\r\n              <label>\r\n                <input\r\n                  type=\"radio\"\r\n                  value=\"inventory\"\r\n                  checked={registrationType === \"inventory\"}\r\n                  onChange={(e) => setRegistrationType(e.target.value)}\r\n                  disabled={isSubmitting}\r\n                />\r\n                  \r\n              </label>\r\n              <label>\r\n                <input\r\n                  type=\"radio\"\r\n                  value=\"custom\"\r\n                  checked={registrationType === \"custom\"}\r\n                  onChange={(e) => setRegistrationType(e.target.value)}\r\n                  disabled={isSubmitting}\r\n                />\r\n                 \r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {registrationType === \"inventory\" && (\r\n            <>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"inventoryItem\">   *</label>\r\n                <select\r\n                  id=\"inventoryItem\"\r\n                  value={selectedInventoryItem}\r\n                  onChange={(e) => setSelectedInventoryItem(e.target.value)}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <option value=\"\">--   --</option>\r\n                  {groupedInventoryItems.map(group => (\r\n                    <option key={group.displayInfo.itemId} value={group.displayInfo.itemId}>\r\n                      {group.displayInfo.name} ({group.totalQuantity})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {selectedInventoryItem && (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"quantity\">  *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    id=\"quantity\"\r\n                    value={selectedQuantity}\r\n                    onChange={(e) => setSelectedQuantity(Math.max(1, parseInt(e.target.value) || 1))}\r\n                    min=\"1\"\r\n                    max={groupedInventoryItems.find(g => g.displayInfo.itemId === selectedInventoryItem)?.totalQuantity || 1}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  <p className=\"form-hint\">\r\n                     {groupedInventoryItems.find(g => g.displayInfo.itemId === selectedInventoryItem)?.totalQuantity || 0}  \r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"itemName\"> *</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"itemName\"\r\n              value={itemName}\r\n              onChange={(e) => setItemName(e.target.value)}\r\n              placeholder=\" \"\r\n              maxLength=\"50\"\r\n              disabled={isSubmitting || (registrationType === \"inventory\" && selectedInventoryItem)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"description\"> </label>\r\n            <textarea\r\n              id=\"description\"\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"   \"\r\n              rows=\"3\"\r\n              maxLength=\"200\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"price\"> () *</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"price\"\r\n              value={price}\r\n              onChange={(e) => setPrice(e.target.value)}\r\n              placeholder=\" \"\r\n              min=\"1\"\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"category\"></label>\r\n            <select\r\n              id=\"category\"\r\n              value={category}\r\n              onChange={(e) => setCategory(e.target.value)}\r\n              disabled={isSubmitting || (registrationType === \"inventory\" && selectedInventoryItem)}\r\n            >\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n              <option value=\"\"></option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onCancel} className=\"modal-button cancel\" disabled={isSubmitting}>\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"modal-button save\"\r\n            disabled={isSubmitting || !itemName.trim() || !price}\r\n          >\r\n            {isSubmitting ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n//  ItemMarket \r\nconst ItemMarket = () => {\r\n  const auth = useAuth();\r\n  const itemContext = useItems();\r\n  const currentUser = auth.userDoc;\r\n  const currentUserId = currentUser?.id;\r\n  const classCode = currentUser?.classCode;\r\n\r\n  const {\r\n    marketListings: items, //    \r\n    marketOffers: proposals, //    \r\n    loading: contextLoading,\r\n    refreshData,\r\n    buyMarketItem,\r\n    makeOffer,\r\n    respondToOffer,\r\n    listItemForSale,\r\n    cancelSale,\r\n    adminDeleteItem,\r\n    userItems\r\n  } = useItems();\r\n\r\n  const { classmates, loading: authLoading } = useAuth();\r\n\r\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\r\n  const [showProposalModal, setShowProposalModal] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [activeTab, setActiveTab] = useState(\"market\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [isPurchasing, setIsPurchasing] = useState({});\r\n\r\n  //  []     \r\n  const [marketSummary, setMarketSummary] = useState(null);\r\n  const [summaryLoading, setSummaryLoading] = useState(true);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n\r\n  // :   (  )\r\n  const [visibleItemsCount, setVisibleItemsCount] = useState(20);\r\n\r\n  const loading = contextLoading || authLoading;\r\n\r\n  //  []    (    90% )\r\n  useEffect(() => {\r\n    if (!classCode) {\r\n      setSummaryLoading(false);\r\n      return;\r\n    }\r\n\r\n    //           \r\n    // ItemContext  marketListings     \r\n    setSummaryLoading(false);\r\n    setMarketSummary({});\r\n    setLastUpdated(null);\r\n  }, [classCode]);\r\n\r\n  //      (  )\r\n  useEffect(() => {\r\n    return () => {\r\n    };\r\n  }, []);\r\n\r\n  //     (classmates )\r\n  const getUserNameById = useCallback((userId) => {\r\n    if (!userId) return \"  \";\r\n    const user = classmates.find(u => u.id === userId || u.uid === userId);\r\n    return user?.name || user?.displayName || \"  \";\r\n  }, [classmates]);\r\n\r\n  //     (sellerName   )\r\n  const getSellerName = useCallback((item) => {\r\n    return item?.sellerName || getUserNameById(item?.sellerId);\r\n  }, [getUserNameById]);\r\n\r\n  //    (   )\r\n  const handleItemRegistration = async (itemData) => {\r\n    if (!currentUserId || !classCode) {\r\n      alert(\" .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (itemData.registrationType === \"inventory\") {\r\n        const { inventoryItemId, quantity, price } = itemData;\r\n\r\n        const result = await listItemForSale({ itemId: inventoryItemId, quantity, price });\r\n\r\n        if (!result.success) throw new Error(result.message);\r\n\r\n        alert(`${itemData.itemName} ${quantity}   .`);\r\n      } else {\r\n        //      (  )\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setShowRegistrationModal(false);\r\n      refreshData(); //   \r\n\r\n    } catch (error) {\r\n      alert(\"    : \" + error.message);\r\n    }\r\n  };\r\n\r\n  //   (:    )\r\n  const handleProposal = async (proposalData) => {\r\n    if (!currentUserId || !classCode) {\r\n      alert(\" .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await makeOffer(proposalData);\r\n      if (!result.success) {\r\n        throw new Error(result.message || \" .\");\r\n      }\r\n      alert(\"  .\");\r\n      setShowProposalModal(false);\r\n      setSelectedItem(null);\r\n    } catch (error) {\r\n      alert(\"    : \" + error.message);\r\n    }\r\n  };\r\n\r\n  //    (:      )\r\n  const handleDirectPurchase = async (item) => {\r\n    if (isPurchasing[item.id]) return; // Prevent double-clicks\r\n\r\n    if (!currentUserId) {\r\n      alert(\" .\");\r\n      return;\r\n    }\r\n    if (item.sellerId === currentUserId) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    const itemPrice = item.price || item.totalPrice || 0;\r\n    if ((currentUser?.cash || 0) < itemPrice) {\r\n      alert(` .`);\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`${item.itemName}() ${itemPrice.toLocaleString()} ?`)) {\r\n      return;\r\n    }\r\n\r\n    setIsPurchasing(prev => ({ ...prev, [item.id]: true })); // Set purchasing state\r\n\r\n    try {\r\n      const result = await buyMarketItem(item.id);\r\n      if (!result.success) {\r\n        throw new Error(result.message || \" .\");\r\n      }\r\n      alert(\" !\");\r\n      refreshData(); //  \r\n    } catch (error) {\r\n      if (error.message.includes(\"409\")) { // Check for 409 conflict\r\n        alert(\"     .\");\r\n      } else {\r\n        alert(\"   : \" + error.message);\r\n      }\r\n      refreshData(); //       \r\n    } finally {\r\n      setIsPurchasing(prev => ({ ...prev, [item.id]: false })); // Reset purchasing state\r\n    }\r\n  };\r\n\r\n  //    (:    )\r\n  const handleAcceptProposal = async (proposalId) => {\r\n    if (!currentUserId || !classCode) return;\r\n\r\n    const proposal = proposals.find(p => p.id === proposalId);\r\n    if (!proposal) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (proposal.sellerId !== currentUserId) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    if (proposal.status !== \"pending\") {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const item = items.find(i => i.id === proposal.itemId);\r\n    if (!item || item.status !== \"available\") {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`${proposal.buyerName} ${proposal.proposedPrice.toLocaleString()}  ?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const buyerRef = doc(db, \"users\", proposal.buyerId);\r\n        const buyerSnap = await transaction.get(buyerRef);\r\n\r\n        if (!buyerSnap.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n\r\n        const buyerData = buyerSnap.data();\r\n        const buyerBalance = buyerData.cash || 0;\r\n\r\n        if (buyerBalance < proposal.proposedPrice) {\r\n          throw new Error(\"  .\");\r\n        }\r\n\r\n        const proposalRef = doc(db, \"classes\", classCode, \"marketProposals\", proposalId);\r\n        transaction.update(proposalRef, {\r\n          status: \"accepted\",\r\n          acceptedAt: serverTimestamp(),\r\n        });\r\n\r\n        const itemRef = doc(db, \"classes\", classCode, \"marketItems\", proposal.itemId);\r\n        transaction.update(itemRef, {\r\n          status: \"sold\",\r\n          soldTo: proposal.buyerId,\r\n          soldPrice: proposal.proposedPrice,\r\n          soldAt: serverTimestamp(),\r\n        });\r\n\r\n        const sellerRef = doc(db, \"users\", proposal.sellerId);\r\n\r\n        transaction.update(buyerRef, {\r\n          cash: increment(-proposal.proposedPrice),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n\r\n        transaction.update(sellerRef, {\r\n          cash: increment(proposal.proposedPrice),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      //       \r\n      await refreshData();\r\n\r\n      await Promise.all([\r\n        addActivityLog(proposal.buyerId, \" \",\r\n          `${proposal.itemName}() ${proposal.proposedPrice.toLocaleString()} .`),\r\n        addActivityLog(proposal.sellerId, \" \",\r\n          `${proposal.itemName}() ${proposal.proposedPrice.toLocaleString()} .`),\r\n        addTransaction(proposal.buyerId, -proposal.proposedPrice,\r\n          ` : ${proposal.itemName}`),\r\n        addTransaction(proposal.sellerId, proposal.proposedPrice,\r\n          ` : ${proposal.itemName}`)\r\n      ]);\r\n\r\n      alert(\"   .\");\r\n    } catch (error) {\r\n      alert(\"    : \" + error.message);\r\n    }\r\n  };\r\n\r\n  //    (:    )\r\n  const handleRejectProposal = async (proposalId) => {\r\n    if (!currentUserId || !classCode) return;\r\n\r\n    const proposal = proposals.find(p => p.id === proposalId);\r\n    if (!proposal) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (proposal.sellerId !== currentUserId) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    if (proposal.status !== \"pending\") {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`${proposal.buyerName}  ?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const proposalRef = doc(db, \"classes\", classCode, \"marketProposals\", proposalId);\r\n      await updateDoc(proposalRef, {\r\n        status: \"rejected\",\r\n        rejectedAt: serverTimestamp(),\r\n      });\r\n\r\n      //       \r\n      await refreshData();\r\n\r\n      alert(\" .\");\r\n    } catch (error) {\r\n      alert(\"    : \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleCancelSale = async (itemId) => {\r\n    const item = items.find(i => i.id === itemId);\r\n    if (!item) return;\r\n\r\n    if (item.sellerId !== currentUserId) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    const pendingProposals = proposals.filter(p =>\r\n      p.itemId === itemId && p.status === \"pending\"\r\n    );\r\n\r\n    let confirmationText = \"    ?\";\r\n    if (pendingProposals.length > 0) {\r\n      confirmationText = `  ${pendingProposals.length}    .   ?   .`;\r\n    }\r\n\r\n    if (!window.confirm(confirmationText)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await cancelSale(itemId); //   \r\n      if (!result.success) {\r\n        throw new Error(result.message || \"  .\");\r\n      }\r\n      alert(\" .   .\");\r\n    } catch (error) {\r\n      alert(`   : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteItem = async (listingId) => {\r\n    if (!auth.isAdmin()) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(\"    ?     .\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await adminDeleteItem(listingId);\r\n      if (!result.success) {\r\n        throw new Error(result.message || \" .\");\r\n      }\r\n      alert(\"  .\");\r\n      refreshData();\r\n    } catch (error) {\r\n      alert(\"   : \" + error.message);\r\n      refreshData();\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const filteredItems = useMemo(() => {\r\n    const filtered = (items || []).filter(item => {\r\n      const matchesCategory = selectedCategory === \"\" || item.category === selectedCategory || item.itemType === selectedCategory;\r\n      const matchesSearch = !searchTerm ||\r\n        item.itemName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (item.description || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (item.sellerName || '').toLowerCase().includes(searchTerm.toLowerCase());\r\n      const isAvailable = item.status === \"available\" || item.status === \"active\";\r\n\r\n      return matchesCategory && matchesSearch && isAvailable;\r\n    });\r\n\r\n    return filtered;\r\n  }, [items, selectedCategory, searchTerm, currentUserId]);\r\n\r\n  //    ()\r\n  const myItems = useMemo(() => {\r\n    return (items || []).filter(item => item.sellerId === currentUserId);\r\n  }, [items, currentUserId]);\r\n\r\n  // /   ()\r\n  const { receivedProposals, sentProposals } = useMemo(() => {\r\n    const received = (proposals || []).filter(proposal => proposal.sellerId === currentUserId);\r\n    const sent = (proposals || []).filter(proposal => proposal.buyerId === currentUserId);\r\n    return { receivedProposals: received, sentProposals: sent };\r\n  }, [proposals, currentUserId]);\r\n\r\n  //    ()\r\n  const sortedMarketData = useMemo(() => {\r\n    return marketSummary\r\n      ? Object.entries(marketSummary).sort(([nameA], [nameB]) => nameA.localeCompare(nameB))\r\n      : [];\r\n  }, [marketSummary]);\r\n\r\n  if (loading) {\r\n    return <div className=\"market-container loading\"> ...</div>;\r\n  }\r\n  if (!currentUser) {\r\n    return <div className=\"market-container loading\"> .</div>;\r\n  }\r\n  if (!classCode) {\r\n    return <div className=\"market-container loading\">   .</div>;\r\n  }\r\n\r\n  const visibleItems = filteredItems.slice(0, visibleItemsCount);\r\n\r\n  return (\r\n    <div className=\"market-container\">\r\n      <div className=\"market-header\">\r\n        <h1>  (: {classCode})</h1>\r\n        <div className=\"header-info\">\r\n          <span> : {(currentUser.cash || 0).toLocaleString()}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"market-tabs\">\r\n        <button\r\n          className={`tab-button ${activeTab === \"market\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"market\")}\r\n        >\r\n            ({filteredItems.length})\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"my-items\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"my-items\")}\r\n        >\r\n            ({myItems.length})\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"proposals\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"proposals\")}\r\n        >\r\n            ({receivedProposals.filter(p => p.status === \"pending\").length})\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"market-content\">\r\n\r\n        {activeTab === \"market\" && (\r\n          <div className=\"market-section\">\r\n            <div className=\"market-controls\">\r\n              <div className=\"search-and-filter\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\", ,  ...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"search-input\"\r\n                />\r\n                <select\r\n                  value={selectedCategory}\r\n                  onChange={(e) => setSelectedCategory(e.target.value)}\r\n                  className=\"category-filter\"\r\n                >\r\n                  <option value=\"\"> </option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                  <option value=\"\"></option>\r\n                </select>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowRegistrationModal(true)}\r\n                className=\"register-button\"\r\n              >\r\n                 \r\n              </button>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div className=\"loading\">  ...</div>\r\n            ) : visibleItems.length === 0 ? (\r\n              <div className=\"empty-state\" style={{ backgroundColor: '#1a1a2e', color: '#94a3b8' }}>\r\n                {searchTerm || selectedCategory !== \"\"\r\n                  ? \"    .\"\r\n                  : \"  .\"}\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div className=\"items-grid\">\r\n                  {visibleItems.map(item => (\r\n                    <div key={item.id} className=\"item-card\">\r\n                      <div className=\"item-info\">\r\n                        {/*     : name, itemName   */}\r\n                        <h3>{item.name || item.itemName || \"  \"}</h3>\r\n                        <p className=\"item-description\">{item.description || \" \"}</p>\r\n                        <p className=\"item-price\">{(item.price || item.totalPrice || 0).toLocaleString()}</p>\r\n                        <p className=\"item-seller\">: {getSellerName(item)}</p>\r\n                        <p className=\"item-category\">{item.category || item.itemType || item.type || \"\"}</p>\r\n                      </div>\r\n                      <div className=\"item-actions\">\r\n                        {item.sellerId !== currentUserId && (\r\n                          <>\r\n                            <button\r\n                              onClick={() => handleDirectPurchase(item)}\r\n                              className=\"buy-button\"\r\n                              disabled={isPurchasing[item.id] || !currentUser || (currentUser.cash || 0) < (item.price || item.totalPrice || 0)}\r\n                            >\r\n                              {isPurchasing[item.id] ? \" ...\" : \" \"}\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                setSelectedItem(item);\r\n                                setShowProposalModal(true);\r\n                              }}\r\n                              className=\"propose-button\"\r\n                            >\r\n                              \r\n                            </button>\r\n                          </>\r\n                        )}\r\n                        {auth.isAdmin() && (\r\n                          <button\r\n                            onClick={() => handleAdminDeleteItem(item.id)}\r\n                            className=\"delete-button\"\r\n                          >\r\n                             \r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {filteredItems.length > visibleItemsCount && (\r\n                  <div className=\"load-more-container\">\r\n                    <button\r\n                      onClick={() => setVisibleItemsCount(prev => prev + 20)}\r\n                      className=\"load-more-button\"\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"my-items\" && (\r\n          <div className=\"my-items-section\">\r\n            <div className=\"section-header\">\r\n              <h2> </h2>\r\n              <button\r\n                onClick={() => setShowRegistrationModal(true)}\r\n                className=\"register-button\"\r\n              >\r\n                 \r\n              </button>\r\n            </div>\r\n            {myItems.length === 0 ? (\r\n              <div className=\"empty-state\" style={{ backgroundColor: '#1a1a2e', color: '#94a3b8' }}>  .</div>\r\n            ) : (\r\n              <div className=\"items-list\">\r\n                {myItems.map(item => (\r\n                  <div key={item.id} className=\"item-row\">\r\n                    <div className=\"item-info\">\r\n                      <h3>{item.itemName}</h3>\r\n                      <p>{item.description}</p>\r\n                      <p className=\"price\">{(item.price || item.totalPrice || 0).toLocaleString()}</p>\r\n                      <p>: {item.category || item.itemType || \"\"}</p>\r\n                      <span className={`status ${item.status}`}>\r\n                        {item.status === \"available\" || item.status === \"active\" ? \"\" :\r\n                          item.status === \"sold\" ? ` (${(item.soldPrice || item.totalPrice || 0).toLocaleString()})` : \"\"}\r\n                      </span>\r\n                      {item.isLegacy && <span className=\"legacy-badge\"> </span>}\r\n                      {item.soldAt && (\r\n                        <p>: {formatDate(item.soldAt)}</p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"item-actions\">\r\n                      {(item.status === \"available\" || item.status === \"active\") && (\r\n                        <button\r\n                          onClick={() => handleCancelSale(item.id)}\r\n                          className=\"delete-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"proposals\" && (\r\n          <div className=\"proposals-section\">\r\n            <div className=\"section-header\">\r\n              <h2> </h2>\r\n            </div>\r\n\r\n            <div className=\"proposals-tabs\">\r\n              <h3>  ({receivedProposals.length})</h3>\r\n              {receivedProposals.length === 0 ? (\r\n                <div className=\"empty-state\" style={{ backgroundColor: '#1a1a2e', color: '#94a3b8' }}>  .</div>\r\n              ) : (\r\n                <div className=\"proposals-list\">\r\n                  {receivedProposals.map(proposal => (\r\n                    <div key={proposal.id} className=\"proposal-card\">\r\n                      <div className=\"proposal-info\">\r\n                        <h4>{proposal.itemName}</h4>\r\n                        <p>: {getUserNameById(proposal.buyerId)}</p>\r\n                        <p> : <strong>{proposal.proposedPrice.toLocaleString()}</strong></p>\r\n                        <p> : {proposal.originalPrice.toLocaleString()}</p>\r\n                        {proposal.message && <p>: \"{proposal.message}\"</p>}\r\n                        <p>: {formatDate(proposal.createdAt)}</p>\r\n                        <p>: <span className={`status ${proposal.status}`}>\r\n                          {proposal.status === \"pending\" ? \"\" :\r\n                            proposal.status === \"accepted\" ? \"\" : \"\"}\r\n                        </span></p>\r\n                      </div>\r\n                      {proposal.status === \"pending\" && (\r\n                        <div className=\"proposal-actions\">\r\n                          <button\r\n                            onClick={() => handleAcceptProposal(proposal.id)}\r\n                            className=\"accept-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleRejectProposal(proposal.id)}\r\n                            className=\"reject-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              <h3>  ({sentProposals.length})</h3>\r\n              {sentProposals.length === 0 ? (\r\n                <div className=\"empty-state\" style={{ backgroundColor: '#1a1a2e', color: '#94a3b8' }}>  .</div>\r\n              ) : (\r\n                <div className=\"proposals-list\">\r\n                  {sentProposals.map(proposal => (\r\n                    <div key={proposal.id} className=\"proposal-card\">\r\n                      <div className=\"proposal-info\">\r\n                        <h4>{proposal.itemName || '  '}</h4>\r\n                        <p>: {getUserNameById(proposal.sellerId)}</p>\r\n                        <p> : <strong>{(proposal.proposedPrice || 0).toLocaleString()}</strong></p>\r\n                        <p> : {(proposal.originalPrice || 0).toLocaleString()}</p>\r\n                        {proposal.message && <p>: \"{proposal.message}\"</p>}\r\n                        <p>: {formatDate(proposal.createdAt)}</p>\r\n                        <p>: <span className={`status ${proposal.status}`}>\r\n                          {proposal.status === \"pending\" ? \"\" :\r\n                            proposal.status === \"accepted\" ? \"\" : \"\"}\r\n                        </span></p>\r\n                        {proposal.acceptedAt && (\r\n                          <p>: {formatDate(proposal.acceptedAt)}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showRegistrationModal && (\r\n        <ItemRegistrationModal\r\n          onSave={handleItemRegistration}\r\n          onCancel={() => setShowRegistrationModal(false)}\r\n          userItems={itemContext.userItems || []}\r\n        />\r\n      )}\r\n\r\n      {showProposalModal && selectedItem && (\r\n        <ProposalModal\r\n          item={selectedItem}\r\n          onSave={handleProposal}\r\n          onCancel={() => {\r\n            setShowProposalModal(false);\r\n            setSelectedItem(null);\r\n          }}\r\n          currentUser={currentUser}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemMarket;","// src/ParkingAccount.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, doc, getDoc, setDoc, serverTimestamp, updateDoc, increment, runTransaction, collection, getDocs, deleteDoc } from \"../../firebase\";\r\nimport { format, isToday, differenceInDays, isPast } from 'date-fns';\r\nimport { PiggyBank, Landmark, HandCoins, Wallet, X, TrendingUp } from 'lucide-react';\r\nimport { formatKoreanCurrency } from '../../numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\n\r\n// --- Styles ---\r\n// --- Styles ---\r\nconst styles = {\r\n  container: {\r\n    fontFamily: 'sans-serif',\r\n    backgroundColor: 'transparent',\r\n    padding: '32px',\r\n    minHeight: 'auto'\r\n  },\r\n  message: (type) => ({\r\n    padding: '16px 20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '28px',\r\n    textAlign: 'center',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    color: type === 'error' ? '#f87171' : '#34d399',\r\n    backgroundColor: type === 'error' ? 'rgba(239, 68, 68, 0.1)' : 'rgba(16, 185, 129, 0.1)',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n    border: `1px solid ${type === 'error' ? 'rgba(239, 68, 68, 0.3)' : 'rgba(16, 185, 129, 0.3)'}`\r\n  }),\r\n  grid: {\r\n    display: 'grid',\r\n    gap: '28px',\r\n    maxWidth: '1200px',\r\n    margin: '0 auto'\r\n  },\r\n  card: {\r\n    backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n    boxShadow: '0 6px 20px rgba(0, 0, 0, 0.2)',\r\n    borderRadius: '16px',\r\n    padding: '32px',\r\n    border: '1px solid rgba(255, 255, 255, 0.05)',\r\n    backdropFilter: 'blur(10px)'\r\n  },\r\n  cardHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '16px',\r\n    marginBottom: '24px',\r\n    paddingBottom: '20px',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.05)'\r\n  },\r\n  cardTitle: {\r\n    fontSize: '26px',\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n    letterSpacing: '-0.5px',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  tabContainer: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n    marginBottom: '20px',\r\n    gap: '8px'\r\n  },\r\n  tabButton: (isActive) => ({\r\n    padding: '12px 24px',\r\n    border: 'none',\r\n    background: isActive ? 'rgba(99, 102, 241, 0.2)' : 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '17px',\r\n    fontWeight: isActive ? '700' : '500',\r\n    color: isActive ? '#00fff2' : '#94a3b8',\r\n    borderBottom: `3px solid ${isActive ? '#00fff2' : 'transparent'}`,\r\n    marginBottom: '-2px',\r\n    borderRadius: '8px 8px 0 0',\r\n    transition: 'all 0.2s ease',\r\n    textShadow: isActive ? '0 0 5px rgba(0, 255, 242, 0.3)' : 'none'\r\n  }),\r\n  button: (disabled, variant = 'primary') => ({\r\n    backgroundColor: variant === 'primary' ? 'rgba(3, 105, 161, 0.8)' : (variant === 'danger' ? 'rgba(220, 38, 38, 0.8)' : (variant === 'success' ? 'rgba(5, 150, 105, 0.8)' : '#4b5563')),\r\n    color: 'white',\r\n    padding: '12px 20px',\r\n    borderRadius: '10px',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    opacity: disabled ? 0.5 : 1,\r\n    fontSize: '15px',\r\n    fontWeight: '600',\r\n    boxShadow: disabled ? 'none' : '0 4px 12px rgba(0,0,0,0.3)',\r\n    transition: 'all 0.2s ease',\r\n    ':hover': !disabled && {\r\n      transform: 'translateY(-2px)',\r\n      boxShadow: '0 6px 16px rgba(0,0,0,0.4)',\r\n      filter: 'brightness(1.1)'\r\n    }\r\n  }),\r\n  noProduct: {\r\n    textAlign: 'center',\r\n    color: '#94a3b8',\r\n    padding: '32px 0',\r\n    fontSize: '16px',\r\n    fontStyle: 'italic'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '14px 16px',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\r\n    border: '2px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '10px',\r\n    marginBottom: '16px',\r\n    fontSize: '16px',\r\n    color: 'white',\r\n    transition: 'border-color 0.2s ease',\r\n    ':focus': {\r\n      outline: 'none',\r\n      borderColor: '#00fff2',\r\n      boxShadow: '0 0 0 2px rgba(0, 255, 242, 0.1)'\r\n    }\r\n  },\r\n  modalOverlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    zIndex: 1000,\r\n    backdropFilter: 'blur(8px)'\r\n  },\r\n  modalContent: {\r\n    background: '#1a1a2e',\r\n    padding: '32px',\r\n    borderRadius: '16px',\r\n    width: '90%',\r\n    maxWidth: '450px',\r\n    position: 'relative',\r\n    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    color: '#e2e8f0'\r\n  },\r\n  modalTitle: {\r\n    fontSize: '24px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '20px',\r\n    color: '#fff',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  modalCloseBtn: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    right: '20px',\r\n    background: 'none',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    color: '#94a3b8',\r\n    transition: 'color 0.2s ease',\r\n    ':hover': {\r\n      color: '#fff'\r\n    }\r\n  },\r\n};\r\n\r\n// --- Helper Functions & Sub-Components ---\r\nconst formatCurrency = (amount) => (typeof amount === 'number' ? Math.round(amount).toLocaleString() : '0');\r\n\r\n//  \r\nconst calculateCompoundInterest = (principal, dailyRate, days) => {\r\n  if (principal <= 0 || !dailyRate || days <= 0) return { interest: 0, total: principal };\r\n  const total = principal * Math.pow(1 + dailyRate / 100, days);\r\n  const interest = total - principal;\r\n  return { interest: Math.round(interest), total: Math.round(total) };\r\n};\r\n\r\n//    ( )\r\nconst calculateDailyInterest = (principal, dailyRate) => {\r\n  //    -  \r\n  return Math.round(principal * (dailyRate / 100));\r\n};\r\n\r\nconst ICON_MAP = {\r\n  parking: <Wallet size={28} style={{ color: '#0369a1' }} />,\r\n  deposits: <Landmark size={28} style={{ color: '#059669' }} />,\r\n  savings: <PiggyBank size={28} style={{ color: '#7c3aed' }} />,\r\n  loans: <HandCoins size={28} style={{ color: '#dc2626' }} />,\r\n};\r\n\r\nconst SubscribedProductItem = ({ product, onCancel, onMaturity }) => {\r\n  const isMatured = product.maturityDate && new Date() >= product.maturityDate;\r\n  const daysRemaining = product.maturityDate ? Math.max(0, differenceInDays(product.maturityDate, new Date())) : 0;\r\n  const dailyRate = product.rate; //   \r\n\r\n  const { interest, total } = calculateCompoundInterest(\r\n    product.balance,\r\n    product.rate, // \r\n    product.termInDays\r\n  );\r\n\r\n  const dailyInterestAmount = calculateDailyInterest(product.balance, product.rate);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: `2px solid ${isMatured ? 'rgba(16, 185, 129, 0.5)' : 'rgba(255, 255, 255, 0.1)'}`,\r\n      borderRadius: '12px',\r\n      marginBottom: '16px',\r\n      background: isMatured ? 'rgba(16, 185, 129, 0.1)' : 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n        <div>\r\n          <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '4px' }}>{product.name}</div>\r\n          {isMatured && <span style={{\r\n            backgroundColor: '#10b981',\r\n            color: 'white',\r\n            padding: '4px 12px',\r\n            borderRadius: '20px',\r\n            fontSize: '13px',\r\n            fontWeight: '600'\r\n          }}></span>}\r\n        </div>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#00fff2' }}>{formatCurrency(product.balance)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#94a3b8', marginTop: '16px', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 0, 0, 0.2)', padding: '16px', borderRadius: '8px' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> ():</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{product.rate}%</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> :</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399' }}>+{formatCurrency(dailyInterestAmount)}/</span>\r\n        </div>\r\n        {product.maturityDate && (\r\n          <>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ fontWeight: '500' }}>:</span>\r\n              <span style={{ fontWeight: '600', color: '#e2e8f0' }}>{format(product.maturityDate, 'yyyy-MM-dd')}</span>\r\n            </div>\r\n            {!isMatured && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ fontWeight: '500' }}> :</span>\r\n                <span style={{ fontWeight: '600', color: '#00fff2' }}>{daysRemaining}</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed rgba(255, 255, 255, 0.1)', margin: '16px 0' }}></div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#e2e8f0', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 255, 242, 0.05)', padding: '16px', borderRadius: '8px', border: '1px solid rgba(0, 255, 242, 0.1)' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '600' }}>   ():</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399', fontSize: '17px' }}>+{formatCurrency(interest)}</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '17px' }}>\r\n          <span style={{ fontWeight: '700' }}>  :</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{formatCurrency(total)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', textAlign: 'right' }}>\r\n        {isMatured ? (\r\n          <button\r\n            onClick={onMaturity}\r\n            style={{ ...styles.button(false, 'success'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n              ({formatCurrency(total)})\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={onCancel}\r\n            style={{ ...styles.button(false, 'danger'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n            {product.type === 'loan' ? ' ' : ' '}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AvailableProductItem = ({ product, onSubscribe }) => {\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest } = calculateCompoundInterest(100000, dailyRate, product.termInDays);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: '2px solid rgba(255, 255, 255, 0.1)',\r\n      borderRadius: '12px',\r\n      marginBottom: '12px',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      background: 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n      transition: 'all 0.2s ease'\r\n    }}>\r\n      <div>\r\n        <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '8px' }}>{product.name}</div>\r\n        <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '6px' }}>\r\n          <strong style={{ color: '#00fff2' }}> {product.dailyRate}%</strong> (: {product.termInDays})\r\n        </div>\r\n        <div style={{ fontSize: '14px', color: '#34d399', fontWeight: '600' }}>\r\n          <TrendingUp size={14} style={{ display: 'inline', marginRight: '4px' }} />\r\n          10    : +{formatCurrency(projectedInterest)}\r\n        </div>\r\n      </div>\r\n      <button\r\n        onClick={onSubscribe}\r\n        style={{ ...styles.button(false), padding: '12px 24px', fontSize: '16px' }}\r\n      >\r\n        \r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProductSection = ({ title, icon, subscribedProducts, availableProducts, onSubscribe, onCancel, onMaturity }) => {\r\n  const [activeTab, setActiveTab] = useState('subscribed');\r\n  return (\r\n    <div style={styles.card}>\r\n      <div style={styles.cardHeader}>\r\n        {icon}\r\n        <h2 style={styles.cardTitle}>{title}</h2>\r\n      </div>\r\n      <div style={styles.tabContainer}>\r\n        <button\r\n          onClick={() => setActiveTab('subscribed')}\r\n          style={styles.tabButton(activeTab === 'subscribed')}\r\n        >\r\n           \r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('available')}\r\n          style={styles.tabButton(activeTab === 'available')}\r\n        >\r\n            \r\n        </button>\r\n      </div>\r\n      <div>\r\n        {activeTab === 'subscribed' && (\r\n          subscribedProducts.length > 0\r\n            ? subscribedProducts.map(p => (\r\n              <SubscribedProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onCancel={() => onCancel(p)}\r\n                onMaturity={() => onMaturity(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>  .</p>\r\n        )}\r\n        {activeTab === 'available' && (\r\n          availableProducts.length > 0\r\n            ? availableProducts.map(p => (\r\n              <AvailableProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onSubscribe={() => onSubscribe(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>   .</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SubscriptionModal = ({ isOpen, onClose, product, onConfirm, isProcessing }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const numAmount = parseFloat(amount);\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest, total: projectedTotal } = !isNaN(numAmount) && numAmount > 0\r\n    ? calculateCompoundInterest(numAmount, dailyRate, product.termInDays)\r\n    : { interest: 0, total: 0 };\r\n\r\n  return (\r\n    <div style={styles.modalOverlay} onClick={onClose}>\r\n      <div style={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n        <button onClick={onClose} style={styles.modalCloseBtn}><X size={24} /></button>\r\n        <h3 style={styles.modalTitle}>{product.name} </h3>\r\n\r\n        <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(0, 255, 242, 0.05)', borderRadius: '10px', border: '1px solid rgba(0, 255, 242, 0.2)' }}>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '8px' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong>  {product.dailyRate}% ()\r\n          </div>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong> {product.termInDays}\r\n          </div>\r\n        </div>\r\n\r\n        <p style={{ marginBottom: '12px', fontSize: '16px', fontWeight: '600', color: '#e2e8f0' }}>  </p>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          style={styles.input}\r\n          placeholder={`${formatCurrency(product.minAmount || 0)} `}\r\n          autoFocus\r\n        />\r\n\r\n        {numAmount > 0 && (\r\n          <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(16, 185, 129, 0.1)', borderRadius: '10px', border: '1px solid rgba(16, 185, 129, 0.3)' }}>\r\n            <div style={{ fontSize: '15px', color: '#34d399', marginBottom: '6px' }}>\r\n                : <strong>+{formatCurrency(projectedInterest)}</strong>\r\n            </div>\r\n            <div style={{ fontSize: '16px', color: '#34d399', fontWeight: '700' }}>\r\n                : {formatCurrency(projectedTotal)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={() => { onConfirm(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing || !amount}\r\n          style={{ ...styles.button(isProcessing || !amount), width: '100%', fontSize: '17px', padding: '16px' }}\r\n        >\r\n          {isProcessing ? ' ...' : ''}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ParkingAccountSection = ({ balance, dailyInterest, onDeposit, onWithdraw, isProcessing, userCash }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  return (\r\n    <div style={{\r\n      ...styles.card,\r\n      background: 'linear-gradient(135deg, rgba(6, 78, 117, 0.85) 0%, rgba(20, 40, 60, 0.9) 100%)',\r\n      color: 'white',\r\n      boxShadow: '0 8px 24px rgba(0, 0, 0, 0.4)',\r\n      border: '1px solid rgba(0, 180, 216, 0.25)'\r\n    }}>\r\n      <div style={{ ...styles.cardHeader, borderBottom: '2px solid rgba(0, 180, 216, 0.2)' }}>\r\n        <Wallet size={32} style={{ color: '#67e8f9' }} />\r\n        <h2 style={{ ...styles.cardTitle, color: '#e0f7fa' }}></h2>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.15)',\r\n        padding: '12px 16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '16px',\r\n        backdropFilter: 'blur(10px)',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <span style={{ fontSize: '16px', fontWeight: '500', color: '#94a3b8' }}> </span>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#e0f7fa' }}>{formatCurrency(userCash || 0)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '42px', fontWeight: 'bold', color: '#e0f7fa', marginBottom: '8px' }}>\r\n        {formatCurrency(balance)}\r\n      </div>\r\n\r\n      <p style={{ fontSize: '16px', color: 'rgba(224, 247, 250, 0.8)', marginBottom: '16px', fontWeight: '500' }}>\r\n              \r\n      </p>\r\n\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.12)',\r\n        padding: '16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '24px',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n          <TrendingUp size={20} style={{ color: '#67e8f9' }} />\r\n          <span style={{ fontSize: '15px', fontWeight: '600', color: '#94a3b8' }}>  </span>\r\n        </div>\r\n        <div style={{ fontSize: '28px', fontWeight: '700', color: '#67e8f9' }}>\r\n          +{formatCurrency(dailyInterest)}/\r\n        </div>\r\n        <div style={{ fontSize: '14px', marginTop: '6px', color: 'rgba(148, 163, 184, 0.9)' }}>\r\n          ( 1%  )\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', gap: '10px' }}>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\" \"\r\n          style={{\r\n            ...styles.input,\r\n            marginBottom: 0,\r\n            fontSize: '17px',\r\n            flex: 1,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n            border: '1px solid rgba(0, 180, 216, 0.3)'\r\n          }}\r\n          disabled={isProcessing}\r\n        />\r\n        <button\r\n          onClick={() => { onDeposit(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing, 'success'),\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n        <button\r\n          onClick={() => { onWithdraw(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing),\r\n            backgroundColor: 'rgba(100, 116, 139, 0.5)',\r\n            color: 'white',\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst ParkingAccount = ({\r\n  auth = {},\r\n  depositProducts = [],\r\n  installmentProducts = [],\r\n  loanProducts = [],\r\n  activeView = 'parking',\r\n  onViewChange,\r\n  onLoadUserProducts,\r\n  allUserProducts = [],\r\n  onDeleteUserProduct\r\n}) => {\r\n  const { user, userDoc, loading, refreshUserDocument, isAdmin, addCash, deductCash } = auth;\r\n  const userId = user?.uid;\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [parkingDailyInterest, setParkingDailyInterest] = useState(0);\r\n  const [userDeposits, setUserDeposits] = useState([]);\r\n  const [userSavings, setUserSavings] = useState([]);\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [modal, setModal] = useState({ isOpen: false, product: null, type: '' });\r\n  const [currentCash, setCurrentCash] = useState(userDoc?.cash || 0);\r\n\r\n  const displayMessage = (text, type = \"info\", duration = 3000) => {\r\n    setMessage(text);\r\n    setMessageType(type);\r\n    if (duration) setTimeout(() => setMessage(null), duration);\r\n  };\r\n\r\n  const loadAllData = useCallback(async () => {\r\n    if (!userId) return;\r\n    setIsProcessing(true);\r\n    try {\r\n      //  \r\n      const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRateProduct = depositProducts.length > 0 ? depositProducts[0] : null;\r\n\r\n      if (parkingRateProduct) {\r\n        const parkingDoc = await getDoc(parkingRef);\r\n        if (parkingDoc.exists()) {\r\n          const data = parkingDoc.data();\r\n          const lastInterestDate = data.lastInterestDate?.toDate();\r\n\r\n          if (!lastInterestDate || !isToday(lastInterestDate)) {\r\n            const daysToApply = lastInterestDate ? differenceInDays(new Date(), lastInterestDate) : 1;\r\n            if (daysToApply > 0) {\r\n              const dailyRate = (parkingRateProduct.dailyRate || 0.0027); //  1%     \r\n              const { interest } = calculateCompoundInterest(data.balance || 0, dailyRate, daysToApply);\r\n\r\n              if (interest > 0) {\r\n                await updateDoc(parkingRef, {\r\n                  balance: increment(interest),\r\n                  lastInterestDate: serverTimestamp()\r\n                });\r\n                displayMessage(`  ${formatCurrency(interest)} .`, 'success');\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          //   \r\n          await setDoc(parkingRef, {\r\n            balance: 0,\r\n            lastInterestDate: serverTimestamp()\r\n          });\r\n        }\r\n      }\r\n\r\n      //   \r\n      const finalParkingDoc = await getDoc(parkingRef);\r\n      if (finalParkingDoc.exists()) {\r\n        const balance = finalParkingDoc.data().balance || 0;\r\n        setParkingBalance(balance);\r\n\r\n        //    (1% )\r\n        const dailyRate = 1; // 1%  \r\n        const dailyInterest = calculateDailyInterest(balance, dailyRate);\r\n        setParkingDailyInterest(dailyInterest);\r\n      }\r\n\r\n      //   \r\n      const productsRef = collection(db, \"users\", userId, \"products\");\r\n      const snapshot = await getDocs(productsRef);\r\n      const deposits = [], savings = [], loans = [];\r\n\r\n      snapshot.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') deposits.push(product);\r\n        else if (product.type === 'savings') savings.push(product);\r\n        else if (product.type === 'loan') loans.push(product);\r\n      });\r\n\r\n      setUserDeposits(deposits);\r\n      setUserSavings(savings);\r\n      setUserLoans(loans);\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      displayMessage(\"   .\", \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [userId, depositProducts]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && userId) loadAllData();\r\n  }, [userId, loading, loadAllData]);\r\n\r\n  // userDoc cash   currentCash \r\n  useEffect(() => {\r\n    if (userDoc?.cash !== undefined) {\r\n      setCurrentCash(userDoc.cash);\r\n      console.log(\"[ParkingAccount] currentCash :\", userDoc.cash);\r\n    }\r\n  }, [userDoc?.cash]);\r\n\r\n  const handleOpenModal = (product, type) => setModal({ isOpen: true, product, type });\r\n  const handleCloseModal = () => setModal({ isOpen: false, product: null, type: '' });\r\n\r\n  const handleSubscribe = async (subscribeAmount) => {\r\n    console.log(\"--- handleSubscribe  ---\");\r\n    const amount = parseFloat(subscribeAmount);\r\n    const { product, type } = modal;\r\n\r\n    console.log(\" :\", product);\r\n    console.log(` : ${type},  : ${amount}`);\r\n\r\n    if (isNaN(amount) || amount <= 0) {\r\n      console.error(\"  :\", subscribeAmount);\r\n      return displayMessage(\"  .\", \"error\");\r\n    }\r\n    if (product.minAmount && amount < product.minAmount) {\r\n      console.error(`   : ${amount} < ${product.minAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.minAmount)}.`, \"error\");\r\n    }\r\n    if (product.maxAmount && amount > product.maxAmount) {\r\n      console.error(`   : ${amount} > ${product.maxAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.maxAmount)}.`, \"error\");\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    handleCloseModal(); // UX     \r\n\r\n    // ---   (Optimistic Update) ---\r\n    const tempId = `temp_${Date.now()}`;\r\n    const maturityDate = new Date(Date.now() + product.termInDays * 24 * 60 * 60 * 1000);\r\n    const optimisticProduct = {\r\n      id: tempId,\r\n      name: product.name,\r\n      termInDays: product.termInDays,\r\n      rate: product.dailyRate,\r\n      balance: amount,\r\n      startDate: new Date(),\r\n      maturityDate: maturityDate,\r\n      type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n      isOptimistic: true //   \r\n    };\r\n\r\n    //    \r\n    if (optimisticProduct.type === 'deposit') {\r\n      setUserDeposits(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'savings') {\r\n      setUserSavings(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'loan') {\r\n      setUserLoans(prev => [...prev, optimisticProduct]);\r\n    }\r\n\r\n    //    \r\n    const cashChangeAmount = type === 'loans' ? amount : -amount;\r\n    setCurrentCash(prev => prev + cashChangeAmount); //  UI   \r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const userRef = doc(db, \"users\", userId);\r\n        const userSnapshot = await transaction.get(userRef);\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        if (type !== 'loans' && currentCashInDb < amount) {\r\n          throw new Error(\"  .\");\r\n        }\r\n\r\n        const newProductData = {\r\n          name: product.name,\r\n          termInDays: product.termInDays,\r\n          rate: product.dailyRate,\r\n          balance: amount,\r\n          startDate: serverTimestamp(),\r\n          maturityDate: maturityDate,\r\n          type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n        };\r\n\r\n        const newProductRef = doc(collection(db, \"users\", userId, \"products\"));\r\n        transaction.set(newProductRef, newProductData);\r\n        transaction.update(userRef, { cash: increment(cashChangeAmount) });\r\n      });\r\n\r\n      displayMessage(\"  .\", \"success\");\r\n\r\n      //     (// )\r\n      const activityType = type === 'deposits' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n        : type === 'savings' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n          : ACTIVITY_TYPES.LOAN_CREATE;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: `${product.name}  (${formatCurrency(amount)})`,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: product.name,\r\n          productType: type,\r\n          termInDays: product.termInDays,\r\n          dailyRate: product.dailyRate,\r\n          maturityDate: maturityDate.toISOString()\r\n        }\r\n      });\r\n\r\n      //        \r\n      await loadAllData();\r\n      if (refreshUserDocument) refreshUserDocument();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(`  : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      if (optimisticProduct.type === 'deposit') {\r\n        setUserDeposits(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'savings') {\r\n        setUserSavings(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'loan') {\r\n        setUserLoans(prev => prev.filter(p => p.id !== tempId));\r\n      }\r\n\r\n      //   ( UI)\r\n      setCurrentCash(prev => prev - cashChangeAmount);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleMaturity = async (product) => {\r\n    console.log(\"--- handleMaturity  ---\");\r\n    console.log(\" :\", product);\r\n\r\n    const { id, name, type, balance, termInDays, rate } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleMaturity: userId .\");\r\n      return;\r\n    }\r\n\r\n    const dailyRate = rate;\r\n    const { total, interest } = calculateCompoundInterest(balance, dailyRate, termInDays);\r\n\r\n    console.log(` : =${balance}, =${interest}, =${total}`);\r\n\r\n    if (!window.confirm(` :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"  ...\");\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n\r\n        //   ,   \r\n        const cashChange = isLoan ? -total : total;\r\n        console.log(` : ${cashChange}`);\r\n\r\n        transaction.update(userRef, { cash: increment(cashChange) });\r\n        console.log(\"   \");\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      displayMessage(`  : ${formatCurrency(total)}`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.DEPOSIT_MATURITY,\r\n        description: `${name}   (: ${formatCurrency(balance)}, : ${formatCurrency(interest)})`,\r\n        amount: total,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          interest,\r\n          total\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument().then(() => {\r\n          console.log(\"[ParkingAccount]    userDoc  \");\r\n        });\r\n      }\r\n\r\n      console.log(\"   \");\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      //    currentCash \r\n      if (userDoc?.cash !== undefined) {\r\n        console.log(\"   :\", userDoc.cash);\r\n        setCurrentCash(userDoc.cash);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleMaturity  ---\");\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleCancelEarly = async (product) => {\r\n    console.log(\"--- handleCancelEarly  ---\");\r\n    console.log(\"  :\", product);\r\n\r\n    const { id, name, type, balance } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleCancelEarly: userId .\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = isLoan\r\n      ? ` ${formatCurrency(balance)} ?`\r\n      : `'${name}'()  ? (   )`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"   ...\");\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const originalProducts = {\r\n      deposit: [...userDeposits],\r\n      savings: [...userSavings],\r\n      loan: [...userLoans]\r\n    };\r\n    const originalCash = currentCash;\r\n\r\n    const cashChangeAmount = isLoan ? -balance : balance;\r\n    setCurrentCash(prev => prev + cashChangeAmount);\r\n\r\n    if (type === 'deposit') {\r\n      setUserDeposits(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'savings') {\r\n      setUserSavings(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'loan') {\r\n      setUserLoans(prev => prev.filter(p => p.id !== id));\r\n    }\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const userSnapshot = await transaction.get(userRef);\r\n        if (!userSnapshot.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        console.log(`   (DB): ${currentCashInDb}`);\r\n\r\n        if (isLoan && currentCashInDb < balance) {\r\n          throw new Error(\"   .\");\r\n        }\r\n\r\n        transaction.update(userRef, { cash: increment(cashChangeAmount) });\r\n        console.log(`   (${cashChangeAmount}) `);\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      displayMessage(`${isLoan ? ' ' : ' '} .  ${formatCurrency(balance)} .`, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_WITHDRAW;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? ` : ${name} (${formatCurrency(balance)})`\r\n          : ` : ${name} ( ${formatCurrency(balance)} )`,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          isEarlyCancellation: true\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument();\r\n      }\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      setUserDeposits(originalProducts.deposit);\r\n      setUserSavings(originalProducts.savings);\r\n      setUserLoans(originalProducts.loan);\r\n      setCurrentCash(originalCash);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleCancelEarly  ---\");\r\n    }\r\n  };\r\n\r\n  const handleParkingDeposit = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev + amount);\r\n\r\n    try {\r\n      //     (AuthContext deductCash )\r\n      const cashDeducted = await deductCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashDeducted) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n\r\n        if (parkingSnapshot.exists()) {\r\n          transaction.update(parkingRef, { balance: increment(amount) });\r\n        } else {\r\n          transaction.set(parkingRef, { balance: amount, lastInterestDate: serverTimestamp() });\r\n        }\r\n      });\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_DEPOSIT,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: -amount,\r\n        metadata: { parkingBalance: parkingBalance + amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleParkingWithdraw = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev - amount);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n        const currentParkingBalance = parkingSnapshot.data()?.balance ?? 0;\r\n\r\n        if (currentParkingBalance < amount) throw new Error(\"  .\");\r\n\r\n        transaction.update(parkingRef, { balance: increment(-amount) });\r\n      });\r\n\r\n      //    (AuthContext addCash )\r\n      const cashAdded = await addCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashAdded) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_WITHDRAW,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: amount,\r\n        metadata: { parkingBalance: parkingBalance - amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteSubscribedProduct = async (product) => {\r\n    if (!isAdmin()) {\r\n      displayMessage(\"  .\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`  (${product.name})  ?     .`)) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", product.id);\r\n      await deleteDoc(productRef);\r\n      displayMessage(\"  .\", \"success\");\r\n      loadAllData();\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(`  : ${error.message}`, \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div style={styles.container}>   ...</div>;\r\n  if (!user) return <div style={styles.container}> .</div>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/*   */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '10px',\r\n        marginBottom: '24px',\r\n        borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n        paddingBottom: '0',\r\n        position: 'relative'\r\n      }}>\r\n        <button\r\n          onClick={() => onViewChange && onViewChange('parking')}\r\n          style={{\r\n            padding: '12px 24px',\r\n            border: 'none',\r\n            background: activeView === 'parking' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '17px',\r\n            fontWeight: activeView === 'parking' ? '700' : '500',\r\n            color: activeView === 'parking' ? '#00fff2' : '#94a3b8',\r\n            borderBottom: `3px solid ${activeView === 'parking' ? '#00fff2' : 'transparent'}`,\r\n            marginBottom: '-2px',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n        >\r\n            \r\n        </button>\r\n        {isAdmin && isAdmin() && (\r\n          <>\r\n            <button\r\n              onClick={() => onViewChange && onViewChange('admin')}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'admin' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'admin' ? '700' : '500',\r\n                color: activeView === 'admin' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'admin' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (onViewChange) onViewChange('userProducts');\r\n                if (onLoadUserProducts) onLoadUserProducts();\r\n              }}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'userProducts' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'userProducts' ? '700' : '500',\r\n                color: activeView === 'userProducts' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'userProducts' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n                \r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {message && <div style={styles.message(messageType)}>{message}</div>}\r\n\r\n      {/*     */}\r\n      {activeView === 'userProducts' && isAdmin && isAdmin() && (\r\n        <div style={{\r\n          backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n          borderRadius: '16px',\r\n          padding: '32px',\r\n          boxShadow: '0 6px 20px rgba(0, 0, 0, 0.3)',\r\n          border: '1px solid rgba(255, 255, 255, 0.05)'\r\n        }}>\r\n          <h2 style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '16px', color: '#fff' }}>\r\n                 \r\n          </h2>\r\n          <p style={{ fontSize: '14px', color: '#94a3b8', marginBottom: '20px' }}>\r\n                       .\r\n          </p>\r\n\r\n          {allUserProducts.length === 0 ? (\r\n            <p style={{ textAlign: 'center', padding: '40px', color: '#94a3b8' }}>\r\n                .\r\n            </p>\r\n          ) : (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                  <tr style={{ backgroundColor: 'rgba(255, 255, 255, 0.05)', borderBottom: '2px solid rgba(255, 255, 255, 0.1)' }}>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>/</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allUserProducts.map((product, index) => {\r\n                    const typeLabel = product.type === 'deposit' ? '' :\r\n                      product.type === 'savings' ? '' :\r\n                        product.type === 'loan' ? '' : '';\r\n                    return (\r\n                      <tr key={`${product.userId}-${product.id}-${index}`} style={{ borderBottom: '1px solid rgba(255, 255, 255, 0.05)' }}>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.userName}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.name}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{typeLabel}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#00fff2' }}>{formatKoreanCurrency(product.balance || 0)}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.rate}%</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.termInDays}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>\r\n                          {product.maturityDate\r\n                            ? new Date(product.maturityDate).toLocaleDateString('ko-KR')\r\n                            : '-'}\r\n                        </td>\r\n                        <td style={{ padding: '12px' }}>\r\n                          <button\r\n                            onClick={() => onDeleteUserProduct && onDeleteUserProduct(product)}\r\n                            style={{\r\n                              ...styles.button(false, 'danger'),\r\n                              fontSize: '12px',\r\n                              padding: '6px 12px'\r\n                            }}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <div style={{ marginTop: '20px', textAlign: 'right', color: '#94a3b8', fontSize: '14px' }}>\r\n                 {allUserProducts.length} \r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {activeView === 'parking' && (\r\n        <div style={styles.grid}>\r\n          <ParkingAccountSection\r\n            balance={parkingBalance}\r\n            dailyInterest={parkingDailyInterest}\r\n            onDeposit={handleParkingDeposit}\r\n            onWithdraw={handleParkingWithdraw}\r\n            isProcessing={isProcessing}\r\n            userCash={currentCash}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.deposits}\r\n            subscribedProducts={userDeposits}\r\n            availableProducts={depositProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'deposits')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.savings}\r\n            subscribedProducts={userSavings}\r\n            availableProducts={installmentProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'savings')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.loans}\r\n            subscribedProducts={userLoans}\r\n            availableProducts={loanProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'loans')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n        </div>\r\n      )}\r\n      <SubscriptionModal\r\n        isOpen={modal.isOpen}\r\n        onClose={handleCloseModal}\r\n        product={modal.product}\r\n        onConfirm={handleSubscribe}\r\n        isProcessing={isProcessing}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParkingAccount;\r\n","// src/Banking.js - Tailwind UI \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ParkingAccount from \"./ParkingAccount\";\r\nimport { getBankingProducts, updateBankingProducts, db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs, collectionGroup, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../numberFormatter';\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Landmark, ChevronLeft, Save, Plus, Trash2 } from \"lucide-react\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\nconst convertAdminProductsToAccountFormat = (adminProducts) => {\r\n  if (!Array.isArray(adminProducts)) {\r\n    console.error(\r\n      \"convertAdminProductsToAccountFormat:   .\",\r\n      adminProducts\r\n    );\r\n    return [];\r\n  }\r\n  return adminProducts.map((product) => ({\r\n    id: product.id,\r\n    name: product.name,\r\n    dailyRate:\r\n      product.dailyRate !== undefined && !isNaN(product.dailyRate) ? parseFloat(product.dailyRate) : 0,\r\n    termInDays:\r\n      product.termInDays !== undefined && !isNaN(product.termInDays) ? parseInt(product.termInDays) : 1,\r\n    minAmount:\r\n      product.minAmount !== undefined && !isNaN(product.minAmount) ? parseInt(product.minAmount) : 0,\r\n    maxAmount:\r\n      product.maxAmount !== undefined && !isNaN(product.maxAmount) ? parseInt(product.maxAmount) : 0,\r\n  }));\r\n};\r\n\r\nimport \"./Banking.css\";\r\n\r\nconst Banking = () => {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [activeView, setActiveView] = useState(\"parking\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [parkingDepositProducts, setParkingDepositProducts] = useState([]);\r\n  const [parkingInstallmentProducts, setParkingInstallmentProducts] = useState(\r\n    []\r\n  );\r\n  const [parkingLoanProducts, setParkingLoanProducts] = useState([]);\r\n\r\n  //    \r\n  const [allUserProducts, setAllUserProducts] = useState([]);\r\n\r\n  //     \r\n  const loadAllUserProducts = async () => {\r\n    if (!auth?.userDoc?.classCode || !(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      //      \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", auth.userDoc.classCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      const userMap = {};\r\n      usersSnapshot.forEach((doc) => {\r\n        userMap[doc.id] = {\r\n          id: doc.id,\r\n          name: doc.data().name || doc.data().nickname || \"  \",\r\n          ...doc.data()\r\n        };\r\n      });\r\n\r\n      //  []     -   N+1  \r\n      const allProducts = [];\r\n      const userIds = Object.keys(userMap);\r\n\r\n      //   products   (  Promise.all )\r\n      const productPromises = userIds.map(async (userId) => {\r\n        const productsQuery = collection(db, \"users\", userId, \"products\");\r\n        const productsSnapshot = await getDocs(productsQuery);\r\n\r\n        return productsSnapshot.docs.map((productDoc) => {\r\n          const productData = productDoc.data();\r\n          return {\r\n            firestoreId: productDoc.id, //  Firestore  ID\r\n            userId: userId,\r\n            userName: userMap[userId].name,\r\n            ...productData,\r\n            maturityDate: productData.maturityDate?.toDate ? productData.maturityDate.toDate() : productData.maturityDate\r\n          };\r\n        });\r\n      });\r\n\r\n      //  Promise   \r\n      const productsArrays = await Promise.all(productPromises);\r\n\r\n      // 2D  1D  \r\n      productsArrays.forEach(productsArray => {\r\n        allProducts.push(...productsArray);\r\n      });\r\n\r\n      setAllUserProducts(allProducts);\r\n      console.log(\"   :\", allProducts);\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handleAdminDeleteUserProduct = async (product) => {\r\n    console.log(\" :\", product);\r\n\r\n    if (!(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      console.log(\"  \");\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${product.userName}' '${product.name}'   ?\\n    .`)) {\r\n      console.log(\"  \");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // firestoreId  ( Firestore  ID)\r\n      const productId = product.firestoreId || String(product.id);\r\n      console.log(\" :\", `users/${product.userId}/products/${productId}`);\r\n      console.log(\"  ID:\", productId);\r\n\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", productId);\r\n      console.log(\" ...\");\r\n      await deleteDoc(productRef);\r\n      console.log(\" \");\r\n\r\n      setMessage(\" .\");\r\n      setMessageType(\"success\");\r\n\r\n      //  \r\n      console.log(\"  ...\");\r\n      await loadAllUserProducts();\r\n      console.log(\"  \");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMessage(`   : ${error.message}`);\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const [formattedDepositProducts, setFormattedDepositProducts] = useState([]);\r\n  const [formattedInstallmentProducts, setFormattedInstallmentProducts] =\r\n    useState([]);\r\n  const [formattedLoanProducts, setFormattedLoanProducts] = useState([]);\r\n\r\n  // Firestore  \r\n  const loadAllData = async () => {\r\n    const classCode = auth?.userDoc?.classCode;\r\n    if (!classCode || classCode === '') {\r\n      console.warn(\"[Banking]        .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const bankingData = await getBankingProducts(classCode, true, 'Banking');\r\n\r\n      // deposits savings  ( )\r\n      if (bankingData.deposits) {\r\n        setParkingDepositProducts(bankingData.deposits);\r\n      } else {\r\n        setParkingDepositProducts([]);\r\n      }\r\n\r\n      // savings installments  ( )\r\n      if (bankingData.savings) {\r\n        setParkingInstallmentProducts(bankingData.savings);\r\n      } else {\r\n        setParkingInstallmentProducts([]);\r\n      }\r\n\r\n      // loans   ( )\r\n      if (bankingData.loans) {\r\n        setParkingLoanProducts(bankingData.loans);\r\n      } else {\r\n        setParkingLoanProducts([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"    .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth && !auth.loading && auth.user && auth.userDoc?.classCode) {\r\n      loadAllData();\r\n    } else if (auth && !auth.loading && !auth.user) {\r\n      setParkingSavingsProducts([]);\r\n      setParkingInstallmentProducts([]);\r\n      setParkingLoanProducts([]);\r\n    }\r\n  }, [auth?.user, auth?.loading, auth?.userDoc?.classCode]);\r\n\r\n  useEffect(() => {\r\n    setFormattedDepositProducts(\r\n      convertAdminProductsToAccountFormat(parkingDepositProducts)\r\n    );\r\n    setFormattedInstallmentProducts(\r\n      convertAdminProductsToAccountFormat(parkingInstallmentProducts)\r\n    );\r\n    setFormattedLoanProducts(\r\n      convertAdminProductsToAccountFormat(parkingLoanProducts)\r\n    );\r\n  }, [parkingDepositProducts, parkingInstallmentProducts, parkingLoanProducts]);\r\n\r\n  const handleParkingProductChange = (type, index, field, value) => {\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.map((product, i) => {\r\n      if (i === index) {\r\n        const updatedProduct = { ...product };\r\n        if (\r\n          field === \"termInDays\" ||\r\n          field === \"minAmount\" ||\r\n          field === \"maxAmount\"\r\n        ) {\r\n          const numValue = parseInt(value);\r\n          updatedProduct[field] =\r\n            isNaN(numValue) || numValue < (field === \"termInDays\" ? 1 : 0)\r\n              ? field === \"termInDays\"\r\n                ? 1\r\n                : 0\r\n              : numValue;\r\n        } else if (field === \"dailyRate\") {\r\n          const dailyRateValue = parseFloat(value);\r\n          updatedProduct.dailyRate =\r\n            isNaN(dailyRateValue) || dailyRateValue < 0 ? 0 : dailyRateValue;\r\n        } else if (field === \"name\") {\r\n          updatedProduct[field] = value;\r\n        }\r\n        return updatedProduct;\r\n      }\r\n      return product;\r\n    });\r\n    setProductsState(updatedProducts);\r\n  };\r\n\r\n  const saveParkingProducts = async (type) => {\r\n    if (!auth?.userDoc?.classCode) {\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      let products, firestoreType;\r\n\r\n      switch (type) {\r\n        case \"deposits\":\r\n          products = parkingDepositProducts;\r\n          firestoreType = \"deposits\"; // Firebase deposits \r\n          break;\r\n        case \"installments\":\r\n          products = parkingInstallmentProducts;\r\n          firestoreType = \"savings\"; // Firebase savings \r\n          break;\r\n        case \"loans\":\r\n          products = parkingLoanProducts;\r\n          firestoreType = \"loans\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      await updateBankingProducts(\r\n        auth.userDoc.classCode,\r\n        firestoreType,\r\n        products\r\n      );\r\n\r\n      setMessage(\r\n        `${type === \"deposits\"\r\n          ? \"\"\r\n          : type === \"installments\"\r\n            ? \"\"\r\n            : \"\"\r\n        }   .`\r\n      );\r\n      setMessageType(\"success\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(`${type}    :`, error);\r\n      setMessage(\"   .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addParkingProduct = (type) => {\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: ` ${type === \"deposits\"\r\n        ? \"\"\r\n        : type === \"installments\"\r\n          ? \"\"\r\n          : \"\"\r\n        } `,\r\n      dailyRate: 0.01,\r\n      termInDays: 365,\r\n      minAmount: type === \"loans\" ? 0 : 100000,\r\n      maxAmount: type === \"loans\" ? 1000000 : 0,\r\n    };\r\n\r\n    switch (type) {\r\n      case \"deposits\":\r\n        setParkingDepositProducts([...parkingDepositProducts, newProduct]);\r\n        break;\r\n      case \"installments\":\r\n        setParkingInstallmentProducts([\r\n          ...parkingInstallmentProducts,\r\n          newProduct,\r\n        ]);\r\n        break;\r\n      case \"loans\":\r\n        setParkingLoanProducts([...parkingLoanProducts, newProduct]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const deleteParkingProduct = async (type, indexToDelete) => {\r\n    if (isLoading) return; //   \r\n\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.filter(\r\n      (_, index) => index !== indexToDelete\r\n    );\r\n    setProductsState(updatedProducts);\r\n\r\n    //    \r\n    if (auth?.userDoc?.classCode) {\r\n      setIsLoading(true);\r\n      try {\r\n        const firestoreType =\r\n          type === \"deposits\"\r\n            ? \"deposits\"\r\n            : type === \"installments\"\r\n              ? \"savings\"\r\n              : \"loans\";\r\n        await updateBankingProducts(\r\n          auth.userDoc.classCode,\r\n          firestoreType,\r\n          updatedProducts\r\n        );\r\n        setMessage(\" .\");\r\n        setMessageType(\"info\");\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(\"\");\r\n        }, 2000);\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        setMessage(\"   .\");\r\n        setMessageType(\"error\");\r\n        //         ()\r\n        setProductsState(productsState);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (auth.loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/*   */}\r\n      {isLoading && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <AlchanLoading />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"px-4 py-6 sm:px-6\">\r\n        {/*   */}\r\n        <PageHeader\r\n          title=\"  \"\r\n          subtitle=\", ,   \"\r\n          icon={Landmark}\r\n          backButton={\r\n            <ActionButton\r\n              variant=\"ghost\"\r\n              icon={ChevronLeft}\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              \r\n            </ActionButton>\r\n          }\r\n        />\r\n\r\n        {/*   */}\r\n        {message && (\r\n          <div className={`mb-4 p-4 rounded-xl ${messageType === 'error'\r\n            ? 'bg-red-900/40 text-red-200 border border-red-800/50'\r\n            : messageType === 'success'\r\n              ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-800/50'\r\n              : 'bg-blue-900/40 text-blue-200 border border-blue-800/50'\r\n            }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className={activeView === \"admin\" ? \"content-box\" : \"\"}>\r\n          {(activeView === \"parking\" || activeView === \"userProducts\") && (\r\n            <ParkingAccount\r\n              auth={auth}\r\n              depositProducts={formattedDepositProducts}\r\n              installmentProducts={formattedInstallmentProducts}\r\n              loanProducts={formattedLoanProducts}\r\n              activeView={activeView}\r\n              onViewChange={setActiveView}\r\n              onLoadUserProducts={loadAllUserProducts}\r\n              allUserProducts={allUserProducts}\r\n              onDeleteUserProduct={handleAdminDeleteUserProduct}\r\n              isLoading={isLoading}\r\n            />\r\n          )}\r\n          {activeView === \"admin\" &&\r\n            auth.user &&\r\n            (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\") && (\r\n              <div>\r\n                <h2 className=\"admin-header\">\r\n                   -    (  )\r\n                </h2>\r\n                {/* Savings Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingDepositProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.01\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"deposits\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"deposits\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"deposits\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Installment Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingInstallmentProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.011\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"installments\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"installments\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"installments\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Loan Products */}\r\n                <div className=\"admin-section\" style={{ borderBottom: \"none\" }}>\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingLoanProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.05\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.maxAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"maxAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"loans\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"loans\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"loans\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {activeView === \"admin\" &&\r\n            !(\r\n              auth.user &&\r\n              (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")\r\n            ) && (\r\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800\">\r\n                  .\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default Banking;","// src/components/AvatarEditor.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"./Avatar\";\r\nimport {\r\n  getAvatarConfig,\r\n  saveAvatarConfig,\r\n  getAvatarOptions,\r\n  isHairstyleCompatible,\r\n  AVATAR_CATEGORIES,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *    \r\n */\r\nexport default function AvatarEditor({ isOpen, onClose, userId, onSave }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"skinTone\");\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      const savedConfig = getAvatarConfig(userId);\r\n      setConfig(savedConfig);\r\n      setHasChanges(false);\r\n    }\r\n  }, [isOpen, userId]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const currentOptions = getAvatarOptions(selectedCategory);\r\n\r\n  const handleOptionSelect = (optionId) => {\r\n    const newConfig = { ...config, [selectedCategory]: optionId };\r\n\r\n    //   \r\n    if (selectedCategory === \"faceShape\") {\r\n      if (!isHairstyleCompatible(config.hairstyle, optionId)) {\r\n        //     \r\n        newConfig.hairstyle = \"short\";\r\n      }\r\n    }\r\n\r\n    setConfig(newConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    saveAvatarConfig(userId, config);\r\n    setHasChanges(false);\r\n    if (onSave) onSave(config);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setConfig({ ...DEFAULT_AVATAR });\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleRandomize = () => {\r\n    const randomConfig = {};\r\n    AVATAR_CATEGORIES.forEach(cat => {\r\n      const options = getAvatarOptions(cat.id);\r\n      if (options.length > 0) {\r\n        const randomIndex = Math.floor(Math.random() * options.length);\r\n        randomConfig[cat.id] = options[randomIndex].id;\r\n      }\r\n    });\r\n    setConfig(randomConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  //    \r\n  const getCurrentValue = () => config[selectedCategory];\r\n\r\n  //  \r\n  const renderOptionItem = (option) => {\r\n    const isSelected = getCurrentValue() === option.id;\r\n\r\n    //   \r\n    const isIncompatible = selectedCategory === \"hairstyle\" &&\r\n      !isHairstyleCompatible(option.id, config.faceShape);\r\n\r\n    return (\r\n      <button\r\n        key={option.id}\r\n        onClick={() => !isIncompatible && handleOptionSelect(option.id)}\r\n        disabled={isIncompatible}\r\n        style={{\r\n          padding: \"12px\",\r\n          borderRadius: \"12px\",\r\n          border: isSelected ? \"3px solid #a78bfa\" : \"2px solid #374151\",\r\n          background: isSelected\r\n            ? \"linear-gradient(135deg, #a78bfa20 0%, #8b5cf620 100%)\"\r\n            : \"#1f2937\",\r\n          cursor: isIncompatible ? \"not-allowed\" : \"pointer\",\r\n          opacity: isIncompatible ? 0.4 : 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          gap: \"6px\",\r\n          minWidth: \"70px\",\r\n          transition: \"all 0.2s\",\r\n        }}\r\n      >\r\n        {/*   */}\r\n        {option.color && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: option.color,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n              boxShadow: isSelected ? `0 0 10px ${option.color}` : \"none\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*   */}\r\n        {option.gradient && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              background: `linear-gradient(135deg, ${option.gradient.join(\", \")})`,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*  - SVG  */}\r\n        {selectedCategory === \"faceShape\" && option.path && (\r\n          <div style={{ width: \"36px\", height: \"36px\" }}>\r\n            <svg viewBox=\"0 0 100 100\" width=\"36\" height=\"36\">\r\n              <path\r\n                d={option.path}\r\n                fill=\"#F5DEB3\"\r\n                stroke={isSelected ? \"#a78bfa\" : \"#666\"}\r\n                strokeWidth=\"2\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n        {/*    */}\r\n        {option.icon && selectedCategory !== \"faceShape\" && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"24px\",\r\n            }}\r\n          >\r\n            {option.icon}\r\n          </div>\r\n        )}\r\n        {/*  ( ) - , , path, icon    */}\r\n        {!option.color && !option.gradient && !option.path && !option.icon && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"20px\",\r\n              color: \"#e8e8ff\",\r\n            }}\r\n          >\r\n            {option.id === \"none\" ? \"\" : \"\"}\r\n          </div>\r\n        )}\r\n        <span\r\n          style={{\r\n            fontSize: \"11px\",\r\n            color: isSelected ? \"#a78bfa\" : \"#9ca3af\",\r\n            fontWeight: isSelected ? \"600\" : \"400\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          {option.name}\r\n        </span>\r\n        {isIncompatible && (\r\n          <span style={{ fontSize: \"9px\", color: \"#ef4444\" }}>\r\n            \r\n          </span>\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.85)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 2000,\r\n        padding: \"10px\",\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"20px\",\r\n          maxWidth: \"600px\",\r\n          width: \"100%\",\r\n          maxHeight: \"90vh\",\r\n          overflowY: \"auto\",\r\n          border: \"2px solid #a78bfa40\",\r\n          boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          <h2\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"20px\",\r\n              fontWeight: \"700\",\r\n              color: \"#e8e8ff\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"10px\",\r\n            }}\r\n          >\r\n            <span style={{ fontSize: \"24px\" }}></span>\r\n             \r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: \"transparent\",\r\n              border: \"none\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"24px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginBottom: \"16px\",\r\n            padding: \"16px\",\r\n            background: \"linear-gradient(135deg, #11182750 0%, #1f293750 100%)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid #374151\",\r\n          }}\r\n        >\r\n          <div style={{ position: \"relative\" }}>\r\n            <Avatar key={JSON.stringify(config)} config={config} size={150} />\r\n            {/*   */}\r\n            <button\r\n              onClick={handleRandomize}\r\n              style={{\r\n                position: \"absolute\",\r\n                bottom: \"-10px\",\r\n                right: \"-10px\",\r\n                width: \"40px\",\r\n                height: \"40px\",\r\n                borderRadius: \"50%\",\r\n                background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\r\n                border: \"none\",\r\n                fontSize: \"20px\",\r\n                cursor: \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.4)\",\r\n              }}\r\n              title=\" \"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"6px\",\r\n            overflowX: \"auto\",\r\n            overflowY: \"hidden\",\r\n            paddingBottom: \"12px\",\r\n            marginBottom: \"12px\",\r\n            WebkitOverflowScrolling: \"touch\",\r\n            scrollbarWidth: \"thin\",\r\n            msOverflowStyle: \"auto\",\r\n          }}\r\n        >\r\n          {AVATAR_CATEGORIES.map((cat) => (\r\n            <button\r\n              key={cat.id}\r\n              onClick={() => setSelectedCategory(cat.id)}\r\n              style={{\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"10px\",\r\n                border: selectedCategory === cat.id ? \"2px solid #a78bfa\" : \"2px solid transparent\",\r\n                background:\r\n                  selectedCategory === cat.id\r\n                    ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                    : \"#374151\",\r\n                color: selectedCategory === cat.id ? \"#fff\" : \"#9ca3af\",\r\n                fontSize: \"12px\",\r\n                fontWeight: \"600\",\r\n                cursor: \"pointer\",\r\n                whiteSpace: \"nowrap\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"6px\",\r\n                transition: \"all 0.2s\",\r\n                minWidth: \"fit-content\",\r\n              }}\r\n            >\r\n              {/*    */}\r\n              <span\r\n                style={{\r\n                  width: \"14px\",\r\n                  height: \"14px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: cat.icon,\r\n                  border: \"2px solid rgba(255,255,255,0.3)\",\r\n                  flexShrink: 0,\r\n                }}\r\n              />\r\n              <span>{cat.name}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fill, minmax(70px, 1fr))\",\r\n            gap: \"8px\",\r\n            maxHeight: \"200px\",\r\n            overflowY: \"auto\",\r\n            padding: \"8px\",\r\n            background: \"#11182750\",\r\n            borderRadius: \"12px\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          {currentOptions.map(renderOptionItem)}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"10px\",\r\n            justifyContent: \"flex-end\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleReset}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              borderRadius: \"10px\",\r\n              border: \"1px solid #374151\",\r\n              background: \"transparent\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"14px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!hasChanges}\r\n            style={{\r\n              padding: \"10px 24px\",\r\n              borderRadius: \"10px\",\r\n              border: \"none\",\r\n              background: hasChanges\r\n                ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                : \"#374151\",\r\n              color: hasChanges ? \"#fff\" : \"#6b7280\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"600\",\r\n              cursor: hasChanges ? \"pointer\" : \"not-allowed\",\r\n              boxShadow: hasChanges ? \"0 4px 15px rgba(139, 92, 246, 0.4)\" : \"none\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function AvatarProfileCard({ userId, userName, netAssets, onEditClick }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setConfig(getAvatarConfig(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"20px\",\r\n        padding: \"20px\",\r\n        border: \"2px solid #a78bfa40\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"16px\",\r\n      }}\r\n    >\r\n      {/*  */}\r\n      <div style={{ position: \"relative\" }}>\r\n        <Avatar config={config} size={100} />\r\n        <button\r\n          onClick={onEditClick}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: \"-5px\",\r\n            right: \"-5px\",\r\n            width: \"32px\",\r\n            height: \"32px\",\r\n            borderRadius: \"50%\",\r\n            background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n            border: \"2px solid #1a1a2e\",\r\n            fontSize: \"14px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n          title=\" \"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      {/*  */}\r\n      <div style={{ flex: 1 }}>\r\n        <div\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            color: \"#e8e8ff\",\r\n            marginBottom: \"8px\",\r\n          }}\r\n        >\r\n          {userName}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontSize: \"13px\",\r\n            color: \"#9ca3af\",\r\n          }}\r\n        >\r\n          : {Number(netAssets || 0).toLocaleString()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/MyProfile.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { verifyClassCode, db } from \"./firebase\";\r\nimport { doc, updateDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { updatePassword, EmailAuthProvider, reauthenticateWithCredential, deleteUser } from \"firebase/auth\";\r\nimport Avatar from \"./components/Avatar\";\r\nimport AvatarEditor from \"./components/AvatarEditor\";\r\nimport { getAvatarConfig } from \"./utils/avatarSystem\";\r\nimport { getLevelInfo, LEVEL_THRESHOLDS } from \"./utils/levelSystem\";\r\nimport { getUserAchievements, getAchievementById } from \"./utils/achievementSystem\";\r\nimport { StreakDisplay, StreakRewardInfo } from \"./components/DailyReward\";\r\nimport { formatKoreanCurrency } from \"./numberFormatter\";\r\nimport { User, Key, Building2, Trash2, LogOut, Settings, ChevronRight } from \"lucide-react\";\r\n\r\nexport default function MyProfile() {\r\n  const { user, userDoc, logout } = useAuth();\r\n  const userId = user?.uid;\r\n  const userName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n  const [achievements, setAchievements] = useState([]);\r\n\r\n  //    \r\n  const [showNicknameModal, setShowNicknameModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showClassCodeModal, setShowClassCodeModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\r\n  //  \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //  \r\n  const cash = Number(userDoc?.cash) || 0;\r\n  const stockValue = Number(userDoc?.stockValue) || 0;\r\n  const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n  const itemValue = Number(userDoc?.itemValue) || 0;\r\n  const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n\r\n  //  \r\n  const levelInfo = getLevelInfo(netAssets);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setAvatarConfig(getAvatarConfig(userId));\r\n      setAchievements(getUserAchievements(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleAvatarSave = (newConfig) => {\r\n    setAvatarConfig(newConfig);\r\n  };\r\n\r\n  //  \r\n  const resetModals = () => {\r\n    setNewNickname(\"\");\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n    setNewClassCode(\"\");\r\n    setDeleteConfirmText(\"\");\r\n    setError(\"\");\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = async () => {\r\n    if (!newNickname.trim()) {\r\n      setError(\" .\");\r\n      return;\r\n    }\r\n    if (newNickname.length < 2 || newNickname.length > 10) {\r\n      setError(\" 2~10  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { nickname: newNickname.trim() });\r\n      alert(\" .\");\r\n      setShowNicknameModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"  .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      setError(\"  6  .\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n      await reauthenticateWithCredential(user, credential);\r\n      await updatePassword(user, newPassword);\r\n      alert(\" .\");\r\n      setShowPasswordModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      if (err.code === \"auth/wrong-password\") {\r\n        setError(\"   .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleChangeClassCode = async () => {\r\n    if (!newClassCode.trim()) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(newClassCode.trim());\r\n      if (!isValid) {\r\n        setError(\"   .\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { classCode: newClassCode.trim() });\r\n      alert(\"  .\");\r\n      setShowClassCodeModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"   .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    if (deleteConfirmText !== \"\") {\r\n      setError(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Firestore   \r\n      const userRef = doc(db, \"users\", userId);\r\n      await deleteDoc(userRef);\r\n\r\n      // Firebase Auth  \r\n      await deleteUser(user);\r\n\r\n      alert(\" .\");\r\n    } catch (err) {\r\n      if (err.code === \"auth/requires-recent-login\") {\r\n        setError(\"     .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     (legendary > epic > rare > common)\r\n  const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n  const sortedAchievements = [...achievements].sort((a, b) => {\r\n    const achA = getAchievementById(a.id);\r\n    const achB = getAchievementById(b.id);\r\n    return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n  });\r\n\r\n  //   (  )\r\n  const bestAchievement = sortedAchievements.length > 0\r\n    ? getAchievementById(sortedAchievements[0].id)\r\n    : null;\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <p className=\"text-gray-400\"> .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\r\n        {/*   */}\r\n        <h1 style={{\r\n          fontSize: \"28px\",\r\n          fontWeight: \"800\",\r\n          background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n          WebkitBackgroundClip: \"text\",\r\n          WebkitTextFillColor: \"transparent\",\r\n          marginBottom: \"24px\",\r\n        }}>\r\n           \r\n        </h1>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n          borderRadius: \"24px\",\r\n          padding: \"32px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n          boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.4)\",\r\n        }}>\r\n          <div style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            gap: \"24px\",\r\n          }}>\r\n            {/*  */}\r\n            <div style={{ position: \"relative\" }}>\r\n              <Avatar config={avatarConfig} size={180} />\r\n              <button\r\n                onClick={() => setShowAvatarEditor(true)}\r\n                style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"5px\",\r\n                  right: \"5px\",\r\n                  width: \"44px\",\r\n                  height: \"44px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"3px solid #1a1a2e\",\r\n                  fontSize: \"18px\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 15px rgba(167, 139, 250, 0.4)\",\r\n                }}\r\n                title=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <h2 style={{\r\n                fontSize: \"24px\",\r\n                fontWeight: \"700\",\r\n                color: \"#e8e8ff\",\r\n                marginBottom: \"8px\",\r\n              }}>\r\n                {userName}\r\n              </h2>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                display: \"inline-flex\",\r\n                alignItems: \"center\",\r\n                gap: \"8px\",\r\n                padding: \"8px 16px\",\r\n                background: `linear-gradient(135deg, ${levelInfo.color}20 0%, ${levelInfo.color}10 100%)`,\r\n                border: `2px solid ${levelInfo.color}`,\r\n                borderRadius: \"20px\",\r\n                marginBottom: \"12px\",\r\n              }}>\r\n                <span style={{ fontSize: \"20px\" }}>{levelInfo.icon}</span>\r\n                <span style={{ color: levelInfo.color, fontWeight: \"700\", fontSize: \"14px\" }}>\r\n                  Lv.{levelInfo.level} {levelInfo.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/*   */}\r\n              {bestAchievement && (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"8px\",\r\n                  marginTop: \"8px\",\r\n                }}>\r\n                  <span style={{ fontSize: \"18px\" }}>{bestAchievement.icon}</span>\r\n                  <span style={{\r\n                    color: bestAchievement.rarity === \"legendary\" ? \"#f59e0b\" :\r\n                           bestAchievement.rarity === \"epic\" ? \"#a78bfa\" :\r\n                           bestAchievement.rarity === \"rare\" ? \"#3b82f6\" : \"#9ca3af\",\r\n                    fontWeight: \"600\",\r\n                    fontSize: \"13px\"\r\n                  }}>\r\n                    {bestAchievement.name}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{ marginTop: \"12px\" }}>\r\n                <StreakDisplay userId={userId} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>  \r\n          </h3>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>\r\n                {levelInfo.icon} Lv.{levelInfo.level} {levelInfo.title}\r\n              </span>\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", fontWeight: \"600\" }}>\r\n                {levelInfo.progress.toFixed(1)}%\r\n              </span>\r\n            </div>\r\n            <div style={{\r\n              height: \"12px\",\r\n              background: \"#374151\",\r\n              borderRadius: \"6px\",\r\n              overflow: \"hidden\",\r\n            }}>\r\n              <div style={{\r\n                width: `${levelInfo.progress}%`,\r\n                height: \"100%\",\r\n                background: `linear-gradient(90deg, ${levelInfo.color} 0%, ${levelInfo.color}99 100%)`,\r\n                borderRadius: \"6px\",\r\n                transition: \"width 0.5s ease\",\r\n              }} />\r\n            </div>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginTop: \"8px\",\r\n              fontSize: \"12px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n              <span>: {formatKoreanCurrency(netAssets)}</span>\r\n              {levelInfo.level < LEVEL_THRESHOLDS.length - 1 && (\r\n                <span>: {formatKoreanCurrency(LEVEL_THRESHOLDS[levelInfo.level + 1]?.minAssets || 0)}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>   ({achievements.length})\r\n          </h3>\r\n\r\n          {achievements.length === 0 ? (\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              padding: \"32px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n                 .\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"repeat(auto-fill, minmax(140px, 1fr))\",\r\n              gap: \"12px\",\r\n            }}>\r\n              {sortedAchievements.map((ach) => {\r\n                const achievement = getAchievementById(ach.id);\r\n                if (!achievement) return null;\r\n\r\n                const rarityColors = {\r\n                  legendary: { bg: \"#f59e0b20\", border: \"#f59e0b\", text: \"#f59e0b\" },\r\n                  epic: { bg: \"#a78bfa20\", border: \"#a78bfa\", text: \"#a78bfa\" },\r\n                  rare: { bg: \"#3b82f620\", border: \"#3b82f6\", text: \"#3b82f6\" },\r\n                  common: { bg: \"#6b728020\", border: \"#6b7280\", text: \"#9ca3af\" },\r\n                };\r\n                const colors = rarityColors[achievement.rarity] || rarityColors.common;\r\n\r\n                return (\r\n                  <div\r\n                    key={ach.id}\r\n                    style={{\r\n                      background: colors.bg,\r\n                      border: `2px solid ${colors.border}`,\r\n                      borderRadius: \"12px\",\r\n                      padding: \"16px\",\r\n                      textAlign: \"center\",\r\n                      transition: \"all 0.2s\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: \"32px\", marginBottom: \"8px\" }}>\r\n                      {achievement.icon}\r\n                    </div>\r\n                    <div style={{\r\n                      color: colors.text,\r\n                      fontSize: \"12px\",\r\n                      fontWeight: \"600\",\r\n                      marginBottom: \"4px\",\r\n                    }}>\r\n                      {achievement.name}\r\n                    </div>\r\n                    <div style={{\r\n                      color: \"#6b7280\",\r\n                      fontSize: \"10px\",\r\n                    }}>\r\n                      {new Date(ach.unlockedAt).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        <StreakRewardInfo />\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <Settings size={20} />  \r\n          </h3>\r\n\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n            {/*     */}\r\n            <div style={{\r\n              padding: \"16px\",\r\n              background: \"#0f0f23\",\r\n              borderRadius: \"12px\",\r\n              border: \"1px solid #374151\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>  </span>\r\n                <span style={{ color: \"#e8e8ff\", fontSize: \"16px\", fontWeight: \"600\" }}>\r\n                  {userDoc?.classCode || \"\"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowNicknameModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <User size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowPasswordModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Key size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*    */}\r\n            <button\r\n              onClick={() => { setShowClassCodeModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Building2 size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}>  </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*  */}\r\n            <button\r\n              onClick={logout}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                marginTop: \"8px\",\r\n              }}\r\n            >\r\n              <LogOut size={20} style={{ color: \"#9ca3af\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}></span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowDeleteModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"rgba(239, 68, 68, 0.1)\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid rgba(239, 68, 68, 0.3)\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Trash2 size={20} style={{ color: \"#ef4444\" }} />\r\n              <span style={{ color: \"#ef4444\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#ef4444\" }} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <AvatarEditor\r\n        isOpen={showAvatarEditor}\r\n        onClose={() => setShowAvatarEditor(false)}\r\n        userId={userId}\r\n        onSave={handleAvatarSave}\r\n      />\r\n\r\n      {/*    */}\r\n      {showNicknameModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowNicknameModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={e => setNewNickname(e.target.value)}\r\n              placeholder=\"  (2~10)\"\r\n              maxLength={10}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowNicknameModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeNickname}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showPasswordModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowPasswordModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              onChange={e => setCurrentPassword(e.target.value)}\r\n              placeholder=\" \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={e => setNewPassword(e.target.value)}\r\n              placeholder=\"  (6 )\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={e => setConfirmPassword(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowPasswordModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangePassword}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {showClassCodeModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowClassCodeModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\" }}>\r\n               : <span style={{ color: \"#a78bfa\", fontWeight: \"600\" }}>{userDoc?.classCode || \"\"}</span>\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCode}\r\n              onChange={e => setNewClassCode(e.target.value.toUpperCase())}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowClassCodeModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeClassCode}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showDeleteModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowDeleteModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #ef4444\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#ef4444\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"16px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\", lineHeight: 1.6 }}>\r\n                      .\r\n                 <span style={{ color: \"#ef4444\", fontWeight: \"600\" }}>''</span> .\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={e => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #ef4444\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowDeleteModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleDeleteAccount}\r\n                disabled={isLoading || deleteConfirmText !== \"\"}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: deleteConfirmText === \"\" ? \"#ef4444\" : \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: (isLoading || deleteConfirmText !== \"\") ? \"not-allowed\" : \"pointer\",\r\n                  opacity: (isLoading || deleteConfirmText !== \"\") ? 0.5 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../MyItems';\r\nimport MyAssets from '../MyAssets';\r\nimport ItemMarket from '../pages/market/ItemMarket';\r\nimport Login from '../Login';\r\nimport Banking from '../pages/banking/Banking';\r\nimport MyProfile from '../MyProfile';\r\n\r\n//    -   (  )\r\nconst GonuGame = lazy(() => import('../pages/games/GonuGame'));\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminPage = lazy(() => import('../pages/admin/AdminPage'));\r\nconst AdminPanel = lazy(() => import('../pages/admin/AdminPanel'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../CouponGoalPage'));\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/gonu-game',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  // Jua  \r\n  useEffect(() => {\r\n    const link = document.createElement('link');\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Jua&display=swap';\r\n    link.rel = 'stylesheet';\r\n    document.head.appendChild(link);\r\n    return () => {\r\n      if (document.head.contains(link)) {\r\n        document.head.removeChild(link);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n            <Route path=\"/gonu-game\" element={<ProtectedRoute><GonuGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><ItemMarket /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/task-management\" element={<AdminRoute><Dashboard adminTabMode=\"taskManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/salary-settings\" element={<AdminRoute><Dashboard adminTabMode=\"salarySettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/app-management\" element={<AdminRoute><Dashboard adminTabMode=\"appManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/page\" element={<AdminRoute><AdminPage /></AdminRoute>} />\r\n            <Route path=\"/admin-panel\" element={<AdminRoute><AdminPanel onClose={() => navigate(-1)} classCode={userClassCode} /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","modalBackdropStyle","position","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","modalContainerStyle","padding","borderRadius","maxWidth","width","maxHeight","overflowY","boxShadow","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","useState","error","setError","handleCancel","isInvalidAmount","isNaN","parseInt","style","onClick","e","stopPropagation","fontSize","fontWeight","marginBottom","color","toLocaleString","onSubmit","async","preventDefault","amount","console","err","message","htmlFor","id","type","value","onChange","target","min","max","border","outline","disabled","required","margin","borderLeft","calculateValue","gap","marginTop","cursor","transition","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","loading","setLoading","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","modalOverlayStyle","tableStyles","table","borderCollapse","overflow","thead","th","textAlign","borderBottom","td","tr","emptyContainer","flexDirection","emptyIcon","useEffect","processDonationData","log","studentsCount","length","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","marginLeft","background","lineHeight","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","verticalAlign","borderTop","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","resize","minHeight","alert","formatKoreanNumber","number","unit","arguments","undefined","num","replace","trim","parseFloat","isNegative","units","resultParts","remaining","Math","abs","quotient","floor","push","concat","maximumFractionDigits","result","join","formatKoreanCurrency","normalizeType","cache","getCacheKey","options","JSON","stringify","getFromCache","key","cached","Date","now","timestamp","delete","data","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","where","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","limit","q","query","collection","db","snapshot","getDocs","logs","doc","_data$timestamp","toDate","normalizedFilterType","hasMore","paginatedLogs","slice","newLastDoc","AdminDatabase","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","useCallback","refresh","lastDocForPagination","isFiltered","useCache","userIds","m","transactions","userIdsCount","warn","batches","i","allTransactions","batch","_data$timestamp3","getTransactionsData","tx","description","includes","metadata","category","convertTransactionsToLogs","prev","handleLoadMore","getActivityTypeColor","typeStr","toString","toLowerCase","formatDate","date","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","some","member","handleRefresh","keysToDelete","startsWith","clearClassCache","info","typeCounts","typeExamples","entries","count","filters","_log$type","_log$description","desc","t","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","_ref2","filterName","filterFunc","matchedLogs","matchedTypes","size","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","title","activity","reason","itemName","quantity","couponAmount","PageContainer","PageHeader","subtitle","icon","Icon","badge","action","backButton","LoadingState","_ref4","EmptyState","_ref6","ActionButton","_ref1","variant","primary","secondary","danger","success","ghost","indigo","sm","md","lg","Loader2","iconCollection","styles","container","fontFamily","card","header","tabs","tab","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","label","input","boxSizing","textarea","gridTwo","gridTemplateColumns","iconSelector","selectedIcon","height","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","borderColor","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","editingItemFromStore","onAddItem","onUpdateItem","onClose","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","item","setItem","price","stock","initialStock","available","priceIncreasePercentage","handleChange","checked","handleTabClick","tabName","isEditing","itemData","handleIconSelect","onMouseEnter","transform","onMouseLeave","step","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","LayoutDashboard","path","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","RefreshCw","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","isSubGroup","ListTodo","Briefcase","CATEGORY_LABELS","main","play","economy","society","community","admin","MenuSection","MenuItem","_ref3","active","hasSubmenu","ChevronDown","SubMenuItem","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","isOpen","isCollapsed","location","useLocation","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","isActive","pathname","categoryId","handleItemClick","isAdmin","isSuperAdmin","userRole","renderMenuSection","categoryKey","items","superAdminOnly","childItems","child","toggleCategory","charAt","textShadow","letterSpacing","X","LogOut","Sparkles","ShoppingBag","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","FONT_SIZES","Bell","handleNotificationToggle","newValue","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","paths","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","getAvatarConfig","saved","parse","_unused","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","darkenColor","hex","percent","r","g","padStart","Avatar","config","showBorder","avatarConfig","f","o","noseColor","borderStyle","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","p","viewBoxY","viewBoxHeight","LEVEL_THRESHOLDS","level","minAssets","getLevelInfo","netAssets","assets","currentLevelData","nextLevelIndex","findIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","ACHIEVEMENTS","FIRST_THOUSAND","condition","stats","totalAssets","rarity","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","coupons","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","getAchievementById","achievementId","values","getUserAchievements","stored","formatMoney","ok","man","Intl","NumberFormat","format","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","useRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","setAvatarConfig","handleAvatarChange","detail","levelInfo","useMemo","cash","stockValue","realEstateValue","itemValue","bestAchievement","achievements","rarityOrder","legendary","epic","rare","common","sorted","achA","achB","handleClickOutside","event","current","contains","document","Gift","ChevronLeft","whiteSpace","ref","paddingLeft","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","Trash2","maxLength","autoFocus","trimmed","setTimeout","code","toUpperCase","verifyClassCode","SettingsPanel","Home","MobileNav","isTabActive","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","handleBeforeInstall","handleDismiss","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","setInterval","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","vibrate","TaskItem","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","taskInfoStyle","flexGrow","minWidth","taskNameStyle","textOverflow","taskActionsStyle","flexShrink","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","selectedCardStyle","cardInnerStyle","cardFrontStyle","cardBackStyle","cardBackVisibleStyle","body","pointerEvents","content","borderWidth","animation","perspective","transformStyle","backfaceVisibility","JobList","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","marginRight","tasks","CommonTaskList","TransferModal","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","inputStyle","selectStyle","labelStyle","buttonStyle","primaryButtonStyle","secondaryButtonStyle","nameA","substring","nameB","createOptimizedFunction","functionName","fn","httpsCallable","functions","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","maxAge","backup","parsed","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","intervalId","clearInterval","toLocaleTimeString","health","totalUsers","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","seconds","errorLogs","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","history","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","studentsQuery","useOptimizedStudents","useQuery","queryKey","queryFn","enabled","staleTime","cacheTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","studentIds","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","Promise","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","firebaseGetDocs","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","usersRef","queryRef","firebaseQuery","firebaseWhere","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","docSnap","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","writeBatch","stockRef","commit","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","formatLastSalaryDate","getFullYear","getMonth","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","handleToggleStudentSelection","Boolean","toLocaleDateString","handleEditStudentJobs","products","product","SystemMonitoring","handleToggleJobSelection","prevStudents","STREAK_REWARDS","STREAK_BONUS_AFTER_10","getStreakInfo","today","toDateString","lastLogin","yesterday","isNewDay","canClaim","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","DailyRewardBanner","_rewardResult$reward","onClaim","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","nextDay","nextReward","isBigReward","newStreak","isMilestone","handleClaim","toISOString","newData","claimDailyReward","StreakDisplay","currentStreak","StreakRewardInfo","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","showDailyRewardPopup","setShowDailyRewardPopup","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","handleDailyRewardClaim","rewardAmount","updateDoc","increment","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","firestoreCollection","substr","setupPolling","pollData","jobsQuery","loadedJobs","docs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","fetchData","refreshInProgressRef","refreshTasksAfterReset","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","userNickname","RotateCcw","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialQuantities","checkMobile","getButtonText","currentUserCash","totalPrice","canOpenAdminPanel","AdminItemPage","newItemData","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","recentlyUsedItems","setRecentlyUsedItems","prevItems","itemsChanged","updatedItems","_itemData$itemDetails","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","defaultPrice","handleOpenSellToMarketModal","quantityToUse","remainingToUse","results","sortedDocs","amountToUse","classmate","c","recipientName","originalUserItems","","","","","UID","inventoryRef","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","assign","catch","React","MyAssets","updateUserInAuth","addCashToUserById","deductCash","assetsLoading","setAssetsLoading","loadingRef","parkingBalance","setParkingBalance","deposits","setDeposits","savings","setSavings","loans","setLoans","realEstateAssets","setRealEstateAssets","totalNetAssets","setTotalNetAssets","goalDonations","setGoalDonations","transactionHistory","setTransactionHistory","forceReload","setForceReload","CACHE_DURATION","settingsData","loadCouponValueFromSettings","goalProgress","setGoalProgress","myContribution","setMyContribution","goalAchieved","setGoalAchieved","isResettingGoal","setIsResettingGoal","showAllTransactions","setShowAllTransactions","getCachedFirestoreData","setCachedFirestoreData","cacheItem","createDefaultGoalForClass","goalId","goalDocRef","defaultGoalData","donationCount","createdBy","goalDoc","existingData","loadGoalData","cachedData","myTotal","goalDocSnap","goalData","processedTimestamp","timestampISO","loadMyAssetsData","realEstateRef1","realEstateRef2","realEstateRef3","snap1","snap2","snap3","allRealEstateAssets","parkingRef1","parkingRef2","parkingSnap1","parkingSnap2","totalParkingBalance","balance","productsRef","productsSnap","depositsData","savingsData","loansData","_docSnap$data$maturit","maturityDate","transactionsData","activityLogsRef","source","activityError","transactionsRef","transactionsError","_a$timestamp","_a$timestamp2","_b$timestamp","_b$timestamp2","dateA","fallbackError","cashValue","couponMonetaryValue","asset","depositsTotal","deposit","savingsTotal","saving","loanTotal","loan","remainingPrincipal","calculatedTotalAssets","AlchanLoading","paddingBottom","logActivity","rewardType","renderAssetSummary","displayCash","displayCoupons","displayedTransactions","displayDate","getTime","safeTimestampToDate","dateError","txAmount","txDescription","recipientUser","u","ACTIVITY_TYPES","TRANSFER_SEND","recipientId","TRANSFER_RECEIVE","senderId","senderName","ProposalModal","onSave","currentUser","proposalPrice","setProposalPrice","proposalMessage","setProposalMessage","isSubmitting","setIsSubmitting","sellerName","rows","proposalData","proposedPrice","handleSave","ItemRegistrationModal","_groupedInventoryItem","_groupedInventoryItem2","registrationType","setRegistrationType","selectedInventoryItem","setSelectedInventoryItem","selectedQuantity","setSelectedQuantity","setItemName","setDescription","setPrice","setCategory","groupedInventoryItems","selectedGroup","numericPrice","inventoryItemId","ItemMarket","auth","itemContext","currentUserId","marketListings","marketOffers","proposals","contextLoading","buyMarketItem","makeOffer","respondToOffer","cancelSale","adminDeleteItem","showRegistrationModal","setShowRegistrationModal","showProposalModal","setShowProposalModal","selectedItem","setSelectedItem","isPurchasing","setIsPurchasing","marketSummary","setMarketSummary","summaryLoading","setSummaryLoading","setLastUpdated","visibleItemsCount","setVisibleItemsCount","getUserNameById","getSellerName","sellerId","filteredItems","matchesCategory","itemType","matchesSearch","isAvailable","status","myItems","receivedProposals","sentProposals","proposal","buyerId","visibleItems","itemPrice","handleDirectPurchase","listingId","handleAdminDeleteItem","soldPrice","isLegacy","soldAt","pendingProposals","confirmationText","handleCancelSale","originalPrice","proposalId","buyerName","buyerRef","buyerSnap","proposalRef","acceptedAt","soldTo","sellerRef","addActivityLog","addTransaction","handleAcceptProposal","rejectedAt","handleRejectProposal","grid","cardHeader","cardTitle","tabContainer","tabButton","noProduct","fontStyle","modalOverlay","modalContent","modalTitle","modalCloseBtn","formatCurrency","calculateCompoundInterest","principal","dailyRate","days","interest","total","pow","calculateDailyInterest","ICON_MAP","parking","PiggyBank","HandCoins","SubscribedProductItem","onMaturity","isMatured","daysRemaining","differenceInDays","termInDays","dailyInterestAmount","AvailableProductItem","onSubscribe","projectedInterest","ProductSection","subscribedProducts","availableProducts","SubscriptionModal","onConfirm","setAmount","numAmount","projectedTotal","minAmount","ParkingAccountSection","dailyInterest","onDeposit","onWithdraw","installmentProducts","activeView","onViewChange","onLoadUserProducts","allUserProducts","onDeleteUserProduct","addCash","setMessage","messageType","setMessageType","parkingDailyInterest","setParkingDailyInterest","userDeposits","setUserDeposits","userSavings","setUserSavings","userLoans","setUserLoans","modal","setModal","currentCash","setCurrentCash","displayMessage","loadAllData","parkingRef","parkingRateProduct","parkingDoc","_data$lastInterestDat","lastInterestDate","isToday","daysToApply","finalParkingDoc","handleOpenModal","handleCloseModal","handleMaturity","isLoan","productRef","cashChange","DEPOSIT_MATURITY","productName","productType","handleCancelEarly","confirmMessage","originalProducts","originalCash","cashChangeAmount","_userSnapshot$data$ca2","_userSnapshot$data2","userSnapshot","currentCashInDb","activityType","LOAN_REPAY","DEPOSIT_WITHDRAW","isEarlyCancellation","handleAdminDeleteSubscribedProduct","deleteDoc","overflowX","typeLabel","amountStr","previousParkingBalance","previousCurrentCash","PARKING_DEPOSIT","_parkingSnapshot$data","_parkingSnapshot$data2","PARKING_WITHDRAW","onAdminDelete","subscribeAmount","maxAmount","tempId","optimisticProduct","isOptimistic","_userSnapshot$data$ca","_userSnapshot$data","newProductData","newProductRef","DEPOSIT_CREATE","LOAN_CREATE","convertAdminProductsToAccountFormat","adminProducts","Banking","_auth$userDoc8","_auth$userDoc1","_auth$userDoc10","_auth$userDoc11","_auth$userDoc12","setActiveView","parkingDepositProducts","setParkingDepositProducts","parkingInstallmentProducts","setParkingInstallmentProducts","parkingLoanProducts","setParkingLoanProducts","setAllUserProducts","loadAllUserProducts","_auth$userDoc","_auth$userDoc2","_auth$userDoc3","usersQuery","usersSnapshot","userMap","allProducts","productPromises","productsQuery","productDoc","_productData$maturity","productData","firestoreId","productsArray","formattedDepositProducts","setFormattedDepositProducts","formattedInstallmentProducts","setFormattedInstallmentProducts","formattedLoanProducts","setFormattedLoanProducts","_auth$userDoc7","_auth$userDoc6","bankingData","getBankingProducts","setParkingSavingsProducts","handleParkingProductChange","field","productsState","setProductsState","updatedProduct","numValue","dailyRateValue","saveParkingProducts","_auth$userDoc9","firestoreType","updateBankingProducts","addParkingProduct","deleteParkingProduct","indexToDelete","_auth$userDoc0","_","ParkingAccount","_auth$userDoc4","_auth$userDoc5","productId","AvatarEditor","setConfig","hasChanges","setHasChanges","savedConfig","currentOptions","handleRandomize","randomConfig","cat","randomIndex","WebkitOverflowScrolling","scrollbarWidth","msOverflowStyle","option","isSelected","isIncompatible","optionId","newConfig","handleOptionSelect","handleReset","dispatchEvent","CustomEvent","_unused2","saveAvatarConfig","MyProfile","_LEVEL_THRESHOLDS","showAvatarEditor","setShowAvatarEditor","setAchievements","showNicknameModal","setShowNicknameModal","showPasswordModal","setShowPasswordModal","showClassCodeModal","setShowClassCodeModal","showDeleteModal","setShowDeleteModal","deleteConfirmText","setDeleteConfirmText","resetModals","sortedAchievements","WebkitBackgroundClip","WebkitTextFillColor","ach","achievement","rarityColors","bg","colors","unlockedAt","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","textTransform","deleteUser","GonuGame","lazy","OmokGame","ChessGame","TypingPracticeGame","AdminPage","AdminPanel","FirestoreDoctor","RecoverDonations","StudentManager","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","link","createElement","href","rel","head","appendChild","removeChild","page","mobile","closeSidebar","toggleSidebarCollapse","Login","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff"],"sourceRoot":""}