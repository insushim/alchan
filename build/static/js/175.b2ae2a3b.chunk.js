"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[175,920],{7175:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(4919),n=t(5043),r=t(791),i=t(5472),o=t(2395),d=t(7920),l=t(5967),c=t(5016),p=(t(6353),t(579));const x=()=>{const{currentUser:e,classCode:s}=(0,n.useContext)(c.cy),[t,x]=(0,n.useState)([]),[u,m]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[b,f]=(0,n.useState)(""),[y,j]=(0,n.useState)({isOpen:!1}),[v,w]=(0,n.useState)("financial"),[S,C]=(0,n.useState)(null),[N,k]=(0,n.useState)({}),[z,A]=(0,n.useState)([]),[W,R]=(0,n.useState)(null),T=(0,o.Qg)(r.Cn,"toggleMarketManually"),O=(0,o.Qg)(r.Cn,"refundOldMarketItems");(0,n.useEffect)(()=>{if(!s)return;(async()=>{const e=(0,i.rJ)(r.db,"Class/".concat(s,"/students")),t=(await(0,i.GG)(e)).docs.map(e=>(0,a.A)({id:e.id},e.data()));x(t)})(),(async()=>{const e=(0,i.H9)(r.db,"ClassStock/".concat(s,"/marketStatus/status")),t=await(0,i.x7)(e);t.exists()?j(t.data()):(await(0,i.BN)(e,{isOpen:!1}),j({isOpen:!1}))})()},[s]),(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.isSuperAdmin)return;(async()=>{try{const e=(0,i.rJ)(r.db,"Class"),s=await(0,i.GG)(e),t=[];for(const a of s.docs){const e=a.id,s=(0,i.rJ)(r.db,"Class",e,"students"),n=await(0,i.GG)(s);t.push({classCode:e,studentCount:n.size})}A(t)}catch(e){console.error("\ud559\uae09 \ubaa9\ub85d \uc870\ud68c \uc911 \uc624\ub958:",e)}})()},[e]);const B=async e=>{try{const t=e?"\uc218\ub3d9 \uac1c\uc7a5":"\uc218\ub3d9 \ud3d0\uc7a5";if(!window.confirm("\uc815\ub9d0\ub85c \uc2dc\uc7a5\uc744 '".concat(t,"' \uc0c1\ud0dc\ub85c \ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return;const a=await T({classCode:s,isOpen:e});console.log("Market status change result:",a.data),f(a.data.message),j({isOpen:e})}catch(t){console.error("\uc2dc\uc7a5 \uc0c1\ud0dc \ubcc0\uacbd \uc624\ub958:",t),f("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(t.message))}},I=()=>{C(null),k({})},P=e=>{const{name:s,value:t}=e.target;k(e=>(0,a.A)((0,a.A)({},e),{},{[s]:t}))},J=e=>{R(e),(async e=>{try{const s=(0,i.rJ)(r.db,"Class",e,"students"),t=(await(0,i.GG)(s)).docs.map(s=>{const t=s.data();return(0,a.A)((0,a.A)({id:s.id,classCode:e},t),{},{money:void 0!==t.money&&null!==t.money?t.money:0})});x(t)}catch(s){console.error("\ud559\uc0dd \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4:",s)}})(e)};return null!==e&&void 0!==e&&e.isAdmin||null!==e&&void 0!==e&&e.isSuperAdmin?(0,p.jsx)("div",{className:"admin-page-container",children:(0,p.jsxs)("div",{className:"admin-content",children:[(0,p.jsxs)("h1",{children:["\uad00\ub9ac\uc790 \ud398\uc774\uc9c0 (CLASS: ",s,")"]}),(0,p.jsx)("div",{className:"admin-tabs mb-6 border-b",children:(0,p.jsxs)("div",{className:"flex flex-wrap",children:[(0,p.jsx)("button",{className:"py-2 px-4 font-medium ".concat("financial"===v?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>w("financial"),children:"\uae08\uc735 \uc0c1\ud488 \uad00\ub9ac"}),(0,p.jsx)("button",{className:"py-2 px-4 font-medium ".concat("database"===v?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>w("database"),children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4"}),(0,p.jsx)("button",{className:"py-2 px-4 font-medium ".concat("market"===v?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>w("market"),children:"\uc2dc\uc7a5 \uc81c\uc5b4"}),(null===e||void 0===e?void 0:e.isSuperAdmin)&&(0,p.jsx)("button",{className:"py-2 px-4 font-medium ".concat("users"===v?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>w("users"),children:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"})]})}),"financial"===v&&(0,p.jsx)(d.default,{}),"database"===v&&(0,p.jsx)(l.default,{}),"market"===v&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"admin-section",children:[(0,p.jsx)("h2",{children:"\uc8fc\uc2dd \uc2dc\uc7a5 \uc81c\uc5b4"}),(0,p.jsxs)("p",{children:["\ud604\uc7ac \uc0c1\ud0dc: ",(0,p.jsx)("span",{className:y.isOpen?"market-open":"market-closed",children:y.isOpen?"\uac1c\uc7a5":"\ud3d0\uc7a5"})]}),(0,p.jsxs)("div",{className:"market-controls",children:[(0,p.jsx)("button",{onClick:()=>B(!0),disabled:y.isOpen,className:"control-button open",children:"\uc218\ub3d9 \uac1c\uc7a5"}),(0,p.jsx)("button",{onClick:()=>B(!1),disabled:!y.isOpen,className:"control-button close",children:"\uc218\ub3d9 \ud3d0\uc7a5"})]}),(0,p.jsxs)("p",{className:"description",children:["\ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc815\ud574\uc9c4 \uc2dc\uac04\uacfc \uc0c1\uad00\uc5c6\uc774 \uc2dc\uc7a5 \uc0c1\ud0dc\uac00 \uc989\uc2dc \ubcc0\uacbd\ub429\ub2c8\ub2e4.",(0,p.jsx)("br",{}),"\uc790\ub3d9 \uac1c\uc7a5/\ud3d0\uc7a5 \uc2dc\uac04(\uc624\uc804 8\uc2dc/\uc624\ud6c4 3\uc2dc)\uc774 \ub418\uba74 \uc790\ub3d9\uc73c\ub85c \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4."]})]}),(0,p.jsxs)("div",{className:"admin-section",children:[(0,p.jsx)("h2",{children:"\ud654\ud3d0 \uc9c0\uae09"}),(0,p.jsxs)("select",{value:u,onChange:e=>m(e.target.value),children:[(0,p.jsx)("option",{value:"",children:"\ud559\uc0dd \uc120\ud0dd"}),t.map(e=>(0,p.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))]}),(0,p.jsx)("input",{type:"number",value:g,onChange:e=>h(e.target.value),placeholder:"\uae08\uc561 \uc785\ub825"}),(0,p.jsx)("button",{onClick:async()=>{f(u&&g?"".concat(u," \ud559\uc0dd\uc5d0\uac8c ").concat(g,"\uc6d0\uc744 \uc9c0\uae09\ud558\ub294 \ub85c\uc9c1\uc744 \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4."):"\ud559\uc0dd\uacfc \uae08\uc561\uc744 \ubaa8\ub450 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},children:"\uc9c0\uae09"})]}),(0,p.jsxs)("div",{className:"admin-section",children:[(0,p.jsx)("h2",{children:"\uc544\uc774\ud15c \ub9c8\ucf13 \ub370\uc774\ud130 \uc815\ub9ac"}),(0,p.jsxs)("p",{className:"description",children:["\uae30\uc874 \uacbd\ub85c(\ub8e8\ud2b8 marketItems)\uc5d0 \uc788\ub294 \ub9c8\ucf13 \uc544\uc774\ud15c\ub4e4\uc744 \ubaa8\ub450 \ud658\ubd88\ud569\ub2c8\ub2e4.",(0,p.jsx)("br",{}),"\ud310\ub9e4\uc790\ub4e4\uc758 \uc778\ubca4\ud1a0\ub9ac\ub85c \uc544\uc774\ud15c\uc774 \uc790\ub3d9 \ubc18\ud658\ub429\ub2c8\ub2e4."]}),(0,p.jsx)("button",{onClick:async()=>{try{if(!window.confirm("\uae30\uc874 \uacbd\ub85c\uc5d0 \uc788\ub294 \ub9c8\ucf13 \uc544\uc774\ud15c\ub4e4\uc744 \ubaa8\ub450 \ud658\ubd88\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\ud310\ub9e4\uc790\ub4e4\uc758 \uc778\ubca4\ud1a0\ub9ac\ub85c \uc544\uc774\ud15c\uc774 \ubc18\ud658\ub429\ub2c8\ub2e4)"))return;f("\ud658\ubd88 \ucc98\ub9ac \uc911...");const e=await O();console.log("Refund result:",e.data),f(e.data.message)}catch(e){console.error("\ub9c8\ucf13 \uc544\uc774\ud15c \ud658\ubd88 \uc624\ub958:",e),f("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(e.message))}},className:"control-button close",style:{marginTop:"10px"},children:"\uae30\uc874 \ub9c8\ucf13 \uc544\uc774\ud15c \ud658\ubd88"})]}),b&&(0,p.jsx)("p",{className:"message-box",children:b})]}),"users"===v&&(null===e||void 0===e?void 0:e.isSuperAdmin)&&(0,p.jsxs)("div",{className:"users-management-section",children:[(0,p.jsx)("h2",{style:{marginBottom:"20px",fontSize:"24px",fontWeight:"bold"},children:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"}),(0,p.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,p.jsx)("h3",{style:{marginBottom:"15px",fontSize:"18px",fontWeight:"600",color:"#4a5568"},children:"\ud559\uae09 \uc120\ud0dd"}),(0,p.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px"},children:z.map(e=>(0,p.jsxs)("button",{onClick:()=>J(e.classCode),style:{padding:"15px 20px",borderRadius:"12px",border:W===e.classCode?"3px solid #667eea":"2px solid #e2e8f0",background:W===e.classCode?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"white",color:W===e.classCode?"white":"#4a5568",fontWeight:"700",fontSize:"15px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:W===e.classCode?"0 8px 20px rgba(102, 126, 234, 0.3)":"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},onMouseEnter:s=>{W!==e.classCode&&(s.currentTarget.style.transform="translateY(-3px)",s.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.15)")},onMouseLeave:s=>{W!==e.classCode&&(s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)")},children:[(0,p.jsx)("span",{style:{fontSize:"18px"},children:e.classCode}),(0,p.jsxs)("span",{style:{fontSize:"12px",opacity:.9,fontWeight:"600"},children:[e.studentCount,"\uba85"]})]},e.classCode))})]}),!W&&(0,p.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",background:"rgba(102, 126, 234, 0.05)",borderRadius:"15px",border:"2px dashed #667eea"},children:(0,p.jsx)("p",{style:{fontSize:"18px",color:"#667eea",fontWeight:"600",margin:0},children:"\ud559\uae09\uc744 \uc120\ud0dd\ud558\uc5ec \ud559\uc0dd \ubaa9\ub85d\uc744 \ud655\uc778\ud558\uc138\uc694"})}),W&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("h3",{style:{marginBottom:"15px",fontSize:"18px",fontWeight:"600",color:"#4a5568"},children:[W," \ud559\uae09 \ud559\uc0dd \ubaa9\ub85d (",t.length,"\uba85)"]}),(0,p.jsx)("div",{className:"users-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px",padding:"10px"},children:t.map(e=>{var t,n,d;return(0,p.jsx)("div",{style:{background:"white",borderRadius:"15px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease"},className:"user-card-hover",children:S===e.id?(0,p.jsxs)("div",{style:{padding:"25px",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",animation:"slideIn 0.3s ease"},children:[(0,p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"15px"},children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{style:{display:"block",fontWeight:"600",marginBottom:"5px",color:"#4a5568",fontSize:"13px"},children:"\uc774\ub984"}),(0,p.jsx)("input",{type:"text",name:"name",value:N.name||"",onChange:P,style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #cbd5e0",fontSize:"15px",transition:"all 0.3s ease"}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{style:{display:"block",fontWeight:"600",marginBottom:"5px",color:"#4a5568",fontSize:"13px"},children:"\uc774\uba54\uc77c"}),(0,p.jsx)("input",{type:"email",name:"email",value:N.email||"",readOnly:!0,style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #e2e8f0",fontSize:"15px",backgroundColor:"#edf2f7",cursor:"not-allowed"}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{style:{display:"block",fontWeight:"600",marginBottom:"5px",color:"#4a5568",fontSize:"13px"},children:"\ube44\ubc00\ubc88\ud638 (\ubcc0\uacbd\uc2dc\uc5d0\ub9cc \uc785\ub825)"}),(0,p.jsx)("input",{type:"password",name:"password",value:N.password||"",onChange:P,placeholder:"\ubcc0\uacbd\ud558\uc9c0 \uc54a\uc73c\ub824\uba74 \ube44\uc6cc\ub450\uc138\uc694",style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #cbd5e0",fontSize:"15px"}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{style:{display:"block",fontWeight:"600",marginBottom:"5px",color:"#4a5568",fontSize:"13px"},children:"\uc794\uc561"}),(0,p.jsx)("input",{type:"number",name:"money",value:N.money||0,onChange:P,style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #cbd5e0",fontSize:"15px"}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{style:{display:"block",fontWeight:"600",marginBottom:"5px",color:"#4a5568",fontSize:"13px"},children:"\ub808\ubca8"}),(0,p.jsx)("input",{type:"number",name:"level",value:N.level||0,onChange:P,style:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:"2px solid #cbd5e0",fontSize:"15px"}})]})]}),(0,p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginTop:"20px",paddingTop:"20px",borderTop:"2px solid rgba(102, 126, 234, 0.1)"},children:[(0,p.jsx)("button",{onClick:()=>(async e=>{try{const t=(0,i.H9)(r.db,"Class",s,"students",e),n=(0,a.A)((0,a.A)({},N),{},{money:Number(N.money)||0,level:Number(N.level)||0});if(delete n.password,await(0,i.mZ)(t,n),N.password&&""!==N.password.trim()){const e=(0,o.Qg)(r.Cn,"updateUserPassword");await e({email:N.email,newPassword:N.password}),alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubc0f \ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");x(s=>s.map(s=>s.id===e?(0,a.A)((0,a.A)({},s),n):s)),C(null),k({})}catch(t){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958 \ubc1c\uc0dd:",t),alert("\uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t.message))}})(e.id),style:{padding:"12px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease"},children:"\uc800\uc7a5"}),(0,p.jsx)("button",{onClick:I,style:{padding:"12px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%)",color:"white",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease"},children:"\ucde8\uc18c"})]})]}):(0,p.jsxs)("div",{style:{padding:"20px"},children:[(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px",paddingBottom:"15px",borderBottom:"2px solid rgba(102, 126, 234, 0.1)"},children:[(0,p.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"700"},children:(null===(t=e.name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,p.jsxs)("div",{style:{flex:1},children:[(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"},children:[(0,p.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700"},children:e.name}),e.isAdmin?(0,p.jsx)("span",{style:{fontSize:"11px",fontWeight:"700",padding:"4px 10px",borderRadius:"12px",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white"},children:"\uad00\ub9ac\uc790"}):(0,p.jsx)("span",{style:{fontSize:"11px",fontWeight:"700",padding:"4px 10px",borderRadius:"12px",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white"},children:"\ud559\uc0dd"})]}),(0,p.jsx)("p",{style:{margin:0,fontSize:"13px",color:"#666"},children:e.email})]})]}),(0,p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"10px",marginBottom:"15px"},children:[(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 15px",background:"rgba(102, 126, 234, 0.05)",borderRadius:"8px",borderLeft:"3px solid #667eea"},children:[(0,p.jsx)("span",{style:{color:"#667eea",fontWeight:"600",fontSize:"13px"},children:"\uc9c1\uc5c5"}),(0,p.jsx)("span",{style:{fontWeight:"600",fontSize:"14px"},children:(null===(n=e.job)||void 0===n?void 0:n.name)||e.jobName||"\ubbf8\uc9c0\uc815"})]}),(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 15px",background:"rgba(102, 126, 234, 0.05)",borderRadius:"8px",borderLeft:"3px solid #667eea"},children:[(0,p.jsx)("span",{style:{color:"#667eea",fontWeight:"600",fontSize:"13px"},children:"\ub808\ubca8"}),(0,p.jsxs)("span",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:["Lv. ",e.level||0]})]}),(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 15px",background:"rgba(102, 126, 234, 0.05)",borderRadius:"8px",borderLeft:"3px solid #667eea"},children:[(0,p.jsx)("span",{style:{color:"#667eea",fontWeight:"600",fontSize:"13px"},children:"\uc794\uc561"}),(0,p.jsxs)("span",{style:{color:e.money<0?"#eb3349":"#11998e",fontWeight:"700",fontSize:"14px"},children:[(null===(d=e.money)||void 0===d?void 0:d.toLocaleString())||0,"\uc6d0"]})]})]}),(0,p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[(0,p.jsx)("button",{onClick:()=>(e=>{C(e.id),k((0,a.A)({},e))})(e),style:{padding:"10px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"all 0.3s ease"},children:"\uc218\uc815"}),(0,p.jsx)("button",{onClick:()=>(async e=>{const t=!0===e.isAdmin,n=t?"\uad00\ub9ac\uc790 \uad8c\ud55c\uc744 \uc81c\uac70":"\uad00\ub9ac\uc790\ub85c \uc9c0\uc815";if(window.confirm("\uc815\ub9d0\ub85c '".concat(e.name,"' \ud559\uc0dd\uc744 ").concat(n,"\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const o=(0,i.H9)(r.db,"Class",s,"students",e.id);await(0,i.mZ)(o,{isAdmin:!t}),x(s=>s.map(s=>s.id===e.id?(0,a.A)((0,a.A)({},s),{},{isAdmin:!t}):s)),alert("".concat(e.name," \ud559\uc0dd\uc774 ").concat(n,"\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(o){console.error("\uad00\ub9ac\uc790 \uad8c\ud55c \ubcc0\uacbd \uc911 \uc624\ub958 \ubc1c\uc0dd:",o),alert("\uad8c\ud55c \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(o.message))}})(e),style:{padding:"10px",borderRadius:"10px",border:"none",background:e.isAdmin?"linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)":"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"all 0.3s ease"},children:e.isAdmin?"\uad00\ub9ac\uc790 \ud574\uc81c":"\uad00\ub9ac\uc790 \uc9c0\uc815"}),(0,p.jsx)("button",{onClick:()=>{const s=prompt("".concat(e.name," \ud559\uc0dd\uc758 \uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694:"),"test1234");s&&(async(e,s)=>{try{const t=(0,o.Qg)(r.Cn,"updateUserPassword");await t({email:e.email,newPassword:s}),alert("".concat(e.name," \ud559\uc0dd\uc758 \ube44\ubc00\ubc88\ud638\uac00 '").concat(s,"'\ub85c \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(t){console.error("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654 \uc911 \uc624\ub958 \ubc1c\uc0dd:",t),alert("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t.message))}})(e,s)},style:{padding:"10px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"all 0.3s ease"},children:"\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654"}),(0,p.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("\uc815\ub9d0\ub85c '".concat(t,"' \ud559\uc0dd\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \ubaa8\ub4e0 \ub370\uc774\ud130\uac00 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4.")))try{await(0,i.kd)((0,i.H9)(r.db,"Class",s,"students",e)),x(s=>s.filter(s=>s.id!==e)),alert("\ud559\uc0dd\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){console.error("\ud559\uc0dd \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd:",a),alert("\ud559\uc0dd \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(e.id,e.name),style:{padding:"10px",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"all 0.3s ease"},children:"\uc0ad\uc81c"})]})]})},e.id)})})]})]})]})}):(0,p.jsx)("div",{children:"\uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4."})}},7920:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(5043),n=(t(6353),t(579));const r=()=>{const[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,l]=(0,a.useState)(null),[c,p]=(0,a.useState)(""),[x,u]=(0,a.useState)("deposit"),[m,g]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[f,y]=(0,a.useState)("");(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("depositProducts"))||[],t=JSON.parse(localStorage.getItem("savingProducts"))||[],a=JSON.parse(localStorage.getItem("loanProducts"))||[];s(e),r(t),o(a)},[]);const j=e=>{switch(e){case"deposit":return"\uc608\uae08";case"saving":return"\uc801\uae08";case"loan":return"\ub300\ucd9c";default:return"\uae08\uc735"}},v=(a,d)=>0===a.length?(0,n.jsxs)("p",{className:"text-gray-500 text-center py-4",children:["\ub4f1\ub85d\ub41c ",j(d)," \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uc0c1\ud488\uba85"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uae30\uac04 (\uc77c)"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uc774\uc728 (%)"}),(0,n.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uad00\ub9ac"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:a.name}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.period,"\uc77c"]}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.rate,"%"]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,n.jsx)("button",{onClick:()=>((a,n)=>{let d,c,x;"deposit"===n?(d=e,c=s,x="depositProducts"):"saving"===n?(d=t,c=r,x="savingProducts"):"loan"===n&&(d=i,c=o,x="loanProducts");const u=d.filter(e=>e.id!==a);c(u),localStorage.setItem(x,JSON.stringify(u)),l("".concat(j(n)," \uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),p("success"),setTimeout(()=>l(null),3e3)})(a.id,d),className:"text-red-600 hover:text-red-900",children:"\uc0ad\uc81c"})})]},a.id))})]})});return(0,n.jsxs)("div",{className:"admin-panel bg-white p-6 rounded-lg shadow-md",children:[d&&(0,n.jsx)("div",{className:"message ".concat("success"===c?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700"," border px-4 py-3 rounded relative mb-4"),role:"alert",children:(0,n.jsx)("span",{className:"block sm:inline",children:d})}),(0,n.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\uae08\uc735 \uc0c1\ud488 \uad00\ub9ac"}),(0,n.jsx)("div",{className:"admin-tabs mb-6 border-b",children:(0,n.jsxs)("div",{className:"flex flex-wrap",children:[(0,n.jsx)("button",{className:"py-2 px-4 font-medium ".concat("deposit"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>u("deposit"),children:"\uc608\uae08 \uc0c1\ud488 \uad00\ub9ac"}),(0,n.jsx)("button",{className:"py-2 px-4 font-medium ".concat("saving"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>u("saving"),children:"\uc801\uae08 \uc0c1\ud488 \uad00\ub9ac"}),(0,n.jsx)("button",{className:"py-2 px-4 font-medium ".concat("loan"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>u("loan"),children:"\ub300\ucd9c \uc0c1\ud488 \uad00\ub9ac"})]})}),(0,n.jsxs)("div",{className:"add-product-form mb-6 p-4 bg-gray-50 rounded-md",children:[(0,n.jsxs)("h4",{className:"font-semibold mb-3",children:[j(x)," \uc0c1\ud488 \ucd94\uac00"]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"\uc0c1\ud488\uba85",className:"w-full p-2 border rounded-md"}),(0,n.jsx)("input",{type:"number",value:h,onChange:e=>b(e.target.value),placeholder:"\uae30\uac04 (\uc77c)",className:"w-full p-2 border rounded-md"}),(0,n.jsx)("input",{type:"number",step:"0.1",value:f,onChange:e=>y(e.target.value),placeholder:"\uc774\uc728 (%)",className:"w-full p-2 border rounded-md"})]}),(0,n.jsx)("button",{onClick:()=>{if(!m.trim()||!h||!f||isNaN(h)||isNaN(f))return l("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc62c\ubc14\ub974\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694."),p("error"),void setTimeout(()=>l(null),3e3);const a={id:Date.now(),name:m,period:parseInt(h),rate:parseFloat(f)};let n=[],d="";"deposit"===x?(n=[...e,a],s(n),d="depositProducts"):"saving"===x?(n=[...t,a],r(n),d="savingProducts"):"loan"===x&&(n=[...i,a],o(n),d="loanProducts"),localStorage.setItem(d,JSON.stringify(n)),l("\uc0c8 ".concat(j(x)," \uc0c1\ud488\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),p("success"),g(""),b(""),y(""),setTimeout(()=>l(null),3e3)},className:"mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md",children:"\uc0c1\ud488 \ucd94\uac00"})]}),(0,n.jsxs)("div",{className:"product-list",children:[(0,n.jsxs)("h4",{className:"font-semibold mb-3",children:[j(x)," \uc0c1\ud488 \ubaa9\ub85d"]}),"deposit"===x&&v(e,"deposit"),"saving"===x&&v(t,"saving"),"loan"===x&&v(i,"loan")]})]})}}}]);
//# sourceMappingURL=175.b2ae2a3b.chunk.js.map