"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[710],{710:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(4919),n=a(5043),r=(a(956),a(791)),l=a(5472),o=a(577),i=a(5533),d=a(579);const c=e=>{if(!e)return"-";const t=e.toDate?e.toDate():new Date(e);return isNaN(t.getTime())?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc":t.toLocaleString("ko-KR")},m={totalAmount:0,stockTaxRevenue:0,stockCommissionRevenue:0,realEstateTransactionTaxRevenue:0,vatRevenue:0,auctionTaxRevenue:0,propertyHoldingTaxRevenue:0,itemMarketTaxRevenue:0,incomeTaxRevenue:0,corporateTaxRevenue:0,otherTaxRevenue:0,lastUpdated:null},x={stockTransactionTaxRate:.01,realEstateTransactionTaxRate:.03,itemStoreVATRate:.1,auctionTransactionTaxRate:.03,propertyHoldingTaxRate:.002,propertyHoldingTaxInterval:"weekly",itemMarketTransactionTaxRate:.03,lastUpdated:null},u=e=>{let{classCode:t}=e;const[a,u]=(0,n.useState)(m),[p,h]=(0,n.useState)(x),[b,g]=(0,n.useState)(!0),[v,f]=(0,n.useState)(!0),[j,y]=(0,n.useState)("overview"),[w,N]=(0,n.useState)(x),T=(0,n.useCallback)(async()=>{if(!t)return g(!1),void u(m);g(!0);const e=(0,l.H9)(r.db,"nationalTreasuries",t);try{const a=await(0,r.gn)("nationalTreasuries",t,3e5);if(a)return u((0,s.A)((0,s.A)({},m),a)),void g(!1);const n=await(0,l.x7)(e);n.exists()?(u((0,s.A)((0,s.A)({},m),n.data())),(0,r.gm)("doc_nationalTreasuries_".concat(t))):(await(0,l.BN)(e,(0,s.A)((0,s.A)({},m),{},{createdAt:(0,l.O5)(),lastUpdated:(0,l.O5)()})),(0,r.gm)("doc_nationalTreasuries_".concat(t)),u((0,s.A)((0,s.A)({},m),{},{lastUpdated:new Date}))),g(!1)}catch(a){console.error("[".concat(t,"] \uad6d\uace0 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:"),a),g(!1)}},[t]),{refetch:A}=(0,o.nm)(T,{interval:3e5,enabled:!!t}),k=(0,n.useCallback)(async()=>{if(!t)return f(!1),h(x),void N(x);f(!0);const e=(0,l.H9)(r.db,"governmentSettings",t);try{const a=await(0,r.gn)("governmentSettings",t,3e5);if(null!==a&&void 0!==a&&a.taxSettings){const e=(0,s.A)((0,s.A)({},x),a.taxSettings);return h(e),N(e),void f(!1)}const n=await(0,l.x7)(e);if(n.exists()&&n.data().taxSettings){const e=(0,s.A)((0,s.A)({},x),n.data().taxSettings);h(e),N(e),(0,r.gm)("doc_governmentSettings_".concat(t))}else await(0,l.BN)(e,{taxSettings:(0,s.A)((0,s.A)({},x),{},{lastUpdated:(0,l.O5)()})},{merge:!0}),(0,r.gm)("doc_governmentSettings_".concat(t)),h(x),N(x);f(!1)}catch(a){console.error("[".concat(t,"] \uc138\uae08 \uc815\ucc45 \ub85c\ub4dc \uc2e4\ud328:"),a),f(!1)}},[t]),{refetch:R}=(0,o.nm)(k,{interval:3e5,enabled:!!t}),S=e=>{const{name:t,value:a}=e.target,n=""===a?"":parseFloat(a);N(e=>(0,s.A)((0,s.A)({},e),{},{[t]:n}))},C=e=>{const{name:t,value:a}=e.target;N(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};if(!t)return(0,d.jsxs)("div",{className:"p-8 text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,d.jsx)("p",{className:"text-slate-500",children:"\uc815\ubd80 \uba54\ub274\uc5d0\uc11c \uad6d\uc138\uccad \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \ud559\uae09\uc5d0 \uba3c\uc800 \ucc38\uc5ec\ud574\uc57c \ud569\ub2c8\ub2e4."})]});if(b||v)return(0,d.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,d.jsxs)("p",{className:"text-slate-500 font-medium",children:["\uad6d\uc138\uccad \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 (\ud559\uae09: ",t,")..."]})]})});const _=Object.keys(a).filter(e=>e.endsWith("Revenue")&&"totalAmount"!==e).reduce((e,t)=>e+(a[t]||0),0);return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-violet-600 to-purple-600 rounded-2xl p-8 text-white shadow-xl",children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["\ud83c\udfdb\ufe0f ",t," \ud559\uae09 \uad6d\uc138\uccad"]}),(0,d.jsx)("p",{className:"text-white/80 text-lg",children:"\uc138\uae08 \uc815\ucc45 \uad00\ub9ac \ubc0f \uad6d\uace0 \uc6b4\uc601"})]}),(0,d.jsx)("div",{className:"flex gap-2 border-b border-slate-200 pb-0",children:[{id:"overview",label:"\uac1c\uc694",icon:"\ud83d\udcca"},{id:"revenue",label:"\uc138\uc218 \ud604\ud669",icon:"\ud83d\udcb0"},{id:"policy",label:"\uc138\uae08 \uc815\ucc45",icon:"\ud83d\udccb"},{id:"analytics",label:"\ubd84\uc11d",icon:"\ud83d\udcc8"}].map(e=>(0,d.jsxs)("button",{onClick:()=>y(e.id),className:"px-6 py-3 rounded-t-xl font-bold text-sm transition-all ".concat(j===e.id?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"),children:[e.icon," ",e.label]},e.id))}),"overview"===j&&(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg border border-emerald-400/30",children:[(0,d.jsx)("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"\ud83d\udcb0 \ucd1d \uad6d\uace0"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.totalAmount)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg border border-blue-400/30",children:[(0,d.jsx)("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"\ud83d\udcc8 \uc8fc\uc2dd \uac70\ub798\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.stockTaxRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg border border-indigo-400/30",children:[(0,d.jsx)("p",{className:"text-indigo-100 text-sm font-medium mb-1",children:"\ud83d\udcca \uc8fc\uc2dd \uac70\ub798 \uc218\uc218\ub8cc \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.stockCommissionRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-6 text-white shadow-lg border border-amber-400/30",children:[(0,d.jsx)("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"\ud83c\udfe0 \ubd80\ub3d9\uc0b0 \uac70\ub798\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.realEstateTransactionTaxRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl p-6 text-white shadow-lg border border-pink-400/30",children:[(0,d.jsx)("p",{className:"text-pink-100 text-sm font-medium mb-1",children:"\ud83d\uded2 \uc544\uc774\ud15c \ubd80\uac00\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.vatRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-6 text-white shadow-lg border border-cyan-400/30",children:[(0,d.jsx)("p",{className:"text-cyan-100 text-sm font-medium mb-1",children:"\ud83d\udd28 \uacbd\ub9e4\uc7a5 \uac70\ub798\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.auctionTaxRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-lime-500 to-lime-600 rounded-2xl p-6 text-white shadow-lg border border-lime-400/30",children:[(0,d.jsx)("p",{className:"text-lime-100 text-sm font-medium mb-1",children:"\ud83c\udfd8\ufe0f \ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.propertyHoldingTaxRevenue)})]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg border border-orange-400/30",children:[(0,d.jsx)("p",{className:"text-orange-100 text-sm font-medium mb-1",children:"\ud83c\udfea \uc544\uc774\ud15c \uc2dc\uc7a5 \uac70\ub798\uc138 \uc218\uc785"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-shadow-sm",children:(0,i.bL)(a.itemMarketTaxRevenue)})]})]}),(0,d.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-[#00fff2] mb-4",children:"\ud83d\udcc5 \ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8"}),(0,d.jsxs)("div",{className:"space-y-2 text-slate-300",children:[(0,d.jsxs)("p",{children:["\uad6d\uace0 \ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",(0,d.jsx)("span",{className:"font-medium text-white",children:c(a.lastUpdated)})]}),(0,d.jsxs)("p",{children:["\uc138\uae08 \uc815\ucc45 \ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",(0,d.jsx)("span",{className:"font-medium text-white",children:c(p.lastUpdated)})]})]})]})]}),"revenue"===j&&(0,d.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-[#00fff2]",children:"\ud83d\udcb0 \uc138\uc218 \ud604\ud669 \ubd84\uc11d"}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-sm text-slate-400",children:"\uc138\uc218 \ucd1d\ud569"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-white text-shadow-sm",children:(0,i.bL)(_)})]})]}),(0,d.jsx)("div",{className:"space-y-4",children:[{label:"\uc8fc\uc2dd \uac70\ub798\uc138",amount:a.stockTaxRevenue,color:"bg-blue-500"},{label:"\uc8fc\uc2dd \uc218\uc218\ub8cc",amount:a.stockCommissionRevenue,color:"bg-indigo-500"},{label:"\ubd80\ub3d9\uc0b0 \uac70\ub798\uc138",amount:a.realEstateTransactionTaxRevenue,color:"bg-amber-500"},{label:"\ubd80\uac00\uc138",amount:a.vatRevenue,color:"bg-pink-500"},{label:"\uacbd\ub9e4\uc7a5 \uac70\ub798\uc138",amount:a.auctionTaxRevenue,color:"bg-cyan-500"},{label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138",amount:a.propertyHoldingTaxRevenue,color:"bg-lime-500"},{label:"\uc544\uc774\ud15c \uc2dc\uc7a5\uc138",amount:a.itemMarketTaxRevenue,color:"bg-orange-500"}].map(e=>{const t=_>0?(e.amount/_*100).toFixed(1):"0.0";return(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-32 font-medium text-slate-300",children:e.label}),(0,d.jsx)("div",{className:"flex-1 h-6 bg-slate-800 rounded-full overflow-hidden border border-slate-700",children:(0,d.jsx)("div",{className:"h-full ".concat(e.color," transition-all duration-500 shadow-[0_0_10px_rgba(0,0,0,0.5)]"),style:{width:"".concat(t,"%")}})}),(0,d.jsxs)("div",{className:"w-40 text-right text-sm",children:[(0,d.jsx)("span",{className:"font-bold text-white",children:(0,i.bL)(e.amount)}),(0,d.jsxs)("span",{className:"text-slate-400 ml-2",children:["(",t,"%)"]})]})]},e.label)})})]}),"policy"===j&&(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5",children:[(0,d.jsxs)("h3",{className:"text-xl font-bold text-[#00fff2] mb-6",children:["\ud83d\udccb \ud604\ud589 \uc138\uae08 \uc815\ucc45 (\ud559\uae09: ",t,")"]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"stockTransactionTaxRate",label:"\uc8fc\uc2dd \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"realEstateTransactionTaxRate",label:"\ubd80\ub3d9\uc0b0 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"itemStoreVATRate",label:"\uc544\uc774\ud15c \uc0c1\uc810 \ubd80\uac00\uc138\uc728",type:"number",step:"0.01",min:"0",max:"1"},{name:"auctionTransactionTaxRate",label:"\uacbd\ub9e4\uc7a5 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"},{name:"propertyHoldingTaxRate",label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138\uc728",type:"number",step:"0.0001",min:"0",max:"1"},{name:"propertyHoldingTaxInterval",label:"\ubd80\ub3d9\uc0b0 \ubcf4\uc720\uc138 \uc9d5\uc218 \uc8fc\uae30",type:"select",options:["daily","weekly","monthly"]},{name:"itemMarketTransactionTaxRate",label:"\uc544\uc774\ud15c \uc2dc\uc7a5 \uac70\ub798\uc138\uc728",type:"number",step:"0.001",min:"0",max:"1"}].map(e=>(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:[e.label,(0,d.jsxs)("span",{className:"text-[#00fff2] font-normal ml-2",children:["(\ud604\uc7ac: ","select"===e.type?p[e.name]:"".concat((100*(p[e.name]||0)).toFixed(e.name.includes("propertyHoldingTaxRate")?2:1),"%"),")"]})]}),"select"===e.type?(0,d.jsx)("select",{name:e.name,value:w[e.name]||x[e.name],onChange:C,className:"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors",children:e.options.map(e=>(0,d.jsx)("option",{value:e,children:"daily"===e?"\ub9e4\uc77c":"weekly"===e?"\ub9e4\uc8fc":"\ub9e4\uc6d4"},e))}):(0,d.jsx)("input",{type:e.type,name:e.name,value:""===w[e.name]?"":w[e.name],onChange:S,step:e.step,min:e.min,max:e.max,placeholder:"\uc608: ".concat(e.label.includes("\ubd80\uac00")?"0.1 (10%)":"0.03 (3%)"),className:"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors placeholder-slate-600"})]},e.name))}),(0,d.jsx)("button",{onClick:async()=>{if(!t)return;for(const t in w)if(t.endsWith("Rate")&&(w[t]<0||w[t]>1)&&""!==w[t]&&!("itemStoreVATRate"===t&&w[t]>1))return void alert("".concat(t," \uc138\uc728\uc740 0\uacfc 1 \uc0ac\uc774\uc758 \uac12\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4 (\uc608: 3%\ub294 0.03). \ud604\uc7ac\uac12: ").concat(w[t]));const e=(0,l.H9)(r.db,"governmentSettings",t);try{await(0,l.mZ)(e,{taxSettings:(0,s.A)((0,s.A)({},w),{},{lastUpdated:(0,l.O5)()})}),R(),alert("\uc138\uae08 \uc815\ucc45\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){console.error("\uc138\uae08 \uc815\ucc45 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",a),alert("\uc138\uae08 \uc815\ucc45 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"mt-6 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-bold transition-all shadow-lg border border-indigo-400/30",children:"\uc138\uae08 \uc815\ucc45 \uc800\uc7a5"})]}),(0,d.jsxs)("div",{className:"bg-[#13131f] rounded-2xl p-6 border border-blue-500/30 shadow-lg",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-blue-400 mb-3",children:"\ud83d\udca1 \uc138\uae08 \uc815\ucc45 \ubaa9\ud45c"}),(0,d.jsxs)("ul",{className:"text-blue-300 space-y-2",children:[(0,d.jsx)("li",{children:"\u2022 \uacf5\uc815\ud55c \uc2dc\uc7a5 \uacbd\uc81c \uc9c8\uc11c \ud655\ub9bd"}),(0,d.jsx)("li",{children:"\u2022 \uc548\uc815\uc801\uc778 \ud559\uae09 \uc7ac\uc815 \uc815\ubcf4 \ubc0f \uacf5\uacf5 \uc11c\ube44\uc2a4 \ud22c\uc790"}),(0,d.jsx)("li",{children:"\u2022 \uacbd\uc81c \ud65c\ub3d9 \ucc38\uc5ec\uc640 \uac10\uc758 \ud615\ud3c9\uc131 \uc81c\uace0"})]})]})]}),"analytics"===j&&(0,d.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg",children:[(0,d.jsxs)("h3",{className:"text-xl font-bold text-[#00fff2] mb-4",children:["\ud83d\udcc8 \uc138\uc218 \ubd84\uc11d (\ud559\uae09: ",t,")"]}),(0,d.jsxs)("div",{className:"bg-[#13131f] rounded-xl p-8 text-center border border-slate-700",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,d.jsx)("p",{className:"text-slate-300",children:"\ucd94\ud6c4 \ub2e4\uc591\ud55c \uc138\uc218 \ubd84\uc11d \ucc28\ud2b8\uc640 \uc0c1\uc138 \uc815\ubcf4\uac00 \ud45c\uc2dc\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."}),(0,d.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"\uc608: \uc2dc\uac04\uc5d0 \ub530\ub978 \uc138\uc218 \ubcc0\ud654, \uce74\ud14c\uace0\ub9ac\ubcc4 \uae30\uc5ec\ub3c4 \ub4f1"})]})]})]})};var p=a(5475),h=a(5016);const b={container:{maxWidth:"800px",margin:"20px auto",padding:"20px",border:"1px solid rgba(0, 255, 242, 0.2)",borderRadius:"20px",backgroundColor:"#1a1a2e",fontFamily:"'Noto Sans KR', sans-serif",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)",color:"#e8e8ff"},classCodeDisplay:{textAlign:"center",marginBottom:"15px",fontSize:"0.9em",color:"#00fff2",backgroundColor:"rgba(0, 255, 242, 0.1)",padding:"5px",borderRadius:"4px",border:"1px solid rgba(0, 255, 242, 0.2)"},balanceDisplay:{marginBottom:"20px",padding:"20px",backgroundColor:"#13131f",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"inset 0 2px 10px rgba(0, 0, 0, 0.3)"},balanceValue:{fontWeight:"bold",color:"#00fff2",textShadow:"0 0 10px rgba(0, 255, 242, 0.3)"},form:{marginBottom:"20px",padding:"20px",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"16px",backgroundColor:"#13131f"},formGroup:{marginBottom:"15px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#94a3b8"},input:{width:"calc(100% - 22px)",padding:"10px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",fontSize:"1rem",backgroundColor:"rgba(0, 0, 0, 0.3)",color:"white"},actionButton:{padding:"10px 20px",backgroundColor:"rgba(16, 185, 129, 0.2)",color:"#34d399",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"background-color 0.2s ease, opacity 0.2s ease, transform 0.2s ease",boxShadow:"0 0 10px rgba(16, 185, 129, 0.1)"},divider:{margin:"30px 0",border:0,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},messageBox:{padding:"15px",marginBottom:"20px",borderRadius:"8px",borderWidth:"1px",borderStyle:"solid",fontSize:"1rem"},linkContainer:{marginTop:"15px",display:"flex",gap:"15px"},linkButton:{display:"inline-block",padding:"10px 15px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",textDecoration:"none",borderRadius:"8px",textAlign:"center",transition:"background-color 0.2s ease",border:"1px solid rgba(255, 255, 255, 0.1)"},transactionList:{listStyleType:"none",paddingLeft:0,maxHeight:"200px",overflowY:"auto",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"10px",backgroundColor:"rgba(0, 0, 0, 0.2)"},transactionItem:{padding:"8px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"0.9em",display:"flex",flexWrap:"wrap",gap:"5px",color:"#a0a0c0"},transactionItem_span:{marginRight:"5px"}},g=e=>{let{classCode:t}=e;const{user:a,userDoc:i,isAdmin:c,refreshUserDocument:m}=(0,h.As)(),[x,u]=(0,n.useState)(0),[g,v]=(0,n.useState)((null===i||void 0===i?void 0:i.cash)||0),[f,j]=(0,n.useState)(""),[y,w]=(0,n.useState)({text:"",type:""}),[N,T]=(0,n.useState)(!1),[A,k]=(0,n.useState)([]);let R=null,S=null;t&&(R=(0,r.H9)(r.db,"nationalTreasuries",t),S=(0,r.rJ)(r.db,"classes",t,"treasuryTransactions")),(0,n.useEffect)(()=>{v((null===i||void 0===i?void 0:i.cash)||0)},[null===i||void 0===i?void 0:i.cash]);const{data:C}=(0,o.nm)(async()=>{if(!t||!R)return null;const e=await(0,r.x7)(R);if(e.exists())return e.data().totalAmount||0;try{return await(0,r.BN)(R,{totalAmount:0,stockTaxRevenue:0,stockCommissionRevenue:0,realEstateTransactionTaxRevenue:0,realEstateAnnualTaxRevenue:0,incomeTaxRevenue:0,corporateTaxRevenue:0,otherTaxRevenue:0,classCode:t,createdAt:(0,r.O5)(),lastUpdated:(0,r.O5)()}),console.log("\ud559\uae09 [".concat(t,"]\uc758 \uad6d\uace0\uac00 \uc5c6\uc5b4 \uc0c8\ub85c \uc0dd\uc131\ud588\uc2b5\ub2c8\ub2e4.")),0}catch(a){return console.error("\uad6d\uace0 \uc0dd\uc131 \uc911 \uc624\ub958:",a),w({type:"error",text:"\uad6d\uace0 \uc815\ubcf4\ub97c \ucd08\uae30\ud654\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."}),0}},{interval:3e5,enabled:!!t&&!!R,deps:[t]}),{data:_}=(0,o.nm)(async()=>{if(!t||!S)return[];const e=(0,l.P)(S,(0,l.My)("timestamp","desc"),(0,l.AB)(5));return(await(0,r.GG)(e)).docs.map(e=>(0,s.A)({id:e.id},e.data()))},{interval:3e5,enabled:!!t&&!!S,deps:[t]});(0,n.useEffect)(()=>{void 0!==C&&null!==C?u(C):t&&R||u(0)},[C,t,R]),(0,n.useEffect)(()=>{void 0!==_&&null!==_?(k(Array.isArray(_)?_:[]),T(!1)):t&&S||(k([]),T(!1))},[_,t,S]);const D=async(e,s)=>{if(e.preventDefault(),w({text:"",type:""}),!c())return void w({text:"\uc774 \uc791\uc5c5\uc740 \uad00\ub9ac\uc790\ub9cc \uc218\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",type:"error"});if(!a||!i||!t||!R||!S)return void w({text:"\uc0ac\uc6a9\uc790 \ub610\ub294 \ud559\uae09 \uc815\ubcf4\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",type:"error"});const n=parseFloat(f);if(isNaN(n)||n<=0)return void w({text:"\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",type:"error"});T(!0);const l=(0,r.H9)(r.db,"users",a.uid);try{await(0,r.c4)(r.db,async e=>{const o=await e.get(R),d=await e.get(l);if(!d.exists())throw new Error("\uad00\ub9ac\uc790(\uc0ac\uc6a9\uc790) \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=o.exists()&&o.data().totalAmount||0,m=d.data().cash||0;let x,u,p="";if("withdraw_to_admin"===s){if(p="\ud22c\uc790 \uc790\uae08 \uc778\ucd9c (\uad00\ub9ac\uc790)",c<n)throw new Error("\uad6d\uace0 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");x=c-n,u=m+n,e.update(R,{totalAmount:(0,r.GV)(-n),lastUpdated:(0,r.O5)()}),e.update(l,{cash:(0,r.GV)(n),updatedAt:(0,r.O5)()})}else{if("deposit_from_admin"!==s)throw new Error("\uc798\ubabb\ub41c \uc791\uc5c5 \uc720\ud615\uc785\ub2c8\ub2e4.");if(p="\ud22c\uc790 \uc218\uc775 \uc785\uae08 (\uad00\ub9ac\uc790)",m<n)throw new Error("\uad00\ub9ac\uc790 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");x=c+n,u=m-n,e.update(l,{cash:(0,r.GV)(-n),updatedAt:(0,r.O5)()}),e.update(R,{totalAmount:(0,r.GV)(n),lastUpdated:(0,r.O5)()})}const h=(0,r.H9)(S);e.set(h,{type:s,actorId:a.uid,actorDisplayName:i.name||i.nickname||a.email,amount:n,reason:p,classCode:t,timestamp:(0,r.O5)(),treasuryBalanceBefore:c,treasuryBalanceAfter:x,adminCashBefore:m,adminCashAfter:u})}),w({text:"".concat("withdraw_to_admin"===s?"\uc778\ucd9c":"\uc785\uae08"," \uc131\uacf5! (").concat(n.toLocaleString(),"\uc6d0)"),type:"success"}),j(""),m&&m()}catch(o){console.error("\uc790\uae08 \uc774\uccb4 \uc624\ub958:",o),w({text:"\uc624\ub958: ".concat(o.message),type:"error"})}finally{T(!1)}};return t?N&&0===x&&0===A.length&&!y.text?(0,d.jsx)("div",{className:"investment-container",style:b.container,children:"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."}):c()?(0,d.jsxs)("div",{className:"investment-container",style:b.container,children:[(0,d.jsx)("h2",{children:"\ud22c\uc790 \uad00\ub9ac (\uad6d\uace0 \u2194 \uad00\ub9ac\uc790 \ud604\uae08)"}),(0,d.jsxs)("p",{style:b.classCodeDisplay,children:["\ud559\uae09 \ucf54\ub4dc: ",t]}),y.text&&(0,d.jsx)("div",{style:(0,s.A)((0,s.A)({},b.messageBox),{},{borderColor:"success"===y.type?"#c3e6cb":"#f5c6cb",backgroundColor:"success"===y.type?"#d4edda":"#f8d7da",color:"success"===y.type?"#155724":"#721c24"}),children:y.text}),(0,d.jsxs)("div",{style:b.balanceDisplay,children:[(0,d.jsxs)("p",{children:["\ud604\uc7ac \uad6d\uace0 \uc794\uc561:"," ",(0,d.jsxs)("span",{style:b.balanceValue,children:[x.toLocaleString(),"\uc6d0"]})]}),(0,d.jsxs)("p",{children:["\uad00\ub9ac\uc790 (\ub0b4) \ud604\uae08:"," ",(0,d.jsxs)("span",{style:b.balanceValue,children:[g.toLocaleString(),"\uc6d0"]})]})]}),(0,d.jsxs)("form",{onSubmit:e=>D(e,"withdraw_to_admin"),style:b.form,children:[(0,d.jsx)("h3",{children:"\uad6d\uace0\uc5d0\uc11c \ud22c\uc790 \uc790\uae08 \uc778\ucd9c (\u2192 \ub0b4 \ud604\uae08\uc73c\ub85c)"}),(0,d.jsxs)("div",{style:b.formGroup,children:[(0,d.jsx)("label",{htmlFor:"withdrawAmount",style:b.label,children:"\uc778\ucd9c \uae08\uc561:"}),(0,d.jsx)("input",{type:"number",id:"withdrawAmount",value:f,onChange:e=>j(e.target.value),required:!0,min:"1",placeholder:"\uc778\ucd9c\ud560 \uae08\uc561",style:b.input,disabled:N})]}),(0,d.jsx)("button",{type:"submit",style:(0,s.A)((0,s.A)({},b.actionButton),{},{backgroundColor:"#007bff"}),disabled:N,children:N?"\ucc98\ub9ac\uc911...":"\uc790\uae08 \uc778\ucd9c \uc2e4\ud589"})]}),(0,d.jsx)("hr",{style:b.divider}),(0,d.jsxs)("form",{onSubmit:e=>D(e,"deposit_from_admin"),style:b.form,children:[(0,d.jsx)("h3",{children:"\ud22c\uc790 \uc218\uc775 \uad6d\uace0 \uc785\uae08 (\ub0b4 \ud604\uae08\uc5d0\uc11c \u2192)"}),(0,d.jsxs)("div",{style:b.formGroup,children:[(0,d.jsx)("label",{htmlFor:"depositAmount",style:b.label,children:"\uc785\uae08 \uae08\uc561:"}),(0,d.jsx)("input",{type:"number",id:"depositAmount",value:f,onChange:e=>j(e.target.value),required:!0,min:"1",placeholder:"\uad6d\uace0\ub85c \uc785\uae08\ud560 \uae08\uc561",style:b.input,disabled:N})]}),(0,d.jsx)("button",{type:"submit",style:b.actionButton,disabled:N,children:N?"\ucc98\ub9ac\uc911...":"\uad6d\uace0 \uc785\uae08 \uc2e4\ud589"})]}),(0,d.jsx)("hr",{style:b.divider}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"\ucd5c\uadfc \uad6d\uace0 \uac70\ub798 \ub0b4\uc5ed (\uad00\ub9ac\uc790 \uad00\ub828)"}),0!==A.length||N?(0,d.jsx)("ul",{style:b.transactionList,children:A.map(e=>{var t;return(0,d.jsxs)("li",{style:b.transactionItem,children:[(0,d.jsx)("span",{style:b.transactionItem_span,children:e.timestamp&&e.timestamp.toDate?new Date(e.timestamp.toDate()).toLocaleString():"\ub0a0\uc9dc \uc815\ubcf4 \uc5c6\uc74c"}),(0,d.jsxs)("span",{style:b.transactionItem_span,children:[" ","[","withdraw_to_admin"===e.type?"\uc778\ucd9c(\uad00\ub9ac\uc790)":"deposit_from_admin"===e.type?"\uc785\uae08(\uad00\ub9ac\uc790)":e.type||"\uc54c \uc218 \uc5c6\uc74c","]"]}),(0,d.jsxs)("span",{style:b.transactionItem_span,children:[" ",e.actorDisplayName||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,d.jsxs)("span",{style:b.transactionItem_span,children:[": ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString(),"\uc6d0"]}),e.reason&&(0,d.jsxs)("span",{style:b.transactionItem_span,children:[" ","(",e.reason,")"]})]},e.id)})}):(0,d.jsx)("p",{children:"\ucd5c\uadfc \uac70\ub798 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,d.jsx)("hr",{style:b.divider}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"\uc2e4\uc81c \ud22c\uc790 \uc9d1\ud589"}),(0,d.jsx)("p",{children:"\uc704\uc5d0\uc11c \uc778\ucd9c\ud55c \uc790\uae08\uc73c\ub85c \uc544\ub798 \ub9c1\ud06c\ub97c \ud1b5\ud574 \uc2e4\uc81c \ud22c\uc790\ub97c \uc9c4\ud589\ud558\uc138\uc694."}),(0,d.jsxs)("div",{style:b.linkContainer,children:[(0,d.jsx)(p.N_,{to:"/stock-trading",style:b.linkButton,children:"\uc8fc\uc2dd \uac70\ub798\uc18c \uac00\uae30"}),(0,d.jsx)(p.N_,{to:"/banking",style:b.linkButton,children:"\ud55c\uad6d \uc740\ud589 \uac00\uae30"})]})]})]}):(0,d.jsx)("div",{className:"investment-container",style:b.container,children:(0,d.jsx)("p",{children:"\uc774 \uae30\ub2a5\uc740 \uad00\ub9ac\uc790\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}):(0,d.jsx)("div",{className:"investment-container",style:b.container,children:(0,d.jsx)("p",{children:"\ud559\uae09 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc774\uac70\ub098, \ud559\uae09 \ucf54\ub4dc\uac00 \ud560\ub2f9\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})})};var v=a(3251);const f=e=>{var t;let{classCode:a}=e;const{user:s,userDoc:i,refreshUserDocument:c,isAdmin:m}=(0,h.As)(),[x,u]=(0,n.useState)(""),[p,b]=(0,n.useState)("deposit"),[g,f]=(0,n.useState)("personal"),[j,y]=(0,n.useState)("personal"),[w,N]=(0,n.useState)(!1),[T,A]=(0,n.useState)({type:"",message:""}),[k,R]=(0,n.useState)(0),[S,C]=(0,n.useState)((null===i||void 0===i?void 0:i.cash)||0),_=null!==i&&void 0!==i&&i.stocks?Object.values(i.stocks).reduce((e,t)=>e+t,0):0,D=(null===i||void 0===i||null===(t=i.coupons)||void 0===t?void 0:t.length)||0,E=null!==i&&void 0!==i&&i.accounts?Object.values(i.accounts).reduce((e,t)=>e+(t.balance||0),0):0,L=((null===i||void 0===i?void 0:i.cash)||0)+E,B=(0,r.H9)(r.db,"nationalTreasuries",a),O=(0,r.H9)(r.db,"nationalTreasuries",a),{refetch:H}=(0,o.nm)(async()=>{if(a)try{const e=await(0,l.x7)(B);e.exists()?R(e.data().totalAmount||0):(await(0,r.BN)(B,{totalAmount:0,stockTaxRevenue:0,stockCommissionRevenue:0,realEstateTransactionTaxRevenue:0,realEstateAnnualTaxRevenue:0,incomeTaxRevenue:0,corporateTaxRevenue:0,otherTaxRevenue:0,classCode:a,createdAt:(0,r.O5)(),lastUpdated:(0,r.O5)()}),R(0))}catch(e){console.error("\uae08\uace0 \uc794\uc561 \uc870\ud68c \uc911 \uc624\ub958:",e),A({type:"error",message:"\uae08\uace0 \uc794\uc561\uc744 \uac00\uc838\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."})}},{interval:3e5,enabled:!!a});(0,n.useEffect)(()=>{C((null===i||void 0===i?void 0:i.cash)||0)},[null===i||void 0===i?void 0:i.cash]);return(0,d.jsxs)("div",{className:"send-receive-panel",children:[(0,d.jsxs)("h3",{children:["\ud559\uae09 \uae08\uace0 \uad00\ub9ac (\ud559\uae09: ",a,")"]}),(0,d.jsxs)("div",{className:"balance-display asset-summary",children:[(0,d.jsxs)("div",{className:"asset-row",children:[(0,d.jsx)("span",{className:"asset-label",children:"\ub0b4 \ud604\uae08:"}),(0,d.jsxs)("span",{className:"asset-value",children:[S.toLocaleString()," \uc6d0"]})]}),(0,d.jsxs)("div",{className:"asset-row",children:[(0,d.jsx)("span",{className:"asset-label",children:"\ucd1d \uc790\uc0b0 (\ud604\uae08+\uc608\uae08):"}),(0,d.jsxs)("span",{className:"asset-value",children:[L.toLocaleString()," \uc6d0"]})]}),(0,d.jsxs)("div",{className:"asset-row",children:[(0,d.jsx)("span",{className:"asset-label",children:"\ubcf4\uc720 \uc8fc\uc2dd:"}),(0,d.jsxs)("span",{className:"asset-value",children:[_," \uc8fc"]})]}),(0,d.jsxs)("div",{className:"asset-row",children:[(0,d.jsx)("span",{className:"asset-label",children:"\ubcf4\uc720 \ucfe0\ud3f0:"}),(0,d.jsxs)("span",{className:"asset-value",children:[D," \uac1c"]})]}),(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"asset-row treasury",children:[(0,d.jsx)("span",{className:"asset-label",children:"\ud559\uae09 \uae08\uace0 \uc794\uc561:"}),(0,d.jsxs)("span",{className:"asset-value",children:[k.toLocaleString()," \uc6d0"]})]})]}),(0,d.jsxs)("div",{className:"action-selector",children:[(0,d.jsx)("button",{onClick:()=>b("deposit"),className:"deposit"===p?"active":"",disabled:w,children:"\uc785\uae08 (\ubcf4\ub0b4\uae30)"}),(0,d.jsx)("button",{onClick:()=>b("withdraw"),className:"withdraw"===p?"active":"",disabled:w,children:"\ucd9c\uae08 (\uac00\uc838\uc624\uae30)"})]}),"deposit"===p&&(0,d.jsxs)("div",{className:"source-selector",children:[(0,d.jsx)("strong",{children:"\uc5b4\ub514\uc5d0\uc11c \ubcf4\ub0b4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"source",value:"personal",checked:"personal"===g,onChange:e=>f(e.target.value),disabled:w}),"\ub0b4 \ud604\uae08"]}),(null===m||void 0===m?void 0:m())&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"source",value:"nationalTreasury",checked:"nationalTreasury"===g,onChange:e=>f(e.target.value),disabled:w}),"\uad6d\uc138\uccad (\uad6d\uace0)"]}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"source",value:"mint",checked:"mint"===g,onChange:e=>f(e.target.value),disabled:w}),"\uc2e0\uaddc \ubc1c\ud589"]})]})]}),"withdraw"===p&&(0,d.jsxs)("div",{className:"destination-selector",children:[(0,d.jsx)("strong",{children:"\uc5b4\ub514\ub85c \uac00\uc838\uc624\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"destination",value:"personal",checked:"personal"===j,onChange:e=>y(e.target.value),disabled:w}),"\ub0b4 \ud604\uae08\uc73c\ub85c"]}),(null===m||void 0===m?void 0:m())&&(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"radio",name:"destination",value:"nationalTreasury",checked:"nationalTreasury"===j,onChange:e=>y(e.target.value),disabled:w}),"\uad6d\uc138\uccad\uc73c\ub85c"]})]}),(0,d.jsxs)("div",{className:"transaction-form",children:[(0,d.jsx)("input",{type:"number",value:x,onChange:e=>u(e.target.value),placeholder:"\uae08\uc561 \uc785\ub825",min:"0",className:"amount-input",disabled:w}),(0,d.jsx)("button",{onClick:async()=>{if(!s||!i||!a)return void A({type:"error",message:"\ud544\uc218 \uc815\ubcf4(\ub85c\uadf8\uc778, \ud559\uae09\ucf54\ub4dc)\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});const e=parseFloat(x);if(isNaN(e)||e<=0)return void A({type:"error",message:"\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694."});N(!0),A({type:"",message:""});const t=(0,r.H9)(r.db,"users",s.uid);try{let a={};await(0,r.c4)(r.db,async s=>{const n=await s.get(t),l=await s.get(B);if(!n.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=n.data().cash||0,d=l.exists()&&l.data().totalAmount||0;if("deposit"===p){let n="";if("personal"===g){if(o<e)throw new Error("\uc785\uae08\ud560 \uae08\uc561\uc774 \ud604\uc7ac \ubcf4\uc720 \ud604\uae08\ubcf4\ub2e4 \ub9ce\uc2b5\ub2c8\ub2e4.");s.update(t,{cash:(0,r.GV)(-e)}),n="\uac1c\uc778 \ud604\uae08"}else if("nationalTreasury"===g){if(null===m||void 0===m||!m())throw new Error("\uad6d\uace0 \uc774\uccb4\ub294 \uad00\ub9ac\uc790\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const t=await s.get(O);if((null!==t&&void 0!==t&&t.exists()&&t.data().totalAmount||0)<e)throw new Error("\uad6d\uace0 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");s.update(O,{totalAmount:(0,r.GV)(-e),lastUpdated:(0,r.O5)()}),n="\uad6d\uace0"}else if("mint"===g){if(null===m||void 0===m||!m())throw new Error("\uc2e0\uaddc \ubc1c\ud589\uc740 \uad00\ub9ac\uc790\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.");n="\uc2e0\uaddc \ubc1c\ud589"}s.update(B,{totalAmount:(0,r.GV)(e),lastUpdated:(0,r.O5)()}),a={type:v.D_.TREASURY_DEPOSIT,description:"".concat(n,"\uc5d0\uc11c \ud559\uae09 \uae08\uace0\ub85c ").concat(e.toLocaleString(),"\uc6d0 \uc785\uae08\ud588\uc2b5\ub2c8\ub2e4."),metadata:{amount:e,source:g,treasuryBalance:d+e}}}else if("withdraw"===p){if(d<e)throw new Error("\ucd9c\uae08\ud560 \uae08\uc561\uc774 \uae08\uace0 \uc794\uc561\ubcf4\ub2e4 \ub9ce\uc2b5\ub2c8\ub2e4.");if((null===m||void 0===m||!m())&&!i.canWithdrawTreasury)throw new Error("\uae08\uace0\uc5d0\uc11c \ucd9c\uae08\ud560 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");s.update(B,{totalAmount:(0,r.GV)(-e),lastUpdated:(0,r.O5)()});let n="";if("personal"===j)s.update(t,{cash:(0,r.GV)(e)}),n="\uac1c\uc778 \ud604\uae08";else if("nationalTreasury"===j){if(null===m||void 0===m||!m())throw new Error("\uad6d\uc138\uccad \uc774\uccb4\ub294 \uad00\ub9ac\uc790\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.");s.update(O,{totalAmount:(0,r.GV)(e),otherTaxRevenue:(0,r.GV)(e),lastUpdated:(0,r.O5)()}),n="\uad6d\uc138\uccad"}a={type:v.D_.TREASURY_WITHDRAW,description:"\ud559\uae09 \uae08\uace0\uc5d0\uc11c ".concat(n,"(\uc73c)\ub85c ").concat(e.toLocaleString(),"\uc6d0 \ucd9c\uae08\ud588\uc2b5\ub2c8\ub2e4."),metadata:{amount:e,destination:j,treasuryBalance:d-e}}}}),a.type&&await(0,v.Mx)(s.uid,a.type,a.description,a.metadata),A({type:"success",message:"\uac70\ub798\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),u(""),c&&c(),H()}catch(n){console.error("\uac70\ub798 \ucc98\ub9ac \uc911 \uc624\ub958:",n),A({type:"error",message:"\uc624\ub958: ".concat(n.message)})}finally{N(!1)}},disabled:w||!x,className:"submit-button",children:w?"\ucc98\ub9ac \uc911...":"\uc2e4\ud589\ud558\uae30"})]}),T.message&&(0,d.jsx)("p",{className:"feedback-message ".concat("error"===T.type?"error":"success"),children:T.message}),(0,d.jsxs)("div",{className:"info-text",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\uc785\uae08:"})," \uc120\ud0dd\ud55c \uc790\uae08 \ucd9c\ucc98\uc5d0\uc11c \ud559\uae09 \uacf5\uc6a9 \uae08\uace0\ub85c \ub3c8\uc744 \ubcf4\ub0c5\ub2c8\ub2e4."]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\ucd9c\uae08:"})," \ud559\uae09 \uacf5\uc6a9 \uae08\uace0\uc758 \ub3c8\uc744 \uac1c\uc778 \ud604\uae08 \ub610\ub294 \uad6d\uc138\uccad(\uad6d\uace0)\uc73c\ub85c \ubcf4\ub0c5\ub2c8\ub2e4. (\uad6d\uc138\uccad \uc774\uccb4\ub294 \uad00\ub9ac\uc790\ub9cc \uac00\ub2a5)"]})]})]})};var j=a(8180);const y=e=>{if(!e)return"\uc815\ubcf4 \uc5c6\uc74c";try{const t=new Date(e);return isNaN(t.getTime())?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc":"".concat(t.getFullYear(),"\ub144 ").concat(t.getMonth()+1,"\uc6d4 ").concat(t.getDate(),"\uc77c")}catch(t){return"\ub0a0\uc9dc \ubcc0\ud658 \uc624\ub958"}},w=e=>{let{classCode:t}=e;const[a,i]=(0,n.useState)([]),{isAdmin:c,userDoc:m}=(0,h.As)(),{data:x}=(0,o.nm)(async()=>{if(!t)return[];const e=(0,l.rJ)(r.db,"jobs"),a=(0,l.P)(e,(0,l._M)("classCode","==",t));return(await(0,l.GG)(a)).docs.map(e=>(0,s.A)({id:e.id},e.data()))},{interval:3e5,enabled:!!t,deps:[t]}),u=(0,n.useCallback)(()=>{if(c())return!0;if(null===m||void 0===m||!m.selectedJobIds||!x||0===x.length)return!1;return x.filter(e=>m.selectedJobIds.includes(e.id)).some(e=>"\ub300\ud1b5\ub839"===e.title)},[c,m,x]),{loading:p,refetch:b}=(0,o.nm)(async()=>{if(t)try{const e=(0,l.rJ)(r.db,"classes",t,"nationalAssemblyLaws"),a=(0,l.P)(e,(0,l._M)("status","==","pending_government_approval")),n=(await(0,l.GG)(a)).docs.map(e=>(0,s.A)({id:e.id},e.data()));i(n)}catch(e){console.error("Error fetching pending laws:",e),alert("\uc815\ubd80 \uc774\uc1a1 \ubc95\uc548\uc744 \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ucf58\uc194\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")}},{interval:3e5,enabled:!!t});return p?(0,d.jsx)(j.AlchanLoading,{}):(0,d.jsxs)("div",{className:"law-management-container",children:[(0,d.jsx)("h2",{children:"\uc815\ubd80 \uc774\uc1a1 \ubc95\uc548 \ubaa9\ub85d"}),0===a.length?(0,d.jsx)("div",{className:"empty-state",children:"\ud604\uc7ac \uc815\ubd80\ub85c \uc774\uc1a1\ub41c \ubc95\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,d.jsx)("div",{className:"law-list",children:a.map(e=>{var a;return(0,d.jsx)("div",{className:"law-card pending-gov",children:(0,d.jsxs)("div",{className:"law-content-wrapper",children:[(0,d.jsxs)("div",{className:"law-header",children:[(0,d.jsx)("h3",{className:"law-title",children:e.title}),(0,d.jsx)("span",{className:"law-status pending-gov",children:"\uc815\ubd80 \uc2ec\uc758\uc911"})]}),(0,d.jsxs)("div",{className:"law-content",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\uc81c\uc548\uc790:"})," ",e.proposerName||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\ucde8\uc9c0:"})," ",e.purpose]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\uc124\uba85:"})," ",e.description]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\ubc8c\uae08:"})," ",e.fine]}),(0,d.jsxs)("p",{className:"law-timestamp",children:["\uad6d\ud68c \ud1b5\uacfc\uc77c: ",y(null===(a=e.approvalDate)||void 0===a?void 0:a.toDate().toISOString())]})]}),u()&&(0,d.jsxs)("div",{className:"law-footer government-actions",children:[(0,d.jsx)("button",{onClick:()=>(async e=>{if(u()){if(window.confirm("\uc774 \ubc95\uc548\uc744 \ucd5c\uc885 \uc2b9\uc778\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){const s=(0,l.H9)(r.db,"classes",t,"nationalAssemblyLaws",e);try{await(0,l.mZ)(s,{status:"approved",finalStatus:"final_approved",finalApprovalDate:(0,l.O5)()}),alert("\ubc95\uc548\uc774 \ucd5c\uc885 \uc2b9\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),b()}catch(a){console.error("Error approving law:",a),alert("\ubc95\uc548 \uc2b9\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}}else alert("\ub300\ud1b5\ub839 \ub610\ub294 \uad00\ub9ac\uc790\ub9cc \ubc95\uc548\uc744 \uc2b9\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e.id),className:"gov-action-button approve",children:"\uc2b9\uc778"}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(!u())return void alert("\ub300\ud1b5\ub839 \ub610\ub294 \uad00\ub9ac\uc790\ub9cc \uac70\ubd80\uad8c\uc744 \ud589\uc0ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const a=prompt("\uac70\ubd80\uad8c \ud589\uc0ac \uc0ac\uc720\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(a&&""!==a.trim()){const n=(0,l.H9)(r.db,"classes",t,"nationalAssemblyLaws",e),o=new Date;o.setDate(o.getDate()+7);try{await(0,l.mZ)(n,{status:"vetoed",vetoReason:a,vetoDate:(0,l.O5)(),vetoDeadline:o,approvals:0,disapprovals:0,voters:{}}),alert("\uac70\ubd80\uad8c\uc774 \ud589\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \ubc95\uc548\uc740 \uad6d\ud68c\uc5d0\uc11c \uc7ac\uc758\uacb0 \uc808\ucc28\ub97c \uac70\uce69\ub2c8\ub2e4."),b()}catch(s){console.error("Error vetoing law:",s),alert("\uac70\ubd80\uad8c \ud589\uc0ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else alert("\uac70\ubd80 \uc0ac\uc720\ub97c \ubc18\ub4dc\uc2dc \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4.")})(e.id),className:"gov-action-button veto",children:"\uac70\ubd80\uad8c \ud589\uc0ac"})]})]})},e.id)})})]})},N=()=>{const{userDoc:e}=(0,h.As)(),t=null===e||void 0===e?void 0:e.classCode,[a,s]=(0,n.useState)("lawManage"),r=e=>{s(e)};return(0,d.jsxs)("div",{className:"government-container",children:[(0,d.jsxs)("h1",{className:"government-header",children:["\uc815\ubd80 (",t?"\ud559\uae09: ".concat(t):"\ud559\uae09 \uc815\ubcf4 \uc5c6\uc74c",")"]}),(0,d.jsxs)("div",{className:"government-tabs",children:[(0,d.jsx)("button",{className:"gov-tab-button ".concat("lawManage"===a?"active":""),onClick:()=>r("lawManage"),disabled:!t,children:"\ubc95\uc548 \uad00\ub9ac"}),(0,d.jsx)("button",{className:"gov-tab-button ".concat("tax"===a?"active":""),onClick:()=>r("tax"),disabled:!t,children:"\uad6d\uc138\uccad"}),(0,d.jsx)("button",{className:"gov-tab-button ".concat("investment"===a?"active":""),onClick:()=>r("investment"),disabled:!t,children:"\ud22c\uc790\ud558\uae30"}),(0,d.jsx)("button",{className:"gov-tab-button ".concat("transfer"===a?"active":""),onClick:()=>r("transfer"),disabled:!t,children:"\ubcf4\ub0b4\uae30/\uac00\uc838\uc624\uae30"})]}),(0,d.jsx)("div",{className:"government-tab-content",children:(()=>{if(!t)return(0,d.jsx)(j.AlchanLoading,{});switch(a){case"lawManage":default:return(0,d.jsx)(w,{classCode:t});case"tax":return(0,d.jsx)(u,{classCode:t});case"investment":return(0,d.jsx)(g,{classCode:t});case"transfer":return(0,d.jsx)(f,{classCode:t})}})()})]})}},956:()=>{}}]);
//# sourceMappingURL=710.0cdf5197.chunk.js.map