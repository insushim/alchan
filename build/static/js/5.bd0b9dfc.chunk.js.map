{"version":3,"file":"static/js/5.bd0b9dfc.chunk.js","mappings":"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","sources":["pages/market/Auction.js"],"sourcesContent":["// src/Auction.js (ì˜¤ë¥˜ ìˆ˜ì • ë° ê´€ë¦¬ì ê¸°ëŠ¥ ì¶”ê°€)\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\n\r\n// firebase.jsì—ì„œ ìµìŠ¤í¬íŠ¸í•˜ëŠ” í•¨ìˆ˜ë“¤\r\nimport {\r\n  db,\r\n  serverTimestamp,\r\n  collection,\r\n  query,\r\n  where, // ì¿¼ë¦¬ë¥¼ ìœ„í•´ ì¶”ê°€\r\n  addDoc,\r\n  doc,\r\n  updateDoc, // updateDoc ì¶”ê°€\r\n  deleteDoc,\r\n  runTransaction,\r\n  Timestamp,\r\n  increment,\r\n  getDoc,\r\n  getDocs, // getDocs ì¶”ê°€\r\n} from \"../../firebase\";\r\n\r\n// onSnapshotê³¼ orderByëŠ” firebase/firestoreì—ì„œ ì§ì ‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\r\nimport {\r\n  onSnapshot as firebaseOnSnapshot,\r\n  orderBy as firebaseOrderBy,\r\n} from \"firebase/firestore\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport \"./Auction.css\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nexport default function Auction() {\r\n  // --- Context Data ---\r\n  const authContext = useAuth();\r\n  const itemsContext = useItems();\r\n  const allUsersData = authContext?.users ?? [];\r\n\r\n  const authLoading = authContext?.loading ?? true;\r\n  const firebaseUser = !authLoading ? authContext?.user : null;\r\n  const userDoc = !authLoading ? authContext?.userDoc : null;\r\n  const optimisticUpdate = authContext?.optimisticUpdate;\r\n\r\n  const balance = userDoc?.cash ?? 0;\r\n  const currentUserId = firebaseUser?.uid || userDoc?.id;\r\n  const classCode = userDoc?.classCode;\r\n  const currentUserName =\r\n    userDoc?.name || firebaseUser?.displayName || \"íŒë§¤ì ì •ë³´ ì—†ìŒ\";\r\n\r\n  const itemsLoading = itemsContext?.loading ?? true;\r\n  const inventoryItems = !itemsLoading ? itemsContext?.userItems ?? [] : [];\r\n  const updateUserItemQuantity = itemsContext?.updateUserItemQuantity;\r\n\r\n  // --- Component State ---\r\n  const [activeTab, setActiveTab] = useState(\"ongoing\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedAssetForAuction, setSelectedAssetForAuction] = useState(null);\r\n  const [newAuction, setNewAuction] = useState({\r\n    assetId: null,\r\n    assetType: \"item\",\r\n    name: \"\",\r\n    description: \"\",\r\n    startPrice: \"\",\r\n    duration: \"1\",\r\n  });\r\n  const [bidAmount, setBidAmount] = useState({});\r\n  const [notification, setNotification] = useState(null);\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [auctions, setAuctions] = useState([]);\r\n  const [auctionsLoading, setAuctionsLoading] = useState(true);\r\n\r\n  // --- Helper Functions ---\r\n  const formatPrice = (price) => {\r\n    if (typeof price !== \"number\" || isNaN(price)) return \"ê°€ê²© ì •ë³´ ì—†ìŒ\";\r\n    return `${price.toLocaleString(\"ko-KR\")}ì›`;\r\n  };\r\n\r\n  // --- Effects ---\r\n  useEffect(() => {\r\n    const timer = setInterval(() => setCurrentTime(new Date()), 60000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  // ê²½ë§¤ ì •ì‚° ë¡œì§ (ìˆ˜ì •ë¨ - ì•„ì´í…œ ë°˜í™˜/ì§€ê¸‰ ë¡œì§ ê°œì„ )\r\n  const settleAuction = async (auction) => {\r\n    if (!classCode) return;\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auction.id);\r\n\r\n    logger.log(`[Auction Settle] ì •ì‚° ì‹œë„: ${auction.id}`);\r\n\r\n    // --- ì‚¬ì „ ì‘ì—…: ë‚™ì°°ìê°€ ìˆì„ ê²½ìš°, ì¸ë²¤í† ë¦¬ì—ì„œ ë™ì¼ ì•„ì´í…œ ê²€ìƒ‰ ---\r\n    let winnerExistingItemQuerySnap = null;\r\n    if (auction.highestBidder && auction.originalStoreItemId) {\r\n      const winnerInventoryRef = collection(\r\n        db,\r\n        \"users\",\r\n        auction.highestBidder,\r\n        \"inventory\"\r\n      );\r\n      const q = query(\r\n        winnerInventoryRef,\r\n        where(\"itemId\", \"==\", auction.originalStoreItemId)\r\n      );\r\n      winnerExistingItemQuerySnap = await getDocs(q);\r\n    }\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        // ====== ëª¨ë“  ì½ê¸° ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰ ======\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists() || auctionDoc.data().status !== \"ongoing\") {\r\n          logger.log(`[Auction Settle] ê²½ë§¤ê°€ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ì‚­ì œë¨: ${auction.id}`);\r\n          return;\r\n        }\r\n\r\n        const auctionData = auctionDoc.data();\r\n        const now = new Date();\r\n        const endTime = auctionData.endTime.toDate();\r\n\r\n        if (endTime > now) {\r\n          logger.log(`[Auction Settle] ê²½ë§¤ê°€ ì•„ì§ ì¢…ë£Œë˜ì§€ ì•ŠìŒ: ${auction.id}`);\r\n          return;\r\n        }\r\n\r\n        let sellerItemDoc = null;\r\n        let sellerItemRef = null;\r\n        if (!auctionData.highestBidder) {\r\n          // ìœ ì°°ëœ ê²½ìš°ì—ë§Œ íŒë§¤ì ì•„ì´í…œ ë¬¸ì„œ ì½ê¸°\r\n          const returnCollection = auctionData.assetSourceCollection || 'inventory'; // ì•ˆì „ì¥ì¹˜\r\n          sellerItemRef = doc(db, \"users\", auctionData.seller, returnCollection, auctionData.assetId);\r\n          sellerItemDoc = await transaction.get(sellerItemRef);\r\n        }\r\n\r\n        // ====== ëª¨ë“  ì“°ê¸° ì‘ì—…ì„ ì½ê¸° ì™„ë£Œ í›„ ì‹¤í–‰ ======\r\n\r\n        if (auctionData.highestBidder) {\r\n          // --- ì„±ê³µì ì¸ ê²½ë§¤ (ë‚™ì°°ì ìˆìŒ) ---\r\n          const sellerRef = doc(db, \"users\", auctionData.seller);\r\n\r\n          // 1. íŒë§¤ìì—ê²Œ ë‚™ì°°ê¸ˆ ì§€ê¸‰\r\n          transaction.update(sellerRef, {\r\n            cash: increment(auctionData.currentBid),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n\r\n          // 2. ë‚™ì°°ìì—ê²Œ ì•„ì´í…œ ì§€ê¸‰ (ê°œì„ ëœ ë¡œì§)\r\n          if (winnerExistingItemQuerySnap && !winnerExistingItemQuerySnap.empty) {\r\n            // ì´ë¯¸ ë™ì¼ ì¢…ë¥˜ì˜ ì•„ì´í…œì„ ê°€ì§€ê³  ìˆìœ¼ë©´ ìˆ˜ëŸ‰ ì¦ê°€\r\n            const winnerItemRef = winnerExistingItemQuerySnap.docs[0].ref;\r\n            transaction.update(winnerItemRef, {\r\n              quantity: increment(1),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          } else {\r\n            // ìƒˆ ì•„ì´í…œì´ë¯€ë¡œ inventoryì— ìƒˆë¡œ ì¶”ê°€\r\n            const winnerInventoryRef = collection(db, \"users\", auctionData.highestBidder, \"inventory\");\r\n            const newWinnerItemRef = doc(winnerInventoryRef); // ìë™ ID ìƒì„±\r\n            transaction.set(newWinnerItemRef, {\r\n              itemId: auctionData.originalStoreItemId, // ìƒì  ì•„ì´í…œ ID\r\n              name: auctionData.name,\r\n              description: auctionData.description,\r\n              icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n              quantity: 1,\r\n              type: \"item\",\r\n              purchasedAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          }\r\n\r\n          // 3. í™œë™ ë¡œê·¸ ê¸°ë¡ (ê¸°ì¡´ê³¼ ë™ì¼)\r\n          const sellerLogRef = collection(db, \"users\", auctionData.seller, \"activityLogs\");\r\n          transaction.set(doc(sellerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_sold\",\r\n            message: `'${auctionData.name}' ì•„ì´í…œì´ ${formatPrice(auctionData.currentBid)}ì— íŒë§¤ë˜ì—ˆìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n\r\n          const winnerLogRef = collection(db, \"users\", auctionData.highestBidder, \"activityLogs\");\r\n          transaction.set(doc(winnerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_won\",\r\n            message: `'${auctionData.name}' ì•„ì´í…œì„ ${formatPrice(auctionData.currentBid)}ì— ë‚™ì°°ë°›ì•˜ìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n\r\n        } else {\r\n          // --- ìœ ì°°ëœ ê²½ë§¤ (ë‚™ì°°ì ì—†ìŒ) ---\r\n          // 1. íŒë§¤ìì—ê²Œ ì•„ì´í…œ ë°˜í™˜ (ê°œì„ ëœ ë¡œì§)\r\n          if (sellerItemDoc && sellerItemDoc.exists()) {\r\n            // íŒë§¤ì ì¸ë²¤í† ë¦¬ì— í•´ë‹¹ ì•„ì´í…œ ë¬¸ì„œê°€ ì•„ì§ ì¡´ì¬í•˜ë©´ ìˆ˜ëŸ‰ë§Œ ì¦ê°€\r\n            transaction.update(sellerItemRef, {\r\n              quantity: increment(1),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          } else if (sellerItemRef) {\r\n            // íŒë§¤ìê°€ í•´ë‹¹ ì¢…ë¥˜ì˜ ì•„ì´í…œì„ ëª¨ë‘ ì†Œì§„í•´ ë¬¸ì„œê°€ ì—†ë‹¤ë©´ ìƒˆë¡œ ìƒì„±\r\n            transaction.set(sellerItemRef, {\r\n              itemId: auctionData.originalStoreItemId,\r\n              name: auctionData.name,\r\n              description: auctionData.description,\r\n              icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n              quantity: 1,\r\n              type: \"item\",\r\n              addedAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n            });\r\n          }\r\n\r\n          // 2. í™œë™ ë¡œê·¸ ê¸°ë¡\r\n          const sellerLogRef = collection(db, \"users\", auctionData.seller, \"activityLogs\");\r\n          transaction.set(doc(sellerLogRef), {\r\n            timestamp: serverTimestamp(), type: \"auction_unsold\",\r\n            message: `'${auctionData.name}' ì•„ì´í…œì´ ìœ ì°°ë˜ì–´ ë°˜í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.`,\r\n            relatedDocId: auction.id,\r\n          });\r\n        }\r\n\r\n        // 4. ê²½ë§¤ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½\r\n        transaction.update(auctionRef, {\r\n          status: \"completed\",\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      logger.log(`[Auction Settle] ì„±ê³µì ìœ¼ë¡œ ì •ì‚° ì™„ë£Œ: ${auction.id}.`);\r\n      if (authContext.refreshUserDocument) authContext.refreshUserDocument();\r\n      if (itemsContext.fetchUserItems) itemsContext.fetchUserItems();\r\n    } catch (error) {\r\n      logger.error(`[Auction Settle] ì •ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ ${auction.id}:`, error);\r\n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê²½ë§¤ ìƒíƒœë¥¼ 'error'ë¡œ ë³€ê²½í•˜ì—¬ ì¬ì‹œë„ë¥¼ ë°©ì§€í•˜ê³  ë¬¸ì œ íŒŒì•…ì„ ìš©ì´í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n      await updateDoc(auctionRef, { status: \"error\", error: error.message });\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ [ìµœì í™”] ê²½ë§¤ ë°ì´í„° í´ë§ (ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì œê±°ë¡œ ë¹„ìš© 90% ì ˆê°)\r\n  useEffect(() => {\r\n    if (!classCode || !currentUserId) {\r\n      setAuctionsLoading(false);\r\n      setAuctions([]);\r\n      return;\r\n    }\r\n\r\n    const loadAuctions = async () => {\r\n      try {\r\n        setAuctionsLoading(true);\r\n        const auctionsRef = collection(db, \"classes\", classCode, \"auctions\");\r\n        const q = query(auctionsRef, firebaseOrderBy(\"endTime\", \"desc\"));\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        const auctionsData = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          endTime: doc.data().endTime?.toDate ? doc.data().endTime.toDate() : null,\r\n        }));\r\n\r\n        setAuctions(auctionsData);\r\n        setAuctionsLoading(false);\r\n\r\n        // --- ê²½ë§¤ ìë™ ì •ì‚° ë¡œì§ ---\r\n        const now = new Date();\r\n        const auctionsToSettle = auctionsData.filter(\r\n          (a) => a.status === \"ongoing\" && a.endTime && a.endTime <= now\r\n        );\r\n\r\n        if (auctionsToSettle.length > 0) {\r\n          logger.log(`[Auction] ì •ì‚°í•  ê²½ë§¤ ${auctionsToSettle.length}ê°œ ë°œê²¬.`);\r\n          auctionsToSettle.forEach((auction) => settleAuction(auction));\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Auction] ê²½ë§¤ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:\", error);\r\n        showNotification(\"ê²½ë§¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", \"error\");\r\n        setAuctionsLoading(false);\r\n      }\r\n    };\r\n\r\n    // ì´ˆê¸° ë¡œë“œë§Œ ì‹¤í–‰ (í´ë§ ì œê±°)\r\n    loadAuctions();\r\n\r\n    // ğŸ”¥ [ìµœì í™”] í´ë§ ì œê±° - ì‚¬ìš©ìê°€ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ê²½ë§¤ í™•ì¸\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [classCode, currentUserId]);\r\n\r\n  useEffect(() => {\r\n    if (selectedAssetForAuction) {\r\n      if (!selectedAssetForAuction.type || selectedAssetForAuction.type !== \"item\") {\r\n        showNotification(\"ì„ íƒëœ ìì‚°ì˜ íƒ€ì…ì„ ì‹ë³„í•  ìˆ˜ ì—†ê±°ë‚˜ ì•„ì´í…œì´ ì•„ë‹™ë‹ˆë‹¤.\", \"error\");\r\n        setSelectedAssetForAuction(null);\r\n        return;\r\n      }\r\n      setNewAuction((prev) => ({\r\n        ...prev,\r\n        assetId: selectedAssetForAuction.id,\r\n        assetType: selectedAssetForAuction.type,\r\n        name: selectedAssetForAuction.name || \"ì´ë¦„ ì—†ìŒ\",\r\n        description: selectedAssetForAuction.description || \"\",\r\n        startPrice: \"\",\r\n        duration: \"1\",\r\n      }));\r\n    } else {\r\n      setNewAuction((prev) => ({\r\n        ...prev,\r\n        assetId: null,\r\n        assetType: \"item\",\r\n        name: \"\",\r\n        description: \"\",\r\n        startPrice: \"\",\r\n        duration: \"1\",\r\n      }));\r\n    }\r\n  }, [selectedAssetForAuction]);\r\n\r\n  // --- Data Filtering ---\r\n  const ongoingAuctions = auctions\r\n    .filter((auction) => auction.status === \"ongoing\")\r\n    .filter(\r\n      (auction) =>\r\n        searchTerm === \"\" ||\r\n        auction.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (auction.description &&\r\n          auction.description.toLowerCase().includes(searchTerm.toLowerCase()))\r\n    );\r\n  const myAuctions = auctions.filter((auction) => auction.seller === currentUserId);\r\n  const myBids = auctions.filter(\r\n    (auction) =>\r\n      auction.highestBidder === currentUserId && auction.seller !== currentUserId\r\n  );\r\n  const completedAuctions = auctions.filter(\r\n    (auction) => auction.status === \"completed\" || auction.status === \"error\"\r\n  );\r\n\r\n  // --- Helper Functions ---\r\n  const getTimeLeft = (endTime) => {\r\n    if (!(endTime instanceof Date) || isNaN(endTime.getTime()))\r\n      return \"ì‹œê°„ ì •ë³´ ì—†ìŒ\";\r\n    const timeDiff = endTime.getTime() - currentTime.getTime();\r\n    if (timeDiff <= 0) return \"ì¢…ë£Œë¨\";\r\n    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);\r\n    const minutes = Math.floor((timeDiff / 1000 / 60) % 60);\r\n    let output = \"\";\r\n    if (days > 0) output += `${days}ì¼ `;\r\n    if (hours > 0 || days > 0) output += `${hours}ì‹œê°„ `;\r\n    if (minutes > 0 || (days === 0 && hours === 0)) output += `${minutes}ë¶„`;\r\n    return output.trim() || \"ê³§ ì¢…ë£Œ\";\r\n  };\r\n\r\n  const showNotification = (message, type = \"info\") => {\r\n    setNotification({ message, type });\r\n    setTimeout(() => setNotification(null), 3500);\r\n  };\r\n\r\n  // --- Event Handlers ---\r\n  const handleBid = async (auctionId) => {\r\n    if (!currentUserId || !classCode) {\r\n      showNotification(\"ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auctionId);\r\n    const userRef = doc(db, \"users\", currentUserId);\r\n\r\n    const auctionFromState = auctions.find((a) => a.id === auctionId);\r\n    if (!auctionFromState) {\r\n      showNotification(\"ê²½ë§¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ë¡œì»¬ ìƒíƒœ).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const amount = parseInt(bidAmount[auctionId] || \"0\", 10);\r\n\r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      showNotification(\"ìœ íš¨í•œ ì…ì°° ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    if (amount <= auctionFromState.currentBid) {\r\n      showNotification(`í˜„ì¬ê°€ (${formatPrice(auctionFromState.currentBid)})ë³´ë‹¤ ë†’ì€ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.`, \"error\");\r\n      return;\r\n    }\r\n    if (amount > balance) {\r\n      showNotification(`ë³´ìœ  ê¸ˆì•¡(${formatPrice(balance)})ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. íŠ¸ëœì­ì…˜ì—ì„œ ë‹¤ì‹œ í™•ì¸ë©ë‹ˆë‹¤.`, \"warning\");\r\n    }\r\n    if (auctionFromState.seller === currentUserId) {\r\n      showNotification(\"ìì‹ ì˜ ê²½ë§¤ì—ëŠ” ì…ì°°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (\r\n      !auctionFromState.endTime ||\r\n      !(auctionFromState.endTime instanceof Date) ||\r\n      auctionFromState.endTime <= currentTime ||\r\n      auctionFromState.status !== \"ongoing\"\r\n    ) {\r\n      showNotification(\"ì´ë¯¸ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ë§¤ì…ë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -amount });\r\n    }\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists()) {\r\n          throw new Error(\"ê²½ë§¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore).\");\r\n        }\r\n        const currentAuctionData = auctionDoc.data();\r\n\r\n        if (currentAuctionData.status !== \"ongoing\") {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        const bidderUserDoc = await transaction.get(userRef);\r\n        if (!bidderUserDoc.exists()) {\r\n          throw new Error(\"ì…ì°°ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const bidderUserData = bidderUserDoc.data();\r\n\r\n        if (bidderUserData.cash < amount) {\r\n          throw new Error(`ë³´ìœ  í˜„ê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (í˜„ì¬: ${formatPrice(bidderUserData.cash)}, í•„ìš”: ${formatPrice(amount)})`);\r\n        }\r\n        if (amount <= currentAuctionData.currentBid) {\r\n          throw new Error(`ì…ì°° ê¸ˆì•¡ì´ í˜„ì¬ê°€(${formatPrice(currentAuctionData.currentBid)})ë³´ë‹¤ ë‚®ê±°ë‚˜ ê°™ìŠµë‹ˆë‹¤.`);\r\n        }\r\n        if (currentAuctionData.seller === currentUserId) {\r\n          throw new Error(\"ìì‹ ì˜ ê²½ë§¤ì—ëŠ” ì…ì°°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const auctionEndTime = currentAuctionData.endTime.toDate();\r\n        if (auctionEndTime <= new Date()) {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        if (currentAuctionData.highestBidder && currentAuctionData.currentBid > 0) {\r\n          const previousHighestBidderRef = doc(db, \"users\", currentAuctionData.highestBidder);\r\n          transaction.update(previousHighestBidderRef, {\r\n            cash: increment(currentAuctionData.currentBid),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n\r\n        transaction.update(userRef, {\r\n          cash: increment(-amount),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n\r\n        transaction.update(auctionRef, {\r\n          currentBid: amount,\r\n          bidCount: increment(1),\r\n          highestBidder: currentUserId,\r\n          highestBidderName: currentUserName,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      if (authContext.refreshUserDocument) authContext.refreshUserDocument();\r\n\r\n      showNotification(\"ì…ì°°ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      setBidAmount({ ...bidAmount, [auctionId]: \"\" });\r\n    } catch (error) {\r\n      logger.error(\"[Auction Bid] ì…ì°° ì˜¤ë¥˜:\", error);\r\n      showNotification(`ì…ì°° ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n\r\n      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: amount });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreateAuction = async (e) => {\r\n    e.preventDefault();\r\n    if (!currentUserId || !classCode || !firebaseUser) {\r\n      showNotification(\"ë¡œê·¸ì¸ì´ í•„ìš”í•˜ê±°ë‚˜ í•™ê¸‰ ë˜ëŠ” ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (typeof updateUserItemQuantity !== \"function\") {\r\n      showNotification(\"ì•„ì´í…œ ìƒíƒœ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!selectedAssetForAuction || !newAuction.assetId || newAuction.assetType !== \"item\") {\r\n      showNotification(\"ê²½ë§¤ì— ë“±ë¡í•  ì•„ì´í…œì„ ì„ íƒí•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    const startPrice = parseFloat(newAuction.startPrice);\r\n    if (isNaN(startPrice) || startPrice <= 0) {\r\n      showNotification(\"ìœ íš¨í•œ ì‹œì‘ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n    const durationHours = parseInt(newAuction.duration, 10);\r\n    if (isNaN(durationHours) || durationHours < 1 || durationHours > 24) {\r\n      showNotification(\"ìœ íš¨í•œ ê²½ë§¤ ê¸°ê°„(1-24ì‹œê°„)ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    let itemDeducted = false;\r\n    try {\r\n      const itemUpdateResult = await updateUserItemQuantity(newAuction.assetId, -1);\r\n      if (!itemUpdateResult || (typeof itemUpdateResult === \"object\" && !itemUpdateResult.success)) {\r\n        throw new Error(itemUpdateResult?.error || \"ì•„ì´í…œ ìˆ˜ëŸ‰ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n      itemDeducted = true;\r\n\r\n      const auctionsRef = collection(db, \"classes\", classCode, \"auctions\");\r\n      const endTime = new Date(Date.now() + durationHours * 60 * 60 * 1000);\r\n\r\n      await addDoc(auctionsRef, {\r\n        assetId: newAuction.assetId,\r\n        assetType: newAuction.assetType,\r\n        name: newAuction.name,\r\n        description: newAuction.description,\r\n        startPrice: startPrice,\r\n        currentBid: startPrice,\r\n        bidCount: 0,\r\n        endTime: Timestamp.fromDate(endTime),\r\n        highestBidder: null,\r\n        seller: currentUserId,\r\n        sellerName: currentUserName,\r\n        status: \"ongoing\",\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        classCode: classCode,\r\n        itemIcon: selectedAssetForAuction.icon || \"ğŸ“¦\",\r\n        // --- ë²„ê·¸ ìˆ˜ì •ì„ ìœ„í•´ ì¶”ê°€ëœ í•„ë“œ ---\r\n        assetSourceCollection: selectedAssetForAuction.source || 'inventory',\r\n        originalStoreItemId: selectedAssetForAuction.itemId, // ì•„ì´í…œ ì¢…ë¥˜ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ  ID\r\n      });\r\n\r\n      setNewAuction({\r\n        assetId: null, assetType: \"item\", name: \"\", description: \"\",\r\n        startPrice: \"\", duration: \"1\",\r\n      });\r\n      setSelectedAssetForAuction(null);\r\n      showNotification(\"ê²½ë§¤ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      setActiveTab(\"myAuctions\");\r\n    } catch (error) {\r\n      logger.error(\"[Auction Create] ê²½ë§¤ ìƒì„± ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê²½ë§¤ ë“±ë¡ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n      if (itemDeducted && newAuction.assetId && typeof updateUserItemQuantity === \"function\") {\r\n        await updateUserItemQuantity(newAuction.assetId, 1);\r\n        logger.log(\"[Auction Create Error] ì•„ì´í…œ ìˆ˜ëŸ‰ ë¡¤ë°± ì„±ê³µ:\", newAuction.assetId);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancelAuction = async (auctionId) => {\r\n    if (!currentUserId || !classCode) return;\r\n    if (typeof updateUserItemQuantity !== \"function\") {\r\n      showNotification(\"ì•„ì´í…œ ìƒíƒœ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auctionId);\r\n    const auction = auctions.find((a) => a.id === auctionId);\r\n\r\n    if (!auction || auction.seller !== currentUserId) {\r\n      showNotification(\"ì·¨ì†Œ ê¶Œí•œì´ ì—†ê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë§¤ì…ë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (auction.status !== \"ongoing\") {\r\n      showNotification(\"ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ë§Œ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"info\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const auctionDocSnap = await getDoc(auctionRef);\r\n      if (!auctionDocSnap.exists()) {\r\n        showNotification(\"ê²½ë§¤ ì •ë³´ë¥¼ Firestoreì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n        return;\r\n      }\r\n      const firestoreAuctionData = auctionDocSnap.data();\r\n\r\n      if (firestoreAuctionData.status !== \"ongoing\") {\r\n        showNotification(\"ì´ë¯¸ ì²˜ë¦¬ëœ ê²½ë§¤ëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore í™•ì¸).\", \"info\");\r\n        return;\r\n      }\r\n      if (firestoreAuctionData.bidCount > 0) {\r\n        showNotification(\"ì…ì°°ì´ ì§„í–‰ëœ ê²½ë§¤ëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Firestore í™•ì¸).\", \"error\");\r\n        return;\r\n      }\r\n\r\n      // ì•„ì´í…œ ë°˜í™˜ ë¡œì§ì„ updateUserItemQuantityë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ì§€ ì•Šê³ ,\r\n      // settleAuctionê³¼ ë™ì¼í•œ ê°•ë ¥í•œ ë¡œì§ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\r\n      const returnCollection = firestoreAuctionData.assetSourceCollection || 'inventory';\r\n      const sellerItemRef = doc(db, \"users\", firestoreAuctionData.seller, returnCollection, firestoreAuctionData.assetId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const sellerItemDoc = await transaction.get(sellerItemRef);\r\n        if (sellerItemDoc.exists()) {\r\n          transaction.update(sellerItemRef, { quantity: increment(1) });\r\n        } else {\r\n          transaction.set(sellerItemRef, {\r\n            itemId: firestoreAuctionData.originalStoreItemId,\r\n            name: firestoreAuctionData.name,\r\n            icon: firestoreAuctionData.itemIcon,\r\n            description: firestoreAuctionData.description,\r\n            quantity: 1,\r\n            type: \"item\",\r\n          });\r\n        }\r\n        transaction.delete(auctionRef);\r\n      });\r\n\r\n      showNotification(\"ê²½ë§¤ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\", \"success\");\r\n      if (itemsContext.fetchUserItems) itemsContext.fetchUserItems();\r\n\r\n    } catch (error) {\r\n      logger.error(\"[Auction Cancel] ê²½ë§¤ ì·¨ì†Œ ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê²½ë§¤ ì·¨ì†Œ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n    }\r\n  };\r\n\r\n  // --- [ì‹ ê·œ] ê´€ë¦¬ììš© ê²½ë§¤ ê°•ì œ ì·¨ì†Œ í•¨ìˆ˜ ---\r\n  const handleAdminCancelAuction = async (auction) => {\r\n    if (!authContext.isAdmin()) {\r\n      showNotification(\"ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!classCode || !auction || auction.status !== 'ongoing') {\r\n      showNotification(\"ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ë§Œ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"error\");\r\n      return;\r\n    }\r\n    if (!window.confirm(`[ê´€ë¦¬ì] '${auction.name}' ê²½ë§¤ë¥¼ ê°•ì œë¡œ ì·¨ì†Œí•˜ê³  ì•„ì´í…œì„ íŒë§¤ìì—ê²Œ ë°˜í™˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì…ì°°ê¸ˆì´ ìˆë‹¤ë©´ ìµœê³  ì…ì°°ìì—ê²Œ í™˜ë¶ˆë©ë‹ˆë‹¤.`)) {\r\n      return;\r\n    }\r\n\r\n    const auctionRef = doc(db, \"classes\", classCode, \"auctions\", auction.id);\r\n    logger.log(`[Admin Cancel] ê´€ë¦¬ì ì·¨ì†Œ ì‹œë„: ${auction.id}`);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const auctionDoc = await transaction.get(auctionRef);\r\n        if (!auctionDoc.exists() || auctionDoc.data().status !== 'ongoing') {\r\n          throw new Error(\"ê²½ë§¤ê°€ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n        const auctionData = auctionDoc.data();\r\n\r\n        // 1. ìµœê³  ì…ì°°ìê°€ ìˆìœ¼ë©´ ì…ì°°ê¸ˆ í™˜ë¶ˆ\r\n        if (auctionData.highestBidder && auctionData.currentBid > 0) {\r\n          const bidderRef = doc(db, \"users\", auctionData.highestBidder);\r\n          transaction.update(bidderRef, {\r\n            cash: increment(auctionData.currentBid),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n\r\n        // 2. íŒë§¤ìì—ê²Œ ì•„ì´í…œ ë°˜í™˜ (settleAuctionì˜ ìœ ì°° ë¡œì§ê³¼ ë™ì¼)\r\n        const returnCollection = auctionData.assetSourceCollection || 'inventory';\r\n        const sellerItemRef = doc(db, \"users\", auctionData.seller, returnCollection, auctionData.assetId);\r\n        const sellerItemDoc = await transaction.get(sellerItemRef);\r\n\r\n        if (sellerItemDoc.exists()) {\r\n          transaction.update(sellerItemRef, { quantity: increment(1) });\r\n        } else {\r\n          transaction.set(sellerItemRef, {\r\n            itemId: auctionData.originalStoreItemId,\r\n            name: auctionData.name,\r\n            icon: auctionData.itemIcon || \"ğŸ“¦\",\r\n            description: auctionData.description,\r\n            quantity: 1,\r\n            type: \"item\",\r\n          });\r\n        }\r\n\r\n        // 3. ê²½ë§¤ ë¬¸ì„œ ì‚­ì œ\r\n        transaction.delete(auctionRef);\r\n      });\r\n\r\n      showNotification(`'${auction.name}' ê²½ë§¤ê°€ ê´€ë¦¬ìì— ì˜í•´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.`, \"success\");\r\n      if (itemsContext.fetchUserItems) itemsContext.fetchUserItems();\r\n      if (authContext.fetchAllUsers) authContext.fetchAllUsers(true);\r\n\r\n    } catch (error) {\r\n      logger.error(\"[Admin Cancel] ê´€ë¦¬ì ê²½ë§¤ ì·¨ì†Œ ì˜¤ë¥˜:\", error);\r\n      showNotification(`ê´€ë¦¬ì ì·¨ì†Œ ì‹¤íŒ¨: ${error.message}`, \"error\");\r\n    }\r\n  };\r\n\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"startPrice\" && value && !/^\\d*\\.?\\d*$/.test(value)) {\r\n      return;\r\n    }\r\n    setNewAuction({ ...newAuction, [name]: value });\r\n  };\r\n\r\n  const handleSelectAssetForAuction = (event) => {\r\n    const selectedId = event.target.value;\r\n    if (!selectedId) {\r\n      setSelectedAssetForAuction(null);\r\n      return;\r\n    }\r\n    const foundItem = inventoryItems.find((i) => i.id === selectedId);\r\n    if (foundItem) {\r\n      if (!foundItem.type || foundItem.type !== \"item\") {\r\n        showNotification(\"ì„ íƒëœ ìì‚° ì •ë³´ì— íƒ€ì… ì†ì„±ì´ ì—†ê±°ë‚˜ ì•„ì´í…œì´ ì•„ë‹™ë‹ˆë‹¤.\", \"error\");\r\n        setSelectedAssetForAuction(null);\r\n        return;\r\n      }\r\n      setSelectedAssetForAuction(foundItem);\r\n    } else {\r\n      showNotification(\"ì„ íƒí•œ IDì— í•´ë‹¹í•˜ëŠ” ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\", \"error\");\r\n      setSelectedAssetForAuction(null);\r\n    }\r\n  };\r\n\r\n  const handleBidAmountChange = (e, auctionId) => {\r\n    const value = e.target.value;\r\n    if (value === \"\" || /^\\d+$/.test(value)) {\r\n      setBidAmount({ ...bidAmount, [auctionId]: value });\r\n    }\r\n  };\r\n\r\n  // --- ë¡œë”© ë° ì‚¬ìš©ì/í•™ê¸‰ ì½”ë“œ í™•ì¸ ---\r\n  if (authLoading || itemsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!firebaseUser || !currentUserId) {\r\n    return <div className=\"login-required-container\">ê²½ë§¤ì¥ì„ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>;\r\n  }\r\n  if (!userDoc) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!classCode) {\r\n    return <div className=\"login-required-container\">ê²½ë§¤ì¥ì„ ì´ìš©í•˜ë ¤ë©´ í•™ê¸‰ ì½”ë“œê°€ ì‚¬ìš©ì ì •ë³´ì— ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. (í•™ê¸‰ ì½”ë“œ: ì—†ìŒ)</div>;\r\n  }\r\n  if (auctionsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  const durationOptions = [];\r\n  for (let i = 1; i <= 24; i++) {\r\n    durationOptions.push(<option key={i} value={i}>{i}ì‹œê°„</option>);\r\n  }\r\n\r\n  const availableItems = inventoryItems.filter(\r\n    (item) => item.quantity >= 1 && item.type === \"item\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"auction-container\">\r\n      {notification && (\r\n        <div className={`notification notification-${notification.type}`}>{notification.message}</div>\r\n      )}\r\n\r\n      <header className=\"auction-header\">\r\n        <h1>ê²½ë§¤ì¥ (í•™ê¸‰: {classCode || \"ì •ë³´ ì—†ìŒ\"})</h1>\r\n        <div className=\"auction-balance\">\r\n          <span>ë³´ìœ  ê¸ˆì•¡: </span>\r\n          <span className=\"balance-amount\">{formatPrice(balance)}</span>\r\n        </div>\r\n      </header>\r\n\r\n      <nav className=\"tab-container\">\r\n        <button className={`tab ${activeTab === \"ongoing\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"ongoing\")}>ì§„í–‰ì¤‘</button>\r\n        <button className={`tab ${activeTab === \"myAuctions\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"myAuctions\")}>ë‚´ ê²½ë§¤</button>\r\n        <button className={`tab ${activeTab === \"myBids\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"myBids\")}>ë‚´ ì…ì°°</button>\r\n        <button className={`tab ${activeTab === \"completed\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"completed\")}>ì¢…ë£Œë¨</button>\r\n        <button className={`tab register-tab ${activeTab === \"register\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"register\")}>ê²½ë§¤ ë“±ë¡</button>\r\n      </nav>\r\n\r\n      <main className=\"tab-content\">\r\n        {activeTab === \"ongoing\" && (\r\n          <div className=\"ongoing-auctions-content\">\r\n            <div className=\"search-bar\">\r\n              <input type=\"text\" placeholder=\"ê²½ë§¤ ë¬¼í’ˆ ê²€ìƒ‰...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} aria-label=\"ê²½ë§¤ ë¬¼í’ˆ ê²€ìƒ‰\" />\r\n              <button onClick={() => setSearchTerm(\"\")} className=\"search-reset-button\" aria-label=\"ê²€ìƒ‰ì–´ ì´ˆê¸°í™”\">{searchTerm ? \"ì´ˆê¸°í™”\" : \"ê²€ìƒ‰\"}</button>\r\n            </div>\r\n            {ongoingAuctions.length > 0 ? (\r\n              <div className=\"auctions-grid\">\r\n                {ongoingAuctions.map((auction) => (\r\n                  <article key={auction.id} className=\"auction-card\">\r\n                    <div className=\"auction-info\">\r\n                      <header className=\"card-header\">\r\n                        <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                        <span className={`time-left-badge ${!(auction.endTime instanceof Date) || isNaN(auction.endTime.getTime()) ? \"error\" : \"\"}`} title={auction.endTime instanceof Date ? auction.endTime.toLocaleString() : \"ì¢…ë£Œ ì‹œê°„ ì •ë³´ ì—†ìŒ\"}>\r\n                          {getTimeLeft(auction.endTime)}\r\n                        </span>\r\n                      </header>\r\n                      <p className=\"auction-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <div className=\"auction-price-details\">\r\n                        <p>ì‹œì‘ê°€: <span className=\"price start-price\">{formatPrice(auction.startPrice)}</span></p>\r\n                        <p>í˜„ì¬ê°€: <span className=\"price current-price\">{formatPrice(auction.currentBid)}</span></p>\r\n                      </div>\r\n                      <p className=\"auction-meta\">\r\n                        <span>ì…ì°°: {auction.bidCount}íšŒ</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      {auction.highestBidder === currentUserId && auction.seller !== currentUserId && (\r\n                        <p className=\"bid-status-indicator highest\">í˜„ì¬ ìµœê³  ì…ì°°ìì…ë‹ˆë‹¤!</p>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* --- ì‚¬ìš©ì ì…ì°° ì˜ì—­ --- */}\r\n                    {auction.seller !== currentUserId && auction.status === \"ongoing\" && auction.endTime instanceof Date && auction.endTime > currentTime && (\r\n                      <footer className=\"auction-actions\">\r\n                        <div className=\"bid-input-group\">\r\n                          <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" className=\"bid-input\" placeholder={`${formatPrice(auction.currentBid + 1)} ì´ìƒ`} value={bidAmount[auction.id] || \"\"} onChange={(e) => handleBidAmountChange(e, auction.id)} aria-label={`${auction.name} ì…ì°° ê¸ˆì•¡`} />\r\n                          <button className=\"bid-button\" onClick={() => handleBid(auction.id)} disabled={!bidAmount[auction.id] || isNaN(parseInt(bidAmount[auction.id] || \"0\", 10)) || parseInt(bidAmount[auction.id] || \"0\", 10) <= auction.currentBid}>ì…ì°°</button>\r\n                        </div>\r\n                      </footer>\r\n                    )}\r\n\r\n                    {/* --- ë‚´ ê²½ë§¤ ë¬¼í’ˆ í‘œì‹œ --- */}\r\n                    {auction.seller === currentUserId && auction.status === \"ongoing\" && (\r\n                      <footer className=\"auction-actions owner-notice\">\r\n                        <span>ë‚´ ê²½ë§¤ ë¬¼í’ˆ</span>\r\n                      </footer>\r\n                    )}\r\n\r\n                    {/* --- [ì‹ ê·œ] ê´€ë¦¬ì ì·¨ì†Œ ë²„íŠ¼ --- */}\r\n                    {authContext.isAdmin() && auction.status === 'ongoing' && (\r\n                      <footer className=\"auction-actions admin-actions\">\r\n                        <button\r\n                          className=\"action-button admin-cancel-button\"\r\n                          onClick={() => handleAdminCancelAuction(auction)}\r\n                        >\r\n                          ê´€ë¦¬ì ì·¨ì†Œ\r\n                        </button>\r\n                      </footer>\r\n                    )}\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">{searchTerm ? \"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\" : \"í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.\"}</div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"myAuctions\" && (\r\n          <div className=\"my-auctions-content\">\r\n            <h2>ë‚´ ê²½ë§¤ ë¬¼í’ˆ</h2>\r\n            {myAuctions.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {myAuctions.map((auction) => (\r\n                  <article key={auction.id} className=\"list-item my-auction-item\">\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <div className=\"price-details\">\r\n                        <span>ì‹œì‘ê°€: {formatPrice(auction.startPrice)}</span>\r\n                        <span>í˜„ì¬ê°€: {formatPrice(auction.currentBid)}</span>\r\n                      </div>\r\n                      <p className=\"meta-details\">\r\n                        <span>ì…ì°°: {auction.bidCount}íšŒ</span> | <span>ë‚¨ì€ ì‹œê°„: {getTimeLeft(auction.endTime)}</span>\r\n                      </p>\r\n                      <p className={`status-indicator ${auction.status === \"ongoing\" ? \"ongoing\" : \"completed\"}`}>\r\n                        ìƒíƒœ: {auction.status === \"ongoing\" ? \"ì§„í–‰ ì¤‘\" : auction.highestBidder ? \"íŒë§¤ ì™„ë£Œ\" : \"ìœ ì°°ë¨\"}\r\n                        {auction.status === 'error' && <span className=\"error-text\">(ì˜¤ë¥˜)</span>}\r\n                      </p>\r\n                      {auction.highestBidder && (<p className=\"highest-bidder-info\">ìµœê³  ì…ì°°ì: {auction.highestBidder === currentUserId ? \"ë‚˜\" : allUsersData?.find((u) => u.id === auction.highestBidder)?.name || auction.highestBidder?.substring(0, 6)}</p>)}\r\n                    </div>\r\n                    <div className=\"item-actions\">\r\n                      {auction.status === \"ongoing\" && auction.bidCount === 0 && auction.seller === currentUserId && (<button className=\"action-button cancel-button\" onClick={() => handleCancelAuction(auction.id)}>ë“±ë¡ ì·¨ì†Œ</button>)}\r\n                      {auction.status === \"ongoing\" && auction.bidCount > 0 && (<span className=\"action-status-text\">ì…ì°° ì§„í–‰ ì¤‘</span>)}\r\n\r\n                      {/* --- [ì‹ ê·œ] ê´€ë¦¬ì ì·¨ì†Œ ë²„íŠ¼ (ë‚´ ê²½ë§¤ íƒ­) --- */}\r\n                      {authContext.isAdmin() && auction.status === 'ongoing' && (\r\n                        <button\r\n                          className=\"action-button admin-cancel-button\"\r\n                          onClick={() => handleAdminCancelAuction(auction)}\r\n                        >\r\n                          ê´€ë¦¬ì ì·¨ì†Œ\r\n                        </button>\r\n                      )}\r\n\r\n                      {auction.status === \"completed\" && auction.highestBidder && (<span className=\"action-status-text sold\">íŒë§¤ ì™„ë£Œ</span>)}\r\n                      {auction.status === \"completed\" && !auction.highestBidder && (<span className=\"action-status-text unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.status === \"error\" && (<span className=\"action-status-text error\">ì˜¤ë¥˜ ë°œìƒ</span>)}\r\n                    </div>\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">\r\n                <p>ë“±ë¡í•œ ê²½ë§¤ ë¬¼í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                <button className=\"action-button primary\" onClick={() => setActiveTab(\"register\")}>ê²½ë§¤ ë“±ë¡í•˜ê¸°</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {/* 'ë‚´ ì…ì°°', 'ì¢…ë£Œë¨', 'ê²½ë§¤ ë“±ë¡' íƒ­ì˜ JSXëŠ” ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤. */}\r\n        {/* ... (ê¸°ì¡´ JSX ì½”ë“œ ë³µì‚¬) ... */}\r\n        {activeTab === \"myBids\" && (\r\n          <div className=\"my-bids-content\">\r\n            <h2>ë‚´ ì…ì°° í˜„í™©</h2>\r\n            {myBids.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {myBids.map((auction) => (\r\n                  <article key={auction.id} className={`list-item my-bid-item ${auction.highestBidder === currentUserId ? \"status-highest\" : \"status-outbid\"}`}>\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <p className=\"bid-info\">ë‚´ ìµœê³  ì…ì°°ê°€: <span className=\"price\">{formatPrice(auction.currentBid)}</span></p>\r\n                      <p className=\"meta-details\">\r\n                        <span>ë‚¨ì€ ì‹œê°„: {getTimeLeft(auction.endTime)}</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      <p className=\"status-indicator\">\r\n                        ìƒíƒœ:\r\n                        {auction.status === \"completed\" ? (\r\n                          auction.highestBidder === currentUserId ? (<span className=\"won\">ë‚™ì°° ì™„ë£Œ</span>) : (<span className=\"lost\">íŒ¨ì°°</span>)\r\n                        ) : auction.highestBidder === currentUserId ? (<span className=\"highest\">ìµœê³  ì…ì°° ì¤‘</span>) : (<span className=\"outbid\">ìƒíšŒ ì…ì°°ë¨</span>)}\r\n                      </p>\r\n                    </div>\r\n                    {auction.status === \"ongoing\" && auction.highestBidder !== currentUserId && (\r\n                      <div className=\"item-actions rebid-section\">\r\n                        <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" className=\"bid-input small\" placeholder={`${formatPrice(auction.currentBid + 1)} ì´ìƒ`} value={bidAmount[auction.id] || \"\"} onChange={(e) => handleBidAmountChange(e, auction.id)} aria-label={`${auction.name} ì¬ì…ì°° ê¸ˆì•¡`} />\r\n                        <button className=\"action-button rebid-button\" onClick={() => handleBid(auction.id)} disabled={!bidAmount[auction.id] || isNaN(parseInt(bidAmount[auction.id] || \"0\", 10)) || parseInt(bidAmount[auction.id] || \"0\", 10) <= auction.currentBid}>ì¬ì…ì°°</button>\r\n                      </div>\r\n                    )}\r\n                    {auction.status === \"ongoing\" && auction.highestBidder === currentUserId && (<div className=\"item-actions highest-bid-notice\"><span>ìµœê³  ì…ì°°ì</span></div>)}\r\n                    {auction.status === \"completed\" && (<div className=\"item-actions\"><span className={`action-status-text ${auction.highestBidder === currentUserId ? \"won\" : \"lost\"}`}>{auction.highestBidder === currentUserId ? \"ë‚™ì°°\" : \"íŒ¨ì°°\"}</span></div>)}\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\">\r\n                <p>ì…ì°°í•œ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                <button className=\"action-button primary\" onClick={() => setActiveTab(\"ongoing\")}>ê²½ë§¤ ë‘˜ëŸ¬ë³´ê¸°</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"completed\" && (\r\n          <div className=\"completed-auctions-content\">\r\n            <h2>ì¢…ë£Œëœ ê²½ë§¤</h2>\r\n            {completedAuctions.length > 0 ? (\r\n              <div className=\"list-view\">\r\n                {completedAuctions.map((auction) => (\r\n                  <article key={auction.id} className={`list-item completed-item ${auction.highestBidder === currentUserId ? \"result-won\" : \"\"} ${auction.seller === currentUserId ? \"result-sold\" : \"\"} ${!auction.highestBidder ? \"result-unsold\" : \"\"}`}>\r\n                    <div className=\"item-info\">\r\n                      <h3><span style={{ marginRight: \"5px\" }}>{auction.itemIcon || \"ğŸ“¦\"}</span>{auction.name}</h3>\r\n                      <p className=\"item-description\">{auction.description || \"ì„¤ëª… ì—†ìŒ\"}</p>\r\n                      <p className=\"final-result\">\r\n                        {auction.status === 'error' ? `ì˜¤ë¥˜ ë°œìƒ: ${auction.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}` :\r\n                          auction.highestBidder ? `ìµœì¢… ë‚™ì°°ê°€: ${formatPrice(auction.currentBid)}` : `ìœ ì°°ë¨ (ì‹œì‘ê°€: ${formatPrice(auction.startPrice)})`}\r\n                      </p>\r\n                      <p className=\"meta-details\">\r\n                        <span>ì´ ì…ì°°: {auction.bidCount}íšŒ</span> | <span>íŒë§¤ì: {auction.seller === currentUserId ? \"ë‚˜\" : auction.sellerName || auction.seller?.substring(0, 6)}</span>\r\n                      </p>\r\n                      {auction.highestBidder && (<p className=\"winner-info\">ë‚™ì°°ì: {auction.highestBidder === currentUserId ? \"ë‚˜\" : allUsersData?.find((u) => u.id === auction.highestBidder)?.name || auction.highestBidder?.substring(0, 6)}</p>)}\r\n                      {!auction.highestBidder && auction.status !== 'error' && (<p className=\"status-indicator unsold\">ìœ ì°°ë¨</p>)}\r\n                    </div>\r\n                    <div className=\"item-actions result-badge\">\r\n                      {auction.highestBidder === currentUserId && (<span className=\"badge won\">ë‚™ì°° ë°›ìŒ</span>)}\r\n                      {auction.seller === currentUserId && auction.highestBidder && (<span className=\"badge sold\">íŒë§¤ ì™„ë£Œ</span>)}\r\n                      {auction.seller === currentUserId && !auction.highestBidder && (<span className=\"badge unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.seller !== currentUserId && auction.highestBidder !== currentUserId && auction.highestBidder && (<span className=\"badge neutral\">ì¢…ë£Œë¨</span>)}\r\n                      {auction.seller !== currentUserId && auction.highestBidder !== currentUserId && !auction.highestBidder && (<span className=\"badge unsold\">ìœ ì°°ë¨</span>)}\r\n                      {auction.status === 'error' && (<span className=\"badge error\">ì˜¤ë¥˜</span>)}\r\n                    </div>\r\n                  </article>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"no-results-message\"><p>ì¢…ë£Œëœ ê²½ë§¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {activeTab === \"register\" && (\r\n          <div className=\"register-auction-content\">\r\n            <h2>ê²½ë§¤ ë¬¼í’ˆ ë“±ë¡</h2>\r\n            <form className=\"auction-form\" onSubmit={handleCreateAuction}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"auctionAssetSelect\">ë“±ë¡í•  ì•„ì´í…œ ì„ íƒ *</label>\r\n                <select id=\"auctionAssetSelect\" name=\"auctionAssetSelect\" className=\"form-control\" value={selectedAssetForAuction ? selectedAssetForAuction.id : \"\"} onChange={handleSelectAssetForAuction} required aria-describedby=\"assetSelectHint\">\r\n                  <option value=\"\">-- ë³´ìœ  ì•„ì´í…œ ëª©ë¡ --</option>\r\n                  {availableItems.length > 0 && (\r\n                    <optgroup label=\"ì•„ì´í…œ (ìˆ˜ëŸ‰ 1ê°œ ì´ìƒ)\">\r\n                      {availableItems.map((item) => (\r\n                        <option key={`item-${item.id}`} value={item.id}>\r\n                          {item.icon} {item.name} (ìˆ˜ëŸ‰: {item.quantity})\r\n                        </option>\r\n                      ))}\r\n                    </optgroup>\r\n                  )}\r\n                </select>\r\n                {availableItems.length === 0 && (<p id=\"assetSelectHint\" className=\"form-hint error\">ê²½ë§¤ì— ë“±ë¡í•  ìˆ˜ ìˆëŠ” ì•„ì´í…œ(ìˆ˜ëŸ‰ 1ê°œ ì´ìƒ)ì´ ì—†ìŠµë‹ˆë‹¤.</p>)}\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\">ë¬¼í’ˆëª…</label>\r\n                <input type=\"text\" id=\"name\" name=\"name\" className=\"form-control\" placeholder=\"ë“±ë¡í•  ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”\" value={newAuction.name} readOnly aria-label=\"ì„ íƒëœ ë¬¼í’ˆëª…\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"description\">ë¬¼í’ˆ ì„¤ëª…</label>\r\n                <textarea id=\"description\" name=\"description\" className=\"form-control\" rows=\"3\" placeholder=\"ìë™ ì…ë ¥ëœ ì„¤ëª…ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\" value={newAuction.description} onChange={handleInputChange} aria-label=\"ë¬¼í’ˆ ì„¤ëª…\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"startPrice\">ì‹œì‘ê°€ (ì›) *</label>\r\n                <input type=\"text\" inputMode=\"numeric\" pattern=\"[0-9]*\" id=\"startPrice\" name=\"startPrice\" className=\"form-control\" placeholder=\"ê²½ë§¤ ì‹œì‘ê°€ë¥¼ ìˆ«ìë¡œ ì…ë ¥ (ì˜ˆ: 10000)\" value={newAuction.startPrice} onChange={handleInputChange} required aria-required=\"true\" aria-label=\"ê²½ë§¤ ì‹œì‘ê°€\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"duration\">ê²½ë§¤ ê¸°ê°„ *</label>\r\n                <select id=\"duration\" name=\"duration\" className=\"form-control\" value={newAuction.duration} onChange={handleInputChange} required aria-required=\"true\" aria-label=\"ê²½ë§¤ ê¸°ê°„ ì„ íƒ\">\r\n                  {durationOptions}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-actions\">\r\n                <button type=\"submit\" className=\"action-button primary register-button\" disabled={!selectedAssetForAuction || !newAuction.startPrice || isNaN(parseFloat(newAuction.startPrice)) || parseFloat(newAuction.startPrice) <= 0 || !newAuction.duration || selectedAssetForAuction.type !== \"item\"}>ê²½ë§¤ ë“±ë¡</button>\r\n                <button type=\"button\" className=\"action-button cancel-button\" onClick={() => { setSelectedAssetForAuction(null); setActiveTab(\"ongoing\"); }}>ì·¨ì†Œ</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <style>{`\r\n        /* --- Cyberpunk Dark Theme Styles --- */\r\n\r\n        /* Admin Buttons */\r\n        .action-button.admin-cancel-button {\r\n            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1));\r\n            color: #a78bfa;\r\n            border: 1px solid rgba(139, 92, 246, 0.5);\r\n        }\r\n        .action-button.admin-cancel-button:hover {\r\n            background: rgba(139, 92, 246, 0.4);\r\n            box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);\r\n        }\r\n\r\n        .auction-actions.admin-actions {\r\n            background-color: rgba(139, 92, 246, 0.1);\r\n            border-top: 1px solid rgba(139, 92, 246, 0.3);\r\n            padding: 10px 15px;\r\n        }\r\n\r\n        .badge.error {\r\n            background-color: rgba(239, 68, 68, 0.8);\r\n        }\r\n        .action-status-text.error {\r\n          color: #f87171;\r\n          background-color: rgba(239, 68, 68, 0.1);\r\n          font-weight: 600;\r\n        }\r\n        .error-text {\r\n            color: #f87171;\r\n            font-weight: bold;\r\n            margin-left: 5px;\r\n        }\r\n        .completed-item .final-result {\r\n            font-size: 1em;\r\n            font-weight: 600;\r\n            margin-bottom: 8px;\r\n            word-break: break-all;\r\n        }\r\n\r\n        /* --- Global & Layout - Dark Theme --- */\r\n        .auction-container {\r\n          font-family: \"Rajdhani\", \"Noto Sans KR\", sans-serif;\r\n          max-width: 1200px;\r\n          margin: 0 auto;\r\n          padding: 15px;\r\n          color: #e2e8f0;\r\n          background-color: transparent;\r\n        }\r\n        .loading-container, .login-required-container {\r\n          text-align: center;\r\n          padding: 40px 20px;\r\n          font-size: 1.1em;\r\n          color: #94a3b8;\r\n        }\r\n        .auction-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 15px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n        }\r\n        .auction-header h1 {\r\n          font-size: 1.8em;\r\n          font-weight: 600;\r\n          color: #00fff2;\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n          margin: 0;\r\n        }\r\n        .auction-balance {\r\n          background: rgba(0, 255, 242, 0.1);\r\n          border: 1px solid rgba(0, 255, 242, 0.3);\r\n          padding: 8px 15px;\r\n          border-radius: 15px;\r\n          font-size: 0.95em;\r\n          color: #e2e8f0;\r\n        }\r\n        .auction-balance .balance-amount {\r\n          font-weight: 600;\r\n          color: #00fff2;\r\n          text-shadow: 0 0 5px rgba(0, 255, 242, 0.5);\r\n          margin-left: 5px;\r\n        }\r\n\r\n        /* --- Tabs - Dark Theme --- */\r\n        .tab-container {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          margin-bottom: 25px;\r\n          border-bottom: 2px solid rgba(255, 255, 255, 0.1);\r\n          gap: 8px;\r\n        }\r\n        .tab {\r\n          padding: 10px 18px;\r\n          background: none;\r\n          border: none;\r\n          border-bottom: 3px solid transparent;\r\n          cursor: pointer;\r\n          font-size: 1em;\r\n          font-weight: 500;\r\n          color: #94a3b8;\r\n          transition: all 0.2s ease;\r\n          white-space: nowrap;\r\n          position: relative;\r\n          top: 2px;\r\n        }\r\n        .tab:hover {\r\n          color: #e2e8f0;\r\n          background: rgba(255, 255, 255, 0.05);\r\n        }\r\n        .tab.active {\r\n          color: #00fff2;\r\n          font-weight: 600;\r\n          border-bottom-color: #00fff2;\r\n          text-shadow: 0 0 5px rgba(0, 255, 242, 0.3);\r\n        }\r\n\r\n        /* --- Search Bar - Dark Theme --- */\r\n        .search-bar { display: flex; margin-bottom: 25px; gap: 8px; }\r\n        .search-bar input[type=\"text\"] {\r\n          flex-grow: 1;\r\n          padding: 10px 15px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 6px;\r\n          font-size: 1em;\r\n          background: rgba(20, 20, 35, 0.8);\r\n          color: #e2e8f0;\r\n          transition: border-color 0.2s, box-shadow 0.2s;\r\n        }\r\n        .search-bar input[type=\"text\"]:focus {\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n          outline: none;\r\n        }\r\n        .search-reset-button {\r\n          padding: 10px 18px;\r\n          background: rgba(100, 116, 139, 0.3);\r\n          border: 1px solid rgba(100, 116, 139, 0.5);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          transition: all 0.2s;\r\n        }\r\n        .search-reset-button:hover {\r\n          background: rgba(100, 116, 139, 0.5);\r\n        }\r\n\r\n        /* --- Grid & Card Styles - Dark Theme --- */\r\n        .auctions-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }\r\n        .auction-card {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n          overflow: hidden;\r\n          transition: all 0.3s ease;\r\n          display: flex;\r\n          flex-direction: column;\r\n          backdrop-filter: blur(10px);\r\n        }\r\n        .auction-card:hover {\r\n          transform: translateY(-4px);\r\n          border-color: rgba(0, 255, 242, 0.3);\r\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 0 15px rgba(0, 255, 242, 0.1);\r\n        }\r\n        .auction-info { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }\r\n        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\r\n        .card-header h3 {\r\n          font-size: 1.15em;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          max-width: calc(100% - 85px);\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        .time-left-badge {\r\n          background: rgba(0, 255, 242, 0.1);\r\n          border: 1px solid rgba(0, 255, 242, 0.3);\r\n          color: #00fff2;\r\n          padding: 3px 8px;\r\n          border-radius: 10px;\r\n          font-size: 0.8em;\r\n          font-weight: 500;\r\n          white-space: nowrap;\r\n          flex-shrink: 0;\r\n        }\r\n        .auction-description { color: #94a3b8; font-size: 0.9em; line-height: 1.5; margin-bottom: 12px; }\r\n        .auction-price-details {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          font-size: 0.9em;\r\n          margin-bottom: 8px;\r\n          color: #94a3b8;\r\n          background: rgba(0, 0, 0, 0.2);\r\n          padding: 10px;\r\n          border-radius: 8px;\r\n        }\r\n        .auction-price-details .price { font-weight: 600; }\r\n        .auction-price-details .current-price { color: #fbbf24; text-shadow: 0 0 5px rgba(251, 191, 36, 0.3); }\r\n        .auction-meta { font-size: 0.85em; color: #64748b; margin-bottom: 10px; }\r\n        .bid-status-indicator.highest {\r\n          color: #34d399;\r\n          font-weight: 600;\r\n          font-size: 0.9em;\r\n          margin-top: auto;\r\n          background: rgba(16, 185, 129, 0.1);\r\n          padding: 8px;\r\n          border-radius: 6px;\r\n          text-align: center;\r\n        }\r\n        .auction-actions {\r\n          padding: 12px 15px;\r\n          background: rgba(0, 0, 0, 0.3);\r\n          border-top: 1px solid rgba(255, 255, 255, 0.05);\r\n        }\r\n        .owner-notice {\r\n          text-align: center;\r\n          font-size: 0.9em;\r\n          color: #00fff2;\r\n          font-weight: 500;\r\n        }\r\n        .bid-input-group { display: flex; gap: 8px; }\r\n        .bid-input {\r\n          flex-grow: 1;\r\n          padding: 8px 12px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          background: rgba(0, 0, 0, 0.3);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          font-size: 0.9em;\r\n        }\r\n        .bid-input:focus {\r\n          outline: none;\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n        }\r\n        .bid-button {\r\n          padding: 8px 15px;\r\n          background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1));\r\n          border: 1px solid rgba(16, 185, 129, 0.5);\r\n          color: #34d399;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 600;\r\n          transition: all 0.2s;\r\n          white-space: nowrap;\r\n        }\r\n        .bid-button:hover:not(:disabled) {\r\n          background: rgba(16, 185, 129, 0.4);\r\n          box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);\r\n        }\r\n        .bid-button:disabled {\r\n          background: rgba(75, 85, 99, 0.3);\r\n          border-color: rgba(75, 85, 99, 0.5);\r\n          color: #64748b;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        /* --- List View Styles - Dark Theme --- */\r\n        .my-auctions-content h2, .my-bids-content h2, .completed-auctions-content h2 {\r\n          font-size: 1.5em;\r\n          color: #00fff2;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 10px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n        }\r\n        .list-view { display: flex; flex-direction: column; gap: 15px; }\r\n        .list-item {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 15px;\r\n          transition: all 0.2s ease;\r\n          border-left: 4px solid transparent;\r\n        }\r\n        .list-item:hover {\r\n          border-color: rgba(0, 255, 242, 0.3);\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n        }\r\n        .list-item .item-info { flex-grow: 1; padding-right: 15px; }\r\n        .list-item h3 {\r\n          font-size: 1.1em;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0 0 5px 0;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        .list-item .item-description { font-size: 0.9em; color: #94a3b8; margin-bottom: 8px; }\r\n        .list-item .price-details, .list-item .meta-details { font-size: 0.85em; color: #64748b; margin-bottom: 5px; }\r\n        .list-item .bid-info .price { color: #00fff2; font-weight: 600; }\r\n        .list-item .status-indicator { font-size: 0.9em; font-weight: 500; margin-top: 8px; }\r\n        .list-item .status-indicator .won, .list-item .status-indicator .highest { color: #34d399; font-weight: 600; }\r\n        .list-item .status-indicator .outbid { color: #fbbf24; font-weight: 600; }\r\n        .list-item .item-actions { flex-shrink: 0; display: flex; align-items: center; gap: 10px; }\r\n\r\n        /* --- Action Buttons (ê³µí†µ) - Dark Theme --- */\r\n        .action-button {\r\n          padding: 8px 15px;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          transition: all 0.2s ease;\r\n          white-space: nowrap;\r\n        }\r\n        .action-button.primary {\r\n          background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.1));\r\n          border: 1px solid rgba(59, 130, 246, 0.5);\r\n          color: #60a5fa;\r\n        }\r\n        .action-button.primary:hover {\r\n          background: rgba(59, 130, 246, 0.4);\r\n          box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);\r\n        }\r\n        .action-button.cancel-button {\r\n          background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.1));\r\n          border: 1px solid rgba(239, 68, 68, 0.5);\r\n          color: #f87171;\r\n        }\r\n        .action-button.cancel-button:hover {\r\n          background: rgba(239, 68, 68, 0.4);\r\n          box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);\r\n        }\r\n        .action-button.rebid-button {\r\n          background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.1));\r\n          border: 1px solid rgba(251, 191, 36, 0.5);\r\n          color: #fbbf24;\r\n        }\r\n        .action-button.rebid-button:hover {\r\n          background: rgba(251, 191, 36, 0.4);\r\n          box-shadow: 0 0 15px rgba(251, 191, 36, 0.3);\r\n        }\r\n\r\n        /* --- Status Text/Badge - Dark Theme --- */\r\n        .action-status-text {\r\n          font-size: 0.9em;\r\n          font-weight: 500;\r\n          padding: 5px 10px;\r\n          border-radius: 4px;\r\n        }\r\n        .action-status-text.sold {\r\n          color: #60a5fa;\r\n          background: rgba(59, 130, 246, 0.1);\r\n          border: 1px solid rgba(59, 130, 246, 0.3);\r\n        }\r\n        .action-status-text.unsold {\r\n          color: #f87171;\r\n          background: rgba(239, 68, 68, 0.1);\r\n          border: 1px solid rgba(239, 68, 68, 0.3);\r\n        }\r\n        .badge {\r\n          font-size: 0.8em;\r\n          font-weight: 600;\r\n          padding: 4px 10px;\r\n          border-radius: 12px;\r\n          color: white;\r\n        }\r\n        .badge.won { background: linear-gradient(135deg, #10b981, #059669); }\r\n        .badge.sold { background: linear-gradient(135deg, #3b82f6, #2563eb); }\r\n        .badge.unsold { background: linear-gradient(135deg, #ef4444, #dc2626); }\r\n        .badge.neutral { background: linear-gradient(135deg, #6b7280, #4b5563); }\r\n\r\n        /* --- My Bids Specific --- */\r\n        .my-bid-item.status-highest { border-left-color: #10b981; }\r\n        .my-bid-item.status-outbid { border-left-color: #f59e0b; }\r\n\r\n        /* --- Completed Auctions Specific --- */\r\n        .completed-item.result-won { border-left-color: #10b981; }\r\n        .completed-item.result-sold { border-left-color: #3b82f6; }\r\n        .completed-item.result-unsold { border-left-color: #ef4444; }\r\n\r\n        /* --- Auction Form Styles - Dark Theme --- */\r\n        .register-auction-content h2 {\r\n          font-size: 1.5em;\r\n          color: #00fff2;\r\n          margin-bottom: 20px;\r\n          padding-bottom: 10px;\r\n          border-bottom: 1px solid rgba(0, 255, 242, 0.2);\r\n          text-shadow: 0 0 10px rgba(0, 255, 242, 0.3);\r\n        }\r\n        .auction-form {\r\n          background: rgba(20, 20, 35, 0.8);\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          padding: 25px;\r\n          border-radius: 12px;\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n          max-width: 650px;\r\n          margin: 0 auto;\r\n          backdrop-filter: blur(10px);\r\n        }\r\n        .form-group { margin-bottom: 20px; }\r\n        .form-group label {\r\n          display: block;\r\n          margin-bottom: 8px;\r\n          font-weight: 500;\r\n          color: #e2e8f0;\r\n        }\r\n        .form-control {\r\n          width: 100%;\r\n          padding: 10px 14px;\r\n          border: 1px solid rgba(255, 255, 255, 0.1);\r\n          background: rgba(0, 0, 0, 0.3);\r\n          color: #e2e8f0;\r\n          border-radius: 6px;\r\n          font-size: 1em;\r\n        }\r\n        .form-control:focus {\r\n          outline: none;\r\n          border-color: #00fff2;\r\n          box-shadow: 0 0 0 2px rgba(0, 255, 242, 0.2);\r\n        }\r\n        .form-control[readOnly] {\r\n          background: rgba(75, 85, 99, 0.3);\r\n          color: #94a3b8;\r\n        }\r\n        .form-actions { display: flex; gap: 15px; margin-top: 30px; }\r\n        .register-button {\r\n          background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1)) !important;\r\n          border: 1px solid rgba(16, 185, 129, 0.5) !important;\r\n          color: #34d399 !important;\r\n        }\r\n        .register-button:hover:not(:disabled) {\r\n          background: rgba(16, 185, 129, 0.4) !important;\r\n          box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);\r\n        }\r\n        .register-button:disabled {\r\n          background: rgba(75, 85, 99, 0.3) !important;\r\n          border-color: rgba(75, 85, 99, 0.5) !important;\r\n          color: #64748b !important;\r\n        }\r\n\r\n        /* --- Notification - Dark Theme --- */\r\n        .notification {\r\n          position: fixed;\r\n          bottom: 20px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          padding: 12px 24px;\r\n          border-radius: 12px;\r\n          color: white;\r\n          animation: fadeInOut 3.5s ease-in-out forwards;\r\n          z-index: 1001;\r\n          backdrop-filter: blur(10px);\r\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\r\n        }\r\n        .notification.success {\r\n          background: rgba(16, 185, 129, 0.9);\r\n          border: 1px solid rgba(16, 185, 129, 0.5);\r\n        }\r\n        .notification.error {\r\n          background: rgba(239, 68, 68, 0.9);\r\n          border: 1px solid rgba(239, 68, 68, 0.5);\r\n        }\r\n        .notification.info {\r\n          background: rgba(59, 130, 246, 0.9);\r\n          border: 1px solid rgba(59, 130, 246, 0.5);\r\n        }\r\n        @keyframes fadeInOut {\r\n          0% { opacity: 0; transform: translate(-50%, 15px); }\r\n          10% { opacity: 1; transform: translate(-50%, 0); }\r\n          90% { opacity: 1; transform: translate(-50%, 0); }\r\n          100% { opacity: 0; transform: translate(-50%, -5px); }\r\n        }\r\n\r\n        /* --- No results - Dark Theme --- */\r\n        .no-results-message {\r\n          text-align: center;\r\n          padding: 30px 20px;\r\n          color: #94a3b8;\r\n          background: rgba(20, 20, 35, 0.6);\r\n          border: 1px dashed rgba(255, 255, 255, 0.1);\r\n          border-radius: 12px;\r\n        }\r\n\r\n        /* --- Responsive --- */\r\n        @media (max-width: 768px) {\r\n          .auction-header { flex-direction: column; align-items: flex-start; gap: 10px; }\r\n          .auctions-grid { grid-template-columns: 1fr; }\r\n          .list-item { flex-direction: column; align-items: flex-start; }\r\n          .list-item .item-actions { width: 100%; margin-top: 10px; justify-content: flex-end; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}"],"names":["Auction","_authContext$users","_authContext$loading","_userDoc$cash","_itemsContext$loading","_itemsContext$userIte","authContext","useAuth","itemsContext","useItems","allUsersData","users","authLoading","loading","firebaseUser","user","userDoc","optimisticUpdate","balance","cash","currentUserId","uid","id","classCode","currentUserName","name","displayName","itemsLoading","inventoryItems","userItems","updateUserItemQuantity","activeTab","setActiveTab","useState","searchTerm","setSearchTerm","selectedAssetForAuction","setSelectedAssetForAuction","newAuction","setNewAuction","assetId","assetType","description","startPrice","duration","bidAmount","setBidAmount","notification","setNotification","currentTime","setCurrentTime","Date","auctions","setAuctions","auctionsLoading","setAuctionsLoading","formatPrice","price","isNaN","concat","toLocaleString","useEffect","timer","setInterval","clearInterval","async","auctionsRef","collection","db","q","query","firebaseOrderBy","auctionsData","getDocs","docs","map","doc","_doc$data$endTime","_objectSpread","data","endTime","toDate","now","auctionsToSettle","filter","a","status","length","logger","log","forEach","auction","auctionRef","winnerExistingItemQuerySnap","highestBidder","originalStoreItemId","winnerInventoryRef","where","runTransaction","auctionDoc","transaction","get","exists","auctionData","sellerItemDoc","sellerItemRef","returnCollection","assetSourceCollection","seller","sellerRef","update","increment","currentBid","updatedAt","serverTimestamp","empty","winnerItemRef","ref","quantity","newWinnerItemRef","set","itemId","icon","itemIcon","type","purchasedAt","sellerLogRef","timestamp","message","relatedDocId","winnerLogRef","addedAt","refreshUserDocument","fetchUserItems","error","updateDoc","settleAuction","showNotification","loadAuctions","prev","ongoingAuctions","toLowerCase","includes","myAuctions","myBids","completedAuctions","getTimeLeft","getTime","timeDiff","days","Math","floor","hours","minutes","output","trim","arguments","undefined","setTimeout","handleBid","auctionId","userRef","auctionFromState","find","amount","parseInt","Error","currentAuctionData","bidderUserDoc","bidderUserData","previousHighestBidderRef","bidCount","highestBidderName","handleAdminCancelAuction","isAdmin","window","confirm","bidderRef","delete","fetchAllUsers","handleInputChange","e","value","target","test","handleBidAmountChange","_jsx","AlchanLoading","className","children","durationOptions","i","push","_jsxs","availableItems","item","onClick","placeholder","onChange","_auction$seller","style","marginRight","title","sellerName","substring","inputMode","pattern","disabled","_allUsersData$find","_auction$highestBidde","u","auctionDocSnap","getDoc","firestoreAuctionData","handleCancelAuction","_auction$seller2","_auction$seller3","_allUsersData$find2","_auction$highestBidde2","onSubmit","preventDefault","parseFloat","durationHours","itemDeducted","itemUpdateResult","success","addDoc","Timestamp","fromDate","createdAt","source","htmlFor","event","selectedId","foundItem","required","label","readOnly","rows"],"ignoreList":[],"sourceRoot":""}