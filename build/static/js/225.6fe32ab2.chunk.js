"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[225],{225(e,t,s){s.r(t),s.d(t,{default:()=>b});var a=s(2555),r=s(5043),n=s(5016),i=s(4689),o=s(5472),c=s(9270),d=s(262),l=s(8800),m=s(1429),u=s(8379),x=s(5452),p=s(579);function b(){const{user:e,userDoc:t,users:s,classmates:b,allClassMembers:h,loading:g,updateUser:f,addCashToUserById:y,deductCash:v,optimisticUpdate:N}=(0,n.As)(),w=null===e||void 0===e?void 0:e.uid,j=(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.displayName)||"\uc0ac\uc6a9\uc790",S=null===t||void 0===t?void 0:t.classCode,[_,A]=(0,r.useState)(!0),D=(0,r.useRef)(!1),[C,k]=((0,r.useRef)({}),(0,r.useState)(0)),[I,M]=(0,r.useState)([]),[E,T]=(0,r.useState)([]),[G,R]=(0,r.useState)([]),[L,O]=(0,r.useState)([]),[F,P]=(0,r.useState)(0),[J,H]=(0,r.useState)([]),[B,U]=(0,r.useState)([]),[V,Q]=(0,r.useState)(0),q=((0,r.useMemo)(()=>(0,i.Qg)(i.Cn,"getUserAssetsData"),[]),(0,r.useMemo)(()=>(0,i.Qg)(i.Cn,"sellCoupon"),[]),(0,r.useMemo)(()=>(0,i.Qg)(i.Cn,"giftCoupon"),[]),36e5),z=S?"".concat(S,"_goal"):null,[K,W]=(0,r.useState)(1e3),[X,Y]=(0,r.useState)(1e3);(0,r.useEffect)(()=>{w&&(async()=>{try{const e=(0,i.H9)(i.db,"settings","mainSettings"),t=await(0,i.x7)(e);if(t.exists()){const e=t.data();e.couponValue&&Y(Number(e.couponValue))}}catch(e){x.vF.error("[MyAssets] \ucfe0\ud3f0 \uac00\uce58 \uc124\uc815 \ub85c\ub4dc \uc2e4\ud328:",e)}})()},[w]);const[Z,$]=(0,r.useState)(0),[ee,te]=(0,r.useState)(0),[se,ae]=(0,r.useState)(!1),[re,ne]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)(!1),[ce,de]=(0,r.useState)(!1),[le,me]=(0,r.useState)(""),[ue,xe]=(0,r.useState)(!1),[pe,be]=(0,r.useState)(""),[he,ge]=(0,r.useState)(""),[fe,ye]=(0,r.useState)(!1),[ve,Ne]=(0,r.useState)(!1),[we,je]=(0,r.useState)(""),[Se,_e]=(0,r.useState)(""),[Ae,De]=(0,r.useState)(!1),Ce=e=>{try{const t=localStorage.getItem("firestore_cache_".concat(e,"_").concat(w));if(t){const{data:e,timestamp:s}=JSON.parse(t);if(Date.now()-s<q)return e}}catch(t){}return null},ke=(e,t)=>{try{const s={data:t,timestamp:Date.now()};localStorage.setItem("firestore_cache_".concat(e,"_").concat(w),JSON.stringify(s))}catch(s){}},Ie=(0,r.useCallback)(async(e,t)=>{try{const s=(0,i.H9)(i.db,"goals",t),a={classCode:e,targetAmount:1e3,progress:0,donations:[],donationCount:0,title:"".concat(e," \ud559\uae09 \ubaa9\ud45c"),description:"".concat(e," \ud559\uae09\uc758 \ucfe0\ud3f0 \ubaa9\ud45c\uc785\ub2c8\ub2e4."),createdAt:(0,i.O5)(),updatedAt:(0,i.O5)(),createdBy:w};await(0,o.c4)(i.db,async e=>{const r=await e.get(s);if(r.exists()){const e=r.data();ke("goal_".concat(t),e)}else e.set(s,a),ke("goal_".concat(t),a)})}catch(s){throw s}},[w]),Me=(0,r.useCallback)(async()=>{if(!z||!S)return;const e="goal_".concat(z),t=Ce(e);if(t){W(Number(t.targetAmount)||1e3),$(Number(t.progress)||0);const e=Array.isArray(t.donations)?t.donations:[];H(e);const s=e.filter(e=>e.userId===w).reduce((e,t)=>e+t.amount,0);return void te(s)}try{const t=(0,i.H9)(i.db,"goals",z),s=await(0,i.x7)(t);if(s.exists()){const t=s.data();W(Number(t.targetAmount)||1e3),$(Number(t.progress)||0);const r=Array.isArray(t.donations)?t.donations.map(e=>{let t;return t=e.timestamp&&e.timestamp.toDate?e.timestamp.toDate().toISOString():e.timestamp&&e.timestamp.seconds?new Date(1e3*e.timestamp.seconds).toISOString():e.timestampISO?e.timestampISO:"string"===typeof e.timestamp?e.timestamp:(new Date).toISOString(),(0,a.A)((0,a.A)({},e),{},{amount:Number(e.amount)||0,timestamp:t,userId:e.userId||"",userName:e.userName||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790",message:e.message||"",classCode:e.classCode||S})}):[];H(r);const n=r.filter(e=>e.userId===w).reduce((e,t)=>e+t.amount,0);te(n),ke(e,t)}else x.vF.log("[MyAssets] \ubaa9\ud45c \ubb38\uc11c\uac00 \uc5c6\uc5b4 \uae30\ubcf8\uac12 \uc0dd\uc131"),await Ie(S,z)}catch(s){x.vF.error("[MyAssets] \ubaa9\ud45c \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",s)}},[z,S,w,Ie]),Ee=(0,r.useCallback)(async()=>{if(!w||!i.db)return void A(!1);if(D.current)return;D.current=!0;const e=Ce("myAssets");e?(k(e.parkingBalance||0),M(e.deposits||[]),T(e.savings||[]),R(e.loans||[]),O(e.realEstateAssets||[]),U(e.transactionHistory||[]),A(!1)):A(!0);try{const e=(0,i.P)((0,i.rJ)(i.db,"classes",S,"realEstateProperties"),(0,i._M)("owner","==",w),(0,o.limit)(50)),t=(0,i.P)((0,i.rJ)(i.db,"ClassStock",S,"students",w,"realestates"),(0,o.limit)(50)),s=(0,i.P)((0,i.rJ)(i.db,"realEstate"),(0,i._M)("ownerId","==",w),(0,o.limit)(50)),r=(0,i.H9)(i.db,"users",w,"financials","parkingAccount"),n=(0,i.rJ)(i.db,"ClassStock",S,"students",w,"parkingAccounts"),c=(0,i.P)((0,i.rJ)(i.db,"users",w,"products"),(0,o.limit)(50)),d=(0,i.P)((0,i.rJ)(i.db,"activity_logs"),(0,i._M)("classCode","==",S),(0,i._M)("userId","==",w),(0,o.limit)(50)),l=(0,i.P)((0,i.rJ)(i.db,"users",w,"transactions"),(0,o.limit)(50)),[m,u,x,p,b,h,g,f]=await Promise.all([(0,i.GG)(e),(0,i.GG)(t),(0,i.GG)(s),(0,i.x7)(r),(0,i.GG)(n),(0,i.GG)(c),(0,i.GG)(d).catch(()=>({docs:[]})),(0,i.GG)(l).catch(()=>({docs:[]}))]),y=[];m.forEach(e=>y.push((0,a.A)({id:e.id},e.data()))),u.forEach(e=>y.push((0,a.A)({id:e.id},e.data()))),x.forEach(e=>y.push((0,a.A)({id:e.id},e.data())));let v=0;p.exists()&&(v+=p.data().balance||0),b.forEach(e=>{v+=e.data().balance||0}),k(v);const N=[],j=[],_=[];h.forEach(e=>{var t;const s=(0,a.A)((0,a.A)({id:e.id},e.data()),{},{maturityDate:null!==(t=e.data().maturityDate)&&void 0!==t&&t.toDate?e.data().maturityDate.toDate():e.data().maturityDate});"deposit"===s.type?N.push(s):"savings"===s.type?j.push(s):"loan"===s.type&&_.push(s)}),M(N),T(j),R(_),O(y);const A=(g.docs||[]).map(e=>{const t=e.data(),s=t.description||t.type||"\uac70\ub798 \ub0b4\uc5ed";return{id:e.id,amount:t.amount||0,description:"undefined"===s?"\uac70\ub798 \ub0b4\uc5ed":s,timestamp:t.timestamp,type:t.type,couponAmount:t.couponAmount||0,source:"activity_logs"}}).filter(e=>0!==e.amount||0!==e.couponAmount),D=(f.docs||[]).map(e=>{const t=e.data(),s=t.description||"\uac70\ub798 \ub0b4\uc5ed";return{id:e.id,amount:t.amount||0,description:s&&"undefined"!==s?s:"\uac70\ub798 \ub0b4\uc5ed",timestamp:t.timestamp||t.createdAt,type:t.type||"transaction",source:"transactions"}}).filter(e=>0!==e.amount),C=[...A,...D];C.sort((e,t)=>{var s,a,r,n;const i=null!==(s=e.timestamp)&&void 0!==s&&s.toDate?e.timestamp.toDate():new Date(1e3*(null===(a=e.timestamp)||void 0===a?void 0:a.seconds)||0);return(null!==(r=t.timestamp)&&void 0!==r&&r.toDate?t.timestamp.toDate():new Date(1e3*(null===(n=t.timestamp)||void 0===n?void 0:n.seconds)||0))-i});const I=C.slice(0,20);U(I),ke("myAssets",{parkingBalance:v,deposits:N,savings:j,loans:_,realEstateAssets:y,transactionHistory:I.map(e=>{var t,s;return(0,a.A)((0,a.A)({},e),{},{timestamp:null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate().toISOString():null!==(s=e.timestamp)&&void 0!==s&&s.seconds?new Date(1e3*e.timestamp.seconds).toISOString():null})})})}catch(t){x.vF.error("[MyAssets] \ud83d\udea8 \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21 \uc9c1\uc811 \uc870\ud68c \uc2e4\ud328:",t)}finally{A(!1),D.current=!1}},[w,S]);(0,r.useEffect)(()=>{!g&&e?Ee():g||e?g&&A(!0):(A(!1),k(0),R([]),O([]),P(0),te(0),W(1e3),$(0),Y(1e3),H([]),U([]))},[g,e]),(0,r.useEffect)(()=>{const e=Number(null===t||void 0===t?void 0:t.cash)||0,s=(Number(null===t||void 0===t?void 0:t.coupons)||0)*Number(X),a=L.reduce((e,t)=>e+(Number(t.price)||0),0),r=I.reduce((e,t)=>e+(Number(t.balance)||0),0),n=E.reduce((e,t)=>e+(Number(t.balance)||0),0),i=G.reduce((e,t)=>e+(Number(t.remainingPrincipal)||Number(t.balance)||0),0),o=e+s+Number(C)+r+n+a-i;P(o)},[null===t||void 0===t?void 0:t.cash,null===t||void 0===t?void 0:t.coupons,X,C,I,E,L,G]),(0,r.useEffect)(()=>{ae(Z>=K&&K>0)},[Z,K]),(0,r.useEffect)(()=>{e&&z&&Me()},[e,z]);const Te=()=>{const e="myAssets_".concat(w);localStorage.removeItem("firestore_cache_".concat(e,"_").concat(w)),x.vF.log("[MyAssets] \ud83d\udd04 \uce90\uc2dc \uc0ad\uc81c \ubc0f \uac15\uc81c \uc0c8\ub85c\uace0\uce68"),Ee()};return g||_?(0,p.jsx)(m.AlchanLoading,{}):e?t||g?S||g?(0,p.jsx)("div",{className:"w-full min-h-full bg-cyber-dark",children:(0,p.jsxs)("div",{className:"w-full px-4 md:px-6 lg:px-8 py-6",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-cyber-cyan border-b-2 border-cyber-cyan/20 pb-2.5 m-0 drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",children:"\ub098\uc758 \uc790\uc0b0 \ud604\ud669 \ud83d\udcb3"}),(0,p.jsx)("button",{onClick:Te,disabled:_,className:"px-4 py-2 bg-cyber-cyan/10 text-cyber-cyan border border-cyber-cyan/30 rounded-lg text-sm font-semibold transition-all duration-200 ".concat(_?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-cyber-cyan/20"),children:"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"})]}),(0,p.jsx)(u.DailyRewardBanner,{userId:w,onClaim:async e=>{try{const s=(0,i.H9)(i.db,"users",w);await(0,i.BN)(s,{cash:(0,i.GV)(e),updatedAt:(0,i.O5)()},{merge:!0}),await(0,c.Mx)(i.db,{userId:w,userName:j,classCode:S,type:"\uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1",description:"\uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1\uc73c\ub85c ".concat(e.toLocaleString(),"\uc6d0 \ud68d\ub4dd"),amount:e,metadata:{rewardType:"daily_streak"}}),N&&N({cash:((null===t||void 0===t?void 0:t.cash)||0)+e}),x.vF.log("Daily reward claimed and added: ".concat(e))}catch(s){x.vF.error("\uc77c\uc77c \ubcf4\uc0c1 \uc9c0\uae09 \uc624\ub958:",s),alert("\ubcf4\uc0c1 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}}}),(()=>{const e=Number(null===t||void 0===t?void 0:t.cash)||0,s=Number(null===t||void 0===t?void 0:t.coupons)||0,a=Ae?B:B.slice(0,5);return(0,p.jsxs)("div",{className:"p-0 bg-transparent mb-6",children:[(0,p.jsxs)("div",{className:"bg-gradient-to-br from-[#667eea] to-[#764ba2] rounded-[20px] p-[30px] mb-5 shadow-[0_10px_30px_rgba(102,126,234,0.3)] border-none",children:[(0,p.jsx)("div",{className:"mb-2.5",children:(0,p.jsx)("span",{className:"text-white/90 text-base font-medium",children:"\ud83d\udcb0 \ubcf4\uc720 \ud604\uae08"})}),(0,p.jsxs)("div",{className:"text-[42px] font-extrabold text-white tracking-tight mb-4 text-right",children:[e.toLocaleString()," ",(0,p.jsx)("span",{className:"text-[28px] font-semibold",children:"\uc6d0"})]}),(0,p.jsx)("div",{className:"flex justify-end",children:(0,p.jsx)("button",{onClick:()=>Ne(!0),className:"px-7 py-3.5 bg-white/95 text-[#667eea] border-none rounded-xl text-base font-bold cursor-pointer shadow-[0_4px_15px_rgba(0,0,0,0.1)] transition-all duration-300 hover:-translate-y-0.5 hover:shadow-[0_6px_20px_rgba(0,0,0,0.15)]",disabled:_||g,children:"\ud83d\udcb8 \uc1a1\uae08\ud558\uae30"})})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("h4",{className:"text-[15px] text-[#e8e8ff] font-bold mb-3",children:"\ud83d\udcb3 \ucd5c\uadfc \uc785\ucd9c\uae08 \ub0b4\uc5ed"}),B.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"flex flex-col gap-2",children:a.map(e=>{let t="\ub0a0\uc9dc \uc5c6\uc74c";try{t=(e=>{try{if(!e)return new Date;if(e instanceof Date)return isNaN(e.getTime())?new Date:e;if(e&&"function"===typeof e.toDate){const t=e.toDate();return isNaN(t.getTime())?new Date:t}if(e&&e.seconds){const t=new Date(1e3*e.seconds);return isNaN(t.getTime())?new Date:t}if("string"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}if("number"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}return new Date}catch(t){return new Date}})(e.timestamp).toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"})}catch(n){t="\uc624\ub298"}const s=Number(e.amount)||0,a=e.description,r=a&&"undefined"!==a&&"null"!==a?String(a):"\uac70\ub798 \ub0b4\uc5ed";return(0,p.jsxs)("div",{className:"flex justify-between items-center text-sm text-[#a0a0c0] px-4 py-3.5 rounded-[10px] ".concat(s>0?"bg-emerald-600/10 border border-emerald-600/30":"bg-red-600/10 border border-red-600/30"),children:[(0,p.jsxs)("span",{className:"flex-1 whitespace-nowrap overflow-hidden text-ellipsis mr-2.5 font-medium text-[#e8e8ff]",children:[t," \u2022 ",r]}),(0,p.jsxs)("span",{className:"font-bold text-[15px] min-w-[110px] text-right ".concat(s>0?"text-emerald-400":"text-red-400"),children:[s>0?"+":"",s.toLocaleString(),"\uc6d0"]})]},e.id||Math.random())})}),B.length>5&&(0,p.jsx)("button",{onClick:()=>De(!Ae),className:"w-full mt-3 p-3 bg-white/5 text-[#a0a0c0] border border-white/10 rounded-[10px] text-sm font-semibold cursor-pointer transition-all duration-200 hover:bg-white/10",children:Ae?"\u25b2 \uc811\uae30":"\u25bc ".concat(B.length-5,"\uac1c \ub354 \ubcf4\uae30")})]}):(0,p.jsx)("div",{className:"text-[13px] text-gray-500 text-center p-5 bg-white/[0.03] rounded-[10px] border border-dashed border-white/10",children:"\ucd5c\uadfc \uac70\ub798 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,p.jsxs)("div",{className:"bg-gradient-to-br from-[#f093fb] to-[#f5576c] rounded-[20px] py-6 px-[30px] mb-5 shadow-[0_10px_30px_rgba(240,147,251,0.3)] border-none",children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)("span",{className:"text-white/90 text-base font-medium",children:"\ud83d\udcca \ucd1d \uc21c\uc790\uc0b0"})}),(0,p.jsxs)("div",{className:"text-[38px] font-extrabold text-white tracking-tight text-right",children:[Number(F).toLocaleString()," ",(0,p.jsx)("span",{className:"text-2xl font-semibold",children:"\uc6d0"})]}),(0,p.jsx)("p",{className:"mt-2 text-xs text-white/80",children:"\ud604\uae08 + \ucfe0\ud3f0\uac00\uce58 + \ud30c\ud0b9\ud1b5\uc7a5 + \uc608\uae08 + \uc801\uae08 + \ubd80\ub3d9\uc0b0 - \ub300\ucd9c"})]}),(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("h4",{className:"text-[15px] text-[#e8e8ff] font-bold mb-3",children:"\ud83c\udd7f\ufe0f \ud30c\ud0b9\ud1b5\uc7a5"}),(0,p.jsx)("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-[14px] p-5 border-none shadow-[0_4px_15px_rgba(6,182,212,0.2)]",children:(0,p.jsxs)("div",{className:"flex justify-between items-center",children:[(0,p.jsx)("span",{className:"text-white/90 font-medium text-sm",children:"\uc794\uc561"}),(0,p.jsxs)("span",{className:"font-extrabold text-[26px] text-white tracking-tight text-right block",children:[Number(C).toLocaleString(),(0,p.jsx)("span",{className:"text-lg font-semibold",children:"\uc6d0"})]})]})}),(0,p.jsx)("p",{className:"mt-2.5 text-xs text-gray-400 text-center",children:"\ud30c\ud0b9\ud1b5\uc7a5 \uba54\ub274\uc5d0\uc11c \uc785\ucd9c\uae08 \ubc0f \uc0c1\ud488 \uac00\uc785 \uac00\ub2a5"})]}),(0,p.jsx)("div",{className:"p-6 bg-[rgba(20,20,35,0.4)] rounded-2xl border border-cyber-cyan/10 shadow-[0_4px_12px_rgba(0,0,0,0.2)]",children:(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsx)("h4",{className:"text-[15px] text-gray-700 font-bold mb-3",children:"\ud83c\udf9f\ufe0f \ubcf4\uc720 \ucfe0\ud3f0"}),(0,p.jsx)("div",{className:"bg-gradient-to-br from-amber-400 to-amber-500 rounded-[14px] p-5 border-none shadow-[0_4px_15px_rgba(251,191,36,0.2)]",children:(0,p.jsx)("div",{className:"flex justify-between items-center",children:(0,p.jsxs)("div",{className:"w-full",children:[(0,p.jsxs)("div",{className:"text-[26px] font-extrabold text-white tracking-tight text-right",children:[s.toLocaleString()," ",(0,p.jsx)("span",{className:"text-lg font-semibold",children:"\uac1c"})]}),(0,p.jsxs)("div",{className:"text-xs text-white/85 font-medium mt-1 text-right",children:["1\ucfe0\ud3f0 = ",Number(X).toLocaleString(),"\uc6d0"]})]})})})]})})]})})(),ve&&(0,p.jsx)(l.A,{showTransferModal:ve,setShowTransferModal:Ne,recipients:b,transferRecipient:we,setTransferRecipient:je,transferAmount:Se,setTransferAmount:_e,handleTransfer:async()=>{A(!0);try{if(!t||!w||!i.db||!s||!v||!y)return void alert("\ud544\uc218 \uc815\ubcf4\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");const e=parseInt(Se,10);if(isNaN(e)||e<=0)return void alert("\uc62c\ubc14\ub978 \uc1a1\uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if((Number(t.cash)||0)<e)return void alert("\ubcf4\uc720 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const a=s.find(e=>e.id===we);if(!a)return void alert("\uc1a1\uae08 \ub300\uc0c1\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ubaa9\ub85d\uc744 \uc0c8\ub85c\uace0\uce68\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(a.id===w)return void alert("\uc790\uae30 \uc790\uc2e0\uc5d0\uac8c\ub294 \uc1a1\uae08\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=a.name||a.nickname||"\uc0ac\uc6a9\uc790";if(await v(e,"".concat(r,"\ub2d8\uc5d0\uac8c \uc1a1\uae08"))){await y(a.id,e,"".concat(j,"\ub2d8\uc73c\ub85c\ubd80\ud130 \uc785\uae08"))?((0,c.Mx)(i.db,{classCode:S,userId:w,userName:j,type:c.gI.TRANSFER_SEND,description:"".concat(r,"\ub2d8\uc5d0\uac8c ").concat(e.toLocaleString(),"\uc6d0 \uc1a1\uae08"),amount:-e,metadata:{recipientId:a.id,recipientName:r}}),(0,c.Mx)(i.db,{classCode:S,userId:a.id,userName:r,type:c.gI.TRANSFER_RECEIVE,description:"".concat(j,"\ub2d8\uc73c\ub85c\ubd80\ud130 ").concat(e.toLocaleString(),"\uc6d0 \uc785\uae08"),amount:e,metadata:{senderId:w,senderName:j}}),alert("\uc1a1\uae08\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Ne(!1),je(""),_e("")):(alert("\ubc1b\ub294 \uc0ac\ub78c\uc5d0\uac8c \ud604\uae08\uc744 \uc804\ub2ec\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc1a1\uae08\uc774 \ucde8\uc18c\ub429\ub2c8\ub2e4."),await y(w,e,"\uc1a1\uae08 \uc2e4\ud328\ub85c \uc778\ud55c \ubcf5\uc6d0"))}else alert("\uacc4\uc88c\uc5d0\uc11c \ud604\uae08\uc744 \uc778\ucd9c\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){x.vF.error("!!! \uc1a1\uae08 \ucc98\ub9ac \uc911 \uc608\uae30\uce58 \uc54a\uc740 \uc624\ub958 \ubc1c\uc0dd !!!",e),alert("\uc1a1\uae08 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(e.message)),N&&N({cash:parseInt(Se,10)||0})}finally{A(!1)}},userId:w,userCash:Number(null===t||void 0===t?void 0:t.cash)||0})]})}):(0,p.jsx)("div",{className:"flex justify-center items-center h-[80vh] text-[1.2em] text-red-500",children:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \ucf54\ub4dc\ub97c \ud560\ub2f9\ubc1b\uc73c\uc138\uc694."}):(0,p.jsx)("div",{className:"flex justify-center items-center h-[80vh] text-[1.2em] text-red-500",children:"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4\uc5d0\ub3c4 \uc774 \uba54\uc2dc\uc9c0\uac00 \ubcf4\uc774\uba74 \uc571\uc744 \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc7ac\ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."}):(0,p.jsx)(d.A,{})}},262(e,t,s){s.d(t,{A:()=>r});s(5043);var a=s(579);const r=()=>(0,a.jsxs)("div",{className:"login-warning",children:[(0,a.jsx)("h3",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,a.jsx)("p",{children:"\uc544\uc774\ud15c\uc744 \uad6c\ub9e4\ud558\uac70\ub098 \uc0ac\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})]})},8800(e,t,s){s.d(t,{A:()=>n});var a=s(5043),r=s(579);const n=(0,a.memo)(function(e){let{showTransferModal:t,setShowTransferModal:s,recipients:a=[],transferRecipient:n,setTransferRecipient:i,transferAmount:o,setTransferAmount:c,handleTransfer:d,userId:l,userCash:m=0}=e;const u=a.filter(e=>e&&e.id&&e.id!==l).sort((e,t)=>{const s=e.name||e.nickname||"\uc0ac\uc6a9\uc790 ".concat(e.id.substring(0,6)),a=t.name||t.nickname||"\uc0ac\uc6a9\uc790 ".concat(t.id.substring(0,6));return s.localeCompare(a,"ko")});return(0,r.jsx)("div",{className:"".concat(t?"flex":"hidden"," fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5"),onClick:()=>s(!1),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center","aria-label":"\ub2eb\uae30",children:"\xd7"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"\ud83d\udcb8 \uc1a1\uae08\ud558\uae30"}),(0,r.jsx)("div",{className:"bg-gray-100 rounded-lg p-3 mb-5",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600 m-0",children:["\ud604\uc7ac \ubcf4\uc720 \ud604\uae08: ",(0,r.jsxs)("strong",{className:"text-gray-800",children:[m.toLocaleString(),"\uc6d0"]})]})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d()},children:[(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"\ubc1b\ub294 \uc0ac\ub78c"}),(0,r.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white",required:!0,children:[(0,r.jsx)("option",{value:"",children:"\ubc1b\ub294 \ubd84\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),u.length>0?u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name||e.nickname||"\uc0ac\uc6a9\uc790 ".concat(e.id.substring(0,6))},e.id)):(0,r.jsx)("option",{value:"",disabled:!0,children:"\uc1a1\uae08 \uac00\ub2a5\ud55c \ud559\uae09 \uce5c\uad6c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]}),0===u.length&&(0,r.jsx)("p",{className:"mt-2 text-xs text-red-500",children:"\u26a0\ufe0f \uac19\uc740 \ud559\uae09\uc758 \ub2e4\ub978 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uac70\ub098 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"\uc1a1\uae08 \uae08\uc561"}),(0,r.jsx)("input",{type:"number",value:o,onChange:e=>c(e.target.value),placeholder:"\uc1a1\uae08\ud560 \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors",min:"1",max:m,required:!0}),o&&parseInt(o)>m&&(0,r.jsx)("p",{className:"mt-2 text-xs text-red-500",children:"\ubcf4\uc720 \ud604\uae08\ubcf4\ub2e4 \ub9ce\uc740 \uae08\uc561\uc740 \uc1a1\uae08\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-2.5 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300",children:"\ucde8\uc18c"}),(0,r.jsx)("button",{type:"submit",className:"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50",disabled:!n||!o||parseInt(o)>m||0===u.length,children:"\uc1a1\uae08"})]})]})]})})})}}]);
//# sourceMappingURL=225.6fe32ab2.chunk.js.map