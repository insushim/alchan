"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[5967],{5967(e,t,s){s.r(t),s.d(t,{default:()=>E});var n=s(5043),i=s(5016),l=s(2555),a=s(2864),d=s(5472),c=s(5452);const r=e=>e||null,o=new Map,u=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"".concat(e,"_").concat(t,"_").concat(JSON.stringify(s))},m=e=>{const t=o.get(e);if(!t)return null;return Date.now()-t.timestamp>9e5?(o.delete(e),null):t.data},h=(e,t)=>{o.set(e,{data:t,timestamp:Date.now()})},x=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{userId:s,type:n,startDate:i,endDate:o,limitCount:x=50,lastDoc:g=null}=t;try{const g=u(e,"activity_logs",t),E=m(g);if(E)return c.vF.log("[AdminDatabaseService] \uce90\uc2dc\ub41c \ud65c\ub3d9 \ub85c\uadf8 \uc0ac\uc6a9"),E;c.vF.log("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc11c\ubc84 \uc0ac\uc774\ub4dc \ud544\ud130\ub9c1 \uc870\ud68c:",{classCode:e,userId:s,type:n,limitCount:x});const N=[(0,d.where)("classCode","==",e)];if(s&&N.push((0,d.where)("userId","==",s)),i){const e=i instanceof Date?d.Dc.fromDate(i):i;N.push((0,d.where)("timestamp",">=",e))}if(o){const e=o instanceof Date?d.Dc.fromDate(o):o;N.push((0,d.where)("timestamp","<=",e))}const p=n&&!i&&!o;p&&N.push((0,d.where)("type","==",r(n))),N.push((0,d.orderBy)("timestamp","desc")),N.push((0,d.limit)(x+1));const v=(0,d.query)((0,d.rJ)(a.db,"activity_logs"),...N),_=await(0,d.getDocs)(v);let S=[];if(_.forEach(e=>{var t;const s=e.data();S.push((0,l.A)((0,l.A)({id:e.id},s),{},{timestamp:(null===(t=s.timestamp)||void 0===t?void 0:t.toDate())||new Date}))}),n&&!p){const e=r(n);S=S.filter(t=>t.type===e)}const A=S.length>x,b=S.slice(0,x),C=b.length>0?b[b.length-1].id:null;c.vF.log("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc870\ud68c \uc644\ub8cc: ".concat(b.length,"\uac1c (\uc11c\ubc84 \ud544\ud130\ub9c1)"));const O={logs:b,hasMore:A,lastDoc:C};return h(g,O),O}catch(E){throw c.vF.error("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc870\ud68c \uc624\ub958:",E),E}};var g=s(579);const E=()=>{const{userDoc:e,allClassMembers:t}=(0,i.As)(),[s,r]=(0,n.useState)("all"),[u,m]=(0,n.useState)([]),[h,E]=(0,n.useState)(!1),[N,p]=(0,n.useState)(null),[v,_]=(0,n.useState)(!1),[S,A]=(0,n.useState)(null),[b,C]=(0,n.useState)(""),[O,y]=(0,n.useState)(""),[T,j]=(0,n.useState)("all"),f=null===e||void 0===e?void 0:e.classCode,I=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(f&&"\ubbf8\uc9c0\uc815"!==f){E(!0),p(null);try{const i="all"!==T||""!==O.trim(),r={userId:"all"!==s?s:null,limitCount:i?100:10,lastDoc:e?null:n,useCache:!e},o=await x(f,r);if(0===o.logs.length&&t.length>0&&e){const e="all"!==s?[s]:t.map(e=>e.id||e.uid),n=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{limitCount:s=100}=t;if(c.vF.log("[AdminDatabaseService] transactions \uceec\ub809\uc158 \uc870\ud68c \uc2dc\uc791:",{userIdsCount:e.length}),0===e.length)return c.vF.warn("[AdminDatabaseService] userIds\uac00 \ube44\uc5b4\uc788\uc74c"),[];const n=[];for(let t=0;t<e.length;t+=10)n.push(e.slice(t,t+10));const i=[];for(const e of n){let t=(0,d.query)((0,d.rJ)(a.db,"transactions"),(0,d.where)("userId","in",e),(0,d.orderBy)("timestamp","desc"),(0,d.limit)(s));(await(0,d.getDocs)(t)).forEach(e=>{var t;const s=e.data();i.push((0,l.A)((0,l.A)({id:e.id},s),{},{timestamp:(null===(t=s.timestamp)||void 0===t?void 0:t.toDate())||new Date}))})}return c.vF.log("[AdminDatabaseService] transactions \uc870\ud68c \uc644\ub8cc: ".concat(i.length,"\uac1c")),i}catch(N){return c.vF.error("[AdminDatabaseService] transactions \uc870\ud68c \uc624\ub958:",N),[]}}(e,{limitCount:100});n.length>0&&(o.logs=(e=>e.map(e=>{let t="CASH_INCOME",s=e.description||"\uac70\ub798";return e.description&&(e.description.includes("\ucfe0\ud3f0")&&e.description.includes("\ud68d\ub4dd")?t="COUPON_EARN":e.description.includes("\ucfe0\ud3f0")&&e.description.includes("\uc0ac\uc6a9")?t="COUPON_USE":e.description.includes("\uc544\uc774\ud15c")&&e.description.includes("\uad6c\ub9e4")?t="ITEM_PURCHASE":e.description.includes("\uc544\uc774\ud15c")&&e.description.includes("\uc0ac\uc6a9")?t="ITEM_USE":e.description.includes("\uc544\uc774\ud15c")&&(e.description.includes("\ud310\ub9e4")||e.description.includes("\ub4f1\ub85d"))?t="ITEM_SELL":e.description.includes("\uc1a1\uae08")?t=e.amount>0?"CASH_TRANSFER_RECEIVE":"CASH_TRANSFER_SEND":"expense"===e.type&&(t="CASH_EXPENSE")),{id:e.id,userId:e.userId,userName:e.userName||"\uc54c \uc218 \uc5c6\uc74c",type:t,description:s,timestamp:e.timestamp,metadata:(0,l.A)({amount:e.amount,category:e.category},e.metadata)}}))(n),o.hasMore=!1)}m(e?o.logs:e=>[...e,...o.logs]),_(o.hasMore),A(o.lastDoc)}catch(i){c.vF.error("[AdminDatabase] \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",i),p("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{E(!1)}}else p("\ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},[f,s,t,T,O]);(0,n.useEffect)(()=>{m([]),A(null),_(!1),I(!0,null)},[s,f]),(0,n.useEffect)(()=>{u.length>0&&(m([]),A(null),_(!1),I(!0,null))},[T,O]);const M=()=>{!h&&v&&I(!1,S)},R=e=>{if(!e)return"text-gray-600";const t=e.toString().toLowerCase();return t.includes("\ucfe0\ud3f0")&&(t.includes("\ud68d\ub4dd")||t.includes("\uc9c0\uae09"))?"text-green-600":t.includes("\ucfe0\ud3f0")&&(t.includes("\uc0ac\uc6a9")||t.includes("\ud68c\uc218"))?"text-red-600":"COUPON_EARN"===e||"COUPON_GIVE"===e||"COUPON_TRANSFER_RECEIVE"===e||"ADMIN_COUPON_GIVE"===e?"text-green-600":"COUPON_USE"===e||"COUPON_TAKE"===e||"COUPON_TRANSFER_SEND"===e||"ADMIN_COUPON_TAKE"===e?"text-red-600":t.includes("\uc544\uc774\ud15c")&&t.includes("\uad6c\ub9e4")?"text-blue-600":t.includes("\uc544\uc774\ud15c")&&t.includes("\uc0ac\uc6a9")?"text-orange-600":t.includes("\uc544\uc774\ud15c")&&(t.includes("\ud310\ub9e4")||t.includes("\ub4f1\ub85d"))?"text-purple-600":"ITEM_PURCHASE"===e||"ITEM_MARKET_BUY"===e?"text-blue-600":"ITEM_USE"===e?"text-orange-600":"ITEM_SELL"===e||"ITEM_MARKET_LIST"===e?"text-purple-600":t.includes("\uc9c0\uae09")||t.includes("\uc785\uae08")||t.includes("\uc218\uc2e0")?"text-green-600":t.includes("\ud68c\uc218")||t.includes("\ucd9c\uae08")||t.includes("\uc1a1\uae08")?"text-red-600":"ADMIN_CASH_SEND"===e||"CASH_TRANSFER_RECEIVE"===e||"CASH_DEPOSIT"===e||"\ud604\uae08 \uc785\uae08"===e?"text-green-600":"ADMIN_CASH_TAKE"===e||"CASH_TRANSFER_SEND"===e||"CASH_WITHDRAW"===e||"\ud604\uae08 \ucd9c\uae08"===e?"text-red-600":t.includes("\ub9e4\uc218")?"text-blue-600":t.includes("\ub9e4\ub3c4")?"text-indigo-600":t.includes("\uac70\ub798\uc138")||t.includes("\uc138\uae08")?"text-yellow-600":"STOCK_BUY"===e?"text-blue-600":"STOCK_SELL"===e?"text-indigo-600":"STOCK_TAX"===e||"TAX_PAYMENT"===e?"text-yellow-600":"GAME_WIN"===e?"text-green-600":"GAME_LOSE"===e?"text-red-600":"text-gray-600"},w=e=>{if(!e)return"-";return(e instanceof Date?e:new Date(e)).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},U=u.filter(e=>{if(O){var t,s,n;const i=O.toLowerCase();if(!((null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(s=e.userName)||void 0===s?void 0:s.toLowerCase().includes(i))||(null===(n=e.type)||void 0===n?void 0:n.toLowerCase().includes(i))))return!1}if("all"!==T){var i,l;const t=(null===(i=e.type)||void 0===i?void 0:i.toString())||"",s=(null===(l=e.description)||void 0===l?void 0:l.toString())||"";if("coupon"===T){if(!(["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>t===e)||t.includes("\ucfe0\ud3f0")||s.includes("\ucfe0\ud3f0")))return!1}else if("item"===T){if(!(["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>t===e)||t.includes("\uc544\uc774\ud15c")||s.includes("\uc544\uc774\ud15c")))return!1}else if("cash"===T){if(!(t.includes("CASH")||t.includes("\uc1a1\uae08")||t.includes("\uc785\uae08")||t.includes("\ucd9c\uae08")||t.includes("ADMIN_CASH")||t.includes("TRANSFER")||t.includes("\ud604\uae08")))return!1}else if("stock"===T){if(!(t.includes("STOCK")||t.includes("\uc8fc\uc2dd")||t.includes("\uac70\ub798\uc138")||t.includes("TAX")))return!1}else if("game"===T){if(!(t.includes("GAME")||t.includes("\uac8c\uc784")))return!1}}return!0});return(0,g.jsxs)("div",{className:"admin-database p-6",children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud559\uae09 \ub370\uc774\ud130\ubca0\uc774\uc2a4"}),(0,g.jsx)("p",{className:"text-gray-600",children:"\ud559\uae09 \ud559\uc0dd\ub4e4\uc758 \ubaa8\ub4e0 \ud65c\ub3d9 \ub0b4\uc5ed\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,g.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[(0,g.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,g.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud559\uc0dd \uc120\ud0dd"}),(0,g.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,g.jsx)("option",{value:"all",children:"\uc804\uccb4 \ud559\uc0dd"}),t&&t.map(e=>(0,g.jsx)("option",{value:e.id||e.id,children:e.name||e.nickname||"\uc774\ub984 \uc5c6\uc74c"},e.id||e.uid))]})]}),(0,g.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud65c\ub3d9 \ud0c0\uc785"}),(0,g.jsxs)("select",{value:T,onChange:e=>j(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,g.jsx)("option",{value:"all",children:"\uc804\uccb4 \ud65c\ub3d9"}),(0,g.jsx)("option",{value:"coupon",children:"\ucfe0\ud3f0 \uad00\ub828"}),(0,g.jsx)("option",{value:"item",children:"\uc544\uc774\ud15c \uad00\ub828"}),(0,g.jsx)("option",{value:"cash",children:"\ud604\uae08 \uad00\ub828"}),(0,g.jsx)("option",{value:"stock",children:"\uc8fc\uc2dd \uad00\ub828"}),(0,g.jsx)("option",{value:"game",children:"\uac8c\uc784 \uad00\ub828"})]})]}),(0,g.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uac80\uc0c9"}),(0,g.jsx)("input",{type:"text",value:O,onChange:e=>y(e.target.value),placeholder:"\ud559\uc0dd\uba85, \ud65c\ub3d9 \ub0b4\uc6a9 \uac80\uc0c9...",className:"w-full p-2 border rounded-md"})]}),(0,g.jsxs)("div",{className:"flex items-end gap-2",children:[(0,g.jsx)("button",{onClick:()=>{(e=>{const t=[];o.forEach((s,n)=>{n.startsWith(e)&&t.push(n)}),t.forEach(e=>o.delete(e)),c.vF.log("[AdminDatabaseService] ".concat(e," \ud559\uae09 \uce90\uc2dc \ucd08\uae30\ud654 \uc644\ub8cc"))})(f),m([]),A(null),_(!1),C(""),I(!0,null)},disabled:h,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300",children:"\uc0c8\ub85c\uace0\uce68"}),(0,g.jsx)("button",{onClick:async()=>{C("\uc870\ud68c \uc911...");try{let e=[];const t={},s={};u.forEach(e=>{const n=e.type||"undefined";t[n]=(t[n]||0)+1,s[n]||(s[n]={description:e.description,userName:e.userName,timestamp:e.timestamp})}),e.push("=== \ud604\uc7ac \ub85c\ub4dc\ub41c \ub370\uc774\ud130 \ud0c0\uc785 \ubd84\ud3ec ==="),e.push("\ucd1d ".concat(u.length,"\uac1c\uc758 \ub85c\uadf8")),e.push(""),Object.entries(t).sort((e,t)=>t[1]-e[1]).forEach(t=>{let[n,i]=t;e.push("".concat(n,": ").concat(i,"\uac1c")),s[n]&&e.push("  \uc608\uc2dc: ".concat(s[n].description)),(n.includes("COUPON")||n.includes("\ucfe0\ud3f0")||n.includes("ITEM")||n.includes("\uc544\uc774\ud15c"))&&e.push("  \u2b50 \ucfe0\ud3f0/\uc544\uc774\ud15c \uad00\ub828 \ud0c0\uc785 \ubc1c\uacac!")}),e.push(""),e.push("=== \ud544\ud130\ubcc4 \ub9e4\uce6d \uacb0\uacfc ===");const n={coupon:e=>{var t,s;const n=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",i=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>n===e)||n.includes("\ucfe0\ud3f0")||i.includes("\ucfe0\ud3f0")},item:e=>{var t,s;const n=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",i=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>n===e)||n.includes("\uc544\uc774\ud15c")||i.includes("\uc544\uc774\ud15c")},cash:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("CASH")||s.includes("\uc1a1\uae08")||s.includes("\uc785\uae08")||s.includes("\ucd9c\uae08")||s.includes("ADMIN_CASH")||s.includes("TRANSFER")||s.includes("\ud604\uae08")},stock:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("STOCK")||s.includes("\uc8fc\uc2dd")||s.includes("\uac70\ub798\uc138")||s.includes("TAX")},game:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("GAME")||s.includes("\uac8c\uc784")}};Object.entries(n).forEach(t=>{let[s,n]=t;const i=u.filter(e=>n(e));e.push("".concat(s,": ").concat(i.length,"\uac1c"));const l=new Set(i.map(e=>e.type));l.size>0&&e.push("  \ub9e4\uce6d\ub41c \ud0c0\uc785: ".concat(Array.from(l).join(", ")))});const i=e.join("\n");C(i)}catch(N){c.vF.error("[AdminDatabase DEBUG] \uc624\ub958:",N),C("\uc624\ub958: ".concat(N.message))}},className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",children:"\ub514\ubc84\uadf8"})]})]}),b&&(0,g.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 rounded-md",children:[(0,g.jsx)("h4",{className:"font-semibold mb-2",children:"\ub514\ubc84\uadf8 \uc815\ubcf4:"}),(0,g.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:b})]})]}),u.length>0&&(()=>{const e=u.filter(e=>{var t,s;const n=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",i=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>n===e)||n.includes("\ucfe0\ud3f0")||i.includes("\ucfe0\ud3f0")}).length,t=u.filter(e=>{var t,s;const n=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",i=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>n===e)||n.includes("\uc544\uc774\ud15c")||i.includes("\uc544\uc774\ud15c")}).length,s=u.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("CASH")||s.includes("\uc1a1\uae08")||s.includes("\uc785\uae08")||s.includes("\ucd9c\uae08")||s.includes("ADMIN_CASH")||s.includes("TRANSFER")}).length,n=u.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("STOCK")||s.includes("\uc8fc\uc2dd")||s.includes("\uac70\ub798\uc138")||s.includes("TAX")}).length,i=u.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("GAME")||s.includes("\uac8c\uc784")}).length;return(0,g.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\ud65c\ub3d9 \ud1b5\uacc4 (\ud074\ub9ad\ud558\uc5ec \ud544\ud130)"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,g.jsxs)("div",{className:"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow",onClick:()=>j("all"),children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc804\uccb4 \ud65c\ub3d9"}),(0,g.jsx)("div",{className:"text-xl font-bold text-blue-600",children:u.length})]}),(0,g.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(e>0?"bg-green-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>e>0&&j("coupon"),title:0===e?"\uc544\uc9c1 \ucfe0\ud3f0 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \ucfe0\ud3f0 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\ucfe0\ud3f0 \uad00\ub828"}),(0,g.jsx)("div",{className:"text-xl font-bold ".concat(e>0?"text-green-600":"text-gray-400"),children:e})]}),(0,g.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(t>0?"bg-purple-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>t>0&&j("item"),title:0===t?"\uc544\uc9c1 \uc544\uc774\ud15c \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uc544\uc774\ud15c \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc544\uc774\ud15c \uad00\ub828"}),(0,g.jsx)("div",{className:"text-xl font-bold ".concat(t>0?"text-purple-600":"text-gray-400"),children:t})]}),(0,g.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(s>0?"bg-yellow-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>s>0&&j("cash"),title:0===s?"\uc544\uc9c1 \ud604\uae08 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \ud604\uae08 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\ud604\uae08 \uad00\ub828"}),(0,g.jsx)("div",{className:"text-xl font-bold ".concat(s>0?"text-yellow-600":"text-gray-400"),children:s})]}),(0,g.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(n>0?"bg-indigo-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>n>0&&j("stock"),title:0===n?"\uc544\uc9c1 \uc8fc\uc2dd \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uc8fc\uc2dd \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc8fc\uc2dd \uad00\ub828"}),(0,g.jsx)("div",{className:"text-xl font-bold ".concat(n>0?"text-indigo-600":"text-gray-400"),children:n})]}),(0,g.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(i>0?"bg-red-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>i>0&&j("game"),title:0===i?"\uc544\uc9c1 \uac8c\uc784 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uac8c\uc784 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,g.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uac8c\uc784 \uad00\ub828"}),(0,g.jsx)("div",{className:"text-xl font-bold ".concat(i>0?"text-red-600":"text-gray-400"),children:i})]})]})]})})(),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"\uc804\uccb4 \ud65c\ub3d9 \ub0b4\uc5ed"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\uc2dc\uac04\uc21c\uc73c\ub85c \uc815\ub82c\ub41c \ubaa8\ub4e0 \ud65c\ub3d9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),N&&(0,g.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:N}),h&&0===u.length&&(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]}),!h||u.length>0?(0,g.jsx)("div",{children:0===U.length?(0,g.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,g.jsx)("p",{className:"text-lg mb-2",children:O?"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud65c\ub3d9 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,g.jsxs)("p",{className:"text-sm",children:["\uc804\uccb4 \ub370\uc774\ud130: ",u.length,"\uac1c"]})]}):(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["\ucd1d ",U.length,"\uac1c\uc758 \ud65c\ub3d9 (\uac80\uc0c9: ",u.length,"\uac1c \uc911)"]}),U.map((e,t)=>{return(0,g.jsx)("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow",children:(0,g.jsx)("div",{className:"flex justify-between items-start",children:(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,g.jsx)("span",{className:"font-bold text-base ".concat(R(e.type)),children:(s=e.type,{"\ucfe0\ud3f0 \ud68d\ub4dd":"\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9":"\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09":"\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218":"\ucfe0\ud3f0 \ud68c\uc218","\uc544\uc774\ud15c \uad6c\ub9e4":"\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9":"\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4":"\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d":"\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4":"\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc8fc\uc2dd \ub9e4\uc218":"\uc8fc\uc2dd \ub9e4\uc218","\uc8fc\uc2dd \ub9e4\ub3c4":"\uc8fc\uc2dd \ub9e4\ub3c4","\uc8fc\uc2dd \uac70\ub798\uc138":"\uc8fc\uc2dd \uac70\ub798\uc138","\uac70\ub798\uc138":"\uc8fc\uc2dd \uac70\ub798\uc138","\uc1a1\uae08":"\uc1a1\uae08","\uc1a1\uae08 \uc218\uc2e0":"\uc1a1\uae08 \uc218\uc2e0","\ub3c8 \uc1a1\uae08":"\uc1a1\uae08","\ub3c8 \ucd9c\uae08":"\ucd9c\uae08","\ub3c8 \uc785\uae08":"\uc785\uae08","\ud604\uae08 \ucd9c\uae08":"\ucd9c\uae08","\ud604\uae08 \uc785\uae08":"\uc785\uae08",COUPON_EARN:"\ucfe0\ud3f0 \ud68d\ub4dd",COUPON_USE:"\ucfe0\ud3f0 \uc0ac\uc6a9",COUPON_GIVE:"\ucfe0\ud3f0 \uc9c0\uae09",COUPON_TAKE:"\ucfe0\ud3f0 \ud68c\uc218",COUPON_TRANSFER_SEND:"\ucfe0\ud3f0 \uc1a1\uae08",COUPON_TRANSFER_RECEIVE:"\ucfe0\ud3f0 \uc218\uc2e0",ITEM_PURCHASE:"\uc544\uc774\ud15c \uad6c\ub9e4",ITEM_USE:"\uc544\uc774\ud15c \uc0ac\uc6a9",ITEM_SELL:"\uc544\uc774\ud15c \ud310\ub9e4",ITEM_MARKET_LIST:"\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d",ITEM_MARKET_BUY:"\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4",CASH_TRANSFER_SEND:"\uc1a1\uae08",CASH_TRANSFER_RECEIVE:"\uc1a1\uae08 \uc218\uc2e0",CASH_WITHDRAW:"\ucd9c\uae08",CASH_DEPOSIT:"\uc785\uae08",STOCK_BUY:"\uc8fc\uc2dd \ub9e4\uc218",STOCK_SELL:"\uc8fc\uc2dd \ub9e4\ub3c4",STOCK_TAX:"\uc8fc\uc2dd \uac70\ub798\uc138",TAX_PAYMENT:"\uc8fc\uc2dd \uac70\ub798\uc138",ADMIN_CASH_SEND:"\uad00\ub9ac\uc790 \uc9c0\uae09",ADMIN_CASH_TAKE:"\uad00\ub9ac\uc790 \ud68c\uc218",ADMIN_COUPON_GIVE:"\uad00\ub9ac\uc790 \ucfe0\ud3f0 \uc9c0\uae09",ADMIN_COUPON_TAKE:"\uad00\ub9ac\uc790 \ucfe0\ud3f0 \ud68c\uc218",TASK_COMPLETE:"\uacfc\uc81c \uc644\ub8cc",GAME_WIN:"\uac8c\uc784 \uc2b9\ub9ac",GAME_LOSE:"\uac8c\uc784 \ud328\ubc30"}[s]||s)}),(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.userName||"\uc54c \uc218 \uc5c6\uc74c"}),(0,g.jsx)("span",{className:"text-xs text-gray-500",children:w(e.timestamp)})]}),(0,g.jsx)("p",{className:"text-gray-800 text-sm mb-2 font-medium",children:e.description||"\uc124\uba85 \uc5c6\uc74c"}),e.metadata&&Object.keys(e.metadata).length>0&&(0,g.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200",children:[e.metadata.activity&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\ud65c\ub3d9:"})," ",e.metadata.activity]}),e.metadata.reason&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\uc0ac\uc720:"})," ",e.metadata.reason]}),e.metadata.itemName&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\uc544\uc774\ud15c:"})," ",e.metadata.itemName]}),e.metadata.quantity&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\uc218\ub7c9:"})," ",e.metadata.quantity]}),void 0!==e.metadata.amount&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\uae08\uc561:"})," ",e.metadata.amount.toLocaleString(),"\uc6d0"]}),void 0!==e.metadata.couponAmount&&(0,g.jsxs)("div",{className:"mb-1",children:[(0,g.jsx)("strong",{children:"\ucfe0\ud3f0:"})," ",e.metadata.couponAmount,"\uac1c"]})]})]})})},e.id||t);var s}),v&&(0,g.jsx)("div",{className:"text-center py-4",children:(0,g.jsx)("button",{onClick:M,disabled:h,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300",children:h?"\ub85c\ub529 \uc911...":"\ub354\ubcf4\uae30"})})]})}):null]})}}}]);
//# sourceMappingURL=5967.4d335876.chunk.js.map