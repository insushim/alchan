{"version":3,"file":"static/js/510.b68ccd10.chunk.js","mappings":"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","sources":["components/LoginWarning.js","components/CouponGoal.js","pages/coupon/CouponGoalPage.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h3>\r\n      <p>ì•„ì´í…œì„ êµ¬ë§¤í•˜ê±°ë‚˜ ì‚¬ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/CouponGoal.js\r\nimport React from \"react\";\r\n\r\n// ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ ì»´í¬ë„ŒíŠ¸\r\nconst CircularProgress = ({ percentage, size = 140, strokeWidth = 12, color, children }) => {\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = radius * 2 * Math.PI;\r\n  const offset = circumference - (percentage / 100) * circumference;\r\n\r\n  return (\r\n    <div className=\"relative\" style={{ width: size, height: size }}>\r\n      <svg width={size} height={size} style={{ transform: \"rotate(-90deg)\" }}>\r\n        {/* ë°°ê²½ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke=\"rgba(255, 255, 255, 0.1)\"\r\n          strokeWidth={strokeWidth}\r\n        />\r\n        {/* í”„ë¡œê·¸ë ˆìŠ¤ ì› */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke={color}\r\n          strokeWidth={strokeWidth}\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={offset}\r\n          strokeLinecap=\"round\"\r\n          style={{ transition: \"stroke-dashoffset 0.5s ease\" }}\r\n        />\r\n      </svg>\r\n      {/* ì¤‘ì•™ ì½˜í…ì¸  */}\r\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function CouponGoal({\r\n  classCouponGoal,\r\n  goalProgress,\r\n  myContribution,\r\n  currentCoupons,\r\n  couponValue,\r\n  setShowDonateModal,\r\n  setShowSellCouponModal,\r\n  setShowDonationHistoryModal,\r\n  setShowGiftCouponModal,\r\n  goalAchieved,\r\n  resetGoalButton,\r\n  isResettingGoal,\r\n}) {\r\n  const validClassCouponGoal =\r\n    typeof classCouponGoal === \"number\" && classCouponGoal > 0\r\n      ? classCouponGoal\r\n      : 1;\r\n\r\n  const goalPercentage = Math.min(\r\n    Math.round((goalProgress / validClassCouponGoal) * 100),\r\n    100\r\n  );\r\n\r\n  const myContributionPercentage =\r\n    validClassCouponGoal > 0\r\n      ? Math.min(Math.round((myContribution / validClassCouponGoal) * 100), 100)\r\n      : 0;\r\n\r\n  const mainColor = goalAchieved ? \"#10b981\" : \"#6366f1\";\r\n\r\n  return (\r\n    <div\r\n      className=\"class-coupon-goal p-6 rounded-2xl relative overflow-hidden\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        boxShadow: goalAchieved\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.25)\"\r\n          : \"0 4px 20px rgba(0, 255, 242, 0.15)\",\r\n        border: goalAchieved ? \"2px solid #10b981\" : \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        backdropFilter: \"blur(10px)\",\r\n      }}\r\n    >\r\n      {/* ë°°ê²½ ì¥ì‹ */}\r\n      <div\r\n        className=\"absolute -top-12 -right-12 w-36 h-36 rounded-full\"\r\n        style={{\r\n          background: goalAchieved\r\n            ? \"radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%)\"\r\n            : \"radial-gradient(circle, rgba(99,102,241,0.1) 0%, transparent 70%)\",\r\n        }}\r\n      />\r\n\r\n      {/* í—¤ë” */}\r\n      <div className=\"flex justify-between items-center mb-5\">\r\n        <div className=\"flex items-center gap-2.5\">\r\n          <span className=\"text-3xl\">ğŸ¯</span>\r\n          <h3\r\n            className=\"text-xl font-bold m-0\"\r\n            style={{\r\n              color: \"#e8e8ff\",\r\n              textShadow: \"0 0 5px rgba(0, 255, 242, 0.5)\",\r\n            }}\r\n          >\r\n            í•™ê¸‰ ì¿ í° ëª©í‘œ\r\n          </h3>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 items-center\">\r\n          {goalAchieved && (\r\n            <span\r\n              className=\"text-white px-3.5 py-1.5 rounded-2xl text-sm font-bold\"\r\n              style={{\r\n                background: \"linear-gradient(135deg, #10b981, #059669)\",\r\n                boxShadow: \"0 2px 8px rgba(16, 185, 129, 0.4)\",\r\n                animation: \"pulse 2s infinite\",\r\n              }}\r\n            >\r\n              ğŸ‰ ëª©í‘œ ë‹¬ì„±!\r\n            </span>\r\n          )}\r\n          {resetGoalButton && (\r\n            <button\r\n              onClick={resetGoalButton}\r\n              disabled={isResettingGoal}\r\n              className=\"text-white border-none rounded-xl px-3 py-1.5 text-xs font-semibold\"\r\n              style={{\r\n                backgroundColor: isResettingGoal ? \"#9ca3af\" : \"#ef4444\",\r\n                cursor: isResettingGoal ? \"not-allowed\" : \"pointer\",\r\n                opacity: isResettingGoal ? 0.7 : 1,\r\n              }}\r\n            >\r\n              {isResettingGoal ? \"ì´ˆê¸°í™” ì¤‘...\" : \"ì´ˆê¸°í™”\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ë©”ì¸ í”„ë¡œê·¸ë ˆìŠ¤ ì˜ì—­ */}\r\n      <div className=\"flex items-center justify-center gap-7 py-5 flex-wrap\">\r\n        {/* í•™ê¸‰ ëª©í‘œ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div className=\"text-center\">\r\n          <CircularProgress\r\n            percentage={goalPercentage}\r\n            size={150}\r\n            strokeWidth={14}\r\n            color={mainColor}\r\n          >\r\n            <div className=\"text-3xl font-extrabold\" style={{ color: mainColor }}>\r\n              {goalPercentage}%\r\n            </div>\r\n            <div className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}>\r\n              ë‹¬ì„±ë¥ \r\n            </div>\r\n          </CircularProgress>\r\n          <div className=\"mt-3\">\r\n            <div className=\"text-2xl font-extrabold\" style={{ color: \"#e8e8ff\" }}>\r\n              {(goalProgress || 0).toLocaleString()}\r\n              <span className=\"text-sm font-medium\" style={{ color: \"#a0a0c0\" }}> / {validClassCouponGoal.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"text-xs mt-0.5\" style={{ color: \"#6b7280\" }}>í•™ê¸‰ ì „ì²´ ê¸°ë¶€ëŸ‰</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ê¸°ì—¬ë„ ì›í˜• í”„ë¡œê·¸ë ˆìŠ¤ */}\r\n        <div className=\"text-center\">\r\n          <CircularProgress\r\n            percentage={myContributionPercentage}\r\n            size={120}\r\n            strokeWidth={10}\r\n            color=\"#f59e0b\"\r\n          >\r\n            <div className=\"text-2xl font-extrabold\" style={{ color: \"#f59e0b\" }}>\r\n              {myContributionPercentage}%\r\n            </div>\r\n            <div className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}>\r\n              ë‚´ ê¸°ì—¬\r\n            </div>\r\n          </CircularProgress>\r\n          <div className=\"mt-3\">\r\n            <div className=\"text-lg font-bold\" style={{ color: \"#e8e8ff\" }}>\r\n              {(myContribution || 0).toLocaleString()}\r\n              <span className=\"text-xs font-medium\" style={{ color: \"#a0a0c0\" }}> ì¿ í°</span>\r\n            </div>\r\n            <div className=\"text-xs mt-0.5\" style={{ color: \"#6b7280\" }}>ë‚´ê°€ ê¸°ë¶€í•œ ì¿ í°</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ë‚´ ë³´ìœ ëŸ‰ ì¹´ë“œ */}\r\n        <div\r\n          className=\"rounded-2xl p-5 text-center min-w-[130px]\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.1)\",\r\n            border: \"1px solid rgba(251, 191, 36, 0.3)\",\r\n          }}\r\n        >\r\n          <div className=\"text-3xl mb-2\">ğŸ«</div>\r\n          <div className=\"text-3xl font-extrabold\" style={{ color: \"#fbbf24\", textShadow: \"0 0 10px rgba(251, 191, 36, 0.3)\" }}>\r\n            {(currentCoupons || 0).toLocaleString()}\r\n          </div>\r\n          <div className=\"text-xs font-semibold mt-1\" style={{ color: \"#fcd34d\" }}>\r\n            ë³´ìœ  ì¿ í°\r\n          </div>\r\n          <div className=\"text-xs mt-2 px-2 py-1 rounded-lg\" style={{ color: \"#fcd34d\", background: \"rgba(0,0,0,0.3)\" }}>\r\n            1ì¿ í° = {typeof couponValue === \"number\" ? couponValue.toLocaleString() : \"0\"}ì›\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}\r\n      <div className=\"grid grid-cols-4 gap-2 mt-5\">\r\n        <button\r\n          onClick={() => setShowDonateModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(99, 102, 241, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ’°</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° ì‘ëª¨</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowSellCouponModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f87171 0%, #ef4444 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(239, 68, 68, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ’µ</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° íŒë§¤</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowGiftCouponModal(true)}\r\n          className=\"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #34d399 0%, #10b981 100%)\",\r\n            boxShadow: \"0 4px 12px rgba(16, 185, 129, 0.35)\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ</span>\r\n          <span className=\"text-white text-sm font-bold\">ì¿ í° ì„ ë¬¼</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowDonationHistoryModal(true)}\r\n          className=\"rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all\"\r\n          style={{\r\n            background: \"linear-gradient(135deg, #374151 0%, #1f2937 100%)\",\r\n            border: \"1px solid #4b5563\",\r\n          }}\r\n        >\r\n          <span className=\"text-2xl\">ğŸ“‹</span>\r\n          <span className=\"text-sm font-bold\" style={{ color: \"#4b5563\" }}>ê¸°ë¶€ ë‚´ì—­</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì¿ í° ëª©í‘œ ê¸€ì”¨ í¬ê¸° ì „ì²´ í™•ëŒ€ */}\r\n      <style>{`\r\n        .class-coupon-goal { font-size: 1.05rem; }\r\n        .class-coupon-goal h3 { font-size: 1.3rem !important; }\r\n        .class-coupon-goal .text-xs { font-size: 0.85rem !important; }\r\n        .class-coupon-goal .text-sm { font-size: 0.95rem !important; }\r\n        .class-coupon-goal .text-2xl { font-size: 1.6rem !important; }\r\n        .class-coupon-goal .text-3xl { font-size: 2rem !important; }\r\n      `}</style>\r\n\r\n      {/* ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ */}\r\n      <style>{`\r\n        @keyframes pulse {\r\n          0%, 100% { transform: scale(1); }\r\n          50% { transform: scale(1.05); }\r\n        }\r\n        .class-coupon-goal button:hover {\r\n          transform: translateY(-2px);\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","// src/pages/coupon/CouponGoalPage.js - ì¿ í° ëª©í‘œ ì „ìš© í˜ì´ì§€\r\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  runTransaction,\r\n} from \"../../firebase\";\r\nimport CouponGoal from \"../../components/CouponGoal\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { safeTimestampToDate, getCachedFirestoreData, setCachedFirestoreData } from '../../utils/firestoreHelpers';\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nexport default function CouponGoalPage() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users,\r\n    classmates,\r\n    allClassMembers,\r\n    loading: authLoading,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false);\r\n  const loadGoalDataRef = useRef(null); // ğŸ”¥ loadGoalData í•¨ìˆ˜ë¥¼ ì €ì¥í•  ref\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n\r\n  const donateCouponFunction = useMemo(() => httpsCallable(functions, 'donateCoupon'), []);\r\n  const sellCouponFunction = useMemo(() => httpsCallable(functions, 'sellCoupon'), []);\r\n  const giftCouponFunction = useMemo(() => httpsCallable(functions, 'giftCoupon'), []);\r\n\r\n  const CACHE_DURATION = 5 * 60 * 1000;\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  // ğŸ”¥ [ë²„ê·¸ ìˆ˜ì •] Firestoreì—ì„œ ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ\r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[CouponGoalPage] ì¿ í° ê°€ì¹˜ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] = useState(false);\r\n\r\n  // ğŸ”¥ [ìµœì í™”] ë°ì´í„° ì²˜ë¦¬ í—¬í¼ í•¨ìˆ˜ (ìºì‹œ/Firestore ê³µìš©)\r\n  const processGoalData = useCallback((goalData) => {\r\n    setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n    setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n    // ê¸°ë¶€ ë‚´ì—­ ì²˜ë¦¬ - timestamp ì¼ê´€ì„± ìœ ì§€\r\n    const donations = Array.isArray(goalData.donations)\r\n      ? goalData.donations.map((donation) => {\r\n        let processedTimestamp;\r\n        if (donation.timestamp && donation.timestamp.toDate) {\r\n          processedTimestamp = donation.timestamp.toDate().toISOString();\r\n        } else if (donation.timestamp && donation.timestamp.seconds) {\r\n          processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n        } else if (donation.timestampISO) {\r\n          processedTimestamp = donation.timestampISO;\r\n        } else if (typeof donation.timestamp === 'string') {\r\n          processedTimestamp = donation.timestamp;\r\n        } else {\r\n          processedTimestamp = new Date().toISOString();\r\n        }\r\n\r\n        return {\r\n          ...donation,\r\n          amount: Number(donation.amount) || 0,\r\n          timestamp: processedTimestamp,\r\n          userId: donation.userId || '',\r\n          userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n          message: donation.message || '',\r\n          classCode: donation.classCode || currentUserClassCode,\r\n        };\r\n      })\r\n      : [];\r\n\r\n    setGoalDonations(donations);\r\n\r\n    // ë‚´ ê¸°ì—¬ë„ ê³„ì‚°\r\n    const myDonations = donations.filter(d => d.userId === userId);\r\n    const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n    setMyContribution(myTotal);\r\n  }, [currentUserClassCode, userId]);\r\n\r\n  // ğŸ”¥ loadGoalData í•¨ìˆ˜ - useCallback ì œê±°í•˜ê³  ì¼ë°˜ í•¨ìˆ˜ë¡œ ë³€ê²½\r\n  const loadGoalData = async (forceRefresh = false) => {\r\n    if (!userId || !currentUserClassCode || !currentGoalId) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (loadingRef.current) {\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // ğŸ”¥ [ìµœì í™”] ìºì‹œ ìš°ì„  ë¡œë“œ - Firestore ì½ê¸° ì ˆê°\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      if (!forceRefresh) {\r\n        const cachedData = getCachedFirestoreData(cacheKey, userId, CACHE_DURATION);\r\n        if (cachedData) {\r\n          processGoalData(cachedData);\r\n          setAssetsLoading(false);\r\n          loadingRef.current = false;\r\n          return;\r\n        }\r\n      }\r\n\r\n      // ğŸ”¥ Firestoreì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        // ğŸ”¥ [ìµœì í™”] ê³µìš© í—¬í¼ í•¨ìˆ˜ë¡œ ì²˜ë¦¬\r\n        processGoalData(goalData);\r\n\r\n        // ğŸ”¥ ìºì‹œì— ì €ì¥\r\n        const cacheKey = `goal_${currentGoalId}`;\r\n        setCachedFirestoreData(cacheKey, userId, goalData);\r\n      } else {\r\n        logger.warn('[CouponGoalPage] ëª©í‘œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');\r\n      }\r\n    } catch (error) {\r\n      logger.error('[CouponGoalPage] ëª©í‘œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ refì— loadGoalData í•¨ìˆ˜ ì €ì¥\r\n  loadGoalDataRef.current = loadGoalData;\r\n\r\n  // ğŸ”¥ ì´ˆê¸° ë¡œë“œ useEffect - loadGoalDataRef ì‚¬ìš©\r\n  useEffect(() => {\r\n    if (!authLoading && user && currentUserClassCode && currentGoalId) {\r\n      if (loadGoalDataRef.current) {\r\n        loadGoalDataRef.current();\r\n      }\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user, currentUserClassCode, currentGoalId]);\r\n\r\n  // ğŸ”¥ [ì œê±°] userDoc.myContribution ì‚¬ìš© ì¤‘ë‹¨ - donations ë°°ì—´ì—ì„œ ì§ì ‘ ê³„ì‚°\r\n  // useEffect(() => {\r\n  //   if (userDoc) {\r\n  //     setMyContribution(userDoc.myContribution || 0);\r\n  //   }\r\n  // }, [userDoc]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode || !userDoc) {\r\n      alert(\"ì‚¬ìš©ì ë˜ëŠ” í•™ê¸‰ ì •ë³´ê°€ ì—†ì–´ ê¸°ë¶€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ì¿ í° ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return false;\r\n    }\r\n\r\n    // ğŸ”¥ ì¿ í° ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalProgress(prev => prev + donationAmount);\r\n\r\n    // ğŸ”¥ ë¡œë”© ìƒíƒœ í‘œì‹œ\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      // Call the server function in the background\r\n      const result = await donateCouponFunction({ amount: donationAmount, message: memo });\r\n\r\n      // ğŸ”¥ ìºì‹œ ë¬´íš¨í™”\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      // ğŸ”¥ ì¦‰ì‹œ ìµœì‹  ë°ì´í„° ë¡œë“œ\r\n      loadingRef.current = false;\r\n      if (loadGoalDataRef.current) {\r\n        await loadGoalDataRef.current();\r\n      }\r\n\r\n      alert(`${donationAmount} ì¿ í° ê¸°ë¶€ ì™„ë£Œ!`);\r\n      setShowDonateModal(false);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('[CouponGoalPage] ê¸°ë¶€ ì˜¤ë¥˜ (ìƒì„¸):', {\r\n        error,\r\n        message: error.message,\r\n        code: error.code,\r\n        details: error.details,\r\n        stack: error.stack\r\n      });\r\n      alert(`ê¸°ë¶€ ì˜¤ë¥˜: ${error.message}`);\r\n\r\n      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"í•™ê¸‰ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n        setCachedFirestoreData(`goal_${currentGoalId}`, userId, latestGoalData);\r\n\r\n        alert(`ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ!\\nëª©í‘œ ì§„í–‰ë¥ : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\nê¸°ë¶€ ë‚´ì—­: ${freshDonations.length}ê°œ`);\r\n      } else {\r\n        alert(\"ëª©í‘œ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.\");\r\n      }\r\n    } catch (error) {\r\n      alert(`ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    logger.log('[CouponGoalPage Debug]', debugInfo);\r\n    alert(`ë””ë²„ê·¸ ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\nê¸°ë¶€ ë‚´ì—­: ${goalDonations.length}ê°œ\\nëª©í‘œ ì§„í–‰ë¥ : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"ê´€ë¦¬ìë§Œ ì´ˆê¸°í™” ê°€ëŠ¥í•©ë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"í•™ê¸‰ ì½”ë“œë‚˜ ëª©í‘œ ì •ë³´ê°€ ì—†ì–´ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!window.confirm(`ì •ë§ë¡œ ${currentUserClassCode} í•™ê¸‰ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      return;\r\n    }\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`í•™ê¸‰(${currentUserClassCode})ì˜ ì¿ í° ëª©í‘œì™€ ê¸°ì—¬ ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n    } catch (error) {\r\n      alert(`ëª©í‘œ ì´ˆê¸°í™” ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ìœ íš¨í•œ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({\r\n        coupons: -amount,\r\n        cash: amount * couponValue\r\n      });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n      alert(`${amount}ê°œ ì¿ í°ì„ íŒë§¤í–ˆìŠµë‹ˆë‹¤.`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n\r\n      // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n      setTimeout(() => {\r\n        loadingRef.current = false;\r\n        if (loadGoalDataRef.current) {\r\n          loadGoalDataRef.current();\r\n        }\r\n      }, 500);\r\n    } catch (error) {\r\n      alert(`íŒë§¤ ì˜¤ë¥˜: ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    logger.log(\"handleGiftCoupon called\"); // í•¨ìˆ˜ í˜¸ì¶œ í™•ì¸ ë¡œê·¸\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"ë°›ëŠ” ì‚¬ëŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"ì˜¬ë°”ë¥¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount });\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}ë‹˜ì—ê²Œ ì¿ í° ${amount}ê°œë¥¼ ì„ ë¬¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n        alert(\"ì¿ í° ì„ ë¬¼ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n\r\n        // ğŸ”¥ refë¥¼ í†µí•´ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ\r\n        setTimeout(() => {\r\n          loadingRef.current = false;\r\n          if (loadGoalDataRef.current) {\r\n            loadGoalDataRef.current();\r\n          }\r\n        }, 500);\r\n      } catch (error) {\r\n        alert(`ì„ ë¬¼ ì˜¤ë¥˜: ${error.message}`);\r\n        // ë¡¤ë°±\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n        í•™ê¸‰ ì½”ë“œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì—¬ í•™ê¸‰ ì½”ë“œë¥¼ í• ë‹¹ë°›ìœ¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        <h2 className=\"text-2xl font-bold text-emerald-400 border-b-2 border-emerald-900 pb-3 mb-6\" style={{ textShadow: \"0 0 10px rgba(52, 211, 153, 0.3)\" }}>\r\n          ğŸ¯ ì¿ í° ëª©í‘œ (í•™ê¸‰: {currentUserClassCode})\r\n        </h2>\r\n\r\n        {currentUserClassCode && currentGoalId && (\r\n          <>\r\n            <CouponGoal\r\n              classCouponGoal={classCouponGoal}\r\n              goalProgress={goalProgress}\r\n              myContribution={myContribution}\r\n              currentCoupons={Number(userDoc?.coupons) || 0}\r\n              couponValue={couponValue}\r\n              setShowDonateModal={setShowDonateModal}\r\n              setShowSellCouponModal={setShowSellCouponModal}\r\n              setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n              setShowGiftCouponModal={setShowGiftCouponModal}\r\n              goalAchieved={goalAchieved}\r\n              resetGoalButton={\r\n                userDoc?.isAdmin || userDoc?.isSuperAdmin ? resetCouponGoal : null\r\n              }\r\n              isResettingGoal={isResettingGoal}\r\n            />\r\n\r\n            <div\r\n              style={{\r\n                marginTop: \"20px\",\r\n                padding: \"15px\",\r\n                backgroundColor: \"rgba(20, 20, 35, 0.85)\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.15)\",\r\n              }}\r\n            >\r\n              <h4\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  color: \"#00fff2\",\r\n                  marginBottom: \"10px\",\r\n                  fontWeight: \"600\",\r\n                }}\r\n              >\r\n                ğŸ”§ ë°ì´í„° ê´€ë¦¬ ë„êµ¬\r\n              </h4>\r\n              <div style={{ display: \"flex\", gap: \"10px\", flexWrap: \"wrap\" }}>\r\n                <button\r\n                  onClick={forceRefreshGoalData}\r\n                  disabled={assetsLoading}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#17a2b8\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ“Š ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n                <button\r\n                  onClick={showDebugInfo}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#6c757d\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ” ë””ë²„ê·¸ ì •ë³´ í™•ì¸\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    localStorage.clear();\r\n                    alert(\"ë¡œì»¬ ìºì‹œê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.\");\r\n                    window.location.reload();\r\n                  }}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    backgroundColor: \"#dc3545\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    fontWeight: \"500\",\r\n                  }}\r\n                >\r\n                  ğŸ—‘ï¸ ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\r\n                </button>\r\n              </div>\r\n              <p\r\n                style={{\r\n                  fontSize: \"11px\",\r\n                  color: \"#868e96\",\r\n                  marginTop: \"8px\",\r\n                  marginBottom: \"0\",\r\n                  lineHeight: \"1.4\",\r\n                }}\r\n              >\r\n                â€¢ ê¸°ë¶€ ë‚´ì—­ì´ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©´ \"ëª©í‘œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”\r\n                <br />\r\n                â€¢ ë¬¸ì œê°€ ì§€ì†ë˜ë©´ \"ìºì‹œ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨\"ì„ ì‹œë„í•´ë³´ì„¸ìš”\r\n                <br />â€¢ í˜„ì¬ ìƒíƒœ: ê¸°ë¶€ ë‚´ì—­ {goalDonations.length}ê°œ, ëª©í‘œ ì§„í–‰ë¥ {\" \"}\r\n                {goalProgress}/{classCouponGoal}\r\n              </p>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {showDonateModal && currentUserClassCode && currentGoalId && (\r\n          <DonateCouponModal\r\n            showDonateModal={showDonateModal}\r\n            setShowDonateModal={setShowDonateModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            onDonate={handleDonateCoupon}\r\n            classCode={currentUserClassCode}\r\n          />\r\n        )}\r\n        {showSellCouponModal && (\r\n          <SellCouponModal\r\n            showSellCouponModal={showSellCouponModal}\r\n            setShowSellCouponModal={setShowSellCouponModal}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            couponValue={couponValue}\r\n            sellAmount={sellAmount}\r\n            setSellAmount={setSellAmount}\r\n            SellCoupon={handleSellCoupon}\r\n          />\r\n        )}\r\n        {showGiftCouponModal && (\r\n          <GiftCouponModal\r\n            showGiftCouponModal={showGiftCouponModal}\r\n            setShowGiftCouponModal={setShowGiftCouponModal}\r\n            recipients={classmates}\r\n            giftRecipient={giftRecipient}\r\n            setGiftRecipient={setGiftRecipient}\r\n            giftAmount={giftAmount}\r\n            setGiftAmount={setGiftAmount}\r\n            handleGiftCoupon={handleGiftCoupon}\r\n            currentCoupons={Number(userDoc?.coupons) || 0}\r\n            userId={userId}\r\n          />\r\n        )}\r\n        {showDonationHistoryModal && currentUserClassCode && currentGoalId && (\r\n          <DonationHistoryModal\r\n            showDonationHistoryModal={showDonationHistoryModal}\r\n            setShowDonationHistoryModal={setShowDonationHistoryModal}\r\n            students={allClassMembers || []}\r\n            classCode={currentUserClassCode}\r\n            donations={goalDonations}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","CircularProgress","_ref","percentage","size","strokeWidth","color","radius","circumference","Math","PI","offset","style","width","height","transform","cx","cy","r","fill","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","transition","CouponGoal","_ref2","classCouponGoal","goalProgress","myContribution","currentCoupons","couponValue","setShowDonateModal","setShowSellCouponModal","setShowDonationHistoryModal","setShowGiftCouponModal","goalAchieved","resetGoalButton","isResettingGoal","validClassCouponGoal","goalPercentage","min","round","myContributionPercentage","mainColor","backgroundColor","boxShadow","border","backdropFilter","background","textShadow","animation","onClick","disabled","cursor","opacity","toLocaleString","CouponGoalPage","user","userDoc","users","classmates","allClassMembers","loading","authLoading","optimisticUpdate","useAuth","userId","uid","currentUserClassCode","classCode","assetsLoading","setAssetsLoading","useState","loadingRef","useRef","loadGoalDataRef","goalDonations","setGoalDonations","donateCouponFunction","useMemo","httpsCallable","functions","sellCouponFunction","giftCouponFunction","currentGoalId","concat","setClassCouponGoal","setCouponValue","useEffect","async","settingsRef","doc","db","settingsSnap","getDoc","exists","settingsData","data","Number","error","logger","loadCouponValueFromSettings","setGoalProgress","setMyContribution","setGoalAchieved","setIsResettingGoal","showDonateModal","showSellCouponModal","sellAmount","setSellAmount","showGiftCouponModal","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","showDonationHistoryModal","processGoalData","useCallback","goalData","targetAmount","progress","donations","Array","isArray","map","donation","processedTimestamp","timestamp","toDate","toISOString","seconds","Date","timestampISO","_objectSpread","amount","userName","message","myTotal","filter","d","reduce","sum","current","forceRefresh","arguments","length","undefined","cacheKey","cachedData","getCachedFirestoreData","goalDocRef","goalDocSnap","setCachedFirestoreData","warn","AlchanLoading","_Fragment","coupons","isAdmin","isSuperAdmin","window","confirm","batch","writeBatch","goalRef","usersQuery","query","collection","where","getDocs","forEach","userDocument","userRef","id","update","updatedAt","serverTimestamp","donationCount","resetAt","resetBy","commit","localStorage","removeItem","alert","marginTop","padding","borderRadius","fontSize","marginBottom","fontWeight","display","gap","flexWrap","latestGoalData","freshDonations","showDebugInfo","debugInfo","donationsCount","userCoupons","userCash","cash","log","clear","location","reload","lineHeight","DonateCouponModal","onDonate","memo","donationAmount","parseInt","isNaN","prev","code","details","stack","SellCouponModal","SellCoupon","setTimeout","GiftCouponModal","recipients","handleGiftCoupon","recipientUser","find","u","name","recipientId","DonationHistoryModal","students","justifyContent","alignItems"],"ignoreList":[],"sourceRoot":""}