{"version":3,"file":"static/js/612.af48c7ca.chunk.js","mappings":"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","sources":["hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/helpContent.js","components/WelcomePopup.js","components/HelpButton.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","pages/dashboard/Dashboard.js","components/AlchanLayout.js","components/modals/DonationHistoryModal.js","utils/avatarSystem.js","components/modals/DonateCouponModal.js","components/Avatar.js","utils/achievementSystem.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","utils/levelSystem.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","components/modals/TransferModal.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Gift, Settings, LayoutDashboard\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    const handleAppInstalled = () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    };\r\n    window.addEventListener('appinstalled', handleAppInstalled);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n      window.removeEventListener('appinstalled', handleAppInstalled);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (1 )\r\n              const lastUpdated = localStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 60 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    // localStorage    (     )\r\n    localStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/utils/helpContent.js\n//     +    \n\nexport const PAGE_HELP = {\n  '/dashboard/tasks': {\n    title: ' ',\n    icon: '',\n    description: '     !',\n    tips: [\n      '  (/)   ',\n      '   ',\n      '        ',\n    ],\n  },\n  '/my-assets': {\n    title: ' ',\n    icon: '',\n    description: '     .',\n    tips: [\n      '     ',\n      '     ',\n      '     ',\n    ],\n  },\n  '/coupon-goal': {\n    title: ' ',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '     ',\n      '    ',\n    ],\n  },\n  '/my-profile': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '   ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/learning-games/omok': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      ', ,  5   !',\n      '  ',\n    ],\n  },\n  '/learning-games/typing': {\n    title: ' ',\n    icon: '',\n    description: '  !',\n    tips: [\n      '   ',\n      '    ',\n    ],\n  },\n  '/learning-games/science': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '   ',\n      '   !',\n    ],\n  },\n  '/item-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '  \" \" ',\n      '   !',\n    ],\n  },\n  '/my-items': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '      ',\n      '       ',\n    ],\n  },\n  '/personal-shop': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '     ',\n      '     ',\n      '  ',\n    ],\n  },\n  '/banking': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '   ',\n      '    ',\n      '     ',\n    ],\n  },\n  '/stock-trading': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      '    ',\n      '   ',\n      '  ',\n    ],\n  },\n  '/auction': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '    ',\n      '   ',\n      '   ',\n    ],\n  },\n  '/real-estate': {\n    title: '',\n    icon: '',\n    description: '    !',\n    tips: [\n      '      ',\n      '    ',\n    ],\n  },\n  '/government': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '  ',\n    ],\n  },\n  '/national-assembly': {\n    title: '',\n    icon: '',\n    description: '  !',\n    tips: [\n      '  /    ',\n      '     ',\n      '   ',\n    ],\n  },\n  '/court': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/police': {\n    title: '',\n    icon: '',\n    description: '   .',\n    tips: [\n      '   ',\n      '     ',\n    ],\n  },\n  '/learning-board': {\n    title: ' ',\n    icon: '',\n    description: '    .',\n    tips: [\n      '    ',\n      '   ',\n    ],\n  },\n  '/learning-board/music-request': {\n    title: ' ',\n    icon: '',\n    description: '   !',\n    tips: [\n      'YouTube      ',\n      '      ',\n    ],\n  },\n};\n\n//     \nexport const WELCOME_GUIDE = {\n  title: '   ! ',\n  subtitle: '    ?',\n  sections: [\n    {\n      icon: '',\n      title: ' ',\n      description: '      .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ' ,  ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: '     .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: ' ,   ,  .',\n    },\n    {\n      icon: '',\n      title: ' ',\n      description: ', ,       .',\n    },\n    {\n      icon: '',\n      title: '',\n      description: '   ?       .',\n    },\n  ],\n};\n\n//    \nexport const getHelpContent = (pathname) => {\n  //   \n  if (PAGE_HELP[pathname]) return PAGE_HELP[pathname];\n\n  //    (: /music-room/xxx)\n  const matchedKey = Object.keys(PAGE_HELP).find(key =>\n    pathname.startsWith(key)\n  );\n  return matchedKey ? PAGE_HELP[matchedKey] : null;\n};\n","// src/components/WelcomePopup.js\n//      \n\nimport React, { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport { WELCOME_GUIDE } from '../utils/helpContent';\n\nconst STORAGE_KEY_NEVER = 'alchan_welcome_never_show';\nconst STORAGE_KEY_TODAY = 'alchan_welcome_closed_date';\n\nfunction shouldShowPopup() {\n  try {\n    // \"  \" \n    if (localStorage.getItem(STORAGE_KEY_NEVER) === 'true') return false;\n\n    // \" \" \n    const closedDate = localStorage.getItem(STORAGE_KEY_TODAY);\n    if (closedDate) {\n      const today = new Date().toISOString().split('T')[0];\n      if (closedDate === today) return false;\n    }\n\n    return true;\n  } catch {\n    return true;\n  }\n}\n\nexport default function WelcomePopup() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (shouldShowPopup()) {\n      const timer = setTimeout(() => setIsVisible(true), 800);\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  if (!isVisible) return null;\n\n  const handleNeverShow = () => {\n    try { localStorage.setItem(STORAGE_KEY_NEVER, 'true'); } catch {}\n    setIsVisible(false);\n  };\n\n  const handleCloseToday = () => {\n    try {\n      const today = new Date().toISOString().split('T')[0];\n      localStorage.setItem(STORAGE_KEY_TODAY, today);\n    } catch {}\n    setIsVisible(false);\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9998] p-4 animate-fadeIn\"\n      onClick={handleCloseToday}\n    >\n      <div\n        className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-lg max-h-[85vh] flex flex-col shadow-[0_0_40px_rgba(0,255,242,0.15)] animate-slideUp\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/*  */}\n        <div className=\"relative px-6 pt-6 pb-4 border-b border-slate-700/50 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"absolute right-4 top-4 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n          <h2 className=\"text-xl font-bold text-white pr-8\">\n            {WELCOME_GUIDE.title}\n          </h2>\n          <p className=\"text-sm text-slate-400 mt-1\">\n            {WELCOME_GUIDE.subtitle}\n          </p>\n        </div>\n\n        {/*   */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3 scrollbar-hide\">\n          {WELCOME_GUIDE.sections.map((section, index) => (\n            <div\n              key={index}\n              className=\"flex items-start gap-3.5 bg-[#0a0a12]/60 rounded-xl px-4 py-3.5 border border-cyan-900/20 hover:border-cyan-500/30 transition-colors\"\n            >\n              <span className=\"text-2xl shrink-0 mt-0.5\">{section.icon}</span>\n              <div>\n                <h4 className=\"text-sm font-bold text-white mb-0.5\">\n                  {section.title}\n                </h4>\n                <p className=\"text-xs text-slate-400 leading-relaxed\">\n                  {section.description}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/*    */}\n        <div className=\"px-6 py-4 border-t border-slate-700/50 space-y-2 shrink-0\">\n          <button\n            onClick={handleCloseToday}\n            className=\"w-full py-2.5 rounded-xl bg-cyan-500/20 text-cyan-400 text-sm font-bold border border-cyan-500/30 hover:bg-cyan-500/30 transition-colors\"\n          >\n             \n          </button>\n          <button\n            onClick={handleNeverShow}\n            className=\"w-full py-2.5 rounded-xl bg-slate-800/50 text-slate-400 text-sm font-medium border border-slate-700/50 hover:bg-slate-700/50 hover:text-slate-300 transition-colors\"\n          >\n              \n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// src/components/HelpButton.js\n//    +   (  )\n\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { HelpCircle, X } from 'lucide-react';\nimport { getHelpContent } from '../utils/helpContent';\n\nexport default function HelpButton() {\n  const [isOpen, setIsOpen] = useState(false);\n  const location = useLocation();\n  const helpData = getHelpContent(location.pathname);\n\n  //     \n  if (!helpData) return null;\n\n  return (\n    <>\n      {/*    -    */}\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-24 md:bottom-6 right-4 z-40 w-11 h-11 rounded-full bg-indigo-600/90 border border-indigo-400/50 flex items-center justify-center text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-500 hover:shadow-indigo-500/50 hover:scale-110 transition-all duration-200 backdrop-blur-sm\"\n        title=\"\"\n      >\n        <HelpCircle className=\"w-5 h-5\" />\n      </button>\n\n      {/*   */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4\"\n          onClick={() => setIsOpen(false)}\n        >\n          <div\n            className=\"bg-[#141423] border border-cyan-500/30 rounded-2xl w-full max-w-md shadow-[0_0_30px_rgba(0,255,242,0.1)] animate-fadeIn\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/*  */}\n            <div className=\"flex items-center justify-between px-5 py-4 border-b border-slate-700/50\">\n              <div className=\"flex items-center gap-3\">\n                <span className=\"text-2xl\">{helpData.icon}</span>\n                <h3 className=\"text-lg font-bold text-white\">{helpData.title}</h3>\n              </div>\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-slate-400 hover:text-white hover:bg-white/20 transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/*  */}\n            <div className=\"px-5 py-4\">\n              <p className=\"text-slate-300 text-sm leading-relaxed mb-4\">\n                {helpData.description}\n              </p>\n\n              {/*   */}\n              {helpData.tips && helpData.tips.length > 0 && (\n                <div className=\"space-y-2.5\">\n                  <h4 className=\"text-xs font-bold text-cyan-400 uppercase tracking-wider\">\n                     \n                  </h4>\n                  {helpData.tips.map((tip, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-start gap-2.5 bg-[#0a0a12]/60 rounded-xl px-3.5 py-2.5 border border-cyan-900/20\"\n                    >\n                      <span className=\"text-cyan-400 text-xs mt-0.5 font-bold shrink-0\">\n                        {index + 1}.\n                      </span>\n                      <p className=\"text-slate-400 text-sm leading-relaxed\">\n                        {tip}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/*   */}\n            <div className=\"px-5 pb-4\">\n              <button\n                onClick={() => setIsOpen(false)}\n                className=\"w-full py-2.5 rounded-xl bg-indigo-500/20 text-indigo-400 text-sm font-bold border border-indigo-500/30 hover:bg-indigo-500/30 transition-colors\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\n//    \r\nconst ClassDataDeletionSection = ({ userClassCode, isAdmin, isSuperAdmin }) => {\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleDeleteClassData = async () => {\r\n    if (!userClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (deleteConfirmText !== \"\") {\r\n      alert(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    //  \r\n    const finalConfirm = window.confirm(\r\n      ` '${userClassCode}'     ?\\n\\n        :\\n-   (role: 'student')\\n-  \\n-  \\n\\n(admin)  .`\r\n    );\r\n\r\n    if (!finalConfirm) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // 1.    (role === 'student' AND classCode === userClassCode)\r\n      const usersRef = firestoreCollection(db, \"users\");\r\n      const studentsQuery = firebaseQuery(\r\n        usersRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode),\r\n        firebaseWhere(\"role\", \"==\", \"student\")\r\n      );\r\n      const studentsSnapshot = await firebaseGetDocs(studentsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${studentsSnapshot.size}`);\r\n\r\n      // 2.   \r\n      const activityLogsRef = firestoreCollection(db, \"activity_logs\");\r\n      const activityLogsQuery = firebaseQuery(\r\n        activityLogsRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n      );\r\n      const activityLogsSnapshot = await firebaseGetDocs(activityLogsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${activityLogsSnapshot.size}`);\r\n\r\n      // 3.    ( userId )\r\n      const studentIds = studentsSnapshot.docs.map(doc => doc.id);\r\n      let transactionsToDelete = [];\r\n\r\n      if (studentIds.length > 0) {\r\n        // Firestore 'in'   10   \r\n        const batches = [];\r\n        for (let i = 0; i < studentIds.length; i += 10) {\r\n          batches.push(studentIds.slice(i, i + 10));\r\n        }\r\n\r\n        for (const batch of batches) {\r\n          const transactionsRef = firestoreCollection(db, \"transactions\");\r\n          const transactionsQuery = firebaseQuery(\r\n            transactionsRef,\r\n            firebaseWhere(\"userId\", \"in\", batch)\r\n          );\r\n          const transactionsSnapshot = await firebaseGetDocs(transactionsQuery);\r\n          transactionsToDelete.push(...transactionsSnapshot.docs);\r\n        }\r\n      }\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${transactionsToDelete.length}`);\r\n\r\n      // 4.    (Firestore   500 )\r\n      const allDocsToDelete = [\r\n        ...studentsSnapshot.docs,\r\n        ...activityLogsSnapshot.docs,\r\n        ...transactionsToDelete,\r\n      ];\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${allDocsToDelete.length}`);\r\n\r\n      //   \r\n      const BATCH_SIZE = 500;\r\n      for (let i = 0; i < allDocsToDelete.length; i += BATCH_SIZE) {\r\n        const batch = writeBatch(db);\r\n        const batchDocs = allDocsToDelete.slice(i, i + BATCH_SIZE);\r\n\r\n        batchDocs.forEach((docSnap) => {\r\n          batch.delete(docSnap.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n        logger.log(`[ClassDataDeletion]  ${Math.floor(i / BATCH_SIZE) + 1}  `);\r\n      }\r\n\r\n      alert(\r\n        `   !\\n\\n :\\n-  : ${studentsSnapshot.size}\\n-  : ${activityLogsSnapshot.size}\\n-  : ${transactionsToDelete.length}`\r\n      );\r\n\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // \r\n      setDeleteConfirmText(\"\");\r\n      setShowConfirmation(false);\r\n    } catch (error) {\r\n      logger.error(\"[ClassDataDeletion]   :\", error);\r\n      alert(` : ${error.message}\\n\\n    .  .`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"section-card mt-6 border-2 border-red-500/50 bg-red-900/10\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <span className=\"text-2xl\"></span>\r\n        <h3 className=\"text-xl font-bold text-red-400\"> :   </h3>\r\n      </div>\r\n\r\n      <div className=\"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30\">\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n          <strong>    !</strong>\r\n        </p>\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n                .\r\n        </p>\r\n        <p className=\"text-sm text-gray-300 mb-2\"> :</p>\r\n        <ul className=\"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1\">\r\n          <li>  (role: 'student')</li>\r\n          <li>  (activity_logs)</li>\r\n          <li>  (transactions)</li>\r\n        </ul>\r\n        <p className=\"text-sm text-green-300 mt-2\">\r\n           (admin)  .\r\n        </p>\r\n        <p className=\"text-sm text-green-300\">\r\n           , ,    .\r\n        </p>\r\n      </div>\r\n\r\n      {!showConfirmation ? (\r\n        <button\r\n          onClick={() => setShowConfirmation(true)}\r\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n             \r\n        </button>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                \"<strong className=\"text-red-400\"></strong>\"  :\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              disabled={isDeleting}\r\n              className=\"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleDeleteClassData}\r\n              disabled={isDeleting || deleteConfirmText !== \"\"}\r\n              className={`px-6 py-2 rounded-lg font-medium transition-colors ${\r\n                deleteConfirmText === \"\" && !isDeleting\r\n                  ? \"bg-red-600 hover:bg-red-700 text-white\"\r\n                  : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\r\n              }`}\r\n            >\r\n              {isDeleting ? \" ...\" : \"  \"}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowConfirmation(false);\r\n                setDeleteConfirmText(\"\");\r\n              }}\r\n              disabled={isDeleting}\r\n              className=\"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  //    \r\n  const [jobTaskSubTab, setJobTaskSubTab] = useState(\"job\");\r\n  const [studentMemberSubTab, setStudentMemberSubTab] = useState(\"student\");\r\n  const [financeMarketSubTab, setFinanceMarketSubTab] = useState(\"financial\");\r\n  const [systemSubTab, setSystemSubTab] = useState(\"database\");\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //   ID     ( )\r\n  useEffect(() => {\r\n    const mapping = {\r\n      taskManagement: ['jobAndTask', () => setJobTaskSubTab('task')],\r\n      jobSettings: ['jobAndTask', () => setJobTaskSubTab('job')],\r\n      studentManagement: ['studentAndMember', () => setStudentMemberSubTab('student')],\r\n      salarySettings: ['studentAndMember', () => setStudentMemberSubTab('salary')],\r\n      memberManagement: ['studentAndMember', () => setStudentMemberSubTab('member')],\r\n      financialProducts: ['financeAndMarket', () => setFinanceMarketSubTab('financial')],\r\n      parkingAccount: ['financeAndMarket', () => setFinanceMarketSubTab('parking')],\r\n      marketControl: ['financeAndMarket', () => setFinanceMarketSubTab('market')],\r\n      databaseManagement: ['system', () => setSystemSubTab('database')],\r\n      systemManagement: ['system', () => setSystemSubTab('system')],\r\n    };\r\n    const mapped = mapping[adminSelectedMenu];\r\n    if (mapped) {\r\n      setAdminSelectedMenu(mapped[0]);\r\n      mapped[1]();\r\n    }\r\n  }, [adminSelectedMenu, setAdminSelectedMenu]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'student') {\r\n      loadStudents();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'member') {\r\n      loadClassMembers();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'financeAndMarket' && financeMarketSubTab === 'market') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, financeMarketSubTab, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobAndTask\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobAndTask\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentAndMember\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"studentAndMember\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financeAndMarket\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financeAndMarket\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"system\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"system\")}\r\n          >\r\n             \r\n          </button>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"jobAndTask\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'job' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('job')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'task' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('task')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"task\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"job\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"studentAndMember\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'student' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('student')}\r\n            >\r\n              / \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'salary' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('salary')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'member' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('member')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"student\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'financial' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('financial')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'parking' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('parking')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'market' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('market')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"financial\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"market\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"parking\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"member\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"salary\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* =====    ===== */}\r\n        {adminSelectedMenu === \"system\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'database' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setSystemSubTab('database')}\r\n            >\r\n              \r\n            </button>\r\n            {isSuperAdmin && (\r\n              <button\r\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'system' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n                onClick={() => setSystemSubTab('system')}\r\n              >\r\n                 \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/*   */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"database\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n\r\n            {/*    */}\r\n            <div className=\"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30\">\r\n              <h3 className=\"text-lg font-bold text-violet-300 mb-3\">  </h3>\r\n              <p className=\"text-sm text-gray-400 mb-4\">    .</p>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <a\r\n                  href=\"/consent-form\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    ( )\r\n                </a>\r\n                <a\r\n                  href=\"/privacy\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                   \r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  :    */}\r\n            <ClassDataDeletionSection\r\n              userClassCode={userClassCode}\r\n              isAdmin={isAdmin}\r\n              isSuperAdmin={isSuperAdmin}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"system\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    gcTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    gcTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    gcTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    gcTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions    (handleManualTaskReset  )\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc(prev => ({ ...prev, selectedJobIds: idsToSave })); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\" className=\"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm\">  </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { DailyRewardBanner, getStreakInfo } from './DailyReward';\r\nimport WelcomePopup from './WelcomePopup';\r\nimport HelpButton from './HelpButton';\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    -  \r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport Login from '../pages/auth/Login';\r\n\r\n//  []       -  \r\nconst ItemStore = lazy(() => import('../pages/market/ItemStore'));\r\nconst MyItems = lazy(() => import('../pages/my-items/MyItems'));\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(() => {\r\n    try {\r\n      const dismissed = localStorage.getItem('alchan_update_dismissed');\r\n      if (!dismissed) return false;\r\n      // 24    \r\n      return Date.now() - parseInt(dismissed) < 24 * 60 * 60 * 1000;\r\n    } catch { return false; }\r\n  });\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && !userDoc?.isAdmin && !userDoc?.isSuperAdmin && !userDoc?.isTeacher) {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.isAdmin, userDoc?.isSuperAdmin, userDoc?.isTeacher]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => {\r\n            setShowUpdateDismissed(true);\r\n            try { localStorage.setItem('alchan_update_dismissed', Date.now().toString()); } catch {}\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      <HelpButton />\r\n\r\n      {/*     */}\r\n      <WelcomePopup />\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   index.css  */}\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","_jsx","className","onClick","children","_jsxs","e","stopPropagation","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","disabled","required","calculateValue","style","cursor","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","width","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","concat","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","userDoc","logout","useAuth","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","prev","_objectSpread","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","isAdmin","isSuperAdmin","userRole","userName","nickname","renderMenuSection","categoryKey","items","childItems","child","isSubGroup","size","charAt","_Fragment","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","fontSize","setFontSize","useTheme","resetTutorial","user","showTutorial","setShowTutorial","uid","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","Object","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","formatKoreanNumber","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","config","levelInfo","useMemo","netAssets","Number","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","sort","a","b","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","document","color","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","classCode","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","Trash2","maxLength","autoFocus","trimmed","trim","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","Date","now","handleBeforeInstall","handleAppInstalled","handleDismiss","toString","Share","Plus","outcome","userChoice","log","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","badge","vibrate","PAGE_HELP","description","tips","WELCOME_GUIDE","subtitle","sections","STORAGE_KEY_NEVER","STORAGE_KEY_TODAY","WelcomePopup","isVisible","setIsVisible","closedDate","toISOString","split","_unused","shouldShowPopup","timer","clearTimeout","handleCloseToday","today","_unused3","section","index","handleNeverShow","_unused2","HelpButton","setIsOpen","helpData","matchedKey","keys","find","getHelpContent","tip","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","isCompleted","maxClicks","clicks","taskItemStyle","backgroundColor","border","padding","boxShadow","taskInfoStyle","gap","taskNameStyle","lineHeight","taskActionsStyle","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","Math","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","marginBottom","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","transform","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","body","bottom","content","top","left","marginLeft","borderWidth","borderStyle","borderColor","animation","textShadow","perspective","transition","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","borderBottom","letterSpacing","tasks","TaskItem","borderTop","fontWeight","CommonTaskList","Array","isArray","gridTemplateColumns","createOptimizedFunction","functionName","fn","httpsCallable","functions","success","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","JSON","stringify","timestamp","warn","maxAge","backup","parsed","parse","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","checked","toLocaleTimeString","marginTop","borderRadius","margin","health","totalUsers","stats","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","toDate","seconds","errorLogs","slice","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","ClassDataDeletionSection","userClassCode","deleteConfirmText","setDeleteConfirmText","isDeleting","setIsDeleting","showConfirmation","setShowConfirmation","usersRef","firestoreCollection","studentsQuery","firebaseQuery","firebaseWhere","studentsSnapshot","firebaseGetDocs","activityLogsRef","activityLogsQuery","activityLogsSnapshot","studentIds","docs","transactionsToDelete","batches","i","batch","transactionsRef","transactionsQuery","transactionsSnapshot","allDocsToDelete","BATCH_SIZE","writeBatch","forEach","docSnap","delete","commit","floor","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","students","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","savingProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","jobTaskSubTab","setJobTaskSubTab","studentMemberSubTab","setStudentMemberSubTab","financeMarketSubTab","setFinanceMarketSubTab","systemSubTab","setSystemSubTab","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","useOptimizedStudents","useQuery","queryKey","staleTime","gcTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","parseFloat","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","queryRef","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","member","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","stock","stockRef","set","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","mapped","taskManagement","jobSettings","studentManagement","memberManagement","financialProducts","parkingAccount","marketControl","databaseManagement","formatLastSalaryDate","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","summary","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","student","salaryCalc","includes","handleToggleStudentSelection","studentId","Boolean","join","toLocaleDateString","handleEditStudentJobs","step","products","product","AdminDatabase","href","rel","SystemMonitoring","handleToggleJobSelection","prevStudents","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","get","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","Map","addListener","unsubscribe","has","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","EmptyState","Briefcase","ActionButton","variant","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","substr","setupPolling","pollData","jobsQuery","query","where","limit","loadedJobs","getDocs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","toDateString","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","findIndex","t","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","rewardAmount","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","cached","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","storeItems","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","PageContainer","LoadingState","ListTodo","userNickname","RotateCcw","JobList","action","AdminSettingsModal","ItemStore","lazy","MyItems","PersonalShop","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","AdminItemPage","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","from","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","handleDailyRewardClaim","updateDoc","increment","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","DailyRewardBanner","onClaim","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","donations","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","borderCollapse","overflow","thead","th","textAlign","position","zIndex","td","tr","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","processDonationData","studentsCount","donationsCount","s","classDonations","validStudents","donationsByStudent","currentClassGoalTotal","donation","donorId","donorName","totalAmount","uniqueDonors","allStudentIds","Set","add","studentInfoMap","studentName","_donationsByStudent$s","cumulativeAmount","isCurrentUser","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","onMouseOver","currentTarget","onMouseOut","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","saved","saveAvatarConfig","dispatchEvent","CustomEvent","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","darkenColor","hex","percent","r","g","f","m","o","noseColor","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","condition","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","values","stored","normalizeType","cache","getCacheKey","getFromCache","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","q","collection","snapshot","logs","_data$timestamp","normalizedFilterType","hasMore","paginatedLogs","newLastDoc","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","transactions","userIdsCount","allTransactions","_data$timestamp3","getTransactionsData","tx","metadata","convertTransactionsToLogs","handleLoadMore","getActivityTypeColor","typeStr","toLowerCase","formatDate","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","handleRefresh","keysToDelete","clearClassCache","info","typeCounts","typeExamples","count","filters","_log$type","_log$description","desc","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","filterName","filterFunc","matchedLogs","matchedTypes","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","activity","reason","itemName","quantity","couponAmount","PageHeader","backButton","_ref1","primary","secondary","outline","danger","ghost","indigo","sm","md","lg","Loader2","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","number","unit","num","isNegative","units","resultParts","remaining","abs","quotient","maximumFractionDigits","formatKoreanCurrency","STREAK_REWARDS","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","showPopup","setShowPopup","handleClaim","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","StreakDisplay","currentStreak","StreakRewardInfo","ItemContext","createContext","useItems","context","useContext","userItems","marketListings","marketOffers","addItem","purchaseItem","updateItem","deleteItem","useItem","updateUserItemQuantity","listItemForSale","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","refreshData","isAuthAdmin","deductCash","addCash","currentUserClassCode","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","groupedUserItems","updateLocalUserItems","newUserItems","tempId","tempNewItem","newItemData","prevItems","token","getIdToken","functionUrl","response","fetch","method","headers","ok","errorText","status","json","itemId","updatesToApply","itemToPurchase","totalPrice","newUserItem","durationMs","purchasedAt","originalUserItems","originalStock","originalPrice","existingIndex","updated","restocked","newStock","newPrice","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","quantityToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","docRef","addDoc","logId"],"ignoreList":[],"sourceRoot":""}