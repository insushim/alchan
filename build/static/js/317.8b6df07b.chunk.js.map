{"version":3,"file":"static/js/317.8b6df07b.chunk.js","mappings":"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","sources":["pages/government/NationalTaxService.js","pages/government/Government.js"],"sourcesContent":["// src/NationalTaxService.js\r\n// ========================================\r\n// êµ­ì„¸ì²­ - ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ = êµ­ê³ \r\n// ========================================\r\n// êµ­ê³ ëŠ” ë³„ë„ì˜ ë¬¸ì„œê°€ ì•„ë‹Œ í•™ê¸‰ ê´€ë¦¬ì(ì„ ìƒë‹˜)ì˜ í˜„ê¸ˆìœ¼ë¡œ í†µí•©ë¨\r\n// ëª¨ë“  ì„¸ê¸ˆì€ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ì§ì ‘ ì…ê¸ˆë¨\r\n// ========================================\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, getCachedDocument, invalidateCache } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  updateDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { formatKoreanCurrency } from \"../../utils/numberFormatter\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return \"-\";\r\n  const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\r\n  if (isNaN(date.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ\";\r\n  return date.toLocaleString(\"ko-KR\");\r\n};\r\n\r\n// ì„¸ìˆ˜ í†µê³„ìš© (êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆì—ì„œ ê°€ì ¸ì˜´)\r\nconst DEFAULT_TREASURY_DATA = {\r\n  totalAmount: 0, // ì´ ê°’ì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ - ê´€ë¦¬ì í˜„ê¸ˆìœ¼ë¡œ ëŒ€ì²´\r\n  stockTaxRevenue: 0,\r\n  stockCommissionRevenue: 0,\r\n  realEstateTransactionTaxRevenue: 0,\r\n  vatRevenue: 0,\r\n  auctionTaxRevenue: 0,\r\n  propertyHoldingTaxRevenue: 0,\r\n  itemMarketTaxRevenue: 0,\r\n  incomeTaxRevenue: 0,\r\n  corporateTaxRevenue: 0,\r\n  otherTaxRevenue: 0,\r\n  lastUpdated: null,\r\n};\r\n\r\nconst DEFAULT_TAX_SETTINGS = {\r\n  stockTransactionTaxRate: 0.01,\r\n  realEstateTransactionTaxRate: 0.03,\r\n  itemStoreVATRate: 0.1,\r\n  auctionTransactionTaxRate: 0.03,\r\n  propertyHoldingTaxRate: 0.002,\r\n  propertyHoldingTaxInterval: \"weekly\",\r\n  itemMarketTransactionTaxRate: 0.03,\r\n  lastUpdated: null,\r\n};\r\n\r\nconst NationalTaxService = ({ classCode }) => {\r\n  const [treasuryData, setTreasuryData] = useState(DEFAULT_TREASURY_DATA);\r\n  const [taxSettings, setTaxSettings] = useState(DEFAULT_TAX_SETTINGS);\r\n  const [adminCash, setAdminCash] = useState(0); // ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ = êµ­ê³ \r\n  const [loadingTreasury, setLoadingTreasury] = useState(true);\r\n  const [loadingSettings, setLoadingSettings] = useState(true);\r\n  const [activeTab, setActiveTab] = useState(\"overview\");\r\n  const [editableSettings, setEditableSettings] = useState(DEFAULT_TAX_SETTINGS);\r\n\r\n  // ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ ê°€ì ¸ì˜¤ê¸° - ì´ê²ƒì´ ê³§ êµ­ê³ \r\n  const fetchAdminCash = useCallback(async () => {\r\n    if (!classCode) {\r\n      setAdminCash(0);\r\n      return;\r\n    }\r\n    try {\r\n      const usersRef = collection(db, \"users\");\r\n      const q = query(\r\n        usersRef,\r\n        where(\"classCode\", \"==\", classCode),\r\n        where(\"isAdmin\", \"==\", true)\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      if (!snapshot.empty) {\r\n        const adminData = snapshot.docs[0].data();\r\n        setAdminCash(adminData.cash || 0);\r\n      } else {\r\n        setAdminCash(0);\r\n      }\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ê´€ë¦¬ì í˜„ê¸ˆ(êµ­ê³ ) ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setAdminCash(0);\r\n    }\r\n  }, [classCode]);\r\n\r\n  // ì„¸ìˆ˜ í†µê³„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì°¸ê³ ìš© - êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆ ì‚¬ìš©)\r\n  const fetchTreasuryData = useCallback(async () => {\r\n    if (!classCode) {\r\n      setLoadingTreasury(false);\r\n      setTreasuryData(DEFAULT_TREASURY_DATA);\r\n      return;\r\n    }\r\n    setLoadingTreasury(true);\r\n\r\n    // ê´€ë¦¬ì í˜„ê¸ˆ ë¨¼ì € ê°€ì ¸ì˜¤ê¸°\r\n    await fetchAdminCash();\r\n\r\n    const treasuryRef = doc(db, \"nationalTreasuries\", classCode);\r\n    try {\r\n      const cached = await getCachedDocument(\"nationalTreasuries\", classCode, 5 * 60 * 1000);\r\n      if (cached) {\r\n        setTreasuryData({ ...DEFAULT_TREASURY_DATA, ...cached });\r\n        setLoadingTreasury(false);\r\n        return;\r\n      }\r\n\r\n      const docSnap = await getDoc(treasuryRef);\r\n      if (docSnap.exists()) {\r\n        setTreasuryData({ ...DEFAULT_TREASURY_DATA, ...docSnap.data() });\r\n        invalidateCache(`doc_nationalTreasuries_${classCode}`);\r\n      } else {\r\n        // ì„¸ìˆ˜ í†µê³„ ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒì„± (êµ­ê³  ì”ì•¡ì€ ê´€ë¦¬ì í˜„ê¸ˆì´ë¯€ë¡œ totalAmountëŠ” 0ìœ¼ë¡œ)\r\n        await setDoc(treasuryRef, {\r\n          ...DEFAULT_TREASURY_DATA,\r\n          createdAt: serverTimestamp(),\r\n          lastUpdated: serverTimestamp(),\r\n        });\r\n        invalidateCache(`doc_nationalTreasuries_${classCode}`);\r\n        setTreasuryData({\r\n          ...DEFAULT_TREASURY_DATA,\r\n          lastUpdated: new Date(),\r\n        });\r\n      }\r\n      setLoadingTreasury(false);\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ì„¸ìˆ˜ í†µê³„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setLoadingTreasury(false);\r\n    }\r\n  }, [classCode, fetchAdminCash]);\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 15ë¶„ (êµ­ê³  ë°ì´í„°ëŠ” ìì£¼ ì•ˆ ë°”ë€œ)\r\n  const { refetch: refetchTreasury } = usePolling(fetchTreasuryData, { interval: 15 * 60 * 1000, enabled: !!classCode });\r\n\r\n  const fetchTaxSettings = useCallback(async () => {\r\n    if (!classCode) {\r\n      setLoadingSettings(false);\r\n      setTaxSettings(DEFAULT_TAX_SETTINGS);\r\n      setEditableSettings(DEFAULT_TAX_SETTINGS);\r\n      return;\r\n    }\r\n    setLoadingSettings(true);\r\n    const settingsRef = doc(db, \"governmentSettings\", classCode);\r\n    try {\r\n      const cached = await getCachedDocument(\"governmentSettings\", classCode, 5 * 60 * 1000);\r\n      if (cached?.taxSettings) {\r\n        const newSettings = { ...DEFAULT_TAX_SETTINGS, ...cached.taxSettings };\r\n        setTaxSettings(newSettings);\r\n        setEditableSettings(newSettings);\r\n        setLoadingSettings(false);\r\n        return;\r\n      }\r\n\r\n      const docSnap = await getDoc(settingsRef);\r\n      if (docSnap.exists() && docSnap.data().taxSettings) {\r\n        const newSettings = { ...DEFAULT_TAX_SETTINGS, ...docSnap.data().taxSettings };\r\n        setTaxSettings(newSettings);\r\n        setEditableSettings(newSettings);\r\n        invalidateCache(`doc_governmentSettings_${classCode}`);\r\n      } else {\r\n        await setDoc(settingsRef, {\r\n          taxSettings: {\r\n            ...DEFAULT_TAX_SETTINGS,\r\n            lastUpdated: serverTimestamp(),\r\n          },\r\n        }, { merge: true });\r\n        invalidateCache(`doc_governmentSettings_${classCode}`);\r\n        setTaxSettings(DEFAULT_TAX_SETTINGS);\r\n        setEditableSettings(DEFAULT_TAX_SETTINGS);\r\n      }\r\n      setLoadingSettings(false);\r\n    } catch (error) {\r\n      logger.error(`[${classCode}] ì„¸ê¸ˆ ì •ì±… ë¡œë“œ ì‹¤íŒ¨:`, error);\r\n      setLoadingSettings(false);\r\n    }\r\n  }, [classCode]);\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 1ì‹œê°„ (ì„¸ê¸ˆ ì„¤ì •ì€ ê±°ì˜ ì•ˆ ë°”ë€œ)\r\n  const { refetch: refetchSettings } = usePolling(fetchTaxSettings, { interval: 60 * 60 * 1000, enabled: !!classCode });\r\n\r\n  const handleSettingChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const numericValue = value === \"\" ? \"\" : parseFloat(value);\r\n    setEditableSettings((prev) => ({\r\n      ...prev,\r\n      [name]: numericValue,\r\n    }));\r\n  };\r\n\r\n  const handleIntervalChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditableSettings((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const saveTaxSettings = async () => {\r\n    if (!classCode) return;\r\n    for (const key in editableSettings) {\r\n      if (\r\n        key.endsWith(\"Rate\") &&\r\n        (editableSettings[key] < 0 || editableSettings[key] > 1)\r\n      ) {\r\n        if (\r\n          editableSettings[key] !== \"\" &&\r\n          !(key === \"itemStoreVATRate\" && editableSettings[key] > 1)\r\n        ) {\r\n          alert(\r\n            `${key} ì„¸ìœ¨ì€ 0ê³¼ 1 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤ (ì˜ˆ: 3%ëŠ” 0.03). í˜„ì¬ê°’: ${editableSettings[key]}`\r\n          );\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    const settingsRef = doc(db, \"governmentSettings\", classCode);\r\n    try {\r\n      await updateDoc(settingsRef, {\r\n        taxSettings: {\r\n          ...editableSettings,\r\n          lastUpdated: serverTimestamp(),\r\n        },\r\n      });\r\n      refetchSettings();\r\n      alert(\"ì„¸ê¸ˆ ì •ì±…ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n    } catch (error) {\r\n      logger.error(\"ì„¸ê¸ˆ ì •ì±… ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:\", error);\r\n      alert(\"ì„¸ê¸ˆ ì •ì±… ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  if (!classCode) {\r\n    return (\r\n      <div className=\"p-8 text-center\">\r\n        <h2 className=\"text-xl font-bold text-slate-800 mb-2\">í•™ê¸‰ ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤</h2>\r\n        <p className=\"text-slate-500\">\r\n          ì •ë¶€ ë©”ë‰´ì—ì„œ êµ­ì„¸ì²­ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ í•™ê¸‰ì— ë¨¼ì € ì°¸ì—¬í•´ì•¼ í•©ë‹ˆë‹¤.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loadingTreasury || loadingSettings) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-slate-500 font-medium\">êµ­ì„¸ì²­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ (í•™ê¸‰: {classCode})...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalTaxRevenue = Object.keys(treasuryData)\r\n    .filter((key) => key.endsWith(\"Revenue\") && key !== \"totalAmount\")\r\n    .reduce((sum, key) => sum + (treasuryData[key] || 0), 0);\r\n\r\n  const taxPolicyFields = [\r\n    { name: \"stockTransactionTaxRate\", label: \"ì£¼ì‹ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"realEstateTransactionTaxRate\", label: \"ë¶€ë™ì‚° ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"itemStoreVATRate\", label: \"ì•„ì´í…œ ìƒì  ë¶€ê°€ì„¸ìœ¨\", type: \"number\", step: \"0.01\", min: \"0\", max: \"1\" },\r\n    { name: \"auctionTransactionTaxRate\", label: \"ê²½ë§¤ì¥ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n    { name: \"propertyHoldingTaxRate\", label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸ìœ¨\", type: \"number\", step: \"0.0001\", min: \"0\", max: \"1\" },\r\n    { name: \"propertyHoldingTaxInterval\", label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸ ì§•ìˆ˜ ì£¼ê¸°\", type: \"select\", options: [\"daily\", \"weekly\", \"monthly\"] },\r\n    { name: \"itemMarketTransactionTaxRate\", label: \"ì•„ì´í…œ ì‹œì¥ ê±°ë˜ì„¸ìœ¨\", type: \"number\", step: \"0.001\", min: \"0\", max: \"1\" },\r\n  ];\r\n\r\n  const tabs = [\r\n    { id: \"overview\", label: \"ê°œìš”\", icon: \"ğŸ“Š\" },\r\n    { id: \"revenue\", label: \"ì„¸ìˆ˜ í˜„í™©\", icon: \"ğŸ’°\" },\r\n    { id: \"policy\", label: \"ì„¸ê¸ˆ ì •ì±…\", icon: \"ğŸ“‹\" },\r\n    { id: \"analytics\", label: \"ë¶„ì„\", icon: \"ğŸ“ˆ\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* í—¤ë” */}\r\n      <div className=\"bg-gradient-to-r from-indigo-600 via-violet-600 to-purple-600 rounded-2xl p-8 text-white shadow-xl\">\r\n        <h1 className=\"text-3xl font-bold mb-2\">ğŸ›ï¸ {classCode} í•™ê¸‰ êµ­ì„¸ì²­</h1>\r\n        <p className=\"text-white/80 text-lg\">ì„¸ê¸ˆ ì •ì±… ê´€ë¦¬ ë° êµ­ê³  ìš´ì˜</p>\r\n      </div>\r\n\r\n      {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}\r\n      <div className=\"flex gap-2 border-b border-slate-200 pb-0\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className={`px-6 py-3 rounded-t-xl font-bold text-sm transition-all ${activeTab === tab.id\r\n                ? \"bg-indigo-600 text-white shadow-lg\"\r\n                : \"bg-white text-slate-600 hover:bg-slate-50\"\r\n              }`}\r\n          >\r\n            {tab.icon} {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ê°œìš” íƒ­ */}\r\n      {activeTab === \"overview\" && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\r\n            {/* ì´ êµ­ê³  = ê´€ë¦¬ì(ì„ ìƒë‹˜) í˜„ê¸ˆ */}\r\n            <div className=\"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg border border-emerald-400/30\">\r\n              <p className=\"text-emerald-100 text-sm font-medium mb-1\">ğŸ’° ì´ êµ­ê³ </p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(adminCash)}</p>\r\n              <p className=\"text-emerald-200 text-xs mt-1\">= í•™ê¸‰ ê´€ë¦¬ì í˜„ê¸ˆ</p>\r\n            </div>\r\n\r\n            {/* ì£¼ì‹ ê±°ë˜ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg border border-blue-400/30\">\r\n              <p className=\"text-blue-100 text-sm font-medium mb-1\">ğŸ“ˆ ì£¼ì‹ ê±°ë˜ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.stockTaxRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ì£¼ì‹ ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg border border-indigo-400/30\">\r\n              <p className=\"text-indigo-100 text-sm font-medium mb-1\">ğŸ“Š ì£¼ì‹ ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.stockCommissionRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ë¶€ë™ì‚° ê±°ë˜ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-6 text-white shadow-lg border border-amber-400/30\">\r\n              <p className=\"text-amber-100 text-sm font-medium mb-1\">ğŸ  ë¶€ë™ì‚° ê±°ë˜ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.realEstateTransactionTaxRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ì•„ì´í…œ ë¶€ê°€ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl p-6 text-white shadow-lg border border-pink-400/30\">\r\n              <p className=\"text-pink-100 text-sm font-medium mb-1\">ğŸ›’ ì•„ì´í…œ ë¶€ê°€ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.vatRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ê²½ë§¤ì¥ ê±°ë˜ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-6 text-white shadow-lg border border-cyan-400/30\">\r\n              <p className=\"text-cyan-100 text-sm font-medium mb-1\">ğŸ”¨ ê²½ë§¤ì¥ ê±°ë˜ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.auctionTaxRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ë¶€ë™ì‚° ë³´ìœ ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-lime-500 to-lime-600 rounded-2xl p-6 text-white shadow-lg border border-lime-400/30\">\r\n              <p className=\"text-lime-100 text-sm font-medium mb-1\">ğŸ˜ï¸ ë¶€ë™ì‚° ë³´ìœ ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.propertyHoldingTaxRevenue)}</p>\r\n            </div>\r\n\r\n            {/* ì•„ì´í…œ ì‹œì¥ ê±°ë˜ì„¸ ìˆ˜ì… */}\r\n            <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg border border-orange-400/30\">\r\n              <p className=\"text-orange-100 text-sm font-medium mb-1\">ğŸª ì•„ì´í…œ ì‹œì¥ ê±°ë˜ì„¸ ìˆ˜ì…</p>\r\n              <p className=\"text-2xl font-bold text-shadow-sm\">{formatKoreanCurrency(treasuryData.itemMarketTaxRevenue)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ìµœê·¼ ì—…ë°ì´íŠ¸ */}\r\n          <div className=\"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5\">\r\n            <h3 className=\"text-lg font-bold text-[#00fff2] mb-4\">ğŸ“… ìµœê·¼ ì—…ë°ì´íŠ¸</h3>\r\n            <div className=\"space-y-2 text-slate-300\">\r\n              <p>êµ­ê³  ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span className=\"font-medium text-white\">{formatDate(treasuryData.lastUpdated)}</span></p>\r\n              <p>ì„¸ê¸ˆ ì •ì±… ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span className=\"font-medium text-white\">{formatDate(taxSettings.lastUpdated)}</span></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì„¸ìˆ˜ í˜„í™© íƒ­ */}\r\n      {activeTab === \"revenue\" && (\r\n        <div className=\"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h3 className=\"text-xl font-bold text-[#00fff2]\">ğŸ’° ì„¸ìˆ˜ í˜„í™© ë¶„ì„</h3>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-sm text-slate-400\">ì„¸ìˆ˜ ì´í•©</p>\r\n              <p className=\"text-2xl font-bold text-white text-shadow-sm\">{formatKoreanCurrency(totalTaxRevenue)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            {[\r\n              { label: \"ì£¼ì‹ ê±°ë˜ì„¸\", amount: treasuryData.stockTaxRevenue, color: \"bg-blue-500\" },\r\n              { label: \"ì£¼ì‹ ìˆ˜ìˆ˜ë£Œ\", amount: treasuryData.stockCommissionRevenue, color: \"bg-indigo-500\" },\r\n              { label: \"ë¶€ë™ì‚° ê±°ë˜ì„¸\", amount: treasuryData.realEstateTransactionTaxRevenue, color: \"bg-amber-500\" },\r\n              { label: \"ë¶€ê°€ì„¸\", amount: treasuryData.vatRevenue, color: \"bg-pink-500\" },\r\n              { label: \"ê²½ë§¤ì¥ ê±°ë˜ì„¸\", amount: treasuryData.auctionTaxRevenue, color: \"bg-cyan-500\" },\r\n              { label: \"ë¶€ë™ì‚° ë³´ìœ ì„¸\", amount: treasuryData.propertyHoldingTaxRevenue, color: \"bg-lime-500\" },\r\n              { label: \"ì•„ì´í…œ ì‹œì¥ì„¸\", amount: treasuryData.itemMarketTaxRevenue, color: \"bg-orange-500\" },\r\n            ].map((item) => {\r\n              const percentage = totalTaxRevenue > 0 ? ((item.amount / totalTaxRevenue) * 100).toFixed(1) : \"0.0\";\r\n              return (\r\n                <div key={item.label} className=\"flex items-center gap-4\">\r\n                  <div className=\"w-32 font-medium text-slate-300\">{item.label}</div>\r\n                  <div className=\"flex-1 h-6 bg-slate-800 rounded-full overflow-hidden border border-slate-700\">\r\n                    <div\r\n                      className={`h-full ${item.color} transition-all duration-500 shadow-[0_0_10px_rgba(0,0,0,0.5)]`}\r\n                      style={{ width: `${percentage}%` }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"w-40 text-right text-sm\">\r\n                    <span className=\"font-bold text-white\">{formatKoreanCurrency(item.amount)}</span>\r\n                    <span className=\"text-slate-400 ml-2\">({percentage}%)</span>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì„¸ê¸ˆ ì •ì±… íƒ­ */}\r\n      {activeTab === \"policy\" && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg shadow-[#00fff2]/5\">\r\n            <h3 className=\"text-xl font-bold text-[#00fff2] mb-6\">ğŸ“‹ í˜„í–‰ ì„¸ê¸ˆ ì •ì±… (í•™ê¸‰: {classCode})</h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {taxPolicyFields.map((field) => (\r\n                <div key={field.name}>\r\n                  <label className=\"block text-sm font-bold text-slate-300 mb-2\">\r\n                    {field.label}\r\n                    <span className=\"text-[#00fff2] font-normal ml-2\">\r\n                      (í˜„ì¬: {field.type === \"select\"\r\n                        ? taxSettings[field.name]\r\n                        : `${((taxSettings[field.name] || 0) * 100).toFixed(field.name.includes(\"propertyHoldingTaxRate\") ? 2 : 1)}%`})\r\n                    </span>\r\n                  </label>\r\n                  {field.type === \"select\" ? (\r\n                    <select\r\n                      name={field.name}\r\n                      value={editableSettings[field.name] || DEFAULT_TAX_SETTINGS[field.name]}\r\n                      onChange={handleIntervalChange}\r\n                      className=\"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors\"\r\n                    >\r\n                      {field.options.map((opt) => (\r\n                        <option key={opt} value={opt}>\r\n                          {opt === \"daily\" ? \"ë§¤ì¼\" : opt === \"weekly\" ? \"ë§¤ì£¼\" : \"ë§¤ì›”\"}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  ) : (\r\n                    <input\r\n                      type={field.type}\r\n                      name={field.name}\r\n                      value={editableSettings[field.name] === \"\" ? \"\" : editableSettings[field.name]}\r\n                      onChange={handleSettingChange}\r\n                      step={field.step}\r\n                      min={field.min}\r\n                      max={field.max}\r\n                      placeholder={`ì˜ˆ: ${field.label.includes(\"ë¶€ê°€\") ? \"0.1 (10%)\" : \"0.03 (3%)\"}`}\r\n                      className=\"w-full px-4 py-3 bg-[#13131f] border-2 border-slate-700 rounded-xl focus:outline-none focus:border-[#00fff2] text-white transition-colors placeholder-slate-600\"\r\n                    />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button\r\n              onClick={saveTaxSettings}\r\n              className=\"mt-6 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-bold transition-all shadow-lg border border-indigo-400/30\"\r\n            >\r\n              ì„¸ê¸ˆ ì •ì±… ì €ì¥\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-[#13131f] rounded-2xl p-6 border border-blue-500/30 shadow-lg\">\r\n            <h3 className=\"text-lg font-bold text-blue-400 mb-3\">ğŸ’¡ ì„¸ê¸ˆ ì •ì±… ëª©í‘œ</h3>\r\n            <ul className=\"text-blue-300 space-y-2\">\r\n              <li>â€¢ ê³µì •í•œ ì‹œì¥ ê²½ì œ ì§ˆì„œ í™•ë¦½</li>\r\n              <li>â€¢ ì•ˆì •ì ì¸ í•™ê¸‰ ì¬ì • ì •ë³´ ë° ê³µê³µ ì„œë¹„ìŠ¤ íˆ¬ì</li>\r\n              <li>â€¢ ê²½ì œ í™œë™ ì°¸ì—¬ì™€ ê°ì˜ í˜•í‰ì„± ì œê³ </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ë¶„ì„ íƒ­ */}\r\n      {activeTab === \"analytics\" && (\r\n        <div className=\"bg-[#1a1a2e] rounded-2xl p-6 border border-[#00fff2]/30 shadow-lg\">\r\n          <h3 className=\"text-xl font-bold text-[#00fff2] mb-4\">ğŸ“ˆ ì„¸ìˆ˜ ë¶„ì„ (í•™ê¸‰: {classCode})</h3>\r\n          <div className=\"bg-[#13131f] rounded-xl p-8 text-center border border-slate-700\">\r\n            <div className=\"text-6xl mb-4\">ğŸ“Š</div>\r\n            <p className=\"text-slate-300\">ì¶”í›„ ë‹¤ì–‘í•œ ì„¸ìˆ˜ ë¶„ì„ ì°¨íŠ¸ì™€ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>\r\n            <p className=\"text-slate-500 text-sm mt-2\">ì˜ˆ: ì‹œê°„ì— ë”°ë¥¸ ì„¸ìˆ˜ ë³€í™”, ì¹´í…Œê³ ë¦¬ë³„ ê¸°ì—¬ë„ ë“±</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NationalTaxService;\r\n","// src/Government.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport \"./Government.css\";\r\nimport \"./NationalAssembly.css\"; // ë²•ì•ˆ ì¹´ë“œ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš©\r\nimport NationalTaxService from \"./NationalTaxService\";\r\n// íˆ¬ìí•˜ê¸°, ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° íƒ­ ì œê±°ë¨ - êµ­ê³ ëŠ” ê´€ë¦¬ì í˜„ê¸ˆìœ¼ë¡œ í†µí•©\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { db } from \"../../firebase\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\nimport { logger } from '../../utils/logger';\nimport {\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  doc,\r\n  updateDoc,\r\n  serverTimestamp,\r\n  // orderBy, // orderByëŠ” ì ì‹œ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\n} from \"firebase/firestore\";\r\n\r\n// ë‚ ì§œ í¬ë§·íŒ… í—¬í¼ í•¨ìˆ˜\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return \"ì •ë³´ ì—†ìŒ\";\r\n    try {\r\n      const date = new Date(dateString);\r\n      if (isNaN(date.getTime())) return \"ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ\";\r\n      return `${date.getFullYear()}ë…„ ${\r\n        date.getMonth() + 1\r\n      }ì›” ${date.getDate()}ì¼`;\r\n    } catch (e) {\r\n      return \"ë‚ ì§œ ë³€í™˜ ì˜¤ë¥˜\";\r\n    }\r\n  };\r\n\r\n// ë²•ì•ˆ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸\r\nconst LawManagement = ({ classCode }) => {\r\n  const [laws, setLaws] = useState([]);\r\n  const { isAdmin, userDoc } = useAuth();\r\n\r\n  const { data: jobs } = usePolling(\r\n    async () => {\r\n      if (!classCode) return [];\r\n      const jobsRef = collection(db, \"jobs\");\r\n      const q = query(jobsRef, where(\"classCode\", \"==\", classCode));\r\n      const snapshot = await getDocs(q);\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n    },\r\n    {\r\n      // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 30ë¶„ (ì§ì—… ëª©ë¡ì€ ê±°ì˜ ì•ˆ ë°”ë€œ)\r\n      interval: 30 * 60 * 1000,\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    }\r\n  );\r\n\r\n  // ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ í•¨ìˆ˜\r\n  const canManageLaws = useCallback(() => {\r\n    if (isAdmin()) return true;\r\n    if (!userDoc?.selectedJobIds || !jobs || jobs.length === 0) return false;\r\n    const selectedJobs = jobs.filter(job => userDoc.selectedJobIds.includes(job.id));\r\n    return selectedJobs.some(job => job.title === 'ëŒ€í†µë ¹');\r\n  }, [isAdmin, userDoc, jobs]);\r\n\r\n  // ë²•ì•ˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜\r\n  const fetchLaws = async () => {\r\n    if (!classCode) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const lawsCollectionRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"nationalAssemblyLaws\"\r\n      );\r\n\r\n      const q = query(\r\n        lawsCollectionRef,\r\n        where(\"status\", \"==\", \"pending_government_approval\")\r\n      );\r\n\r\n      const querySnapshot = await getDocs(q);\r\n      const loadedLaws = querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setLaws(loadedLaws);\r\n    } catch (error) {\r\n      logger.error(\"Error fetching pending laws:\", error);\r\n      alert(\"ì •ë¶€ ì´ì†¡ ë²•ì•ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n    }\r\n  };\r\n\r\n  // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 15ë¶„ (ë²•ì•ˆ ë°ì´í„°ëŠ” ìì£¼ ì•ˆ ë°”ë€œ)\r\n  const { loading, refetch } = usePolling(fetchLaws, { interval: 15 * 60 * 1000, enabled: !!classCode });\r\n\r\n  // ë²•ì•ˆ ìŠ¹ì¸ í•¸ë“¤ëŸ¬\r\n  const handleApprove = async (lawId) => {\r\n    if (!canManageLaws()) {\r\n        alert(\"ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ìë§Œ ë²•ì•ˆì„ ìŠ¹ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n        return;\r\n    }\r\n    if(window.confirm(\"ì´ ë²•ì•ˆì„ ìµœì¢… ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\r\n        const lawDocRef = doc(db, \"classes\", classCode, \"nationalAssemblyLaws\", lawId);\r\n        try {\r\n            await updateDoc(lawDocRef, {\r\n                status: \"approved\",\r\n                finalStatus: \"final_approved\",\r\n                finalApprovalDate: serverTimestamp(),\r\n            });\r\n            alert(\"ë²•ì•ˆì´ ìµœì¢… ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n            refetch(); // ì¦‰ì‹œ ë°ì´í„° ê°±ì‹ \r\n        } catch (error) {\r\n            logger.error(\"Error approving law:\", error);\r\n            alert(\"ë²•ì•ˆ ìŠ¹ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n    }\r\n  };\r\n\r\n  // ê±°ë¶€ê¶Œ í–‰ì‚¬ í•¸ë“¤ëŸ¬\r\n  const handleVeto = async (lawId) => {\r\n    if (!canManageLaws()) {\r\n        alert(\"ëŒ€í†µë ¹ ë˜ëŠ” ê´€ë¦¬ìë§Œ ê±°ë¶€ê¶Œì„ í–‰ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\r\n        return;\r\n    }\r\n    const reason = prompt(\"ê±°ë¶€ê¶Œ í–‰ì‚¬ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n    if (reason && reason.trim() !== \"\") {\r\n        const lawDocRef = doc(db, \"classes\", classCode, \"nationalAssemblyLaws\", lawId);\r\n        const deadline = new Date();\r\n        deadline.setDate(deadline.getDate() + 7); // ì¬ì˜ê²° ê¸°í•œ: 7ì¼\r\n\r\n        try {\r\n            await updateDoc(lawDocRef, {\r\n                status: \"vetoed\",\r\n                vetoReason: reason,\r\n                vetoDate: serverTimestamp(),\r\n                vetoDeadline: deadline,\r\n                approvals: 0,\r\n                disapprovals: 0,\r\n                voters: {},\r\n            });\r\n            alert(\"ê±°ë¶€ê¶Œì´ í–‰ì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë²•ì•ˆì€ êµ­íšŒì—ì„œ ì¬ì˜ê²° ì ˆì°¨ë¥¼ ê±°ì¹©ë‹ˆë‹¤.\");\r\n            refetch(); // ì¦‰ì‹œ ë°ì´í„° ê°±ì‹ \r\n        } catch (error) {\r\n            logger.error(\"Error vetoing law:\", error);\r\n            alert(\"ê±°ë¶€ê¶Œ í–‰ì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n    } else {\r\n        alert(\"ê±°ë¶€ ì‚¬ìœ ë¥¼ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"law-management-container\">\r\n      <h2>ì •ë¶€ ì´ì†¡ ë²•ì•ˆ ëª©ë¡</h2>\r\n      {laws.length === 0 ? (\r\n        <div className=\"empty-state\">í˜„ì¬ ì •ë¶€ë¡œ ì´ì†¡ëœ ë²•ì•ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n      ) : (\r\n        <div className=\"law-list\">\r\n          {laws.map((law) => (\r\n            <div key={law.id} className=\"law-card pending-gov\">\r\n              <div className=\"law-content-wrapper\">\r\n                <div className=\"law-header\">\r\n                  <h3 className=\"law-title\">{law.title}</h3>\r\n                  <span className=\"law-status pending-gov\">ì •ë¶€ ì‹¬ì˜ì¤‘</span>\r\n                </div>\r\n                <div className=\"law-content\">\r\n                    <p><strong>ì œì•ˆì:</strong> {law.proposerName || \"ì •ë³´ ì—†ìŒ\"}</p>\r\n                    <p><strong>ì·¨ì§€:</strong> {law.purpose}</p>\r\n                    <p><strong>ì„¤ëª…:</strong> {law.description}</p>\r\n                    <p><strong>ë²Œê¸ˆ:</strong> {law.fine}</p>\r\n                    <p className=\"law-timestamp\">êµ­íšŒ í†µê³¼ì¼: {formatDate(law.approvalDate?.toDate().toISOString())}</p>\r\n                </div>\r\n                {canManageLaws() && (\r\n                    <div className=\"law-footer government-actions\">\r\n                        <button onClick={() => handleApprove(law.id)} className=\"gov-action-button approve\">ìŠ¹ì¸</button>\r\n                        <button onClick={() => handleVeto(law.id)} className=\"gov-action-button veto\">ê±°ë¶€ê¶Œ í–‰ì‚¬</button>\r\n                    </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst Government = () => {\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  // íƒ­: ë²•ì•ˆ ê´€ë¦¬, êµ­ì„¸ì²­ë§Œ ìœ ì§€ (íˆ¬ìí•˜ê¸°, ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° ì œê±°ë¨)\r\n  const [activeTab, setActiveTab] = useState(\"lawManage\");\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    if (!classCode) {\r\n      return <AlchanLoading />;\r\n    }\r\n\r\n    switch (activeTab) {\r\n      case \"lawManage\":\r\n        return <LawManagement classCode={classCode} />;\r\n      case \"tax\":\r\n        return <NationalTaxService classCode={classCode} />;\r\n      default:\r\n        return <LawManagement classCode={classCode} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"government-container\">\r\n      <h1 className=\"government-header\">\r\n        ì •ë¶€ ({classCode ? `í•™ê¸‰: ${classCode}` : \"í•™ê¸‰ ì •ë³´ ì—†ìŒ\"})\r\n      </h1>\r\n\r\n      <div className=\"government-tabs\">\r\n        <button\r\n          className={`gov-tab-button ${\r\n            activeTab === \"lawManage\" ? \"active\" : \"\"\r\n          }`}\r\n          onClick={() => handleTabClick(\"lawManage\")}\r\n          disabled={!classCode}\r\n        >\r\n          ë²•ì•ˆ ê´€ë¦¬\r\n        </button>\r\n        <button\r\n          className={`gov-tab-button ${activeTab === \"tax\" ? \"active\" : \"\"}`}\r\n          onClick={() => handleTabClick(\"tax\")}\r\n          disabled={!classCode}\r\n        >\r\n          êµ­ì„¸ì²­\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"government-tab-content\">{renderTabContent()}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Government;"],"names":["formatDate","timestamp","date","toDate","Date","isNaN","getTime","toLocaleString","DEFAULT_TREASURY_DATA","totalAmount","stockTaxRevenue","stockCommissionRevenue","realEstateTransactionTaxRevenue","vatRevenue","auctionTaxRevenue","propertyHoldingTaxRevenue","itemMarketTaxRevenue","incomeTaxRevenue","corporateTaxRevenue","otherTaxRevenue","lastUpdated","DEFAULT_TAX_SETTINGS","stockTransactionTaxRate","realEstateTransactionTaxRate","itemStoreVATRate","auctionTransactionTaxRate","propertyHoldingTaxRate","propertyHoldingTaxInterval","itemMarketTransactionTaxRate","_ref","classCode","treasuryData","setTreasuryData","useState","taxSettings","setTaxSettings","adminCash","setAdminCash","loadingTreasury","setLoadingTreasury","loadingSettings","setLoadingSettings","activeTab","setActiveTab","editableSettings","setEditableSettings","fetchAdminCash","useCallback","async","usersRef","collection","db","q","query","where","snapshot","getDocs","empty","adminData","docs","data","cash","error","logger","concat","fetchTreasuryData","treasuryRef","doc","cached","getCachedDocument","_objectSpread","docSnap","getDoc","exists","invalidateCache","setDoc","createdAt","serverTimestamp","refetch","refetchTreasury","usePolling","interval","enabled","fetchTaxSettings","settingsRef","newSettings","merge","refetchSettings","handleSettingChange","e","name","value","target","numericValue","parseFloat","prev","handleIntervalChange","_jsxs","className","children","_jsx","totalTaxRevenue","Object","keys","filter","key","endsWith","reduce","sum","id","label","icon","map","tab","onClick","formatKoreanCurrency","amount","color","item","percentage","toFixed","style","width","type","step","min","max","options","field","includes","onChange","opt","placeholder","alert","updateDoc","dateString","getFullYear","getMonth","getDate","LawManagement","laws","setLaws","isAdmin","userDoc","useAuth","jobs","jobsRef","deps","canManageLaws","selectedJobIds","length","job","some","title","loading","lawsCollectionRef","loadedLaws","AlchanLoading","law","_law$approvalDate","proposerName","purpose","description","fine","approvalDate","toISOString","window","confirm","lawDocRef","lawId","status","finalStatus","finalApprovalDate","handleApprove","reason","prompt","trim","deadline","setDate","vetoReason","vetoDate","vetoDeadline","approvals","disapprovals","voters","handleVeto","Government","handleTabClick","tabName","disabled","renderTabContent","NationalTaxService"],"ignoreList":[],"sourceRoot":""}