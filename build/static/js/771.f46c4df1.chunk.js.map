{"version":3,"file":"static/js/771.f46c4df1.chunk.js","mappings":"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","sources":["pages/games/GonuGame.js"],"sourcesContent":["// src/GonuGame.js - UI/UX ê°œì„ \r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { db } from '../../firebase';\r\nimport {\r\n    doc,\r\n    setDoc,\r\n    getDoc,\r\n    runTransaction,\r\n    increment,\r\n    serverTimestamp,\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    deleteDoc\r\n} from 'firebase/firestore';\r\nimport { usePolling } from '../../hooks/usePolling';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\nimport './GonuGame.css';\r\nimport { AlchanLoading } from '../../components/AlchanLayout';\r\n\r\nconst BOARD_SIZE = 5;\r\n\r\n// ê³ ëˆ„ ê²Œì„ ì¢…ë¥˜ì™€ ì„¤ì •\r\nconst GONU_TYPES = {\r\n    hobak: {\r\n        name: 'í˜¸ë°•ê³ ëˆ„',\r\n        description: 'ê° í”Œë ˆì´ì–´ê°€ 5ê°œì˜ ë§ì„ ê°€ì§€ê³  ì‹œì‘. ìƒí•˜ì¢Œìš°ë¡œë§Œ ì´ë™ ê°€ëŠ¥.',\r\n        rules: [\r\n            'ë§ì€ ìƒí•˜ì¢Œìš° ì¸ì ‘í•œ ë¹ˆ ì¹¸ìœ¼ë¡œë§Œ ì´ë™ ê°€ëŠ¥',\r\n            'ìƒëŒ€ë°©ì´ ë” ì´ìƒ ì›€ì§ì¼ ìˆ˜ ì—†ê²Œ ë§Œë“¤ë©´ ìŠ¹ë¦¬',\r\n            'ëŒ€ê°ì„  ì´ë™ ë¶ˆê°€',\r\n            'ë§ì„ ì¡ëŠ” ê¸°ëŠ¥ì€ ì—†ìŒ'\r\n        ],\r\n        initialBoard: () => {\r\n            const board = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));\r\n            board[0][0] = 'B'; board[0][1] = 'B'; board[0][2] = 'B'; board[0][3] = 'B'; board[0][4] = 'B';\r\n            board[4][0] = 'R'; board[4][1] = 'R'; board[4][2] = 'R'; board[4][3] = 'R'; board[4][4] = 'R';\r\n            return board;\r\n        },\r\n        canCapture: false,\r\n        allowDiagonal: false\r\n    },\r\n    cham: {\r\n        name: 'ì°¸ê³ ëˆ„',\r\n        description: 'ê° í”Œë ˆì´ì–´ê°€ 4ê°œì˜ ë§ì„ ê°€ì§€ê³  ì‹œì‘. ìƒí•˜ì¢Œìš°ì™€ ëŒ€ê°ì„  ì´ë™ ê°€ëŠ¥.',\r\n        rules: [\r\n            'ë§ì€ ìƒí•˜ì¢Œìš° ë° ëŒ€ê°ì„  ì¸ì ‘í•œ ë¹ˆ ì¹¸ìœ¼ë¡œ ì´ë™ ê°€ëŠ¥',\r\n            'ìƒëŒ€ë°© ë§ì„ ë›°ì–´ë„˜ì–´ ì¡ì„ ìˆ˜ ìˆìŒ',\r\n            'ìƒëŒ€ë°© ë§ì„ ëª¨ë‘ ì¡ìœ¼ë©´ ìŠ¹ë¦¬'\r\n        ],\r\n        initialBoard: () => {\r\n            const board = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));\r\n            board[0][1] = 'B'; board[0][3] = 'B'; board[1][1] = 'B'; board[1][3] = 'B';\r\n            board[3][1] = 'R'; board[3][3] = 'R'; board[4][1] = 'R'; board[4][3] = 'R';\r\n            return board;\r\n        },\r\n        canCapture: true,\r\n        allowDiagonal: true\r\n    },\r\n    gonjil: {\r\n        name: 'ê³¤ì§ˆê³ ëˆ„',\r\n        description: 'ê° í”Œë ˆì´ì–´ê°€ 6ê°œì˜ ë§ì„ ê°€ì§€ê³  ì‹œì‘. í¬ìœ„í•˜ì—¬ ì¡ê¸° ê°€ëŠ¥.',\r\n        rules: [\r\n            'ë§ì€ ìƒí•˜ì¢Œìš°ë¡œë§Œ ì´ë™ ê°€ëŠ¥',\r\n            'ìƒëŒ€ë°© ë§ì„ í¬ìœ„í•˜ë©´ ì¡ì„ ìˆ˜ ìˆìŒ',\r\n            'ìƒëŒ€ë°© ë§ì„ ëª¨ë‘ ì¡ê±°ë‚˜ ì›€ì§ì¼ ìˆ˜ ì—†ê²Œ ë§Œë“¤ë©´ ìŠ¹ë¦¬'\r\n        ],\r\n        initialBoard: () => {\r\n            const board = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));\r\n            board[0][0] = 'B'; board[0][2] = 'B'; board[0][4] = 'B'; board[1][1] = 'B'; board[1][2] = 'B'; board[1][3] = 'B';\r\n            board[3][1] = 'R'; board[3][2] = 'R'; board[3][3] = 'R'; board[4][0] = 'R'; board[4][2] = 'R'; board[4][4] = 'R';\r\n            return board;\r\n        },\r\n        canCapture: true,\r\n        allowDiagonal: false\r\n    }\r\n};\r\n\r\n// Firestore ì§ë ¬í™”/ì—­ì§ë ¬í™” í•¨ìˆ˜\r\nconst serializeBoard = (board) => {\r\n    const serialized = {};\r\n    board.forEach((row, rIndex) => {\r\n        row.forEach((cell, cIndex) => {\r\n            if (cell) {\r\n                serialized[`${rIndex}-${cIndex}`] = cell;\r\n            }\r\n        });\r\n    });\r\n    return serialized;\r\n};\r\n\r\nconst deserializeBoard = (serializedBoard) => {\r\n    const board = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));\r\n    for (const key in serializedBoard) {\r\n        const [r, c] = key.split('-').map(Number);\r\n        board[r][c] = serializedBoard[key];\r\n    }\r\n    return board;\r\n};\r\n\r\nconst GonuGame = () => {\r\n    const { user, userDoc } = useAuth();\r\n    const [gameId, setGameId] = useState(null);\r\n    const [gameData, setGameData] = useState(null);\r\n    const [showCreateRoom, setShowCreateRoom] = useState(true);\r\n    const [newRoomId, setNewRoomId] = useState('');\r\n    const [feedback, setFeedback] = useState({ message: '', type: '' });\r\n    const [selectedPiece, setSelectedPiece] = useState(null);\r\n    const [selectedGameType, setSelectedGameType] = useState('hobak');\r\n    const [availableRooms, setAvailableRooms] = useState([]);\r\n    const [showRules, setShowRules] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const isMyTurn = gameData && user && gameData.turn === (gameData.players.B === user.uid ? 'B' : 'R');\r\n    const myColor = gameData && user && (gameData.players.B === user.uid ? 'B' : 'R');\r\n\r\n    const gameIdRef = useRef(gameId);\r\n    useEffect(() => { gameIdRef.current = gameId; }, [gameId]);\r\n    const gameDataRef = useRef(gameData);\r\n    useEffect(() => { gameDataRef.current = gameData; }, [gameData]);\r\n    const userRef = useRef(user);\r\n    useEffect(() => { userRef.current = user; }, [user]);\r\n\r\n    useEffect(() => {\r\n        const cleanup = () => {\r\n            const currentGameId = gameIdRef.current;\r\n            const currentGameData = gameDataRef.current;\r\n            const currentUser = userRef.current;\r\n            if (\r\n                currentGameId &&\r\n                currentGameData &&\r\n                currentUser &&\r\n                currentGameData.status === 'waiting' &&\r\n                currentGameData.players.B === currentUser.uid\r\n            ) {\r\n                deleteDoc(doc(db, 'gonuGames', currentGameId));\r\n            }\r\n        };\r\n\r\n        window.addEventListener('beforeunload', cleanup);\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeunload', cleanup);\r\n        };\r\n    }, []);\r\n\r\n    const fetchAvailableRooms = useCallback(async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        try {\r\n            const q = query(\r\n                collection(db, 'gonuGames'),\r\n                where('status', '==', 'waiting')\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n            const rooms = [];\r\n            querySnapshot.forEach((doc) => {\r\n                const data = doc.data();\r\n                if (data.players.B !== user.uid) {\r\n                    rooms.push({ id: doc.id, ...data });\r\n                }\r\n            });\r\n            setAvailableRooms(rooms);\r\n        } catch (error) {\r\n            console.error(\"Error fetching rooms:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        if (showCreateRoom && user) {\r\n            fetchAvailableRooms();\r\n            // ğŸ”¥ [ìµœì í™”] 5ì´ˆ â†’ 60ì´ˆë¡œ ë³€ê²½ (ì½ê¸° ë¹„ìš© ì ˆê°)\r\n            const interval = setInterval(fetchAvailableRooms, 60000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [showCreateRoom, user, fetchAvailableRooms]);\r\n\r\n    const fetchGameData = useCallback(async () => {\r\n        if (!gameId) return;\r\n\r\n        const gameDocRef = doc(db, 'gonuGames', gameId);\r\n        try {\r\n            const docSnap = await getDoc(gameDocRef);\r\n            if (docSnap.exists()) {\r\n                const rawData = docSnap.data();\r\n                const deserializedData = { ...rawData, board: deserializeBoard(rawData.board) };\r\n                setGameData(deserializedData);\r\n                setShowCreateRoom(false);\r\n\r\n                if (rawData.status === 'finished') {\r\n                    setTimeout(async () => {\r\n                        try { await deleteDoc(gameDocRef); } catch (error) { console.error(\"Error deleting finished game:\", error); }\r\n                    }, 10000);\r\n                }\r\n            } else {\r\n                setFeedback({ message: 'ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', type: 'error' });\r\n                setGameId(null);\r\n                setGameData(null);\r\n                setShowCreateRoom(true);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching game data:\", error);\r\n        }\r\n    }, [gameId]);\r\n\r\n    // ğŸ”¥ [ìµœì í™”] 60ì´ˆ â†’ 3ë¶„ìœ¼ë¡œ ë³€ê²½ (ì½ê¸° ë¹„ìš© ì ˆê°)\r\n    usePolling(fetchGameData, { interval: 180000, enabled: !!gameId });\r\n\r\n    useEffect(() => {\r\n        if (feedback.message) {\r\n            const timer = setTimeout(() => setFeedback({ message: '', type: '' }), 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [feedback.message]);\r\n\r\n    const handleCreateRoom = async () => {\r\n        if (!user) {\r\n            setFeedback({ message: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.', type: 'error' });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        const newGameId = Math.random().toString(36).substring(2, 8);\r\n        const gameRef = doc(db, 'gonuGames', newGameId);\r\n        const gameType = GONU_TYPES[selectedGameType];\r\n\r\n        const initialGameData = {\r\n            board: serializeBoard(gameType.initialBoard()),\r\n            players: { B: user.uid, R: null },\r\n            playerNames: { B: userDoc.name, R: null },\r\n            turn: 'B',\r\n            status: 'waiting',\r\n            winner: null,\r\n            gameType: selectedGameType,\r\n            gameName: gameType.name,\r\n            createdAt: serverTimestamp(),\r\n        };\r\n\r\n        try {\r\n            await setDoc(gameRef, initialGameData);\r\n            setGameId(newGameId);\r\n            setFeedback({ message: `${gameType.name} ë°© ìƒì„± ì™„ë£Œ! ì½”ë“œ: ${newGameId}`, type: 'success' });\r\n            await fetchGameData();\r\n        } catch (error) {\r\n            console.error(\"Error creating room:\", error);\r\n            setFeedback({ message: 'ë°© ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', type: 'error' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJoinRoom = async (roomIdToJoin) => {\r\n        const targetRoomId = roomIdToJoin || newRoomId.trim();\r\n        if (!targetRoomId) {\r\n            setFeedback({ message: 'ì°¸ê°€í•  ë°© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.', type: 'error' });\r\n            return;\r\n        }\r\n        if (!user) {\r\n            setFeedback({ message: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.', type: 'error' });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        const gameRef = doc(db, 'gonuGames', targetRoomId);\r\n\r\n        try {\r\n            await runTransaction(db, async (transaction) => {\r\n                const gameDoc = await transaction.get(gameRef);\r\n                if (!gameDoc.exists()) throw new Error(\"ë°©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n                const data = gameDoc.data();\r\n                if (data.players.R) throw new Error(\"ë°©ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.\");\r\n                if (data.players.B === user.uid) throw new Error(\"ìì‹ ì´ ë§Œë“  ë°©ì—ëŠ” ì°¸ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n\r\n                transaction.update(gameRef, {\r\n                    'players.R': user.uid,\r\n                    'playerNames.R': userDoc.name,\r\n                    status: 'active',\r\n                });\r\n            });\r\n            setGameId(targetRoomId);\r\n            await fetchGameData();\r\n        } catch (error) {\r\n            console.error(\"Error joining room: \", error);\r\n            setFeedback({ message: `ì°¸ê°€ ì‹¤íŒ¨: ${error.message}`, type: 'error' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAdminDeleteRoom = async (roomId) => {\r\n        if (!userDoc?.isAdmin) {\r\n            setFeedback({ message: 'ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.', type: 'error' });\r\n            return;\r\n        }\r\n        try {\r\n            await deleteDoc(doc(db, 'gonuGames', roomId));\r\n            setFeedback({ message: `ë°© ${roomId}ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, type: 'success' });\r\n            fetchAvailableRooms();\r\n        } catch (error) {\r\n            console.error(\"Error deleting room by admin:\", error);\r\n            setFeedback({ message: 'ë°© ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', type: 'error' });\r\n        }\r\n    };\r\n\r\n    const handleMove = useCallback(async (targetRow, targetCol) => {\r\n        if (!isMyTurn || !selectedPiece || !gameData) return;\r\n\r\n        const { row: fromRow, col: fromCol } = selectedPiece;\r\n        const currentBoard = gameData.board;\r\n        const piece = currentBoard[fromRow][fromCol];\r\n        const gameType = GONU_TYPES[gameData.gameType || 'hobak'];\r\n\r\n        if (piece !== myColor) return;\r\n\r\n        const opponentColor = myColor === 'B' ? 'R' : 'B';\r\n\r\n        const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];\r\n        if (gameType.allowDiagonal) {\r\n            directions.push([-1, -1], [-1, 1], [1, -1], [1, 1]);\r\n        }\r\n\r\n        let newRow = targetRow, newCol = targetCol, captured = [], isValidMove = false;\r\n\r\n        if (targetRow < 0 || targetRow >= BOARD_SIZE || targetCol < 0 || targetCol >= BOARD_SIZE) return;\r\n\r\n        if (gameType.name === 'ì°¸ê³ ëˆ„' && gameType.canCapture) {\r\n            const clickedPiece = currentBoard[targetRow][targetCol];\r\n            if (Math.abs(targetRow - fromRow) <= 1 && Math.abs(targetCol - fromCol) <= 1 && clickedPiece === opponentColor) {\r\n                const jumpRow = targetRow + (targetRow - fromRow), jumpCol = targetCol + (targetCol - fromCol);\r\n                if (jumpRow >= 0 && jumpRow < BOARD_SIZE && jumpCol >= 0 && jumpCol < BOARD_SIZE && currentBoard[jumpRow][jumpCol] === null) {\r\n                    newRow = jumpRow; newCol = jumpCol; captured.push([targetRow, targetCol]); isValidMove = true;\r\n                }\r\n            } else if (currentBoard[targetRow][targetCol] === null) {\r\n                isValidMove = directions.some(([dr, dc]) => fromRow + dr === targetRow && fromCol + dc === targetCol);\r\n            }\r\n        } else {\r\n            if (currentBoard[targetRow][targetCol] === null) {\r\n                isValidMove = directions.some(([dr, dc]) => fromRow + dr === targetRow && fromCol + dc === targetCol);\r\n            }\r\n        }\r\n\r\n        if (!isValidMove) {\r\n            setFeedback({ message: 'ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë™ì…ë‹ˆë‹¤.', type: 'error' });\r\n            return;\r\n        }\r\n\r\n        const gameRef = doc(db, 'gonuGames', gameId);\r\n        try {\r\n            await runTransaction(db, async (transaction) => {\r\n                const gameDoc = await transaction.get(gameRef);\r\n                if (!gameDoc.exists()) throw new Error('ê²Œì„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');\r\n                const currentData = gameDoc.data();\r\n                if (currentData.turn !== myColor) throw new Error('ìƒëŒ€ë°©ì˜ í„´ì…ë‹ˆë‹¤.');\r\n\r\n                let board = deserializeBoard(currentData.board);\r\n                board[fromRow][fromCol] = null;\r\n                captured.forEach(([r, c]) => { board[r][c] = null; });\r\n                board[newRow][newCol] = myColor;\r\n\r\n                let winner = null;\r\n                // ìŠ¹ë¦¬ ì¡°ê±´ ê²€ì‚¬ ë¡œì§ (ìƒëµ)\r\n\r\n                transaction.update(gameRef, {\r\n                    board: serializeBoard(board),\r\n                    turn: opponentColor,\r\n                    status: winner ? 'finished' : 'active',\r\n                    winner: winner,\r\n                });\r\n                if (winner) {\r\n                    const userDocRef = doc(db, 'users', user.uid);\r\n                    transaction.update(userDocRef, { coupons: increment(1) });\r\n\r\n                    // ğŸ”¥ í™œë™ ë¡œê·¸ ê¸°ë¡ (ê³ ëˆ„ ìŠ¹ë¦¬)\r\n                    logActivity(db, {\r\n                        classCode: userDoc?.classCode,\r\n                        userId: user.uid,\r\n                        userName: userDoc?.name || 'ì‚¬ìš©ì',\r\n                        type: ACTIVITY_TYPES.GAME_WIN,\r\n                        description: `${gameData.gameName || 'ê³ ëˆ„'} ìŠ¹ë¦¬ - ì¿ í° 1ê°œ íšë“`,\r\n                        couponAmount: 1,\r\n                        metadata: {\r\n                            gameType: 'gonu',\r\n                            gameVariant: gameData.gameType,\r\n                            gameName: gameData.gameName\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            setSelectedPiece(null);\r\n        } catch (error) {\r\n            console.error('Move error:', error);\r\n            setFeedback({ message: `ì´ë™ ì‹¤íŒ¨: ${error.message}`, type: 'error' });\r\n        }\r\n    }, [gameId, gameData, isMyTurn, myColor, selectedPiece, user?.uid]);\r\n\r\n    const handlePieceClick = (row, col) => {\r\n        if (!isMyTurn || gameData.status !== 'active') return;\r\n        const piece = gameData.board[row][col];\r\n        if (piece === myColor) {\r\n            setSelectedPiece({ row, col });\r\n        } else if (selectedPiece) {\r\n            handleMove(row, col);\r\n        }\r\n    };\r\n\r\n    const handleLeaveGame = async () => {\r\n        if (gameData && gameData.status === 'waiting' && gameId && gameData.players.B === user.uid) {\r\n            try { await deleteDoc(doc(db, 'gonuGames', gameId)); } catch (error) { console.error(\"Error deleting room:\", error); }\r\n        }\r\n\r\n        setGameId(null);\r\n        setGameData(null);\r\n        setShowCreateRoom(true);\r\n        setSelectedPiece(null);\r\n    };\r\n\r\n    if (showCreateRoom) {\r\n        return (\r\n            <div className=\"gonu-container\">\r\n                <div className=\"room-creation\">\r\n                    <h2>ğŸ¯ ê³ ëˆ„ ê²Œì„</h2>\r\n                    <p>ì „í†µ í•œêµ­ ë³´ë“œê²Œì„ì„ ì˜¨ë¼ì¸ìœ¼ë¡œ ì¦ê²¨ë³´ì„¸ìš”!</p>\r\n\r\n                    {feedback.message && <div className={`feedback ${feedback.type}`}>{feedback.message}</div>}\r\n\r\n                    <div className=\"game-type-selector\">\r\n                        <h3>ê²Œì„ ì¢…ë¥˜ ì„ íƒ</h3>\r\n                        <div className=\"game-types\">\r\n                            {Object.entries(GONU_TYPES).map(([key, type]) => (\r\n                                <label key={key} className={`game-type-option ${selectedGameType === key ? 'selected' : ''}`}>\r\n                                    <input type=\"radio\" value={key} checked={selectedGameType === key} onChange={(e) => setSelectedGameType(e.target.value)} />\r\n                                    <div className=\"game-type-info\">\r\n                                        <strong>{type.name}</strong>\r\n                                        <small>{type.description}</small>\r\n                                    </div>\r\n                                </label>\r\n                            ))}\r\n                        </div>\r\n                        <button onClick={() => setShowRules(!showRules)} className=\"rules-toggle-btn\">\r\n                            {showRules ? 'ê·œì¹™ ìˆ¨ê¸°ê¸°' : 'ê·œì¹™ ë³´ê¸°'}\r\n                        </button>\r\n\r\n                        {showRules && (\r\n                            <div className=\"rules-display\">\r\n                                <h4>{GONU_TYPES[selectedGameType].name} ê·œì¹™</h4>\r\n                                <ul>\r\n                                    {GONU_TYPES[selectedGameType].rules.map((rule, idx) => <li key={idx}>{rule}</li>)}\r\n                                </ul>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"room-actions\">\r\n                        <button onClick={handleCreateRoom} className=\"create-room-btn\" disabled={loading}>\r\n                            {loading ? <span className=\"loading\"></span> : 'ìƒˆë¡œìš´ ë°© ë§Œë“¤ê¸°'}\r\n                        </button>\r\n\r\n                        <div className=\"join-room\">\r\n                            <input type=\"text\" value={newRoomId} onChange={(e) => setNewRoomId(e.target.value)} placeholder=\"ë°© ì½”ë“œ ì…ë ¥\" maxLength=\"6\" />\r\n                            <button onClick={() => handleJoinRoom()} disabled={loading}>{loading ? <span className=\"loading\"></span> : 'ì½”ë“œë¡œ ì°¸ê°€'}</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {availableRooms.length > 0 && (\r\n                        <div className=\"available-rooms\">\r\n                            <h3>ğŸ“‹ ëŒ€ê¸° ì¤‘ì¸ ë°© ëª©ë¡</h3>\r\n                            <div className=\"rooms-list\">\r\n                                {availableRooms.map((room) => (\r\n                                    <div key={room.id} className=\"room-item\">\r\n                                        <div className=\"room-info\">\r\n                                            <span className=\"room-type\">{room.gameName}</span>\r\n                                            <span className=\"room-host\">í˜¸ìŠ¤íŠ¸: {room.playerNames.B}</span>\r\n                                            <span className=\"room-code\">ì½”ë“œ: {room.id}</span>\r\n                                        </div>\r\n                                        <div className=\"room-item-buttons\">\r\n                                            <button onClick={() => handleJoinRoom(room.id)} className=\"join-btn\" disabled={loading}>ì°¸ê°€</button>\r\n                                            {userDoc?.isAdmin && (\r\n                                                <button onClick={() => handleAdminDeleteRoom(room.id)} className=\"delete-btn\">ì‚­ì œ</button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!gameData) {\r\n        return <AlchanLoading />;\r\n    }\r\n\r\n    // Force strict dark mode background via inline style\r\n    const containerStyle = {\r\n        backgroundColor: '#0a0a12',\r\n        minHeight: '100%',\r\n        width: '100%'\r\n    };\r\n\r\n    return (\r\n        <div className=\"gonu-container\" style={containerStyle}>\r\n            <div className=\"game-info\">\r\n                <h2>{gameData.gameName || 'ê³ ëˆ„ ê²Œì„'} (ë°©: {gameId})</h2>\r\n                <div className=\"player-info\">\r\n                    <p className={`player-b ${gameData.turn === 'B' ? 'active-turn' : ''}`}>\r\n                        âš« {gameData.playerNames.B || 'í”Œë ˆì´ì–´ 1'} {gameData.players.B === user?.uid && '(ë‚˜)'}\r\n                    </p>\r\n                    <p className={`player-r ${gameData.turn === 'R' ? 'active-turn' : ''}`}>\r\n                        ğŸ”´ {gameData.playerNames.R || 'ëŒ€ê¸°ì¤‘...'} {gameData.players.R === user?.uid && '(ë‚˜)'}\r\n                    </p>\r\n                </div>\r\n\r\n                {gameData.status === 'finished' ? (\r\n                    <div className=\"game-status winner\">\r\n                        {gameData.winner === myColor ? 'ğŸ‰ ìŠ¹ë¦¬! ì¿ í° 1ê°œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!' : 'ğŸ˜¢ íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤.'}\r\n                    </div>\r\n                ) : gameData.status === 'waiting' ? (\r\n                    <div className=\"game-status\">ìƒëŒ€ë°©ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</div>\r\n                ) : (\r\n                    <div className=\"game-status\">{isMyTurn ? \"ğŸ¯ ë‹¹ì‹ ì˜ í„´ì…ë‹ˆë‹¤.\" : \"â³ ìƒëŒ€ë°©ì˜ í„´ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...\"}</div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"board-area\">\r\n                <div className=\"gonu-board\">\r\n                    {gameData.board.map((row, rIndex) => (\r\n                        row.map((cell, cIndex) => (\r\n                            <div\r\n                                key={`${rIndex}-${cIndex}`}\r\n                                className={`cell ${selectedPiece && selectedPiece.row === rIndex && selectedPiece.col === cIndex ? 'selected' : ''}`}\r\n                                onClick={() => handlePieceClick(rIndex, cIndex)}\r\n                            >\r\n                                {cell === 'B' && <div className=\"piece black\"></div>}\r\n                                {cell === 'R' && <div className=\"piece red\"></div>}\r\n                            </div>\r\n                        ))\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {feedback.message && <div className={`feedback ${feedback.type}`}>{feedback.message}</div>}\r\n\r\n            <button onClick={handleLeaveGame} className=\"leave-button\">\r\n                {gameData.status === 'finished' ? 'ë‚˜ê°€ê¸°' : 'ê²Œì„ ë‚˜ê°€ê¸°'}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GonuGame;\r\n"],"names":["GONU_TYPES","hobak","name","description","rules","initialBoard","board","Array","fill","map","canCapture","allowDiagonal","cham","gonjil","serializeBoard","serialized","forEach","row","rIndex","cell","cIndex","concat","deserializeBoard","serializedBoard","key","r","c","split","Number","GonuGame","user","userDoc","useAuth","gameId","setGameId","useState","gameData","setGameData","showCreateRoom","setShowCreateRoom","newRoomId","setNewRoomId","feedback","setFeedback","message","type","selectedPiece","setSelectedPiece","selectedGameType","setSelectedGameType","availableRooms","setAvailableRooms","showRules","setShowRules","loading","setLoading","isMyTurn","turn","players","B","uid","myColor","gameIdRef","useRef","useEffect","current","gameDataRef","userRef","cleanup","currentGameId","currentGameData","currentUser","status","deleteDoc","doc","db","window","addEventListener","removeEventListener","fetchAvailableRooms","useCallback","async","q","query","collection","where","querySnapshot","getDocs","rooms","data","push","_objectSpread","id","error","console","interval","setInterval","clearInterval","fetchGameData","gameDocRef","docSnap","getDoc","exists","rawData","deserializedData","setTimeout","usePolling","enabled","timer","clearTimeout","handleCreateRoom","newGameId","Math","random","toString","substring","gameRef","gameType","initialGameData","R","playerNames","winner","gameName","createdAt","serverTimestamp","setDoc","handleJoinRoom","targetRoomId","roomIdToJoin","trim","runTransaction","gameDoc","transaction","get","Error","update","handleMove","targetRow","targetCol","fromRow","col","fromCol","currentBoard","piece","opponentColor","directions","newRow","newCol","captured","isValidMove","clickedPiece","abs","jumpRow","jumpCol","some","_ref","dr","dc","_ref2","currentData","_ref3","_jsx","className","children","_jsxs","Object","entries","_ref4","value","checked","onChange","e","target","onClick","rule","idx","disabled","placeholder","maxLength","length","room","isAdmin","roomId","handleAdminDeleteRoom","AlchanLoading","style","backgroundColor","minHeight","width","handlePieceClick"],"sourceRoot":""}