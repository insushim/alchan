"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[530],{6555(e,t,a){a.d(t,{Gu:()=>o,LN:()=>r,pp:()=>i,rA:()=>c,zY:()=>l});a(5043);var s=a(2024),n=(a(5881),a(579));const r=e=>{let{children:t,className:a=""}=e;return(0,n.jsx)("div",{className:"min-h-full w-full bg-[#0a0a12] ".concat(a),children:(0,n.jsx)("div",{className:"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2",children:t})})},l=e=>{let{title:t,subtitle:a,icon:s,badge:r,action:l,backButton:o,className:i=""}=e;return(0,n.jsxs)("section",{className:"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ".concat(i),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[o,s&&(0,n.jsx)("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30",children:(0,n.jsx)(s,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h2",{className:"text-lg md:text-xl font-bold text-white tracking-tight",children:t}),r]}),a&&(0,n.jsx)("p",{className:"text-xs md:text-sm text-slate-400 font-medium",children:a})]})]}),l&&(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto",children:l})]})},o=e=>{let{message:t="\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}=e;return null},i=e=>{let{icon:t,title:a,description:s,action:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[t&&(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30",children:(0,n.jsx)(t,{className:"w-8 h-8 text-slate-400"})}),a&&(0,n.jsx)("h3",{className:"text-lg font-bold text-slate-300 mb-2",children:a}),s&&(0,n.jsx)("p",{className:"text-slate-400 font-medium mb-6 max-w-md",children:s}),r]})},c=e=>{let{children:t,icon:a,variant:r="primary",size:l="md",loading:o=!1,disabled:i=!1,onClick:c,className:d="",title:m}=e;return(0,n.jsxs)("button",{onClick:c,disabled:i||o,title:m,className:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat({primary:"bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30",secondary:"bg-slate-800 hover:bg-slate-700 text-slate-200",outline:"bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm","outline-green":"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm","outline-red":"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",danger:"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",success:"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm",ghost:"text-slate-400 hover:bg-slate-800 hover:text-white",indigo:"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}[r]," ").concat({sm:"px-4 py-2 text-sm",md:"px-5 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[l]," ").concat(d),children:[o?(0,n.jsx)(s.A,{className:"w-4 h-4 animate-spin"}):a?(0,n.jsx)(a,{className:"w-4 h-4"}):null,t]})}},9530(e,t,a){a.r(t),a.d(t,{default:()=>$});var s=a(2555),n=a(5043),r=a(5016),l=a(4689),o=a(1662),i=a(6648),c=a(6794),d=a(2029),m=a(920),u=a(773),x=a(3242),b=a(4919),h=a(614),p=a(8343),g=a(9270),v=a(359),y=a(5452),f=a(579);const j=async e=>{if(!e)return null;try{const t=(0,l.rJ)(l.db,"users"),a=(0,l.P)(t,(0,l._M)("classCode","==",e),(0,l._M)("isAdmin","==",!0),(0,l.AB)(1)),n=await(0,l.GG)(a);if(!n.empty){const e=n.docs[0];return(0,s.A)({id:e.id},e.data())}return null}catch(t){return y.vF.error("\uc120\uc0dd\ub2d8 \uacc4\uc815 \uc870\ud68c \uc624\ub958:",t),null}},N="font-sans bg-transparent p-8 min-h-0",w=e=>"px-5 py-4 rounded-xl mb-7 text-center text-base font-medium shadow-sm ".concat("error"===e?"text-red-400 bg-red-500/10 border border-red-500/30":"text-emerald-400 bg-emerald-500/10 border border-emerald-500/30"),D="grid gap-7 w-full",C="bg-[rgba(20,20,35,0.6)] shadow-[0_6px_20px_rgba(0,0,0,0.2)] rounded-2xl p-8 border border-white/5 backdrop-blur-[10px]",k="flex items-center gap-4 mb-6 pb-5 border-b-2 border-white/5",A="text-[26px] font-bold text-white tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",I="flex border-b-2 border-white/10 mb-5 gap-2",F=e=>"px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ".concat(e?"bg-indigo-500/20 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan drop-shadow-[0_0_5px_rgba(0,255,242,0.3)]":"font-medium text-slate-400 border-b-[3px] border-b-transparent"),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return"text-white px-5 py-3 rounded-[10px] border border-white/10 text-[15px] font-semibold transition-all duration-200 ".concat(e?"cursor-not-allowed opacity-50":"cursor-pointer shadow-[0_4px_12px_rgba(0,0,0,0.3)] hover:-translate-y-0.5 hover:brightness-110"," ").concat("primary"===t?"bg-sky-700/80":"danger"===t?"bg-red-600/80":"success"===t?"bg-emerald-600/80":"bg-gray-600")},P="text-center text-slate-400 py-8 text-base italic",S="w-full py-3.5 px-4 bg-black/20 border-2 border-white/10 rounded-[10px] mb-4 text-base text-white transition-colors duration-200 focus:outline-none focus:border-cyber-cyan focus:ring-2 focus:ring-cyber-cyan/10",E="fixed inset-0 bg-black/80 flex items-center justify-center z-[1000] backdrop-blur-[8px]",R="bg-[#1a1a2e] p-8 rounded-2xl w-[90%] max-w-[450px] relative shadow-[0_20px_60px_rgba(0,0,0,0.6)] border border-white/10 text-slate-200",M="text-2xl font-bold mb-5 text-white drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",G="absolute top-5 right-5 bg-transparent border-none cursor-pointer text-slate-400 transition-colors duration-200 hover:text-white",O=e=>"number"===typeof e?Math.round(e).toLocaleString():"0",V=e=>"".concat(O(e)).concat((0,p.mx)()),H=(e,t,a)=>{if(e<=0||!t||a<=0)return{interest:0,total:e};const s=e*Math.pow(1+t/100,a),n=s-e;return{interest:Math.round(n),total:Math.round(s)}},T=(e,t)=>Math.round(e*(t/100)),z={parking:(0,f.jsx)(d.A,{size:28,className:"text-sky-700"}),deposits:(0,f.jsx)(m.A,{size:28,className:"text-emerald-600"}),savings:(0,f.jsx)(u.A,{size:28,className:"text-violet-600"}),loans:(0,f.jsx)(x.A,{size:28,className:"text-red-600"})},L=e=>{let{product:t,onCancel:a,onMaturity:s}=e;const n=t.maturityDate&&new Date>=t.maturityDate,r=t.maturityDate?Math.max(0,(0,o.c)(t.maturityDate,new Date)):0,{interest:l,total:c}=(t.rate,H(t.balance,t.rate,t.termInDays)),d=T(t.balance,t.rate);return(0,f.jsxs)("div",{className:"p-5 border-2 rounded-xl mb-4 shadow-[0_2px_8px_rgba(0,0,0,0.2)] ".concat(n?"border-emerald-500/50 bg-emerald-500/10":"border-white/10 bg-black/20"),children:[(0,f.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"font-bold text-lg text-slate-200 mb-1",children:t.name}),n&&(0,f.jsx)("span",{className:"bg-emerald-500 text-white px-3 py-1 rounded-full text-[13px] font-semibold",children:"\ub9cc\uae30"})]}),(0,f.jsx)("span",{className:"text-xl font-bold text-cyber-cyan",children:V(t.balance)})]}),(0,f.jsxs)("div",{className:"text-[15px] text-slate-400 mt-4 grid gap-2.5 bg-black/20 p-4 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex justify-between",children:[(0,f.jsx)("span",{className:"font-medium",children:"\uae08\ub9ac (\uc77c):"}),(0,f.jsxs)("span",{className:"font-bold text-cyber-cyan",children:[t.rate,"%"]})]}),(0,f.jsxs)("div",{className:"flex justify-between",children:[(0,f.jsx)("span",{className:"font-medium",children:"\uc77c\uc77c \uc774\uc790:"}),(0,f.jsxs)("span",{className:"font-bold text-emerald-400",children:["+",V(d),"/\uc77c"]})]}),t.maturityDate&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flex justify-between",children:[(0,f.jsx)("span",{className:"font-medium",children:"\ub9cc\uae30\uc77c:"}),(0,f.jsx)("span",{className:"font-semibold text-slate-200",children:(0,i.GP)(t.maturityDate,"yyyy-MM-dd")})]}),!n&&(0,f.jsxs)("div",{className:"flex justify-between",children:[(0,f.jsx)("span",{className:"font-medium",children:"\ub0a8\uc740 \uae30\uac04:"}),(0,f.jsxs)("span",{className:"font-semibold text-cyber-cyan",children:[r,"\uc77c"]})]})]})]}),(0,f.jsx)("div",{className:"border-t border-dashed border-white/10 my-4"}),(0,f.jsxs)("div",{className:"text-[15px] text-slate-200 grid gap-2.5 bg-cyber-cyan/5 p-4 rounded-lg border border-cyber-cyan/10",children:[(0,f.jsxs)("div",{className:"flex justify-between",children:[(0,f.jsx)("span",{className:"font-semibold",children:"\ub9cc\uae30 \uc2dc \uc774\uc790 (\uc138\uc804):"}),(0,f.jsxs)("span",{className:"font-bold text-emerald-400 text-[17px]",children:["+",V(l)]})]}),(0,f.jsxs)("div",{className:"flex justify-between text-[17px]",children:[(0,f.jsx)("span",{className:"font-bold",children:"\ub9cc\uae30 \uc2dc \ucd1d\uc561:"}),(0,f.jsx)("span",{className:"font-bold text-cyber-cyan",children:V(c)})]})]}),(0,f.jsx)("div",{className:"mt-5 text-right",children:n?(0,f.jsxs)("button",{onClick:s,className:_(!1,"success")+" px-5 py-2.5 text-[15px]",children:["\ub9cc\uae30 \uc218\ub839 (",V(c),")"]}):(0,f.jsx)("button",{onClick:a,className:_(!1,"danger")+" px-5 py-2.5 text-[15px]",children:"loan"===t.type?"\ub300\ucd9c \uc0c1\ud658":"\uc911\ub3c4 \ud574\uc9c0"})})]})},U=e=>{let{product:t,onSubscribe:a}=e;const s=t.dailyRate,{interest:n}=H(1e5,s,t.termInDays);return(0,f.jsxs)("div",{className:"p-5 border-2 border-white/10 rounded-xl mb-3 flex justify-between items-center bg-black/20 shadow-[0_2px_8px_rgba(0,0,0,0.2)] transition-all duration-200",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"font-bold text-lg text-slate-200 mb-2",children:t.name}),(0,f.jsxs)("div",{className:"text-[15px] text-slate-400 mb-1.5",children:[(0,f.jsxs)("strong",{className:"text-cyber-cyan",children:["\uc77c ",t.dailyRate,"%"]})," ","(\uae30\uac04: ",t.termInDays,"\uc77c)"]}),(0,f.jsxs)("div",{className:"text-sm text-emerald-400 font-semibold",children:[(0,f.jsx)(b.A,{size:14,className:"inline mr-1"}),"10\ub9cc",(0,p.mx)()," \uac00\uc785 \uc2dc \uc608\uc0c1 \uc774\uc790: +",V(n)]})]}),(0,f.jsx)("button",{onClick:a,className:_(!1)+" px-6 py-3 text-base",children:"\uac00\uc785"})]})},B=e=>{let{title:t,icon:a,subscribedProducts:s,availableProducts:r,onSubscribe:l,onCancel:o,onMaturity:i}=e;const[c,d]=(0,n.useState)("subscribed");return(0,f.jsxs)("div",{className:C,children:[(0,f.jsxs)("div",{className:k,children:[a,(0,f.jsx)("h2",{className:A,children:t})]}),(0,f.jsxs)("div",{className:I,children:[(0,f.jsx)("button",{onClick:()=>d("subscribed"),className:F("subscribed"===c),children:"\uac00\uc785\ud55c \uc0c1\ud488"}),(0,f.jsx)("button",{onClick:()=>d("available"),className:F("available"===c),children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488"})]}),(0,f.jsxs)("div",{children:["subscribed"===c&&(s.length>0?s.map(e=>(0,f.jsx)(L,{product:e,onCancel:()=>o(e),onMaturity:()=>i(e)},e.id)):(0,f.jsx)("p",{className:P,children:"\uac00\uc785\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})),"available"===c&&(r.length>0?r.map(e=>(0,f.jsx)(U,{product:e,onSubscribe:()=>l(e)},e.id)):(0,f.jsx)("p",{className:P,children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}))]})]})},W=e=>{let{isOpen:t,onClose:a,product:s,onConfirm:r,isProcessing:l}=e;const[o,i]=(0,n.useState)("");if(!t||!s)return null;const c=parseFloat(o),d=s.dailyRate,{interest:m,total:u}=!isNaN(c)&&c>0?H(c,d,s.termInDays):{interest:0,total:0};return(0,f.jsx)("div",{className:E,onClick:a,children:(0,f.jsxs)("div",{className:R,onClick:e=>e.stopPropagation(),children:[(0,f.jsx)("button",{onClick:a,className:G,"aria-label":"\ub2eb\uae30",children:(0,f.jsx)(h.A,{size:24})}),(0,f.jsxs)("h3",{className:M,children:[s.name," \uac00\uc785"]}),(0,f.jsxs)("div",{className:"mb-5 p-4 bg-cyber-cyan/5 rounded-[10px] border border-cyber-cyan/20",children:[(0,f.jsxs)("div",{className:"text-[15px] text-slate-400 mb-2",children:[(0,f.jsx)("strong",{className:"text-cyber-cyan",children:"\uae08\ub9ac:"})," \uc77c"," ",s.dailyRate,"% (\uc77c\ubcf5\ub9ac)"]}),(0,f.jsxs)("div",{className:"text-[15px] text-slate-400",children:[(0,f.jsx)("strong",{className:"text-cyber-cyan",children:"\uae30\uac04:"})," ",s.termInDays,"\uc77c"]})]}),(0,f.jsx)("p",{className:"mb-3 text-base font-semibold text-slate-200",children:"\uac00\uc785 \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,f.jsx)("input",{type:"number",value:o,onChange:e=>i(e.target.value),className:S,placeholder:"".concat(V(s.minAmount||0)," \uc774\uc0c1"),autoFocus:!0}),c>0&&(0,f.jsxs)("div",{className:"mb-5 p-4 bg-emerald-500/10 rounded-[10px] border border-emerald-500/30",children:[(0,f.jsxs)("div",{className:"text-[15px] text-emerald-400 mb-1.5",children:["\uc608\uc0c1 \ub9cc\uae30 \uc774\uc790:"," ",(0,f.jsxs)("strong",{children:["+",V(m)]})]}),(0,f.jsxs)("div",{className:"text-base text-emerald-400 font-bold",children:["\ub9cc\uae30 \uc2dc \ucd1d\uc561: ",V(u)]})]}),(0,f.jsx)("button",{onClick:()=>{r(o),i("")},disabled:l||!o,className:_(l||!o)+" w-full text-[17px] py-4",children:l?"\ucc98\ub9ac \uc911...":"\uac00\uc785\ud558\uae30"})]})})},J=e=>{let{balance:t,dailyInterest:a,onDeposit:s,onWithdraw:r,isProcessing:l,userCash:o}=e;const[i,c]=(0,n.useState)("");return(0,f.jsxs)("div",{className:"bg-gradient-to-br from-[rgba(6,78,117,0.85)] to-[rgba(20,40,60,0.9)] text-white shadow-[0_8px_24px_rgba(0,0,0,0.4)] rounded-2xl p-8 border border-[rgba(0,180,216,0.25)] backdrop-blur-[10px]",children:[(0,f.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-5 border-b-2 border-[rgba(0,180,216,0.2)]",children:[(0,f.jsx)(d.A,{size:32,className:"text-cyan-300"}),(0,f.jsx)("h2",{className:"text-[26px] font-bold text-[#e0f7fa] tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",children:"\ud30c\ud0b9\ud1b5\uc7a5"})]}),(0,f.jsxs)("div",{className:"bg-[rgba(0,180,216,0.15)] px-4 py-3 rounded-[10px] mb-4 backdrop-blur-[10px] flex justify-between items-center border border-[rgba(0,180,216,0.2)]",children:[(0,f.jsx)("span",{className:"text-base font-medium text-slate-400",children:"\ubcf4\uc720 \ud604\uae08"}),(0,f.jsx)("span",{className:"text-xl font-bold text-[#e0f7fa]",children:V(o||0)})]}),(0,f.jsx)("div",{className:"text-[42px] font-bold text-[#e0f7fa] mb-2",children:V(t)}),(0,f.jsx)("p",{className:"text-base text-[#e0f7fa]/80 mb-4 font-medium",children:"\ub9e4\uc77c \uc774\uc790\uac00 \uc790\ub3d9 \uc9c0\uae09\ub418\ub294 \uc790\uc720 \uc785\ucd9c\uae08 \ud1b5\uc7a5"}),(0,f.jsxs)("div",{className:"bg-[rgba(0,180,216,0.12)] p-4 rounded-[10px] mb-6 backdrop-blur-[10px] border border-[rgba(0,180,216,0.2)]",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,f.jsx)(b.A,{size:20,className:"text-cyan-300"}),(0,f.jsx)("span",{className:"text-[15px] font-semibold text-slate-400",children:"\uc77c\uc77c \uc774\uc790 \uc218\uc775"})]}),(0,f.jsxs)("div",{className:"text-[28px] font-bold text-cyan-300",children:["+",V(a),"/\uc77c"]}),(0,f.jsx)("div",{className:"text-sm mt-1.5 text-slate-400/90",children:"(\uc77c 1% \ubcf5\ub9ac \uae30\uc900)"})]}),(0,f.jsxs)("div",{className:"flex gap-2.5",children:[(0,f.jsx)("input",{type:"number",value:i,onChange:e=>c(e.target.value),placeholder:"\uae08\uc561 \uc785\ub825",className:"flex-1 py-3.5 px-4 bg-black/30 border border-[rgba(0,180,216,0.3)] rounded-[10px] text-[17px] text-white focus:outline-none focus:border-cyber-cyan",disabled:l}),(0,f.jsx)("button",{onClick:()=>{s(i),c("")},disabled:l,className:_(l,"success")+" text-[17px] px-6 py-3.5",children:"\uc785\uae08"}),(0,f.jsx)("button",{onClick:()=>{r(i),c("")},disabled:l,className:_(l)+" !bg-slate-500/50 text-[17px] px-6 py-3.5",children:"\ucd9c\uae08"})]})]})},Y=e=>{let{auth:t={},depositProducts:a=[],installmentProducts:r=[],loanProducts:i=[],activeView:d="parking",onViewChange:m,onLoadUserProducts:u,allUserProducts:x=[],onDeleteUserProduct:b}=e;const{user:h,userDoc:C,loading:k,refreshUserDocument:A,isAdmin:I,addCash:F,deductCash:P}=t,S=null===h||void 0===h?void 0:h.uid,[E,R]=(0,n.useState)(!1),[M,G]=(0,n.useState)(null),[V,L]=(0,n.useState)(""),[U,Y]=(0,n.useState)(0),[K,q]=(0,n.useState)(0),[Z,Q]=(0,n.useState)([]),[X,$]=(0,n.useState)([]),[ee,te]=(0,n.useState)([]),[ae,se]=(0,n.useState)({isOpen:!1,product:null,type:""}),[ne,re]=(0,n.useState)((null===C||void 0===C?void 0:C.cash)||0),{currencyUnit:le}=(0,v.H2)(),oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;G(e),L(t),a&&setTimeout(()=>G(null),a)},ie=(0,n.useCallback)(async()=>{if(S){R(!0);try{const t=(0,l.H9)(l.db,"users",S,"financials","parkingAccount"),n=a.length>0?a[0]:null;if(n){const a=await(0,l.x7)(t);if(a.exists()){var e;const s=a.data(),r=null===(e=s.lastInterestDate)||void 0===e?void 0:e.toDate();if(!r||!(0,c.c)(r)){const e=r?(0,o.c)(new Date,r):1;if(e>0){const a=n.dailyRate||.0027,{interest:r}=H(s.balance||0,a,e);r>0&&(await(0,l.mZ)(t,{balance:(0,l.GV)(r),lastInterestDate:(0,l.O5)()}),oe("\ud30c\ud0b9\ud1b5\uc7a5 \uc774\uc790 ".concat(O(r)).concat(le,"\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),"success"))}}}else await(0,l.BN)(t,{balance:0,lastInterestDate:(0,l.O5)()})}const r=await(0,l.x7)(t);if(r.exists()){const e=r.data().balance||0;Y(e);const t=T(e,1);q(t)}const i=(0,l.rJ)(l.db,"users",S,"products"),d=await(0,l.GG)(i),m=[],u=[],x=[];d.forEach(e=>{var t;const a=(0,s.A)((0,s.A)({id:e.id},e.data()),{},{maturityDate:null!==(t=e.data().maturityDate)&&void 0!==t&&t.toDate?e.data().maturityDate.toDate():e.data().maturityDate});"deposit"===a.type?m.push(a):"savings"===a.type?u.push(a):"loan"===a.type&&x.push(a)}),Q(m),$(u),te(x)}catch(t){y.vF.error("\ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",t),oe("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}finally{R(!1)}}},[S,a]);(0,n.useEffect)(()=>{!k&&S&&ie()},[S,k,ie]),(0,n.useEffect)(()=>{void 0!==(null===C||void 0===C?void 0:C.cash)&&(re(C.cash),y.vF.log("[ParkingAccount] currentCash \uc5c5\ub370\uc774\ud2b8:",C.cash))},[null===C||void 0===C?void 0:C.cash]);const ce=(e,t)=>se({isOpen:!0,product:e,type:t}),de=()=>se({isOpen:!1,product:null,type:""}),me=async e=>{y.vF.log("--- handleMaturity \uc2dc\uc791 ---"),y.vF.log("\ucc98\ub9ac\ud560 \uc0c1\ud488:",e);const{id:t,name:a,type:s,balance:n,termInDays:r,rate:o,teacherId:i}=e,c="loan"===s;if(!S)return oe("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void y.vF.error("handleMaturity: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const d=o,{total:m,interest:u}=H(n,d,r);y.vF.log("\uacc4\uc0b0 \uacb0\uacfc: \uc6d0\uae08=".concat(n,", \uc774\uc790=").concat(u,", \ucd1d\uc561=").concat(m));const x=c?"\ub300\ucd9c \ub9cc\uae30 \uc0c1\ud658: \uc6d0\uae08 ".concat(O(n)).concat(le," + \uc774\uc790 ").concat(O(u)).concat(le," = ").concat(O(m)).concat(le,"\uc744 \uc0c1\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"\ub9cc\uae30 \uc218\ub839: \uc6d0\uae08 ".concat(O(n)).concat(le," + \uc774\uc790 ").concat(O(u)).concat(le," = ").concat(O(m)).concat(le,"\uc744 \uc218\ub839\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");if(!window.confirm(x))return void y.vF.log("\uc0ac\uc6a9\uc790\uac00 \ub9cc\uae30 \ucc98\ub9ac\ub97c \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.");R(!0),y.vF.log("\ub9cc\uae30 \ucc98\ub9ac \uc2dc\uc791...");let b=i;if(!b){const e=await j(null===C||void 0===C?void 0:C.classCode);if(!e)return oe("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","error"),void R(!1);b=e.id}y.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815 ID:",b);try{const e=(0,l.H9)(l.db,"users",S,"products",String(t));y.vF.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,l.c4)(l.db,async t=>{var a,s,n,r;y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const o=(0,l.H9)(l.db,"users",S),i=(0,l.H9)(l.db,"users",b),d=await t.get(o),u=await t.get(i);if(!d.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!u.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const x=null!==(a=null===(s=d.data())||void 0===s?void 0:s.cash)&&void 0!==a?a:0,h=null!==(n=null===(r=u.data())||void 0===r?void 0:r.cash)&&void 0!==n?n:0;if(c){if(x<m)throw new Error("\uc0c1\ud658\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(O(m)).concat(le,", \ubcf4\uc720: ").concat(O(x)).concat(le,")"));t.update(o,{cash:(0,l.GV)(-m)}),t.update(i,{cash:(0,l.GV)(m)}),y.vF.log("\ub300\ucd9c \uc0c1\ud658: \ud559\uc0dd -".concat(m,", \uc120\uc0dd\ub2d8 +").concat(m))}else{if(h<m)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \uc9c0\uae09\ud560 \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(O(m)).concat(le,")"));t.update(o,{cash:(0,l.GV)(m)}),t.update(i,{cash:(0,l.GV)(-m)}),y.vF.log("\ub9cc\uae30 \uc218\ub839: \ud559\uc0dd +".concat(m,", \uc120\uc0dd\ub2d8 -").concat(m))}t.delete(e),y.vF.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5");const r=c?"\ub300\ucd9c \uc0c1\ud658 \uc644\ub8cc: ".concat(O(m)).concat(le," (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c \uc774\uccb4)"):"\ub9cc\uae30 \uc218\ub839 \uc644\ub8cc: ".concat(O(m)).concat(le," (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c \uc9c0\uae09)");oe(r,"success");const o=c?g.gI.LOAN_REPAY:g.gI.DEPOSIT_MATURITY;(0,g.Mx)(l.db,{classCode:null===C||void 0===C?void 0:C.classCode,userId:S,userName:(null===C||void 0===C?void 0:C.name)||"\uc0ac\uc6a9\uc790",type:o,description:c?"\ub300\ucd9c \ub9cc\uae30 \uc0c1\ud658: ".concat(a," (\uc6d0\uae08: ").concat(O(n),", \uc774\uc790: ").concat(O(u),") - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c"):"".concat(a," \ub9cc\uae30 \uc218\ub839 (\uc6d0\uae08: ").concat(O(n),", \uc774\uc790: ").concat(O(u),") - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c"),amount:c?-m:m,metadata:{productName:a,productType:s,principal:n,interest:u,total:m,teacherId:b}}),A&&(y.vF.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),A().then(()=>{y.vF.log("[ParkingAccount] \ub9cc\uae30 \ucc98\ub9ac \ud6c4 userDoc \uac31\uc2e0 \uc644\ub8cc")})),y.vF.log("\uc804\uccb4 \ub370\uc774\ud130 \ub2e4\uc2dc \ub85c\ub4dc"),await ie()}catch(h){y.vF.error("\ub9cc\uae30 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",h),oe("\ucc98\ub9ac \uc624\ub958: ".concat(h.message),"error"),void 0!==(null===C||void 0===C?void 0:C.cash)&&(y.vF.log("\uc624\ub958 \ubc1c\uc0dd\uc73c\ub85c \ud604\uae08 \ub864\ubc31:",C.cash),re(C.cash))}finally{R(!1),y.vF.log("--- handleMaturity \uc885\ub8cc ---")}},ue=async e=>{y.vF.log("--- handleCancelEarly \uc2dc\uc791 ---"),y.vF.log("\uc911\ub3c4 \ud574\uc9c0\ud560 \uc0c1\ud488:",e);const{id:t,name:a,type:s,balance:n}=e,r="loan"===s;if(!S)return oe("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void y.vF.error("handleCancelEarly: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=r?"\ub300\ucd9c\uae08 ".concat(O(n)).concat(le,"\uc744 \uc0c1\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"'".concat(a,"'\uc744(\ub97c) \uc911\ub3c4 \ud574\uc9c0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? (\uc774\uc790 \uc5c6\uc774 \uc6d0\uae08\ub9cc \ubc18\ud658\ub429\ub2c8\ub2e4)");if(!window.confirm(o))return void y.vF.log("\uc0ac\uc6a9\uc790\uac00 \uc911\ub3c4 \ud574\uc9c0\ub97c \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.");R(!0),y.vF.log("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc2dc\uc791...");let i=e.teacherId;if(!i){const e=await j(null===C||void 0===C?void 0:C.classCode);if(!e)return oe("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","error"),void R(!1);i=e.id}y.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815 ID:",i);const c={deposit:[...Z],savings:[...X],loan:[...ee]},d=ne,m=r?-n:n;re(e=>e+m),"deposit"===s?Q(e=>e.filter(e=>e.id!==t)):"savings"===s?$(e=>e.filter(e=>e.id!==t)):"loan"===s&&te(e=>e.filter(e=>e.id!==t));try{const e=(0,l.H9)(l.db,"users",S,"products",String(t));y.vF.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,l.c4)(l.db,async t=>{var a,s,o,c;y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const d=(0,l.H9)(l.db,"users",S),m=(0,l.H9)(l.db,"users",i),u=await t.get(d),x=await t.get(m);if(!u.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!x.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const b=null!==(a=null===(s=u.data())||void 0===s?void 0:s.cash)&&void 0!==a?a:0,h=null!==(o=null===(c=x.data())||void 0===c?void 0:c.cash)&&void 0!==o?o:0;if(y.vF.log("\ud604\uc7ac \ubcf4\uc720 \ud604\uae08 (DB): ".concat(b,", \uc120\uc0dd\ub2d8 \ubcf4\uc720 \ud604\uae08: ").concat(h)),r){if(b<n)throw new Error("\ub300\ucd9c\uae08\uc744 \uc0c1\ud658\ud558\uae30\uc5d0 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");t.update(d,{cash:(0,l.GV)(-n)}),t.update(m,{cash:(0,l.GV)(n)}),y.vF.log("\ub300\ucd9c \uc911\ub3c4 \uc0c1\ud658: \ud559\uc0dd -".concat(n,", \uc120\uc0dd\ub2d8 +").concat(n))}else{if(h<n)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \uc9c0\uae09\ud560 \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(O(n)).concat(le,")"));t.update(d,{cash:(0,l.GV)(n)}),t.update(m,{cash:(0,l.GV)(-n)}),y.vF.log("\uc911\ub3c4 \ud574\uc9c0: \ud559\uc0dd +".concat(n,", \uc120\uc0dd\ub2d8 -").concat(n))}t.delete(e),y.vF.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),y.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5");const o=r?"\ub300\ucd9c \uc0c1\ud658 \uc644\ub8cc: ".concat(O(n)).concat(le," (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c \uc774\uccb4)"):"\uc911\ub3c4 \ud574\uc9c0 \uc644\ub8cc: \uc6d0\uae08 ".concat(O(n)).concat(le," \ubc18\ud658 (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c \uc9c0\uae09)");oe(o,"success");const c=r?g.gI.LOAN_REPAY:g.gI.DEPOSIT_WITHDRAW;(0,g.Mx)(l.db,{classCode:null===C||void 0===C?void 0:C.classCode,userId:S,userName:(null===C||void 0===C?void 0:C.name)||"\uc0ac\uc6a9\uc790",type:c,description:r?"\ub300\ucd9c \uc911\ub3c4 \uc0c1\ud658: ".concat(a," (").concat(O(n),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c"):"\uc911\ub3c4 \ud574\uc9c0: ".concat(a," (\uc6d0\uae08 ").concat(O(n),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c"),amount:m,metadata:{productName:a,productType:s,principal:n,isEarlyCancellation:!0,teacherId:i}}),A&&(y.vF.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),A()),await ie()}catch(u){y.vF.error("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",u),oe("\ucc98\ub9ac \uc624\ub958: ".concat(u.message),"error"),Q(c.deposit),$(c.savings),te(c.loan),re(d)}finally{R(!1),y.vF.log("--- handleCancelEarly \uc885\ub8cc ---")}},xe=async e=>{if(I()){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc0c1\ud488(".concat(e.name,")\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){R(!0);try{const t=(0,l.H9)(l.db,"users",e.userId,"products",e.id);await(0,l.kd)(t),oe("\uc0c1\ud488\uc774 \uac15\uc81c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success"),ie()}catch(t){y.vF.error("\uad00\ub9ac\uc790 \uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",t),oe("\uc0ad\uc81c \ucc98\ub9ac \uc624\ub958: ".concat(t.message),"error")}finally{R(!1)}}}else oe("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","error")};if(k)return(0,f.jsx)("div",{className:N,children:"\uae08\uc735 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."});if(!h)return(0,f.jsx)("div",{className:N,children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."});const be=e=>"px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ".concat(e?"bg-cyber-cyan/10 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan":"font-medium text-slate-400 border-b-[3px] border-b-transparent");return(0,f.jsxs)("div",{className:N,children:[(0,f.jsxs)("div",{className:"flex gap-2.5 mb-6 border-b-2 border-white/10 relative",children:[(0,f.jsx)("button",{onClick:()=>m&&m("parking"),className:be("parking"===d),children:"\ub098\uc758 \uae08\uc735 \ud604\ud669"}),I&&I()&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:()=>m&&m("admin"),className:be("admin"===d),children:"\uc0c1\ud488 \uad00\ub9ac"}),(0,f.jsx)("button",{onClick:()=>{m&&m("userProducts"),u&&u()},className:be("userProducts"===d),children:"\uc720\uc800 \uc0c1\ud488 \uc870\ud68c"})]})]}),M&&(0,f.jsx)("div",{className:w(V),children:M}),"userProducts"===d&&I&&I()&&(0,f.jsxs)("div",{className:"bg-[rgba(20,20,35,0.6)] rounded-2xl p-8 shadow-[0_6px_20px_rgba(0,0,0,0.3)] border border-white/5",children:[(0,f.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:"\uc720\uc800\ubcc4 \uac00\uc785 \uc0c1\ud488 \uc870\ud68c \ubc0f \uad00\ub9ac"}),(0,f.jsx)("p",{className:"text-sm text-slate-400 mb-5",children:"\ud074\ub798\uc2a4 \ub0b4 \ubaa8\ub4e0 \uc720\uc800\uc758 \uac00\uc785 \uc0c1\ud488\uc744 \uc870\ud68c\ud558\uace0 \ud544\uc694\uc2dc \uac15\uc81c \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),0===x.length?(0,f.jsx)("p",{className:"text-center p-10 text-slate-400",children:"\uac00\uc785\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,f.jsxs)("div",{className:"overflow-x-auto",children:[(0,f.jsxs)("table",{className:"w-full border-collapse",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"bg-white/5 border-b-2 border-white/10",children:[(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc0ac\uc6a9\uc790"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc0c1\ud488\uba85"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc885\ub958"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc794\uc561/\uae08\uc561"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uae08\ub9ac(\uc77c)"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uae30\uac04(\uc77c)"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\ub9cc\uae30\uc77c"}),(0,f.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uad00\ub9ac"})]})}),(0,f.jsx)("tbody",{children:x.map((e,t)=>{const a="deposit"===e.type?"\uc608\uae08":"savings"===e.type?"\uc801\uae08":"loan"===e.type?"\ub300\ucd9c":"\uae30\ud0c0";return(0,f.jsxs)("tr",{className:"border-b border-white/5",children:[(0,f.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.userName}),(0,f.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.name}),(0,f.jsx)("td",{className:"p-3 text-sm text-slate-200",children:a}),(0,f.jsx)("td",{className:"p-3 text-sm text-cyber-cyan",children:(0,p.bL)(e.balance||0)}),(0,f.jsxs)("td",{className:"p-3 text-sm text-slate-200",children:[e.rate,"%"]}),(0,f.jsxs)("td",{className:"p-3 text-sm text-slate-200",children:[e.termInDays,"\uc77c"]}),(0,f.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.maturityDate?new Date(e.maturityDate).toLocaleDateString("ko-KR"):"-"}),(0,f.jsx)("td",{className:"p-3",children:(0,f.jsx)("button",{onClick:()=>b&&b(e),className:_(!1,"danger")+" text-xs px-3 py-1.5",children:"\uc0ad\uc81c"})})]},"".concat(e.userId,"-").concat(e.id,"-").concat(t))})})]}),(0,f.jsxs)("div",{className:"mt-5 text-right text-slate-400 text-sm",children:["\ucd1d ",x.length,"\uac1c\uc758 \uc0c1\ud488"]})]})]}),"parking"===d&&(0,f.jsxs)("div",{className:D,children:[(0,f.jsx)(J,{balance:U,dailyInterest:K,onDeposit:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return oe("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");R(!0);const a=U,s=ne;Y(e=>e+t);try{if(!await P(t,"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08: ".concat(O(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");await(0,l.c4)(l.db,async e=>{const a=(0,l.H9)(l.db,"users",S,"financials","parkingAccount");(await e.get(a)).exists()?e.update(a,{balance:(0,l.GV)(t)}):e.set(a,{balance:t,lastInterestDate:(0,l.O5)()})}),oe("".concat(O(t)).concat(le," \uc785\uae08 \uc644\ub8cc."),"success"),(0,g.Mx)(l.db,{classCode:null===C||void 0===C?void 0:C.classCode,userId:S,userName:(null===C||void 0===C?void 0:C.name)||"\uc0ac\uc6a9\uc790",type:g.gI.PARKING_DEPOSIT,description:"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08 ".concat(O(t),"\uc6d0"),amount:-t,metadata:{parkingBalance:U+t}}),await ie()}catch(n){oe("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),Y(a),re(s)}finally{R(!1)}},onWithdraw:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return oe("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");R(!0);const a=U,s=ne;Y(e=>e-t);try{await(0,l.c4)(l.db,async e=>{var a,s;const n=(0,l.H9)(l.db,"users",S,"financials","parkingAccount");if((null!==(a=null===(s=(await e.get(n)).data())||void 0===s?void 0:s.balance)&&void 0!==a?a:0)<t)throw new Error("\ud30c\ud0b9\ud1b5\uc7a5 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");e.update(n,{balance:(0,l.GV)(-t)})});if(!await F(t,"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08: ".concat(O(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");oe("".concat(O(t)).concat(le," \ucd9c\uae08 \uc644\ub8cc."),"success"),(0,g.Mx)(l.db,{classCode:null===C||void 0===C?void 0:C.classCode,userId:S,userName:(null===C||void 0===C?void 0:C.name)||"\uc0ac\uc6a9\uc790",type:g.gI.PARKING_WITHDRAW,description:"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08 ".concat(O(t),"\uc6d0"),amount:t,metadata:{parkingBalance:U-t}}),await ie()}catch(n){oe("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),Y(a),re(s)}finally{R(!1)}},isProcessing:E,userCash:ne}),(0,f.jsx)(B,{title:"\uc608\uae08",icon:z.deposits,subscribedProducts:Z,availableProducts:a,onSubscribe:e=>ce(e,"deposits"),onCancel:ue,onMaturity:me,isAdmin:I(),onAdminDelete:xe}),(0,f.jsx)(B,{title:"\uc801\uae08",icon:z.savings,subscribedProducts:X,availableProducts:r,onSubscribe:e=>ce(e,"savings"),onCancel:ue,onMaturity:me,isAdmin:I(),onAdminDelete:xe}),(0,f.jsx)(B,{title:"\ub300\ucd9c",icon:z.loans,subscribedProducts:ee,availableProducts:i,onSubscribe:e=>ce(e,"loans"),onCancel:ue,onMaturity:me,isAdmin:I(),onAdminDelete:xe})]}),(0,f.jsx)(W,{isOpen:ae.isOpen,onClose:de,product:ae.product,onConfirm:async e=>{y.vF.log("--- handleSubscribe \uc2dc\uc791 ---");const t=parseFloat(e),{product:a,type:s}=ae;if(y.vF.log("\uac00\uc785\ud560 \uc0c1\ud488:",a),y.vF.log("\uac00\uc785 \uc720\ud615: ".concat(s,", \uac00\uc785 \uae08\uc561: ").concat(t)),isNaN(t)||t<=0)return y.vF.error("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uae08\uc561:",e),oe("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");if(a.minAmount&&t<a.minAmount)return y.vF.error("\ucd5c\uc18c \uac00\uc785 \uae08\uc561 \ubbf8\ub2ec: ".concat(t," < ").concat(a.minAmount)),oe("\ucd5c\uc18c \uac00\uc785 \uae08\uc561\uc740 ".concat(O(a.minAmount)).concat(le,"\uc785\ub2c8\ub2e4."),"error");if(a.maxAmount&&t>a.maxAmount)return y.vF.error("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4 \ucd08\uacfc: ".concat(t," > ").concat(a.maxAmount)),oe("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4\ub294 ".concat(O(a.maxAmount)).concat(le,"\uc785\ub2c8\ub2e4."),"error");R(!0),de();const n=await j(null===C||void 0===C?void 0:C.classCode);if(!n)return oe("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694.","error"),void R(!1);y.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815:",n.name,n.id);const r="temp_".concat(Date.now()),o=new Date(Date.now()+24*a.termInDays*60*60*1e3),i={id:r,name:a.name,termInDays:a.termInDays,rate:a.dailyRate,balance:t,startDate:new Date,maturityDate:o,type:"deposits"===s?"deposit":"savings"===s?"savings":"loan",isOptimistic:!0};"deposit"===i.type?Q(e=>[...e,i]):"savings"===i.type?$(e=>[...e,i]):"loan"===i.type&&te(e=>[...e,i]);const c="loans"===s?t:-t;re(e=>e+c);try{await(0,l.c4)(l.db,async e=>{var r,i,c,d;const m=(0,l.H9)(l.db,"users",S),u=(0,l.H9)(l.db,"users",n.id),x=await e.get(m),b=await e.get(u);if(!x.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!b.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const h=null!==(r=null===(i=x.data())||void 0===i?void 0:i.cash)&&void 0!==r?r:0,p=null!==(c=null===(d=b.data())||void 0===d?void 0:d.cash)&&void 0!==c?c:0;if("loans"!==s&&h<t)throw new Error("\ubcf4\uc720 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");if("loans"===s&&p<t)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \ub300\ucd9c \uac00\ub2a5\ud55c \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const g={name:a.name,termInDays:a.termInDays,rate:a.dailyRate,balance:t,startDate:(0,l.O5)(),maturityDate:o,type:"deposits"===s?"deposit":"savings"===s?"savings":"loan",teacherId:n.id,teacherName:n.name||"\uc120\uc0dd\ub2d8"},v=(0,l.H9)((0,l.rJ)(l.db,"users",S,"products"));e.set(v,g),"loans"===s?(e.update(m,{cash:(0,l.GV)(t)}),e.update(u,{cash:(0,l.GV)(-t)})):(e.update(m,{cash:(0,l.GV)(-t)}),e.update(u,{cash:(0,l.GV)(t)}))});const e="loans"===s?"\ub300\ucd9c":"\uac00\uc785";oe("".concat(a.name," ").concat(e,"\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. (\uc120\uc0dd\ub2d8 \uacc4\uc815\uacfc \uc5f0\ub3d9)"),"success");const r="deposits"===s||"savings"===s?g.gI.DEPOSIT_CREATE:g.gI.LOAN_CREATE;(0,g.Mx)(l.db,{classCode:null===C||void 0===C?void 0:C.classCode,userId:S,userName:(null===C||void 0===C?void 0:C.name)||"\uc0ac\uc6a9\uc790",type:r,description:"".concat(a.name," ").concat("loans"===s?"\ub300\ucd9c":"\uac00\uc785"," (").concat(O(t),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815 \uc5f0\ub3d9"),amount:c,metadata:{productName:a.name,productType:s,termInDays:a.termInDays,dailyRate:a.dailyRate,maturityDate:o.toISOString(),teacherId:n.id,teacherName:n.name}}),await ie(),A&&A()}catch(d){y.vF.error("\uac00\uc785 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",d),oe("\ucc98\ub9ac \uc624\ub958: ".concat(d.message),"error"),"deposit"===i.type?Q(e=>e.filter(e=>e.id!==r)):"savings"===i.type?$(e=>e.filter(e=>e.id!==r)):"loan"===i.type&&te(e=>e.filter(e=>e.id!==r)),re(e=>e-c)}finally{R(!1)}},isProcessing:E})]})};var K=a(5472),q=a(6555),Z=a(9463),Q=a(4589);const X=e=>Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,dailyRate:void 0===e.dailyRate||isNaN(e.dailyRate)?0:parseFloat(e.dailyRate),termInDays:void 0===e.termInDays||isNaN(e.termInDays)?1:parseInt(e.termInDays),minAmount:void 0===e.minAmount||isNaN(e.minAmount)?0:parseInt(e.minAmount),maxAmount:void 0===e.maxAmount||isNaN(e.maxAmount)?0:parseInt(e.maxAmount)})):(y.vF.error("convertAdminProductsToAccountFormat: \uc785\ub825\uac12\uc774 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4.",e),[]),$=()=>{var e,t,a,o,i;const c=(0,r.As)(),{currencyUnit:d}=(0,v.H2)(),[u,x]=(0,n.useState)(null),[b,h]=(0,n.useState)(""),[p,g]=(0,n.useState)("parking"),[j,N]=(0,n.useState)(!1),[w,D]=(0,n.useState)([]),[C,k]=(0,n.useState)([]),[A,I]=(0,n.useState)([]),[F,_]=(0,n.useState)([]),P=async()=>{var e,t,a;if(null!==c&&void 0!==c&&null!==(e=c.userDoc)&&void 0!==e&&e.classCode&&(null!==(t=c.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(a=c.userDoc)||void 0===a?void 0:a.role))){N(!0);try{const e=(0,K.query)((0,K.rJ)(l.db,"users"),(0,K.where)("classCode","==",c.userDoc.classCode)),t=await(0,K.getDocs)(e),a={};t.forEach(e=>{a[e.id]=(0,s.A)({id:e.id,name:e.data().name||e.data().nickname||"\uc54c \uc218 \uc5c6\uc74c"},e.data())});const n=[],r=Object.keys(a).map(async e=>{const t=(0,K.rJ)(l.db,"users",e,"products");return(await(0,K.getDocs)(t)).docs.map(t=>{var n;const r=t.data();return(0,s.A)((0,s.A)({firestoreId:t.id,userId:e,userName:a[e].name},r),{},{maturityDate:null!==(n=r.maturityDate)&&void 0!==n&&n.toDate?r.maturityDate.toDate():r.maturityDate})})});(await Promise.all(r)).forEach(e=>{n.push(...e)}),_(n),y.vF.log("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc644\ub8cc:",n)}catch(n){y.vF.error("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",n),x("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),h("error")}finally{N(!1)}}},S=(0,n.useMemo)(()=>X(w),[w]),E=(0,n.useMemo)(()=>X(C),[C]),R=(0,n.useMemo)(()=>X(A),[A]);(0,n.useEffect)(()=>{var e;c&&!c.loading&&c.user&&null!==(e=c.userDoc)&&void 0!==e&&e.classCode?(async()=>{var e;const t=null===c||void 0===c||null===(e=c.userDoc)||void 0===e?void 0:e.classCode;if(t&&"\ubbf8\uc9c0\uc815"!==t){N(!0);try{const e=await(0,l.jy)(t,!0,"Banking");e.deposits?D(e.deposits):D([]),e.savings?k(e.savings):k([]),e.loans?I(e.loans):I([])}catch(a){y.vF.error("\ubc45\ud0b9 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",a),x("\ub370\uc774\ud130 \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),h("error")}finally{N(!1)}}else y.vF.warn("[Banking] \uc720\ud6a8\ud55c \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \ubc45\ud0b9 \uc0c1\ud488\uc744 \ub85c\ub4dc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")})():!c||c.loading||c.user||(D([]),k([]),I([]))},[null===c||void 0===c?void 0:c.user,null===c||void 0===c?void 0:c.loading,null===c||void 0===c||null===(e=c.userDoc)||void 0===e?void 0:e.classCode]);const M=(e,t,a,n)=>{let r,l;switch(e){case"deposits":r=w,l=D;break;case"installments":r=C,l=k;break;case"loans":r=A,l=I;break;default:return}l(r.map((e,r)=>{if(r===t){const t=(0,s.A)({},e);if("termInDays"===a||"minAmount"===a||"maxAmount"===a){const e=parseInt(n);t[a]=isNaN(e)||e<("termInDays"===a?1:0)?"termInDays"===a?1:0:e}else if("dailyRate"===a){const e=parseFloat(n);t.dailyRate=isNaN(e)||e<0?0:e}else"name"===a&&(t[a]=n);return t}return e}))},G=async e=>{var t;if(null===c||void 0===c||null===(t=c.userDoc)||void 0===t||!t.classCode)return x("\ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void h("error");N(!0);try{let t,a;switch(e){case"deposits":t=w,a="deposits";break;case"installments":t=C,a="savings";break;case"loans":t=A,a="loans";break;default:return}await(0,l.OP)(c.userDoc.classCode,a,t),x("".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),h("success"),setTimeout(()=>{x(null),h("")},3e3)}catch(a){y.vF.error("".concat(e," \uc0c1\ud488 \uc800\uc7a5 \uc911 \uc624\ub958:"),a),x("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),h("error")}finally{N(!1)}},O=e=>{const t={id:Date.now(),name:"\uc0c8 ".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488"),dailyRate:.01,termInDays:365,minAmount:"loans"===e?0:1e5,maxAmount:"loans"===e?1e6:0};switch(e){case"deposits":D([...w,t]);break;case"installments":k([...C,t]);break;case"loans":I([...A,t])}},V=async(e,t)=>{var a;if(j)return;let s,n;switch(e){case"deposits":s=w,n=D;break;case"installments":s=C,n=k;break;case"loans":s=A,n=I;break;default:return}const r=s.filter((e,a)=>a!==t);if(n(r),null!==c&&void 0!==c&&null!==(a=c.userDoc)&&void 0!==a&&a.classCode){N(!0);try{const t="deposits"===e?"deposits":"installments"===e?"savings":"loans";await(0,l.OP)(c.userDoc.classCode,t,r),x("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),h("info"),setTimeout(()=>{x(null),h("")},2e3)}catch(o){y.vF.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",o),x("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),h("error"),n(s)}finally{N(!1)}}};return c.loading?(0,f.jsx)(Q.AlchanLoading,{}):(0,f.jsxs)(q.LN,{children:[j&&(0,f.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,f.jsx)(Q.AlchanLoading,{})}),(0,f.jsxs)("div",{className:"px-4 py-6 sm:px-6",children:[(0,f.jsx)(q.zY,{title:"\ud1b5\ud569 \uae08\uc735 \uad00\ub9ac",subtitle:"\uc608\uae08, \uc801\uae08, \ub300\ucd9c \uc0c1\ud488\uc744 \uad00\ub9ac\ud558\uc138\uc694",icon:m.A}),u&&(0,f.jsx)("div",{className:"mb-4 p-4 rounded-xl ".concat("error"===b?"bg-red-900/40 text-red-200 border border-red-800/50":"success"===b?"bg-emerald-900/40 text-emerald-200 border border-emerald-800/50":"bg-blue-900/40 text-blue-200 border border-blue-800/50"),children:u}),(0,f.jsxs)("div",{className:"admin"===p?"content-box":"",children:[("parking"===p||"userProducts"===p)&&(0,f.jsx)(Y,{auth:c,depositProducts:S,installmentProducts:E,loanProducts:R,activeView:p,onViewChange:g,onLoadUserProducts:P,allUserProducts:F,onDeleteUserProduct:async e=>{var t,a;if(y.vF.log("\uc0ad\uc81c \uc2dc\ub3c4:",e),!(null!==(t=c.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(a=c.userDoc)||void 0===a?void 0:a.role)))return y.vF.log("\uad00\ub9ac\uc790 \uad8c\ud55c \uc5c6\uc74c"),void alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(window.confirm("'".concat(e.userName,"'\ub2d8\uc758 '").concat(e.name,"' \uc0c1\ud488\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){N(!0);try{const t=e.firestoreId||String(e.id);y.vF.log("\uc0ad\uc81c \uacbd\ub85c:","users/".concat(e.userId,"/products/").concat(t)),y.vF.log("\uc0ac\uc6a9\ud560 \ubb38\uc11c ID:",t);const a=(0,K.H9)(l.db,"users",e.userId,"products",t);y.vF.log("\uc0ad\uc81c \uc2dc\uc791..."),await(0,K.kd)(a),y.vF.log("\uc0ad\uc81c \uc644\ub8cc"),x("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),h("success"),y.vF.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc2dc\uc791..."),await P(),y.vF.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc"),setTimeout(()=>{x(null),h("")},3e3)}catch(s){y.vF.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",s),x("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message)),h("error")}finally{N(!1)}}else y.vF.log("\uc0ac\uc6a9\uc790\uac00 \uc0ad\uc81c \ucde8\uc18c")},isLoading:j}),"admin"===p&&c.user&&((null===(t=c.userDoc)||void 0===t?void 0:t.isAdmin)||"admin"===(null===(a=c.userDoc)||void 0===a?void 0:a.role))&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,f.jsxs)("button",{onClick:()=>g("parking"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-cyber-cyan/10 border border-cyber-cyan/40 text-cyber-cyan hover:bg-cyber-cyan/20 hover:text-white transition-all text-sm font-semibold shadow-[0_0_8px_rgba(0,243,255,0.15)]",children:[(0,f.jsx)(Z.A,{size:16}),"\uc740\ud589\uc73c\ub85c \ub3cc\uc544\uac00\uae30"]})}),(0,f.jsx)("h2",{className:"admin-header",children:"\uad00\ub9ac\uc790 - \uae08\uc735 \uc0c1\ud488 \uad00\ub9ac (\uc77c \ubcf5\ub9ac \uae30\uc900)"}),(0,f.jsxs)("div",{className:"admin-section",children:[(0,f.jsx)("h3",{children:"\ud30c\ud0b9 \uc608\uae08 \uc0c1\ud488"}),(0,f.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,f.jsxs)("table",{className:"admin-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,f.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,f.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,f.jsxs)("th",{style:{width:"18%"},children:["\ucd5c\uc18c\uae08\uc561(",d,")"]}),(0,f.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,f.jsx)("tbody",{children:w.map((e,t)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"text",value:e.name||"",onChange:e=>M("deposits",t,"name",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>M("deposits",t,"termInDays",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>M("deposits",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.01",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>M("deposits",t,"minAmount",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("button",{onClick:()=>V("deposits",t),className:"admin-button-small delete-button ".concat(j?"disabled-button":""),disabled:j,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,f.jsxs)("div",{className:"admin-action-buttons",children:[(0,f.jsx)("button",{onClick:()=>O("deposits"),className:"admin-button-small add-button ".concat(j?"disabled-button":""),disabled:j,children:"\ucd94\uac00"}),(0,f.jsx)("button",{onClick:()=>G("deposits"),className:"admin-button-small save-button ".concat(j?"disabled-button":""),disabled:j,children:"\uc608\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,f.jsxs)("div",{className:"admin-section",children:[(0,f.jsx)("h3",{children:"\ud30c\ud0b9 \uc801\uae08 \uc0c1\ud488"}),(0,f.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,f.jsxs)("table",{className:"admin-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,f.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,f.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,f.jsxs)("th",{style:{width:"18%"},children:["\ucd5c\uc18c \uc6d4\ub0a9\uc785(",d,")"]}),(0,f.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,f.jsx)("tbody",{children:C.map((e,t)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"text",value:e.name||"",onChange:e=>M("installments",t,"name",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>M("installments",t,"termInDays",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>M("installments",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.011",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>M("installments",t,"minAmount",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("button",{onClick:()=>V("installments",t),className:"admin-button-small delete-button ".concat(j?"disabled-button":""),disabled:j,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,f.jsxs)("div",{className:"admin-action-buttons",children:[(0,f.jsx)("button",{onClick:()=>O("installments"),className:"admin-button-small add-button ".concat(j?"disabled-button":""),disabled:j,children:"\ucd94\uac00"}),(0,f.jsx)("button",{onClick:()=>G("installments"),className:"admin-button-small save-button ".concat(j?"disabled-button":""),disabled:j,children:"\uc801\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,f.jsxs)("div",{className:"admin-section",style:{borderBottom:"none"},children:[(0,f.jsx)("h3",{children:"\ud30c\ud0b9 \ub300\ucd9c \uc0c1\ud488"}),(0,f.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,f.jsxs)("table",{className:"admin-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,f.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,f.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,f.jsxs)("th",{style:{width:"18%"},children:["\ucd5c\ub300 \ub300\ucd9c\uc561(",d,")"]}),(0,f.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,f.jsx)("tbody",{children:A.map((e,t)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"text",value:e.name||"",onChange:e=>M("loans",t,"name",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>M("loans",t,"termInDays",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>M("loans",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.05",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("input",{type:"number",min:"0",value:e.maxAmount||0,onChange:e=>M("loans",t,"maxAmount",e.target.value),className:"admin-input",disabled:j,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,f.jsx)("td",{className:"admin-td",children:(0,f.jsx)("button",{onClick:()=>V("loans",t),className:"admin-button-small delete-button ".concat(j?"disabled-button":""),disabled:j,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,f.jsxs)("div",{className:"admin-action-buttons",children:[(0,f.jsx)("button",{onClick:()=>O("loans"),className:"admin-button-small add-button ".concat(j?"disabled-button":""),disabled:j,children:"\ucd94\uac00"}),(0,f.jsx)("button",{onClick:()=>G("loans"),className:"admin-button-small save-button ".concat(j?"disabled-button":""),disabled:j,children:"\ub300\ucd9c \uc0c1\ud488 \uc800\uc7a5"})]})]})]}),"admin"===p&&!(c.user&&(null!==(o=c.userDoc)&&void 0!==o&&o.isAdmin||"admin"===(null===(i=c.userDoc)||void 0===i?void 0:i.role)))&&(0,f.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800",children:"\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})]})]})]})}}}]);
//# sourceMappingURL=530.8b092f80.chunk.js.map