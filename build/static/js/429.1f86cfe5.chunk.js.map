{"version":3,"file":"static/js/429.1f86cfe5.chunk.js","mappings":"kKAKO,MAAMA,EAAoB,CAC/BC,SAAU,IACVC,OAAQ,KACRC,IAAK,KACLC,OAAQ,MAIV,IAAIC,EAAyB,GACzBC,GAAoB,EAExB,MAyBaC,EAAa,SAACC,GAA2B,IAAlBC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC7C,MAAM,SACJG,EAAWb,EAAkBE,OAAM,QACnCY,GAAU,EAAI,KACdC,EAAO,IACLN,GAEGO,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,OAC1BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAC7BK,GAAcC,EAAAA,EAAAA,QAAO,MACrBC,GAAaD,EAAAA,EAAAA,SAAO,GACpBE,GAAaF,EAAAA,EAAAA,QAAOhB,IAE1BmB,EAAAA,EAAAA,WAAU,KACRD,EAAWE,QAAUpB,GACpB,CAACA,IAEJ,MAAMqB,GAAYC,EAAAA,EAAAA,aAAYC,UAC5B,GAAKjB,EAKL,IACEQ,EAAS,MACT,MAAMU,QAAeN,EAAWE,UAE5BH,EAAWG,UACbX,EAAQe,GACRZ,GAAW,GAEf,CAAE,MAAOa,GACPC,EAAAA,GAAOb,MAAM,6DAA2BY,GACpCR,EAAWG,UACbN,EAASW,GACTb,GAAW,GAEf,MAlBEA,GAAW,IAmBZ,CAACN,IAEEqB,GAAUL,EAAAA,EAAAA,aAAY,KAC1BV,GAAW,GACJS,KACN,CAACA,IAoCJ,OAlCAF,EAAAA,EAAAA,WAAU,KAUR,GATAF,EAAWG,SAAU,EAGjBL,EAAYK,UACdQ,cAAcb,EAAYK,SAC1BL,EAAYK,QAAU,MAInBd,GAAWD,IAAab,EAAkBI,OAc/C,OARAC,EAAuBgC,KAAKR,GAvFAE,WAC9B,IAAIzB,GAAuD,IAAlCD,EAAuBM,OAAhD,CAGA,IAFAL,GAAoB,EAEbD,EAAuBM,OAAS,GAAG,CACxC,MAAM2B,EAAUjC,EAAuBkC,cACjCD,UAEA,IAAIE,QAAQC,GAAWC,WAAWD,EAAS,KACnD,CAEAnC,GAAoB,CAVgD,GAuFlEqC,GAGI9B,GAAYA,EAAW,IACzBU,EAAYK,QAAUgB,YAAYf,EAAWhB,IAGxC,KACLY,EAAWG,SAAU,EACjBL,EAAYK,UACdQ,cAAcb,EAAYK,SAC1BL,EAAYK,QAAU,OAjBxBR,GAAW,IAqBZ,CAACS,EAAWhB,EAAUC,KAAYC,IAE9B,CAAEC,OAAMG,UAASE,QAAOc,UACjC,C,4YCxGO,MAAMU,EAAUC,IAAA,IAAC,UAAEC,EAAS,MAAEC,GAAOF,EAAA,OAC1CG,EAAAA,EAAAA,MAAA,OAAKF,UAAWA,EAAWC,MAAOA,EAAOE,QAAQ,cAAcC,KAAK,OAAOC,MAAM,6BAA4BC,SAAA,EAC3GJ,EAAAA,EAAAA,MAAA,QAAAI,SAAA,EACEJ,EAAAA,EAAAA,MAAA,kBAAgBK,GAAG,eAAeC,GAAG,IAAIC,GAAG,IAAIC,GAAG,MAAMC,GAAG,MAAMC,cAAc,iBAAgBN,SAAA,EAC9FO,EAAAA,EAAAA,KAAA,QAAMC,OAAO,KAAKC,UAAU,aAC5BF,EAAAA,EAAAA,KAAA,QAAMC,OAAO,OAAOC,UAAU,gBAEhCb,EAAAA,EAAAA,MAAA,UAAQK,GAAG,OAAOS,EAAE,OAAOC,EAAE,OAAOC,MAAM,OAAOC,OAAO,OAAMb,SAAA,EAC5DO,EAAAA,EAAAA,KAAA,kBAAgBO,aAAa,IAAInC,OAAO,iBACxCiB,EAAAA,EAAAA,MAAA,WAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,eAAaQ,GAAG,iBAChBR,EAAAA,EAAAA,KAAA,eAAaQ,GAAG,4BAItBR,EAAAA,EAAAA,KAAA,QAAMG,EAAE,IAAIC,EAAE,IAAIC,MAAM,KAAKC,OAAO,KAAKG,GAAG,KAAKlB,KAAK,wBACtDS,EAAAA,EAAAA,KAAA,QACEU,EAAE,uBACFC,OAAO,QACPC,YAAY,KACZC,cAAc,QACdC,eAAe,QACfC,OAAO,gBAETf,EAAAA,EAAAA,KAAA,QACEU,EAAE,0EACFnB,KAAK,UACLoB,OAAO,UACPC,YAAY,UAMLI,EAAoB,CAE/B,CAAEtB,GAAI,aAAcuB,MAAO,+CAAaC,KAAMC,EAAAA,EAAiBC,KAAM,mBAAoBC,SAAU,QACnG,CAAE3B,GAAI,WAAYuB,MAAO,yCAAYC,KAAMI,EAAAA,EAAQF,KAAM,aAAcC,SAAU,QACjF,CAAE3B,GAAI,aAAcuB,MAAO,yCAAYC,KAAMK,EAAAA,EAAQH,KAAM,eAAgBC,SAAU,QAGrF,CAAE3B,GAAI,gBAAiBuB,MAAO,yCAAYC,KAAMM,EAAAA,EAAUC,YAAY,EAAMJ,SAAU,QACtF,CAAE3B,GAAI,WAAYuB,MAAO,eAAMC,KAAMQ,EAAAA,EAAQN,KAAM,uBAAwBO,SAAU,iBACrF,CAAEjC,GAAI,aAAcuB,MAAO,2BAAQC,KAAMU,EAAAA,EAAUR,KAAM,yBAA0BO,SAAU,iBAC7F,CAAEjC,GAAI,YAAauB,MAAO,4BAASC,KAAMW,EAAAA,EAAOT,KAAM,0BAA2BO,SAAU,iBAG3F,CAAEjC,GAAI,gBAAiBuB,MAAO,kCAAUC,KAAMY,EAAAA,EAASL,YAAY,EAAMJ,SAAU,WACnF,CAAE3B,GAAI,UAAWuB,MAAO,4BAASC,KAAMa,EAAAA,EAAOX,KAAM,YAAaO,SAAU,iBAC3E,CAAEjC,GAAI,YAAauB,MAAO,kCAAUC,KAAMc,EAAAA,EAAOZ,KAAM,aAAcO,SAAU,iBAC/E,CAAEjC,GAAI,eAAgBuB,MAAO,4BAASC,KAAMe,EAAAA,EAAab,KAAM,iBAAkBO,SAAU,iBAG3F,CAAEjC,GAAI,kBAAmBuB,MAAO,4BAASC,KAAMgB,EAAAA,EAAYT,YAAY,EAAMJ,SAAU,WACvF,CAAE3B,GAAI,UAAWuB,MAAO,eAAMC,KAAMiB,EAAAA,EAAUf,KAAM,WAAYO,SAAU,mBAC1E,CAAEjC,GAAI,eAAgBuB,MAAO,kCAAUC,KAAMkB,EAAAA,EAAWhB,KAAM,iBAAkBO,SAAU,mBAC1F,CAAEjC,GAAI,UAAWuB,MAAO,qBAAOC,KAAMmB,EAAAA,EAAQjB,KAAM,WAAYO,SAAU,mBACzE,CAAEjC,GAAI,aAAcuB,MAAO,qBAAOC,KAAMoB,EAAAA,EAAWlB,KAAM,eAAgBO,SAAU,mBAGnF,CAAEjC,GAAI,iBAAkBuB,MAAO,wCAAWC,KAAMqB,EAAAA,EAAUd,YAAY,EAAMJ,SAAU,WACtF,CAAE3B,GAAI,aAAcuB,MAAO,eAAMC,KAAMqB,EAAAA,EAAUnB,KAAM,cAAeO,SAAU,kBAChF,CAAEjC,GAAI,mBAAoBuB,MAAO,eAAMC,KAAMsB,EAAAA,EAAOpB,KAAM,qBAAsBO,SAAU,kBAC1F,CAAEjC,GAAI,QAASuB,MAAO,eAAMC,KAAMuB,EAAAA,EAAOrB,KAAM,SAAUO,SAAU,kBACnE,CAAEjC,GAAI,gBAAiBuB,MAAO,qBAAOC,KAAMwB,EAAAA,EAAQtB,KAAM,UAAWO,SAAU,kBAG9E,CAAEjC,GAAI,gBAAiBuB,MAAO,kCAAUC,KAAMyB,EAAAA,EAAUlB,YAAY,EAAMJ,SAAU,aACpF,CAAE3B,GAAI,gBAAiBuB,MAAO,kCAAUC,KAAM0B,EAAAA,EAAUxB,KAAM,kBAAmBO,SAAU,iBAC3F,CAAEjC,GAAI,eAAgBuB,MAAO,4BAASC,KAAM2B,EAAAA,EAAOzB,KAAM,gCAAiCO,SAAU,iBAGpG,CAAEjC,GAAI,gBAAiBuB,MAAO,kCAAUC,KAAM4B,EAAAA,EAAUrB,YAAY,EAAMJ,SAAU,QAAS0B,WAAW,GACxG,CAAErD,GAAI,gBAAiBuB,MAAO,kCAAUC,KAAM4B,EAAAA,EAAU1B,KAAM,sBAAuBO,SAAU,gBAAiBoB,WAAW,GAC3H,CAAErD,GAAI,oBAAqBuB,MAAO,4BAASC,KAAMsB,EAAAA,EAAOpB,KAAM,kBAAmBO,SAAU,gBAAiBoB,WAAW,GACvH,CAAErD,GAAI,gBAAiBuB,MAAO,qDAAcC,KAAMiB,EAAAA,EAAUf,KAAM,wBAAyBO,SAAU,gBAAiBoB,WAAW,GACjI,CAAErD,GAAI,iBAAkBuB,MAAO,2DAAeC,KAAMK,EAAAA,EAAQH,KAAM,yBAA0BO,SAAU,gBAAiBoB,WAAW,GAClI,CAAErD,GAAI,cAAeuB,MAAO,uCAAUC,KAAMyB,EAAAA,EAAUvB,KAAM,sBAAuBO,SAAU,gBAAiBoB,WAAW,GAGzH,CAAErD,GAAI,qBAAsBuB,MAAO,4BAASC,KAAMwB,EAAAA,EAAQjB,YAAY,EAAMJ,SAAU,aAAc2B,gBAAgB,GACpH,CAAEtD,GAAI,sBAAuBuB,MAAO,+CAAaC,KAAMwB,EAAAA,EAAQtB,KAAM,eAAgBO,SAAU,qBAAsBqB,gBAAgB,IAIjIC,EAAkB,CACtBC,KAAM,eACNC,KAAM,eACNC,QAAS,eACTC,QAAS,eACTC,UAAW,2BACXC,MAAO,eACPC,WAAY,uBAMRC,EAAcC,IAAA,IAAC,MAAEC,EAAK,SAAElE,GAAUiE,EAAA,OACtCrE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMM,SAAA,EACnBO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,0EAAyEM,SAAEkE,KACzF3D,EAAAA,EAAAA,KAAA,MAAIb,UAAU,YAAWM,SACtBA,QAQDmE,EAAWC,IAAA,IAAG3C,KAAM4C,EAAI,MAAE7C,EAAK,OAAE8C,EAAM,WAAEC,EAAU,QAAEC,GAASJ,EAAA,OAClE7D,EAAAA,EAAAA,KAAA,MAAAP,UACEJ,EAAAA,EAAAA,MAAA,UACE4E,QAASA,EACT9E,UAAS,qGAAA+E,OAAuGH,EAC1G,mFACA,wDACDtE,SAAA,EAELJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAAC8D,EAAI,CAAC3E,UAAS,qBAAA+E,OAAuBH,EAAS,kBAAoB,gDACnE/D,EAAAA,EAAAA,KAAA,QAAMb,UAAU,UAASM,SAAEwB,OAE5B+C,IAAchE,EAAAA,EAAAA,KAACmE,EAAAA,EAAW,CAAChF,UAAU,qCAQtCiF,EAAcC,IAAA,IAAGnD,KAAM4C,EAAI,MAAE7C,EAAK,OAAE8C,EAAM,QAAEE,GAASI,EAAA,OACzDhF,EAAAA,EAAAA,MAAA,UACE4E,QAASA,EACT9E,UAAS,6FAAA+E,OAA+FH,EAClG,0EACA,wDACDtE,SAAA,EAELO,EAAAA,EAAAA,KAAC8D,EAAI,CAAC3E,UAAU,gBACf8B,MAOCqD,EAAeC,IAAmE,IAAlE,SAAElD,EAAQ,SAAE5B,EAAQ,WAAE+E,EAAU,SAAEC,EAAQ,eAAEC,GAAgBH,EAChF,MAAMT,EAAOzC,EAASH,KAEtB,OACE7B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMM,SAAA,EACnBJ,EAAAA,EAAAA,MAAA,UACE4E,QAASQ,EACTtF,UAAS,+GAAA+E,OAAiHQ,EACpH,+DACA,wDACDjF,SAAA,EAELO,EAAAA,EAAAA,KAAC8D,EAAI,CACH3E,UAAS,qDAAA+E,OAAuDQ,EAAiB,kBAAoB,gDAGvG1E,EAAAA,EAAAA,KAAA,QAAMb,UAAU,mBAAkBM,SAAE4B,EAASJ,SAC7CjB,EAAAA,EAAAA,KAACmE,EAAAA,EAAW,CACVhF,UAAS,0EAAA+E,OAA4EM,EAAa,aAAe,UAIrHxE,EAAAA,EAAAA,KAAA,OACEb,UAAS,+CAAA+E,OAAiDM,EAAa,uBAAyB,qBAC3F/E,UAELO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uDAAsDM,SAClEA,UAUI,SAASkF,EAAaC,GAA4C,IAA3C,OAAEC,EAAM,QAAEC,EAAO,YAAEC,GAAc,GAAOH,EAC5E,MAAMI,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACX,QAAEC,EAAO,OAAEC,IAAWC,EAAAA,EAAAA,OAErBC,EAAoBC,IAAyBlI,EAAAA,EAAAA,UAAS,CAAC,IACvDmI,EAAUC,IAAepI,EAAAA,EAAAA,UAASqI,OAAOC,WAAa,MAE7D7H,EAAAA,EAAAA,WAAU,KACR,MAAM8H,EAAeA,IAAMH,EAAYC,OAAOC,WAAa,KAE3D,OADAD,OAAOG,iBAAiB,SAAUD,GAC3B,IAAMF,OAAOI,oBAAoB,SAAUF,IACjD,IAEH,MAAMG,GAAiB9H,EAAAA,EAAAA,aAAa+H,IAClCT,EAAsBU,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACrBD,GAAI,IACP,CAACD,IAAcC,EAAKD,OAErB,IAEGG,GAAWlI,EAAAA,EAAAA,aAAakD,KACvBA,IACE4D,EAASqB,WAAajF,GAAQ4D,EAASqB,SAASC,WAAW,GAADpC,OAAI9C,EAAI,OACxE,CAAC4D,EAASqB,WAEP3B,GAAiBxG,EAAAA,EAAAA,aAAa+H,GAC3BjF,EAAkBuF,KAAKC,GAC5BA,EAAK7E,WAAasE,GAAcG,EAASI,EAAKpF,OAE/C,CAACgF,IAEEK,GAAkBvI,EAAAA,EAAAA,aAAasI,IAC/BA,EAAKpF,OACP8D,EAASsB,EAAKpF,MACVqE,IAAiB,OAAPX,QAAO,IAAPA,GAAAA,OAEf,CAACI,EAAUO,EAAUX,IAElB4B,GAAexI,EAAAA,EAAAA,aAAYC,UAC/B,IACMkH,UACIA,IACNH,EAAS,UAEb,CAAE,MAAOyB,GACPzB,EAAS,SACX,GACC,CAACG,EAAQH,IAEN0B,GAAiB,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAASwB,WAAkB,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAASyB,cACvCA,EAAsB,OAAPzB,QAAO,IAAPA,OAAO,EAAPA,EAASyB,aAE9B,IAAIC,EAAW,eACJ,OAAP1B,QAAO,IAAPA,GAAAA,EAASyB,aAAcC,EAAW,4BACtB,OAAP1B,QAAO,IAAPA,GAAAA,EAASwB,UAASE,EAAW,gBAEtC,MAAMC,GAAkB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,QAAe,OAAP5B,QAAO,IAAPA,OAAO,EAAPA,EAAS6B,WAAY,qBAGjDC,EAAqBC,IACzB,MAAMC,EAAQpG,EAAkBD,OAAOyF,GACjCA,EAAKnF,WAAa8F,MAClBX,EAAKzD,YAAc6D,MACnBJ,EAAKxD,iBAAmB6D,KAI9B,OAAqB,IAAjBO,EAAMrK,OAAqB,MAG7BiD,EAAAA,EAAAA,KAACyD,EAAW,CAAmBE,MAAOV,EAAgBkE,GAAa1H,SAChE2H,EAAMC,IAAIb,IACT,GAAIA,EAAK/E,WAAY,CACnB,MAAM6F,EAAatG,EAAkBD,OAAOwG,GACtCA,EAAM5F,WAAa6E,EAAK9G,OACxB6H,EAAMxE,YAAc6D,MACpBW,EAAMvE,iBAAmB6D,KAI/B,OAA0B,IAAtBS,EAAWvK,OAAqB,MAGlCiD,EAAAA,EAAAA,KAACsE,EAAY,CAEXjD,SAAUmF,EACVhC,WAAYe,EAAmBiB,EAAK9G,KAAOgF,EAAe8B,EAAK9G,IAC/D+E,SAAUA,IAAMuB,EAAeQ,EAAK9G,IACpCgF,eAAgBA,EAAe8B,EAAK9G,IAAID,SAEvC6H,EAAWD,IAAIE,GAEVA,EAAMC,YAENxH,EAAAA,EAAAA,KAAA,OAAoBb,UAAU,uBAAsBM,UAClDO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,qEAAoEM,SACjF8H,EAAMtG,SAFDsG,EAAM7H,KASlBM,EAAAA,EAAAA,KAACoE,EAAW,CAEVlD,KAAMqG,EAAMrG,KACZD,MAAOsG,EAAMtG,MACb8C,OAAQqC,EAASmB,EAAMnG,MACvB6C,QAASA,IAAMwC,EAAgBc,IAJ1BA,EAAM7H,MApBZ8G,EAAK9G,GA8BhB,CAAO,OAAK8G,EAAK7E,SAWV,MATH3B,EAAAA,EAAAA,KAAC4D,EAAQ,CAEP1C,KAAMsF,EAAKtF,KACXD,MAAOuF,EAAKvF,MACZ8C,OAAQqC,EAASI,EAAKpF,MACtB6C,QAASA,IAAMwC,EAAgBD,IAJ1BA,EAAK9G,OA/CFyH,IA8DtB,OAAIpC,IAAgBU,GAEhBpG,EAAAA,EAAAA,MAAA,SAAOF,UAAU,iJAAgJM,SAAA,EAE/JO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,+GAA8GM,UAC3HO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uCAAsCM,UACnDO,EAAAA,EAAAA,KAACf,EAAO,CAACG,MAAO,CAAEiB,MAAO,OAAQC,OAAQ,eAK7CN,EAAAA,EAAAA,KAAA,OAAKb,UAAU,6CAA4CM,SACxDuB,EAAkBD,OAAOyF,IAASA,EAAK7E,WAAa6E,EAAK/E,YAAY4F,IAAIb,IACxE,GAAIA,EAAKzD,YAAc6D,EAAS,OAAO,KACvC,GAAIJ,EAAKxD,iBAAmB6D,EAAc,OAAO,KACjD,MAAM/C,EAAO0C,EAAKtF,KACZ6C,EAASqC,EAASI,EAAKpF,MAC7B,OACEpB,EAAAA,EAAAA,KAAA,UAEEiE,QAASA,IAAMwC,EAAgBD,GAC/B7C,MAAO6C,EAAKvF,MACZ9B,UAAS,8FAAA+E,OAAgGH,EACnG,wGACA,kIACDtE,UAELO,EAAAA,EAAAA,KAAC8D,EAAI,CAAC2D,KAAM,MARPjB,EAAK9G,SAelBM,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gDAA+CM,UAC5DO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qIAAoIM,SAChJsH,EAASW,OAAO,WAQzBrI,EAAAA,EAAAA,MAAAsI,EAAAA,SAAA,CAAAlI,SAAA,CAEGgG,GAAYZ,IACX7E,EAAAA,EAAAA,KAAA,OACEb,UAAU,gEACV8E,QAASa,KAKbzF,EAAAA,EAAAA,MAAA,SACEF,UAAS,iMAAA+E,OAELuB,EACEZ,EAAS,gBAAkB,oBAC3B,yBAAwB,qFAG5BpF,SAAA,EAGFJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wLAAuLM,SAAA,EAEpMO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,iEACfa,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uEAEfE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDM,SAAA,EAElEO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,+DAA8DM,UAC3EO,EAAAA,EAAAA,KAACf,EAAO,CAACG,MAAO,CAAEiB,MAAO,OAAQC,OAAQ,aAE3CjB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BM,SAAA,EAC3CO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,0GAAyGM,SAAC,kBAC1HO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,gFAA+EM,SAAC,iBAKnGgG,IACCzF,EAAAA,EAAAA,KAAA,UACEiE,QAASa,EACT3F,UAAU,8GAA6GM,UAEvHO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAC,CAACH,KAAM,WAMfpI,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4DAA2DM,SAAA,CACvEyH,EAAkB,QAClBA,EAAkB,QAClBA,EAAkB,WAClBA,EAAkB,WAClBA,EAAkB,aAClBA,EAAkB,SAClBA,EAAkB,kBAIrBlH,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gDAA+CM,UAC5DJ,EAAAA,EAAAA,MAAA,OACE4E,QAASyC,EACTvH,UAAU,uKAAsKM,SAAA,EAEhLO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,6HAA4HM,SACxIsH,EAASW,OAAO,MAEnBrI,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBM,SAAA,EAC7BO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAEsH,KAC1D/G,EAAAA,EAAAA,KAAA,KAAGb,UAAU,kCAAiCM,SAAEqH,QAElD9G,EAAAA,EAAAA,KAAC6H,EAAAA,EAAM,CAAC1I,UAAU,gFAM9B,C,8HCtbU2I,GAAAA,EAYAxG,EAAAA,EAgBAC,EAAAA,EAgBAU,EAAAA,EAgBAT,EAAAA,EAgBAU,EAAAA,EAgBAM,EAAAA,EAgBAuF,GAAAA,E,iFC8GV,SAlOO,SAAsB7I,GAAuB,IAAtB,OAAE2F,EAAM,QAAEC,GAAS5F,EAC/C,MAAM,WAAE8I,EAAU,eAAEC,EAAc,SAAEC,EAAQ,YAAEC,IAAgBC,EAAAA,EAAAA,OACxD,cAAEC,GD8PH,WACL,MAAM,KAAEC,IAAShD,EAAAA,EAAAA,OACViD,EAAcC,IAAmBlL,EAAAA,EAAAA,WAAS,IAC1CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAuEvC,OArEAS,EAAAA,EAAAA,WAAU,KACC,OAAJuK,QAAI,IAAJA,GAAAA,EAAMG,IAKWtK,WACpB,IACE,MAAMuK,GAAcC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASN,EAAKG,IAAK,WAAY,YACrDI,QAAoBC,EAAAA,EAAAA,IAAOJ,GAE5BG,EAAYE,UAAaF,EAAYzL,OAAO4L,WAC/CR,GAAgB,EAEpB,CAAE,MAAO/K,GACPa,EAAAA,GAAOb,MAAM,sDAAeA,EAC9B,CAAC,QACCD,GAAW,EACb,GAGFyL,GAnBEzL,GAAW,IAoBZ,CAAK,OAAJ8K,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MA+CH,CACLF,eACAhL,UACA2L,kBAhDuBhL,EAAAA,EAAAA,aAAYC,UACnC,GAAS,OAAJmK,QAAI,IAAJA,GAAAA,EAAMG,IAEX,IACE,MAAMC,GAAcC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASN,EAAKG,IAAK,WAAY,kBACrDU,EAAAA,EAAAA,IAAOT,EAAa,CACxBM,WAAW,EACXI,aAAaC,EAAAA,EAAAA,QAEfb,GAAgB,EAClB,CAAE,MAAO/K,GACPa,EAAAA,GAAOb,MAAM,mEAAkBA,EACjC,GACC,CAAK,OAAJ6K,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MAoCRa,cAlCmBpL,EAAAA,EAAAA,aAAYC,UAC/B,GAAS,OAAJmK,QAAI,IAAJA,GAAAA,EAAMG,IAEX,IACE,MAAMC,GAAcC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASN,EAAKG,IAAK,WAAY,kBACrDU,EAAAA,EAAAA,IAAOT,EAAa,CACxBM,WAAW,EACXO,SAAS,EACTC,WAAWH,EAAAA,EAAAA,QAEbb,GAAgB,EAClB,CAAE,MAAO/K,GACPa,EAAAA,GAAOb,MAAM,mEAAkBA,EACjC,GACC,CAAK,OAAJ6K,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MAqBRJ,eAnBoBnK,EAAAA,EAAAA,aAAYC,UAChC,GAAS,OAAJmK,QAAI,IAAJA,GAAAA,EAAMG,IAEX,IACE,MAAMC,GAAcC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASN,EAAKG,IAAK,WAAY,kBACrDU,EAAAA,EAAAA,IAAOT,EAAa,CACxBM,WAAW,IAEbR,GAAgB,EAClB,CAAE,MAAO/K,GACPa,EAAAA,GAAOb,MAAM,sDAAeA,EAC9B,GACC,CAAK,OAAJ6K,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MASZ,CC/U4BgB,IACnBC,EAAeC,IAAoBrM,EAAAA,EAAAA,UACS,UAAjDsM,aAAaC,QAAQ,0BAEhBC,EAAQC,IAAazM,EAAAA,EAAAA,UACgB,UAA1CsM,aAAaC,QAAQ,kBAsBvB,OAAKhF,GAGH7E,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uFAAsFM,UACnGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gGAA+FM,SAAA,EAE5GJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sFAAqFM,SAAA,EAClGO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,kDAAiDM,SAAC,kBAChEO,EAAAA,EAAAA,KAAA,UACEiE,QAASa,EACT3F,UAAU,8EAA6EM,UAEvFO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAC,CAACH,KAAM,GAAItI,UAAU,wBAK3BE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gCAA+BM,SAAA,EAE5CJ,EAAAA,EAAAA,MAAA,WAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,uFAAsFM,SAAC,kBAKrGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2DAA0DM,SAAA,EACvEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCM,SAAA,EAChDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,CACrCuI,GACChI,EAAAA,EAAAA,KAACgK,GAAAA,EAAI,CAACvC,KAAM,GAAItI,UAAU,qBAE1Ba,EAAAA,EAAAA,KAACiK,GAAAA,EAAG,CAACxC,KAAM,GAAItI,UAAU,oBAE3BE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,+BACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,0GAK5DO,EAAAA,EAAAA,KAAA,UACEiE,QAASgE,EACT9I,UAAS,oDAAA+E,OACP8D,EAAa,gBAAkB,eAC9BvI,UAEHO,EAAAA,EAAAA,KAAA,OACEb,UAAS,4EAAA+E,OACP8D,EAAa,SAAW,kBAOhC3I,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qDAAoDM,SAAA,EACjEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BM,SAAA,EAC3CO,EAAAA,EAAAA,KAACkK,GAAAA,EAAI,CAACzC,KAAM,GAAItI,UAAU,mBAC1BE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,+BACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,uFAK5DO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,yBAAwBM,SACpC0K,OAAOC,QAAQC,EAAAA,IAAYhD,IAAI3D,IAAA,IAAE4G,GAAK,MAAErJ,IAAQyC,EAAA,OAC/C1D,EAAAA,EAAAA,KAAA,UAEEiE,QAASA,IAAMkE,EAAYmC,GAC3BnL,UAAS,sDAAA+E,OACPgE,IAAaoC,EACT,2BACA,uGACH7K,SAEFwB,GARIqJ,iBAiBjBjL,EAAAA,EAAAA,MAAA,WAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,uFAAsFM,SAAC,kBAIrGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2FAA0FM,SAAA,EAEvGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCM,SAAA,EACpDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAACuK,GAAAA,EAAI,CAAC9C,KAAM,GAAItI,UAAU,oBAC1BE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,+BACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,oEAK5DO,EAAAA,EAAAA,KAAA,UACEiE,QA1HiBuG,KAC/B,MAAMC,GAAYf,EAClBC,EAAiBc,GACjBb,aAAac,QAAQ,uBAAwBC,OAAOF,KAwHtCtL,UAAS,oDAAA+E,OACPwF,EAAgB,eAAiB,eAChCjK,UAEHO,EAAAA,EAAAA,KAAA,OACEb,UAAS,4EAAA+E,OACPwF,EAAgB,SAAW,kBAOnCrK,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCM,SAAA,EACpDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAAC4K,GAAAA,EAAO,CAACnD,KAAM,GAAItI,UAAU,qBAC7BE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,kBACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,uDAK5DO,EAAAA,EAAAA,KAAA,UACEiE,QA7IU4G,KACxB,MAAMJ,GAAYX,EAClBC,EAAUU,GACVb,aAAac,QAAQ,gBAAiBC,OAAOF,KA2I/BtL,UAAS,oDAAA+E,OACP4F,EAAS,gBAAkB,eAC1BrK,UAEHO,EAAAA,EAAAA,KAAA,OACEb,UAAS,4EAAA+E,OACP4F,EAAS,SAAW,wBAShCzK,EAAAA,EAAAA,MAAA,WAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,uFAAsFM,SAAC,kBAIrGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2FAA0FM,SAAA,EAEvGJ,EAAAA,EAAAA,MAAA,UACE4E,QA/Jc6G,KACtBnF,OAAOoF,QAAQ,uFACjB1C,IACAvD,MA6JU3F,UAAU,6GAA4GM,SAAA,EAEtHJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAACgL,GAAAA,EAAU,CAACvD,KAAM,GAAItI,UAAU,oBAChCE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWM,SAAA,EACxBO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,wDACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,oEAK5DO,EAAAA,EAAAA,KAACiL,EAAAA,EAAY,CAACxD,KAAM,GAAItI,UAAU,sBAIpCa,EAAAA,EAAAA,KAAA,OAAKb,UAAU,MAAKM,UAClBJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAACkL,GAAAA,EAAU,CAACzD,KAAM,GAAItI,UAAU,mBAChCE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,4CAA2CM,SAAC,yBACzDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2CAA0CM,SAAC,6BAWpEO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,oDAAmDM,UAChEO,EAAAA,EAAAA,KAAA,UACEiE,QAASa,EACT3F,UAAU,sGAAqGM,SAChH,wBA5LW,IAmMtB,E,2DCxNA,MAAM0L,GAAeC,IAAWC,EAAAA,GAAAA,IAAmBD,EAAQ,IAGrDE,GAAQpM,IAA2C,IAA1C,OAAE2F,EAAM,QAAEC,EAAO,MAAEnB,EAAK,SAAElE,GAAUP,EACjD,OAAK2F,GAGH7E,EAAAA,EAAAA,KAAA,OAAKb,UAAU,8FAA8F8E,QAASa,EAAQrF,UAC5HJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8FAA8F8E,QAAS0C,GAAKA,EAAE4E,kBAAkB9L,SAAA,EAC7IJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yHAAwHM,SAAA,EACrIO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,+BAA8BM,SAAEkE,KAC9C3D,EAAAA,EAAAA,KAAA,UAAQiE,QAASa,EAAS3F,UAAU,uHAAsHM,UACxJO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAC,CAACH,KAAM,WAGbzH,EAAAA,EAAAA,KAAA,OAAKb,UAAU,MAAKM,SACjBA,SAZW,MAojBtB,IAjiBqB+L,EAAAA,EAAAA,MAAK9H,IAA+E,IAA9E,cAAE+H,EAAa,SAAEhG,EAAQ,mBAAEiG,EAAkB,wBAAEC,GAAyBjI,EACjG,MAAMwB,GAAWC,EAAAA,EAAAA,OACX,KAAEmD,EAAI,QAAElD,EAAO,OAAEC,EAAM,WAAEuG,EAAU,eAAEC,EAAc,yBAAEC,EAAwB,uBAAEC,IAA2BzG,EAAAA,EAAAA,OAEzG0G,EAAcC,IAAmB3O,EAAAA,EAAAA,WAAS,IAC1C4O,EAAWC,IAAgB7O,EAAAA,EAAAA,WAAS,GACrC8O,GAAcxO,EAAAA,EAAAA,QAAO,OAEpByO,EAAaC,IAAkBhP,EAAAA,EAAAA,UAAS,OACxCiP,EAAcC,IAAmBlP,EAAAA,EAAAA,WAAS,IAG1CmP,EAAaC,IAAkBpP,EAAAA,EAAAA,UAAS,KACxCqP,EAAeC,IAAoBtP,EAAAA,EAAAA,UAAS,KAG5CuP,EAAiBC,IAAsBxP,EAAAA,EAAAA,UAAS,KAChDyP,EAAaC,IAAkB1P,EAAAA,EAAAA,UAAS,KACxC2P,EAAiBC,IAAsB5P,EAAAA,EAAAA,UAAS,KAChD6P,EAAeC,IAAoB9P,EAAAA,EAAAA,UAAS,KAC5C+P,EAAiBC,IAAsBhQ,EAAAA,EAAAA,WAAS,IAGhDiQ,EAAmBC,IAAwBlQ,EAAAA,EAAAA,UAAS,KACpDmQ,EAAgBC,KAAqBpQ,EAAAA,EAAAA,UAAS,KAC9CqQ,GAAkBC,KAAuBtQ,EAAAA,EAAAA,WAAS,GAEnDuQ,IAA4B,OAAPzI,QAAO,IAAPA,OAAO,EAAPA,EAASwB,UAA6B,WAAX,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAAS0I,QAA2B,OAAP1I,QAAO,IAAPA,OAAO,EAAPA,EAASyB,cAC/EkH,IAAqB,OAAP3I,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,QAAe,OAAP5B,QAAO,IAAPA,OAAO,EAAPA,EAAS6B,YAAgB,OAAJqB,QAAI,IAAJA,OAAI,EAAJA,EAAMyF,cAAe,qBAE/E,IAAIjH,GAAW,eACJ,OAAP1B,QAAO,IAAPA,GAAAA,EAASyB,aAAcC,GAAW,4BACtB,OAAP1B,QAAO,IAAPA,GAAAA,EAASwB,UAASE,GAAW,gBAGtC,MAAOkH,GAAcC,KAAmB3Q,EAAAA,EAAAA,UAAS,OAGjDS,EAAAA,EAAAA,WAAU,KACA,OAAJuK,QAAI,IAAJA,GAAAA,EAAMG,KACRwF,IAAgBC,EAAAA,GAAAA,IAAgB5F,EAAKG,MAIvC,MAAM0F,EAAsBxH,IACtBA,EAAEyH,OAAOC,UAAe,OAAJ/F,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MAC5BwF,GAAgBtH,EAAEyH,OAAOE,SAK7B,OADA3I,OAAOG,iBAAiB,gBAAiBqI,GAClC,IAAMxI,OAAOI,oBAAoB,gBAAiBoI,IACxD,CAAK,OAAJ7F,QAAI,IAAJA,OAAI,EAAJA,EAAMG,MAEV,MAAM8F,IAAYC,EAAAA,EAAAA,SAAQ,KACxB,MAIMC,GAJOC,OAAc,OAAPtJ,QAAO,IAAPA,OAAO,EAAPA,EAASuJ,OAAS,IACnBD,OAAc,OAAPtJ,QAAO,IAAPA,OAAO,EAAPA,EAASwJ,aAAe,IAC1BF,OAAc,OAAPtJ,QAAO,IAAPA,OAAO,EAAPA,EAASyJ,kBAAoB,IAC1CH,OAAc,OAAPtJ,QAAO,IAAPA,OAAO,EAAPA,EAAS0J,YAAc,GAEhD,OAAOC,EAAAA,GAAAA,IAAaN,IACnB,CAAQ,OAAPrJ,QAAO,IAAPA,OAAO,EAAPA,EAASuJ,KAAa,OAAPvJ,QAAO,IAAPA,OAAO,EAAPA,EAASwJ,WAAmB,OAAPxJ,QAAO,IAAPA,OAAO,EAAPA,EAASyJ,gBAAwB,OAAPzJ,QAAO,IAAPA,OAAO,EAAPA,EAAS0J,YAErEE,IAAkBR,EAAAA,EAAAA,SAAQ,KAC9B,GAAS,OAAJlG,QAAI,IAAJA,IAAAA,EAAMG,IAAK,OAAO,KACvB,MAAMwG,GAAeC,EAAAA,GAAAA,IAAoB5G,EAAKG,KAC9C,GAA4B,IAAxBwG,EAAalS,OAAc,OAAO,KAEtC,MAAMoS,EAAc,CAAEC,UAAW,EAAGC,KAAM,EAAGC,KAAM,EAAGC,OAAQ,GACxDC,EAAS,IAAIP,GAAcQ,KAAK,CAACC,EAAGC,KACxC,MAAMC,GAAOC,EAAAA,GAAAA,IAAmBH,EAAEhQ,IAC5BoQ,GAAOD,EAAAA,GAAAA,IAAmBF,EAAEjQ,IAClC,OAAQyP,EAAgB,OAAJS,QAAI,IAAJA,OAAI,EAAJA,EAAMG,SAAW,KAAOZ,EAAgB,OAAJW,QAAI,IAAJA,OAAI,EAAJA,EAAMC,SAAW,MAG3E,OAAOF,EAAAA,GAAAA,IAAmBL,EAAO,GAAG9P,KACnC,CAAK,OAAJ4I,QAAI,IAAJA,OAAI,EAAJA,EAAMG,OAEV1K,EAAAA,EAAAA,WAAU,KACR,MAAMiS,EAAsBC,IACtB7D,EAAYpO,UAAYoO,EAAYpO,QAAQkS,SAASD,EAAME,SAC7DlE,GAAgB,IAIpB,OADAmE,SAAStK,iBAAiB,YAAakK,GAChC,IAAMI,SAASrK,oBAAoB,YAAaiK,IACtD,IAEH,MAAMK,GAAaA,KACjB/D,EAAe,MACfM,EAAiB,IACjBQ,EAAiB,IACjBE,GAAmB,GACnBI,GAAkB,IAClBE,IAAoB,GACpBd,EAAmB,IACnBE,EAAe,IACfE,EAAmB,KA4HrB,OACE7N,EAAAA,EAAAA,MAAAsI,EAAAA,SAAA,CAAAlI,SAAA,EAEEJ,EAAAA,EAAAA,MAAA,UAAQF,UAAU,wEAAuEM,SAAA,EAEvFJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8CAA6CM,SAAA,EAE1DJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EACtCO,EAAAA,EAAAA,KAAA,UAAQiE,QAASwH,EAAetM,UAAU,sDAAqDM,UAC7FO,EAAAA,EAAAA,KAACmB,EAAAA,EAAe,CAACsG,KAAM,GAAItI,UAAU,kBAEvCE,EAAAA,EAAAA,MAAA,MAAIF,UAAU,iDAAgDM,SAAA,CAAC,uBACzDO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,iBAAgBM,SAAC,iBAAS,wBAKlDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EAEtCJ,EAAAA,EAAAA,MAAA,OACE4E,QAASA,IAAMiB,EAAS,eACxB/F,UAAU,oFAAmFM,SAAA,EAE7FO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,UAASM,UAAW,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAWrN,OAAQ,kBAC9C7B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6BAA4BM,SAAA,EACzCO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,2BAA0BM,SAAC,WAC3CO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,oBAAoBC,MAAO,CAAEkR,OAAgB,OAAT/B,SAAS,IAATA,QAAS,EAATA,GAAW+B,QAAS,WAAY7Q,UACxE,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAWgC,QAAS,OAGxBvB,KACChP,EAAAA,EAAAA,KAAA,QAAMb,UAAU,iBAAgBM,SAAEuP,GAAgB9N,WAKtDlB,EAAAA,EAAAA,KAAA,OACEiE,QAASA,IAAMgI,GAAiBD,GAChC7M,UAAU,iBAAgBM,UAE1BO,EAAAA,EAAAA,KAACwQ,GAAAA,EAAM,CAAClC,OAAQN,GAAcvG,KAAM,GAAIgJ,YAAY,aAM1DpR,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBM,SAAA,EAEnCJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qGAAoGM,SAAA,EACjHO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,wGAAuGM,UACpHO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,oBAAmBM,SAAC,cAEtCJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,UAASM,SAAA,EACtBO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,8EAA6EM,SAAC,kBAC3FJ,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wCAAuCM,SAAA,CAAE0L,IAAmB,OAAP/F,QAAO,IAAPA,OAAO,EAAPA,EAASuJ,OAAQ,GAAG,mBAK1FtP,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+FAA8FM,SAAA,EAC3GO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qGAAoGM,UACjHO,EAAAA,EAAAA,KAAC0Q,EAAAA,EAAI,CAACjJ,KAAM,QAEdpI,EAAAA,EAAAA,MAAA,OAAKF,UAAU,UAASM,SAAA,EACtBO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,2EAA0EM,SAAC,kBACxFJ,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wCAAuCM,SAAA,EAAS,OAAP2F,QAAO,IAAPA,OAAO,EAAPA,EAASuL,UAAW,EAAE,yBAOpFtR,EAAAA,EAAAA,MAAA,UACEF,UAAU,mIAAkIM,SAAA,EAE5IJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EAEtCO,EAAAA,EAAAA,KAAA,UACEiE,QAAS0H,EACTxM,UAAU,kHAAiHM,SAE1HiM,GAAqB1L,EAAAA,EAAAA,KAACiL,EAAAA,EAAY,CAACxD,KAAM,MAASzH,EAAAA,EAAAA,KAAC4Q,EAAAA,EAAW,CAACnJ,KAAM,QAExEpI,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mEAAkEM,SAAA,CAAC,uBAC5EO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,0BAAyBM,SAAC,iBAAS,kCAEzDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yDAAwDM,SAAA,CAAEsO,GAAY,kDAIzF1O,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBM,SAAA,EAEtCJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oFAAmFM,SAAA,EAChGO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,kGAAiGM,SAAC,YACjHJ,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qDAAoDM,SAAC,kBACpEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wDAAuDM,SAAA,CAAE0L,IAAmB,OAAP/F,QAAO,IAAPA,OAAO,EAAPA,EAASuJ,OAAQ,GAAG,mBAK5GtP,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8EAA6EM,SAAA,EAC1FO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,6EAA4EM,UAACO,EAAAA,EAAAA,KAAC0Q,EAAAA,EAAI,CAACjJ,KAAM,QACxGpI,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qDAAoDM,SAAC,kBACpEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wDAAuDM,SAAA,EAAS,OAAP2F,QAAO,IAAPA,OAAO,EAAPA,EAASuL,UAAW,EAAE,mBAKlGtR,EAAAA,EAAAA,MAAA,OACE4E,QAASA,IAAMiB,EAAS,eACxB/F,UAAU,oIAAmIM,SAAA,EAE7IO,EAAAA,EAAAA,KAAA,OACEb,UAAU,8DACVC,MAAO,CAAEyR,YAAqB,OAATtC,SAAS,IAATA,QAAS,EAATA,GAAW+B,QAAS,WAAY7Q,UAE3C,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAWrN,OAAQ,kBAEtB7B,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0CAA0CC,MAAO,CAAEkR,OAAgB,OAAT/B,SAAS,IAATA,QAAS,EAATA,GAAW+B,QAAS,WAAY7Q,SAAA,CAAC,OAC3F,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAWgC,QAAS,MAE1BvQ,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uEAAsEM,UACzE,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAW5K,QAAS,oBAGxBqL,KACChP,EAAAA,EAAAA,KAAA,OACEb,UAAU,qDACVC,MAAO,CACLyR,WAAuC,cAA3B7B,GAAgBe,OAAyB,0BACf,SAA3Bf,GAAgBe,OAAoB,2BACT,SAA3Bf,GAAgBe,OAAoB,0BAA4B,4BAC3EtQ,UAEFO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,UAASM,SAAEuP,GAAgB9N,aAMjD7B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAW2R,IAAK1E,EAAY3M,SAAA,EACzCJ,EAAAA,EAAAA,MAAA,UACE4E,QAASA,IAAMgI,GAAiBD,GAChC7M,UAAU,yEAAwEM,SAAA,EAElFJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYM,SAAA,EACzBO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,mEAAkEM,SAAEsO,MACnF/N,EAAAA,EAAAA,KAAA,OAAKb,UAAU,0EAAyEM,SAAEqH,SAE5F9G,EAAAA,EAAAA,KAAA,OACEiE,QAAU0C,IACRA,EAAE4E,kBACFrG,EAAS,gBAEX/F,UAAU,iBAAgBM,UAE1BO,EAAAA,EAAAA,KAACwQ,GAAAA,EAAM,CAAClC,OAAQN,GAAcvG,KAAM,GAAIgJ,YAAY,SAKvDzE,IACC3M,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uHAAsHM,SAAA,EACnIJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uFAAsFM,SAAA,EACnGO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,uBAAsBM,SAAEsO,MACrC1O,EAAAA,EAAAA,MAAA,KAAGF,UAAU,sDAAqDM,SAAA,CAC/DoO,KAAsB7N,EAAAA,EAAAA,KAAA,QAAMb,UAAU,gCAA+BM,SAAC,wBAC/D,OAAP2F,QAAO,IAAPA,OAAO,EAAPA,EAAS2L,aAAa1R,EAAAA,EAAAA,MAAA,QAAAI,SAAA,CAAM,iBAAK2F,EAAQ2L,oBAK9C1R,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gEAA+DM,SAAA,EAC5EJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCM,SAAA,EACrDO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,yBAAwBM,SAAC,kBACzCJ,EAAAA,EAAAA,MAAA,QAAMF,UAAU,6BAA4BM,SAAA,CAAE0L,IAAmB,OAAP/F,QAAO,IAAPA,OAAO,EAAPA,EAASuJ,OAAQ,GAAG,gBAEhFtP,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCM,SAAA,EAChDO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,yBAAwBM,SAAC,kBACzCJ,EAAAA,EAAAA,MAAA,QAAMF,UAAU,0BAAyBM,SAAA,EAAS,OAAP2F,QAAO,IAAPA,OAAO,EAAPA,EAASuL,UAAW,EAAE,mBAIrEtR,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKM,SAAA,EAElBJ,EAAAA,EAAAA,MAAA,UACE4E,QAASA,KAAQiB,EAAS,eAAgB+G,GAAgB,IAC1D9M,UAAU,gLAA+KM,SAAA,EAEzLO,EAAAA,EAAAA,KAACgR,EAAAA,EAAI,CAACvJ,KAAM,GAAItI,UAAU,oBAAoB,6BAE9CE,EAAAA,EAAAA,MAAA,QAAMF,UAAU,kCAAiCM,SAAA,CAAC,OAAa,OAAT8O,SAAS,IAATA,QAAS,EAATA,GAAWgC,QAAS,SAG5EvQ,EAAAA,EAAAA,KAAA,OAAKb,UAAU,4BAEfE,EAAAA,EAAAA,MAAA,UAAQ4E,QApTKgN,KAC3BvE,GAAsB,OAAPtH,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,QAAe,OAAP5B,QAAO,IAAPA,OAAO,EAAPA,EAAS6B,WAAY,IACrDqF,EAAe,YACfL,GAAgB,IAiTqC9M,UAAU,4HAA2HM,SAAA,EAC1KO,EAAAA,EAAAA,KAACgR,EAAAA,EAAI,CAACvJ,KAAM,GAAItI,UAAU,mBAAmB,sCAG/CE,EAAAA,EAAAA,MAAA,UAAQ4E,QA5RKiN,KAC3B5E,EAAe,YACfL,GAAgB,IA0RqC9M,UAAU,4HAA2HM,SAAA,EAC1KO,EAAAA,EAAAA,KAACmR,EAAAA,EAAG,CAAC1J,KAAM,GAAItI,UAAU,mBAAmB,4CAG9CE,EAAAA,EAAAA,MAAA,UAAQ4E,QArQKmN,KAC3B5D,GAA4B,OAAPpI,QAAO,IAAPA,OAAO,EAAPA,EAAS2L,YAAa,IAC3CzE,EAAe,aACfL,GAAgB,IAkQqC9M,UAAU,4HAA2HM,SAAA,EAC1KO,EAAAA,EAAAA,KAACsC,EAAAA,EAAS,CAACmF,KAAM,GAAItI,UAAU,mBAAmB,6CAGpDE,EAAAA,EAAAA,MAAA,UAAQ4E,QAASA,KAAQuI,GAAgB,GAAOP,GAAgB,IAAW9M,UAAU,4HAA2HM,SAAA,EAC9MO,EAAAA,EAAAA,KAAC8C,EAAAA,EAAQ,CAAC2E,KAAM,GAAItI,UAAU,mBAAmB,mBAInDa,EAAAA,EAAAA,KAAA,OAAKb,UAAU,4BAEfE,EAAAA,EAAAA,MAAA,UAAQ4E,QA5OI9F,UAC1B8N,GAAgB,GAEhB,GAAqB,6BADAtG,OAAO0L,OAAO,2JACN,CAC3B,MAAMC,EAAW3L,OAAO0L,OAAO,qFAC/B,GAAIC,EACF,UACQvF,EAAuBzD,EAAKiJ,MAAOD,GAAU,SAC7CxF,IACN0F,MAAM,iEACR,CAAE,MAAO/T,GACP+T,MAAM,8BAADtN,OAAWzG,EAAMgU,SACxB,CAEJ,GA8NoDtS,UAAU,6HAA4HM,SAAA,EAC1KO,EAAAA,EAAAA,KAAC0R,EAAAA,EAAM,CAACjK,KAAM,KAAM,gCAItBzH,EAAAA,EAAAA,KAAA,OAAKb,UAAU,4BAEfE,EAAAA,EAAAA,MAAA,UAAQ4E,QA3VH9F,UACnB,IACMkH,UACIA,IACNH,EAAS,UAEb,CAAE,MAAOyB,GACPzB,EAAS,SACX,CACA+G,GAAgB,IAkV6B9M,UAAU,4HAA2HM,SAAA,EAClKO,EAAAA,EAAAA,KAAC6H,EAAAA,EAAM,CAACJ,KAAM,GAAItI,UAAU,mBAAmB,8CAW7Da,EAAAA,EAAAA,KAACsL,GAAK,CAACzG,OAAwB,aAAhBwH,EAA4BvH,QAASuL,GAAY1M,MAAM,kCAAQlE,UAC5EJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWM,SAAA,EACxBJ,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,SAAOb,UAAU,kDAAiDM,SAAC,+BACnEO,EAAAA,EAAAA,KAAA,SACE2R,KAAK,OACLC,MAAOnF,EACPoF,SAAWlL,GAAM+F,EAAe/F,EAAEwJ,OAAOyB,OACzCE,YAAY,aACZC,UAAW,GACX5S,UAAU,qJACV6S,WAAS,OAGZrF,IAAiB3M,EAAAA,EAAAA,KAAA,KAAGb,UAAU,oDAAmDM,SAAEkN,KACpFtN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBM,SAAA,EAC9BO,EAAAA,EAAAA,KAAA,UAAQiE,QAASoM,GAAYlR,UAAU,2HAA0HM,SAAC,kBAClKO,EAAAA,EAAAA,KAAA,UAAQiE,QArWG9F,UACnB,MAAM8T,EAAUxF,EAAYyF,OAC5B,IAAKD,EAAS,OAAOrF,EAAiB,kEACtC,GAAIqF,EAAQlV,OAAS,EAAG,OAAO6P,EAAiB,oGAChD,GAAIqF,EAAQlV,OAAS,GAAI,OAAO6P,EAAiB,8FAEjDT,GAAa,GACb,UACwBP,EAAW,CAAE5E,KAAMiL,KAEvCT,MAAM,wEACNnB,MAEAzD,EAAiB,2DAErB,CAAE,MAAOnP,GACPmP,EAAiB,iBAAD1I,OAAQzG,EAAMgU,SAChC,CACAtF,GAAa,IAmV0BgG,SAAUjG,EAAW/M,UAAU,qNAAoNM,SAC/QyM,EAAY,yBAAY,0BAMjClM,EAAAA,EAAAA,KAACsL,GAAK,CAACzG,OAAwB,aAAhBwH,EAA4BvH,QAASuL,GAAY1M,MAAM,wCAASlE,UAC7EJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWM,SAAA,EACxBJ,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,SAAOb,UAAU,kDAAiDM,SAAC,2CACnEO,EAAAA,EAAAA,KAAA,SAAO2R,KAAK,WAAWC,MAAO/E,EAAiBgF,SAAWlL,GAAMmG,EAAmBnG,EAAEwJ,OAAOyB,OAAQzS,UAAU,2JAEhHE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,SAAOb,UAAU,kDAAiDM,SAAC,qCACnEO,EAAAA,EAAAA,KAAA,SAAO2R,KAAK,WAAWC,MAAO7E,EAAa8E,SAAWlL,GAAMqG,EAAerG,EAAEwJ,OAAOyB,OAAQzS,UAAU,2JAExGE,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,SAAOb,UAAU,kDAAiDM,SAAC,2CACnEO,EAAAA,EAAAA,KAAA,SAAO2R,KAAK,WAAWC,MAAO3E,EAAiB4E,SAAWlL,GAAMuG,EAAmBvG,EAAEwJ,OAAOyB,OAAQzS,UAAU,0JAE/GgO,IAAiBnN,EAAAA,EAAAA,KAAA,KAAGb,UAAU,oDAAmDM,SAAE0N,IACnFE,IAAmBrN,EAAAA,EAAAA,KAAA,KAAGb,UAAU,wDAAuDM,SAAC,gFACzFJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBM,SAAA,EAC9BO,EAAAA,EAAAA,KAAA,UAAQiE,QAASoM,GAAYlR,UAAU,2HAA0HM,SAAC,kBAClKO,EAAAA,EAAAA,KAAA,UAAQiE,QAnWG9F,UACnB,IAAK0O,IAAoBE,IAAgBE,EAAiB,OAAOG,EAAiB,yEAClF,GAAIL,EAAYhQ,OAAS,EAAG,OAAOqQ,EAAiB,oGACpD,GAAIL,IAAgBE,EAAiB,OAAOG,EAAiB,qFAE7DjB,GAAa,GACb,UACQJ,EAAuBzD,EAAKiJ,MAAO1E,GAAiB,SACpDhB,EAAekB,GACrBO,GAAmB,GACnBxO,WAAWuR,GAAY,IACzB,CAAE,MAAO5S,GACY,wBAAfA,EAAM2U,MAAiD,4BAAf3U,EAAM2U,KAChDhF,EAAiB,kGAEjBA,EAAiB,iBAADlJ,OAAQzG,EAAMgU,SAElC,CACAtF,GAAa,IAiV0BgG,SAAUjG,GAAamB,EAAiBlO,UAAU,qNAAoNM,SAClSyM,EAAY,yBAAY,0BAMjClM,EAAAA,EAAAA,KAACsL,GAAK,CAACzG,OAAwB,cAAhBwH,EAA6BvH,QAASuL,GAAY1M,MAAM,yCAAUlE,UAC/EJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWM,SAAA,EAChB,OAAP2F,QAAO,IAAPA,OAAO,EAAPA,EAAS2L,aACR1R,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wDAAuDM,SAAA,CAAC,4CACzDO,EAAAA,EAAAA,KAAA,UAAQb,UAAU,aAAYM,SAAE2F,EAAQ2L,gBAGtD1R,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,SAAOb,UAAU,kDAAiDM,SAAC,sCACnEO,EAAAA,EAAAA,KAAA,SACE2R,KAAK,OACLC,MAAOrE,EACPsE,SAAWlL,GAAM6G,EAAqB7G,EAAEwJ,OAAOyB,MAAMS,QAAQ,gBAAiB,IAAIC,eAClFR,YAAY,8CACZC,UAAW,GACX5S,UAAU,qJACV6S,WAAS,KAEXhS,EAAAA,EAAAA,KAAA,KAAGb,UAAU,8BAA6BM,SAAC,gGAE5CgO,IAAkBzN,EAAAA,EAAAA,KAAA,KAAGb,UAAU,oDAAmDM,SAAEgO,IACpFE,KAAoB3N,EAAAA,EAAAA,KAAA,KAAGb,UAAU,wDAAuDM,SAAC,iFAC1FJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBM,SAAA,EAC9BO,EAAAA,EAAAA,KAAA,UAAQiE,QAASoM,GAAYlR,UAAU,2HAA0HM,SAAC,kBAClKO,EAAAA,EAAAA,KAAA,UAAQiE,QAtWI9F,UACpB,MAAM8T,EAAU1E,EAAkB2E,OAAOI,cACzC,IAAKL,EAAS,OAAOvE,GAAkB,yEAEvCvB,GAAa,GACb,IAEE,UADsBoG,EAAAA,EAAAA,IAAgBN,GAIpC,OAFAvE,GAAkB,IAADxJ,OAAK+N,EAAO,oGAC7B9F,GAAa,SAIOP,EAAW,CAAEmF,UAAWkB,KAE5CrE,IAAoB,GACpB9O,WAAW,KACT0S,MAAM,oCAADtN,OAAY+N,EAAO,wDACxB5B,MACC,MAEH3C,GAAkB,2DAEtB,CAAE,MAAOjQ,GACPiQ,GAAkB,iBAADxJ,OAAQzG,EAAMgU,SACjC,CACAtF,GAAa,IA4U2BgG,SAAUjG,EAAW/M,UAAU,qNAAoNM,SAChRyM,EAAY,yBAAY,0BAOjClM,EAAAA,EAAAA,KAACwS,GAAa,CAAC3N,OAAQ0H,EAAczH,QAASA,IAAM0H,GAAgB,UC/jB1E,MAAMiG,GAAO,CACX,CAAE/S,GAAI,OAAQwB,K,QAAMwR,EAAMzR,MAAO,SAAKG,KAAM,oBAC5C,CAAE1B,GAAI,SAAUwB,KAAMI,EAAAA,EAAQL,MAAO,eAAMG,KAAM,cACjD,CAAE1B,GAAI,OAAQwB,KAAMM,EAAAA,EAAUP,MAAO,eAAM0R,MAAO,CAAC,oBACnD,CAAEjT,GAAI,YAAawB,KAAMsB,EAAAA,EAAOvB,MAAO,2BAAQG,KAAM,oBAGxC,SAASwR,KACtB,MAAM5N,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEX0N,GAAc3U,EAAAA,EAAAA,aAAa4U,GAC3BA,EAAIH,MACCG,EAAIH,MAAMpM,KAAKwM,GAAK/N,EAASqB,SAASC,WAAWyM,IAEnD/N,EAASqB,WAAayM,EAAI1R,MAAQ4D,EAASqB,SAASC,WAAWwM,EAAI1R,KAAO,KAChF,CAAC4D,EAASqB,WAEP2M,GAAiB9U,EAAAA,EAAAA,aAAa4U,IAC9BA,EAAIH,MACNzN,EAAS4N,EAAIH,MAAM,GAAK,SAExBzN,EAAS4N,EAAI1R,OAEd,CAAC8D,IAEJ,OACElF,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gKAA+JM,UAC5KO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qDAAoDM,SAChEgT,GAAKpL,IAAKyL,IACT,MAAM1M,EAAWyM,EAAYC,GACvBhP,EAAOgP,EAAI5R,KACjB,OACE7B,EAAAA,EAAAA,MAAA,UAEE4E,QAASA,IAAM+O,EAAeF,GAC9B3T,UAAS,iFAAA+E,OACPkC,EAAW,iCAAmC,iBAC7C3G,SAAA,EAEHO,EAAAA,EAAAA,KAAC8D,EAAI,CACH2D,KAAM,GACN7G,YAAawF,EAAW,IAAM,EAC9BjH,UAAWiH,EAAW,iBAAmB,MAE3CpG,EAAAA,EAAAA,KAAA,QAAMb,UAAS,2BAAA+E,OAA6BkC,EAAW,cAAgB,cAAe3G,SACnFqT,EAAI7R,UAZF6R,EAAIpT,SAoBvB,C,oCCtDe,SAASuT,KACtB,MAAOC,EAAgBC,IAAqB7V,EAAAA,EAAAA,UAAS,OAC9C8V,EAAYC,IAAiB/V,EAAAA,EAAAA,WAAS,IACtCgW,EAAOC,IAAYjW,EAAAA,EAAAA,WAAS,IAC5BkW,EAAaC,IAAkBnW,EAAAA,EAAAA,WAAS,IAE/CS,EAAAA,EAAAA,WAAU,KAER,MAAM2V,EAAc,mBAAmBC,KAAKC,UAAUC,aAAelO,OAAOmO,SAI5E,GAHAP,EAASG,GAGL/N,OAAOoO,WAAW,8BAA8BC,QAElD,YADAP,GAAe,GAKjB,MAAMQ,EAAYrK,aAAaC,QAAQ,yBACvC,GAAIoK,EAAW,CACb,MAAMC,EAAgBC,SAASF,EAAW,IAE1C,GAAIG,KAAKC,MAAQH,EAAgB,OAC/B,MAEJ,CAGA,MAAMI,EAAuB3N,IAC3BA,EAAE4N,iBACFpB,EAAkBxM,GAElB7H,WAAW,IAAMuU,GAAc,GAAO,MAGxC1N,OAAOG,iBAAiB,sBAAuBwO,GAG3CZ,IAAgB/N,OAAOoO,WAAW,8BAA8BC,SAClElV,WAAW,IAAMuU,GAAc,GAAO,KAIxC,MAAMmB,EAAqBA,KACzBf,GAAe,GACfJ,GAAc,GACdF,EAAkB,OAIpB,OAFAxN,OAAOG,iBAAiB,eAAgB0O,GAEjC,KACL7O,OAAOI,oBAAoB,sBAAuBuO,GAClD3O,OAAOI,oBAAoB,eAAgByO,KAE5C,IAEH,MAgBMC,EAAgBA,KACpBpB,GAAc,GACdzJ,aAAac,QAAQ,wBAAyB0J,KAAKC,MAAMK,aAG3D,OAAIlB,IAAgBJ,EAAmB,MAGrCpT,EAAAA,EAAAA,KAAA,OAAKb,UAAU,mGAAkGM,UAC/GJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yEAAwEM,SAAA,EAErFJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6FAA4FM,SAAA,EACzGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAoCM,SAAA,EACjDO,EAAAA,EAAAA,KAACkL,GAAAA,EAAU,CAACzD,KAAM,MAClBzH,EAAAA,EAAAA,KAAA,QAAMb,UAAU,gBAAeM,SAAC,wCAElCO,EAAAA,EAAAA,KAAA,UACEiE,QAASwQ,EACTtV,UAAU,mDAAkDM,UAE5DO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAC,CAACH,KAAM,WAKbpI,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKM,SAAA,EAClBJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yBAAwBM,SAAA,EACrCO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,sJAAqJM,UAClKO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,sBAAqBM,SAAC,cAExCJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQM,SAAA,EACrBO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,+BAA8BM,SAAC,+DAG7CO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,wCAAuCM,SAAC,0OAOxD6T,GACCjU,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iCAAgCM,SAAA,EAC7CO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,yCAAwCM,SAAC,+CAGtDJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWM,SAAA,EACxBJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gDAA+CM,SAAA,EAC5DO,EAAAA,EAAAA,KAAC2U,GAAAA,EAAK,CAAClN,KAAM,GAAItI,UAAU,qBAC3Ba,EAAAA,EAAAA,KAAA,QAAAP,SAAM,+DAERJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gDAA+CM,SAAA,EAC5DO,EAAAA,EAAAA,KAAC4U,GAAAA,EAAI,CAACnN,KAAM,GAAItI,UAAU,qBAC1Ba,EAAAA,EAAAA,KAAA,QAAAP,SAAM,uEAKZJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBM,SAAA,EAC9BO,EAAAA,EAAAA,KAAA,UACEiE,QAASwQ,EACTtV,UAAU,0GAAyGM,SACpH,wBAGDJ,EAAAA,EAAAA,MAAA,UACE4E,QAlFQ9F,UACpB,IAAK+U,EAAgB,OAErBA,EAAe7B,SACf,MAAM,QAAEwD,SAAkB3B,EAAe4B,WAEzB,aAAZD,EACFvW,EAAAA,GAAOyW,IAAI,iCAEXzW,EAAAA,GAAOyW,IAAI,iCAGb5B,EAAkB,MAClBE,GAAc,IAsEFlU,UAAU,qOAAoOM,SAAA,EAE9OO,EAAAA,EAAAA,KAACgV,GAAAA,EAAQ,CAACvN,KAAM,KAAM,qCAQ9BzH,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gDAA+CM,UAC5DO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,oCAAmCM,SAAC,2HAO3D,C,cC9Je,SAASwV,GAAkB/V,GAA2B,IAA1B,SAAEgW,EAAQ,UAAEC,GAAWjW,EAChE,OACEc,EAAAA,EAAAA,KAAA,OAAKb,UAAU,mFAAkFM,UAC/FO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,sFAAqFM,UAClGJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yBAAwBM,SAAA,EACrCO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,kFAAiFM,UAC9FO,EAAAA,EAAAA,KAACoV,GAAAA,EAAS,CAAC3N,KAAM,GAAItI,UAAU,yBAEjCE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQM,SAAA,EACrBO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,iBAAgBM,SAAC,mDAC/BO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,6BAA4BM,SAAC,8HAG1CJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYM,SAAA,EACzBO,EAAAA,EAAAA,KAAA,UACEiE,QAASkR,EACThW,UAAU,iFAAgFM,SAC3F,wBAGDJ,EAAAA,EAAAA,MAAA,UACE4E,QAASiR,EACT/V,UAAU,qIAAoIM,SAAA,EAE9IO,EAAAA,EAAAA,KAACoV,GAAAA,EAAS,CAAC3N,KAAM,KAAM,kDAK7BzH,EAAAA,EAAAA,KAAA,UACEiE,QAASkR,EACThW,UAAU,mDAAkDM,UAE5DO,EAAAA,EAAAA,KAAC4H,EAAAA,EAAC,CAACH,KAAM,aAMrB,CCvCO,SAAS4N,KACd,MAAOC,EAAcC,IAAmBjY,EAAAA,EAAAA,UAAS,OAC1CkY,EAAiBC,IAAsBnY,EAAAA,EAAAA,WAAS,IAChDoY,EAAUC,IAAerY,EAAAA,EAAAA,UAASsW,UAAUgC,SAEnD7X,EAAAA,EAAAA,WAAU,KAER,MAAM8X,EAAeA,IAAMF,GAAY,GACjCG,EAAgBA,IAAMH,GAAY,GAUxC,OARAhQ,OAAOG,iBAAiB,SAAU+P,GAClClQ,OAAOG,iBAAiB,UAAWgQ,GAG/B,kBAAmBlC,WACrBmC,IAGK,KACLpQ,OAAOI,oBAAoB,SAAU8P,GACrClQ,OAAOI,oBAAoB,UAAW+P,KAEvC,IAGH,MAAOE,EAAkBC,IAAuB3Y,EAAAA,EAAAA,UAAS,OAGzDS,EAAAA,EAAAA,WAAU,IACD,KACDiY,GACFxX,cAAcwX,IAGjB,CAACA,IAEJ,MAAMD,EAAwB5X,UAC5B,IACE,MAAM+X,QAAYtC,UAAUuC,cAAcC,SAAS,SAAU,CAC3DC,MAAO,MAGTd,EAAgBW,GAChB5X,EAAAA,GAAOyW,IAAI,mEAAuBmB,EAAIG,OAGtCH,EAAIpQ,iBAAiB,cAAe,KAClC,MAAMwQ,EAAYJ,EAAIK,WAClBD,GACFA,EAAUxQ,iBAAiB,cAAe,KACxC,GAAwB,cAApBwQ,EAAUE,OAAyB5C,UAAUuC,cAAcM,WAAY,CAEzE,MAAMC,EAAc9M,aAAaC,QAAQ,kBACzC,GAAI6M,GAAetC,KAAKC,MAAQF,SAASuC,GAAe,KAEtD,YADApY,EAAAA,GAAOyW,IAAI,iFAGbzW,EAAAA,GAAOyW,IAAI,uDACXU,GAAmB,EACrB,MAMN,MAAMkB,EAAa3X,YAAY,KAC7BkX,EAAIU,UACH,MACHX,EAAoBU,EAEtB,CAAE,MAAOlZ,GACPa,EAAAA,GAAOb,MAAM,mEAAuBA,EACtC,GAGIoZ,GAAsB3Y,EAAAA,EAAAA,aAAY,KAEtCuX,GAAmB,GAGnB7L,aAAac,QAAQ,iBAAkB0J,KAAKC,MAAMK,YAE9CY,GAAgBA,EAAawB,SAE/BlD,UAAUuC,cAAcrQ,iBAAiB,mBAAoB,KAC3DxH,EAAAA,GAAOyW,IAAI,oGACXpP,OAAOX,SAAS+R,WAIlBzB,EAAawB,QAAQE,YAAY,CAAErF,KAAM,mBAGzCrT,EAAAA,GAAOyW,IAAI,wHACXpP,OAAOX,SAAS+R,WAEjB,CAACzB,IAEE2B,GAAgC/Y,EAAAA,EAAAA,aAAYC,UAChD,KAAM,iBAAkBwH,QAEtB,OADArH,EAAAA,GAAOyW,IAAI,sHACJ,EAGT,GAAgC,YAA5BmC,aAAaC,WACf,OAAO,EAGT,GAAgC,WAA5BD,aAAaC,WAAyB,CAExC,MAAsB,kBADGD,aAAaE,mBAExC,CAEA,OAAO,GACN,IAEGC,GAAmBnZ,EAAAA,EAAAA,aAAYC,eAAOwF,GAAyB,IAAlB9G,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,QAChCma,KAEP3B,GACnBA,EAAa+B,iBAAiB1T,GAAKwC,EAAAA,EAAAA,GAAA,CACjCjF,KAAM,0BACNoW,MAAO,wBACPC,QAAS,CAAC,IAAK,GAAI,MAChB1a,GAGT,EAAG,CAACyY,EAAc2B,IAElB,MAAO,CACL3B,eACAE,kBACAqB,sBACAnB,WACAuB,gCACAI,mBAEJ,C,2DC9HA,MAAMG,IAAoBC,EAAAA,EAAAA,MAAK,IAAM,uCAAwBC,KAAKC,IAAC,CAAOC,QAASD,EAAEH,sBAC/EK,IAAeJ,EAAAA,EAAAA,MAAK,IAAM,+BAC1BK,IAAaL,EAAAA,EAAAA,MAAK,IAAM,8BAQxBM,IAAYN,EAAAA,EAAAA,MAAK,IAAM,yEAGvBO,IAAYP,EAAAA,EAAAA,MAAK,IAAM,8BACvBQ,IAAUR,EAAAA,EAAAA,MAAK,IAAM,+BAGrBS,IAAeT,EAAAA,EAAAA,MAAK,IAAM,8BAC1BU,IAAUV,EAAAA,EAAAA,MAAK,IAAM,sDACrBW,IAAYX,EAAAA,EAAAA,MAAK,IAAM,+BACvBY,IAAWZ,EAAAA,EAAAA,MAAK,IAAM,8BAGtBa,IAAWb,EAAAA,EAAAA,MAAK,IAAM,+BACtBc,IAAYd,EAAAA,EAAAA,MAAK,IAAM,+BACvBe,IAAqBf,EAAAA,EAAAA,MAAK,IAAM,+BAGhCgB,IAAgBhB,EAAAA,EAAAA,MAAK,IAAM,+BAC3BiB,IAAgBjB,EAAAA,EAAAA,MAAK,IAAM,uDAC3BkB,IAAkBlB,EAAAA,EAAAA,MAAK,IAAM,+BAC7BmB,IAAmBnB,EAAAA,EAAAA,MAAK,IAAM,8BAC9BoB,IAAiBpB,EAAAA,EAAAA,MAAK,IAAM,+BAG5BqB,IAAsBrB,EAAAA,EAAAA,MAAK,IAAM,+BAGjCsB,IAAgBtB,EAAAA,EAAAA,MAAK,IAAM,+BAC3BuB,IAAevB,EAAAA,EAAAA,MAAK,IAAM,+BAC1BwB,IAAYxB,EAAAA,EAAAA,MAAK,IAAM,+BACvByB,IAAiBzB,EAAAA,EAAAA,MAAK,IAAM,+BAC5B0B,IAAgB1B,EAAAA,EAAAA,MAAK,IAAM,+BAC3B2B,IAAqB3B,EAAAA,EAAAA,MAAK,IAAM,+BAChC4B,IAAmB5B,EAAAA,EAAAA,MAAK,IAAM,+BAC9B6B,IAAa7B,EAAAA,EAAAA,MAAK,IAAM,+BACxB8B,IAAQ9B,EAAAA,EAAAA,MAAK,IAAM,+BACnB+B,IAAgB/B,EAAAA,EAAAA,MAAK,IAAM,8BAC3BgC,IAAUhC,EAAAA,EAAAA,MAAK,IAAM,6BACrBiC,IAAgBjC,EAAAA,EAAAA,MAAK,IAAM,+BAC3BkC,IAAiBlC,EAAAA,EAAAA,MAAK,IAAM,+BAC5BmC,IAAiBnC,EAAAA,EAAAA,MAAK,IAAM,uDAK5BoC,GAAmB,CACvB,uBACA,0BACA,yBACA,SACA,qBACA,eAIIC,GAAgB5a,IAA8B,IAA7B,QAAEuS,EAAU,0BAAWvS,EAC5C,OAAOc,EAAAA,EAAAA,KAAC+Z,GAAAA,GAAmB,CAACtI,QAASA,KAIjCuI,GAAiBtW,IAAmB,IAAlB,SAAEjE,GAAUiE,EAClC,MAAM,KAAE4E,EAAI,QAAE/K,IAAY+H,EAAAA,EAAAA,MACpBN,GAAWC,EAAAA,EAAAA,MAEjB,OAAI1H,GACKyC,EAAAA,EAAAA,KAAC8Z,GAAa,IAGlBxR,EAIE7I,GAHEO,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,SAAS1D,MAAO,CAAE2D,KAAMnV,GAAYqN,SAAO,KAO7D+H,GAAavW,IAAmB,IAAlB,SAAEpE,GAAUoE,EAC9B,MAAM,KAAEyE,EAAI,QAAElD,EAAO,QAAE7H,IAAY+H,EAAAA,EAAAA,MAC7BN,GAAWC,EAAAA,EAAAA,MAEjB,GAAI1H,EACF,OAAOyC,EAAAA,EAAAA,KAAC8Z,GAAa,IAGvB,IAAKxR,EACH,OAAOtI,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,SAAS1D,MAAO,CAAE2D,KAAMnV,GAAYqN,SAAO,IAIjE,OADuB,OAAPjN,QAAO,IAAPA,OAAO,EAAPA,EAASwB,UAA6B,WAAX,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAAS0I,QAA2B,OAAP1I,QAAO,IAAPA,OAAO,EAAPA,EAASyB,cAKnEpH,GAHEO,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,KAO5CgI,GAAehW,IAAmB,IAAlB,SAAE5E,GAAU4E,EAChC,MAAM,KAAEiE,EAAI,QAAElD,EAAO,QAAE7H,IAAY+H,EAAAA,EAAAA,MAC7BN,GAAWC,EAAAA,EAAAA,MAEjB,GAAI1H,EACF,OAAOyC,EAAAA,EAAAA,KAAC8Z,GAAa,IAGvB,IAAKxR,EACH,OAAOtI,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,SAAS1D,MAAO,CAAE2D,KAAMnV,GAAYqN,SAAO,IAIjE,OADyB,OAAPjN,QAAO,IAAPA,OAAO,EAAPA,EAASkV,aAAoB,OAAPlV,QAAO,IAAPA,OAAO,EAAPA,EAASwB,WAAkB,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAASyB,cAK9DpH,GAHEO,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,KAO5CkI,GAAkBhW,IAAmB,IAAlB,SAAE9E,GAAU8E,EACnC,MAAM,KAAE+D,EAAI,QAAElD,EAAO,QAAE7H,IAAY+H,EAAAA,EAAAA,MAC7BN,GAAWC,EAAAA,EAAAA,MAEjB,OAAI1H,GACKyC,EAAAA,EAAAA,KAAC8Z,GAAa,IAGlBxR,EAIO,OAAPlD,QAAO,IAAPA,GAAAA,EAASyB,aAIPpH,GAHEO,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,KAJvCrS,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,SAAS1D,MAAO,CAAE2D,KAAMnV,GAAYqN,SAAO,KAWpD,SAASmI,MACLrV,EAAAA,EAAAA,MAAjB,MACMH,GAAWC,EAAAA,EAAAA,OACX,KAAEqD,EAAI,QAAElD,EAAO,QAAE7H,EAAO,OAAE8H,IAAWC,EAAAA,EAAAA,OAEpCmV,EAAeC,IAAoBpd,EAAAA,EAAAA,WAAS,IAC5CoO,EAAoBiP,IAAyBrd,EAAAA,EAAAA,WAAS,IACtDmI,EAAUC,IAAepI,EAAAA,EAAAA,UAASqI,OAAOC,WAAa,MACtDgV,EAAqBC,IAA0Bvd,EAAAA,EAAAA,UAAS,KAC7D,IACE,MAAM2W,EAAYrK,aAAaC,QAAQ,2BACvC,QAAKoK,GAEEG,KAAKC,MAAQF,SAASF,GAAa,KAC5C,CAAE,MAAA6G,GAAQ,OAAO,CAAO,KAEnBC,EAAsBC,IAA2B1d,EAAAA,EAAAA,WAAS,IAG3D,gBAAEkY,EAAe,oBAAEqB,EAAmB,SAAEnB,GAAaL,MAG3DtX,EAAAA,EAAAA,WAAU,KACR,GAAW,OAAPqH,QAAO,IAAPA,GAAAA,EAASqD,MAAe,OAAPrD,QAAO,IAAPA,IAAAA,EAASwB,WAAmB,OAAPxB,QAAO,IAAPA,IAAAA,EAASyB,gBAAwB,OAAPzB,QAAO,IAAPA,IAAAA,EAASkV,WAAW,CAEtF,IADmBW,EAAAA,GAAAA,IAAc7V,EAAQqD,KAC1ByS,SAAU,CACvB,MAAMC,EAAQrc,WAAW,KACvBkc,GAAwB,IACvB,KACH,MAAO,IAAMI,aAAaD,EAC5B,CACF,GACC,CAAQ,OAAP/V,QAAO,IAAPA,OAAO,EAAPA,EAASqD,IAAY,OAAPrD,QAAO,IAAPA,OAAO,EAAPA,EAASwB,QAAgB,OAAPxB,QAAO,IAAPA,OAAO,EAAPA,EAASyB,aAAqB,OAAPzB,QAAO,IAAPA,OAAO,EAAPA,EAASkV,YAGpE,MAAMe,GAAyBnd,EAAAA,EAAAA,aAAYC,UACzC,GAAY,OAAPiH,QAAO,IAAPA,GAAAA,EAASqD,KAAQ6S,EACtB,IACE,MAAMC,GAAU5S,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASxD,EAAQqD,WACnC+S,EAAAA,EAAAA,IAAUD,EAAS,CAAE5M,MAAM8M,EAAAA,EAAAA,IAAUH,KAC3CI,GAAAA,GAAmBC,WAAW,QAADzX,OAASkB,EAAQqD,MAC9C3J,WAAW,IAAMkc,GAAwB,GAAQ,IACnD,CAAE,MAAOvd,GACPa,EAAAA,GAAOb,MAAM,uDAAgBA,EAC/B,GACC,CAAQ,OAAP2H,QAAO,IAAPA,OAAO,EAAPA,EAASqD,OAKb1K,EAAAA,EAAAA,WAAU,KACiB8b,GAAiBtT,KAAKqV,GAAQ5W,EAASqB,SAASC,WAAWsV,MAC3DnW,GACvBkV,GAAsB,IAEvB,CAAC3V,EAASqB,SAAUZ,KAGvB1H,EAAAA,EAAAA,WAAU,KACR,MAAM8H,EAAeA,KACnB,MAAMgW,EAASlW,OAAOC,WAAa,IACnCF,EAAYmW,GACRA,GACFnB,GAAiB,IAOrB,OAHA/U,OAAOG,iBAAiB,SAAUD,GAClCA,IAEO,IAAMF,OAAOI,oBAAoB,SAAUF,IACjD,IAEH,MAAM4F,GAAgBvN,EAAAA,EAAAA,aAAY,KAChCwc,EAAiBxU,IAASA,IACzB,IAEG4V,GAAe5d,EAAAA,EAAAA,aAAY,KAC/Bwc,GAAiB,IAChB,IAEGqB,GAAwB7d,EAAAA,EAAAA,aAAY,KACxCyc,EAAsBzU,IAASA,IAC9B,IAGH,IAAK3I,IAAY+K,EACf,OAAOtI,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,SAAS1D,MAAO,CAAE2D,KAAMnV,GAAYqN,SAAO,IAIjE,GAAI9U,GAAY+K,IAASlD,EACvB,OAAOpF,EAAAA,EAAAA,KAAC8Z,GAAa,IAIvB,GAA0B,WAAtB9U,EAASqB,SACX,OAAOiC,GAAOtI,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,KAAMrS,EAAAA,EAAAA,KAACgc,GAAAA,QAAK,IAInE,IAAK5W,EAAQ2L,UACX,OACE/Q,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gEAA+DM,UAC5EJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iEAAgEM,SAAA,EAC7EO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,4FAA2FM,SAAC,kBAG3GO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,uCAAsCM,SAAC,oEACrDO,EAAAA,EAAAA,KAAA,KAAGb,UAAU,qBAAoBM,SAAC,iHAGlCO,EAAAA,EAAAA,KAAA,UACEiE,QAASA,IAAMoB,IACflG,UAAU,mGAAkGM,SAC7G,kCAQoB,OAAP2F,QAAO,IAAPA,GAAAA,EAAS2L,UAE/B,OAEE/Q,EAAAA,EAAAA,KAACic,EAAAA,GAAY,CAAAxc,UACbJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8GAA6GM,SAAA,EAE1HO,EAAAA,EAAAA,KAAC2E,EAAa,CACZE,OAAQ4V,EACR3V,QAASgX,EACT/W,YAAa2G,KAIfrM,EAAAA,EAAAA,MAAA,QAAMF,UAAU,wEAAuEM,SAAA,EAErFO,EAAAA,EAAAA,KAACkc,GAAY,CACXzQ,cAAeA,EACfhG,SAAUA,EACViG,mBAAoBA,EACpBC,wBAAyBoQ,KAI3B/b,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uBAAsBM,UACnCO,EAAAA,EAAAA,KAACmc,EAAAA,SAAQ,CAACC,UAAUpc,EAAAA,EAAAA,KAAC8Z,GAAa,CAACrI,QAAQ,8CAAiBhS,UAC5DJ,EAAAA,EAAAA,MAACgd,EAAAA,GAAM,CAAA5c,SAAA,EAELO,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,mBAAmBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAAC+X,GAAS,SAClE/X,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,aAAamb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACqY,GAAQ,SAC3DrY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,cAAcmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACoY,GAAS,SAC7DpY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,eAAemb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAAC4Z,GAAc,SAGnE5Z,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,uBAAuBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACsY,GAAQ,SACrEtY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,yBAAyBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACwY,GAAkB,SACjFxY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,0BAA0Bmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACuY,GAAS,SAGzEvY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,aAAamb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACgY,GAAS,SAC5DhY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,YAAYmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACiY,GAAO,SACzDjY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,eAAemb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACkY,GAAY,SACjElY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,iBAAiBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACkY,GAAY,SAGnElY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,WAAWmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACmY,GAAO,SACxDnY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,iBAAiBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACmZ,GAAa,SACpEnZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,WAAWmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACyZ,GAAO,SACxDzZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,eAAemb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACoZ,GAAkB,SAGvEpZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,cAAcmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACsZ,GAAU,SAC9DtZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,qBAAqBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACqZ,GAAgB,SAC3ErZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,SAASmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACuZ,GAAK,SACpDvZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,UAAUmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACwZ,GAAa,SAG7DxZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,kBAAkBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAAC+Y,GAAa,SACrE/Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,gCAAgCmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACgZ,GAAY,CAAC1Q,KAAMA,SACzFtI,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,sBAAsBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAACiZ,GAAS,CAAC3Q,KAAMA,SAC5EtI,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,2BAA2Bmb,SAASvc,EAAAA,EAAAA,KAACkZ,GAAc,OAG/DlZ,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,sBAAsBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC+X,GAAS,CAACyE,aAAa,yBAC/Exc,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,sBAAsBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC+X,GAAS,CAACyE,aAAa,qBAC/Exc,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,uBAAuBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC+X,GAAS,CAACyE,aAAa,0BAChFxc,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,yBAAyBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC2Z,GAAc,SACzE3Z,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,wBAAwBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC0Z,GAAa,SACvE1Z,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,sBAAsBmb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAAC0Y,GAAa,SACrE1Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,eAAemb,SAASvc,EAAAA,EAAAA,KAACoa,GAAU,CAAA3a,UAACO,EAAAA,EAAAA,KAACyY,GAAa,SAC9DzY,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,kBAAkBmb,SAASvc,EAAAA,EAAAA,KAACqa,GAAY,CAAA5a,UAACO,EAAAA,EAAAA,KAAC6Y,GAAc,SAGpE7Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,eAAemb,SAASvc,EAAAA,EAAAA,KAACua,GAAe,CAAA9a,UAACO,EAAAA,EAAAA,KAAC8Y,GAAmB,SACzE9Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,iBAAiBmb,SAASvc,EAAAA,EAAAA,KAACua,GAAe,CAAA9a,UAACO,EAAAA,EAAAA,KAAC8Y,GAAmB,SAG3E9Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,UAAUmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAAC2Y,GAAe,SAC/D3Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,qBAAqBmb,SAASvc,EAAAA,EAAAA,KAACga,GAAc,CAAAva,UAACO,EAAAA,EAAAA,KAAC4Y,GAAgB,SAG3E5Y,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,IAAImb,SAASvc,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,OAChErS,EAAAA,EAAAA,KAACsc,EAAAA,GAAK,CAAClb,KAAK,IAAImb,SAASvc,EAAAA,EAAAA,KAACia,EAAAA,GAAQ,CAACC,GAAG,mBAAmB7H,SAAO,cAMpErS,EAAAA,EAAAA,KAAA,UAAQb,UAAU,qEAAoEM,SAAC,0DAMzFO,EAAAA,EAAAA,KAAC4S,GAAS,KAGV5S,EAAAA,EAAAA,KAACiT,GAAgB,IAGhBuC,IAAoBoF,IACnB5a,EAAAA,EAAAA,KAACiV,GAAkB,CACjBC,SAAU2B,EACV1B,UAAWA,KACT0F,GAAuB,GACvB,IAAMjR,aAAac,QAAQ,0BAA2B0J,KAAKC,MAAMK,WAAa,CAAE,MAAA+H,GAAO,MAM3F/G,IACArW,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sIAAqIM,SAAA,EAClJO,EAAAA,EAAAA,KAAC0c,GAAAA,EAAO,CAACjV,KAAM,KAAM,mJAMzBzH,EAAAA,EAAAA,KAAC8X,GAAU,KAGX9X,EAAAA,EAAAA,KAAC6X,GAAY,IAGZkD,IAA+B,OAAP3V,QAAO,IAAPA,OAAO,EAAPA,EAASqD,OAChCzI,EAAAA,EAAAA,KAAA,OACEb,UAAU,0GACV8E,QAASA,IAAM+W,GAAwB,GAAOvb,UAE9CJ,EAAAA,EAAAA,MAAA,OACEF,UAAU,uCACV8E,QAAU0C,GAAMA,EAAE4E,kBAAkB9L,SAAA,EAEpCO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,kBAAiBM,UAC9BO,EAAAA,EAAAA,KAAA,UACEiE,QAASA,IAAM+W,GAAwB,GACvC7b,UAAU,0HAAyHM,SACpI,cAIHO,EAAAA,EAAAA,KAACwX,GAAiB,CAChBnJ,OAAQjJ,EAAQqD,IAChBkU,QAAStB,KAEXrb,EAAAA,EAAAA,KAAA,OAAKb,UAAU,6CAA4CM,SAAC,kFAWxE,C,uMCtbO,MAAMmd,EAAa,CACxB,CAAEld,GAAI,OAAQsH,KAAM,4BAASsJ,MAAO,WACpC,CAAE5Q,GAAI,QAASsH,KAAM,4BAASsJ,MAAO,WACrC,CAAE5Q,GAAI,SAAUsH,KAAM,4BAASsJ,MAAO,WACtC,CAAE5Q,GAAI,MAAOsH,KAAM,kCAAUsJ,MAAO,WACpC,CAAE5Q,GAAI,OAAQsH,KAAM,kCAAUsJ,MAAO,YAI1BuM,EAAc,CACzB,CAAEnd,GAAI,QAASsH,KAAM,qBAAO9F,KAAM,eAAME,KAAM,sFAC9C,CAAE1B,GAAI,OAAQsH,KAAM,qBAAO9F,KAAM,eAAME,KAAM,kFAC7C,CAAE1B,GAAI,SAAUsH,KAAM,qBAAO9F,KAAM,eAAME,KAAM,sFAC/C,CAAE1B,GAAI,QAASsH,KAAM,qBAAO9F,KAAM,eAAME,KAAM,sFAC9C,CAAE1B,GAAI,OAAQsH,KAAM,eAAM9F,KAAM,eAAME,KAAM,mFAIjC0b,EAAa,CACxB,CAAEpd,GAAI,SAAUsH,KAAM,eAAM+V,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,GAAIqH,KAAM,GAChE,CAAE/H,GAAI,MAAOsH,KAAM,gBAAO+V,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,GAAIqH,KAAM,GAC9D,CAAE/H,GAAI,QAASsH,KAAM,sBAAQ+V,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,GAAIqH,KAAM,GACjE,CAAE/H,GAAI,SAAUsH,KAAM,2BAAQ+V,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,GAAIqH,KAAM,EAAGwV,MAAO,UAC5E,CAAEvd,GAAI,QAASsH,KAAM,4BAAS+V,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,GAAIqH,KAAM,EAAGwV,MAAO,UAIjEC,EAAa,CACxB,CAAExd,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,QAASsH,KAAM,eAAMsJ,MAAO,WAClC,CAAE5Q,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,OAAQsH,KAAM,qBAAOsJ,MAAO,WAClC,CAAE5Q,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,YAItB6M,EAAe,CAC1B,CAAEzd,GAAI,QAASsH,KAAM,eAAM5F,KAAM,sBAAuBT,QAAQ,GAChE,CAAEjB,GAAI,OAAQsH,KAAM,4BAAS5F,KAAM,sBAAuBT,QAAQ,GAClE,CAAEjB,GAAI,UAAWsH,KAAM,qBAAO5F,KAAM,gBAAiBT,QAAQ,GAC7D,CAAEjB,GAAI,cAAesH,KAAM,4BAAS5F,KAAM,sBAAuBT,QAAQ,GACzE,CAAEjB,GAAI,OAAQsH,KAAM,sBAAQ5F,KAAM,mCAAoC7B,MAAM,IAIxE6d,EAAY,CAAC,QAAS,OAAQ,SAAU,QAAS,QAE1CC,EAAa,CACxB,CACE3d,GAAI,OACJsH,KAAM,qBACN2L,MAAO,GACP2K,gBAAiBF,GAEnB,CAEE1d,GAAI,QACJsH,KAAM,4BACN2L,MAAO,CACL,6DAEF2K,gBAAiBF,GAEnB,CAEE1d,GAAI,SACJsH,KAAM,4BACN2L,MAAO,CACL,oEAEF4K,UAAW,sEACXD,gBAAiBF,GAEnB,CAEE1d,GAAI,OACJsH,KAAM,sBACN2L,MAAO,CAEL,oEAEF4K,UAAW,sEACXD,gBAAiBF,GAEnB,CAEE1d,GAAI,MACJsH,KAAM,eACN2L,MAAO,CACL,8GAEF4K,UAAW,6EACXD,gBAAiBF,GAEnB,CAEE1d,GAAI,WACJsH,KAAM,2BACN2L,MAAO,CAEL,8DAEA,+EAEF2K,gBAAiBF,GAEnB,CAEE1d,GAAI,WACJsH,KAAM,2BACN2L,MAAO,CAEL,8DAEA,2DAEA,mEAEF2K,gBAAiBF,GAEnB,CAEE1d,GAAI,QACJsH,KAAM,2BACN2L,MAAO,CAEL,8DAEA,0DAEA,kEAEF2K,gBAAiBF,GAEnB,CAEE1d,GAAI,SACJsH,KAAM,qBACN2L,MAAO,CACL,mFAEF2K,gBAAiBF,IAKRI,EAAc,CACzB,CAAE9d,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,aAAcsH,KAAM,4BAASsJ,MAAO,WAC1C,CAAE5Q,GAAI,QAASsH,KAAM,eAAMsJ,MAAO,WAClC,CAAE5Q,GAAI,cAAesH,KAAM,4BAASsJ,MAAO,WAC3C,CAAE5Q,GAAI,SAAUsH,KAAM,eAAMsJ,MAAO,WACnC,CAAE5Q,GAAI,MAAOsH,KAAM,qBAAOsJ,MAAO,WACjC,CAAE5Q,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,WACpC,CAAE5Q,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,WACjC,CAAE5Q,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,WACpC,CAAE5Q,GAAI,OAAQsH,KAAM,qBAAOsJ,MAAO,WAClC,CAAE5Q,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,WACjC,CAAE5Q,GAAI,QAASsH,KAAM,eAAMsJ,MAAO,WAClC,CAAE5Q,GAAI,UAAWsH,KAAM,qBAAOyW,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,aAIrFC,EAAU,CACrB,CAAEhe,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,MACjC,CACE5Q,GAAI,SACJsH,KAAM,qBACN2W,UAAW,UACXvc,KAAM,+EACNwc,QAAS,gEAEX,CACEle,GAAI,OACJsH,KAAM,eACN2W,UAAW,UACXvc,KAAM,+EACNyc,KAAK,EACLC,QAAQ,GAEV,CACEpe,GAAI,SACJsH,KAAM,qBACN2W,UAAW,UACXvc,KAAM,+EACN2c,MAAM,EACNC,QAAQ,GAEV,CACEte,GAAI,QACJsH,KAAM,qBACN2W,UAAW,UACXvc,KAAM,gFAER,CACE1B,GAAI,UACJsH,KAAM,eACN2W,UAAW,UACXvc,KAAM,+EACN6c,QAAQ,EACRC,SAAS,IAKAC,EAAgB,CAC3B,CAAEze,GAAI,OAAQsH,KAAM,qBAAOsJ,MAAO,WAClC,CAAE5Q,GAAI,MAAOsH,KAAM,qBAAOsJ,MAAO,WACjC,CAAE5Q,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,WACpC,CAAE5Q,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,WACpC,CAAE5Q,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,WACpC,CAAE5Q,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,WACjC,CAAE5Q,GAAI,QAASsH,KAAM,qBAAOsJ,MAAO,WACnC,CAAE5Q,GAAI,QAASsH,KAAM,eAAMsJ,MAAO,WAClC,CAAE5Q,GAAI,OAAQsH,KAAM,qBAAOsJ,MAAO,YAIvB8N,EAAc,CACzB,CAAE1e,GAAI,OAAQsH,KAAM,gBACpB,CAAEtH,GAAI,UAAWsH,KAAM,eAAM5F,KAAM,gEAAiEkP,MAAO,WAC3G,CAAE5Q,GAAI,aAAcsH,KAAM,2BAAQ5F,KAAM,0GAA2GkP,MAAO,UAAW/Q,MAAM,GAC3K,CAAEG,GAAI,WAAYsH,KAAM,qBAAO2K,KAAM,WAAYrB,MAAO,WACxD,CAAE5Q,GAAI,WAAYsH,KAAM,qBAAO5F,KAAM,sBAAuBkP,MAAO,WACnE,CAAE5Q,GAAI,MAAOsH,KAAM,eAAM5F,KAAM,oCAAqCkP,MAAO,WAC3E,CAAE5Q,GAAI,QAASsH,KAAM,eAAM2K,KAAM,QAASrB,MAAO,WACjD,CAAE5Q,GAAI,WAAYsH,KAAM,qBAAO5F,KAAM,sBAAuBkP,MAAO,WACnE,CAAE5Q,GAAI,MAAOsH,KAAM,eAAM2K,KAAM,MAAOrB,MAAO,WAC7C,CAAE5Q,GAAI,OAAQsH,KAAM,qBAAO5F,KAAM,4CAA6CkP,MAAO,YAI1E+N,EAAc,CACzB,CAAE3e,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,eACjC,CAAE5Q,GAAI,WAAYsH,KAAM,qBAAOsJ,MAAO,WACtC,CAAE5Q,GAAI,SAAUsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,YAClD,CAAE/d,GAAI,QAASsH,KAAM,qBAAOyW,SAAU,CAAC,UAAW,UAAW,YAC7D,CAAE/d,GAAI,SAAUsH,KAAM,SAAKyW,SAAU,CAAC,UAAW,YACjD,CAAE/d,GAAI,QAASsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,YACjD,CAAE/d,GAAI,OAAQsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,YAChD,CAAE/d,GAAI,SAAUsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,YAClD,CAAE/d,GAAI,OAAQsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,YAChD,CAAE/d,GAAI,UAAWsH,KAAM,qBAAOyW,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,YAChG,CAAE/d,GAAI,SAAUsH,KAAM,qBAAOyW,SAAU,CAAC,UAAW,UAAW,WAAYa,OAAO,IAItEC,EAAU,CACrB,CAAE7e,GAAI,OAAQsH,KAAM,eAAM5H,MAAO,MACjC,CAAEM,GAAI,SAAUsH,KAAM,eAAMsJ,MAAO,UAAWjQ,MAAO,GACrD,CAAEX,GAAI,OAAQsH,KAAM,eAAMsJ,MAAO,UAAWjQ,MAAO,EAAGme,MAAM,GAC5D,CAAE9e,GAAI,SAAUsH,KAAM,eAAMsJ,MAAO,UAAWjQ,MAAO,EAAGme,MAAM,GAC9D,CAAE9e,GAAI,SAAUsH,KAAM,qBAAOsJ,MAAO,UAAWjQ,MAAO,EAAGme,MAAM,GAC/D,CAAE9e,GAAI,UAAWsH,KAAM,qBAAOyW,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAAYpd,MAAO,EAAGoe,UAAU,GAChI,CAAE/e,GAAI,YAAasH,KAAM,4BAASsJ,MAAO,UAAWjQ,MAAO,EAAGme,MAAM,EAAME,UAAW,WACrF,CAAEhf,GAAI,YAAasH,KAAM,4BAASsJ,MAAO,UAAWjQ,MAAO,EAAGme,MAAM,EAAME,UAAW,WACrF,CAAEhf,GAAI,OAAQsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,UAAW,WAAYpd,MAAO,EAAGoe,UAAU,GAC3F,CAAE/e,GAAI,MAAOsH,KAAM,eAAMyW,SAAU,CAAC,UAAW,UAAW,WAAYpd,MAAO,EAAGme,MAAM,IAI3EG,EAAc,CACzB,CAAEjf,GAAI,SAAUsH,KAAM,eAAM4X,OAAQ,KAAMC,SAAU,MACpD,CAAEnf,GAAI,QAASsH,KAAM,eAAM4X,OAAQ,QAASC,SAAU,QACtD,CAAEnf,GAAI,MAAOsH,KAAM,eAAM4X,OAAQ,MAAOC,SAAU,OAClD,CAAEnf,GAAI,QAASsH,KAAM,eAAM4X,OAAQ,QAASC,SAAU,SACtD,CAAEnf,GAAI,YAAasH,KAAM,eAAM4X,OAAQ,OAAQC,SAAU,QACzD,CAAEnf,GAAI,OAAQsH,KAAM,eAAM4X,OAAQ,OAAQC,SAAU,SACpD,CAAEnf,GAAI,OAAQsH,KAAM,eAAM4X,OAAQ,SAAUC,SAAU,SACtD,CAAEnf,GAAI,OAAQsH,KAAM,eAAM4X,OAAQ,aAAcC,SAAU,UAI/CC,EAAiB,CAC5BC,SAAU,QACVC,UAAW,OACXC,SAAU,SACVC,SAAU,QACVC,WAAY,QACZC,UAAW,QACXC,UAAW,QACXC,OAAQ,SACRC,YAAa,OACbC,UAAW,OACX3O,WAAY,WACZ4O,OAAQ,SACRC,WAAY,UAMP,SAASxR,EAAgBG,GAC9B,IACE,MAAMsR,EAAQ/V,aAAaC,QAAQ,UAAD3F,OAAWmK,IAC7C,GAAIsR,EACF,OAAAxZ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAY2Y,GAAmBc,KAAKC,MAAMF,GAE9C,CAAE,MAAA7E,GACA,CAEF,OAAA3U,EAAAA,EAAAA,GAAA,GAAY2Y,EACd,CAKO,SAASgB,EAAiBzR,EAAQC,GACvC,IAIE,OAHA1E,aAAac,QAAQ,UAADxG,OAAWmK,GAAUuR,KAAKG,UAAUzR,IAExD3I,OAAOqa,cAAc,IAAIC,YAAY,gBAAiB,CAAE7R,OAAQ,CAAEC,SAAQC,cACnE,CACT,CAAE,MAAAmO,GACA,OAAO,CACT,CACF,CAKO,SAASyD,EAAiB7e,GAC/B,OAAQA,GACN,IAAK,WAAY,OAAOub,EACxB,IAAK,YAAa,OAAOC,EACzB,IAAK,WAAY,OAAOC,EACxB,IAAK,WAAY,OAAOI,EACxB,IAAK,aAAc,OAAOC,EAC1B,IAAK,YAAa,OAAOE,EACzB,IAAK,YAAa,OAAOG,EACzB,IAAK,SAAU,OAAOE,EACtB,IAAK,cAAe,OAAOS,EAC3B,IAAK,YAAa,OAAOC,EACzB,IAAK,aAAc,OAAOC,EAC1B,IAAK,SAAU,OAAOE,EACtB,IAAK,aAAc,OAAOI,EAC1B,QAAS,MAAO,GAEpB,CAKO,SAASwB,EAAsBC,EAAaC,GACjD,MAAMjB,EAAY/B,EAAWiD,KAAKC,GAAKA,EAAE7gB,KAAO0gB,GAChD,OAAKhB,GACEA,EAAU9B,gBAAgBkD,SAASH,EAC5C,CAMO,MAAMI,EAAoB,CAC/B,CAAE/gB,GAAI,WAAYsH,KAAM,eAAM9F,KAAM,WACpC,CAAExB,GAAI,YAAasH,KAAM,eAAM9F,KAAM,WACrC,CAAExB,GAAI,WAAYsH,KAAM,SAAK9F,KAAM,WACnC,CAAExB,GAAI,WAAYsH,KAAM,eAAM9F,KAAM,WACpC,CAAExB,GAAI,aAAcsH,KAAM,SAAK9F,KAAM,WACrC,CAAExB,GAAI,YAAasH,KAAM,eAAM9F,KAAM,WACrC,CAAExB,GAAI,YAAasH,KAAM,qBAAO9F,KAAM,WACtC,CAAExB,GAAI,SAAUsH,KAAM,eAAM9F,KAAM,WAClC,CAAExB,GAAI,cAAesH,KAAM,qBAAO9F,KAAM,WACxC,CAAExB,GAAI,YAAasH,KAAM,eAAM9F,KAAM,WACrC,CAAExB,GAAI,aAAcsH,KAAM,eAAM9F,KAAM,WACtC,CAAExB,GAAI,SAAUsH,KAAM,qBAAO9F,KAAM,W,0ECnWrC,SAASwf,EAAYC,GAAoB,IAAfC,EAAO9jB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAClC,IAAK6jB,GAAe,SAARA,GAA0B,gBAARA,EAAuB,OAAOA,EAG5D,IAAIE,EAAI1M,SAASwM,EAAIG,MAAM,EAAG,GAAI,IAC9BC,EAAI5M,SAASwM,EAAIG,MAAM,EAAG,GAAI,IAC9BnR,EAAIwE,SAASwM,EAAIG,MAAM,EAAG,GAAI,IAOlC,OAJAD,EAAIG,KAAKC,IAAI,EAAGD,KAAKE,MAAML,GAAK,IAAMD,GAAW,MACjDG,EAAIC,KAAKC,IAAI,EAAGD,KAAKE,MAAMH,GAAK,IAAMH,GAAW,MACjDjR,EAAIqR,KAAKC,IAAI,EAAGD,KAAKE,MAAMvR,GAAK,IAAMiR,GAAW,MAE3C,IAAN1c,OAAW2c,EAAEnM,SAAS,IAAIyM,SAAS,EAAG,MAAIjd,OAAG6c,EAAErM,SAAS,IAAIyM,SAAS,EAAG,MAAIjd,OAAGyL,EAAE+E,SAAS,IAAIyM,SAAS,EAAG,KAC5G,CAMe,SAAS3Q,EAAMtR,GAA2D,IAA1D,OAAEoP,EAAS,CAAC,EAAC,KAAE7G,EAAO,IAAG,WAAEgJ,GAAa,EAAI,QAAExM,GAAS/E,EACpF,MAAM8O,GAAY7H,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ2Y,EAAAA,IAAmBxQ,GAGvCyQ,EAAWnC,EAAAA,GAAW0D,KAAKc,GAAKA,EAAE1hB,KAAOsO,EAAa+Q,WAAanC,EAAAA,GAAW,GAC9EoC,EAAYnC,EAAAA,GAAYyD,KAAKe,GAAKA,EAAE3hB,KAAOsO,EAAagR,YAAcnC,EAAAA,GAAY,GAClFoC,EAAWnC,EAAAA,GAAWwD,KAAK3Z,GAAKA,EAAEjH,KAAOsO,EAAaiR,WAAanC,EAAAA,GAAW,GAC9EoC,EAAWhC,EAAAA,GAAWoD,KAAK3Z,GAAKA,EAAEjH,KAAOsO,EAAakR,WAAahC,EAAAA,GAAW,GAC9EiC,EAAahC,EAAAA,GAAamD,KAAK3I,GAAKA,EAAEjY,KAAOsO,EAAamR,aAAehC,EAAAA,GAAa,GACtFiC,EAAY/B,EAAAA,GAAWiD,KAAKC,GAAKA,EAAE7gB,KAAOsO,EAAaoR,YAAc/B,EAAAA,GAAW,GAChFgC,EAAY7B,EAAAA,GAAY8C,KAAKC,GAAKA,EAAE7gB,KAAOsO,EAAaqR,YAAc7B,EAAAA,GAAY,GAClF8B,EAAS5B,EAAAA,GAAQ4C,KAAKgB,GAAKA,EAAE5hB,KAAOsO,EAAasR,SAAW5B,EAAAA,GAAQ,GACpE6B,EAAcpB,EAAAA,GAAcmC,KAAKgB,GAAKA,EAAE5hB,KAAOsO,EAAauR,cAAgBpB,EAAAA,GAAc,GAC1FqB,EAAYpB,EAAAA,GAAYkC,KAAK5Q,GAAKA,EAAEhQ,KAAOsO,EAAawR,WACxD3O,EAAawN,EAAAA,GAAYiC,KAAK3Q,GAAKA,EAAEjQ,KAAOsO,EAAa6C,aAAewN,EAAAA,GAAY,GACpFoB,EAASlB,EAAAA,GAAQ+B,KAAK3Q,GAAKA,EAAEjQ,KAAOsO,EAAayR,QAGjD8B,EAAYb,EAAY3B,EAASzO,MAAO,IAqBxCkR,EARC/B,GAAwB,SAAdA,EAAO/f,IAAkB+Q,EACjC,CACL9P,OAAQ8e,EAAOhC,SAAQ,wBAAAvZ,OAA2Bub,EAAO/f,GAAE,KAAM+f,EAAOnP,MACxE1P,YAAa6e,EAAOpf,OAAS,EAC7BU,OAAQ0e,EAAOjB,KAAI,mBAAAta,OAAqC,EAAfub,EAAOpf,MAAS,OAAA6D,OAAMub,EAAOf,WAAae,EAAOnP,MAAK,UAAMtT,GAJ5C,KAWvDykB,EAAcA,IACL,OAATpC,QAAS,IAATA,GAAAA,EAAW5B,SACN,sBAEO,OAAT4B,QAAS,IAATA,OAAS,EAATA,EAAW/O,QAAS,UAO7B,OACEjR,EAAAA,EAAAA,MAAA,OACEgB,MAAOoH,EACPnH,OAAQmH,EACRnI,QAAO,OAAA4E,QAPM,GAOW,SAAAA,OANN,KAOlBD,QAASA,EACT7E,MAAO,CAAEsiB,OAAQzd,EAAU,UAAY,UAAW0d,SAAU,WAC5DC,oBAAoB,gBAAeniB,SAAA,EAEnCJ,EAAAA,EAAAA,MAAA,QAAAI,SAAA,EAEa,OAAVoR,QAAU,IAAVA,OAAU,EAAVA,EAAY4M,YACXzd,EAAAA,EAAAA,KAAA,kBAAgBN,GAAE,eAAAwE,OAAiB2M,EAAWnR,IAAMC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OAAML,SAClFoR,EAAW4M,SAASpW,IAAI,CAACiJ,EAAOuR,KAC/B7hB,EAAAA,EAAAA,KAAA,QAEEC,OAAM,GAAAiE,OAAM2d,GAAOhR,EAAW4M,SAAS1gB,OAAS,GAAM,IAAG,KACzDmD,UAAWoQ,GAFNuR,OASN,OAANpC,QAAM,IAANA,OAAM,EAANA,EAAQhC,YACPzd,EAAAA,EAAAA,KAAA,kBAAgBN,GAAE,mBAAAwE,OAAqBub,EAAO/f,IAAMC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OAAOC,GAAG,OAAML,SACpFggB,EAAOhC,SAASpW,IAAI,CAACiJ,EAAOuR,KAC3B7hB,EAAAA,EAAAA,KAAA,QAEEC,OAAM,GAAAiE,OAAM2d,GAAOpC,EAAOhC,SAAS1gB,OAAS,GAAM,IAAG,KACrDmD,UAAWoQ,GAFNuR,OASH,OAATxC,QAAS,IAATA,OAAS,EAATA,EAAW5B,YACVzd,EAAAA,EAAAA,KAAA,kBAAgBN,GAAG,eAAeC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OAAOC,GAAG,KAAIL,SAChE4f,EAAU5B,SAASpW,IAAI,CAACiJ,EAAOuR,KAC9B7hB,EAAAA,EAAAA,KAAA,QAEEC,OAAM,GAAAiE,OAAM2d,GAAOxC,EAAU5B,SAAS1gB,OAAS,GAAM,IAAG,KACxDmD,UAAWoQ,GAFNuR,OASb7hB,EAAAA,EAAAA,KAAA,UAAQN,GAAG,SAASS,EAAE,OAAOC,EAAE,OAAOC,MAAM,OAAOC,OAAO,OAAMb,UAC9DO,EAAAA,EAAAA,KAAA,gBAAc8hB,GAAG,IAAIC,GAAG,IAAIxhB,aAAa,IAAIyhB,aAAa,WAI5DhiB,EAAAA,EAAAA,KAAA,YAAUN,GAAG,YAAWD,UACtBO,EAAAA,EAAAA,KAAA,QAAMU,EAAGse,EAAU5d,YAKtByP,GAAgC,SAAlBA,EAAWnR,KACxBM,EAAAA,EAAAA,KAAA,QACEG,EAAE,MACFC,GAnES,GAoETC,MAAM,MACNC,OApEc,IAqEdf,KAlGDsR,GAAgC,SAAlBA,EAAWnR,GAC1BmR,EAAW4M,SACP,oBAANvZ,OAA2B2M,EAAWnR,GAAE,KAEnCmR,EAAWP,MAJkC,UAmG9C7P,GAAG,QAKI,OAAVoQ,QAAU,IAAVA,OAAU,EAAVA,EAAYyN,SACXjf,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACrDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,SACnDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACrDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,IAAIrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACpDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,SACnDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACrDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,IAAIC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACpDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,MAAMrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,SACpDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,MAAMrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,YAK1DniB,EAAAA,EAAAA,KAAA,QACEG,EAAE,KACFC,EAAE,KACFC,MAAM,KACNC,OAAO,KACPf,KAAMwf,EAASzO,QAIhBgP,GAAwB,SAAdA,EAAO5f,KAChBL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EAEEO,EAAAA,EAAAA,KAAA,QACEU,EAAG4e,EAAOle,KACV7B,MAAiB,OAAXggB,QAAW,IAAXA,OAAW,EAAXA,EAAajP,QAASgP,EAAO3B,YAGpC2B,EAAOrB,SACNje,EAAAA,EAAAA,KAAA,KAAAP,UACEO,EAAAA,EAAAA,KAAA,QAAMU,EAAE,wBAAwBC,OAAO,UAAUC,YAAY,IAAIrB,KAAK,WAIzE+f,EAAOpB,UACN7e,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,MAAMrB,EAAE,IAAIthB,KAAK,aACpCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,MAAMrB,EAAE,IAAIthB,KAAK,eAIvC+f,EAAOzB,MACNxe,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,QAAMU,EAAE,uBAAuBnB,KAAK,aACpCS,EAAAA,EAAAA,KAAA,QAAMU,EAAE,0BAA0BnB,KAAK,eAI1C+f,EAAOvB,OACN/d,EAAAA,EAAAA,KAAA,QACEU,EAAE,0CACFnB,KAAMmhB,GAAuB,OAAXnB,QAAW,IAAXA,OAAW,EAAXA,EAAajP,QAASgP,EAAO3B,UAAW,UAOlEte,EAAAA,EAAAA,MAAA,KAAAI,SAAA,CAEG,MAGC,MAAM2iB,EAAe,CACnBC,MAAO,CAAEtF,MAAO,EAAGC,OAAQ,GAAI5c,EAAG,IAClCkiB,KAAM,CAAEvF,MAAO,EAAGC,OAAQ,GAAI5c,EAAG,IACjCmiB,OAAQ,CAAExF,MAAO,EAAGC,OAAQ,GAAI5c,EAAG,IACnCoiB,MAAO,CAAEzF,MAAO,EAAGC,OAAQ,GAAI5c,EAAG,IAClCqiB,KAAM,CAAE1F,MAAO,GAAIC,OAAQ,GAAI5c,EAAG,KAE9BsiB,EAASN,EAAapD,EAAUtf,KAAO0iB,EAAaC,MAC1D,OACEhjB,EAAAA,EAAAA,MAAAsI,EAAAA,SAAA,CAAAlI,SAAA,EAEEO,EAAAA,EAAAA,KAAA,WACEiiB,GAAIS,EAAO3F,MACXmF,GAAIQ,EAAOtiB,EACXK,GAAG,IACHkiB,GAAG,IACHpjB,KAAMwf,EAASzO,SAEjBtQ,EAAAA,EAAAA,KAAA,WACEiiB,GAAIS,EAAO3F,MAAQ,EACnBmF,GAAIQ,EAAOtiB,EACXK,GAAG,IACHkiB,GAAG,IACHpjB,KAAMmhB,EAAY3B,EAASzO,MAAO,OAGpCtQ,EAAAA,EAAAA,KAAA,WACEiiB,GAAIS,EAAO1F,OACXkF,GAAIQ,EAAOtiB,EACXK,GAAG,IACHkiB,GAAG,IACHpjB,KAAMwf,EAASzO,SAEjBtQ,EAAAA,EAAAA,KAAA,WACEiiB,GAAIS,EAAO1F,OAAS,EACpBkF,GAAIQ,EAAOtiB,EACXK,GAAG,IACHkiB,GAAG,IACHpjB,KAAMmhB,EAAY3B,EAASzO,MAAO,QAIzC,EA7CA,IA+CDtQ,EAAAA,EAAAA,KAAA,QACEU,EAAGse,EAAU5d,KACb7B,KAAMwf,EAASzO,SAGjBtQ,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,IAAIkiB,GAAG,IAAIpjB,KAAK,UAAU4iB,QAAQ,SAC9DniB,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,IAAIkiB,GAAG,IAAIpjB,KAAK,UAAU4iB,QAAQ,YAIhE9iB,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EAEEO,EAAAA,EAAAA,KAAA,WACEiiB,GAAIhD,EAASlC,MACbmF,GAAIjD,EAAS7e,EACbK,GAAIwe,EAASxX,KACbkb,GAAoB,IAAhB1D,EAASxX,KACblI,KAAK,WAEPS,EAAAA,EAAAA,KAAA,UACEiiB,GAAIhD,EAASlC,MACbmF,GAAIjD,EAAS7e,EACbygB,EAAmB,IAAhB5B,EAASxX,KACZlI,KAAM2f,EAAS5O,SAEjBtQ,EAAAA,EAAAA,KAAA,UACEiiB,GAAIhD,EAASlC,MAAQ,EACrBmF,GAAIjD,EAAS7e,EAAI,EACjBygB,EAAmB,IAAhB5B,EAASxX,KACZlI,KAAK,WAIPS,EAAAA,EAAAA,KAAA,WACEiiB,GAAIhD,EAASjC,OACbkF,GAAIjD,EAAS7e,EACbK,GAAIwe,EAASxX,KACbkb,GAAoB,IAAhB1D,EAASxX,KACblI,KAAK,WAEPS,EAAAA,EAAAA,KAAA,UACEiiB,GAAIhD,EAASjC,OACbkF,GAAIjD,EAAS7e,EACbygB,EAAmB,IAAhB5B,EAASxX,KACZlI,KAAM2f,EAAS5O,SAEjBtQ,EAAAA,EAAAA,KAAA,UACEiiB,GAAIhD,EAASjC,OAAS,EACtBkF,GAAIjD,EAAS7e,EAAI,EACjBygB,EAAmB,IAAhB5B,EAASxX,KACZlI,KAAK,WAIPS,EAAAA,EAAAA,KAAA,QACEU,EAAC,IAAAwD,OAAM+a,EAASlC,MAAQ,EAAC,KAAA7Y,OAAI+a,EAAS7e,EAAI,GAAE,MAAA8D,OAAK+a,EAASlC,MAAK,KAAA7Y,OAAI+a,EAAS7e,EAAI,GAAE,KAAA8D,OAAI+a,EAASlC,MAAQ,EAAC,KAAA7Y,OAAI+a,EAAS7e,EAAI,IACzHO,OAAiB,OAAT0e,QAAS,IAATA,GAAAA,EAAW5B,SAAW,WAAsB,OAAT4B,QAAS,IAATA,OAAS,EAATA,EAAW/O,QAAS,UAC/D1P,YAAY,MACZrB,KAAK,OACLsB,cAAc,WAEhBb,EAAAA,EAAAA,KAAA,QACEU,EAAC,IAAAwD,OAAM+a,EAASjC,OAAS,EAAC,KAAA9Y,OAAI+a,EAAS7e,EAAI,GAAE,MAAA8D,OAAK+a,EAASjC,OAAM,KAAA9Y,OAAI+a,EAAS7e,EAAI,GAAE,KAAA8D,OAAI+a,EAASjC,OAAS,EAAC,KAAA9Y,OAAI+a,EAAS7e,EAAI,IAC5HO,OAAiB,OAAT0e,QAAS,IAATA,GAAAA,EAAW5B,SAAW,WAAsB,OAAT4B,QAAS,IAATA,OAAS,EAATA,EAAW/O,QAAS,UAC/D1P,YAAY,MACZrB,KAAK,OACLsB,cAAc,cAKlBb,EAAAA,EAAAA,KAAA,QACEU,EAAE,uBACFC,OAAQ4gB,EACR3gB,YAAY,MACZrB,KAAK,OACLsB,cAAc,QACdC,eAAe,WAIjBd,EAAAA,EAAAA,KAAA,QACEU,EAAGye,EAAW/d,KACdT,OAAQwe,EAAWxe,OAAS,UAAY,OACxCC,YAAY,MACZrB,KAAM4f,EAAW5f,KAAO,UAAY,OACpCsB,cAAc,UAIfue,GAA8B,SAAjBA,EAAU1f,KACtBL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,CAEG2f,EAAUzM,OAASyM,EAAUzM,MAAM,KAClC3S,EAAAA,EAAAA,KAAA,QACEU,EAAG0e,EAAUzM,MAAM,GACnBpT,KAAMkiB,IACN9gB,OAA6B,aAAZ,OAAT0e,QAAS,IAATA,OAAS,EAATA,EAAW/O,OAAsB,OAAS,OAClD1P,YAAY,MAIfwe,EAAUzM,OAASyM,EAAUzM,MAAMmO,MAAM,GAAGzZ,IAAI,CAAC0L,EAAG6P,KACnD5iB,EAAAA,EAAAA,KAAA,QAEEU,EAAGqS,EACHxT,KAAMkiB,IACN9gB,OAA6B,aAAZ,OAAT0e,QAAS,IAATA,OAAS,EAATA,EAAW/O,OAAsB,OAAS,OAClD1P,YAAY,KAAG,QAAAsD,OAJF0e,KAQhBxD,EAAU7B,YACTvd,EAAAA,EAAAA,KAAA,QACEU,EAAG0e,EAAU7B,UACbhe,KAAMkiB,IACN9gB,OAA6B,aAAZ,OAAT0e,QAAS,IAATA,OAAS,EAATA,EAAW/O,OAAsB,OAAS,OAClD1P,YAAY,SAOnB4e,GAA8B,SAAjBA,EAAU9f,KACtBL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,CAEoB,YAAjB+f,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EAEEO,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,KAAKthB,KAAK,OAAOoB,OAAO,UAAUC,YAAY,OAExEZ,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,KAAKthB,KAAK,OAAOoB,OAAO,UAAUC,YAAY,OAExEZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,sBAAsBnB,KAAK,OAAOoB,OAAO,UAAUC,YAAY,OAEvEZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,gBAAgBC,OAAO,UAAUC,YAAY,OACrDZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,gBAAgBC,OAAO,UAAUC,YAAY,SAIvC,eAAjB4e,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,KAAKkiB,GAAG,IAAIpjB,KAAK,aAC7CS,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,KAAKkiB,GAAG,IAAIpjB,KAAK,aAC7CS,EAAAA,EAAAA,KAAA,QAAMU,EAAE,sBAAsBnB,KAAK,OAAOoB,OAAO,UAAUC,YAAY,OACvEZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,eAAeC,OAAO,UAAUC,YAAY,OACpDZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,gBAAgBC,OAAO,UAAUC,YAAY,OAErDZ,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,IAAIkiB,GAAG,IAAIpjB,KAAK,QAAQ4iB,QAAQ,SAC5DniB,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,KAAKzhB,GAAG,IAAIkiB,GAAG,IAAIpjB,KAAK,QAAQ4iB,QAAQ,WAI9C,aAAjB3C,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,IAAIC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aAClCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aACnCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,IAAIC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,SAClDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,WAIrC,aAAjB3C,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,QAAMU,EAAE,sBAAsBnB,KAAK,OAAOoB,OAAO,UAAUC,YAAY,OACvEZ,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aACnCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,WAIrC,QAAjB3C,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,IAAIzhB,GAAG,KAAKkiB,GAAG,IAAIpjB,KAAK,aAC5CS,EAAAA,EAAAA,KAAA,QAAMU,EAAE,oCAAoCnB,KAAK,aACjDS,EAAAA,EAAAA,KAAA,QAAMG,EAAE,KAAKC,EAAE,IAAIC,MAAM,KAAKC,OAAO,IAAIf,KAAK,eAIhC,UAAjBigB,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,QACEU,EAAE,kEACFnB,KAAK,UACLoB,OAAO,UACPC,YAAY,OAEdZ,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aACnCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aACnCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,aACnCS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,SACrDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,IAAIthB,KAAK,QAAQ4iB,QAAQ,SACnDniB,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,KAAKC,GAAG,KAAKrB,EAAE,MAAMthB,KAAK,QAAQ4iB,QAAQ,WAIvC,aAAjB3C,EAAU9f,KACTM,EAAAA,EAAAA,KAAA,QACEU,EAAE,sBACFnB,KAAK,OACLoB,OAAO,UACPC,YAAY,MAIE,QAAjB4e,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAGwjB,UAAU,oBAAmBpjB,SAAA,EAC9BO,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,MAAMC,GAAG,IAAIzhB,GAAG,KAAKkiB,GAAG,IAAIpjB,KAAK,aAC7CS,EAAAA,EAAAA,KAAA,WAASiiB,GAAG,KAAKC,GAAG,IAAIzhB,GAAG,KAAKkiB,GAAG,IAAIpjB,KAAK,aAC5CS,EAAAA,EAAAA,KAAA,UAAQiiB,GAAG,IAAIC,GAAG,IAAIrB,EAAE,IAAIthB,KAAK,eAInB,SAAjBigB,EAAU9f,KACTL,EAAAA,EAAAA,MAAA,KAAAI,SAAA,EACEO,EAAAA,EAAAA,KAAA,QACEU,EAAE,4CACFnB,KAAK,UACLoB,OAAO,UACPC,YAAY,OAEdZ,EAAAA,EAAAA,KAAA,QAAMU,EAAE,gBAAgBC,OAAO,UAAUC,YAAY,YAO5D4gB,GAAe/Q,IACdzQ,EAAAA,EAAAA,KAAA,QACEG,EAAE,MACFC,GAAG0iB,GACHziB,MAAM,MACNC,OAAQyiB,IACRxjB,KAAK,OACLoB,OAAQ6gB,EAAY7gB,OACpBC,YAAa4gB,EAAY5gB,YACzBH,GAAG,KACHrB,MAAO,CAAE2B,OAAQygB,EAAYzgB,YAKvC,C,uDCjgBO,MAAMiiB,EAAe,CAE1BC,eAAgB,CACdvjB,GAAI,iBACJsH,KAAM,uBACNkc,YAAa,oDACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMC,aAAe,IAC3CtT,OAAQ,SACRuT,OAAQ,IAEVC,mBAAoB,CAClB7jB,GAAI,qBACJsH,KAAM,mCACNkc,YAAa,qDACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMC,aAAe,IAC3CtT,OAAQ,SACRuT,OAAQ,IAEVE,iBAAkB,CAChB9jB,GAAI,mBACJsH,KAAM,+BACNkc,YAAa,sDACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMC,aAAe,IAC3CtT,OAAQ,WACRuT,OAAQ,IAEVG,YAAa,CACX/jB,GAAI,cACJsH,KAAM,2BACNkc,YAAa,wDACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMC,aAAe,IAC3CtT,OAAQ,OACRuT,OAAQ,KAEVI,kBAAmB,CACjBhkB,GAAI,oBACJsH,KAAM,2BACNkc,YAAa,yDACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMC,aAAe,IAC3CtT,OAAQ,YACRuT,OAAQ,KAIVK,iBAAkB,CAChBjkB,GAAI,mBACJsH,KAAM,kCACNkc,YAAa,8DACbhiB,KAAM,qBACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMzS,SAAW,GACvCZ,OAAQ,SACRuT,OAAQ,IAEVM,cAAe,CACblkB,GAAI,gBACJsH,KAAM,kCACNkc,YAAa,8DACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMzS,SAAW,GACvCZ,OAAQ,WACRuT,OAAQ,IAEVO,eAAgB,CACdnkB,GAAI,iBACJsH,KAAM,4BACNkc,YAAa,+DACbhiB,KAAM,qBACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMzS,SAAW,IACvCZ,OAAQ,OACRuT,OAAQ,IAIVQ,YAAa,CACXpkB,GAAI,cACJsH,KAAM,sBACNkc,YAAa,4DACbhiB,KAAM,eACNG,SAAU,UACV8hB,UAAYC,GAAUA,EAAMW,mBAAqB,EACjDhU,OAAQ,SACRuT,OAAQ,IAEVU,cAAe,CACbtkB,GAAI,gBACJsH,KAAM,wCACNkc,YAAa,iDACbhiB,KAAM,eACNG,SAAU,UACV8hB,UAAYC,GAAUA,EAAMW,mBAAqB,GACjDhU,OAAQ,SACRuT,OAAQ,IAEVW,eAAgB,CACdvkB,GAAI,iBACJsH,KAAM,kCACNkc,YAAa,iDACbhiB,KAAM,eACNG,SAAU,UACV8hB,UAAYC,GAAUA,EAAMW,mBAAqB,GACjDhU,OAAQ,WACRuT,OAAQ,IAIVY,eAAgB,CACdxkB,GAAI,iBACJsH,KAAM,kCACNkc,YAAa,oFACbhiB,KAAM,eACNG,SAAU,WACV8hB,UAAYC,GAAUA,EAAMe,gBAAkB,EAC9CpU,OAAQ,SACRuT,OAAQ,IAEVc,eAAgB,CACd1kB,GAAI,iBACJsH,KAAM,qBACNkc,YAAa,wDACbhiB,KAAM,eACNG,SAAU,WACV8hB,UAAYC,GAAUA,EAAMe,gBAAkB,GAC9CpU,OAAQ,WACRuT,OAAQ,IAEVe,cAAe,CACb3kB,GAAI,gBACJsH,KAAM,qBACNkc,YAAa,yDACbhiB,KAAM,eACNG,SAAU,WACV8hB,UAAYC,GAAUA,EAAMe,gBAAkB,IAC9CpU,OAAQ,OACRuT,OAAQ,KAIVgB,eAAgB,CACd5kB,GAAI,iBACJsH,KAAM,kCACNkc,YAAa,yEACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMmB,gBAAkB,EAC9CxU,OAAQ,SACRuT,OAAQ,IAEVkB,YAAa,CACX9kB,GAAI,cACJsH,KAAM,wCACNkc,YAAa,0EACbhiB,KAAM,eACNG,SAAU,SACV8hB,UAAYC,GAAUA,EAAMmB,gBAAkB,EAC9CxU,OAAQ,WACRuT,OAAQ,IAIVmB,eAAgB,CACd/kB,GAAI,iBACJsH,KAAM,4BACNkc,YAAa,kEACbhiB,KAAM,eACNG,SAAU,aACV8hB,UAAYC,GAAUA,EAAMsB,YAAc,EAC1C3U,OAAQ,SACRuT,OAAQ,IAEVqB,qBAAsB,CACpBjlB,GAAI,uBACJsH,KAAM,wCACNkc,YAAa,mEACbhiB,KAAM,eACNG,SAAU,aACV8hB,UAAYC,GAAUA,EAAMsB,YAAc,EAC1C3U,OAAQ,WACRuT,OAAQ,IAEVsB,gBAAiB,CACfllB,GAAI,kBACJsH,KAAM,kCACNkc,YAAa,mEACbhiB,KAAM,eACNG,SAAU,aACV8hB,UAAYC,GAAUA,EAAMsB,YAAc,EAC1C3U,OAAQ,OACRuT,OAAQ,KAIVuB,mBAAoB,CAClBnlB,GAAI,qBACJsH,KAAM,qBACNkc,YAAa,gDACbhiB,KAAM,eACNG,SAAU,UACV8hB,UAAYC,GAAUA,EAAM0B,aAAe,EAC3C/U,OAAQ,WACRuT,OAAQ,KAEVyB,eAAgB,CACdrlB,GAAI,iBACJsH,KAAM,mCACNkc,YAAa,iDACbhiB,KAAM,qBACNG,SAAU,UACV8hB,UAAYC,GAAUA,EAAM0B,aAAe,GAC3C/U,OAAQ,OACRuT,OAAQ,KAEV0B,WAAY,CACVtlB,GAAI,aACJsH,KAAM,2BACNkc,YAAa,qDACbhiB,KAAM,eACNG,SAAU,UACV8hB,UAAWA,KAAM,EACjBpT,OAAQ,YACRuT,OAAQ,MA6FL,SAASzT,EAAmBoV,GACjC,OAAO9a,OAAO+a,OAAOlC,GAAc1C,KAAM5Q,GAAMA,EAAEhQ,KAAOulB,IAAkB,IAC5E,CAOO,SAAS/V,EAAoBb,GAClC,IAAKA,EAAQ,MAAO,GACpB,IACE,MAAM/D,EAAG,uBAAApG,OAA0BmK,GAC7B8W,EAASvb,aAAaC,QAAQS,GACpC,OAAO6a,EAASvF,KAAKC,MAAMsF,GAAU,EACvC,CAAE,MAAO1nB,GAEP,OADAa,EAAAA,GAAOb,MAAM,6DAAiBA,GACvB,EACT,CACF,C,yCCxVO,MAAM2nB,EAAmB,CAC9B,CACE7U,MAAO,EACP8U,UAAW,EACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,gDAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,2BACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,2CAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,8BAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,gDAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,qCAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,qCAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,4BACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,SACP4L,YAAa,8BAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,wBACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,0DAEf,CACE3S,MAAO,EACP8U,UAAW,IACX1hB,MAAO,4BACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,4CAEf,CACE3S,MAAO,EACP8U,UAAW,KACX1hB,MAAO,yBACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,8CAEf,CACE3S,MAAO,GACP8U,UAAW,KACX1hB,MAAO,4BACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,uCAEf,CACE3S,MAAO,GACP8U,UAAW,KACX1hB,MAAO,kCACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,qDAEf,CACE3S,MAAO,GACP8U,UAAW,KACX1hB,MAAO,4BACPzC,KAAM,eACNoP,MAAO,UACPgH,MAAO,eACP4L,YAAa,0DASV,SAASnU,EAAaN,GAC3B,MAAM6W,EAAS5W,OAAOD,IAAc,EAGpC,IAAI8W,EAAmBH,EAAiB,GACxC,IAAK,IAAIxC,EAAIwC,EAAiBroB,OAAS,EAAG6lB,GAAK,EAAGA,IAChD,GAAI0C,GAAUF,EAAiBxC,GAAGyC,UAAW,CAC3CE,EAAmBH,EAAiBxC,GACpC,KACF,CAIF,MAAM4C,EAAiBJ,EAAiBK,UAAUC,GAAKA,EAAEnV,QAAUgV,EAAiBhV,MAAQ,GACtFoV,GAAgC,IAApBH,EAAwBJ,EAAiBI,GAAkB,KAG7E,IAAII,EAAW,IACf,GAAID,EAAW,CACb,MAAME,EAAaN,EAAiBF,UAC9BS,EAAUH,EAAUN,UAC1BO,EAAW5E,KAAK+E,IAAI,IAAK/E,KAAKE,OAAQoE,EAASO,IAAeC,EAAUD,GAAe,KACzF,CAEA,MAAO,CACLtV,MAAOgV,EAAiBhV,MACxB5M,MAAO4hB,EAAiB5hB,MACxBzC,KAAMqkB,EAAiBrkB,KACvBoP,MAAOiV,EAAiBjV,MACxBgH,MAAOiO,EAAiBjO,MACxB4L,YAAaqC,EAAiBrC,YAC9B0C,WACAD,YACAK,cAAeV,EACfW,kBAAmBN,EAAYA,EAAUN,UAAYC,EAAS,EAElE,C,yCCjKO,MAAMja,EAAqB,SAAC6a,GAAuB,IAAfC,EAAIrpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAEhD,GAAe,OAAXopB,QAA8BlpB,IAAXkpB,GAAmC,KAAXA,EAC7C,MAAO,IAAMC,EAIf,IAAIC,EAAMF,EACV,GAAmB,kBAARE,IAETA,EAAMA,EAAI/T,QAAQ,mBAAU,IAAIH,OAChCkU,EAAMC,WAAWD,GACbE,MAAMF,IACR,MAAO,IAAMD,EAKjB,GAAY,IAARC,EACF,MAAO,IAAMD,EAIf,MAAMI,EAAaH,EAAM,EAGnBI,EAAQ,CACZ,CAAE5U,MAAO,KAAM5K,KAAM,UACrB,CAAE4K,MAAO,KAAM5K,KAAM,UACrB,CAAE4K,MAAO,KAAM5K,KAAM,UACrB,CAAE4K,MAAO,IAAK5K,KAAM,UACpB,CAAE4K,MAAO,IAAK5K,KAAM,WAGhByf,EAAc,GACpB,IAAIC,EAXc1F,KAAK2F,IAAIP,GAc3B,IAAK,MAAM,MAAExU,EAAK,KAAE5K,KAAUwf,EAC5B,GAAIE,GAAa9U,EAAO,CACtB,MAAMgV,EAAW5F,KAAKE,MAAMwF,EAAY9U,GACxC6U,EAAYhoB,KAAK,GAADyF,OAAI0iB,GAAQ1iB,OAAG8C,IAC/B0f,GAAa9U,CACf,CAIE8U,EAAY,IAEVA,EAAY,IAAM,EACpBD,EAAYhoB,KAAKioB,EAAUG,eAAe,QAAS,CAAEC,sBAAuB,KAE5EL,EAAYhoB,KAAKuiB,KAAKE,MAAMwF,KAKhC,IAAItoB,EAASqoB,EAAYM,KAAK,KAY9B,OATIZ,IACF/nB,GAAU+nB,GAIRI,IACFnoB,EAAS,IAAMA,GAGVA,CACT,EAOa4oB,EAAwB5b,GAC5BC,EAAmBD,EAAQ,S,2GC5EpC,MAAM6b,EAAiB,CACrB,CAAEC,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,KAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,IAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,EAAGC,OAAQ,KAAOjmB,KAAM,eAAMD,MAAO,iBAC5C,CAAEimB,IAAK,GAAIC,OAAQ,IAAQjmB,KAAM,eAAMD,MAAO,oBASzC,SAASga,EAAc5M,GAC5B,MAAM/D,EAAG,eAAApG,OAAkBmK,GACrB+Y,GAAQ,IAAIhT,MAAOiT,eAEzB,IACE,MAAM1H,EAAQ/V,aAAaC,QAAQS,GACnC,GAAIqV,EAAO,CACT,MAAMviB,EAAOwiB,KAAKC,MAAMF,GAClB2H,EAAY,IAAIlT,KAAKhX,EAAKkqB,WAAWD,eACrCE,EAAY,IAAInT,KAAKA,KAAKC,MAAQ,OAAUgT,eAElD,OAAIC,IAAcF,GAEhBjhB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAY/I,GAAI,IAAEoqB,UAAU,EAAOtM,UAAU,IACpCoM,IAAcC,EAEhB,CACLE,OAAQrqB,EAAKqqB,OACbH,UAAWlqB,EAAKkqB,UAChBI,aAActqB,EAAKsqB,cAAgB,EACnCF,UAAU,EACVtM,UAAU,GAIL,CACLuM,OAAQ,EACRH,UAAW,KACXI,aAActqB,EAAKsqB,cAAgB,EACnCF,UAAU,EACVtM,UAAU,EACVyM,cAAc,EAGpB,CAEA,MAAO,CAAEF,OAAQ,EAAGH,UAAW,KAAMI,aAAc,EAAGF,UAAU,EAAMtM,UAAU,EAClF,CAAE,MAAAJ,GACA,MAAO,CAAE2M,OAAQ,EAAGH,UAAW,KAAMI,aAAc,EAAGF,UAAU,EAAMtM,UAAU,EAClF,CACF,CAKA,SAAS0M,EAAgBV,GACP,IAADW,EAAf,OAAIX,GAAO,IACqB,QAAvBW,EAAAZ,EAAeC,EAAM,UAAE,IAAAW,OAAA,EAAvBA,EAAyBV,SAAU,IApDhB,GAwD9B,CAuCO,SAAS3P,EAAiBtY,GAAyC,IAAD4oB,EAAA,IAAvC,OAAEzZ,EAAM,QAAEsO,EAAO,UAAEoL,GAAY,GAAM7oB,EACrE,MAAO8oB,EAAYC,IAAiB3qB,EAAAA,EAAAA,UAAS,OACtC4qB,EAASC,IAAc7qB,EAAAA,EAAAA,WAAS,IAChC8qB,EAAcC,IAAmB/qB,EAAAA,EAAAA,UAAS,OAC1CgrB,EAAWC,IAAgBjrB,EAAAA,EAAAA,WAAS,IACpCkrB,EAAWC,IAAgBnrB,EAAAA,EAAAA,WAAS,IAE3CS,EAAAA,EAAAA,WAAU,KACR,GAAIsQ,EAAQ,CACV,MAAMqa,EAAOzN,EAAc5M,GAC3B4Z,EAAcS,GACdH,EAAaG,EAAKxN,UAEd6M,GAAaW,EAAKxN,UACpBuN,GAAa,EAEjB,GACC,CAACpa,EAAQ0Z,IAEZ,MAAMY,EAAcA,KAClB,MAAMvqB,EAtDH,SAA0BiQ,GAC/B,MAAM/D,EAAG,eAAApG,OAAkBmK,GACrB+Y,GAAQ,IAAIhT,MAAOwU,cACnBZ,EAAa/M,EAAc5M,GAEjC,IAAK2Z,EAAW9M,SACd,MAAO,CAAE2N,SAAS,EAAOpX,QAAS,gFAGpC,MAAMqX,EAAYd,EAAWP,OAAS,EAChCN,EAASS,EAAgBkB,GACzB5nB,EAAO4nB,GAAa,GAAK,eAAOA,GAAa,EAAI,eAAO,eAExDC,EAAU,CACdtB,OAAQqB,EACRxB,UAAWF,EACXM,cAAeM,EAAWN,cAAgB,GAAKP,GAKjD,OAFAvd,aAAac,QAAQJ,EAAKsV,KAAKG,UAAUgJ,IAElC,CACLF,SAAS,EACT1B,OAAQA,EACR2B,YACA5nB,OACAuQ,QAAQ,GAADvN,OAAK4kB,EAAS,4CAAA5kB,OAAaijB,EAAON,iBAAgB,WACzDmC,YAA2B,KAAdF,GAAoBA,EAAY,KAAO,EAExD,CAyBmBG,CAAiB5a,GAChCga,EAAgBjqB,GAChB+pB,GAAW,GAEP/pB,EAAOyqB,SAAWlM,GACpBA,EAAQve,EAAO+oB,QAIjBroB,WAAW,KACTypB,GAAa,IACZ,MAGL,IAAKD,IAAcN,EAAY,OAAO,KAEtC,MAAMkB,EAAUlB,EAAWP,OAAS,EAC9B0B,EAAavB,EAAgBsB,GAC7BE,EAAcF,GAAW,GAG/B,OAAIV,IAAcN,GAEdloB,EAAAA,EAAAA,KAAA,OAAKb,UAAU,uFAAuF8E,QAASA,IAAMwkB,GAAa,GAAOhpB,UACvIJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6DAA6D8E,QAAU0C,GAAMA,EAAE4E,kBAC5FnM,MAAO,CACLyR,WAAYuY,EACR,oDACA,oDACJC,UAAW,8BACX5J,OAAQ,mCACRhgB,SAAA,EAEFO,EAAAA,EAAAA,KAAA,UAAQiE,QAASA,IAAMwkB,GAAa,GAAQtpB,UAAU,2GAA0GM,SAAC,YACjKJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mBAAkBM,SAAA,EAC/BO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gBAAeM,SAAE2pB,EAAc,eAAO,kBACrD/pB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAoCM,SAAA,CAAEypB,EAAQ,4CAC5DlB,EAAWL,eACV3nB,EAAAA,EAAAA,KAAA,OAAKb,UAAU,oCAAoCC,MAAO,CAAEyR,WAAY,kBAAmBP,MAAO,yBAA0B7Q,SAAC,0HAI/HJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0CAAyCM,SAAA,CAAC,IAAE0pB,EAAWtC,iBAAiB,gBAEzF7mB,EAAAA,EAAAA,KAAA,UACEiE,QAASA,KAAQ0kB,IAAeF,GAAa,IAC7CtpB,UAAU,sGACVC,MAAO,CAAEyR,WAAY,yBAA0BP,MAAO8Y,EAAc,UAAY,UAAWC,UAAW,8BAA+B5pB,SACtI,gCAGDO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,kCAAiCM,SAC7CwnB,EAAe5f,IAAI,CAAC6f,EAAKrF,KACxB7hB,EAAAA,EAAAA,KAAA,OAAmBb,UAAU,SAAQM,UACnCO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,qBAAqBC,MAAO,CAAEyR,WAAYgR,EAAMmG,EAAWP,OAAS,wBAA0B5F,IAAQmG,EAAWP,OAAS,wBAA0B,4BAD3JP,EAAIA,cAWxBlnB,EAAAA,EAAAA,KAAA,OACEb,UAAU,uBACVC,MAAO,CACLyR,WAAYqX,EACR,oDACAkB,EACE,oDACA,oDACNC,UAAWnB,EACP,qCACAkB,EACE,qCACA,qCACNE,UAAW,0BACX7J,OAAQ,mCACRhgB,SAEAyoB,GAiFA7oB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qBAAoBM,SAAA,EACjCO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,gBAAgBC,MAAO,CAAEkqB,UAAW,oBAAqB7pB,UACzD,OAAZ2oB,QAAY,IAAZA,OAAY,EAAZA,EAAclnB,OAAQ,kBAEzB7B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0CAAyCM,SAAA,CAAC,IACzC,OAAZ2oB,QAAY,IAAZA,GAAoB,QAARN,EAAZM,EAAcjB,cAAM,IAAAW,OAAR,EAAZA,EAAsBjB,iBAAiB,aAE3CxnB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAA0BC,MAAO,CAAEkR,MAAO,yBAA0B7Q,SAAA,CAAC,gBAClE,OAAZ2oB,QAAY,IAAZA,OAAY,EAAZA,EAAcU,UAAU,wCAEjB,OAAZV,QAAY,IAAZA,OAAY,EAAZA,EAAcY,eACbhpB,EAAAA,EAAAA,KAAA,OACEb,UAAU,+DACVC,MAAO,CAAEyR,WAAY,yBAA0BpR,SAChD,4FA9FLJ,EAAAA,EAAAA,MAAAsI,EAAAA,SAAA,CAAAlI,SAAA,CAEGuoB,EAAWL,eACV3nB,EAAAA,EAAAA,KAAA,OACEb,UAAU,oCACVC,MAAO,CACLyR,WAAY,kBACZP,MAAO,yBACP7Q,SACH,uIAKHJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCM,SAAA,EAChDJ,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mCAAkCM,SAAA,EAC/CO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,WAAUM,SACvB2pB,EAAc,eAAO,kBAExB/pB,EAAAA,EAAAA,MAAA,OAAAI,SAAA,EACEJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BM,SAAA,CAC1CypB,EAAQ,4CAEVA,GAAW,KACV7pB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAiBC,MAAO,CAAEkR,MAAO,yBAA0B7Q,SAAA,CAAC,gBACrEypB,EAAQ,qDAKpB7pB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA+BC,MAAO,CAAEkR,MAAO,0BAA2B7Q,SAAA,CAAC,IACtF0pB,EAAWtC,iBAAiB,gBAGlC7mB,EAAAA,EAAAA,KAAA,UACEiE,QAAS0kB,EACTxpB,UAAU,uFACVC,MAAO,CACLyR,WAAY,yBACZP,MAAO8Y,EAAc,UAAY,UACjCC,UAAW,8BACX5pB,SACH,mCAMHJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMM,SAAA,EACnBO,EAAAA,EAAAA,KAAA,OAAKb,UAAU,6BAA4BM,SACxCwnB,EAAe5f,IAAI,CAAC6f,EAAKrF,KACxBxiB,EAAAA,EAAAA,MAAA,OAAmBF,UAAU,oCAAmCM,SAAA,EAC9DO,EAAAA,EAAAA,KAAA,OACEb,UAAU,0BACVC,MAAO,CACLyR,WACEgR,EAAMmG,EAAWP,OACb,wBACA5F,IAAQmG,EAAWP,OACjB,wBACA,4BAGF,IAAR5F,GAAqB,IAARA,GAAqB,IAARA,KAC1BxiB,EAAAA,EAAAA,MAAA,QAAMF,UAAU,aAAaC,MAAO,CAAEkR,MAAO,yBAA0B7Q,SAAA,CACpEoiB,EAAM,EAAE,cAdLqF,EAAIA,QAoBjBgC,EAAU,KACTlpB,EAAAA,EAAAA,KAAA,OAAKb,UAAU,2BAA2BC,MAAO,CAAEkR,MAAO,yBAA0B7Q,SAAC,sGA6BnG,CAKO,SAAS8pB,EAAa7lB,GAAc,IAAb,OAAE2K,GAAQ3K,EACtC,MAAOskB,EAAYC,IAAiB3qB,EAAAA,EAAAA,UAAS,CAAEmqB,OAAQ,KAEvD1pB,EAAAA,EAAAA,WAAU,KACR,GAAIsQ,EAAQ,CACV,MAAMqa,EAAOzN,EAAc5M,GAC3B4Z,EAAcS,EAChB,GACC,CAACra,IAEJ,MAAMmb,EAAgBxB,EAAWP,QAAU,EAE3C,OAAsB,IAAlB+B,EAA4B,MAG9BnqB,EAAAA,EAAAA,MAAA,OACEF,UAAU,8EACVC,MAAO,CACLyR,WAAY2Y,GAAiB,GACzB,wDACA,wDACJ/J,OAAO,aAADvb,OAAeslB,GAAiB,GAAK,YAAc,aACzDlZ,MAAOkZ,GAAiB,GAAK,UAAY,WACzC/pB,SAAA,EAEFO,EAAAA,EAAAA,KAAA,QAAAP,SAAM,kBACNJ,EAAAA,EAAAA,MAAA,QAAAI,SAAA,CAAO+pB,EAAc,yBACpBA,GAAiB,KAAMxpB,EAAAA,EAAAA,KAAA,QAAAP,SAAM,mBAGpC,CAKO,SAASgqB,IACd,OACEpqB,EAAAA,EAAAA,MAAA,OACEF,UAAU,kBACVC,MAAO,CACLyR,WAAY,oDACZ4O,OAAQ,uBACRhgB,SAAA,EAEFO,EAAAA,EAAAA,KAAA,MAAIb,UAAU,iDAAiDC,MAAO,CAAEkR,MAAO,WAAY7Q,SAAC,sEAG5FJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wBAAuBM,SAAA,CACnCwnB,EAAe5f,IAAK6f,IACnB7nB,EAAAA,EAAAA,MAAA,OAEEF,UAAU,6DACVC,MAAO,CACLyR,WAAwB,KAAZqW,EAAIA,IAAa,YAAc,cAC3CzH,OAAoB,KAAZyH,EAAIA,IAAa,sBAAwB,QACjDznB,SAAA,EAEFJ,EAAAA,EAAAA,MAAA,QACEF,UAAU,UACVC,MAAO,CAAEkR,MAAmB,KAAZ4W,EAAIA,IAAa,UAAY,WAAYznB,SAAA,CAExDynB,EAAIhmB,KAAK,IAAEgmB,EAAIjmB,UAElB5B,EAAAA,EAAAA,MAAA,QACED,MAAO,CACLkR,MAAmB,KAAZ4W,EAAIA,IAAa,UAAY,UACpCwC,WAAwB,KAAZxC,EAAIA,IAAa,MAAQ,MACrChf,SAAsB,KAAZgf,EAAIA,IAAa,OAAS,QACpCznB,SAAA,CAEDynB,EAAIC,OAAON,iBAAiB,cApB1BK,EAAIA,OAwBblnB,EAAAA,EAAAA,KAAA,OACEb,UAAU,oCACVC,MAAO,CACLyR,WAAY,YACZ4O,OAAQ,uBACRhgB,UAEFO,EAAAA,EAAAA,KAAA,QAAMb,UAAU,wBAAwBC,MAAO,CAAEkR,MAAO,WAAY7Q,SAAC,2EAO/E,C,2HClZO,MAAMkqB,GAAcC,EAAAA,EAAAA,eAAc,MAE5BC,EAAWA,KACtB,MAAMC,GAAUC,EAAAA,EAAAA,YAAWJ,GAC3B,OAAKG,IAGHxrB,EAAAA,GAAO0rB,KAAK,4EACL,CACL5iB,MAAO,GAAI6iB,UAAW,GAAIC,eAAgB,GAAIC,aAAc,GAC5D5sB,SAAS,EAAME,MAAO,KACtB2sB,QAASjsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACjD4Y,aAAclsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACtD6Y,WAAYnsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACpD8Y,WAAYpsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACpD+Y,QAASrsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACjDgZ,uBAAwBtsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BAChEiZ,gBAAiBvsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACzDkZ,cAAexsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACvDmZ,WAAYzsB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACpDoZ,UAAW1sB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACnDqZ,eAAgB3sB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACxDsZ,gBAAiB5sB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACzDuZ,gBAAiB7sB,UAAA,CAAe0qB,SAAS,EAAOpX,QAAS,0BACzDwZ,YAAa9sB,eAMN8d,EAAe/c,IAAmB,IAAlB,SAAEO,GAAUP,EACvC,MAAM,KAAEoJ,EAAI,QAAElD,EAASwB,QAASskB,EAAa3tB,QAAS4tB,EAAW,WAAEC,EAAU,QAAEC,EAAO,iBAAEC,IAAqBhmB,EAAAA,EAAAA,OAAa,CAAC,EACrH+I,EAAa,OAAJ/F,QAAI,IAAJA,OAAI,EAAJA,EAAMG,IACf8iB,EAA8B,OAAPnmB,QAAO,IAAPA,OAAO,EAAPA,EAAS2L,WAG/B3J,EAAOokB,IAAYluB,EAAAA,EAAAA,UAAS,KAC5B2sB,EAAWwB,IAAgBnuB,EAAAA,EAAAA,UAAS,KACpC4sB,EAAgBwB,IAAqBpuB,EAAAA,EAAAA,UAAS,KAC9C6sB,EAAcwB,IAAmBruB,EAAAA,EAAAA,UAAS,KAC1CsuB,EAAaC,IAAkBvuB,EAAAA,EAAAA,WAAS,IACxCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAG7BC,EAAU4tB,GAAeS,EAGzBE,GAAqBtd,EAAAA,EAAAA,SAAQ,KAAMud,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,sBAAuB,IACnFC,GAAoBzd,EAAAA,EAAAA,SAAQ,MAChC0d,cAAcH,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,gBACvCG,iBAAiBJ,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,mBAC1CI,iBAAiBL,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,mBAC1CK,mBAAmBN,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,qBAC5CM,aAAaP,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,eACtCvB,wBAAwBsB,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,0BACjDO,qBAAqBR,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,uBAC9CrB,eAAeoB,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,iBACxCQ,kBAAkBT,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,oBAC3CnB,WAAWkB,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,aACpClB,gBAAgBiB,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,kBACzCjB,iBAAiBgB,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,mBAC1ChB,iBAAiBe,EAAAA,EAAAA,IAAcC,EAAAA,GAAW,qBACxC,IAGE/tB,GAAYC,EAAAA,EAAAA,aAAYC,UAC5B,GAAKkQ,GAAWkd,EAAhB,CAKAM,GAAe,GACf,IACE,MAAMztB,QAAe0tB,IACrB,IAAI1tB,EAAOhB,KAAKyrB,QAQd,MAAM,IAAI4D,MAAMruB,EAAOhB,KAAKqU,SAAW,iGARhB,CACvB,MAAM,WAAEib,EAAYzC,UAAW0C,EAAgB,eAAEzC,EAAc,aAAEC,GAAiB/rB,EAAOhB,KAAKA,KAC9FouB,EAASkB,GAAc,IACvBjB,EAAakB,GAAoB,IACjCjB,EAAkBxB,GAAkB,IACpCyB,EAAgBxB,GAAgB,IAChCzsB,EAAS,KACX,CAGF,CAAE,MAAOW,GACPC,EAAAA,GAAOb,MAAM,8DAA4BY,GACzCX,EAASW,EACX,CAAC,QACCwtB,GAAe,EACjB,CApBA,MAFEA,GAAe,IAuBhB,CAACxd,EAAQkd,EAAsBO,KAIlCnvB,EAAAA,EAAAA,IAAWsB,EAAW,CACpBhB,SAAU,KACVC,SAAUiuB,KAAiB9c,KAAYkd,EACvCpuB,KAAM,CAACguB,EAAa9c,EAAQkd,KAI9B,MAAMN,GAAc/sB,EAAAA,EAAAA,aAAY,IACvBD,IACN,CAACA,IAGE2uB,GAAuB1uB,EAAAA,EAAAA,aAAa2uB,IACxCvuB,EAAAA,GAAOyW,IAAI,iEAAgD,OAAZ8X,QAAY,IAAZA,OAAY,EAAZA,EAAc9vB,OAAQ,UACrE0uB,EAAaoB,IACZ,IAGGzC,GAAUlsB,EAAAA,EAAAA,aAAYC,UAC1B,GAA2B,oBAAhB+sB,IAA+BA,IAAe,MAAO,CAAErC,SAAS,EAAOpX,QAAS,gDAG3F,MAAMqb,EAAM,QAAA5oB,OAAWkQ,KAAKC,OACtB0Y,GAAW5mB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ6mB,GAAW,IAAEttB,GAAIotB,IAC1CtB,EAASyB,GAAa,IAAIA,EAAWF,IAErC,IACE,MAAMG,QAAkB,OAAJ5kB,QAAI,IAAJA,OAAI,EAAJA,EAAM6kB,cAC1B,IAAKD,EACH,MAAM,IAAIT,MAAM,uFAGlB,MAAMW,EAAW,2EACXC,QAAiBC,MAAMF,EAAa,CACxCG,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAADtpB,OAAYgpB,IAE7BO,KAAM7N,KAAKG,UAAU,CAAE3iB,KAAM,CAAE4vB,mBAGjC,IAAKK,EAASK,GAAI,CAChB,MAAMC,QAAkBN,EAASO,OACjC,MAAM,IAAInB,MAAMkB,GAAS,8BAAAzpB,OAAcmpB,EAASQ,QAClD,CAEA,MAAMzvB,QAAeivB,EAASS,OAE9B,GAAI1vB,EAAOhB,KAAKyrB,QAGd,aADMoC,IACC,CAAEpC,SAAS,GAElB,MAAM,IAAI4D,MAAMruB,EAAOhB,KAAKqU,SAAW,sFAE3C,CAAE,MAAOhU,GAGP,OADA+tB,EAASyB,GAAaA,EAAUlsB,OAAOyF,GAAQA,EAAK9G,KAAOotB,IACpD,CAAEjE,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACyZ,EAAa5iB,EAAM2iB,IAEjBX,GAAapsB,EAAAA,EAAAA,aAAYC,MAAO4vB,EAAQC,KAC5C,GAA2B,oBAAhB9C,IAA+BA,IAAe,MAAO,CAAErC,SAAS,EAAOpX,QAAS,gDAC3F,IAGE,aAFMwa,EAAkBE,gBAAgB,CAAE4B,SAAQC,mBAClD/C,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GACP,MAAmB,cAAfA,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,oLAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACyZ,EAAae,EAAmBhB,IAE9BV,GAAarsB,EAAAA,EAAAA,aAAYC,UAC7B,GAA2B,oBAAhB+sB,IAA+BA,IAAe,MAAO,CAAErC,SAAS,EAAOpX,QAAS,gDAC3F,IAGE,aAFMwa,EAAkBG,gBAAgB,CAAE2B,WAC1C9C,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GACP,MAAmB,cAAfA,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,oLAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACyZ,EAAae,EAAmBhB,IAE9BZ,GAAensB,EAAAA,EAAAA,aAAYC,eAAO4vB,GAA0B,IAAlBE,EAAQnxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACzD,IAAKuR,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,MAAMyc,EAAiB9mB,EAAMkZ,KAAK9Z,GAAQA,EAAK9G,KAAOquB,GACtD,IAAKG,EAAgB,MAAO,CAAErF,SAAS,EAAOpX,QAAS,0EAEvD,MAAM0c,EAAaD,EAAeE,MAAQH,EAGtC3C,GACFA,EAAiB,CAAE3c,MAAOwf,IAI5B,MAAME,EAAc,CAClB3uB,GAAG,QAADwE,OAAUkQ,KAAKC,MAAK,KAAAnQ,OAAI8c,KAAKsN,UAC/BP,OAAQG,EAAexuB,GACvBsH,KAAMknB,EAAelnB,KACrB9F,KAAMgtB,EAAehtB,MAAQ,eAC7BgiB,YAAagL,EAAehL,aAAe,GAC3CvR,KAAMuc,EAAevc,MAAQ,UAC7Bsc,SAAUA,EACVG,MAAOF,EAAeE,MACtBG,WAAYL,EAAeK,YAAc,IACzCC,YAAa,IAAIpa,MAGnB9V,EAAAA,GAAOyW,IAAI,mGAAwCsZ,GAGnD,MAAMI,EAAoB,IAAIxE,GACxByE,EAAgBR,EAAeS,MAC/BC,EAAgBV,EAAeE,MAGrC3C,EAAavlB,IAEX,MAAM2oB,EAAgB3oB,EAAKuf,UAAUjf,GAAQA,EAAKunB,SAAWM,EAAYN,QACzE,GAAIc,GAAiB,EAAG,CACtB,MAAMC,EAAU,IAAI5oB,GAKpB,OAJA4oB,EAAQD,IAAc1oB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACjB2oB,EAAQD,IAAc,IACzBZ,SAAUa,EAAQD,GAAeZ,SAAWA,IAEvCa,CACT,CACE,MAAO,IAAI5oB,EAAMmoB,KAIrB,IACE,MAAMjwB,QAAe6tB,EAAkBI,kBAAkB,CAAE0B,SAAQE,aACnE,GAAI7vB,EAAOhB,KAAKyrB,QAAS,CAEvB,MAAM,UAAEkG,EAAS,SAAEC,EAAQ,SAAEC,GAAa7wB,EAAOhB,KAgDjD,OA9CAkB,EAAAA,GAAOyW,IAAI,2CAAwB,CACjCgZ,SACAE,WACAc,YACAC,WACAC,WACAC,SAAUN,EACVO,SAAUT,KAIZU,EAAAA,EAAAA,IAAYxmB,EAAAA,GAAI,CACdmI,UAAWwa,EACXld,OAAQA,EACRtH,UAAiB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,OAAQ,qBAC3B2K,KAAM0d,EAAAA,GAAeC,cACrBpM,YAAY,GAADhf,OAAKgqB,EAAelnB,KAAI,KAAA9C,OAAI+pB,EAAQ,yBAAA/pB,OAASiqB,EAAWtH,iBAAgB,WACnFzb,QAAS+iB,EACToB,SAAU,CACRxB,SACAyB,SAAUtB,EAAelnB,KACzBinB,WACAwB,aAAcvB,EAAeE,MAC7BD,qBAIyBnxB,IAAzBkxB,EAAeS,OACjBnD,EAASyB,GACPA,EAAU5lB,IAAIb,GACRA,EAAK9G,KAAOquB,GACd5nB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKK,GAAI,IACPmoB,MAAOK,EACPZ,MAAOa,IAGJzoB,IAMblI,EAAAA,GAAOyW,IAAI,qGACXkW,IAEO,CAAEpC,SAAS,EAAMkG,YAAWC,WAAUC,WAC/C,CAOE,MALA3wB,EAAAA,GAAO0rB,KAAK,sEACRsB,GACFA,EAAiB,CAAE3c,KAAMwf,IAE3B1C,EAAagD,GACP,IAAIhC,MAAMruB,EAAOhB,KAAKqU,SAAW,2DAE3C,CAAE,MAAOhU,GAWP,OATAa,EAAAA,GAAOb,MAAM,sEAA+BA,GACxC6tB,GACFA,EAAiB,CAAE3c,KAAMwf,IAE3B1C,EAAagD,GAGbxD,IAEmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,sLAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,CACF,EAAG,CAACpD,EAAQ4d,EAAmBhB,EAAa7jB,EAAO6iB,EAAWqB,EAAkBC,EAAsBnmB,IAEhGolB,GAAUtsB,EAAAA,EAAAA,aAAYC,eAAOuxB,GAAmC,IAAlBzB,EAAQnxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAC7D,IAAKuR,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAG/C,MAAMke,EAAY1F,EAAU3J,KAAK9Z,GAAQA,EAAK9G,KAAOgwB,GAAmBlpB,EAAKunB,SAAW2B,GAClFF,GAAoB,OAATG,QAAS,IAATA,OAAS,EAATA,EAAW3oB,QAAiB,OAAT2oB,QAAS,IAATA,OAAS,EAATA,EAAWH,WAAY,qBAE3D,IAkBE,aAjBMvD,EAAkBK,YAAY,CAAEyB,OAAQ2B,EAAiBE,cAAe3B,EAAU4B,iBAAkB,eAG1GT,EAAAA,EAAAA,IAAYxmB,EAAAA,GAAI,CACdmI,UAAWwa,EACXld,OAAQA,EACRtH,UAAiB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,OAAQ,qBAC3B2K,KAAM0d,EAAAA,GAAeS,SACrB5M,YAAY,GAADhf,OAAKsrB,EAAQ,KAAAtrB,OAAI+pB,EAAQ,uBACpCsB,SAAU,CACRxB,OAAQ2B,EACRF,SAAUA,EACVvB,cAIJhD,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,gLAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,CACF,EAAG,CAACpD,EAAQ4b,EAAWsB,EAAsBnmB,EAAS6mB,EAAmBhB,IAEnEP,GAAkBxsB,EAAAA,EAAAA,aAAYC,UAAwC,IAAjC,OAAE4vB,EAAM,SAAEE,EAAQ,MAAEG,GAAO1qB,EACpE,IAAK2K,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAG/C,MAAMse,EAAa9F,EAAU3J,KAAK9Z,GAAQA,EAAK9G,KAAOquB,GAAUvnB,EAAKunB,SAAWA,GAC1EyB,GAAqB,OAAVO,QAAU,IAAVA,OAAU,EAAVA,EAAY/oB,QAAkB,OAAV+oB,QAAU,IAAVA,OAAU,EAAVA,EAAYP,WAAY,qBAE7D,IAmBE,aAlBMvD,EAAkBM,oBAAoB,CAAEmD,gBAAiB3B,EAAQE,WAAUG,QAAOyB,iBAAkB,eAG1GT,EAAAA,EAAAA,IAAYxmB,EAAAA,GAAI,CACdmI,UAAWwa,EACXld,OAAQA,EACRtH,UAAiB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,OAAQ,qBAC3B2K,KAAM0d,EAAAA,GAAeW,iBACrB9M,YAAY,GAADhf,OAAKsrB,EAAQ,KAAAtrB,OAAI+pB,EAAQ,sCAAA/pB,OAAYkqB,EAAMvH,iBAAgB,WACtE0I,SAAU,CACRxB,SACAyB,SAAUA,EACVvB,WACAG,WAIJnD,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,qMAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACpD,EAAQ4d,EAAmBhB,EAAahB,EAAWsB,EAAsBnmB,IAEvEulB,GAAgBzsB,EAAAA,EAAAA,aAAYC,UAChC,IAAKkQ,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,MAAMwe,EAAY/F,EAAe5J,KAAK9Z,GAAQA,EAAK9G,KAAOwwB,GAC1D,IAAKD,EAAW,MAAO,CAAEpH,SAAS,EAAOpX,QAAS,gHAElD,MAAM0e,EAAYF,EAAU7B,OAAS6B,EAAU9B,YAAc,EAI7D,UAD2B/C,EAAW+E,EAAU,GAADjsB,OAAK+rB,EAAUT,SAAQ,kBAEpE,MAAO,CAAE3G,SAAS,EAAOpX,QAAS,yEAIpC,MAAM4c,EAAc,CAClB3uB,GAAG,QAADwE,OAAUkQ,KAAKC,MAAK,KAAAnQ,OAAI8c,KAAKsN,UAC/BP,OAAQkC,EAAUlC,QAAUkC,EAAUvwB,GACtCsH,KAAMipB,EAAUT,SAChBtuB,KAAM+uB,EAAU/uB,MAAQ,eACxBgiB,YAAa+M,EAAU/M,aAAe,GACtCvR,KAAMse,EAAU5uB,UAAY4uB,EAAUG,UAAY,UAClDnC,SAAUgC,EAAUhC,UAAY,EAChCO,YAAa,IAAIpa,MAGnB9V,EAAAA,GAAOyW,IAAI,6FAAkCsZ,GAG7C,MAAMI,EAAoB,IAAIxE,GACxBoG,EAAyB,IAAInG,GAGnCuB,EAAavlB,IAEX,MAAM2oB,EAAgB3oB,EAAKuf,UAAUjf,GAAQA,EAAKunB,SAAWM,EAAYN,QACzE,GAAIc,GAAiB,EAAG,CACtB,MAAMC,EAAU,IAAI5oB,GAKpB,OAJA4oB,EAAQD,IAAc1oB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACjB2oB,EAAQD,IAAc,IACzBZ,SAAUa,EAAQD,GAAeZ,SAAWI,EAAYJ,WAEnDa,CACT,CACE,MAAO,IAAI5oB,EAAMmoB,KAKrB3C,EAAkBxlB,GAAQA,EAAKnF,OAAOyF,GAAQA,EAAK9G,KAAOwwB,IAE1D,IACE,MAAM9xB,QAAe6tB,EAAkBtB,cAAc,CAAEuF,cACvD,GAAI9xB,EAAOhB,KAAKyrB,QAuBd,OAtBAvqB,EAAAA,GAAOyW,IAAI,sGAGXqa,EAAAA,EAAAA,IAAYxmB,EAAAA,GAAI,CACdmI,UAAWwa,EACXld,OAAQA,EACRtH,UAAiB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,OAAQ,qBAC3B2K,KAAM0d,EAAAA,GAAeiB,gBACrBpN,YAAY,GAADhf,OAAK+rB,EAAUT,SAAQ,KAAAtrB,OAAI+rB,EAAUhC,UAAY,EAAC,sCAAA/pB,OAAYisB,EAAUtJ,iBAAgB,WACnGzb,QAAS+kB,EACTZ,SAAU,CACRW,YACAV,SAAUS,EAAUT,SACpBvB,SAAUgC,EAAUhC,UAAY,EAChCsC,SAAUN,EAAUM,SACpBC,WAAYP,EAAUO,WACtBpC,MAAO+B,KAKXlF,IACO,CAAEpC,SAAS,GAOlB,MAJAvqB,EAAAA,GAAO0rB,KAAK,4EACNqB,EAAQ8E,EAAU,GAADjsB,OAAK+rB,EAAUT,SAAQ,8CAC9C/D,EAAagD,GACb/C,EAAkB2E,GACZ,IAAI5D,MAAMruB,EAAOhB,KAAKqU,SAAW,2DAE3C,CAAE,MAAOhU,GAOP,OALAa,EAAAA,GAAOb,MAAM,sEAA+BA,SACtC4tB,EAAQ8E,EAAU,GAADjsB,OAAK+rB,EAAUT,SAAQ,8CAC9C/D,EAAagD,GACb/C,EAAkB2E,GAEC,cAAf5yB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,4KAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACpD,EAAQ4d,EAAmBhB,EAAaf,EAAgBD,EAAWmB,EAAYC,EAASE,EAAsBnmB,IAE5GwlB,GAAa1sB,EAAAA,EAAAA,aAAYC,UAC7B,IAAKkQ,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,IAGE,aAFMwa,EAAkBO,iBAAiB,CAAE0D,cAC3CjF,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,+KAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACpD,EAAQ4d,EAAmBhB,IAEzBJ,GAAY3sB,EAAAA,EAAAA,aAAYC,UAAoD,IAA7C,UAAE+xB,EAAS,WAAEO,EAAU,SAAExC,EAAW,GAAGpqB,EAC1E,IAAKwK,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,IACE,MAAMrT,QAAe6tB,EAAkBpB,UAAU,CAAEqF,YAAWO,aAAYxC,aAE1E,OADAhD,IACO,CAAEpC,SAAS,EAAM6H,QAAStyB,EAAOhB,KAAKszB,QAC/C,CAAE,MAAOjzB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,wKAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACpD,EAAQ4d,EAAmBhB,IAEzBH,GAAiB5sB,EAAAA,EAAAA,aAAYC,UAAkC,IAA3B,QAAEuyB,EAAO,SAAErD,GAAUhpB,EAC7D,IAAKgK,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,IAGE,aAFMwa,EAAkBnB,eAAe,CAAE4F,UAASrD,aAClDpC,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,6KAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACpD,EAAQ4d,EAAmBhB,IAEzBF,GAAkB7sB,EAAAA,EAAAA,aAAYC,UAClC,GAA2B,oBAAhB+sB,IAA+BA,IAAe,MAAO,CAAErC,SAAS,EAAOpX,QAAS,gDAC3F,IAGE,aAFMwa,EAAkBlB,gBAAgB,CAAEmF,cAC1CjF,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,iMAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACyZ,EAAae,EAAmBhB,IAE9BD,GAAkB9sB,EAAAA,EAAAA,aAAYC,UAClC,GAA2B,oBAAhB+sB,IAA+BA,IAAe,MAAO,CAAErC,SAAS,EAAOpX,QAAS,gDAC3F,IAGE,aAFMwa,EAAkBjB,gBAAgB,CAAEkF,cAC1CjF,IACO,CAAEpC,SAAS,EACpB,CAAE,MAAOprB,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,uMAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,GACC,CAACyZ,EAAae,EAAmBhB,IAE9BR,GAAyBvsB,EAAAA,EAAAA,aAAYC,eAAO4vB,EAAQ4C,GAAoD,IAApCd,EAAgB/yB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,YAC3F,IAAKuR,EAAQ,MAAO,CAAEwa,SAAS,EAAOpX,QAAS,mCAC/C,IACE,MAAMrT,QAAe6tB,EAAkBxB,uBAAuB,CAAEsD,SAAQ4C,iBAAgBd,qBACxF,GAAIzxB,EAAOhB,KAAKyrB,QAEd,OADAoC,IACO,CAAEpC,SAAS,GAElB,MAAM,IAAI4D,MAAMruB,EAAOhB,KAAKqU,SAAW,uGAE3C,CAAE,MAAOhU,GAEP,OADAwtB,IACmB,cAAfxtB,EAAM2U,KACD,CAAEyW,SAAS,EAAOpX,QAAS,oNAE7B,CAAEoX,SAAS,EAAOpX,QAAShU,EAAMgU,QAC1C,CACF,EAAG,CAACpD,EAAQ4d,EAAmBhB,IAGzB2F,GAAepiB,EAAAA,EAAAA,SAAQ,MAC3BpH,QACA6iB,YACAC,iBACAC,eACA5sB,UACAE,QACA2sB,UACAE,aACAC,aACAF,eACAG,UACAC,yBACAC,kBACAC,gBACAC,aACAC,YACAC,iBACAC,kBACAC,kBACAC,cACA2B,yBACE,CACFxlB,EAAO6iB,EAAWC,EAAgBC,EAAc5sB,EAASE,EACzD2sB,EAASE,EAAYC,EAAYF,EAAcG,EAASC,EACxDC,EAAiBC,EAAeC,EAAYC,EAAWC,EACvDC,EAAiBC,EAAiBC,EAAa2B,IAGjD,OACE5sB,EAAAA,EAAAA,KAAC2pB,EAAYkH,SAAQ,CAACjf,MAAOgf,EAAanxB,SACvCA,I,gHCllBA,SAASqxB,EAAoBC,GAClC,IACE,IAAKA,EAAW,OAAO,IAAI3c,KAC3B,GAAI2c,aAAqB3c,KACvB,OAAOkS,MAAMyK,EAAUC,WAAa,IAAI5c,KAAS2c,EAEnD,GAAgC,oBAArBA,EAAUE,OAAuB,CAC1C,MAAMC,EAAOH,EAAUE,SACvB,OAAO3K,MAAM4K,EAAKF,WAAa,IAAI5c,KAAS8c,CAC9C,CACA,GAAIH,EAAUI,QAAS,CACrB,MAAMD,EAAO,IAAI9c,KAAyB,IAApB2c,EAAUI,SAChC,OAAO7K,MAAM4K,EAAKF,WAAa,IAAI5c,KAAS8c,CAC9C,CACA,GAAyB,kBAAdH,GAA+C,kBAAdA,EAAwB,CAClE,MAAMG,EAAO,IAAI9c,KAAK2c,GACtB,OAAOzK,MAAM4K,EAAKF,WAAa,IAAI5c,KAAS8c,CAC9C,CACA,OAAO,IAAI9c,IACb,CAAE,MAAA0G,GACA,OAAO,IAAI1G,IACb,CACF,CASO,SAASgd,EAAuB9mB,EAAK+D,EAAQgjB,GAClD,IACE,MAAMC,EAAS1nB,aAAaC,QAAQ,mBAAD3F,OAAoBoG,EAAG,KAAApG,OAAImK,IAC9D,GAAIijB,EAAQ,CACV,MAAM,KAAEl0B,EAAI,UAAE2zB,GAAcnR,KAAKC,MAAMyR,GACvC,GAAIld,KAAKC,MAAQ0c,EAAYM,EAC3B,OAAOj0B,CAEX,CACF,CAAE,MAAOK,GACPa,EAAAA,GAAO0rB,KAAK,yCAA0CvsB,EACxD,CACA,OAAO,IACT,CAQO,SAAS8zB,EAAuBjnB,EAAK+D,EAAQjR,GAClD,IACEwM,aAAac,QAAQ,mBAADxG,OACCoG,EAAG,KAAApG,OAAImK,GAC1BuR,KAAKG,UAAU,CAAE3iB,OAAM2zB,UAAW3c,KAAKC,QAE3C,CAAE,MAAO5W,GACPa,EAAAA,GAAO0rB,KAAK,yCAA0CvsB,EACxD,CACF,CASO,MAAM4xB,EAAiB,CAE5BmC,YAAa,4BACbC,aAAc,4BACdC,cAAe,4BACfC,iBAAkB,4BAGlBC,UAAW,4BACXC,WAAY,4BAGZvC,cAAe,kCACfwC,UAAW,kCACXhC,SAAU,kCACVE,iBAAkB,+CAClBM,gBAAiB,+CAGjByB,eAAgB,4BAChBC,iBAAkB,4BAClBC,iBAAkB,4BAClBC,YAAa,4BACbC,WAAY,4BACZC,gBAAiB,wCACjBC,iBAAkB,wCAClBC,iBAAkB,wCAGlBC,YAAa,4BACbC,WAAY,4BACZC,YAAa,4BACbC,cAAe,4BACfC,iBAAkB,4BAClBC,oBAAqB,4BAGrBC,SAAU,4BACVC,UAAW,4BACXC,YAAa,4BACbC,SAAU,4BAGVC,YAAa,4BACbC,YAAa,4BACbC,aAAc,4BACdC,eAAgB,4BAGhBC,eAAgB,kCAChBC,gBAAiB,kCACjBC,gBAAiB,kCAGjBC,YAAa,4BACbC,aAAc,4BAGdC,eAAgB,4BAGhBC,WAAY,kCACZC,WAAY,mCAmBPz1B,eAAeixB,EAAYyE,EAAU30B,GASxC,IAT0C,UAC5C6R,EAAS,OACT1C,EAAM,SACNtH,EAAQ,KACR4K,EAAI,YACJuR,EAAW,OACX9X,EAAS,EAAC,aACV0oB,EAAe,EAAC,SAChBvE,EAAW,CAAC,GACbrwB,EACC,IAAK6R,IAAc1C,IAAWsD,EAE5B,OADArT,EAAAA,GAAO0rB,KAAK,oEAA6B,CAAEjZ,YAAW1C,SAAQsD,SACvD,CAAEkX,SAAS,EAAOprB,MAAO,sDAIlC,MAAMs2B,EAAYF,GAAcjrB,EAAAA,GAEhC,IAEE,MAAMorB,GAAUC,EAAAA,EAAAA,IAAWF,EAAW,iBAChCG,EAAU,CACdnjB,YACA1C,SACAtH,SAAUA,GAAY,6BACtB4K,OACAuR,YAAaA,GAAevR,EAC5BvG,OAAQA,GAAU,EAClB0oB,aAAcA,GAAgB,EAC9BvE,UAAQppB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACHopB,GAAQ,IACXwB,WAAW,IAAI3c,MAAOwU,gBAExBmI,WAAW1nB,EAAAA,EAAAA,MACX8qB,WAAW9qB,EAAAA,EAAAA,OAGP+qB,QAAeC,EAAAA,EAAAA,QAAOL,EAASE,GAGrC,OAFA51B,EAAAA,GAAOyW,IAAI,wDAA2BpD,EAAMuR,GAErC,CAAE2F,SAAS,EAAMyL,MAAOF,EAAO10B,GACxC,CAAE,MAAOjC,GAEP,OADAa,EAAAA,GAAOb,MAAM,wDAA2BA,GACjC,CAAEorB,SAAS,EAAOprB,MAAOA,EAAMgU,QACxC,CACF,C","sources":["hooks/usePolling.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","components/AlchanLayout.js","utils/avatarSystem.js","components/Avatar.js","utils/achievementSystem.js","utils/levelSystem.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Gift, Settings, LayoutDashboard\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      if (logout) {\r\n        await logout();\r\n        navigate('/login');\r\n      }\r\n    } catch (e) {\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    const handleAppInstalled = () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    };\r\n    window.addEventListener('appinstalled', handleAppInstalled);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n      window.removeEventListener('appinstalled', handleAppInstalled);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (1 )\r\n              const lastUpdated = localStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 60 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    // localStorage    (     )\r\n    localStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { getStreakInfo } from './DailyReward';\r\nconst DailyRewardBanner = lazy(() => import('./DailyReward').then(m => ({ default: m.DailyRewardBanner })));\r\nconst WelcomePopup = lazy(() => import('./WelcomePopup'));\r\nconst HelpButton = lazy(() => import('./HelpButton'));\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    - Login   (Dashboard lazy )\r\nimport Login from '../pages/auth/Login';\r\nconst Dashboard = lazy(() => import('../pages/dashboard/Dashboard'));\r\n\r\n//  []       -  \r\nconst ItemStore = lazy(() => import('../pages/market/ItemStore'));\r\nconst MyItems = lazy(() => import('../pages/my-items/MyItems'));\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(() => {\r\n    try {\r\n      const dismissed = localStorage.getItem('alchan_update_dismissed');\r\n      if (!dismissed) return false;\r\n      // 24    \r\n      return Date.now() - parseInt(dismissed) < 24 * 60 * 60 * 1000;\r\n    } catch { return false; }\r\n  });\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && !userDoc?.isAdmin && !userDoc?.isSuperAdmin && !userDoc?.isTeacher) {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.isAdmin, userDoc?.isSuperAdmin, userDoc?.isTeacher]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => {\r\n            setShowUpdateDismissed(true);\r\n            try { localStorage.setItem('alchan_update_dismissed', Date.now().toString()); } catch {}\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      <HelpButton />\r\n\r\n      {/*     */}\r\n      <WelcomePopup />\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   index.css  */}\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (typeof isAuthAdmin !== 'function' || !isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\n\r\n// ============================================================\r\n//    \r\n// ============================================================\r\n\r\n/**\r\n * Firestore Timestamp, Date, ISO ,      Date  \r\n * @param {any} timestamp -  \r\n * @returns {Date}\r\n */\r\nexport function safeTimestampToDate(timestamp) {\r\n  try {\r\n    if (!timestamp) return new Date();\r\n    if (timestamp instanceof Date) {\r\n      return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n    }\r\n    if (typeof timestamp.toDate === 'function') {\r\n      const date = timestamp.toDate();\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    if (timestamp.seconds) {\r\n      const date = new Date(timestamp.seconds * 1000);\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    if (typeof timestamp === 'string' || typeof timestamp === 'number') {\r\n      const date = new Date(timestamp);\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    return new Date();\r\n  } catch {\r\n    return new Date();\r\n  }\r\n}\r\n\r\n/**\r\n * localStorage  Firestore   \r\n * @param {string} key -  \r\n * @param {string} userId -  ID\r\n * @param {number} cacheDuration -   (ms)\r\n * @returns {any|null}\r\n */\r\nexport function getCachedFirestoreData(key, userId, cacheDuration) {\r\n  try {\r\n    const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n    if (cached) {\r\n      const { data, timestamp } = JSON.parse(cached);\r\n      if (Date.now() - timestamp < cacheDuration) {\r\n        return data;\r\n      }\r\n    }\r\n  } catch (error) {\r\n    logger.warn('[Cache] getCachedFirestoreData failed:', error);\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * localStorage  Firestore   \r\n * @param {string} key -  \r\n * @param {string} userId -  ID\r\n * @param {any} data -  \r\n */\r\nexport function setCachedFirestoreData(key, userId, data) {\r\n  try {\r\n    localStorage.setItem(\r\n      `firestore_cache_${key}_${userId}`,\r\n      JSON.stringify({ data, timestamp: Date.now() })\r\n    );\r\n  } catch (error) {\r\n    logger.warn('[Cache] setCachedFirestoreData failed:', error);\r\n  }\r\n}\r\n\r\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","AppIcon","_ref","className","style","_jsxs","viewBox","fill","xmlns","children","id","x1","y1","x2","y2","gradientUnits","_jsx","offset","stopColor","x","y","width","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","filter","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","onClick","concat","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","userDoc","logout","useAuth","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","prev","_objectSpread","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","e","isAdmin","isSuperAdmin","userRole","userName","name","nickname","renderMenuSection","categoryKey","items","map","childItems","child","isSubGroup","size","charAt","_Fragment","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","fontSize","setFontSize","useTheme","resetTutorial","user","showTutorial","setShowTutorial","uid","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","Object","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","amount","formatKoreanNumber","Modal","stopPropagation","memo","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","userId","config","levelInfo","useMemo","netAssets","Number","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","sort","a","b","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","target","document","closeModal","color","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","classCode","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","message","Trash2","type","value","onChange","placeholder","maxLength","autoFocus","trimmed","trim","disabled","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","parseInt","Date","now","handleBeforeInstall","preventDefault","handleAppInstalled","handleDismiss","toString","Share","Plus","outcome","userChoice","log","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","badge","vibrate","DailyRewardBanner","lazy","then","m","default","WelcomePopup","HelpButton","Dashboard","ItemStore","MyItems","PersonalShop","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","AdminItemPage","AdminDatabase","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","from","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","_unused","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","timer","clearTimeout","handleDailyRewardClaim","rewardAmount","userRef","updateDoc","increment","globalCacheService","invalidate","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","adminTabMode","_unused2","WifiOff","onClaim","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","border","expression","saved","JSON","parse","saveAvatarConfig","stringify","dispatchEvent","CustomEvent","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","find","h","includes","AVATAR_CATEGORIES","darkenColor","hex","percent","r","slice","g","Math","max","floor","padStart","s","f","o","noseColor","borderStyle","getHairFill","cursor","overflow","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","opacity","earPositions","round","oval","square","heart","long","earPos","ry","i","transform","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","description","condition","stats","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","values","stored","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","findIndex","l","nextLevel","progress","currentMin","nextMin","min","currentAssets","assetsToNextLevel","number","unit","num","parseFloat","isNaN","isNegative","units","resultParts","remaining","abs","quotient","toLocaleString","maximumFractionDigits","join","formatKoreanCurrency","STREAK_REWARDS","day","reward","today","toDateString","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","showPopup","setShowPopup","info","handleClaim","toISOString","success","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","boxShadow","animation","StreakDisplay","currentStreak","StreakRewardInfo","fontWeight","ItemContext","createContext","useItems","context","useContext","warn","userItems","marketListings","marketOffers","addItem","purchaseItem","updateItem","deleteItem","useItem","updateUserItemQuantity","listItemForSale","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","refreshData","isAuthAdmin","authLoading","deductCash","addCash","optimisticUpdate","currentUserClassCode","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","getItemContextData","httpsCallable","functions","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","Error","storeItems","groupedUserItems","updateLocalUserItems","newUserItems","tempId","tempNewItem","newItemData","prevItems","token","getIdToken","functionUrl","response","fetch","method","headers","body","ok","errorText","text","status","json","itemId","updatesToApply","quantity","itemToPurchase","totalPrice","price","newUserItem","random","durationMs","purchasedAt","originalUserItems","originalStock","stock","originalPrice","existingIndex","updated","restocked","newStock","newPrice","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","metadata","itemName","pricePerItem","inventoryItemId","itemToUse","quantityToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","safeTimestampToDate","timestamp","getTime","toDate","date","seconds","getCachedFirestoreData","cacheDuration","cached","setCachedFirestoreData","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","couponAmount","firestore","logsRef","collection","logData","createdAt","docRef","addDoc","logId"],"ignoreList":[],"sourceRoot":""}