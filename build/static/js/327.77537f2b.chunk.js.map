{"version":3,"file":"static/js/327.77537f2b.chunk.js","mappings":"gOAkCA,MAAMA,EAAcC,IAClB,IAAKA,EAAW,MAAO,yCACvB,IAEE,OADa,IAAIC,KAAKD,GACVE,eAAe,QAAS,CAClCC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,WAEZ,CAAE,MAAOC,GAEP,OADAC,QAAQD,MAAM,yBAA0BA,GACjC,wCACT,GAGIE,EAAwBA,CAACC,EAAUC,EAAiBC,KACxD,MAAM,MAAEC,EAAQ,EAAC,SAAEC,EAAW,EAAC,QAAEC,EAAU,GAAE,WAAEC,EAAa,IAAON,EAE7DO,EAAeF,EAAQG,SAASN,GAChCO,EAAkBH,EAAWE,SAASN,GAE5C,IAAIQ,EAAmBC,EAEvB,GAAwB,SAApBV,EAA4B,CAC9B,GAAIM,EAAc,OAAO,EACzBG,EAAoBP,EAAQC,EAE1BO,EADEF,EACmBN,EAAQ,GAAMC,EAAW,GAEzBD,EAAQ,EAAKC,CAEtC,KAAO,IAAwB,YAApBH,EAST,OAAO,EARP,GAAIQ,EAAiB,OAAO,EAC5BC,EAAoBP,EAAQC,EAE1BO,EADEJ,EACmBJ,EAAQ,GAAMC,EAAW,GAE1BD,GAASC,EAAW,EAI5C,CAEA,MAAMQ,EAAgBC,KAAKC,IAAI,EAAGD,KAAKE,MAAML,EAAoB,IAGjE,OAFsBG,KAAKC,IAAI,EAAGD,KAAKE,MAAMJ,EAAoB,IAE1CC,GAqhCzB,EAlhCsBI,KACpB,MACEC,QAASC,EAAW,QACpBC,EAAO,iBACPC,EACAC,QAASC,IACPC,EAAAA,EAAAA,MAEEC,EAA2B,OAAXN,QAAW,IAAXA,OAAW,EAAXA,EAAaO,GAC7BC,EAAuB,OAAXR,QAAW,IAAXA,OAAW,EAAXA,EAAaQ,WAExBC,EAAeC,IAAoBC,EAAAA,EAAAA,UAAS,OAE5CC,EAAWC,IAAgBF,EAAAA,EAAAA,WAAS,IACpCG,EAAoBC,IAAyBJ,EAAAA,EAAAA,WAAS,IACtDK,EAASC,IAAcN,EAAAA,EAAAA,UAAS,CAAEO,MAAO,GAAIC,QAAS,MACtDC,EAAoBC,IAAyBV,EAAAA,EAAAA,UAAS,IACtDW,EAAcC,IAAmBZ,EAAAA,EAAAA,UAAS,KAG1Ca,EAAgBC,IAAqBd,EAAAA,EAAAA,WAAS,IAE9Ce,EAAsBC,IAA2BhB,EAAAA,EAAAA,WAAS,IAC1DiB,EAAgBC,IAAqBlB,EAAAA,EAAAA,UAAS,OAC9CmB,EAAkBC,IAAuBpB,EAAAA,EAAAA,UAAS,KAClDqB,EAAkBC,IAAuBtB,EAAAA,EAAAA,WAAS,GAGjDuB,GAAsBC,EAAAA,EAAAA,SAAQ,IAC9B3B,GACK4B,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,UAAW7B,EAAW,kBAEvC,KACN,CAACA,IAEE8B,GAAgBC,EAAAA,EAAAA,aAAYC,UAChC,IAAKhC,EACH,MAAO,GAET,MAAMiC,GAAgBL,EAAAA,EAAAA,IACpBC,EAAAA,GACA,UACA7B,EACA,kBAGIkC,GAAIC,EAAAA,EAAAA,OAAMF,GAAeG,EAAAA,EAAAA,SAAQ,SAASC,EAAAA,EAAAA,IAAM,MAUtD,aATuBC,EAAAA,EAAAA,SAAQJ,IACDK,KAAKC,IAAKC,IAAGC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACzC3C,GAAI0C,EAAI1C,IACL0C,EAAIE,QAAM,IACbC,SACiC,mBAAxBH,EAAIE,OAAOC,UACdH,EAAIE,OAAOC,aAIlB,CAAC5C,KAIF2C,KAAME,EAAS,GACflD,QAASmD,EACTC,QAASC,IACPC,EAAAA,EAAAA,IAAWnB,EAAe,CAC5BoB,SAAU,KACVC,UAAWnD,EACXoD,KAAM,CAACpD,KAGHqD,GAAetB,EAAAA,EAAAA,aAAYC,UAC/B,IAAK/B,IAAkBD,EACrB,MAAO,GAET,MAAMsD,GAAqB1B,EAAAA,EAAAA,IACzBC,EAAAA,GACA,UACA7B,EACA,iBACAC,EAAcF,GACd,SAGImC,GAAIC,EAAAA,EAAAA,OAAMmB,GAAoBlB,EAAAA,EAAAA,SAAQ,YAAa,SAASC,EAAAA,EAAAA,IAAM,MAoBxE,aAnBuBC,EAAAA,EAAAA,SAAQJ,IACFK,KAAKC,IAAKC,IAAG,IAAAc,EAAA,OAAAb,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACxC3C,GAAI0C,EAAI1C,IACL0C,EAAIE,QAAM,IACba,iBACyC,mBAAhCf,EAAIE,OAAOa,kBACdf,EAAIE,OAAOa,iBAEjBC,QAASC,OAAOjB,EAAIE,OAAOc,UAAY,EACvChF,MAAOiF,OAAOjB,EAAIE,OAAOlE,QAAU,EACnCC,SAAUgF,OAAOjB,EAAIE,OAAOjE,WAAa,EACzCC,QAASgF,MAAMC,QAAQnB,EAAIE,OAAOhE,SAAW8D,EAAIE,OAAOhE,QAAU,GAClEC,WAAY+E,MAAMC,QAAQnB,EAAIE,OAAO/D,YACjC6D,EAAIE,OAAO/D,WACX,GACJiF,UAA+B,QAApBN,EAAAd,EAAIE,OAAOkB,iBAAS,IAAAN,GAApBA,EAAsBO,OAC7BrB,EAAIE,OAAOkB,UAAUC,SAASC,eAC9B,IAAInG,MAAOmG,mBAGhB,CAAC9D,EAAeD,KAIjB2C,KAAMqB,EAAqB,GAC3BrE,QAASsE,EACTlB,QAASmB,IACPjB,EAAAA,EAAAA,IAAWI,EAAc,CAC3BH,SAAU,IACVC,UAAWlD,KAAmBD,EAC9BoD,KAAM,CAAc,OAAbnD,QAAa,IAAbA,OAAa,EAAbA,EAAeF,GAAIC,KAGxBmE,GAAqBxC,EAAAA,EAAAA,SAAQ,IAAMlC,GAAWA,IAAW,CAACA,IAShE,IANA2E,EAAAA,EAAAA,WAAU,KAGR3C,EAF2BxB,IAAkBK,IACzBU,GAAkBE,KAErC,CAACjB,EAAeK,EAAoBU,EAAgBE,IAEnDtB,EACF,OACEyE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,SAAC,2FAGlC,IAAK/E,EACH,OACE6E,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,SAAC,qHAMlC,IAAKvE,IAAcmE,EACjB,OACEE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,SAAC,+IAMlC,GAAIvE,GAAa8C,EACf,OACE0B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,eAAcC,SAAA,CAAC,yEACPvE,EAAU,OAKrC,GAAIC,GAAiBgE,EACnB,OACEO,EAAAA,EAAAA,MAAA,OAAKF,UAAU,eAAcC,SAAA,CAAC,IAC1BtE,EAAcwE,KAAK,8DAAoBzE,EAAU,OAKzD,GAAImE,IAAuBnE,EACzB,OACEqE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,SAAC,oSAOlC,MAAMG,EAAoB,SAACC,GAAqC,IAA5BC,EAAcC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAChD,MAAMG,EAAQnC,EAAOoC,KAAMC,GAAMA,EAAEnF,KAAO4E,GACpCQ,KACJhB,GAAoD,mBAAvBA,IACzBA,EAEFa,IAAUJ,IAAmBI,EAAMpC,UAAYuC,IACjDjF,EAAiB8E,GACjBzE,GAAsB,GACjBqE,GACHzD,GAAwB,IAEjB6D,GAASA,EAAMpC,WAAauC,IAAgBP,GACrDQ,MAAM,oGACNlF,EAAiB,OAEjBA,EAAiB,KAErB,EAyBMmF,EAAmBA,KAClBlB,GACLlD,EAAmBqE,IACjBC,EAAAA,GAAOC,IAAI,+BAAgCF,IACnCA,KAiENG,EAAwBzD,eAC5B2C,EACAe,EACAC,GAEI,IADJC,EAAgBf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAEnB,IAAK7E,IAAcF,EAAe,OAClC,MAAM+F,GAAUpD,EAAAA,EAAAA,IACdZ,EAAAA,GACA,UACA7B,EACA,iBACA2E,EACA,QACAe,GAGF,UACQI,EAAAA,EAAAA,IAAejE,EAAAA,GAAIG,UAAwB,IAAD+D,EAAAC,EAC9C,MAAMC,QAAgBC,EAAYC,IAAIN,GACtC,IAAKI,EAAQG,SAAU,KAAM,yEAE7B,MAAM9H,EAAW2H,EAAQtD,OACnB0D,EAAU,CAAC,EACjB,IAAIC,EAAe,EAEnB,MAAMzH,EAA+B,QAAnBkH,EAAGzH,EAASK,eAAO,IAAAoH,OAAA,EAAhBA,EAAkBjH,SAASgB,GAC1Cf,EAAqC,QAAtBiH,EAAG1H,EAASM,kBAAU,IAAAoH,OAAA,EAAnBA,EAAqBlH,SAASgB,GAEtD,GAAmB,SAAf6F,EAAuB,CACzB,GAAI9G,EAAc,OAClBwH,EAAQ1H,SAAU4H,EAAAA,EAAAA,IAAWzG,GAC7BuG,EAAQ5H,OAAQ+H,EAAAA,EAAAA,IAAU,GACtBzH,IACFsH,EAAQzH,YAAa6H,EAAAA,EAAAA,IAAY3G,GACjCuG,EAAQ3H,UAAW8H,EAAAA,EAAAA,KAAW,IAEhCF,EAAejI,EAAsBC,EAAU,OAAQwB,EACzD,MAAO,GAAmB,YAAf6F,EAA0B,CACnC,GAAI5G,EAAiB,OACrBsH,EAAQzH,YAAa2H,EAAAA,EAAAA,IAAWzG,GAChCuG,EAAQ3H,UAAW8H,EAAAA,EAAAA,IAAU,GACzB3H,IACFwH,EAAQ1H,SAAU8H,EAAAA,EAAAA,IAAY3G,GAC9BuG,EAAQ5H,OAAQ+H,EAAAA,EAAAA,KAAW,IAE7BF,EAAejI,EAAsBC,EAAU,UAAWwB,EAC5D,KAAO,MACU,gBAAf6F,GACAxB,GAC4B,kBAArByB,GACPA,EAAmB,GASnB,OAPA,GAAItH,EAASkF,iBAEX,YADA4B,MAAM,wIAGRiB,EAAQ7C,kBAAmB,EAC3B8C,EAAeV,CAGjB,CAEqB,IAAjBU,IACFD,EAAQ5C,SAAU+C,EAAAA,EAAAA,IAAUF,IAG9BD,EAAQK,WAAYC,EAAAA,EAAAA,MACpBT,EAAYU,OAAOf,EAASQ,GAGT,IAAjBC,GACAhI,EAASuI,UACTvI,EAASuI,WAAa/G,GACtBJ,GAEAA,EAAiBpB,EAASuI,SAAUP,KAIxCpC,IAEmB,gBAAfyB,GAAgCxB,IAClCiB,MAAM,0BAAD0B,OACQpB,EAAOqB,OACf,GACF,4CAAAD,OAAalB,EAAgB,0EAEhC/E,EAAsB,GAE1B,CAAE,MAAO1C,GACPC,QAAQD,MAAM,uBAAD2I,OAAwBnB,EAAU,KAAKxH,GACpDiH,MAAM,sBAAD0B,OAAQnB,EAAU,uCAAAmB,OAAa3I,EAAM6I,SAC5C,CACF,EAMMC,EAAoBA,CAACtC,EAASe,EAAQwB,IAC1CzB,EAAsBd,EAASe,EAAQ,cAAewB,GAmClDC,EAAwBA,KAC5B9F,EAAkB,MAClBE,EAAoB,KAEhB6F,EAA8BC,IAClC9F,EAAoB8F,EAAEC,OAAOC,QAGzBC,GAAsBxF,UAE1B,GADAqF,EAAEI,kBACGrG,IAAmBpB,IAAcmE,EAAoB,OAC1D,MAAMuD,EAAcpG,EAAiBqG,OACrC,IAAKD,EAAa,OAAOtC,MAAM,6FAC/B,GACEvC,EAAO+E,KACJ5C,GAAUA,EAAMjF,KAAOqB,GAAkB4D,EAAMP,OAASiD,GAG3D,OAAOtC,MAAM,yEACf,MAAMyC,GAAWpF,EAAAA,EAAAA,IACfZ,EAAAA,GACA,UACA7B,EACA,iBACAoB,GAEF,UACQ0G,EAAAA,EAAAA,IAAUD,EAAU,CACxBpD,KAAMiD,EACNhB,WAAWC,EAAAA,EAAAA,QAEb3D,IACAmE,GACF,CAAE,MAAOhJ,GACPC,QAAQD,MAAM,6BAA8BA,GAC5CiH,MAAM,6DACR,GAgEI2C,IAA6BlF,GAAU,IAAImF,OAAQhD,IAAWA,EAAMpC,UACpEqF,GAAkCpF,GAAU,GAG5CqF,GAAgB,4BAAApB,OACpBtF,EAAmB,kBAAoB,GAAE,KAAAsF,OACvC9F,GAAkBmD,EAAqB,qBAAuB,IAElE,OACEK,EAAAA,EAAAA,MAAA,OAAKF,UAAW4D,GAAiB3D,SAAA,EAC/BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,CACxBJ,IACCE,EAAAA,EAAAA,KAAA,UAAQC,UAAU,yBAAyB6D,QAAS9C,EAAiBd,SAClEvD,EAAiB,kCAAW,qCAIjCwD,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,mCAAQvE,GAAS,kBAAA8G,OAAY9G,EAAS,SAE1CwE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,UACEC,UAAS,aAAAwC,OACP1G,GAAaE,EAAqB,SAAW,IAE/C6H,QAhWeC,KAClBpI,GAAcmE,GAInB9D,GAAa,GACbE,GAAsB,GACtBL,EAAiB,MACjBiB,GAAwB,IANtBiE,MAAM,gHA8V0Bb,SAC3B,wBAGDF,EAAAA,EAAAA,KAAA,UACEC,UAAS,YAAAwC,QACN1G,GAAaE,EAAqB,SAAW,IAEhD6H,QA7VcE,KACjBrI,GAAcmE,GAInB9D,GAAa,GACbE,GAAsB,GACtBL,EAAiB,MACjBiB,GAAwB,IANtBiE,MAAM,gHA2VyBb,SAC1B,uBAGAJ,IACCK,EAAAA,EAAAA,MAAA,UACEF,UAAS,4BAAAwC,OACP5F,EAAuB,SAAW,IAEpCiH,QAlVkBG,KAC5B,IAAKnE,EAAoB,OACzB,MAAMoE,GAA4BrH,EAClCC,EAAwBoH,GACpBA,IACFhI,GAAsB,GACtBL,EAAiB,MACjBG,GAAa,KA2U0BkE,SAAA,CAChC,8BACS1B,EAAOmF,OAAQ9C,GAAMA,EAAEtC,UAAUkC,OAAO,WAKtDN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qBAAoBC,SAAA,CAChCjE,IAAuBY,IACtBsD,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,KAAA,MAAAE,SACGnE,EAAY,4DAAiB,wDAEhCiE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,SACrCwD,GAA0BjD,OAAS,EAClCiD,GAA0BvF,IAAKwC,IAC7BX,EAAAA,EAAAA,KAAA,OAAoBC,UAAU,oBAAmBC,UAC/CC,EAAAA,EAAAA,MAAA,UACEF,UAAS,aAAAwC,QACM,OAAb7G,QAAa,IAAbA,OAAa,EAAbA,EAAeF,MAAOiF,EAAMjF,GAAK,WAAa,IAEhDoI,QAASA,IAAMzD,EAAkBM,EAAMjF,IAAI,GAC3CW,MACEsE,EAAMpC,SAAQ,GAAAkE,OAAM9B,EAAMP,KAAI,mBAAUO,EAAMP,KAC/CF,SAAA,EAEDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,aAAYC,SAAES,EAAMP,OACnCN,GAAsBa,EAAMpC,WAC3ByB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,cAAc5D,MAAM,wCAAS6D,SAAC,2BAZ1CS,EAAMjF,MAoBlBsE,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAC9BzB,EACG,yDACA,+EAMb5B,GAAwBiD,IACvBK,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mCAAkCC,SAAA,EAC/CF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kFACwC,IAA3C0D,GAAgCnD,SAC/BT,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAC9BzB,EACG,yDACA,2EAGRuB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,SACrC0D,GAAgCzF,IAAKwC,IACpCX,EAAAA,EAAAA,KAAA,OAEEC,UAAU,oBAAmBC,UAE7BC,EAAAA,EAAAA,MAAA,UACEF,UAAS,aAAAwC,QACM,OAAb7G,QAAa,IAAbA,OAAa,EAAbA,EAAeF,MAAOiF,EAAMjF,GAAK,WAAa,GAAE,KAAA+G,OAC9C9B,EAAMpC,SAAW,yBAA2B,IAChDuF,QAASA,IAAMzD,EAAkBM,EAAMjF,IAAI,GAC3CW,MACEsE,EAAMpC,SAAQ,GAAAkE,OACP9B,EAAMP,KAAI,4CACbO,EAAMP,KACXF,SAAA,CAEAS,EAAMpC,SAAW,eAAO,eAAK,IAAEoC,EAAMP,SAC/B,eAAAqC,OAfW9B,EAAMjF,QAmB/BE,IACCuE,EAAAA,EAAAA,MAAA,OACEF,UAAU,gBACVkE,MAAO,CAAEC,UAAW,OAAQC,aAAc,QAASnE,SAAA,EAEnDC,EAAAA,EAAAA,MAAA,UACEF,UAAU,YACV6D,QAASA,IAAM9H,GAAa,GAAMkE,SAAA,CACnC,IACGtE,EAAcwE,KAAK,iCAEvBD,EAAAA,EAAAA,MAAA,UACEF,UAAU,WACV6D,QAASA,IAAM9H,GAAa,GAAOkE,SAAA,CACpC,IACGtE,EAAcwE,KAAK,8BAI3BJ,EAAAA,EAAAA,KAAA,MAAAE,SAAI,yDACe,IAAlB1B,EAAOiC,QACNT,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAAC,2EAElCF,EAAAA,EAAAA,KAAA,MAAAE,SACG1B,EACE8F,KAAK,CAACC,EAAG1D,IAAM0D,EAAEnE,KAAKoE,cAAc3D,EAAET,OACtCjC,IAAKwC,IACJR,EAAAA,EAAAA,MAAA,MAEEF,UAAS,qBAAAwC,OACP9B,EAAMpC,SAAW,iBAAmB,mBACnC2B,SAAA,EAEHC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CACGS,EAAMP,KAAK,KACXO,EAAMpC,SAAW,4BAAU,4BAAQ,QAEtC4B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,CAClCS,EAAMpC,UACLyB,EAAAA,EAAAA,KAAA,UACEC,UAAU,+BACV5D,MAAK,GAAAoG,OAAK9B,EAAMP,KAAI,iBACpB0D,QAASA,IA9MVnG,WACzB,IAAKmC,IAAuBnE,EAAW,OACvC,MAAM6H,GAAWpF,EAAAA,EAAAA,IAAIZ,EAAAA,GAAI,UAAW7B,EAAW,iBAAkB2E,GACjE,UACQmD,EAAAA,EAAAA,IAAUD,EAAU,CACxBjF,UAAU,EACV8D,WAAWC,EAAAA,EAAAA,QAEb3D,GACF,CAAE,MAAO7E,GACPC,QAAQD,MAAM,yBAA0BA,EAC1C,GAmMyC2K,CAAmB9D,EAAMjF,IAAIwE,SAC7C,+BAIDF,EAAAA,EAAAA,KAAA,UACEC,UAAU,4BACV5D,MAAK,GAAAoG,OAAK9B,EAAMP,KAAI,uBACpB0D,QAASA,IArObnG,WACtB,IAAKmC,IAAuBnE,EAAW,OACvC,MAAM6H,GAAWpF,EAAAA,EAAAA,IAAIZ,EAAAA,GAAI,UAAW7B,EAAW,iBAAkB2E,GACjE,UACQmD,EAAAA,EAAAA,IAAUD,EAAU,CACxBjF,UAAU,EACV8D,WAAWC,EAAAA,EAAAA,QAEb3D,IACI/C,GAAiBA,EAAcF,KAAO4E,GAASzE,EAAiB,KACtE,CAAE,MAAO/B,GACPC,QAAQD,MAAM,sBAAuBA,EACvC,GAyNyC4K,CAAgB/D,EAAMjF,IAAIwE,SAC1C,mEAIHF,EAAAA,EAAAA,KAAA,UACEC,UAAU,8BACV5D,MAAK,GAAAoG,OAAK9B,EAAMP,KAAI,8BACpB0D,QAASA,IAhNTnG,WACxB,IAAKmC,IAAuBnE,EAAW,OACvC,MAAMgJ,EAAgBnG,EAAOoC,KAAMC,GAAMA,EAAEnF,KAAO4E,GAClD,GACEsE,OAAOC,QAAQ,IAADpC,OACK,OAAbkC,QAAa,IAAbA,OAAa,EAAbA,EAAevE,KAAI,oIAGzB,IACE,MAAMoD,GAAWpF,EAAAA,EAAAA,IACfZ,EAAAA,GACA,UACA7B,EACA,iBACA2E,GAEIwE,GAAWvH,EAAAA,EAAAA,IAAWiG,EAAU,SAChCuB,QAAsB9G,EAAAA,EAAAA,SAAQ6G,GAC9BE,GAAQC,EAAAA,EAAAA,IAAWzH,EAAAA,IACzBuH,EAAc7G,KAAKgH,QAAStD,GAAYoD,EAAMG,OAAOvD,EAAQwD,MAC7DJ,EAAMG,OAAO3B,SACPwB,EAAMK,SACZ1G,IACI/C,GAAiBA,EAAcF,KAAO4E,GACxCzE,EAAiB,KACrB,CAAE,MAAO/B,GACPC,QAAQD,MAAM,wBAAyBA,GACvCiH,MAAM,gDACR,GAoLqCuE,CAAkB3E,EAAMjF,IAAIwE,SAC5C,6BAGG,UAAAuC,OAlCS9B,EAAMjF,WAyClCK,GACCH,KACEA,EAAc2C,UAAYuB,KAC1BK,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CACGtE,EAAcwE,KAAK,4BAAM,IACzBxE,EAAc2C,SAAW,oCAAa,OAEzC4B,EAAAA,EAAAA,MAAA,QAAMoF,SAjeK5H,UAEvB,GADAqF,EAAEI,kBACGxH,IAAkBD,IAAcF,EAEnC,YADAsF,MAAM,uKAGR,GAAInF,EAAc2C,WAAauB,EAE7B,YADAiB,MAAM,sHAGR,IAAK5E,EAAQE,MAAMiH,SAAWnH,EAAQG,QAAQgH,OAE5C,YADAvC,MAAM,4FAIR,MAAM9G,EAAW,CACfoC,MAAOF,EAAQE,MACfC,QAASH,EAAQG,QACjBkJ,QAAmB,OAAXrK,QAAW,IAAXA,OAAW,EAAXA,EAAaiF,QAAmB,OAAXjF,QAAW,IAAXA,OAAW,EAAXA,EAAasK,WAAY,eACtDjD,SAAU/G,EACVrB,MAAO,EACPC,SAAU,EACVC,QAAS,GACTC,WAAY,GACZ6E,QAAS,EACTI,WAAW8C,EAAAA,EAAAA,MACXnD,kBAAkB,EAClBxD,UAAWA,GAGb,IACE,MAAMsD,GAAqB1B,EAAAA,EAAAA,IACzBC,EAAAA,GACA,UACA7B,EACA,iBACAC,EAAcF,GACd,eAEIgK,EAAAA,EAAAA,QAAOzG,EAAoBhF,GACjC4F,IACAzD,EAAW,CAAEC,MAAO,GAAIC,QAAS,KACjCyE,MAAM,sGAER,CAAE,MAAOjH,GACPC,QAAQD,MAAM,yBAA0BA,GACxCiH,MAAM,mGAAD0B,OAAyB3I,EAAM6I,SACtC,GAkb8C1C,UAAU,YAAWC,SAAA,EACrDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,kBACPF,EAAAA,EAAAA,KAAA,SACE2F,KAAK,OACLzC,MAAO/G,EAAQE,MACfuJ,SAAW5C,GACT5G,GAAUiC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlC,GAAO,IAAEE,MAAO2G,EAAEC,OAAOC,SAE3C2C,UAAQ,QAGZ1F,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,kBACPF,EAAAA,EAAAA,KAAA,YACEkD,MAAO/G,EAAQG,QACfsJ,SAAW5C,GACT5G,GAAUiC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlC,GAAO,IAAEG,QAAS0G,EAAEC,OAAOC,SAE7C2C,UAAQ,EACRC,KAAK,UAGT9F,EAAAA,EAAAA,KAAA,UAAQ2F,KAAK,SAAS1F,UAAU,aAAYC,SAAC,mCAMpDnE,GACCH,GACAA,EAAc2C,WACbuB,IACAjD,IACCmD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAC,iJAI/BnE,IAAcH,IACboE,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAC,yJAI5BnE,GACAH,KACEA,EAAc2C,UACbuB,GAAsBjD,KACvBsD,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CACGtE,EAAcwE,KAAK,uBAAM,IACzBxE,EAAc2C,SAAW,gEAAqB,MAEhDqB,GACCI,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAAC,8CACM,MAAnB,OAAlBP,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBc,SAAU,IACjCT,EAAAA,EAAAA,KAAA,KAAGC,UAAU,WAAUC,SAAC,4EAExBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,aAAYC,SACxBP,EAAmBxB,IAAK4H,IAAI,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAC3BlG,EAAAA,EAAAA,MAAA,OAAmBF,UAAU,YAAWC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,MAAAE,SAAK6F,EAAK1J,SACV8D,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAM,uBAAM6F,EAAKP,QAAU,iCAC3BrF,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAM,uBAAM7G,EAAW0M,EAAKvG,kBAE9BQ,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAE6F,EAAKzJ,WAClC6D,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,MAAA,UACEF,UAAS,YAAAwC,OACK,QAAZuD,EAAAD,EAAKzL,eAAO,IAAA0L,GAAZA,EAAcvL,SAASgB,GACnB,SACA,GAAE,KAAAgH,OAENsD,EAAKvD,WAAa/G,EACd,WACA,IAENqI,QAASA,KACPwC,OA9ZVhG,EA8ZqB1E,EAAcF,GA9Z1B2F,EA8Z8B0E,EAAKrK,GA7Z9D0F,EAAsBd,EAASe,EAAQ,QADtBiF,IAAChG,EAASe,GAgaDkF,UACc,QAAZN,EAAAF,EAAKzL,eAAO,IAAA2L,OAAA,EAAZA,EAAcxL,SAASgB,MACR,QADsByK,EACrCH,EAAKxL,kBAAU,IAAA2L,OAAA,EAAfA,EAAiBzL,SAASgB,KAC1BsK,EAAKvD,WAAa/G,EACnByE,SAAA,CACF,mCACS6F,EAAK3L,OAAS,MAExB+F,EAAAA,EAAAA,MAAA,UACEF,UAAS,eAAAwC,OACQ,QAAf0D,EAAAJ,EAAKxL,kBAAU,IAAA4L,GAAfA,EAAiB1L,SAASgB,GACtB,SACA,GAAE,KAAAgH,OAENsD,EAAKvD,WAAa/G,EACd,WACA,IAENqI,QAASA,KACP0C,OAjbPlG,EAibqB1E,EAAcF,GAjb1B2F,EAib8B0E,EAAKrK,GAhbjE0F,EAAsBd,EAASe,EAAQ,WADnBmF,IAAClG,EAASe,GAmbJkF,UACc,QAAZH,EAAAL,EAAKzL,eAAO,IAAA8L,OAAA,EAAZA,EAAc3L,SAASgB,MACR,QADsB4K,EACrCN,EAAKxL,kBAAU,IAAA8L,OAAA,EAAfA,EAAiB5L,SAASgB,KAC1BsK,EAAKvD,WAAa/G,EACnByE,SAAA,CACF,mCACS6F,EAAK1L,UAAY,SAG7B8F,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAM,8BAAQ6F,EAAK3G,SAAW,EAAE,aAChCe,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAM,mCACI,KACN6F,EAAK3L,OAAS,IAAM2L,EAAK1L,UAAY,MAExC0L,EAAK5G,mBAAqBW,IACzBE,EAAAA,EAAAA,KAAA,QACEC,UAAU,uBACV5D,MAAM,oHAAyB6D,SAChC,2DAKJJ,IACCK,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wBAAuBC,SAAA,EACpCC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,4DACgB6F,EAAKrK,GAAGgH,OAAO,GAAG,OAErCqD,EAAK5G,kBACJa,EAAAA,EAAAA,KAAA,KAAGC,UAAU,uBAAsBC,SAAC,qIAKpCC,EAAAA,EAAAA,MAAAsG,EAAAA,SAAA,CAAAvG,SAAA,EACEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iBAAgBC,SAC5B,CAAC,EAAG,EAAG,GAAG/B,IAAK0E,IACd1C,EAAAA,EAAAA,MAAA,UAEE2D,QAASA,IACPlB,EACEhH,EAAcF,GACdqK,EAAKrK,GACLmH,GAEH3C,SAAA,CACF,IACG2C,EAAO,kBATJA,OAaX1C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SACE2F,KAAK,SACLe,IAAI,IACJxD,MACyB,IAAvB3G,EACI,GACAA,EAENqJ,SAAW5C,IACT,MAAM2D,EAAMC,SAAS5D,EAAEC,OAAOC,OAC9B1G,EACE6C,OAAOwH,MAAMF,GAAO,EAAIA,IAG5BG,YAAY,+BAEd9G,EAAAA,EAAAA,KAAA,UACE8D,QAASA,IACPlB,EACEhH,EAAcF,GACdqK,EAAKrK,GACLa,GAGJgK,SAAUhK,GAAsB,EAAE2D,SACnC,+BAzHL6F,EAAKrK,YAwIzBK,GACAH,GACAA,EAAc2C,WACbuB,IACAjD,IACCmD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAC,sGAI9BnE,IACCH,IACAiB,IACAZ,IACC+D,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAC,oQAQnCJ,IACCK,EAAAA,EAAAA,MAAA,OACEF,UAAS,eAAAwC,OAAiB9F,EAAiB,UAAY,IACvDwH,MAAO,CAEL4C,MAAOpK,EAAiB,MAAQ,SAChCqK,WAAY,yBACZC,QAAStK,EAAiB,QAAU,OACpCuK,WAAYvK,EAAiB,UAAY,SACzCwK,QAASxK,EAAiB,EAAI,GAC9BuD,SAAA,EAEFF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,wBAAwB6D,QAAS9C,EAAiBd,SAAC,UAGrEF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,qCACJC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iCAAgCC,SAAA,EAC7CF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,6EACJC,EAAAA,EAAAA,MAAA,QAAMoF,SAljBO5H,UAGrB,GAFAqF,EAAEI,kBAEGtD,IAAuBnE,IAAc0B,EAIxC,YAHA0D,MACE,4OAIJ,MAAMsC,EAAc5G,EAAa6G,OACjC,IAAKD,EAAa,OAAOtC,MAAM,+EAC/B,GAAIvC,EAAO+E,KAAM5C,GAAUA,EAAMP,OAASiD,GACxC,OAAOtC,MAAM,4FACf,UACQ2E,EAAAA,EAAAA,QAAOrI,EAAqB,CAEhC+C,KAAMiD,EACN9E,UAAU,EACV6I,WAAW9E,EAAAA,EAAAA,MACX3G,UAAWA,IAEbgD,IACAjC,EAAgB,GAClB,CAAE,MAAO5C,GACPC,QAAQD,MAAM,sBAAuBA,GACrCiH,MAAM,gDACR,GAwhBwCd,UAAU,iBAAgBC,SAAA,EACxDF,EAAAA,EAAAA,KAAA,SACE2F,KAAK,OACLzC,MAAOzG,EACPmJ,SAAW5C,GAAMtG,EAAgBsG,EAAEC,OAAOC,OAC1C4D,YAAY,yCACZjB,UAAQ,KAEV7F,EAAAA,EAAAA,KAAA,UAAQ2F,KAAK,SAAS1F,UAAU,gBAAeC,SAAC,qBAIlDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,mBAAkBC,SAC7B,IAAI1B,GACF8F,KAAK,CAACC,EAAG1D,KAAO0D,EAAEnE,MAAQ,IAAIoE,cAAc3D,EAAET,MAAQ,KACtDjC,IAAKwC,IACJX,EAAAA,EAAAA,KAAA,MAEEC,UAAS,2BAAAwC,OACP9B,EAAMpC,SAAW,SAAW,IAC3B2B,SAEFnD,IAAmB4D,EAAMjF,IACxByE,EAAAA,EAAAA,MAAA,QACEoF,SAAUpC,GACVlD,UAAU,kBAAiBC,SAAA,EAE3BF,EAAAA,EAAAA,KAAA,SACE2F,KAAK,OACLzC,MAAOjG,EACP2I,SAAU7C,EACVsE,WAAS,KAEXrH,EAAAA,EAAAA,KAAA,UACE2F,KAAK,SACL1F,UAAU,4BAA2BC,SACtC,kBAGDF,EAAAA,EAAAA,KAAA,UACE2F,KAAK,SACL1F,UAAU,6BACV6D,QAAShB,EAAsB5C,SAChC,qBAKHC,EAAAA,EAAAA,MAAAsG,EAAAA,SAAA,CAAAvG,SAAA,EACEC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CACGS,EAAMP,KAAK,IAAEO,EAAMpC,SAAW,iBAAS,OAE1CyB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,KAAA,UACEC,UAAU,4BACV5D,MAAK,GAAAoG,OAAK9B,EAAMP,KAAI,8BACpB0D,QAASA,IA7kBLnD,KAC5B3D,EAAkB2D,EAAMjF,IACxBwB,EAAoByD,EAAMP,OA2kBakH,CAAqB3G,GAAOT,SAC5C,uBAxCFS,EAAMjF,WAkDrByE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA2BC,SAAA,EACxCF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBACJC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,6CACW1B,EAAOmF,OAAQ9C,IAAOA,EAAEtC,UAAUkC,OAAO,aAExDN,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,6CACW1B,EAAOmF,OAAQ9C,GAAMA,EAAEtC,UAAUkC,OAAO,aAEvDN,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,uEAAoC,OAAlBP,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBc,SAAU,EAAE,cACtDN,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,4EACiB,KACjBP,GAAsB,IAAI4H,OAC1B,CAACC,EAAKzB,IAASyB,GAAOzB,EAAK3G,SAAW,GACtC,GACC,IAAI,wB","sources":["pages/learning/LearningBoard.js"],"sourcesContent":["// src/pages/learning/LearningBoard.js\r\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport \"./LearningBoard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport {\r\n  db, // dbëŠ” firebase.jsì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\r\n} from \"../../firebase\";\r\n\r\n// Firestore v9 ëª¨ë“ˆì‹ APIì—ì„œ í•„ìš”í•œ í•¨ìˆ˜ë“¤ì„ ì§ì ‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  orderBy,\r\n  where,\r\n  limit,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  writeBatch,\r\n  setDoc,\r\n  runTransaction, // runTransaction ì„í¬íŠ¸ ì¶”ê°€\r\n} from \"firebase/firestore\";\r\n\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\n\r\nimport { logger } from \"../../utils/logger\";\n// formatDate í•¨ìˆ˜ (ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ì •ì˜í•˜ê±°ë‚˜ ìœ í‹¸ë¦¬í‹° íŒŒì¼ë¡œ ë¶„ë¦¬ ê°€ëŠ¥)\r\nconst formatDate = (isoString) => {\r\n  if (!isoString) return \"ë‚ ì§œ ì •ë³´ ì—†ìŒ\";\r\n  try {\r\n    const date = new Date(isoString);\r\n    return date.toLocaleString(\"ko-KR\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error formatting date:\", error);\r\n    return \"ë‚ ì§œ í˜•ì‹ ì˜¤ë¥˜\";\r\n  }\r\n};\r\n\r\nconst calculateCouponChange = (postData, interactionType, userId) => {\r\n  const { likes = 0, dislikes = 0, likedBy = [], dislikedBy = [] } = postData;\r\n\r\n  const userHasLiked = likedBy.includes(userId);\r\n  const userHasDisliked = dislikedBy.includes(userId);\r\n\r\n  let oldEffectiveLikes, newEffectiveLikes;\r\n\r\n  if (interactionType === 'like') {\r\n    if (userHasLiked) return 0;\r\n    oldEffectiveLikes = likes - dislikes;\r\n    if (userHasDisliked) {\r\n      newEffectiveLikes = (likes + 1) - (dislikes - 1);\r\n    } else {\r\n      newEffectiveLikes = (likes + 1) - dislikes;\r\n    }\r\n  } else if (interactionType === 'dislike') {\r\n    if (userHasDisliked) return 0;\r\n    oldEffectiveLikes = likes - dislikes;\r\n    if (userHasLiked) {\r\n      newEffectiveLikes = (likes - 1) - (dislikes + 1);\r\n    } else {\r\n      newEffectiveLikes = likes - (dislikes + 1);\r\n    }\r\n  } else {\r\n    return 0;\r\n  }\r\n\r\n  const prevThreshold = Math.max(0, Math.floor(oldEffectiveLikes / 3));\r\n  const currThreshold = Math.max(0, Math.floor(newEffectiveLikes / 3));\r\n\r\n  return currThreshold - prevThreshold;\r\n};\r\n\r\nconst LearningBoard = () => {\r\n  const {\r\n    userDoc: currentUser,\r\n    isAdmin,\r\n    addCouponsToUser,\r\n    loading: authLoading,\r\n  } = useAuth();\r\n\r\n  const currentUserId = currentUser?.id;\r\n  const classCode = currentUser?.classCode;\r\n\r\n  const [selectedBoard, setSelectedBoard] = useState(null);\r\n\r\n  const [isWriting, setIsWriting] = useState(false);\r\n  const [showBoardSelection, setShowBoardSelection] = useState(false);\r\n  const [newPost, setNewPost] = useState({ title: \"\", content: \"\" });\r\n  const [customCouponAmount, setCustomCouponAmount] = useState(0);\r\n  const [newBoardName, setNewBoardName] = useState(\"\");\r\n\r\n  // ê´€ë¦¬ì íŒ¨ë„ ì´ˆê¸°ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ falseë¡œ ì„¤ì •\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n\r\n  const [showHiddenBoardsView, setShowHiddenBoardsView] = useState(false);\r\n  const [editingBoardId, setEditingBoardId] = useState(null);\r\n  const [editingBoardName, setEditingBoardName] = useState(\"\");\r\n  const [isFullScreenMode, setIsFullScreenMode] = useState(false);\r\n\r\n    // boardsCollectionRef ì •ì˜\r\n    const boardsCollectionRef = useMemo(() => {\r\n      if (classCode) {\r\n        return collection(db, \"classes\", classCode, \"learningBoards\");\r\n      }\r\n      return null;\r\n    }, [classCode]);\r\n  \r\n    const boardsQueryFn = useCallback(async () => {\r\n      if (!classCode) {\r\n        return [];\r\n      }\r\n      const boardsPathRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"learningBoards\"\r\n      );\r\n      // ğŸ”¥ [ìµœì í™”] limit ì¶”ê°€ - ìµœëŒ€ 100ê°œ ê²Œì‹œíŒë§Œ ì¡°íšŒ\r\n      const q = query(boardsPathRef, orderBy(\"name\"), limit(100));\r\n      const snapshot = await getDocs(q);\r\n      const loadedBoards = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        isHidden:\r\n          typeof doc.data().isHidden === \"boolean\"\r\n            ? doc.data().isHidden\r\n            : false,\r\n      }));\r\n      return loadedBoards;\r\n    }, [classCode]);\r\n  \r\n    // ê²Œì‹œíŒ ëª©ë¡ ë¡œë“œ - usePollingìœ¼ë¡œ ë³€í™˜\r\n    const {\r\n      data: boards = [],\r\n      loading: boardsLoading,\r\n      refetch: refetchBoards,\r\n    } = usePolling(boardsQueryFn, {\r\n      interval: 30 * 60 * 1000, // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 30ë¶„ (ê²Œì‹œíŒ ëª©ë¡ì€ ê±°ì˜ ì•ˆ ë°”ë€œ)\r\n      enabled: !!classCode,\r\n      deps: [classCode],\r\n    });\r\n  \r\n    const postsQueryFn = useCallback(async () => {\r\n      if (!selectedBoard || !classCode) {\r\n        return [];\r\n      }\r\n      const postsCollectionRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"learningBoards\",\r\n        selectedBoard.id,\r\n        \"posts\"\r\n      );\r\n      // ğŸ”¥ [ìµœì í™”] limit ì¶”ê°€ - ìµœì‹  ê²Œì‹œê¸€ 100ê°œë§Œ ì¡°íšŒ\r\n      const q = query(postsCollectionRef, orderBy(\"timestamp\", \"desc\"), limit(100));\r\n      const snapshot = await getDocs(q);\r\n      const loadedPosts = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        adminCouponGiven:\r\n          typeof doc.data().adminCouponGiven === \"boolean\"\r\n            ? doc.data().adminCouponGiven\r\n            : false,\r\n        coupons: Number(doc.data().coupons) || 0,\r\n        likes: Number(doc.data().likes) || 0,\r\n        dislikes: Number(doc.data().dislikes) || 0,\r\n        likedBy: Array.isArray(doc.data().likedBy) ? doc.data().likedBy : [],\r\n        dislikedBy: Array.isArray(doc.data().dislikedBy)\r\n          ? doc.data().dislikedBy\r\n          : [],\r\n        timestamp: doc.data().timestamp?.toDate\r\n          ? doc.data().timestamp.toDate().toISOString()\r\n          : new Date().toISOString(),\r\n      }));\r\n      return loadedPosts;\r\n    }, [selectedBoard, classCode]);\r\n  \r\n    // ì„ íƒëœ ê²Œì‹œíŒì˜ ê²Œì‹œê¸€ ë¡œë“œ - usePollingìœ¼ë¡œ ë³€í™˜\r\n    const {\r\n      data: selectedBoardPosts = [],\r\n      loading: postsLoading,\r\n      refetch: refetchPosts,\r\n    } = usePolling(postsQueryFn, {\r\n      interval: 10 * 60 * 1000, // ğŸ”¥ [ë¹„ìš© ìµœì í™”] 5ë¶„ â†’ 10ë¶„ (ê²Œì‹œê¸€ì€ ì ë‹¹í•œ ì‹¤ì‹œê°„ì„± ìœ ì§€)\r\n      enabled: !!selectedBoard && !!classCode,\r\n      deps: [selectedBoard?.id, classCode],\r\n    });\r\n  // ğŸ”¥ [ìˆ˜ì •] useMemoëŠ” ì¡°ê¸° return ì „ì— í˜¸ì¶œë˜ì–´ì•¼ í•¨ (Hooks ê·œì¹™)\r\n  const currentUserIsAdmin = useMemo(() => isAdmin && isAdmin(), [isAdmin]);\r\n\r\n  // ì „ì²´ í™”ë©´ ëª¨ë“œ ê´€ë¦¬ useEffect ìˆ˜ì • - ê´€ë¦¬ì íŒ¨ë„ ìë™ ì—´ë¦¼ ë°©ì§€\r\n  useEffect(() => {\r\n    const isViewingOrWriting = selectedBoard && !showBoardSelection;\r\n    const isAdminView = showAdminPanel || showHiddenBoardsView;\r\n    setIsFullScreenMode(isViewingOrWriting || isAdminView);\r\n  }, [selectedBoard, showBoardSelection, showAdminPanel, showHiddenBoardsView]);\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"info-message\">í•™ìŠµ ê²Œì‹œíŒ ì‚¬ìš©ì ì •ë³´ ë¡œë”© ì¤‘...</div>\r\n    );\r\n  }\r\n  if (!currentUser) {\r\n    return (\r\n      <div className=\"info-message\">\r\n        ê²Œì‹œíŒì„ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!classCode && !currentUserIsAdmin) {\r\n    return (\r\n      <div className=\"info-message\">\r\n        ê²Œì‹œíŒì„ ì´ìš©í•˜ë ¤ë©´ í•™ê¸‰ ì½”ë“œê°€ ì„¤ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (classCode && boardsLoading) {\r\n    return (\r\n      <div className=\"info-message\">\r\n        ê²Œì‹œíŒ ëª©ë¡ ë¡œë”© ì¤‘... (í•™ê¸‰: {classCode})\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (selectedBoard && postsLoading) {\r\n    return (\r\n      <div className=\"info-message\">\r\n        '{selectedBoard.name}' ê²Œì‹œê¸€ ë¡œë”© ì¤‘... (í•™ê¸‰: {classCode})\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (currentUserIsAdmin && !classCode) {\r\n    return (\r\n      <div className=\"info-message\">\r\n        ê´€ë¦¬ìë‹˜, í˜„ì¬ í•™ê¸‰ ì½”ë“œê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ê²Œì‹œíŒ ë‚´ìš©ì„ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\r\n        í”„ë¡œí•„ì—ì„œ í•™ê¸‰ ì½”ë“œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleBoardSelect = (boardId, fromHiddenView = false) => {\r\n    const board = boards.find((b) => b.id === boardId);\r\n    const adminAccess =\r\n      currentUserIsAdmin && typeof currentUserIsAdmin === \"boolean\"\r\n        ? currentUserIsAdmin\r\n        : false;\r\n    if (board && (fromHiddenView || !board.isHidden || adminAccess)) {\r\n      setSelectedBoard(board);\r\n      setShowBoardSelection(false);\r\n      if (!fromHiddenView) {\r\n        setShowHiddenBoardsView(false);\r\n      }\r\n    } else if (board && board.isHidden && !adminAccess && !fromHiddenView) {\r\n      alert(\"ì´ ê²Œì‹œíŒì€ í˜„ì¬ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      setSelectedBoard(null);\r\n    } else {\r\n      setSelectedBoard(null);\r\n    }\r\n  };\r\n\r\n  const handleWriteClick = () => {\r\n    if (!classCode && !currentUserIsAdmin) {\r\n      alert(\"ê¸€ì„ ì‘ì„±í•  í•™ê¸‰ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    setIsWriting(true);\r\n    setShowBoardSelection(true);\r\n    setSelectedBoard(null);\r\n    setShowHiddenBoardsView(false);\r\n  };\r\n\r\n  const handleViewClick = () => {\r\n    if (!classCode && !currentUserIsAdmin) {\r\n      alert(\"ê¸€ì„ ì¡°íšŒí•  í•™ê¸‰ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    setIsWriting(false);\r\n    setShowBoardSelection(true);\r\n    setSelectedBoard(null);\r\n    setShowHiddenBoardsView(false);\r\n  };\r\n\r\n  // ê´€ë¦¬ì íŒ¨ë„ í† ê¸€ í•¨ìˆ˜ ìˆ˜ì • - ëª…ì‹œì  ì œì–´\r\n  const toggleAdminPanel = () => {\r\n    if (!currentUserIsAdmin) return;\r\n    setShowAdminPanel((prev) => {\r\n      logger.log(\"[Debug] Admin panel toggle:\", !prev);\r\n      return !prev;\r\n    });\r\n  };\r\n\r\n  const toggleHiddenBoardView = () => {\r\n    if (!currentUserIsAdmin) return;\r\n    const nextShowHiddenBoardsView = !showHiddenBoardsView;\r\n    setShowHiddenBoardsView(nextShowHiddenBoardsView);\r\n    if (nextShowHiddenBoardsView) {\r\n      setShowBoardSelection(false);\r\n      setSelectedBoard(null);\r\n      setIsWriting(false);\r\n    }\r\n  };\r\n\r\n  const handlePostSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedBoard || !classCode || !currentUserId) {\r\n      alert(\"ê¸€ì„ ì‘ì„±í•  ê²Œì‹œíŒì„ ì„ íƒí•˜ê±°ë‚˜ ë¡œê·¸ì¸ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    if (selectedBoard.isHidden && !currentUserIsAdmin) {\r\n      alert(\"ìˆ¨ê²¨ì§„ ê²Œì‹œíŒì—ëŠ” ê¸€ì„ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!newPost.title.trim() || !newPost.content.trim()) {\r\n      alert(\"ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    const postData = {\r\n      title: newPost.title,\r\n      content: newPost.content,\r\n      author: currentUser?.name || currentUser?.nickname || \"ìµëª…\",\r\n      authorId: currentUserId,\r\n      likes: 0,\r\n      dislikes: 0,\r\n      likedBy: [],\r\n      dislikedBy: [],\r\n      coupons: 0,\r\n      timestamp: serverTimestamp(),\r\n      adminCouponGiven: false,\r\n      classCode: classCode,\r\n    };\r\n\r\n    try {\r\n      const postsCollectionRef = collection(\r\n        db,\r\n        \"classes\",\r\n        classCode,\r\n        \"learningBoards\",\r\n        selectedBoard.id,\r\n        \"posts\"\r\n      );\r\n      await addDoc(postsCollectionRef, postData);\r\n      refetchPosts();\r\n      setNewPost({ title: \"\", content: \"\" });\r\n      alert(\"ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!\");\r\n      // ê²Œì‹œê¸€ ì‘ì„± í›„ì—ë„ í˜„ì¬ ìƒíƒœ ìœ ì§€ (ê¸€ì“°ê¸° ëª¨ë“œì™€ ì„ íƒëœ ê²Œì‹œíŒ ìœ ì§€)\r\n    } catch (error) {\r\n      console.error(\"Error submitting post:\", error);\r\n      alert(`ê²Œì‹œê¸€ ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const updatePostInteraction = async (\r\n    boardId,\r\n    postId,\r\n    updateType,\r\n    interactionValue = null\r\n  ) => {\r\n    if (!classCode || !currentUserId) return;\r\n    const postRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"learningBoards\",\r\n      boardId,\r\n      \"posts\",\r\n      postId\r\n    );\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const postDoc = await transaction.get(postRef);\r\n        if (!postDoc.exists()) throw \"ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\";\r\n\r\n        const postData = postDoc.data();\r\n        const updates = {};\r\n        let couponChange = 0;\r\n\r\n        const userHasLiked = postData.likedBy?.includes(currentUserId);\r\n        const userHasDisliked = postData.dislikedBy?.includes(currentUserId);\r\n\r\n        if (updateType === \"like\") {\r\n          if (userHasLiked) return;\r\n          updates.likedBy = arrayUnion(currentUserId);\r\n          updates.likes = increment(1);\r\n          if (userHasDisliked) {\r\n            updates.dislikedBy = arrayRemove(currentUserId);\r\n            updates.dislikes = increment(-1);\r\n          }\r\n          couponChange = calculateCouponChange(postData, \"like\", currentUserId);\r\n        } else if (updateType === \"dislike\") {\r\n          if (userHasDisliked) return;\r\n          updates.dislikedBy = arrayUnion(currentUserId);\r\n          updates.dislikes = increment(1);\r\n          if (userHasLiked) {\r\n            updates.likedBy = arrayRemove(currentUserId);\r\n            updates.likes = increment(-1);\r\n          }\r\n          couponChange = calculateCouponChange(postData, \"dislike\", currentUserId);\r\n        } else if (\r\n          updateType === \"adminCoupon\" &&\r\n          currentUserIsAdmin &&\r\n          typeof interactionValue === \"number\" &&\r\n          interactionValue > 0\r\n        ) {\r\n          if (postData.adminCouponGiven) {\r\n            alert(\"ì´ ê²Œì‹œê¸€ì—ëŠ” ì´ë¯¸ ê´€ë¦¬ì ì¿ í°ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n            return;\r\n          }\r\n          updates.adminCouponGiven = true;\r\n          couponChange = interactionValue;\r\n        } else {\r\n          return;\r\n        }\r\n\r\n        if (couponChange !== 0) {\r\n          updates.coupons = increment(couponChange);\r\n        }\r\n\r\n        updates.updatedAt = serverTimestamp();\r\n        transaction.update(postRef, updates);\r\n\r\n        if (\r\n          couponChange !== 0 &&\r\n          postData.authorId &&\r\n          postData.authorId !== currentUserId &&\r\n          addCouponsToUser\r\n        ) {\r\n          addCouponsToUser(postData.authorId, couponChange);\r\n        }\r\n      });\r\n\r\n      refetchPosts();\r\n\r\n      if (updateType === \"adminCoupon\" && currentUserIsAdmin) {\r\n        alert(\r\n          `ê²Œì‹œê¸€(ID: ${postId.slice(\r\n            -6\r\n          )})ì— ê´€ë¦¬ì ì¿ í° ${interactionValue}ê°œê°€ ì§€ê¸‰ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.`\r\n        );\r\n        setCustomCouponAmount(0);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error updating post ${updateType}:`, error);\r\n      alert(`ê²Œì‹œê¸€ ${updateType} ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLike = (boardId, postId) =>\r\n    updatePostInteraction(boardId, postId, \"like\");\r\n  const handleDislike = (boardId, postId) =>\r\n    updatePostInteraction(boardId, postId, \"dislike\");\r\n  const handleGiveCoupons = (boardId, postId, amount) =>\r\n    updatePostInteraction(boardId, postId, \"adminCoupon\", amount);\r\n\r\n  const handleAddBoard = async (e) => {\r\n    e.preventDefault();\r\n    // boardsCollectionRefê°€ nullì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€\r\n    if (!currentUserIsAdmin || !classCode || !boardsCollectionRef) {\r\n      alert(\r\n        \"ê²Œì‹œíŒì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ì¡°ê±´ì´ ì¶©ì¡±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. (ê´€ë¦¬ì, í•™ê¸‰ì½”ë“œ, ê²Œì‹œíŒ ì°¸ì¡° í™•ì¸)\"\r\n      );\r\n      return;\r\n    }\r\n    const trimmedName = newBoardName.trim();\r\n    if (!trimmedName) return alert(\"ê²Œì‹œíŒ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n    if (boards.some((board) => board.name === trimmedName))\r\n      return alert(\"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²Œì‹œíŒ ì´ë¦„ì…ë‹ˆë‹¤.\");\r\n    try {\r\n      await addDoc(boardsCollectionRef, {\r\n        // ì´ì œ boardsCollectionRefëŠ” ì˜¬ë°”ë¥´ê²Œ ì°¸ì¡°ë©ë‹ˆë‹¤.\r\n        name: trimmedName,\r\n        isHidden: false,\r\n        createdAt: serverTimestamp(),\r\n        classCode: classCode,\r\n      });\r\n      refetchBoards();\r\n      setNewBoardName(\"\");\r\n    } catch (error) {\r\n      console.error(\"Error adding board:\", error);\r\n      alert(\"ê²Œì‹œíŒ ì¶”ê°€ ì˜¤ë¥˜.\");\r\n    }\r\n  };\r\n\r\n  const handleStartEditBoard = (board) => {\r\n    setEditingBoardId(board.id);\r\n    setEditingBoardName(board.name);\r\n  };\r\n  const handleCancelEditBoard = () => {\r\n    setEditingBoardId(null);\r\n    setEditingBoardName(\"\");\r\n  };\r\n  const handleUpdateBoardNameInput = (e) => {\r\n    setEditingBoardName(e.target.value);\r\n  };\r\n\r\n  const handleSaveEditBoard = async (e) => {\r\n    e.preventDefault();\r\n    if (!editingBoardId || !classCode || !currentUserIsAdmin) return;\r\n    const trimmedName = editingBoardName.trim();\r\n    if (!trimmedName) return alert(\"ê²Œì‹œíŒ ì´ë¦„ì€ ë¹„ì›Œë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n    if (\r\n      boards.some(\r\n        (board) => board.id !== editingBoardId && board.name === trimmedName\r\n      )\r\n    )\r\n      return alert(\"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.\");\r\n    const boardRef = doc(\r\n      db,\r\n      \"classes\",\r\n      classCode,\r\n      \"learningBoards\",\r\n      editingBoardId\r\n    );\r\n    try {\r\n      await updateDoc(boardRef, {\r\n        name: trimmedName,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      refetchBoards();\r\n      handleCancelEditBoard();\r\n    } catch (error) {\r\n      console.error(\"Error updating board name:\", error);\r\n      alert(\"ê²Œì‹œíŒ ì´ë¦„ ìˆ˜ì • ì˜¤ë¥˜.\");\r\n    }\r\n  };\r\n\r\n  const handleHideBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    const boardRef = doc(db, \"classes\", classCode, \"learningBoards\", boardId);\r\n    try {\r\n      await updateDoc(boardRef, {\r\n        isHidden: true,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      refetchBoards();\r\n      if (selectedBoard && selectedBoard.id === boardId) setSelectedBoard(null);\r\n    } catch (error) {\r\n      console.error(\"Error hiding board:\", error);\r\n    }\r\n  };\r\n\r\n  const handleRestoreBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    const boardRef = doc(db, \"classes\", classCode, \"learningBoards\", boardId);\r\n    try {\r\n      await updateDoc(boardRef, {\r\n        isHidden: false,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      refetchBoards();\r\n    } catch (error) {\r\n      console.error(\"Error restoring board:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    const boardToDelete = boards.find((b) => b.id === boardId);\r\n    if (\r\n      window.confirm(\r\n        `'${boardToDelete?.name}' ê²Œì‹œíŒê³¼ ëª¨ë“  ê²Œì‹œê¸€ì„ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`\r\n      )\r\n    ) {\r\n      try {\r\n        const boardRef = doc(\r\n          db,\r\n          \"classes\",\r\n          classCode,\r\n          \"learningBoards\",\r\n          boardId\r\n        );\r\n        const postsRef = collection(boardRef, \"posts\");\r\n        const postsSnapshot = await getDocs(postsRef);\r\n        const batch = writeBatch(db);\r\n        postsSnapshot.docs.forEach((postDoc) => batch.delete(postDoc.ref));\r\n        batch.delete(boardRef);\r\n        await batch.commit();\r\n        refetchBoards();\r\n        if (selectedBoard && selectedBoard.id === boardId)\r\n          setSelectedBoard(null);\r\n      } catch (error) {\r\n        console.error(\"Error deleting board:\", error);\r\n        alert(\"ê²Œì‹œíŒ ì‚­ì œ ì˜¤ë¥˜.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const boardsForGeneralSelection = (boards || []).filter((board) => !board.isHidden);\r\n  const allBoardsForHiddenViewSelection = boards || [];\r\n\r\n  // ì»¨í…Œì´ë„ˆ í´ë˜ìŠ¤ ì„¤ì • ìˆ˜ì •\r\n  const containerClasses = `learning-board-container ${\r\n    isFullScreenMode ? \"full-width-mode\" : \"\"\r\n  } ${showAdminPanel && currentUserIsAdmin ? \"admin-panel-active\" : \"\"}`;\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      <div className=\"main-board\">\r\n        {currentUserIsAdmin && (\r\n          <button className=\"admin-panel-toggle-btn\" onClick={toggleAdminPanel}>\r\n            {showAdminPanel ? \"ê´€ë¦¬ì ë‹«ê¸°\" : \"ê´€ë¦¬ì ì—´ê¸°\"}\r\n          </button>\r\n        )}\r\n\r\n        <h1>í•™ìŠµ ê²Œì‹œíŒ {classCode && `(í•™ê¸‰: ${classCode})`}</h1>\r\n\r\n        <div className=\"board-actions\">\r\n          <button\r\n            className={`write-btn ${\r\n              isWriting && showBoardSelection ? \"active\" : \"\"\r\n            }`}\r\n            onClick={handleWriteClick}\r\n          >\r\n            ê¸€ì“°ê¸°\r\n          </button>\r\n          <button\r\n            className={`view-btn ${\r\n              !isWriting && showBoardSelection ? \"active\" : \"\"\r\n            }`}\r\n            onClick={handleViewClick}\r\n          >\r\n            ê¸€ë³´ê¸°\r\n          </button>\r\n          {currentUserIsAdmin && (\r\n            <button\r\n              className={`hidden-boards-toggle-btn ${\r\n                showHiddenBoardsView ? \"active\" : \"\"\r\n              }`}\r\n              onClick={toggleHiddenBoardView}\r\n            >\r\n              ìˆ¨ê¹€ ê´€ë¦¬ ({boards.filter((b) => b.isHidden).length})\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"board-content-area\">\r\n          {showBoardSelection && !showHiddenBoardsView && (\r\n            <div className=\"board-selection\">\r\n              <h2>\r\n                {isWriting ? \"ê¸€ ì‘ì„±í•  ê²Œì‹œíŒ ì„ íƒ\" : \"ì¡°íšŒí•  ê²Œì‹œíŒ ì„ íƒ\"}\r\n              </h2>\r\n              <div className=\"board-buttons-container\">\r\n                {boardsForGeneralSelection.length > 0 ? (\r\n                  boardsForGeneralSelection.map((board) => (\r\n                    <div key={board.id} className=\"board-button-item\">\r\n                      <button\r\n                        className={`board-btn ${\r\n                          selectedBoard?.id === board.id ? \"selected\" : \"\"\r\n                        }`}\r\n                        onClick={() => handleBoardSelect(board.id, false)}\r\n                        title={\r\n                          board.isHidden ? `${board.name} (ìˆ¨ê¹€)` : board.name\r\n                        }\r\n                      >\r\n                        <span className=\"board-name\">{board.name}</span>\r\n                        {currentUserIsAdmin && board.isHidden && (\r\n                          <span className=\"hidden-icon\" title=\"ìˆ¨ê²¨ì§„ ê²Œì‹œíŒ\">\r\n                            ğŸ‘ï¸\r\n                          </span>\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p className=\"info-message small\">\r\n                    {boardsLoading\r\n                      ? \"ê²Œì‹œíŒ ëª©ë¡ ë¡œë”© ì¤‘...\"\r\n                      : \"í‘œì‹œí•  ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {showHiddenBoardsView && currentUserIsAdmin && (\r\n            <div className=\"hidden-boards-list admin-section\">\r\n              <h2>ìˆ¨ê¹€ ê²Œì‹œíŒ ê´€ë¦¬ ë° ë³´ê¸°/ì“°ê¸°</h2>\r\n              {allBoardsForHiddenViewSelection.length === 0 && (\r\n                <p className=\"info-message small\">\r\n                  {boardsLoading\r\n                    ? \"ê²Œì‹œíŒ ëª©ë¡ ë¡œë”© ì¤‘...\"\r\n                    : \"ìƒì„±ëœ ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.\"}\r\n                </p>\r\n              )}\r\n              <div className=\"board-buttons-container\">\r\n                {allBoardsForHiddenViewSelection.map((board) => (\r\n                  <div\r\n                    key={`hidden-view-${board.id}`}\r\n                    className=\"board-button-item\"\r\n                  >\r\n                    <button\r\n                      className={`board-btn ${\r\n                        selectedBoard?.id === board.id ? \"selected\" : \"\"\r\n                      } ${board.isHidden ? \"hidden-board-for-admin\" : \"\"}`}\r\n                      onClick={() => handleBoardSelect(board.id, true)}\r\n                      title={\r\n                        board.isHidden\r\n                          ? `${board.name} (ìˆ¨ê²¨ì§„ ê²Œì‹œíŒ)`\r\n                          : board.name\r\n                      }\r\n                    >\r\n                      {board.isHidden ? \"ğŸ”’\" : \"ğŸ“‚\"} {board.name}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {selectedBoard && (\r\n                <div\r\n                  className=\"board-actions\"\r\n                  style={{ marginTop: \"1rem\", marginBottom: \"1rem\" }}\r\n                >\r\n                  <button\r\n                    className=\"write-btn\"\r\n                    onClick={() => setIsWriting(true)}\r\n                  >\r\n                    '{selectedBoard.name}'ì— ê¸€ì“°ê¸°\r\n                  </button>\r\n                  <button\r\n                    className=\"view-btn\"\r\n                    onClick={() => setIsWriting(false)}\r\n                  >\r\n                    '{selectedBoard.name}' ê¸€ë³´ê¸°\r\n                  </button>\r\n                </div>\r\n              )}\r\n              <h3>ìˆ¨ê¹€/ë³µêµ¬/ì‚­ì œ ì²˜ë¦¬:</h3>\r\n              {boards.length === 0 ? (\r\n                <p className=\"info-message small\">ê´€ë¦¬í•  ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n              ) : (\r\n                <ul>\r\n                  {boards\r\n                    .sort((a, b) => a.name.localeCompare(b.name))\r\n                    .map((board) => (\r\n                      <li\r\n                        key={`manage-${board.id}`}\r\n                        className={`hidden-board-item ${\r\n                          board.isHidden ? \"item-is-hidden\" : \"item-is-visible\"\r\n                        }`}\r\n                      >\r\n                        <span>\r\n                          {board.name} (\r\n                          {board.isHidden ? \"ìˆ¨ê¹€ ìƒíƒœ\" : \"ê³µê°œ ìƒíƒœ\"})\r\n                        </span>\r\n                        <div className=\"hidden-board-actions\">\r\n                          {board.isHidden ? (\r\n                            <button\r\n                              className=\"restore-board-btn action-btn\"\r\n                              title={`${board.name} ë³µêµ¬`}\r\n                              onClick={() => handleRestoreBoard(board.id)}\r\n                            >\r\n                              âœ… ê³µê°œë¡œ\r\n                            </button>\r\n                          ) : (\r\n                            <button\r\n                              className=\"hide-board-btn action-btn\"\r\n                              title={`${board.name} ìˆ¨ê¸°ê¸°`}\r\n                              onClick={() => handleHideBoard(board.id)}\r\n                            >\r\n                              ğŸ‘ï¸â€ğŸ—¨ï¸ ìˆ¨ê¸°ê¸°\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            className=\"delete-board-btn action-btn\"\r\n                            title={`${board.name} ì˜êµ¬ ì‚­ì œ`}\r\n                            onClick={() => handleDeleteBoard(board.id)}\r\n                          >\r\n                            âŒ ì‚­ì œ\r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          )}\r\n          {isWriting &&\r\n            selectedBoard &&\r\n            (!selectedBoard.isHidden || currentUserIsAdmin) && (\r\n              <div className=\"post-form-container\">\r\n                <h2>\r\n                  {selectedBoard.name}ì— ê¸€ì“°ê¸°{\" \"}\r\n                  {selectedBoard.isHidden ? \"(ìˆ¨ê¹€ ê²Œì‹œíŒ)\" : \"\"}\r\n                </h2>\r\n                <form onSubmit={handlePostSubmit} className=\"post-form\">\r\n                  <div className=\"form-group\">\r\n                    <label>ì œëª©</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newPost.title}\r\n                      onChange={(e) =>\r\n                        setNewPost({ ...newPost, title: e.target.value })\r\n                      }\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>ë‚´ìš©</label>\r\n                    <textarea\r\n                      value={newPost.content}\r\n                      onChange={(e) =>\r\n                        setNewPost({ ...newPost, content: e.target.value })\r\n                      }\r\n                      required\r\n                      rows=\"8\"\r\n                    />\r\n                  </div>\r\n                  <button type=\"submit\" className=\"submit-btn\">\r\n                    ê²Œì‹œí•˜ê¸°\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            )}\r\n          {isWriting &&\r\n            selectedBoard &&\r\n            selectedBoard.isHidden &&\r\n            !currentUserIsAdmin &&\r\n            !showHiddenBoardsView && (\r\n              <p className=\"info-message\">\r\n                ì„ íƒí•œ ê²Œì‹œíŒì€ ìˆ¨ê²¨ì ¸ ìˆì–´ ê¸€ì„ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\r\n              </p>\r\n            )}\r\n          {isWriting && !selectedBoard && (\r\n            <p className=\"info-message\">\r\n              ê¸€ì„ ì‘ì„±í•  ê²Œì‹œíŒì„ ì„ íƒí•´ì£¼ì„¸ìš”. (ìƒë‹¨ ëª©ë¡ì—ì„œ ì„ íƒ)\r\n            </p>\r\n          )}\r\n          {!isWriting &&\r\n            selectedBoard &&\r\n            (!selectedBoard.isHidden ||\r\n              (currentUserIsAdmin && showHiddenBoardsView)) && (\r\n              <div className=\"posts-container\">\r\n                <h2>\r\n                  {selectedBoard.name} ê¸€ ëª©ë¡{\" \"}\r\n                  {selectedBoard.isHidden ? \"(ìˆ¨ê¹€ ê²Œì‹œíŒ - ê´€ë¦¬ì ë·°)\" : \"\"}\r\n                </h2>\r\n                {postsLoading ? (\r\n                  <p className=\"info-message small\">ê²Œì‹œê¸€ ë¡œë”© ì¤‘...</p>\r\n                ) : (selectedBoardPosts?.length || 0) === 0 ? (\r\n                  <p className=\"no-posts\">ì•„ì§ ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                ) : (\r\n                  <div className=\"posts-list\">\r\n                    {selectedBoardPosts.map((post) => (\r\n                      <div key={post.id} className=\"post-card\">\r\n                        <h3>{post.title}</h3>\r\n                        <div className=\"post-meta\">\r\n                          <span>ì‘ì„±ì: {post.author || \"ì•Œ ìˆ˜ ì—†ìŒ\"}</span>\r\n                          <span>ì‘ì„±ì¼: {formatDate(post.timestamp)}</span>\r\n                        </div>\r\n                        <p className=\"post-content\">{post.content}</p>\r\n                        <div className=\"post-stats\">\r\n                          <div className=\"likes-container\">\r\n                            <button\r\n                              className={`like-btn ${\r\n                                post.likedBy?.includes(currentUserId)\r\n                                  ? \"active\"\r\n                                  : \"\"\r\n                              } ${\r\n                                post.authorId === currentUserId\r\n                                  ? \"disabled\"\r\n                                  : \"\"\r\n                              }`}\r\n                              onClick={() =>\r\n                                handleLike(selectedBoard.id, post.id)\r\n                              }\r\n                              disabled={\r\n                                post.likedBy?.includes(currentUserId) ||\r\n                                post.dislikedBy?.includes(currentUserId) ||\r\n                                post.authorId === currentUserId\r\n                              }\r\n                            >\r\n                              ğŸ‘ ì¢‹ì•„ìš” {post.likes || 0}\r\n                            </button>\r\n                            <button\r\n                              className={`dislike-btn ${\r\n                                post.dislikedBy?.includes(currentUserId)\r\n                                  ? \"active\"\r\n                                  : \"\"\r\n                              } ${\r\n                                post.authorId === currentUserId\r\n                                  ? \"disabled\"\r\n                                  : \"\"\r\n                              }`}\r\n                              onClick={() =>\r\n                                handleDislike(selectedBoard.id, post.id)\r\n                              }\r\n                              disabled={\r\n                                post.likedBy?.includes(currentUserId) ||\r\n                                post.dislikedBy?.includes(currentUserId) ||\r\n                                post.authorId === currentUserId\r\n                              }\r\n                            >\r\n                              ğŸ‘ ì‹«ì–´ìš” {post.dislikes || 0}\r\n                            </button>\r\n                          </div>\r\n                          <div className=\"coupon-info\">\r\n                            <span>íšë“ ì¿ í°: {post.coupons || 0}ê°œ</span>\r\n                            <span>\r\n                              ì‹¤íš¨ ì¢‹ì•„ìš”:{\" \"}\r\n                              {(post.likes || 0) - (post.dislikes || 0)}\r\n                            </span>\r\n                            {post.adminCouponGiven && !currentUserIsAdmin && (\r\n                              <span\r\n                                className=\"admin-verified-badge\"\r\n                                title=\"ê´€ë¦¬ìê°€ í™•ì¸í•˜ê³  ì¿ í°ì„ ì§€ê¸‰í•œ ê¸€ì…ë‹ˆë‹¤.\"\r\n                              >\r\n                                âœ¨ ê´€ë¦¬ì í™•ì¸ ì™„ë£Œ\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          {currentUserIsAdmin && (\r\n                            <div className=\"admin-coupon-controls\">\r\n                              <h4>\r\n                                ê´€ë¦¬ì ì¿ í° ì§€ê¸‰ (ê¸€ ID: {post.id.slice(-4)})\r\n                              </h4>\r\n                              {post.adminCouponGiven ? (\r\n                                <p className=\"coupon-given-message\">\r\n                                  âœ… ì´ ê¸€ì—ëŠ” ê´€ë¦¬ì ì¿ í°ì´ ì´ë¯¸\r\n                                  ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.\r\n                                </p>\r\n                              ) : (\r\n                                <>\r\n                                  <div className=\"coupon-buttons\">\r\n                                    {[1, 3, 5].map((amount) => (\r\n                                      <button\r\n                                        key={amount}\r\n                                        onClick={() =>\r\n                                          handleGiveCoupons(\r\n                                            selectedBoard.id,\r\n                                            post.id,\r\n                                            amount\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        +{amount} ì¿ í°\r\n                                      </button>\r\n                                    ))}\r\n                                  </div>\r\n                                  <div className=\"custom-coupon\">\r\n                                    <input\r\n                                      type=\"number\"\r\n                                      min=\"1\"\r\n                                      value={\r\n                                        customCouponAmount === 0\r\n                                          ? \"\"\r\n                                          : customCouponAmount\r\n                                      }\r\n                                      onChange={(e) => {\r\n                                        const val = parseInt(e.target.value);\r\n                                        setCustomCouponAmount(\r\n                                          Number.isNaN(val) ? 0 : val\r\n                                        );\r\n                                      }}\r\n                                      placeholder=\"ì§ì ‘ ì…ë ¥\"\r\n                                    />\r\n                                    <button\r\n                                      onClick={() =>\r\n                                        handleGiveCoupons(\r\n                                          selectedBoard.id,\r\n                                          post.id,\r\n                                          customCouponAmount\r\n                                        )\r\n                                      }\r\n                                      disabled={customCouponAmount <= 0}\r\n                                    >\r\n                                      ì§€ê¸‰\r\n                                    </button>\r\n                                  </div>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          {!isWriting &&\r\n            selectedBoard &&\r\n            selectedBoard.isHidden &&\r\n            !currentUserIsAdmin &&\r\n            !showHiddenBoardsView && (\r\n              <p className=\"info-message\">\r\n                ì´ ê²Œì‹œíŒì€ í˜„ì¬ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\r\n              </p>\r\n            )}\r\n          {!isWriting &&\r\n            !selectedBoard &&\r\n            !showHiddenBoardsView &&\r\n            !showBoardSelection && (\r\n              <p className=\"info-message\">\r\n                ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìƒë‹¨ì˜ 'ê¸€ì“°ê¸°' ë˜ëŠ” 'ê¸€ë³´ê¸°' ë²„íŠ¼ì„\r\n                í´ë¦­í•˜ì—¬ ê²Œì‹œíŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.\r\n              </p>\r\n            )}\r\n        </div>\r\n      </div>\r\n\r\n      {currentUserIsAdmin && (\r\n        <div\r\n          className={`admin-panel ${showAdminPanel ? \"visible\" : \"\"}`}\r\n          style={{\r\n            // ë” ê°•ë ¥í•œ ìˆ¨ê¹€ ì²˜ë¦¬\r\n            right: showAdminPanel ? \"0px\" : \"-100vw\",\r\n            transition: \"right 0.4s ease-in-out\",\r\n            display: showAdminPanel ? \"block\" : \"none\",\r\n            visibility: showAdminPanel ? \"visible\" : \"hidden\",\r\n            opacity: showAdminPanel ? 1 : 0,\r\n          }}\r\n        >\r\n          <button className=\"admin-panel-close-btn\" onClick={toggleAdminPanel}>\r\n            Ã—\r\n          </button>\r\n          <h2>ê´€ë¦¬ì ê¸°ëŠ¥</h2>\r\n          <div className=\"admin-section board-management\">\r\n            <h3>ê²Œì‹œíŒ ê´€ë¦¬ (ìƒì„±/ì´ë¦„ë³€ê²½)</h3>\r\n            <form onSubmit={handleAddBoard} className=\"add-board-form\">\r\n              <input\r\n                type=\"text\"\r\n                value={newBoardName}\r\n                onChange={(e) => setNewBoardName(e.target.value)}\r\n                placeholder=\"ìƒˆ ê²Œì‹œíŒ ì´ë¦„\"\r\n                required\r\n              />\r\n              <button type=\"submit\" className=\"add-board-btn\">\r\n                ì¶”ê°€\r\n              </button>\r\n            </form>\r\n            <ul className=\"admin-board-list\">\r\n              {[...boards]\r\n                .sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\"))\r\n                .map((board) => (\r\n                  <li\r\n                    key={board.id}\r\n                    className={`admin-board-manage-item ${\r\n                      board.isHidden ? \"hidden\" : \"\"\r\n                    }`}\r\n                  >\r\n                    {editingBoardId === board.id ? (\r\n                      <form\r\n                        onSubmit={handleSaveEditBoard}\r\n                        className=\"edit-board-form\"\r\n                      >\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingBoardName}\r\n                          onChange={handleUpdateBoardNameInput}\r\n                          autoFocus\r\n                        />\r\n                        <button\r\n                          type=\"submit\"\r\n                          className=\"save-board-btn action-btn\"\r\n                        >\r\n                          ğŸ’¾\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"cancel-edit-btn action-btn\"\r\n                          onClick={handleCancelEditBoard}\r\n                        >\r\n                          â†©ï¸\r\n                        </button>\r\n                      </form>\r\n                    ) : (\r\n                      <>\r\n                        <span>\r\n                          {board.name} {board.isHidden ? \"(ìˆ¨ê¹€)\" : \"\"}\r\n                        </span>\r\n                        <div className=\"admin-board-item-actions\">\r\n                          <button\r\n                            className=\"edit-board-btn action-btn\"\r\n                            title={`${board.name} ì´ë¦„ ìˆ˜ì •`}\r\n                            onClick={() => handleStartEditBoard(board)}\r\n                          >\r\n                            âœï¸\r\n                          </button>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n          </div>\r\n          <div className=\"admin-section admin-stats\">\r\n            <h3>í†µê³„</h3>\r\n            <ul>\r\n              <li>\r\n                ì´ ê²Œì‹œíŒ (ê³µê°œ): {boards.filter((b) => !b.isHidden).length}ê°œ\r\n              </li>\r\n              <li>\r\n                ì´ ê²Œì‹œíŒ (ìˆ¨ê¹€): {boards.filter((b) => b.isHidden).length}ê°œ\r\n              </li>\r\n              <li>(ì„ íƒëœ ê²Œì‹œíŒ) ì´ ê²Œì‹œê¸€: {selectedBoardPosts?.length || 0} ê°œ</li>\r\n              <li>\r\n                (ì„ íƒëœ ê²Œì‹œíŒ) ì´ íšë“ ì¿ í°:{\" \"}\r\n                {(selectedBoardPosts || []).reduce(\r\n                  (sum, post) => sum + (post.coupons || 0),\r\n                  0\r\n                )}{\" \"}\r\n                ê°œ\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LearningBoard;"],"names":["formatDate","isoString","Date","toLocaleString","year","month","day","hour","minute","error","console","calculateCouponChange","postData","interactionType","userId","likes","dislikes","likedBy","dislikedBy","userHasLiked","includes","userHasDisliked","oldEffectiveLikes","newEffectiveLikes","prevThreshold","Math","max","floor","LearningBoard","userDoc","currentUser","isAdmin","addCouponsToUser","loading","authLoading","useAuth","currentUserId","id","classCode","selectedBoard","setSelectedBoard","useState","isWriting","setIsWriting","showBoardSelection","setShowBoardSelection","newPost","setNewPost","title","content","customCouponAmount","setCustomCouponAmount","newBoardName","setNewBoardName","showAdminPanel","setShowAdminPanel","showHiddenBoardsView","setShowHiddenBoardsView","editingBoardId","setEditingBoardId","editingBoardName","setEditingBoardName","isFullScreenMode","setIsFullScreenMode","boardsCollectionRef","useMemo","collection","db","boardsQueryFn","useCallback","async","boardsPathRef","q","query","orderBy","limit","getDocs","docs","map","doc","_objectSpread","data","isHidden","boards","boardsLoading","refetch","refetchBoards","usePolling","interval","enabled","deps","postsQueryFn","postsCollectionRef","_doc$data$timestamp","adminCouponGiven","coupons","Number","Array","isArray","timestamp","toDate","toISOString","selectedBoardPosts","postsLoading","refetchPosts","currentUserIsAdmin","useEffect","_jsx","className","children","_jsxs","name","handleBoardSelect","boardId","fromHiddenView","arguments","length","undefined","board","find","b","adminAccess","alert","toggleAdminPanel","prev","logger","log","updatePostInteraction","postId","updateType","interactionValue","postRef","runTransaction","_postData$likedBy","_postData$dislikedBy","postDoc","transaction","get","exists","updates","couponChange","arrayUnion","increment","arrayRemove","updatedAt","serverTimestamp","update","authorId","concat","slice","message","handleGiveCoupons","amount","handleCancelEditBoard","handleUpdateBoardNameInput","e","target","value","handleSaveEditBoard","preventDefault","trimmedName","trim","some","boardRef","updateDoc","boardsForGeneralSelection","filter","allBoardsForHiddenViewSelection","containerClasses","onClick","handleWriteClick","handleViewClick","toggleHiddenBoardView","nextShowHiddenBoardsView","style","marginTop","marginBottom","sort","a","localeCompare","handleRestoreBoard","handleHideBoard","boardToDelete","window","confirm","postsRef","postsSnapshot","batch","writeBatch","forEach","delete","ref","commit","handleDeleteBoard","onSubmit","author","nickname","addDoc","type","onChange","required","rows","post","_post$likedBy","_post$likedBy2","_post$dislikedBy","_post$dislikedBy2","_post$likedBy3","_post$dislikedBy3","handleLike","disabled","handleDislike","_Fragment","min","val","parseInt","isNaN","placeholder","right","transition","display","visibility","opacity","createdAt","autoFocus","handleStartEditBoard","reduce","sum"],"ignoreList":[],"sourceRoot":""}