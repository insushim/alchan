"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[530],{9530(e,t,a){a.r(t),a.d(t,{default:()=>Q});var s=a(2555),n=a(5043),r=a(5016),l=a(2419),o=a(1662),i=a(6648),d=a(6794),c=a(2029),m=a(920),u=a(773),x=a(3242),b=a(4919),h=a(614),p=a(8343),v=a(9270),g=a(5452),y=a(579);const f=async e=>{if(!e)return null;try{const t=(0,l.rJ)(l.db,"users"),a=(0,l.P)(t,(0,l._M)("classCode","==",e),(0,l._M)("isAdmin","==",!0),(0,l.AB)(1)),n=await(0,l.GG)(a);if(!n.empty){const e=n.docs[0];return(0,s.A)({id:e.id},e.data())}return null}catch(t){return g.vF.error("\uc120\uc0dd\ub2d8 \uacc4\uc815 \uc870\ud68c \uc624\ub958:",t),null}},j="font-sans bg-transparent p-8 min-h-0",N=e=>"px-5 py-4 rounded-xl mb-7 text-center text-base font-medium shadow-sm ".concat("error"===e?"text-red-400 bg-red-500/10 border border-red-500/30":"text-emerald-400 bg-emerald-500/10 border border-emerald-500/30"),w="grid gap-7 w-full",D="bg-[rgba(20,20,35,0.6)] shadow-[0_6px_20px_rgba(0,0,0,0.2)] rounded-2xl p-8 border border-white/5 backdrop-blur-[10px]",C="flex items-center gap-4 mb-6 pb-5 border-b-2 border-white/5",k="text-[26px] font-bold text-white tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",A="flex border-b-2 border-white/10 mb-5 gap-2",I=e=>"px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ".concat(e?"bg-indigo-500/20 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan drop-shadow-[0_0_5px_rgba(0,255,242,0.3)]":"font-medium text-slate-400 border-b-[3px] border-b-transparent"),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return"text-white px-5 py-3 rounded-[10px] border border-white/10 text-[15px] font-semibold transition-all duration-200 ".concat(e?"cursor-not-allowed opacity-50":"cursor-pointer shadow-[0_4px_12px_rgba(0,0,0,0.3)] hover:-translate-y-0.5 hover:brightness-110"," ").concat("primary"===t?"bg-sky-700/80":"danger"===t?"bg-red-600/80":"success"===t?"bg-emerald-600/80":"bg-gray-600")},_="text-center text-slate-400 py-8 text-base italic",P="w-full py-3.5 px-4 bg-black/20 border-2 border-white/10 rounded-[10px] mb-4 text-base text-white transition-colors duration-200 focus:outline-none focus:border-cyber-cyan focus:ring-2 focus:ring-cyber-cyan/10",S="fixed inset-0 bg-black/80 flex items-center justify-center z-[1000] backdrop-blur-[8px]",E="bg-[#1a1a2e] p-8 rounded-2xl w-[90%] max-w-[450px] relative shadow-[0_20px_60px_rgba(0,0,0,0.6)] border border-white/10 text-slate-200",R="text-2xl font-bold mb-5 text-white drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",M="absolute top-5 right-5 bg-transparent border-none cursor-pointer text-slate-400 transition-colors duration-200 hover:text-white",G=e=>"number"===typeof e?Math.round(e).toLocaleString():"0",O=(e,t,a)=>{if(e<=0||!t||a<=0)return{interest:0,total:e};const s=e*Math.pow(1+t/100,a),n=s-e;return{interest:Math.round(n),total:Math.round(s)}},V=(e,t)=>Math.round(e*(t/100)),T={parking:(0,y.jsx)(c.A,{size:28,className:"text-sky-700"}),deposits:(0,y.jsx)(m.A,{size:28,className:"text-emerald-600"}),savings:(0,y.jsx)(u.A,{size:28,className:"text-violet-600"}),loans:(0,y.jsx)(x.A,{size:28,className:"text-red-600"})},H=e=>{let{product:t,onCancel:a,onMaturity:s}=e;const n=t.maturityDate&&new Date>=t.maturityDate,r=t.maturityDate?Math.max(0,(0,o.c)(t.maturityDate,new Date)):0,{interest:l,total:d}=(t.rate,O(t.balance,t.rate,t.termInDays)),c=V(t.balance,t.rate);return(0,y.jsxs)("div",{className:"p-5 border-2 rounded-xl mb-4 shadow-[0_2px_8px_rgba(0,0,0,0.2)] ".concat(n?"border-emerald-500/50 bg-emerald-500/10":"border-white/10 bg-black/20"),children:[(0,y.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"font-bold text-lg text-slate-200 mb-1",children:t.name}),n&&(0,y.jsx)("span",{className:"bg-emerald-500 text-white px-3 py-1 rounded-full text-[13px] font-semibold",children:"\ub9cc\uae30"})]}),(0,y.jsxs)("span",{className:"text-xl font-bold text-cyber-cyan",children:[G(t.balance),"\uc6d0"]})]}),(0,y.jsxs)("div",{className:"text-[15px] text-slate-400 mt-4 grid gap-2.5 bg-black/20 p-4 rounded-lg",children:[(0,y.jsxs)("div",{className:"flex justify-between",children:[(0,y.jsx)("span",{className:"font-medium",children:"\uae08\ub9ac (\uc77c):"}),(0,y.jsxs)("span",{className:"font-bold text-cyber-cyan",children:[t.rate,"%"]})]}),(0,y.jsxs)("div",{className:"flex justify-between",children:[(0,y.jsx)("span",{className:"font-medium",children:"\uc77c\uc77c \uc774\uc790:"}),(0,y.jsxs)("span",{className:"font-bold text-emerald-400",children:["+",G(c),"\uc6d0/\uc77c"]})]}),t.maturityDate&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex justify-between",children:[(0,y.jsx)("span",{className:"font-medium",children:"\ub9cc\uae30\uc77c:"}),(0,y.jsx)("span",{className:"font-semibold text-slate-200",children:(0,i.GP)(t.maturityDate,"yyyy-MM-dd")})]}),!n&&(0,y.jsxs)("div",{className:"flex justify-between",children:[(0,y.jsx)("span",{className:"font-medium",children:"\ub0a8\uc740 \uae30\uac04:"}),(0,y.jsxs)("span",{className:"font-semibold text-cyber-cyan",children:[r,"\uc77c"]})]})]})]}),(0,y.jsx)("div",{className:"border-t border-dashed border-white/10 my-4"}),(0,y.jsxs)("div",{className:"text-[15px] text-slate-200 grid gap-2.5 bg-cyber-cyan/5 p-4 rounded-lg border border-cyber-cyan/10",children:[(0,y.jsxs)("div",{className:"flex justify-between",children:[(0,y.jsx)("span",{className:"font-semibold",children:"\ub9cc\uae30 \uc2dc \uc774\uc790 (\uc138\uc804):"}),(0,y.jsxs)("span",{className:"font-bold text-emerald-400 text-[17px]",children:["+",G(l),"\uc6d0"]})]}),(0,y.jsxs)("div",{className:"flex justify-between text-[17px]",children:[(0,y.jsx)("span",{className:"font-bold",children:"\ub9cc\uae30 \uc2dc \ucd1d\uc561:"}),(0,y.jsxs)("span",{className:"font-bold text-cyber-cyan",children:[G(d),"\uc6d0"]})]})]}),(0,y.jsx)("div",{className:"mt-5 text-right",children:n?(0,y.jsxs)("button",{onClick:s,className:F(!1,"success")+" px-5 py-2.5 text-[15px]",children:["\ub9cc\uae30 \uc218\ub839 (",G(d),"\uc6d0)"]}):(0,y.jsx)("button",{onClick:a,className:F(!1,"danger")+" px-5 py-2.5 text-[15px]",children:"loan"===t.type?"\ub300\ucd9c \uc0c1\ud658":"\uc911\ub3c4 \ud574\uc9c0"})})]})},z=e=>{let{product:t,onSubscribe:a}=e;const s=t.dailyRate,{interest:n}=O(1e5,s,t.termInDays);return(0,y.jsxs)("div",{className:"p-5 border-2 border-white/10 rounded-xl mb-3 flex justify-between items-center bg-black/20 shadow-[0_2px_8px_rgba(0,0,0,0.2)] transition-all duration-200",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"font-bold text-lg text-slate-200 mb-2",children:t.name}),(0,y.jsxs)("div",{className:"text-[15px] text-slate-400 mb-1.5",children:[(0,y.jsxs)("strong",{className:"text-cyber-cyan",children:["\uc77c ",t.dailyRate,"%"]})," (\uae30\uac04: ",t.termInDays,"\uc77c)"]}),(0,y.jsxs)("div",{className:"text-sm text-emerald-400 font-semibold",children:[(0,y.jsx)(b.A,{size:14,className:"inline mr-1"}),"10\ub9cc\uc6d0 \uac00\uc785 \uc2dc \uc608\uc0c1 \uc774\uc790: +",G(n),"\uc6d0"]})]}),(0,y.jsx)("button",{onClick:a,className:F(!1)+" px-6 py-3 text-base",children:"\uac00\uc785"})]})},L=e=>{let{title:t,icon:a,subscribedProducts:s,availableProducts:r,onSubscribe:l,onCancel:o,onMaturity:i}=e;const[d,c]=(0,n.useState)("subscribed");return(0,y.jsxs)("div",{className:D,children:[(0,y.jsxs)("div",{className:C,children:[a,(0,y.jsx)("h2",{className:k,children:t})]}),(0,y.jsxs)("div",{className:A,children:[(0,y.jsx)("button",{onClick:()=>c("subscribed"),className:I("subscribed"===d),children:"\uac00\uc785\ud55c \uc0c1\ud488"}),(0,y.jsx)("button",{onClick:()=>c("available"),className:I("available"===d),children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488"})]}),(0,y.jsxs)("div",{children:["subscribed"===d&&(s.length>0?s.map(e=>(0,y.jsx)(H,{product:e,onCancel:()=>o(e),onMaturity:()=>i(e)},e.id)):(0,y.jsx)("p",{className:_,children:"\uac00\uc785\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})),"available"===d&&(r.length>0?r.map(e=>(0,y.jsx)(z,{product:e,onSubscribe:()=>l(e)},e.id)):(0,y.jsx)("p",{className:_,children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}))]})]})},B=e=>{let{isOpen:t,onClose:a,product:s,onConfirm:r,isProcessing:l}=e;const[o,i]=(0,n.useState)("");if(!t||!s)return null;const d=parseFloat(o),c=s.dailyRate,{interest:m,total:u}=!isNaN(d)&&d>0?O(d,c,s.termInDays):{interest:0,total:0};return(0,y.jsx)("div",{className:S,onClick:a,children:(0,y.jsxs)("div",{className:E,onClick:e=>e.stopPropagation(),children:[(0,y.jsx)("button",{onClick:a,className:M,"aria-label":"\ub2eb\uae30",children:(0,y.jsx)(h.A,{size:24})}),(0,y.jsxs)("h3",{className:R,children:[s.name," \uac00\uc785"]}),(0,y.jsxs)("div",{className:"mb-5 p-4 bg-cyber-cyan/5 rounded-[10px] border border-cyber-cyan/20",children:[(0,y.jsxs)("div",{className:"text-[15px] text-slate-400 mb-2",children:[(0,y.jsx)("strong",{className:"text-cyber-cyan",children:"\uae08\ub9ac:"})," \uc77c ",s.dailyRate,"% (\uc77c\ubcf5\ub9ac)"]}),(0,y.jsxs)("div",{className:"text-[15px] text-slate-400",children:[(0,y.jsx)("strong",{className:"text-cyber-cyan",children:"\uae30\uac04:"})," ",s.termInDays,"\uc77c"]})]}),(0,y.jsx)("p",{className:"mb-3 text-base font-semibold text-slate-200",children:"\uac00\uc785 \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,y.jsx)("input",{type:"number",value:o,onChange:e=>i(e.target.value),className:P,placeholder:"".concat(G(s.minAmount||0),"\uc6d0 \uc774\uc0c1"),autoFocus:!0}),d>0&&(0,y.jsxs)("div",{className:"mb-5 p-4 bg-emerald-500/10 rounded-[10px] border border-emerald-500/30",children:[(0,y.jsxs)("div",{className:"text-[15px] text-emerald-400 mb-1.5",children:["\uc608\uc0c1 \ub9cc\uae30 \uc774\uc790: ",(0,y.jsxs)("strong",{children:["+",G(m),"\uc6d0"]})]}),(0,y.jsxs)("div",{className:"text-base text-emerald-400 font-bold",children:["\ub9cc\uae30 \uc2dc \ucd1d\uc561: ",G(u),"\uc6d0"]})]}),(0,y.jsx)("button",{onClick:()=>{r(o),i("")},disabled:l||!o,className:F(l||!o)+" w-full text-[17px] py-4",children:l?"\ucc98\ub9ac \uc911...":"\uac00\uc785\ud558\uae30"})]})})},U=e=>{let{balance:t,dailyInterest:a,onDeposit:s,onWithdraw:r,isProcessing:l,userCash:o}=e;const[i,d]=(0,n.useState)("");return(0,y.jsxs)("div",{className:"bg-gradient-to-br from-[rgba(6,78,117,0.85)] to-[rgba(20,40,60,0.9)] text-white shadow-[0_8px_24px_rgba(0,0,0,0.4)] rounded-2xl p-8 border border-[rgba(0,180,216,0.25)] backdrop-blur-[10px]",children:[(0,y.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-5 border-b-2 border-[rgba(0,180,216,0.2)]",children:[(0,y.jsx)(c.A,{size:32,className:"text-cyan-300"}),(0,y.jsx)("h2",{className:"text-[26px] font-bold text-[#e0f7fa] tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]",children:"\ud30c\ud0b9\ud1b5\uc7a5"})]}),(0,y.jsxs)("div",{className:"bg-[rgba(0,180,216,0.15)] px-4 py-3 rounded-[10px] mb-4 backdrop-blur-[10px] flex justify-between items-center border border-[rgba(0,180,216,0.2)]",children:[(0,y.jsx)("span",{className:"text-base font-medium text-slate-400",children:"\ubcf4\uc720 \ud604\uae08"}),(0,y.jsxs)("span",{className:"text-xl font-bold text-[#e0f7fa]",children:[G(o||0),"\uc6d0"]})]}),(0,y.jsxs)("div",{className:"text-[42px] font-bold text-[#e0f7fa] mb-2",children:[G(t),"\uc6d0"]}),(0,y.jsx)("p",{className:"text-base text-[#e0f7fa]/80 mb-4 font-medium",children:"\ub9e4\uc77c \uc774\uc790\uac00 \uc790\ub3d9 \uc9c0\uae09\ub418\ub294 \uc790\uc720 \uc785\ucd9c\uae08 \ud1b5\uc7a5"}),(0,y.jsxs)("div",{className:"bg-[rgba(0,180,216,0.12)] p-4 rounded-[10px] mb-6 backdrop-blur-[10px] border border-[rgba(0,180,216,0.2)]",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,y.jsx)(b.A,{size:20,className:"text-cyan-300"}),(0,y.jsx)("span",{className:"text-[15px] font-semibold text-slate-400",children:"\uc77c\uc77c \uc774\uc790 \uc218\uc775"})]}),(0,y.jsxs)("div",{className:"text-[28px] font-bold text-cyan-300",children:["+",G(a),"\uc6d0/\uc77c"]}),(0,y.jsx)("div",{className:"text-sm mt-1.5 text-slate-400/90",children:"(\uc77c 1% \ubcf5\ub9ac \uae30\uc900)"})]}),(0,y.jsxs)("div",{className:"flex gap-2.5",children:[(0,y.jsx)("input",{type:"number",value:i,onChange:e=>d(e.target.value),placeholder:"\uae08\uc561 \uc785\ub825",className:"flex-1 py-3.5 px-4 bg-black/30 border border-[rgba(0,180,216,0.3)] rounded-[10px] text-[17px] text-white focus:outline-none focus:border-cyber-cyan",disabled:l}),(0,y.jsx)("button",{onClick:()=>{s(i),d("")},disabled:l,className:F(l,"success")+" text-[17px] px-6 py-3.5",children:"\uc785\uae08"}),(0,y.jsx)("button",{onClick:()=>{r(i),d("")},disabled:l,className:F(l)+" !bg-slate-500/50 text-[17px] px-6 py-3.5",children:"\ucd9c\uae08"})]})]})},W=e=>{let{auth:t={},depositProducts:a=[],installmentProducts:r=[],loanProducts:i=[],activeView:c="parking",onViewChange:m,onLoadUserProducts:u,allUserProducts:x=[],onDeleteUserProduct:b}=e;const{user:h,userDoc:D,loading:C,refreshUserDocument:k,isAdmin:A,addCash:I,deductCash:_}=t,P=null===h||void 0===h?void 0:h.uid,[S,E]=(0,n.useState)(!1),[R,M]=(0,n.useState)(null),[H,z]=(0,n.useState)(""),[W,J]=(0,n.useState)(0),[Y,K]=(0,n.useState)(0),[q,Z]=(0,n.useState)([]),[Q,X]=(0,n.useState)([]),[$,ee]=(0,n.useState)([]),[te,ae]=(0,n.useState)({isOpen:!1,product:null,type:""}),[se,ne]=(0,n.useState)((null===D||void 0===D?void 0:D.cash)||0),re=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;M(e),z(t),a&&setTimeout(()=>M(null),a)},le=(0,n.useCallback)(async()=>{if(P){E(!0);try{const t=(0,l.H9)(l.db,"users",P,"financials","parkingAccount"),n=a.length>0?a[0]:null;if(n){const a=await(0,l.x7)(t);if(a.exists()){var e;const s=a.data(),r=null===(e=s.lastInterestDate)||void 0===e?void 0:e.toDate();if(!r||!(0,d.c)(r)){const e=r?(0,o.c)(new Date,r):1;if(e>0){const a=n.dailyRate||.0027,{interest:r}=O(s.balance||0,a,e);r>0&&(await(0,l.mZ)(t,{balance:(0,l.GV)(r),lastInterestDate:(0,l.O5)()}),re("\ud30c\ud0b9\ud1b5\uc7a5 \uc774\uc790 ".concat(G(r),"\uc6d0\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),"success"))}}}else await(0,l.BN)(t,{balance:0,lastInterestDate:(0,l.O5)()})}const r=await(0,l.x7)(t);if(r.exists()){const e=r.data().balance||0;J(e);const t=V(e,1);K(t)}const i=(0,l.rJ)(l.db,"users",P,"products"),c=await(0,l.GG)(i),m=[],u=[],x=[];c.forEach(e=>{var t;const a=(0,s.A)((0,s.A)({id:e.id},e.data()),{},{maturityDate:null!==(t=e.data().maturityDate)&&void 0!==t&&t.toDate?e.data().maturityDate.toDate():e.data().maturityDate});"deposit"===a.type?m.push(a):"savings"===a.type?u.push(a):"loan"===a.type&&x.push(a)}),Z(m),X(u),ee(x)}catch(t){g.vF.error("\ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",t),re("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}finally{E(!1)}}},[P,a]);(0,n.useEffect)(()=>{!C&&P&&le()},[P,C,le]),(0,n.useEffect)(()=>{void 0!==(null===D||void 0===D?void 0:D.cash)&&(ne(D.cash),g.vF.log("[ParkingAccount] currentCash \uc5c5\ub370\uc774\ud2b8:",D.cash))},[null===D||void 0===D?void 0:D.cash]);const oe=(e,t)=>ae({isOpen:!0,product:e,type:t}),ie=()=>ae({isOpen:!1,product:null,type:""}),de=async e=>{g.vF.log("--- handleMaturity \uc2dc\uc791 ---"),g.vF.log("\ucc98\ub9ac\ud560 \uc0c1\ud488:",e);const{id:t,name:a,type:s,balance:n,termInDays:r,rate:o,teacherId:i}=e,d="loan"===s;if(!P)return re("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void g.vF.error("handleMaturity: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=o,{total:m,interest:u}=O(n,c,r);g.vF.log("\uacc4\uc0b0 \uacb0\uacfc: \uc6d0\uae08=".concat(n,", \uc774\uc790=").concat(u,", \ucd1d\uc561=").concat(m));const x=d?"\ub300\ucd9c \ub9cc\uae30 \uc0c1\ud658: \uc6d0\uae08 ".concat(G(n),"\uc6d0 + \uc774\uc790 ").concat(G(u),"\uc6d0 = ").concat(G(m),"\uc6d0\uc744 \uc0c1\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"\ub9cc\uae30 \uc218\ub839: \uc6d0\uae08 ".concat(G(n),"\uc6d0 + \uc774\uc790 ").concat(G(u),"\uc6d0 = ").concat(G(m),"\uc6d0\uc744 \uc218\ub839\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");if(!window.confirm(x))return void g.vF.log("\uc0ac\uc6a9\uc790\uac00 \ub9cc\uae30 \ucc98\ub9ac\ub97c \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.");E(!0),g.vF.log("\ub9cc\uae30 \ucc98\ub9ac \uc2dc\uc791...");let b=i;if(!b){const e=await f(null===D||void 0===D?void 0:D.classCode);if(!e)return re("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","error"),void E(!1);b=e.id}g.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815 ID:",b);try{const e=(0,l.H9)(l.db,"users",P,"products",String(t));g.vF.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,l.c4)(l.db,async t=>{var a,s,n,r;g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const o=(0,l.H9)(l.db,"users",P),i=(0,l.H9)(l.db,"users",b),c=await t.get(o),u=await t.get(i);if(!c.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!u.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const x=null!==(a=null===(s=c.data())||void 0===s?void 0:s.cash)&&void 0!==a?a:0,h=null!==(n=null===(r=u.data())||void 0===r?void 0:r.cash)&&void 0!==n?n:0;if(d){if(x<m)throw new Error("\uc0c1\ud658\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(G(m),"\uc6d0, \ubcf4\uc720: ").concat(G(x),"\uc6d0)"));t.update(o,{cash:(0,l.GV)(-m)}),t.update(i,{cash:(0,l.GV)(m)}),g.vF.log("\ub300\ucd9c \uc0c1\ud658: \ud559\uc0dd -".concat(m,", \uc120\uc0dd\ub2d8 +").concat(m))}else{if(h<m)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \uc9c0\uae09\ud560 \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(G(m),"\uc6d0)"));t.update(o,{cash:(0,l.GV)(m)}),t.update(i,{cash:(0,l.GV)(-m)}),g.vF.log("\ub9cc\uae30 \uc218\ub839: \ud559\uc0dd +".concat(m,", \uc120\uc0dd\ub2d8 -").concat(m))}t.delete(e),g.vF.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5");const r=d?"\ub300\ucd9c \uc0c1\ud658 \uc644\ub8cc: ".concat(G(m),"\uc6d0 (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c \uc774\uccb4)"):"\ub9cc\uae30 \uc218\ub839 \uc644\ub8cc: ".concat(G(m),"\uc6d0 (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c \uc9c0\uae09)");re(r,"success");const o=d?v.gI.LOAN_REPAY:v.gI.DEPOSIT_MATURITY;(0,v.Mx)(l.db,{classCode:null===D||void 0===D?void 0:D.classCode,userId:P,userName:(null===D||void 0===D?void 0:D.name)||"\uc0ac\uc6a9\uc790",type:o,description:d?"\ub300\ucd9c \ub9cc\uae30 \uc0c1\ud658: ".concat(a," (\uc6d0\uae08: ").concat(G(n),", \uc774\uc790: ").concat(G(u),") - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c"):"".concat(a," \ub9cc\uae30 \uc218\ub839 (\uc6d0\uae08: ").concat(G(n),", \uc774\uc790: ").concat(G(u),") - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c"),amount:d?-m:m,metadata:{productName:a,productType:s,principal:n,interest:u,total:m,teacherId:b}}),k&&(g.vF.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),k().then(()=>{g.vF.log("[ParkingAccount] \ub9cc\uae30 \ucc98\ub9ac \ud6c4 userDoc \uac31\uc2e0 \uc644\ub8cc")})),g.vF.log("\uc804\uccb4 \ub370\uc774\ud130 \ub2e4\uc2dc \ub85c\ub4dc"),await le()}catch(h){g.vF.error("\ub9cc\uae30 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",h),re("\ucc98\ub9ac \uc624\ub958: ".concat(h.message),"error"),void 0!==(null===D||void 0===D?void 0:D.cash)&&(g.vF.log("\uc624\ub958 \ubc1c\uc0dd\uc73c\ub85c \ud604\uae08 \ub864\ubc31:",D.cash),ne(D.cash))}finally{E(!1),g.vF.log("--- handleMaturity \uc885\ub8cc ---")}},ce=async e=>{g.vF.log("--- handleCancelEarly \uc2dc\uc791 ---"),g.vF.log("\uc911\ub3c4 \ud574\uc9c0\ud560 \uc0c1\ud488:",e);const{id:t,name:a,type:s,balance:n}=e,r="loan"===s;if(!P)return re("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void g.vF.error("handleCancelEarly: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=r?"\ub300\ucd9c\uae08 ".concat(G(n),"\uc6d0\uc744 \uc0c1\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"'".concat(a,"'\uc744(\ub97c) \uc911\ub3c4 \ud574\uc9c0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? (\uc774\uc790 \uc5c6\uc774 \uc6d0\uae08\ub9cc \ubc18\ud658\ub429\ub2c8\ub2e4)");if(!window.confirm(o))return void g.vF.log("\uc0ac\uc6a9\uc790\uac00 \uc911\ub3c4 \ud574\uc9c0\ub97c \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.");E(!0),g.vF.log("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc2dc\uc791...");let i=e.teacherId;if(!i){const e=await f(null===D||void 0===D?void 0:D.classCode);if(!e)return re("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","error"),void E(!1);i=e.id}g.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815 ID:",i);const d={deposit:[...q],savings:[...Q],loan:[...$]},c=se,m=r?-n:n;ne(e=>e+m),"deposit"===s?Z(e=>e.filter(e=>e.id!==t)):"savings"===s?X(e=>e.filter(e=>e.id!==t)):"loan"===s&&ee(e=>e.filter(e=>e.id!==t));try{const e=(0,l.H9)(l.db,"users",P,"products",String(t));g.vF.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,l.c4)(l.db,async t=>{var a,s,o,d;g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const c=(0,l.H9)(l.db,"users",P),m=(0,l.H9)(l.db,"users",i),u=await t.get(c),x=await t.get(m);if(!u.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!x.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const b=null!==(a=null===(s=u.data())||void 0===s?void 0:s.cash)&&void 0!==a?a:0,h=null!==(o=null===(d=x.data())||void 0===d?void 0:d.cash)&&void 0!==o?o:0;if(g.vF.log("\ud604\uc7ac \ubcf4\uc720 \ud604\uae08 (DB): ".concat(b,", \uc120\uc0dd\ub2d8 \ubcf4\uc720 \ud604\uae08: ").concat(h)),r){if(b<n)throw new Error("\ub300\ucd9c\uae08\uc744 \uc0c1\ud658\ud558\uae30\uc5d0 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");t.update(c,{cash:(0,l.GV)(-n)}),t.update(m,{cash:(0,l.GV)(n)}),g.vF.log("\ub300\ucd9c \uc911\ub3c4 \uc0c1\ud658: \ud559\uc0dd -".concat(n,", \uc120\uc0dd\ub2d8 +").concat(n))}else{if(h<n)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \uc9c0\uae09\ud560 \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(G(n),"\uc6d0)"));t.update(c,{cash:(0,l.GV)(n)}),t.update(m,{cash:(0,l.GV)(-n)}),g.vF.log("\uc911\ub3c4 \ud574\uc9c0: \ud559\uc0dd +".concat(n,", \uc120\uc0dd\ub2d8 -").concat(n))}t.delete(e),g.vF.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),g.vF.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5");const o=r?"\ub300\ucd9c \uc0c1\ud658 \uc644\ub8cc: ".concat(G(n),"\uc6d0 (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c \uc774\uccb4)"):"\uc911\ub3c4 \ud574\uc9c0 \uc644\ub8cc: \uc6d0\uae08 ".concat(G(n),"\uc6d0 \ubc18\ud658 (\uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c \uc9c0\uae09)");re(o,"success");const d=r?v.gI.LOAN_REPAY:v.gI.DEPOSIT_WITHDRAW;(0,v.Mx)(l.db,{classCode:null===D||void 0===D?void 0:D.classCode,userId:P,userName:(null===D||void 0===D?void 0:D.name)||"\uc0ac\uc6a9\uc790",type:d,description:r?"\ub300\ucd9c \uc911\ub3c4 \uc0c1\ud658: ".concat(a," (").concat(G(n),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc73c\ub85c"):"\uc911\ub3c4 \ud574\uc9c0: ".concat(a," (\uc6d0\uae08 ").concat(G(n),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815\uc5d0\uc11c"),amount:m,metadata:{productName:a,productType:s,principal:n,isEarlyCancellation:!0,teacherId:i}}),k&&(g.vF.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),k()),await le()}catch(u){g.vF.error("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",u),re("\ucc98\ub9ac \uc624\ub958: ".concat(u.message),"error"),Z(d.deposit),X(d.savings),ee(d.loan),ne(c)}finally{E(!1),g.vF.log("--- handleCancelEarly \uc885\ub8cc ---")}},me=async e=>{if(A()){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc0c1\ud488(".concat(e.name,")\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){E(!0);try{const t=(0,l.H9)(l.db,"users",e.userId,"products",e.id);await(0,l.kd)(t),re("\uc0c1\ud488\uc774 \uac15\uc81c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success"),le()}catch(t){g.vF.error("\uad00\ub9ac\uc790 \uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",t),re("\uc0ad\uc81c \ucc98\ub9ac \uc624\ub958: ".concat(t.message),"error")}finally{E(!1)}}}else re("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","error")};if(C)return(0,y.jsx)("div",{className:j,children:"\uae08\uc735 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."});if(!h)return(0,y.jsx)("div",{className:j,children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."});const ue=e=>"px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ".concat(e?"bg-cyber-cyan/10 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan":"font-medium text-slate-400 border-b-[3px] border-b-transparent");return(0,y.jsxs)("div",{className:j,children:[(0,y.jsxs)("div",{className:"flex gap-2.5 mb-6 border-b-2 border-white/10 relative",children:[(0,y.jsx)("button",{onClick:()=>m&&m("parking"),className:ue("parking"===c),children:"\ub098\uc758 \uae08\uc735 \ud604\ud669"}),A&&A()&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{onClick:()=>m&&m("admin"),className:ue("admin"===c),children:"\uc0c1\ud488 \uad00\ub9ac"}),(0,y.jsx)("button",{onClick:()=>{m&&m("userProducts"),u&&u()},className:ue("userProducts"===c),children:"\uc720\uc800 \uc0c1\ud488 \uc870\ud68c"})]})]}),R&&(0,y.jsx)("div",{className:N(H),children:R}),"userProducts"===c&&A&&A()&&(0,y.jsxs)("div",{className:"bg-[rgba(20,20,35,0.6)] rounded-2xl p-8 shadow-[0_6px_20px_rgba(0,0,0,0.3)] border border-white/5",children:[(0,y.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:"\uc720\uc800\ubcc4 \uac00\uc785 \uc0c1\ud488 \uc870\ud68c \ubc0f \uad00\ub9ac"}),(0,y.jsx)("p",{className:"text-sm text-slate-400 mb-5",children:"\ud074\ub798\uc2a4 \ub0b4 \ubaa8\ub4e0 \uc720\uc800\uc758 \uac00\uc785 \uc0c1\ud488\uc744 \uc870\ud68c\ud558\uace0 \ud544\uc694\uc2dc \uac15\uc81c \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),0===x.length?(0,y.jsx)("p",{className:"text-center p-10 text-slate-400",children:"\uac00\uc785\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,y.jsxs)("div",{className:"overflow-x-auto",children:[(0,y.jsxs)("table",{className:"w-full border-collapse",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"bg-white/5 border-b-2 border-white/10",children:[(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc0ac\uc6a9\uc790"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc0c1\ud488\uba85"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc885\ub958"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uc794\uc561/\uae08\uc561"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uae08\ub9ac(\uc77c)"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uae30\uac04(\uc77c)"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\ub9cc\uae30\uc77c"}),(0,y.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-slate-400",children:"\uad00\ub9ac"})]})}),(0,y.jsx)("tbody",{children:x.map((e,t)=>{const a="deposit"===e.type?"\uc608\uae08":"savings"===e.type?"\uc801\uae08":"loan"===e.type?"\ub300\ucd9c":"\uae30\ud0c0";return(0,y.jsxs)("tr",{className:"border-b border-white/5",children:[(0,y.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.userName}),(0,y.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.name}),(0,y.jsx)("td",{className:"p-3 text-sm text-slate-200",children:a}),(0,y.jsxs)("td",{className:"p-3 text-sm text-cyber-cyan",children:[(0,p.bL)(e.balance||0),"\uc6d0"]}),(0,y.jsxs)("td",{className:"p-3 text-sm text-slate-200",children:[e.rate,"%"]}),(0,y.jsxs)("td",{className:"p-3 text-sm text-slate-200",children:[e.termInDays,"\uc77c"]}),(0,y.jsx)("td",{className:"p-3 text-sm text-slate-200",children:e.maturityDate?new Date(e.maturityDate).toLocaleDateString("ko-KR"):"-"}),(0,y.jsx)("td",{className:"p-3",children:(0,y.jsx)("button",{onClick:()=>b&&b(e),className:F(!1,"danger")+" text-xs px-3 py-1.5",children:"\uc0ad\uc81c"})})]},"".concat(e.userId,"-").concat(e.id,"-").concat(t))})})]}),(0,y.jsxs)("div",{className:"mt-5 text-right text-slate-400 text-sm",children:["\ucd1d ",x.length,"\uac1c\uc758 \uc0c1\ud488"]})]})]}),"parking"===c&&(0,y.jsxs)("div",{className:w,children:[(0,y.jsx)(U,{balance:W,dailyInterest:Y,onDeposit:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return re("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");E(!0);const a=W,s=se;J(e=>e+t);try{if(!await _(t,"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08: ".concat(G(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");await(0,l.c4)(l.db,async e=>{const a=(0,l.H9)(l.db,"users",P,"financials","parkingAccount");(await e.get(a)).exists()?e.update(a,{balance:(0,l.GV)(t)}):e.set(a,{balance:t,lastInterestDate:(0,l.O5)()})}),re("".concat(G(t),"\uc6d0 \uc785\uae08 \uc644\ub8cc."),"success"),(0,v.Mx)(l.db,{classCode:null===D||void 0===D?void 0:D.classCode,userId:P,userName:(null===D||void 0===D?void 0:D.name)||"\uc0ac\uc6a9\uc790",type:v.gI.PARKING_DEPOSIT,description:"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08 ".concat(G(t),"\uc6d0"),amount:-t,metadata:{parkingBalance:W+t}}),await le()}catch(n){re("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),J(a),ne(s)}finally{E(!1)}},onWithdraw:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return re("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");E(!0);const a=W,s=se;J(e=>e-t);try{await(0,l.c4)(l.db,async e=>{var a,s;const n=(0,l.H9)(l.db,"users",P,"financials","parkingAccount");if((null!==(a=null===(s=(await e.get(n)).data())||void 0===s?void 0:s.balance)&&void 0!==a?a:0)<t)throw new Error("\ud30c\ud0b9\ud1b5\uc7a5 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");e.update(n,{balance:(0,l.GV)(-t)})});if(!await I(t,"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08: ".concat(G(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");re("".concat(G(t),"\uc6d0 \ucd9c\uae08 \uc644\ub8cc."),"success"),(0,v.Mx)(l.db,{classCode:null===D||void 0===D?void 0:D.classCode,userId:P,userName:(null===D||void 0===D?void 0:D.name)||"\uc0ac\uc6a9\uc790",type:v.gI.PARKING_WITHDRAW,description:"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08 ".concat(G(t),"\uc6d0"),amount:t,metadata:{parkingBalance:W-t}}),await le()}catch(n){re("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),J(a),ne(s)}finally{E(!1)}},isProcessing:S,userCash:se}),(0,y.jsx)(L,{title:"\uc608\uae08",icon:T.deposits,subscribedProducts:q,availableProducts:a,onSubscribe:e=>oe(e,"deposits"),onCancel:ce,onMaturity:de,isAdmin:A(),onAdminDelete:me}),(0,y.jsx)(L,{title:"\uc801\uae08",icon:T.savings,subscribedProducts:Q,availableProducts:r,onSubscribe:e=>oe(e,"savings"),onCancel:ce,onMaturity:de,isAdmin:A(),onAdminDelete:me}),(0,y.jsx)(L,{title:"\ub300\ucd9c",icon:T.loans,subscribedProducts:$,availableProducts:i,onSubscribe:e=>oe(e,"loans"),onCancel:ce,onMaturity:de,isAdmin:A(),onAdminDelete:me})]}),(0,y.jsx)(B,{isOpen:te.isOpen,onClose:ie,product:te.product,onConfirm:async e=>{g.vF.log("--- handleSubscribe \uc2dc\uc791 ---");const t=parseFloat(e),{product:a,type:s}=te;if(g.vF.log("\uac00\uc785\ud560 \uc0c1\ud488:",a),g.vF.log("\uac00\uc785 \uc720\ud615: ".concat(s,", \uac00\uc785 \uae08\uc561: ").concat(t)),isNaN(t)||t<=0)return g.vF.error("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uae08\uc561:",e),re("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");if(a.minAmount&&t<a.minAmount)return g.vF.error("\ucd5c\uc18c \uac00\uc785 \uae08\uc561 \ubbf8\ub2ec: ".concat(t," < ").concat(a.minAmount)),re("\ucd5c\uc18c \uac00\uc785 \uae08\uc561\uc740 ".concat(G(a.minAmount),"\uc6d0\uc785\ub2c8\ub2e4."),"error");if(a.maxAmount&&t>a.maxAmount)return g.vF.error("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4 \ucd08\uacfc: ".concat(t," > ").concat(a.maxAmount)),re("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4\ub294 ".concat(G(a.maxAmount),"\uc6d0\uc785\ub2c8\ub2e4."),"error");E(!0),ie();const n=await f(null===D||void 0===D?void 0:D.classCode);if(!n)return re("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694.","error"),void E(!1);g.vF.log("\uc120\uc0dd\ub2d8 \uacc4\uc815:",n.name,n.id);const r="temp_".concat(Date.now()),o=new Date(Date.now()+24*a.termInDays*60*60*1e3),i={id:r,name:a.name,termInDays:a.termInDays,rate:a.dailyRate,balance:t,startDate:new Date,maturityDate:o,type:"deposits"===s?"deposit":"savings"===s?"savings":"loan",isOptimistic:!0};"deposit"===i.type?Z(e=>[...e,i]):"savings"===i.type?X(e=>[...e,i]):"loan"===i.type&&ee(e=>[...e,i]);const d="loans"===s?t:-t;ne(e=>e+d);try{await(0,l.c4)(l.db,async e=>{var r,i,d,c;const m=(0,l.H9)(l.db,"users",P),u=(0,l.H9)(l.db,"users",n.id),x=await e.get(m),b=await e.get(u);if(!x.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!b.exists())throw new Error("\uc120\uc0dd\ub2d8(\uc740\ud589) \uacc4\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const h=null!==(r=null===(i=x.data())||void 0===i?void 0:i.cash)&&void 0!==r?r:0,p=null!==(d=null===(c=b.data())||void 0===c?void 0:c.cash)&&void 0!==d?d:0;if("loans"!==s&&h<t)throw new Error("\ubcf4\uc720 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");if("loans"===s&&p<t)throw new Error("\uc740\ud589(\uc120\uc0dd\ub2d8)\uc5d0 \ub300\ucd9c \uac00\ub2a5\ud55c \uc790\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const v={name:a.name,termInDays:a.termInDays,rate:a.dailyRate,balance:t,startDate:(0,l.O5)(),maturityDate:o,type:"deposits"===s?"deposit":"savings"===s?"savings":"loan",teacherId:n.id,teacherName:n.name||"\uc120\uc0dd\ub2d8"},g=(0,l.H9)((0,l.rJ)(l.db,"users",P,"products"));e.set(g,v),"loans"===s?(e.update(m,{cash:(0,l.GV)(t)}),e.update(u,{cash:(0,l.GV)(-t)})):(e.update(m,{cash:(0,l.GV)(-t)}),e.update(u,{cash:(0,l.GV)(t)}))});const e="loans"===s?"\ub300\ucd9c":"\uac00\uc785";re("".concat(a.name," ").concat(e,"\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. (\uc120\uc0dd\ub2d8 \uacc4\uc815\uacfc \uc5f0\ub3d9)"),"success");const r="deposits"===s||"savings"===s?v.gI.DEPOSIT_CREATE:v.gI.LOAN_CREATE;(0,v.Mx)(l.db,{classCode:null===D||void 0===D?void 0:D.classCode,userId:P,userName:(null===D||void 0===D?void 0:D.name)||"\uc0ac\uc6a9\uc790",type:r,description:"".concat(a.name," ").concat("loans"===s?"\ub300\ucd9c":"\uac00\uc785"," (").concat(G(t),"\uc6d0) - \uc120\uc0dd\ub2d8 \uacc4\uc815 \uc5f0\ub3d9"),amount:d,metadata:{productName:a.name,productType:s,termInDays:a.termInDays,dailyRate:a.dailyRate,maturityDate:o.toISOString(),teacherId:n.id,teacherName:n.name}}),await le(),k&&k()}catch(c){g.vF.error("\uac00\uc785 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",c),re("\ucc98\ub9ac \uc624\ub958: ".concat(c.message),"error"),"deposit"===i.type?Z(e=>e.filter(e=>e.id!==r)):"savings"===i.type?X(e=>e.filter(e=>e.id!==r)):"loan"===i.type&&ee(e=>e.filter(e=>e.id!==r)),ne(e=>e-d)}finally{E(!1)}},isProcessing:S})]})};var J=a(5472),Y=a(6555),K=a(9463),q=a(1612);const Z=e=>Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,dailyRate:void 0===e.dailyRate||isNaN(e.dailyRate)?0:parseFloat(e.dailyRate),termInDays:void 0===e.termInDays||isNaN(e.termInDays)?1:parseInt(e.termInDays),minAmount:void 0===e.minAmount||isNaN(e.minAmount)?0:parseInt(e.minAmount),maxAmount:void 0===e.maxAmount||isNaN(e.maxAmount)?0:parseInt(e.maxAmount)})):(g.vF.error("convertAdminProductsToAccountFormat: \uc785\ub825\uac12\uc774 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4.",e),[]),Q=()=>{var e,t,a,o,i;const d=(0,r.As)(),[c,u]=(0,n.useState)(null),[x,b]=(0,n.useState)(""),[h,p]=(0,n.useState)("parking"),[v,f]=(0,n.useState)(!1),[j,N]=(0,n.useState)([]),[w,D]=(0,n.useState)([]),[C,k]=(0,n.useState)([]),[A,I]=(0,n.useState)([]),F=async()=>{var e,t,a;if(null!==d&&void 0!==d&&null!==(e=d.userDoc)&&void 0!==e&&e.classCode&&(null!==(t=d.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(a=d.userDoc)||void 0===a?void 0:a.role))){f(!0);try{const e=(0,J.query)((0,J.rJ)(l.db,"users"),(0,J.where)("classCode","==",d.userDoc.classCode)),t=await(0,J.getDocs)(e),a={};t.forEach(e=>{a[e.id]=(0,s.A)({id:e.id,name:e.data().name||e.data().nickname||"\uc54c \uc218 \uc5c6\uc74c"},e.data())});const n=[],r=Object.keys(a).map(async e=>{const t=(0,J.rJ)(l.db,"users",e,"products");return(await(0,J.getDocs)(t)).docs.map(t=>{var n;const r=t.data();return(0,s.A)((0,s.A)({firestoreId:t.id,userId:e,userName:a[e].name},r),{},{maturityDate:null!==(n=r.maturityDate)&&void 0!==n&&n.toDate?r.maturityDate.toDate():r.maturityDate})})});(await Promise.all(r)).forEach(e=>{n.push(...e)}),I(n),g.vF.log("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc644\ub8cc:",n)}catch(n){g.vF.error("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",n),u("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),b("error")}finally{f(!1)}}},_=(0,n.useMemo)(()=>Z(j),[j]),P=(0,n.useMemo)(()=>Z(w),[w]),S=(0,n.useMemo)(()=>Z(C),[C]);(0,n.useEffect)(()=>{var e;d&&!d.loading&&d.user&&null!==(e=d.userDoc)&&void 0!==e&&e.classCode?(async()=>{var e;const t=null===d||void 0===d||null===(e=d.userDoc)||void 0===e?void 0:e.classCode;if(t&&"\ubbf8\uc9c0\uc815"!==t){f(!0);try{const e=await(0,l.jy)(t,!0,"Banking");e.deposits?N(e.deposits):N([]),e.savings?D(e.savings):D([]),e.loans?k(e.loans):k([])}catch(a){g.vF.error("\ubc45\ud0b9 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",a),u("\ub370\uc774\ud130 \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),b("error")}finally{f(!1)}}else g.vF.warn("[Banking] \uc720\ud6a8\ud55c \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \ubc45\ud0b9 \uc0c1\ud488\uc744 \ub85c\ub4dc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")})():!d||d.loading||d.user||(N([]),D([]),k([]))},[null===d||void 0===d?void 0:d.user,null===d||void 0===d?void 0:d.loading,null===d||void 0===d||null===(e=d.userDoc)||void 0===e?void 0:e.classCode]);const E=(e,t,a,n)=>{let r,l;switch(e){case"deposits":r=j,l=N;break;case"installments":r=w,l=D;break;case"loans":r=C,l=k;break;default:return}l(r.map((e,r)=>{if(r===t){const t=(0,s.A)({},e);if("termInDays"===a||"minAmount"===a||"maxAmount"===a){const e=parseInt(n);t[a]=isNaN(e)||e<("termInDays"===a?1:0)?"termInDays"===a?1:0:e}else if("dailyRate"===a){const e=parseFloat(n);t.dailyRate=isNaN(e)||e<0?0:e}else"name"===a&&(t[a]=n);return t}return e}))},R=async e=>{var t;if(null===d||void 0===d||null===(t=d.userDoc)||void 0===t||!t.classCode)return u("\ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void b("error");f(!0);try{let t,a;switch(e){case"deposits":t=j,a="deposits";break;case"installments":t=w,a="savings";break;case"loans":t=C,a="loans";break;default:return}await(0,l.OP)(d.userDoc.classCode,a,t),u("".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),b("success"),setTimeout(()=>{u(null),b("")},3e3)}catch(a){g.vF.error("".concat(e," \uc0c1\ud488 \uc800\uc7a5 \uc911 \uc624\ub958:"),a),u("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),b("error")}finally{f(!1)}},M=e=>{const t={id:Date.now(),name:"\uc0c8 ".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488"),dailyRate:.01,termInDays:365,minAmount:"loans"===e?0:1e5,maxAmount:"loans"===e?1e6:0};switch(e){case"deposits":N([...j,t]);break;case"installments":D([...w,t]);break;case"loans":k([...C,t])}},G=async(e,t)=>{var a;if(v)return;let s,n;switch(e){case"deposits":s=j,n=N;break;case"installments":s=w,n=D;break;case"loans":s=C,n=k;break;default:return}const r=s.filter((e,a)=>a!==t);if(n(r),null!==d&&void 0!==d&&null!==(a=d.userDoc)&&void 0!==a&&a.classCode){f(!0);try{const t="deposits"===e?"deposits":"installments"===e?"savings":"loans";await(0,l.OP)(d.userDoc.classCode,t,r),u("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),b("info"),setTimeout(()=>{u(null),b("")},2e3)}catch(o){g.vF.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",o),u("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),b("error"),n(s)}finally{f(!1)}}};return d.loading?(0,y.jsx)(q.AlchanLoading,{}):(0,y.jsxs)(Y.LN,{children:[v&&(0,y.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,y.jsx)(q.AlchanLoading,{})}),(0,y.jsxs)("div",{className:"px-4 py-6 sm:px-6",children:[(0,y.jsx)(Y.zY,{title:"\ud1b5\ud569 \uae08\uc735 \uad00\ub9ac",subtitle:"\uc608\uae08, \uc801\uae08, \ub300\ucd9c \uc0c1\ud488\uc744 \uad00\ub9ac\ud558\uc138\uc694",icon:m.A}),c&&(0,y.jsx)("div",{className:"mb-4 p-4 rounded-xl ".concat("error"===x?"bg-red-900/40 text-red-200 border border-red-800/50":"success"===x?"bg-emerald-900/40 text-emerald-200 border border-emerald-800/50":"bg-blue-900/40 text-blue-200 border border-blue-800/50"),children:c}),(0,y.jsxs)("div",{className:"admin"===h?"content-box":"",children:[("parking"===h||"userProducts"===h)&&(0,y.jsx)(W,{auth:d,depositProducts:_,installmentProducts:P,loanProducts:S,activeView:h,onViewChange:p,onLoadUserProducts:F,allUserProducts:A,onDeleteUserProduct:async e=>{var t,a;if(g.vF.log("\uc0ad\uc81c \uc2dc\ub3c4:",e),!(null!==(t=d.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(a=d.userDoc)||void 0===a?void 0:a.role)))return g.vF.log("\uad00\ub9ac\uc790 \uad8c\ud55c \uc5c6\uc74c"),void alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(window.confirm("'".concat(e.userName,"'\ub2d8\uc758 '").concat(e.name,"' \uc0c1\ud488\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){f(!0);try{const t=e.firestoreId||String(e.id);g.vF.log("\uc0ad\uc81c \uacbd\ub85c:","users/".concat(e.userId,"/products/").concat(t)),g.vF.log("\uc0ac\uc6a9\ud560 \ubb38\uc11c ID:",t);const a=(0,J.H9)(l.db,"users",e.userId,"products",t);g.vF.log("\uc0ad\uc81c \uc2dc\uc791..."),await(0,J.kd)(a),g.vF.log("\uc0ad\uc81c \uc644\ub8cc"),u("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),b("success"),g.vF.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc2dc\uc791..."),await F(),g.vF.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc"),setTimeout(()=>{u(null),b("")},3e3)}catch(s){g.vF.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",s),u("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message)),b("error")}finally{f(!1)}}else g.vF.log("\uc0ac\uc6a9\uc790\uac00 \uc0ad\uc81c \ucde8\uc18c")},isLoading:v}),"admin"===h&&d.user&&((null===(t=d.userDoc)||void 0===t?void 0:t.isAdmin)||"admin"===(null===(a=d.userDoc)||void 0===a?void 0:a.role))&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,y.jsxs)("button",{onClick:()=>p("parking"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-slate-300 hover:bg-white/10 hover:text-white transition-all text-sm font-medium",children:[(0,y.jsx)(K.A,{size:16}),"\uc740\ud589\uc73c\ub85c \ub3cc\uc544\uac00\uae30"]})}),(0,y.jsx)("h2",{className:"admin-header",children:"\uad00\ub9ac\uc790 - \uae08\uc735 \uc0c1\ud488 \uad00\ub9ac (\uc77c \ubcf5\ub9ac \uae30\uc900)"}),(0,y.jsxs)("div",{className:"admin-section",children:[(0,y.jsx)("h3",{children:"\ud30c\ud0b9 \uc608\uae08 \uc0c1\ud488"}),(0,y.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,y.jsxs)("table",{className:"admin-table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,y.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\ucd5c\uc18c\uae08\uc561(\uc6d0)"}),(0,y.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,y.jsx)("tbody",{children:j.map((e,t)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"text",value:e.name||"",onChange:e=>E("deposits",t,"name",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>E("deposits",t,"termInDays",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>E("deposits",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.01",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>E("deposits",t,"minAmount",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("button",{onClick:()=>G("deposits",t),className:"admin-button-small delete-button ".concat(v?"disabled-button":""),disabled:v,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,y.jsxs)("div",{className:"admin-action-buttons",children:[(0,y.jsx)("button",{onClick:()=>M("deposits"),className:"admin-button-small add-button ".concat(v?"disabled-button":""),disabled:v,children:"\ucd94\uac00"}),(0,y.jsx)("button",{onClick:()=>R("deposits"),className:"admin-button-small save-button ".concat(v?"disabled-button":""),disabled:v,children:"\uc608\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,y.jsxs)("div",{className:"admin-section",children:[(0,y.jsx)("h3",{children:"\ud30c\ud0b9 \uc801\uae08 \uc0c1\ud488"}),(0,y.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,y.jsxs)("table",{className:"admin-table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,y.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\ucd5c\uc18c \uc6d4\ub0a9\uc785(\uc6d0)"}),(0,y.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,y.jsx)("tbody",{children:w.map((e,t)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"text",value:e.name||"",onChange:e=>E("installments",t,"name",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>E("installments",t,"termInDays",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>E("installments",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.011",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>E("installments",t,"minAmount",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("button",{onClick:()=>G("installments",t),className:"admin-button-small delete-button ".concat(v?"disabled-button":""),disabled:v,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,y.jsxs)("div",{className:"admin-action-buttons",children:[(0,y.jsx)("button",{onClick:()=>M("installments"),className:"admin-button-small add-button ".concat(v?"disabled-button":""),disabled:v,children:"\ucd94\uac00"}),(0,y.jsx)("button",{onClick:()=>R("installments"),className:"admin-button-small save-button ".concat(v?"disabled-button":""),disabled:v,children:"\uc801\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,y.jsxs)("div",{className:"admin-section",style:{borderBottom:"none"},children:[(0,y.jsx)("h3",{children:"\ud30c\ud0b9 \ub300\ucd9c \uc0c1\ud488"}),(0,y.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,y.jsxs)("table",{className:"admin-table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,y.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,y.jsx)("th",{style:{width:"18%"},children:"\ucd5c\ub300 \ub300\ucd9c\uc561(\uc6d0)"}),(0,y.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,y.jsx)("tbody",{children:C.map((e,t)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"text",value:e.name||"",onChange:e=>E("loans",t,"name",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>E("loans",t,"termInDays",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>E("loans",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.05",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("input",{type:"number",min:"0",value:e.maxAmount||0,onChange:e=>E("loans",t,"maxAmount",e.target.value),className:"admin-input",disabled:v,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,y.jsx)("td",{className:"admin-td",children:(0,y.jsx)("button",{onClick:()=>G("loans",t),className:"admin-button-small delete-button ".concat(v?"disabled-button":""),disabled:v,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,y.jsxs)("div",{className:"admin-action-buttons",children:[(0,y.jsx)("button",{onClick:()=>M("loans"),className:"admin-button-small add-button ".concat(v?"disabled-button":""),disabled:v,children:"\ucd94\uac00"}),(0,y.jsx)("button",{onClick:()=>R("loans"),className:"admin-button-small save-button ".concat(v?"disabled-button":""),disabled:v,children:"\ub300\ucd9c \uc0c1\ud488 \uc800\uc7a5"})]})]})]}),"admin"===h&&!(d.user&&(null!==(o=d.userDoc)&&void 0!==o&&o.isAdmin||"admin"===(null===(i=d.userDoc)||void 0===i?void 0:i.role)))&&(0,y.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800",children:"\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})]})]})]})}}}]);
//# sourceMappingURL=530.918794c8.chunk.js.map