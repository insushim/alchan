{"version":3,"file":"static/js/166.9c36c886.chunk.js","mappings":"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","sources":["components/LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","components/AlchanLayout.js","components/modals/DonationHistoryModal.js","utils/avatarSystem.js","components/modals/DonateCouponModal.js","components/Avatar.js","utils/achievementSystem.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","utils/levelSystem.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","components/modals/TransferModal.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, LogOut,\r\n  Boxes, Store, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category - \r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n  { id: 'adminSettings', label: ' ', icon: Settings, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\n//    \r\nconst ClassDataDeletionSection = ({ userClassCode, isAdmin, isSuperAdmin }) => {\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleDeleteClassData = async () => {\r\n    if (!userClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (deleteConfirmText !== \"\") {\r\n      alert(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    //  \r\n    const finalConfirm = window.confirm(\r\n      ` '${userClassCode}'     ?\\n\\n        :\\n-   (role: 'student')\\n-  \\n-  \\n\\n(admin)  .`\r\n    );\r\n\r\n    if (!finalConfirm) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // 1.    (role === 'student' AND classCode === userClassCode)\r\n      const usersRef = firestoreCollection(db, \"users\");\r\n      const studentsQuery = firebaseQuery(\r\n        usersRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode),\r\n        firebaseWhere(\"role\", \"==\", \"student\")\r\n      );\r\n      const studentsSnapshot = await firebaseGetDocs(studentsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${studentsSnapshot.size}`);\r\n\r\n      // 2.   \r\n      const activityLogsRef = firestoreCollection(db, \"activity_logs\");\r\n      const activityLogsQuery = firebaseQuery(\r\n        activityLogsRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n      );\r\n      const activityLogsSnapshot = await firebaseGetDocs(activityLogsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${activityLogsSnapshot.size}`);\r\n\r\n      // 3.    ( userId )\r\n      const studentIds = studentsSnapshot.docs.map(doc => doc.id);\r\n      let transactionsToDelete = [];\r\n\r\n      if (studentIds.length > 0) {\r\n        // Firestore 'in'   10   \r\n        const batches = [];\r\n        for (let i = 0; i < studentIds.length; i += 10) {\r\n          batches.push(studentIds.slice(i, i + 10));\r\n        }\r\n\r\n        for (const batch of batches) {\r\n          const transactionsRef = firestoreCollection(db, \"transactions\");\r\n          const transactionsQuery = firebaseQuery(\r\n            transactionsRef,\r\n            firebaseWhere(\"userId\", \"in\", batch)\r\n          );\r\n          const transactionsSnapshot = await firebaseGetDocs(transactionsQuery);\r\n          transactionsToDelete.push(...transactionsSnapshot.docs);\r\n        }\r\n      }\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${transactionsToDelete.length}`);\r\n\r\n      // 4.    (Firestore   500 )\r\n      const allDocsToDelete = [\r\n        ...studentsSnapshot.docs,\r\n        ...activityLogsSnapshot.docs,\r\n        ...transactionsToDelete,\r\n      ];\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${allDocsToDelete.length}`);\r\n\r\n      //   \r\n      const BATCH_SIZE = 500;\r\n      for (let i = 0; i < allDocsToDelete.length; i += BATCH_SIZE) {\r\n        const batch = writeBatch(db);\r\n        const batchDocs = allDocsToDelete.slice(i, i + BATCH_SIZE);\r\n\r\n        batchDocs.forEach((docSnap) => {\r\n          batch.delete(docSnap.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n        logger.log(`[ClassDataDeletion]  ${Math.floor(i / BATCH_SIZE) + 1}  `);\r\n      }\r\n\r\n      alert(\r\n        `   !\\n\\n :\\n-  : ${studentsSnapshot.size}\\n-  : ${activityLogsSnapshot.size}\\n-  : ${transactionsToDelete.length}`\r\n      );\r\n\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // \r\n      setDeleteConfirmText(\"\");\r\n      setShowConfirmation(false);\r\n    } catch (error) {\r\n      logger.error(\"[ClassDataDeletion]   :\", error);\r\n      alert(` : ${error.message}\\n\\n    .  .`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"section-card mt-6 border-2 border-red-500/50 bg-red-900/10\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <span className=\"text-2xl\"></span>\r\n        <h3 className=\"text-xl font-bold text-red-400\"> :   </h3>\r\n      </div>\r\n\r\n      <div className=\"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30\">\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n          <strong>    !</strong>\r\n        </p>\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n                .\r\n        </p>\r\n        <p className=\"text-sm text-gray-300 mb-2\"> :</p>\r\n        <ul className=\"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1\">\r\n          <li>  (role: 'student')</li>\r\n          <li>  (activity_logs)</li>\r\n          <li>  (transactions)</li>\r\n        </ul>\r\n        <p className=\"text-sm text-green-300 mt-2\">\r\n           (admin)  .\r\n        </p>\r\n        <p className=\"text-sm text-green-300\">\r\n           , ,    .\r\n        </p>\r\n      </div>\r\n\r\n      {!showConfirmation ? (\r\n        <button\r\n          onClick={() => setShowConfirmation(true)}\r\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n             \r\n        </button>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                \"<strong className=\"text-red-400\"></strong>\"  :\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              disabled={isDeleting}\r\n              className=\"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleDeleteClassData}\r\n              disabled={isDeleting || deleteConfirmText !== \"\"}\r\n              className={`px-6 py-2 rounded-lg font-medium transition-colors ${\r\n                deleteConfirmText === \"\" && !isDeleting\r\n                  ? \"bg-red-600 hover:bg-red-700 text-white\"\r\n                  : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\r\n              }`}\r\n            >\r\n              {isDeleting ? \" ...\" : \"  \"}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowConfirmation(false);\r\n                setDeleteConfirmText(\"\");\r\n              }}\r\n              disabled={isDeleting}\r\n              className=\"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  //    \r\n  const [jobTaskSubTab, setJobTaskSubTab] = useState(\"job\");\r\n  const [studentMemberSubTab, setStudentMemberSubTab] = useState(\"student\");\r\n  const [financeMarketSubTab, setFinanceMarketSubTab] = useState(\"financial\");\r\n  const [systemSubTab, setSystemSubTab] = useState(\"database\");\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //   ID     ( )\r\n  useEffect(() => {\r\n    const mapping = {\r\n      taskManagement: ['jobAndTask', () => setJobTaskSubTab('task')],\r\n      jobSettings: ['jobAndTask', () => setJobTaskSubTab('job')],\r\n      studentManagement: ['studentAndMember', () => setStudentMemberSubTab('student')],\r\n      salarySettings: ['studentAndMember', () => setStudentMemberSubTab('salary')],\r\n      memberManagement: ['studentAndMember', () => setStudentMemberSubTab('member')],\r\n      financialProducts: ['financeAndMarket', () => setFinanceMarketSubTab('financial')],\r\n      parkingAccount: ['financeAndMarket', () => setFinanceMarketSubTab('parking')],\r\n      marketControl: ['financeAndMarket', () => setFinanceMarketSubTab('market')],\r\n      databaseManagement: ['system', () => setSystemSubTab('database')],\r\n      systemManagement: ['system', () => setSystemSubTab('system')],\r\n    };\r\n    const mapped = mapping[adminSelectedMenu];\r\n    if (mapped) {\r\n      setAdminSelectedMenu(mapped[0]);\r\n      mapped[1]();\r\n    }\r\n  }, [adminSelectedMenu, setAdminSelectedMenu]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'student') {\r\n      loadStudents();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'studentAndMember' && studentMemberSubTab === 'member') {\r\n      loadClassMembers();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showAdminSettingsModal, adminSelectedMenu, studentMemberSubTab]);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'financeAndMarket' && financeMarketSubTab === 'market') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, financeMarketSubTab, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobAndTask\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobAndTask\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentAndMember\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"studentAndMember\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financeAndMarket\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financeAndMarket\")}\r\n          >\r\n             /\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"system\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"system\")}\r\n          >\r\n             \r\n          </button>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"jobAndTask\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'job' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('job')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${jobTaskSubTab === 'task' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setJobTaskSubTab('task')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"task\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobAndTask\" && jobTaskSubTab === \"job\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"studentAndMember\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'student' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('student')}\r\n            >\r\n              / \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'salary' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('salary')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${studentMemberSubTab === 'member' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setStudentMemberSubTab('member')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"student\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== /   ===== */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'financial' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('financial')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'parking' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('parking')}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${financeMarketSubTab === 'market' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setFinanceMarketSubTab('market')}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"financial\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"market\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"financeAndMarket\" && financeMarketSubTab === \"parking\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"member\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentAndMember\" && studentMemberSubTab === \"salary\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* =====    ===== */}\r\n        {adminSelectedMenu === \"system\" && (\r\n          <div className=\"flex gap-2 mb-4 p-3 rounded-xl bg-[#16213e]/50 border border-gray-700/50\">\r\n            <button\r\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'database' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n              onClick={() => setSystemSubTab('database')}\r\n            >\r\n              \r\n            </button>\r\n            {isSuperAdmin && (\r\n              <button\r\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${systemSubTab === 'system' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-gray-400 hover:text-white hover:bg-gray-700/50'}`}\r\n                onClick={() => setSystemSubTab('system')}\r\n              >\r\n                 \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/*   */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"database\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n\r\n            {/*    */}\r\n            <div className=\"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30\">\r\n              <h3 className=\"text-lg font-bold text-violet-300 mb-3\">  </h3>\r\n              <p className=\"text-sm text-gray-400 mb-4\">    .</p>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <a\r\n                  href=\"/consent-form\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    ( )\r\n                </a>\r\n                <a\r\n                  href=\"/privacy\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                   \r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  :    */}\r\n            <ClassDataDeletionSection\r\n              userClassCode={userClassCode}\r\n              isAdmin={isAdmin}\r\n              isSuperAdmin={isSuperAdmin}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"system\" && systemSubTab === \"system\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    gcTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    gcTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    gcTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    gcTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    logger.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\" className=\"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm\">  </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\nimport { logger } from '../../utils/logger';\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // isAdmin   \r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n\r\n        // eslint-disable-next-line react-hooks/rules-of-hooks\r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      logger.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      logger.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    logger.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      logger.log('[MyItems]   inventory   :');\r\n      logger.log(':', allInventoryDocs.size);\r\n      logger.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      logger.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      logger.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          logger.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          logger.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      logger.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            logger.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            logger.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            logger.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            logger.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          logger.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          logger.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          logger.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          logger.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          logger.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      logger.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      logger.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        logger.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        logger.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          logger.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          logger.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          logger.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          logger.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          logger.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      logger.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                logger.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { DailyRewardBanner, getStreakInfo } from './DailyReward';\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport Login from '../pages/auth/Login';\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","logger","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","onClick","e","stopPropagation","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","disabled","required","calculateValue","style","cursor","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","width","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","concat","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","userDoc","logout","useAuth","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","toggleCategory","categoryId","prev","_objectSpread","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","isAdmin","isSuperAdmin","userRole","userName","nickname","renderMenuSection","categoryKey","items","childItems","child","isSubGroup","size","charAt","_Fragment","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","fontSize","setFontSize","useTheme","resetTutorial","user","showTutorial","setShowTutorial","uid","tutorialRef","doc","db","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","Object","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","formatKoreanNumber","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","config","levelInfo","useMemo","netAssets","Number","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","sort","a","b","achA","getAchievementById","achB","rarity","handleClickOutside","event","contains","document","color","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","classCode","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","Trash2","maxLength","autoFocus","trimmed","trim","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","Date","now","handleBeforeInstall","handleDismiss","toString","Share","Plus","outcome","userChoice","log","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","badge","vibrate","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","backgroundColor","border","padding","boxShadow","taskInfoStyle","gap","taskNameStyle","lineHeight","taskActionsStyle","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","Math","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","marginBottom","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","transform","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","body","bottom","content","top","left","marginLeft","borderWidth","borderStyle","borderColor","animation","textShadow","perspective","transition","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","borderBottom","letterSpacing","tasks","TaskItem","borderTop","fontWeight","CommonTaskList","Array","isArray","gridTemplateColumns","createOptimizedFunction","functionName","fn","httpsCallable","functions","success","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","JSON","stringify","timestamp","warn","maxAge","backup","parsed","parse","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","checked","toLocaleTimeString","marginTop","borderRadius","margin","health","totalUsers","stats","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","index","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","toDate","seconds","errorLogs","slice","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","ClassDataDeletionSection","userClassCode","deleteConfirmText","setDeleteConfirmText","isDeleting","setIsDeleting","showConfirmation","setShowConfirmation","usersRef","firestoreCollection","studentsQuery","firebaseQuery","firebaseWhere","studentsSnapshot","firebaseGetDocs","activityLogsRef","activityLogsQuery","activityLogsSnapshot","studentIds","docs","transactionsToDelete","batches","i","batch","transactionsRef","transactionsQuery","transactionsSnapshot","allDocsToDelete","BATCH_SIZE","writeBatch","forEach","docSnap","delete","commit","floor","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","students","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","savingProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","jobTaskSubTab","setJobTaskSubTab","studentMemberSubTab","setStudentMemberSubTab","financeMarketSubTab","setFinanceMarketSubTab","systemSubTab","setSystemSubTab","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","useOptimizedStudents","useQuery","queryKey","staleTime","gcTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","parseFloat","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","queryRef","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","member","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","stock","stockRef","set","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","mapped","taskManagement","jobSettings","studentManagement","memberManagement","financialProducts","parkingAccount","marketControl","databaseManagement","formatLastSalaryDate","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","find","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","summary","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","student","salaryCalc","includes","handleToggleStudentSelection","studentId","Boolean","join","toLocaleDateString","handleEditStudentJobs","step","products","product","AdminDatabase","href","rel","SystemMonitoring","handleToggleJobSelection","prevStudents","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","get","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","Map","addListener","unsubscribe","has","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","EmptyState","Briefcase","description","ActionButton","variant","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","substr","setupPolling","pollData","jobsQuery","query","where","limit","loadedJobs","getDocs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","today","toDateString","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","findIndex","t","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","rewardAmount","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","cached","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","storeItems","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","PageContainer","LoadingState","ListTodo","userNickname","RotateCcw","JobList","action","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","priceIncreasePercentage","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialStock","available","initialQuantities","checkMobile","getButtonText","currentUserCash","quantity","totalPrice","canOpenAdminPanel","AdminItemPage","editingItemFromStore","onAddItem","newItemData","onUpdateItem","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","textAlign","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","from","values","localeCompare","recentlyUsedItems","setRecentlyUsedItems","saved","prevItems","itemsChanged","updatedItems","keys","_itemData$itemDetails","itemData","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","currentTarget","quantityToUse","remainingToUse","sortedDocs","amountToUse","classmate","c","recipientName","originalUserItems","","","","","UID","inventoryRef","collection","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","updateDoc","assign","catch","React","PersonalShop","lazy","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","handleDailyRewardClaim","increment","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","DailyRewardBanner","onClaim","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","donations","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","borderCollapse","overflow","thead","th","position","zIndex","td","tr","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","processDonationData","studentsCount","donationsCount","s","classDonations","validStudents","donationsByStudent","currentClassGoalTotal","donation","donorId","donorName","totalAmount","uniqueDonors","allStudentIds","Set","add","studentInfoMap","studentName","_donationsByStudent$s","cumulativeAmount","isCurrentUser","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","onMouseOver","onMouseOut","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","_unused","saveAvatarConfig","dispatchEvent","CustomEvent","_unused2","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","darkenColor","hex","percent","r","g","f","m","o","noseColor","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","condition","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","stored","normalizeType","cache","getCacheKey","getFromCache","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","q","snapshot","logs","_data$timestamp","normalizedFilterType","hasMore","paginatedLogs","newLastDoc","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","transactions","userIdsCount","allTransactions","_data$timestamp3","getTransactionsData","tx","metadata","convertTransactionsToLogs","handleLoadMore","getActivityTypeColor","typeStr","toLowerCase","formatDate","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","handleRefresh","keysToDelete","clearClassCache","info","typeCounts","typeExamples","count","filters","_log$type","_log$description","desc","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","filterName","filterFunc","matchedLogs","matchedTypes","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","activity","reason","itemName","couponAmount","PageHeader","subtitle","backButton","_ref1","primary","secondary","outline","danger","ghost","indigo","sm","md","lg","Loader2","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","iconCollection","styles","container","maxWidth","fontFamily","card","header","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","input","boxSizing","textarea","minHeight","resize","gridTwo","iconSelector","selectedIcon","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","handleChange","isEditing","maxHeight","overflowY","handleIconSelect","onMouseEnter","onMouseLeave","number","unit","num","isNegative","units","resultParts","remaining","abs","quotient","maximumFractionDigits","formatKoreanCurrency","STREAK_REWARDS","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","showPopup","setShowPopup","handleClaim","toISOString","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","StreakDisplay","currentStreak","StreakRewardInfo","ItemContext","createContext","context","useContext","marketListings","marketOffers","updateUserItemQuantity","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","isAuthAdmin","deductCash","addCash","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","newUserItems","tempId","tempNewItem","token","getIdToken","functionUrl","response","fetch","method","headers","ok","errorText","status","json","itemToPurchase","newUserItem","purchasedAt","originalStock","originalPrice","existingIndex","updated","restocked","newStock","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","addDoc","logId"],"ignoreList":[],"sourceRoot":""}