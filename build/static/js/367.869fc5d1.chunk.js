"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[367],{262(e,t,s){s.d(t,{A:()=>a});s(5043);var o=s(579);const a=()=>(0,o.jsxs)("div",{className:"login-warning",children:[(0,o.jsx)("h3",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,o.jsx)("p",{children:"\uc544\uc774\ud15c\uc744 \uad6c\ub9e4\ud558\uac70\ub098 \uc0ac\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})]})},367(e,t,s){s.r(t),s.d(t,{default:()=>f});var o=s(2555),a=s(5043),n=s(5016),l=s(2864),r=s(579);const i=e=>{let{percentage:t,size:s=140,strokeWidth:o=12,color:a,children:n}=e;const l=(s-o)/2,i=2*l*Math.PI,d=i-t/100*i;return(0,r.jsxs)("div",{className:"relative",style:{width:s,height:s},children:[(0,r.jsxs)("svg",{width:s,height:s,style:{transform:"rotate(-90deg)"},children:[(0,r.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:o}),(0,r.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:a,strokeWidth:o,strokeDasharray:i,strokeDashoffset:d,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:n})]})};function d(e){let{classCouponGoal:t,goalProgress:s,myContribution:o,currentCoupons:a,couponValue:n,setShowDonateModal:l,setShowSellCouponModal:d,setShowDonationHistoryModal:c,setShowGiftCouponModal:m,goalAchieved:u,resetGoalButton:x,isResettingGoal:p}=e;const b="number"===typeof t&&t>0?t:1,h=Math.min(Math.round(s/b*100),100),g=b>0?Math.min(Math.round(o/b*100),100):0,f=u?"#10b981":"#6366f1";return(0,r.jsxs)("div",{className:"class-coupon-goal p-6 rounded-2xl relative overflow-hidden",style:{backgroundColor:"rgba(20, 20, 35, 0.6)",boxShadow:u?"0 4px 20px rgba(16, 185, 129, 0.25)":"0 4px 20px rgba(0, 255, 242, 0.15)",border:u?"2px solid #10b981":"1px solid rgba(0, 255, 242, 0.2)",backdropFilter:"blur(10px)"},children:[(0,r.jsx)("div",{className:"absolute -top-12 -right-12 w-36 h-36 rounded-full",style:{background:u?"radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%)":"radial-gradient(circle, rgba(99,102,241,0.1) 0%, transparent 70%)"}}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("span",{className:"text-3xl",children:"\ud83c\udfaf"}),(0,r.jsx)("h3",{className:"text-xl font-bold m-0",style:{color:"#e8e8ff",textShadow:"0 0 5px rgba(0, 255, 242, 0.5)"},children:"\ud559\uae09 \ucfe0\ud3f0 \ubaa9\ud45c"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[u&&(0,r.jsx)("span",{className:"text-white px-3.5 py-1.5 rounded-2xl text-sm font-bold",style:{background:"linear-gradient(135deg, #10b981, #059669)",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.4)",animation:"pulse 2s infinite"},children:"\ud83c\udf89 \ubaa9\ud45c \ub2ec\uc131!"}),x&&(0,r.jsx)("button",{onClick:x,disabled:p,className:"text-white border-none rounded-xl px-3 py-1.5 text-xs font-semibold",style:{backgroundColor:p?"#9ca3af":"#ef4444",cursor:p?"not-allowed":"pointer",opacity:p?.7:1},children:p?"\ucd08\uae30\ud654 \uc911...":"\ucd08\uae30\ud654"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-7 py-5 flex-wrap",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)(i,{percentage:h,size:150,strokeWidth:14,color:f,children:[(0,r.jsxs)("div",{className:"text-3xl font-extrabold",style:{color:f},children:[h,"%"]}),(0,r.jsx)("div",{className:"text-xs font-medium",style:{color:"#a0a0c0"},children:"\ub2ec\uc131\ub960"})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"text-2xl font-extrabold",style:{color:"#e8e8ff"},children:[(s||0).toLocaleString(),(0,r.jsxs)("span",{className:"text-sm font-medium",style:{color:"#a0a0c0"},children:[" ","/ ",b.toLocaleString()]})]}),(0,r.jsx)("div",{className:"text-xs mt-0.5",style:{color:"#6b7280"},children:"\ud559\uae09 \uc804\uccb4 \uc751\ubaa8\ub7c9"})]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)(i,{percentage:g,size:120,strokeWidth:10,color:"#f59e0b",children:[(0,r.jsxs)("div",{className:"text-2xl font-extrabold",style:{color:"#f59e0b"},children:[g,"%"]}),(0,r.jsx)("div",{className:"text-xs font-medium",style:{color:"#a0a0c0"},children:"\ub0b4 \uae30\uc5ec"})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"text-lg font-bold",style:{color:"#e8e8ff"},children:[(o||0).toLocaleString(),(0,r.jsxs)("span",{className:"text-xs font-medium",style:{color:"#a0a0c0"},children:[" ","\ucfe0\ud3f0"]})]}),(0,r.jsx)("div",{className:"text-xs mt-0.5",style:{color:"#6b7280"},children:"\ub0b4\uac00 \uc751\ubaa8\ud55c \ucfe0\ud3f0"})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl p-5 text-center min-w-[130px]",style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%)",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.1)",border:"1px solid rgba(251, 191, 36, 0.3)"},children:[(0,r.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfab"}),(0,r.jsx)("div",{className:"text-3xl font-extrabold",style:{color:"#fbbf24",textShadow:"0 0 10px rgba(251, 191, 36, 0.3)"},children:(a||0).toLocaleString()}),(0,r.jsx)("div",{className:"text-xs font-semibold mt-1",style:{color:"#fcd34d"},children:"\ubcf4\uc720 \ucfe0\ud3f0"}),(0,r.jsxs)("div",{className:"text-xs mt-2 px-2 py-1 rounded-lg",style:{color:"#fcd34d",background:"rgba(0,0,0,0.3)"},children:["1\ucfe0\ud3f0 ="," ","number"===typeof n?n.toLocaleString():"0","\uc6d0"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 mt-5",children:[(0,r.jsxs)("button",{onClick:()=>l(!0),className:"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all",style:{background:"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.35)"},children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,r.jsx)("span",{className:"text-white text-sm font-bold",children:"\ucfe0\ud3f0 \uc751\ubaa8"})]}),(0,r.jsxs)("button",{onClick:()=>d(!0),className:"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all",style:{background:"linear-gradient(135deg, #f87171 0%, #ef4444 100%)",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.35)"},children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb5"}),(0,r.jsx)("span",{className:"text-white text-sm font-bold",children:"\ucfe0\ud3f0 \ud310\ub9e4"})]}),(0,r.jsxs)("button",{onClick:()=>m(!0),className:"border-none rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all",style:{background:"linear-gradient(135deg, #34d399 0%, #10b981 100%)",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.35)"},children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83c\udf81"}),(0,r.jsx)("span",{className:"text-white text-sm font-bold",children:"\ucfe0\ud3f0 \uc120\ubb3c"})]}),(0,r.jsxs)("button",{onClick:()=>c(!0),className:"rounded-xl py-3.5 px-2 cursor-pointer flex flex-col justify-center items-center gap-1.5 transition-all",style:{background:"linear-gradient(135deg, #374151 0%, #1f2937 100%)",border:"1px solid #4b5563"},children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"}),(0,r.jsx)("span",{className:"text-sm font-bold",style:{color:"#4b5563"},children:"\uc751\ubaa8 \ub0b4\uc5ed"})]})]}),(0,r.jsx)("style",{children:"\n        .class-coupon-goal { font-size: 1.05rem; }\n        .class-coupon-goal h3 { font-size: 1.3rem !important; }\n        .class-coupon-goal .text-xs { font-size: 0.85rem !important; }\n        .class-coupon-goal .text-sm { font-size: 0.95rem !important; }\n        .class-coupon-goal .text-2xl { font-size: 1.6rem !important; }\n        .class-coupon-goal .text-3xl { font-size: 2rem !important; }\n      "}),(0,r.jsx)("style",{children:"\n        @keyframes pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n        }\n        .class-coupon-goal button:hover {\n          transform: translateY(-2px);\n        }\n      "})]})}var c=s(262),m=s(5452);const u=(0,a.memo)(function(e){let{showDonateModal:t,setShowDonateModal:s,currentCoupons:o,onDonate:n,classCode:l}=e;const[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),b=()=>{x||(s(!1),d(""),u(""))};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1000] p-5",onClick:b,children:(0,r.jsxs)("div",{className:"bg-[#1a1a2e] rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden border border-slate-600",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"px-5 py-4 border-b border-slate-600 flex justify-between items-center bg-[#151528]",children:[(0,r.jsxs)("h3",{className:"m-0 text-lg font-semibold text-slate-100",children:["\ucfe0\ud3f0 \uc751\ubaa8\ud558\uae30",l&&(0,r.jsx)("span",{className:"ml-2 text-sm bg-indigo-900/60 text-indigo-300 px-2 py-1 rounded-xl font-medium",children:l})]}),(0,r.jsx)("button",{onClick:b,disabled:x,className:"bg-transparent border-0 text-xl text-slate-400 p-0 leading-none ".concat(x?"cursor-not-allowed":"cursor-pointer hover:text-slate-200"),"aria-label":"\ub2eb\uae30",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("div",{className:"mb-5",children:(0,r.jsxs)("div",{className:"flex justify-between items-center bg-indigo-900/30 px-4 py-3 rounded-lg border border-indigo-700/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-indigo-300",children:"\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0"}),(0,r.jsxs)("span",{className:"text-base font-semibold text-indigo-400",children:[o.toLocaleString()," \uac1c"]})]})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"\uc751\ubaa8\ud560 \ucfe0\ud3f0 \uc218\ub7c9"}),(0,r.jsx)("input",{type:"number",min:"1",max:o,value:i,onChange:e=>d(e.target.value),disabled:x,className:"w-full p-3 border border-slate-600 rounded-md text-base text-slate-100 ".concat(x?"bg-slate-800 cursor-not-allowed":"bg-slate-700/50 cursor-text"),placeholder:"\uc751\ubaa8\ud560 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"\uc751\ubaa8 \uba54\uc2dc\uc9c0 (\uc120\ud0dd\uc0ac\ud56d)"}),(0,r.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),disabled:x,className:"w-full p-3 border border-slate-600 rounded-md text-sm resize-y min-h-[80px] text-slate-100 ".concat(x?"bg-slate-800 cursor-not-allowed":"bg-slate-700/50 cursor-text"),placeholder:"\uc751\ubaa8\uc640 \ud568\uaed8 \uc804\ud560 \uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),i&&!isNaN(parseInt(i,10))&&(0,r.jsx)("div",{className:"bg-emerald-900/30 px-4 py-3 rounded-lg border border-emerald-700/50 mb-5",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-emerald-300",children:"\uc751\ubaa8 \uc608\uc815 \ucfe0\ud3f0"}),(0,r.jsxs)("span",{className:"text-base font-semibold text-emerald-400",children:[parseInt(i,10).toLocaleString()," \uac1c"]})]})})]}),(0,r.jsxs)("div",{className:"px-5 py-4 border-t border-slate-600 flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:b,disabled:x,className:"px-4 py-2 bg-slate-600 text-slate-200 border-0 rounded-md font-medium ".concat(x?"cursor-not-allowed opacity-60":"cursor-pointer opacity-100 hover:bg-slate-500"),children:"\ucde8\uc18c"}),(0,r.jsx)("button",{onClick:async()=>{const e=parseInt(i,10);if(isNaN(e)||e<=0)alert("\uc62c\ubc14\ub978 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(e>o)alert("\ubcf4\uc720 \ucfe0\ud3f0\ubcf4\ub2e4 \ub9ce\uc774 \uc751\ubaa8\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else{p(!0);try{await n(e,c)&&(d(""),u(""),s(!1))}catch(t){m.vF.error("[DonateCouponModal] \uc751\ubaa8 \ucc98\ub9ac \uc911 \uc624\ub958:",t),alert("\uc751\ubaa8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{p(!1)}}},disabled:x||!i||isNaN(parseInt(i,10))||parseInt(i,10)<=0||parseInt(i,10)>o,style:{backgroundColor:x||!i||isNaN(parseInt(i,10))||parseInt(i,10)<=0||parseInt(i,10)>o?"#4b5563":"#4f46e5"},className:"px-4 py-2 text-white border-0 rounded-md font-medium ".concat(x||!i||isNaN(parseInt(i,10))||parseInt(i,10)<=0||parseInt(i,10)>o?"cursor-not-allowed":"cursor-pointer"),children:x?"\uc751\ubaa8 \uc911...":"\uc751\ubaa8\ud558\uae30"})]})]})}):null}),x=(0,a.memo)(function(e){let{showSellCouponModal:t,setShowSellCouponModal:s,currentCoupons:o=0,couponValue:n=1e3,sellAmount:l="",setSellAmount:i,SellCoupon:d}=e;const[c,u]=(0,a.useState)(!1),[x,p]=(0,a.useState)("");if(!t)return null;const b=()=>{i(""),p(""),s(!1)},h=!l||isNaN(parseInt(l))||parseInt(l)<=0||parseInt(l)>o;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1000]",onClick:b,children:(0,r.jsxs)("div",{className:"bg-[#1a1a2e] p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md border border-slate-600",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 text-slate-100",children:"\ucfe0\ud3f0 \ud310\ub9e4\ud558\uae30"}),(0,r.jsx)("p",{className:"mb-2.5 text-sm text-slate-400",children:"\ucfe0\ud3f0\uc744 \ud310\ub9e4\ud558\uace0 \ud604\uae08\uc73c\ub85c \uad50\ud658\ud558\uc138\uc694."}),(0,r.jsxs)("div",{className:"flex justify-between mb-4 p-2.5 bg-slate-800/60 rounded-md text-[15px] text-slate-300",children:[(0,r.jsx)("span",{children:"\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0:"}),(0,r.jsx)("strong",{className:"text-slate-100",children:o.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between mb-4 p-2.5 bg-slate-800/60 rounded-md text-[15px] text-indigo-400",children:[(0,r.jsx)("span",{children:"1\ucfe0\ud3f0 \ud310\ub9e4\uac00:"}),(0,r.jsxs)("strong",{children:[n.toLocaleString(),"\uc6d0"]})]}),(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(l);if(p(""),!t||isNaN(t)||t<=0)p("\uc720\ud6a8\ud55c \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(t>o)p("\ubcf4\uc720\ud55c \ucfe0\ud3f0\ubcf4\ub2e4 \ub9ce\uc740 \uc218\ub7c9\uc744 \ud310\ub9e4\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else{if("function"!==typeof d)return p("\ud310\ub9e4 \ucc98\ub9ac \ud568\uc218\uac00 \uc62c\ubc14\ub974\uac8c \uc804\ub2ec\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),void m.vF.error("SellCoupon prop is not a function:",d);u(!0);try{await d()}catch(s){m.vF.error("\ud310\ub9e4 \ucc98\ub9ac \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958:",s),p(s.message||"\ud310\ub9e4 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}finally{u(!1)}}},children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"sellAmount",className:"block mb-1 font-medium text-slate-300",children:"\ud310\ub9e4\ud560 \ucfe0\ud3f0 \uc218:"}),(0,r.jsx)("input",{id:"sellAmount",type:"number",value:l,onChange:e=>i(e.target.value),min:"1",max:o,className:"w-full px-3 py-2 border border-slate-600 rounded-md text-sm outline-none bg-slate-700/50 text-slate-100",disabled:c,required:!0})]}),x&&(0,r.jsx)("div",{className:"bg-red-900/30 border border-red-700/50 rounded-md px-4 py-3 mb-4 text-red-300 text-sm",children:(0,r.jsx)("p",{className:"m-0",children:x})}),(0,r.jsx)("div",{className:"mb-5 px-4 py-2.5 bg-indigo-900/30 rounded-md border-l-4 border-indigo-500",children:(0,r.jsxs)("div",{className:"flex justify-between text-base font-semibold text-slate-200",children:[(0,r.jsx)("span",{children:"\uc608\uc0c1 \uc218\ub839\uc561:"}),(0,r.jsxs)("span",{className:"text-indigo-400",children:[(()=>{const e=parseInt(l);return!isNaN(e)&&e>0?e*n:0})().toLocaleString(),"\uc6d0"]})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2.5 mt-5",children:[(0,r.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-slate-600 text-slate-200 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200 hover:bg-slate-500",disabled:c,children:"\ucde8\uc18c"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white border-0 rounded-md text-sm font-medium transition-all duration-200",style:{cursor:h||c?"not-allowed":"pointer",opacity:h||c?.6:1},disabled:h||c,children:c?"\ucc98\ub9ac \uc911...":"\ud310\ub9e4\ud558\uae30"})]})]})]})})}),p=(0,a.memo)(function(e){let{showGiftCouponModal:t,setShowGiftCouponModal:s,recipients:o,giftRecipient:a,setGiftRecipient:n,giftAmount:l,setGiftAmount:i,handleGiftCoupon:d,currentCoupons:c,userId:u}=e;if(!t)return null;const x=null!==o&&void 0!==o?o:[],p=()=>{s(!1),"function"===typeof i?i(""):m.vF.error("setGiftAmount prop is not a function!",i),"function"===typeof n?n(""):m.vF.error("setGiftRecipient prop is not a function!",n)};return(0,r.jsx)("div",{className:"modal-backdrop fixed inset-0 bg-black/60 flex justify-center items-center z-[1000]",onClick:p,children:(0,r.jsxs)("div",{className:"gift-coupon-modal bg-[#1a1a2e] rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl border border-slate-600",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h3",{className:"mt-0 text-slate-100",children:"\ucfe0\ud3f0 \uc120\ubb3c\ud558\uae30"}),(0,r.jsx)("div",{className:"mb-4 text-slate-400",children:(0,r.jsxs)("p",{children:["\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0:"," ",(0,r.jsxs)("strong",{className:"text-slate-200",children:[c,"\uac1c"]})]})}),(0,r.jsxs)("div",{className:"form-group mb-4",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-slate-300",children:"\ubc1b\ub294 \uc0ac\ub78c"}),(0,r.jsxs)("select",{value:a,onChange:e=>"function"===typeof n?n(e.target.value):m.vF.error("setGiftRecipient is not a function"),className:"w-full p-2.5 border border-slate-600 rounded-md text-sm bg-slate-700/50 text-slate-100",children:[(0,r.jsx)("option",{value:"",children:"\ubc1b\ub294 \ubd84\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),x.filter(e=>e.id!==u).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))]})]}),(0,r.jsxs)("div",{className:"form-group mb-6",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-slate-300",children:"\uc120\ubb3c\ud560 \ucfe0\ud3f0 \uc218\ub7c9"}),(0,r.jsx)("input",{type:"number",value:l,onChange:e=>"function"===typeof i?i(e.target.value):m.vF.error("setGiftAmount is not a function"),placeholder:"\uc120\ubb3c\ud560 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud558\uc138\uc694",className:"w-full p-2.5 border border-slate-600 rounded-md text-sm bg-slate-700/50 text-slate-100",max:c,min:"1"})]}),(0,r.jsxs)("div",{className:"modal-actions flex justify-end gap-2.5",children:[(0,r.jsx)("button",{className:"cancel-button px-4 py-2 bg-slate-600 text-slate-200 border-0 rounded-md cursor-pointer font-medium hover:bg-slate-500",onClick:p,children:"\ucde8\uc18c"}),(0,r.jsx)("button",{className:"confirm-button px-4 py-2 bg-emerald-600 text-white border-0 rounded-md text-sm font-medium",onClick:d,disabled:!a||!l||parseInt(l)<=0||parseInt(l)>c,style:{cursor:!a||!l||parseInt(l)<=0||parseInt(l)>c?"not-allowed":"pointer",opacity:!a||!l||parseInt(l)<=0||parseInt(l)>c?.7:1},children:"\uc120\ubb3c\ud558\uae30"})]})]})})}),b=(0,a.memo)(function(e){var t;let{showDonationHistoryModal:s,setShowDonationHistoryModal:l,students:i=[],classCode:d,donations:c=[]}=e;const{user:u,userDoc:x}=(0,n.As)(),p=null===u||void 0===u?void 0:u.uid,b=(null===x||void 0===x?void 0:x.classCode)||d,[h,g]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[j,v]=(0,a.useState)(null),[N,C]=(0,a.useState)(0),w={table:{width:"100%",borderCollapse:"collapse",fontSize:"14px",borderRadius:"8px",overflow:"hidden",border:"1px solid #475569"},thead:{backgroundColor:"#1e293b"},th:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#cbd5e1",borderBottom:"1px solid #475569",position:"sticky",top:0,backgroundColor:"#1e293b",zIndex:1},td:{padding:"12px 16px",borderBottom:"1px solid #334155",color:"#cbd5e1"},tr:{transition:"background-color 0.2s"},emptyContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",backgroundColor:"#1e293b",borderRadius:"8px",border:"1px dashed #475569",textAlign:"center",color:"#94a3b8"},emptyIcon:{fontSize:"36px",marginBottom:"16px",color:"#64748b"}};(0,a.useEffect)(()=>{if(s){(()=>{if(y(!0),v(null),g([]),C(0),m.vF.log("[DonationHistoryModal] \ub370\uc774\ud130 \ucc98\ub9ac \uc2dc\uc791:",{userClassCode:b,studentsCount:i.length,donationsCount:c.length,students:i.map(e=>({id:e.id||e.uid,name:e.name||e.nickname,classCode:e.classCode})),donations:c}),!b)return v("\ud559\uae09 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc5c6\uc5b4 \uc751\ubaa8 \ub0b4\uc5ed\uc744 \ucc98\ub9ac\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void y(!1);try{const e=c||[],t=Array.isArray(i)?i:[],s={};let o=0;e.forEach(e=>{const t=Number(e.amount)||0,a=e.userId,n=e.userName||e.name||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790";a&&(s[a]||(s[a]={amount:0,name:n}),s[a].amount+=t,n&&"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790"!==n&&(s[a].name=n)),o+=t}),C(o),m.vF.log("[DonationHistoryModal] \uc751\ubaa8 \uc9d1\uacc4:",{donationsByStudent:s,totalAmount:o,uniqueDonors:Object.keys(s).length});const a=new Set;t.forEach(e=>{const t=e.id||e.uid||e.userId;t&&a.add(t)}),Object.keys(s).forEach(e=>{a.add(e)});const n=new Map;t.forEach(e=>{const t=e.id||e.uid||e.userId,s=e.name||e.nickname||"\uc54c \uc218 \uc5c6\ub294 \ud559\uc0dd";t&&n.set(t,s)}),Object.keys(s).forEach(e=>{n.has(e)&&"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790"===s[e].name||n.set(e,s[e].name)});const l=Array.from(a).map(e=>{var t;return{id:e,name:n.get(e)||"\uc54c \uc218 \uc5c6\ub294 \ud559\uc0dd",cumulativeAmount:(null===(t=s[e])||void 0===t?void 0:t.amount)||0,isCurrentUser:p&&e===p}}).sort((e,t)=>e.name.localeCompare(t.name,"ko"));m.vF.log("[DonationHistoryModal] \ucd5c\uc885 \ud559\uc0dd \ubaa9\ub85d:",{totalStudents:l.length,studentsWithDonations:l.filter(e=>e.cumulativeAmount>0).length,summary:l}),g(l)}catch(e){m.vF.error("[DonationHistoryModal] \uc751\ubaa8 \ub0b4\uc5ed \ucc98\ub9ac \uc911 \uc624\ub958:",e),v("\uc751\ubaa8 \ub0b4\uc5ed\uc744 \ucc98\ub9ac\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}})()}},[s,i,p,b,c]);const S=()=>{l(!1)},k=e=>"number"!==typeof e||isNaN(e)?"0":e.toLocaleString(),I=(null===(t=h.find(e=>e.isCurrentUser))||void 0===t?void 0:t.cumulativeAmount)||0;return(0,r.jsx)("div",{className:"".concat(s?"flex":"hidden"," fixed inset-0 bg-black/60 items-center justify-center z-[1000] p-5"),onClick:S,children:(0,r.jsxs)("div",{className:"bg-[#1a1a2e] rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-600",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"px-5 py-4 border-b border-slate-600 flex justify-between items-center bg-[#151528]",children:[(0,r.jsxs)("h3",{className:"m-0 text-lg font-semibold text-slate-100",children:["\uc6b0\ub9ac \ud559\uae09 \uc751\ubaa8 \ud604\ud669",b&&(0,r.jsx)("span",{className:"ml-2 text-sm bg-indigo-900/60 text-indigo-300 px-2 py-1 rounded-xl font-medium",children:b})]}),(0,r.jsx)("button",{onClick:S,className:"bg-transparent border-0 cursor-pointer text-xl text-slate-400 p-0 leading-none hover:text-slate-200","aria-label":"\ub2eb\uae30",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-5 overflow-y-auto max-h-[calc(85vh-120px)]",children:[(0,r.jsxs)("div",{className:"bg-indigo-900/30 px-4 py-3 rounded-lg mb-5 border border-indigo-700/50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-indigo-300",children:"\ub0b4 \ub204\uc801 \uc751\ubaa8\uc561"}),(0,r.jsxs)("span",{className:"text-base font-semibold text-indigo-400",children:[k(I)," \ucfe0\ud3f0"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-indigo-300",children:"\uc6b0\ub9ac \ud559\uae09 \ucd1d \uc751\ubaa8\uc561"}),(0,r.jsxs)("span",{className:"text-base font-semibold text-indigo-400",children:[k(N)," \ucfe0\ud3f0"]})]})]}),f?(0,r.jsx)("div",{className:"text-center py-10 text-slate-400",children:"\uc751\ubaa8 \ud604\ud669\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."}):j?(0,r.jsx)("div",{className:"text-red-400 text-center py-10",children:j}):(0,r.jsx)(r.Fragment,{children:h.length>0?(0,r.jsxs)("table",{style:w.table,children:[(0,r.jsx)("thead",{style:w.thead,children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:w.th,children:"\ud559\uc0dd \uc774\ub984"}),(0,r.jsx)("th",{style:(0,o.A)((0,o.A)({},w.th),{},{width:"150px",textAlign:"right"}),children:"\ub204\uc801 \uc751\ubaa8 \ucfe0\ud3f0"})]})}),(0,r.jsx)("tbody",{children:h.map((e,t)=>(0,r.jsxs)("tr",{style:(0,o.A)((0,o.A)({},w.tr),{},{backgroundColor:e.isCurrentUser?"rgba(99, 102, 241, 0.2)":t%2===0?"#1e293b":"#1a1a2e"}),onMouseOver:t=>{e.isCurrentUser||(t.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.1)")},onMouseOut:s=>{e.isCurrentUser||(s.currentTarget.style.backgroundColor=t%2===0?"#1e293b":"#1a1a2e")},children:[(0,r.jsxs)("td",{style:w.td,children:[e.name,e.isCurrentUser&&(0,r.jsx)("span",{className:"ml-2 text-xs bg-indigo-900/60 text-indigo-300 px-1.5 py-0.5 rounded-lg font-semibold align-middle",children:"\ub098"})]}),(0,r.jsxs)("td",{style:(0,o.A)((0,o.A)({},w.td),{},{textAlign:"right",color:e.cumulativeAmount>0?"#818cf8":"#64748b",fontWeight:e.cumulativeAmount>0?"600":"normal"}),children:[k(e.cumulativeAmount)," \ucfe0\ud3f0"]})]},e.id||t))})]}):(0,r.jsxs)("div",{style:w.emptyContainer,children:[(0,r.jsx)("div",{style:w.emptyIcon,children:"\ud83d\udc65"}),(0,r.jsx)("p",{className:"m-0 mb-2 text-base font-medium text-slate-300",children:"\ud559\uae09 \ud559\uc0dd \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uac70\ub098 \ub4f1\ub85d\ub41c \ud559\uc0dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,r.jsx)("p",{className:"m-0 text-sm text-slate-400",children:"\uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."})]})})]}),(0,r.jsx)("div",{className:"px-5 py-4 border-t border-slate-600 flex justify-end",children:(0,r.jsx)("button",{onClick:S,className:"px-4 py-2 bg-slate-600 text-slate-200 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-slate-500",children:"\ub2eb\uae30"})})]})})});var h=s(4589),g=s(9270);function f(){const{user:e,userDoc:t,users:s,classmates:i,allClassMembers:f,loading:y,optimisticUpdate:j}=(0,n.As)(),v=null===e||void 0===e?void 0:e.uid,N=null===t||void 0===t?void 0:t.classCode,[C,w]=(0,a.useState)(!0),S=(0,a.useRef)(!1),k=(0,a.useRef)(null),[I,A]=(0,a.useState)([]),M=(0,a.useMemo)(()=>(0,l.Qg)(l.Cn,"donateCoupon"),[]),D=(0,a.useMemo)(()=>(0,l.Qg)(l.Cn,"sellCoupon"),[]),G=(0,a.useMemo)(()=>(0,l.Qg)(l.Cn,"giftCoupon"),[]),_=N?"".concat(N,"_goal"):null,[z,F]=(0,a.useState)(1e3),[H,O]=(0,a.useState)(1e3);(0,a.useEffect)(()=>{v&&(async()=>{try{const e=(0,l.H9)(l.db,"settings","mainSettings"),t=await(0,l.x7)(e);if(t.exists()){const e=t.data();e.couponValue&&O(Number(e.couponValue))}}catch(e){m.vF.error("[CouponGoalPage] \ucfe0\ud3f0 \uac00\uce58 \uc124\uc815 \ub85c\ub4dc \uc2e4\ud328:",e)}})()},[v]);const[R,P]=(0,a.useState)(0),[L,W]=(0,a.useState)(0),[E,B]=(0,a.useState)(!1),[U,T]=(0,a.useState)(!1),[V,Q]=(0,a.useState)(!1),[q,J]=(0,a.useState)(!1),[Y,K]=(0,a.useState)(""),[X,Z]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(""),[oe,ae]=(0,a.useState)(!1),ne=(0,a.useCallback)(e=>{F(Number(e.targetAmount)||1e3),P(Number(e.progress)||0);const t=Array.isArray(e.donations)?e.donations.map(e=>{let t;return t=e.timestamp&&e.timestamp.toDate?e.timestamp.toDate().toISOString():e.timestamp&&e.timestamp.seconds?new Date(1e3*e.timestamp.seconds).toISOString():e.timestampISO?e.timestampISO:"string"===typeof e.timestamp?e.timestamp:(new Date).toISOString(),(0,o.A)((0,o.A)({},e),{},{amount:Number(e.amount)||0,timestamp:t,userId:e.userId||"",userName:e.userName||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790",message:e.message||"",classCode:e.classCode||N})}):[];A(t);const s=t.filter(e=>e.userId===v).reduce((e,t)=>e+t.amount,0);W(s)},[N,v]);k.current=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v&&N&&_){if(!S.current){S.current=!0,w(!0);try{const t="goal_".concat(_);if(!e){const e=(0,g.C7)(t,v,3e5);if(e)return ne(e),w(!1),void(S.current=!1)}const s=(0,l.H9)(l.db,"goals",_),o=await(0,l.x7)(s);if(o.exists()){const e=o.data();ne(e);const t="goal_".concat(_);(0,g._v)(t,v,e)}else m.vF.warn("[CouponGoalPage] \ubaa9\ud45c \ubb38\uc11c\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4")}catch(t){m.vF.error("[CouponGoalPage] \ubaa9\ud45c \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",t)}finally{w(!1),S.current=!1}}}else w(!1)},(0,a.useEffect)(()=>{!y&&e&&N&&_?k.current&&k.current():y||e?y&&w(!0):w(!1)},[y,e,N,_]),(0,a.useEffect)(()=>{B(R>=z&&z>0)},[R,z]);return y||C?(0,r.jsx)(h.AlchanLoading,{}):e?N||y?(0,r.jsx)("div",{className:"w-full min-h-full",style:{backgroundColor:"#0a0a12"},children:(0,r.jsxs)("div",{className:"w-full px-4 md:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-emerald-400 border-b-2 border-emerald-900 pb-3 mb-6",style:{textShadow:"0 0 10px rgba(52, 211, 153, 0.3)"},children:["\ud83c\udfaf \ucfe0\ud3f0 \ubaa9\ud45c (\ud559\uae09: ",N,")"]}),N&&_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{classCouponGoal:z,goalProgress:R,myContribution:L,currentCoupons:Number(null===t||void 0===t?void 0:t.coupons)||0,couponValue:H,setShowDonateModal:Q,setShowSellCouponModal:J,setShowDonationHistoryModal:ae,setShowGiftCouponModal:Z,goalAchieved:E,resetGoalButton:null!==t&&void 0!==t&&t.isAdmin||null!==t&&void 0!==t&&t.isSuperAdmin?async()=>{if(null!==t&&void 0!==t&&t.isAdmin||null!==t&&void 0!==t&&t.isSuperAdmin)if(N&&_){if(window.confirm("\uc815\ub9d0\ub85c ".concat(N," \ud559\uae09\uc758 \ucfe0\ud3f0 \ubaa9\ud45c\uc640 \uae30\uc5ec \uae30\ub85d\uc744 \ucd08\uae30\ud654\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){T(!0);try{const e=(0,l.wP)(l.db),t=(0,l.H9)(l.db,"goals",_),s=(0,l.P)((0,l.rJ)(l.db,"users"),(0,l._M)("classCode","==",N));(await(0,l.GG)(s)).forEach(t=>{const s=(0,l.H9)(l.db,"users",t.id);e.update(s,{myContribution:0,updatedAt:(0,l.O5)()})}),e.update(t,{progress:0,donations:[],donationCount:0,updatedAt:(0,l.O5)(),resetAt:(0,l.O5)(),resetBy:v}),await e.commit(),localStorage.removeItem("goalDonationHistory_".concat(N,"_goal")),localStorage.removeItem("firestore_cache_goal_".concat(_,"_").concat(v)),W(0),P(0),A([]),alert("\ud559\uae09(".concat(N,")\uc758 \ucfe0\ud3f0 \ubaa9\ud45c\uc640 \uae30\uc5ec \uae30\ub85d\uc774 \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(e){alert("\ubaa9\ud45c \ucd08\uae30\ud654 \uc624\ub958: ".concat(e.message))}finally{T(!1)}}}else alert("\ud559\uae09 \ucf54\ub4dc\ub098 \ubaa9\ud45c \uc815\ubcf4\uac00 \uc5c6\uc5b4 \ucd08\uae30\ud654\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else alert("\uad00\ub9ac\uc790\ub9cc \ucd08\uae30\ud654 \uac00\ub2a5\ud569\ub2c8\ub2e4.")}:null,isResettingGoal:U}),(0,r.jsxs)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"rgba(20, 20, 35, 0.85)",borderRadius:"8px",border:"1px solid rgba(0, 255, 242, 0.15)"},children:[(0,r.jsx)("h4",{style:{fontSize:"14px",color:"#00fff2",marginBottom:"10px",fontWeight:"600"},children:"\ud83d\udd27 \ub370\uc774\ud130 \uad00\ub9ac \ub3c4\uad6c"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,r.jsx)("button",{onClick:async()=>{if(_&&N){w(!0);try{localStorage.removeItem("firestore_cache_goal_".concat(_,"_").concat(v));const e=(0,l.H9)(l.db,"goals",_),t=await(0,l.x7)(e);if(t.exists()){const e=t.data();F(Number(e.targetAmount)||1e3),P(Number(e.progress)||0);const s=Array.isArray(e.donations)?e.donations.map(e=>{let t;return t=e.timestamp&&e.timestamp.toDate?e.timestamp.toDate().toISOString():e.timestamp&&e.timestamp.seconds?new Date(1e3*e.timestamp.seconds).toISOString():e.timestampISO?e.timestampISO:"string"===typeof e.timestamp?e.timestamp:(new Date).toISOString(),(0,o.A)((0,o.A)({},e),{},{amount:Number(e.amount)||0,timestamp:t,userId:e.userId||"",userName:e.userName||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790",message:e.message||"",classCode:e.classCode||N})}):[];A(s),(0,g._v)("goal_".concat(_),v,e),alert("\ubaa9\ud45c \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc!\n\ubaa9\ud45c \uc9c4\ud589\ub960: ".concat(e.progress||0,"/").concat(e.targetAmount||1e3,"\n\uc751\ubaa8 \ub0b4\uc5ed: ").concat(s.length,"\uac1c"))}else alert("\ubaa9\ud45c \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud574\uc8fc\uc138\uc694.")}catch(e){alert("\ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(e.message))}finally{w(!1)}}else alert("\ud559\uae09 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},disabled:C,style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"\ud83d\udcca \ubaa9\ud45c \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68"}),(0,r.jsx)("button",{onClick:()=>{const e={userId:v,currentUserClassCode:N,currentGoalId:_,goalProgress:R,classCouponGoal:z,myContribution:L,donationsCount:I.length,donations:I,userCoupons:null===t||void 0===t?void 0:t.coupons,userCash:null===t||void 0===t?void 0:t.cash};m.vF.log("[CouponGoalPage Debug]",e),alert("\ub514\ubc84\uadf8 \uc815\ubcf4\uac00 \ucf58\uc194\uc5d0 \ucd9c\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc751\ubaa8 \ub0b4\uc5ed: ".concat(I.length,"\uac1c\n\ubaa9\ud45c \uc9c4\ud589\ub960: ").concat(R,"/").concat(z))},style:{padding:"8px 12px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"\ud83d\udd0d \ub514\ubc84\uadf8 \uc815\ubcf4 \ud655\uc778"}),(0,r.jsx)("button",{onClick:()=>{localStorage.clear(),alert("\ub85c\uceec \uce90\uc2dc\uac00 \ubaa8\ub450 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud574\uc8fc\uc138\uc694."),window.location.reload()},style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"\ud83d\uddd1\ufe0f \uce90\uc2dc \uc0ad\uc81c \ud6c4 \uc0c8\ub85c\uace0\uce68"})]}),(0,r.jsxs)("p",{style:{fontSize:"11px",color:"#868e96",marginTop:"8px",marginBottom:"0",lineHeight:"1.4"},children:['\u2022 \uc751\ubaa8 \ub0b4\uc5ed\uc774 \ud45c\uc2dc\ub418\uc9c0 \uc54a\uc73c\uba74 "\ubaa9\ud45c \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68" \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694',(0,r.jsx)("br",{}),'\u2022 \ubb38\uc81c\uac00 \uc9c0\uc18d\ub418\uba74 "\uce90\uc2dc \uc0ad\uc81c \ud6c4 \uc0c8\ub85c\uace0\uce68"\uc744 \uc2dc\ub3c4\ud574\ubcf4\uc138\uc694',(0,r.jsx)("br",{}),"\u2022 \ud604\uc7ac \uc0c1\ud0dc: \uc751\ubaa8 \ub0b4\uc5ed ",I.length,"\uac1c, \ubaa9\ud45c \uc9c4\ud589\ub960 ",R,"/",z]})]})]}),V&&N&&_&&(0,r.jsx)(u,{showDonateModal:V,setShowDonateModal:Q,currentCoupons:Number(null===t||void 0===t?void 0:t.coupons)||0,onDonate:async(e,s)=>{if(!v||!N||!t)return alert("\uc0ac\uc6a9\uc790 \ub610\ub294 \ud559\uae09 \uc815\ubcf4\uac00 \uc5c6\uc5b4 \uc751\ubaa8\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),!1;const o=parseInt(e,10);if(isNaN(o)||o<=0)return alert("\uc720\ud6a8\ud55c \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),!1;j&&j({coupons:-o}),W(e=>e+o),P(e=>e+o),w(!0);try{await M({amount:o,message:s});const e="goal_".concat(_);return localStorage.removeItem("firestore_cache_".concat(e,"_").concat(v)),localStorage.removeItem("goalDonationHistory_".concat(N,"_goal")),S.current=!1,k.current&&await k.current(),alert("".concat(o," \ucfe0\ud3f0 \uc751\ubaa8 \uc644\ub8cc!")),Q(!1),!0}catch(a){return m.vF.error("[CouponGoalPage] \uc751\ubaa8 \uc624\ub958 (\uc0c1\uc138):",{error:a,message:a.message,code:a.code,details:a.details,stack:a.stack}),alert("\uc751\ubaa8 \uc624\ub958: ".concat(a.message)),j&&j({coupons:o}),!1}finally{w(!1)}},classCode:N}),q&&(0,r.jsx)(x,{showSellCouponModal:q,setShowSellCouponModal:J,currentCoupons:Number(null===t||void 0===t?void 0:t.coupons)||0,couponValue:H,sellAmount:Y,setSellAmount:K,SellCoupon:async()=>{const e=parseInt(Y,10);if(isNaN(e)||e<=0)alert("\uc720\ud6a8\ud55c \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else{j&&j({coupons:-e,cash:e*H}),w(!0);try{await D({amount:e}),alert("".concat(e,"\uac1c \ucfe0\ud3f0\uc744 \ud310\ub9e4\ud588\uc2b5\ub2c8\ub2e4.")),J(!1),K(""),setTimeout(()=>{S.current=!1,k.current&&k.current()},500)}catch(t){alert("\ud310\ub9e4 \uc624\ub958: ".concat(t.message))}finally{w(!1)}}}}),X&&(0,r.jsx)(p,{showGiftCouponModal:X,setShowGiftCouponModal:Z,recipients:i,giftRecipient:$,setGiftRecipient:ee,giftAmount:te,setGiftAmount:se,handleGiftCoupon:async()=>{m.vF.log("handleGiftCoupon called");const e=s.find(e=>e.id===$),t=parseInt(te,10);if(e){if(isNaN(t)||t<=0)alert("\uc62c\ubc14\ub978 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(j&&j({coupons:-t}),window.confirm("".concat(e.name,"\ub2d8\uc5d0\uac8c \ucfe0\ud3f0 ").concat(t,"\uac1c\ub97c \uc120\ubb3c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){w(!0);try{await G({recipientId:e.id,amount:t,message:""}),alert("\ucfe0\ud3f0 \uc120\ubb3c\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Z(!1),ee(""),se(""),setTimeout(()=>{S.current=!1,k.current&&k.current()},500)}catch(o){alert("\uc120\ubb3c \uc624\ub958: ".concat(o.message)),j&&j({coupons:t})}finally{w(!1)}}}else alert("\ubc1b\ub294 \uc0ac\ub78c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},currentCoupons:Number(null===t||void 0===t?void 0:t.coupons)||0,userId:v}),oe&&N&&_&&(0,r.jsx)(b,{showDonationHistoryModal:oe,setShowDonationHistoryModal:ae,students:f||[],classCode:N,donations:I})]})}):(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",fontSize:"1.2em",color:"#ef4444"},children:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \ucf54\ub4dc\ub97c \ud560\ub2f9\ubc1b\uc73c\uc138\uc694."}):(0,r.jsx)(c.A,{})}}}]);
//# sourceMappingURL=367.869fc5d1.chunk.js.map