"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[451],{9451:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(5043),i=t(3216),n=t(791),c=t(5472);const o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBym1FtGjHWM5JdZ7GWRIkYGOftQGdUDgc",REACT_APP_FIREBASE_APP_ID:"1:244696722605:web:5fcc744923422b091b6a24",REACT_APP_FIREBASE_AUTH_DOMAIN:"inconomysu-class.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://inconomysu-class-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-QXND3N8942",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"244696722605",REACT_APP_FIREBASE_PROJECT_ID:"inconomysu-class",REACT_APP_FIREBASE_STORAGE_BUCKET:"inconomysu-class.firebasestorage.app"}.REACT_APP_YOUTUBE_API_KEY;var l=t(579);const r=()=>{const{roomId:e}=(0,i.g)(),[s,t]=(0,a.useState)(""),[r,u]=(0,a.useState)(""),[d,m]=(0,a.useState)([]),[E,_]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[A,S]=(0,a.useState)(!1),[b,R]=(0,a.useState)(""),[x,P]=(0,a.useState)(!1),j=(0,i.Zp)();(0,a.useEffect)(()=>{(async()=>{const s=await(0,c.x7)((0,c.H9)(n.db,"musicRooms",e));s.exists()?t(s.data().name):R("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubc29\uc785\ub2c8\ub2e4.")})()},[e]);return b?(0,l.jsx)("div",{className:"student-request-container error-container",children:b}):(0,l.jsxs)("div",{className:"student-request-container",children:[(0,l.jsx)("h2",{children:s}),x?(0,l.jsxs)("div",{className:"success-section",children:[(0,l.jsxs)("h3",{children:['"',E.snippet.title,'"']}),(0,l.jsx)("p",{children:"\uc74c\uc545 \uc2e0\uccad\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,l.jsxs)("div",{className:"success-actions",children:[(0,l.jsx)("button",{onClick:()=>{P(!1),_(null),u(""),m([])},className:"action-btn continue-btn",children:"\uacc4\uc18d \uc2e0\uccad\ud558\uae30"}),(0,l.jsx)("button",{onClick:()=>j("/learning-board/music-request"),className:"action-btn back-btn",children:"\ub3cc\uc544\uac00\uae30"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim()){S(!0),R("");try{const e=await(async e=>{const s=await fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&q=".concat(e,"&type=video&key=").concat(o,"&maxResults=10"));if(!s.ok){const e=await s.json();throw console.error("YouTube API Error:",e),new Error("YouTube \uc601\uc0c1\uc744 \uac80\uc0c9\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. API \ud0a4\ub098 \uc694\uccad\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")}return(await s.json()).items})(r);m(e),P(!1)}catch(s){R("YouTube \uc601\uc0c1\uc744 \uac80\uc0c9\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),console.error(s)}finally{S(!1)}}},className:"search-form",children:[(0,l.jsx)("input",{type:"text",className:"search-input",value:r,onChange:e=>u(e.target.value),placeholder:"\uc2e0\uccad\ud560 \ub178\ub798 \uc81c\ubaa9\uc774\ub098 \uc544\ud2f0\uc2a4\ud2b8\ub97c \uac80\uc0c9\ud558\uc138\uc694"}),(0,l.jsx)("button",{type:"submit",className:"search-btn",disabled:A,children:A?"\uac80\uc0c9 \uc911...":"\uac80\uc0c9"})]}),d.length>0&&(0,l.jsxs)("div",{className:"search-results",children:[(0,l.jsx)("h4",{children:"\uac80\uc0c9 \uacb0\uacfc"}),(0,l.jsx)("ul",{className:"video-list",children:d.map(e=>(0,l.jsxs)("li",{className:"video-item ".concat((null===E||void 0===E?void 0:E.id.videoId)===e.id.videoId?"selected":""),onClick:()=>_(e),children:[(0,l.jsx)("img",{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}),(0,l.jsx)("p",{children:e.snippet.title})]},e.id.videoId))})]}),E&&(0,l.jsxs)("div",{className:"request-section",children:[(0,l.jsx)("h4",{children:"\uc2e0\uccad \uc815\ubcf4"}),(0,l.jsxs)("p",{children:["\uc120\ud0dd\ub41c \uace1: ",E.snippet.title]}),(0,l.jsx)("input",{type:"text",className:"requester-name-input",value:h,onChange:e=>p(e.target.value),placeholder:"\uc2e0\uccad\uc790 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"}),(0,l.jsx)("button",{onClick:async()=>{if(E&&h.trim())try{await(0,c.gS)((0,c.rJ)(n.db,"musicRooms",e,"playlist"),{videoId:E.id.videoId,title:E.snippet.title,requesterName:h.trim(),requestedAt:(0,c.O5)()}),P(!0)}catch(s){R("\uc74c\uc545\uc744 \uc2e0\uccad\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),console.error(s)}else alert("\uc601\uc0c1\uacfc \uc2e0\uccad\uc790 \uc774\ub984\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},className:"request-btn",children:"\uc774 \uace1\uc73c\ub85c \uc2e0\uccad\ud558\uae30"})]})]})]})}}}]);
//# sourceMappingURL=451.1ea5accd.chunk.js.map