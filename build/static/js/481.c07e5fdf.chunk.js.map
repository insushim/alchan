{"version":3,"file":"static/js/481.c07e5fdf.chunk.js","mappings":"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","sources":["components/LoginWarning.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","utils/jobTaskRewards.js","components/TaskItem.js","components/JobList.js","components/CommonTaskList.js","services/optimizedFirebaseService.js","pages/admin/SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","pages/dashboard/Dashboard.js","pages/market/ItemStore.js","pages/my-items/MyItems.js","components/AlchanLayout.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","utils/avatarSystem.js","components/modals/DonateCouponModal.js","components/Avatar.js","utils/achievementSystem.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","utils/levelSystem.js","pages/admin/AdminItemPage.js","utils/numberFormatter.js","components/DailyReward.js","contexts/ItemContext.js","components/modals/TransferModal.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"../styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronRight, ChevronDown,\r\n  Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, Sparkles, LogOut,\r\n  Boxes, Store, RefreshCw, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  Briefcase, ListTodo, LayoutDashboard\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category -  ( )\r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n\r\n  //  /  \r\n  { id: 'adminUserGroup', label: '  ', icon: Users, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'classMemberManagement', label: ' ', icon: Users, path: '/admin/class-members', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminAssetGroup', label: '  ', icon: Banknote, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminSettingsGroup', label: '  ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminAppSettings', label: '/ ', icon: Target, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'taskManagement', label: ' ', icon: ListTodo, path: '/admin/task-management', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'jobManagement', label: ' ', icon: Briefcase, path: '/admin/job-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'salarySettings', label: ' ', icon: Banknote, path: '/admin/salary-settings', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //   \r\n  { id: 'adminSystemGroup', label: ' ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminPage', label: ' ', icon: Settings, path: '/admin/page', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = useCallback((categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  }, []);\r\n\r\n  const isActive = useCallback((path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  }, [location.pathname]);\r\n\r\n  const hasActiveChild = useCallback((categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  }, [isActive]);\r\n\r\n  const handleItemClick = useCallback((item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  }, [navigate, isMobile, onClose]);\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div className=\"h-16 min-h-16 flex items-center justify-center bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600\">\r\n          <div className=\"p-1 bg-white/10 rounded-lg shadow-md\">\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div className=\"h-[72px] min-h-[72px] m-3 flex items-center relative rounded-2xl bg-gradient-to-br from-[#0a0a12]/95 to-[#141423]/95 border border-[#00fff2]/20 shadow-[0_0_15px_rgba(0,255,242,0.1)]\">\r\n          {/*   */}\r\n          <div className=\"absolute -top-5 -right-5 w-20 h-20 bg-white/10 rounded-full\" />\r\n          <div className=\"absolute -bottom-7 -left-2 w-15 h-15 bg-white/[0.08] rounded-full\" />\r\n\r\n          <div className=\"flex items-center gap-3.5 px-4 w-full relative z-10\">\r\n            {/*   */}\r\n            <div className=\"p-1.5 bg-white/5 rounded-xl shadow-md border border-white/10\">\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n              <span className=\"text-[22px] font-black text-[#00fff2] leading-tight font-jua drop-shadow-[0_0_10px_rgba(0,255,242,0.5)]\"></span>\r\n              <span className=\"text-[11px] font-bold text-[#e8e8ff]/70 tracking-[0.2em] leading-tight mt-0.5\">ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full bg-white/20 border-0 text-white cursor-pointer\"\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { logger } from '../utils/logger';\nimport {\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ',   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        logger.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      logger.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\nimport { formatKoreanNumber } from '../utils/numberFormatter';\r\n\r\n//   - numberFormatter.js \r\nconst formatMoney = (amount) => formatKoreanNumber(amount, '');\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer bg-[#a78bfa]/20\"\r\n            >\r\n              <span className=\"text-sm\">{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span className=\"text-[9px] text-gray-400\">LEVEL</span>\r\n                <span className=\"text-xs font-bold\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span className=\"text-sm ml-0.5\">{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10 h-16 min-h-16 max-h-16 px-4\"\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            className=\"p-2 rounded-lg border border-[#00fff2]/10 bg-white/5 text-white cursor-pointer flex items-center justify-center\"\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div className=\"text-[15px] font-bold text-white whitespace-nowrap leading-tight\">\r\n               <span className=\"text-[#00fff2] font-jua\"></span> ! \r\n            </div>\r\n            <div className=\"text-xs text-slate-400 whitespace-nowrap leading-tight\">{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-emerald-900/10 rounded-lg text-emerald-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center font-bold text-xs\"></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-rose-900/10 rounded-lg text-rose-400\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center\"><Gift size={14} /></div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold opacity-70 leading-tight\"></div>\r\n              <div className=\"text-[13px] font-bold whitespace-nowrap leading-tight\">{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 rounded-lg cursor-pointer transition-all duration-200 hover:bg-violet-500/20\"\r\n          >\r\n            <div\r\n              className=\"flex items-center justify-center w-7 h-7 rounded-md text-sm\"\r\n              style={{ background: levelInfo?.color || '#a78bfa' }}\r\n            >\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-[10px] font-semibold leading-tight\" style={{ color: levelInfo?.color || '#a78bfa' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div className=\"text-[11px] font-bold text-[#e8e8ff] whitespace-nowrap leading-tight\">\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div\r\n                className=\"flex items-center gap-1 ml-1 px-1.5 py-0.5 rounded\"\r\n                style={{\r\n                  background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                             bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                             bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                }}\r\n              >\r\n                <span className=\"text-xs\">{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"relative\" ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"flex items-center gap-2 pl-3 border-none bg-transparent cursor-pointer\"\r\n            >\r\n              <div className=\"text-right\">\r\n                <div className=\"text-[13px] font-bold text-white whitespace-nowrap leading-tight\">{displayName}</div>\r\n                <div className=\"text-[11px] text-indigo-400 font-medium whitespace-nowrap leading-tight\">{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                className=\"cursor-pointer\"\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  }, [location.pathname]);\r\n\r\n  const handleTabClick = useCallback((tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      logger.log('PWA  ');\r\n    } else {\r\n      logger.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport { logger } from \"../utils/logger\";\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      logger.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                logger.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              logger.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      logger.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        logger.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      logger.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      logger.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect, memo, useCallback } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"../utils/jobTaskRewards\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nconst TaskItem = memo(function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    logger.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      logger.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    logger.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    logger.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      logger.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    lineHeight: \"1.4\",\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[10000]\" style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div className=\"rounded-[20px] max-w-[600px]\" style={{...mobileModalContentStyle, width: isMobile ? \"95%\" : \"90%\"}} onClick={(e) => e.stopPropagation()}>\r\n          <h3 className=\"text-center font-bold\" style={{...mobileModalTitleStyle, marginBottom: isMobile ? \"8px\" : \"10px\"}}>  </h3>\r\n          <p className=\"text-center\" style={{...mobileModalSubtitleStyle, marginBottom: isMobile ? \"20px\" : \"30px\"}}>     !</p>\r\n\r\n          <div className=\"flex justify-center flex-wrap\" style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              className=\"cursor-pointer\"\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div className=\"relative w-full h-full\" style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{...cardFrontStyle, backfaceVisibility: \"hidden\"}}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div className=\"text-2xl font-bold\" style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div className=\"absolute w-full h-full rounded-2xl flex flex-col items-center justify-center\" style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle), backfaceVisibility: \"hidden\" }}>\r\n                  <div className=\"text-4xl font-bold mb-2.5\" style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div className=\"text-lg\" style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"flex flex-row items-center justify-between relative rounded-lg mb-2 transition-all\"\r\n        style={{\r\n          ...taskItemStyle,\r\n          cursor: isCompleted ? \"default\" : \"pointer\",\r\n          gap: isMobile ? \"6px\" : \"8px\",\r\n        }}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div className=\"flex items-center flex-grow min-w-0 overflow-hidden\" style={taskInfoStyle}>\r\n          <span className=\"font-semibold overflow-hidden text-ellipsis whitespace-nowrap flex-1 min-w-0\" style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex items-center flex-shrink-0\" style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span className=\"rounded-lg font-medium whitespace-nowrap\" style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                className=\"cursor-pointer p-1 flex items-center justify-center\"\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div className=\"absolute left-1/2 -translate-x-1/2 rounded-md font-medium whitespace-nowrap z-10 pointer-events-none\" style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div className=\"absolute\" style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskItem;\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  bottom: \"calc(100% + 8px)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  fontSize: \"12px\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  color: \"#a0a0c0\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  gap: \"20px\",\r\n};\r\n\r\nconst cardStyle = {\r\n  perspective: \"1000px\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  backgroundColor: \"#fff\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  color: \"#667eea\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  color: \"#666\",\r\n};","import React, { memo } from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nconst JobList = memo(function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      className=\"flex flex-col h-full rounded-lg overflow-hidden mb-4\"\r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        backdropFilter: \"blur(5px)\",\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container flex justify-between items-center\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text font-bold\"\r\n          style={{\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0 mr-2\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              className=\"cursor-pointer p-0\"\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div className=\"flex-grow overflow-y-auto\" style={{ padding: isMobile ? \"8px\" : \"10px\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            className=\"text-center my-2.5\"\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            className=\"w-full cursor-pointer rounded-md mt-0 transition-all\"\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default JobList;\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div className=\"p-5 text-center\" style={{ color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div className=\"grid\" style={{\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    logger.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      logger.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/pages/admin/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../../firebase\";\r\nimport \"./SystemMonitoring.css\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        logger.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        logger.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../pages/admin/SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\n//    \r\nconst ClassDataDeletionSection = ({ userClassCode, isAdmin, isSuperAdmin }) => {\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleDeleteClassData = async () => {\r\n    if (!userClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (deleteConfirmText !== \"\") {\r\n      alert(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    //  \r\n    const finalConfirm = window.confirm(\r\n      ` '${userClassCode}'     ?\\n\\n        :\\n-   (role: 'student')\\n-  \\n-  \\n\\n(admin)  .`\r\n    );\r\n\r\n    if (!finalConfirm) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // 1.    (role === 'student' AND classCode === userClassCode)\r\n      const usersRef = firestoreCollection(db, \"users\");\r\n      const studentsQuery = firebaseQuery(\r\n        usersRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode),\r\n        firebaseWhere(\"role\", \"==\", \"student\")\r\n      );\r\n      const studentsSnapshot = await firebaseGetDocs(studentsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${studentsSnapshot.size}`);\r\n\r\n      // 2.   \r\n      const activityLogsRef = firestoreCollection(db, \"activity_logs\");\r\n      const activityLogsQuery = firebaseQuery(\r\n        activityLogsRef,\r\n        firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n      );\r\n      const activityLogsSnapshot = await firebaseGetDocs(activityLogsQuery);\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${activityLogsSnapshot.size}`);\r\n\r\n      // 3.    ( userId )\r\n      const studentIds = studentsSnapshot.docs.map(doc => doc.id);\r\n      let transactionsToDelete = [];\r\n\r\n      if (studentIds.length > 0) {\r\n        // Firestore 'in'   10   \r\n        const batches = [];\r\n        for (let i = 0; i < studentIds.length; i += 10) {\r\n          batches.push(studentIds.slice(i, i + 10));\r\n        }\r\n\r\n        for (const batch of batches) {\r\n          const transactionsRef = firestoreCollection(db, \"transactions\");\r\n          const transactionsQuery = firebaseQuery(\r\n            transactionsRef,\r\n            firebaseWhere(\"userId\", \"in\", batch)\r\n          );\r\n          const transactionsSnapshot = await firebaseGetDocs(transactionsQuery);\r\n          transactionsToDelete.push(...transactionsSnapshot.docs);\r\n        }\r\n      }\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${transactionsToDelete.length}`);\r\n\r\n      // 4.    (Firestore   500 )\r\n      const allDocsToDelete = [\r\n        ...studentsSnapshot.docs,\r\n        ...activityLogsSnapshot.docs,\r\n        ...transactionsToDelete,\r\n      ];\r\n\r\n      logger.log(`[ClassDataDeletion]   : ${allDocsToDelete.length}`);\r\n\r\n      //   \r\n      const BATCH_SIZE = 500;\r\n      for (let i = 0; i < allDocsToDelete.length; i += BATCH_SIZE) {\r\n        const batch = writeBatch(db);\r\n        const batchDocs = allDocsToDelete.slice(i, i + BATCH_SIZE);\r\n\r\n        batchDocs.forEach((docSnap) => {\r\n          batch.delete(docSnap.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n        logger.log(`[ClassDataDeletion]  ${Math.floor(i / BATCH_SIZE) + 1}  `);\r\n      }\r\n\r\n      alert(\r\n        `   !\\n\\n :\\n-  : ${studentsSnapshot.size}\\n-  : ${activityLogsSnapshot.size}\\n-  : ${transactionsToDelete.length}`\r\n      );\r\n\r\n      logger.log(`[ClassDataDeletion] ${userClassCode}    `);\r\n\r\n      // \r\n      setDeleteConfirmText(\"\");\r\n      setShowConfirmation(false);\r\n    } catch (error) {\r\n      logger.error(\"[ClassDataDeletion]   :\", error);\r\n      alert(` : ${error.message}\\n\\n    .  .`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"section-card mt-6 border-2 border-red-500/50 bg-red-900/10\">\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <span className=\"text-2xl\"></span>\r\n        <h3 className=\"text-xl font-bold text-red-400\"> :   </h3>\r\n      </div>\r\n\r\n      <div className=\"bg-red-900/20 rounded-lg p-4 mb-4 border border-red-500/30\">\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n          <strong>    !</strong>\r\n        </p>\r\n        <p className=\"text-sm text-red-200 mb-2\">\r\n                .\r\n        </p>\r\n        <p className=\"text-sm text-gray-300 mb-2\"> :</p>\r\n        <ul className=\"text-sm text-gray-300 list-disc list-inside ml-2 space-y-1\">\r\n          <li>  (role: 'student')</li>\r\n          <li>  (activity_logs)</li>\r\n          <li>  (transactions)</li>\r\n        </ul>\r\n        <p className=\"text-sm text-green-300 mt-2\">\r\n           (admin)  .\r\n        </p>\r\n        <p className=\"text-sm text-green-300\">\r\n           , ,    .\r\n        </p>\r\n      </div>\r\n\r\n      {!showConfirmation ? (\r\n        <button\r\n          onClick={() => setShowConfirmation(true)}\r\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\r\n        >\r\n             \r\n        </button>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                \"<strong className=\"text-red-400\"></strong>\"  :\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={(e) => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              disabled={isDeleting}\r\n              className=\"w-full px-4 py-2 bg-[#1a1a2e] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleDeleteClassData}\r\n              disabled={isDeleting || deleteConfirmText !== \"\"}\r\n              className={`px-6 py-2 rounded-lg font-medium transition-colors ${\r\n                deleteConfirmText === \"\" && !isDeleting\r\n                  ? \"bg-red-600 hover:bg-red-700 text-white\"\r\n                  : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\r\n              }`}\r\n            >\r\n              {isDeleting ? \" ...\" : \"  \"}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowConfirmation(false);\r\n                setDeleteConfirmText(\"\");\r\n              }}\r\n              disabled={isDeleting}\r\n              className=\"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode]); // db     \r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userClassCode, tempTaxRate, tempSalaryIncreaseRate]); // db salarySettings.x     \r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      logger.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      logger.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        logger.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        logger.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      logger.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      logger.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        logger.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      logger.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      logger.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, userClassCode]); // db     \r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          logger.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isSuperAdmin] // db     \r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      logger.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        logger.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]); // preloadAdminData  adminSelectedMenu  loadClassMembers, loadStudents, loadSalarySettings    \r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'marketControl') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      logger.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs flex flex-wrap gap-2.5 p-4 rounded-2xl border border-gray-700\" style={{ background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)' }}>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"taskManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"taskManagement\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"jobSettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"jobSettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"studentManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"studentManagement\");\r\n              loadStudents();\r\n            }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"salarySettings\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"salarySettings\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"financialProducts\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"financialProducts\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"marketControl\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"marketControl\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"parkingAccount\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"parkingAccount\")}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"memberManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"memberManagement\");\r\n              loadClassMembers();\r\n            }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"databaseManagement\" ? \"active\" : \"\"}`}\r\n            onClick={() => setAdminSelectedMenu(\"databaseManagement\")}\r\n          >\r\n            \r\n          </button>\r\n          {isSuperAdmin && (\r\n            <button\r\n              className={`px-4 py-2.5 rounded-2xl text-[13px] whitespace-nowrap ${adminSelectedMenu === \"systemManagement\" ? \"active\" : \"\"}`}\r\n              onClick={() => setAdminSelectedMenu(\"systemManagement\")}\r\n            >\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"taskManagement\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          logger.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        logger.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          logger.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        logger.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  logger.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobSettings\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    logger.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      logger.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              logger.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentManagement\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"financialProducts\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs flex gap-2 mb-4\">\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button px-4 py-2 rounded-lg cursor-pointer font-semibold ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div\r\n                  className={`message-box ${financialMessage.type} p-3 mb-4 rounded-lg text-white`}\r\n                  style={{\r\n                    background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div className=\"grid grid-cols-3 gap-3 mb-3\">\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block mb-1 text-gray-400 text-xs\"> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input w-full\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button w-full\">\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 className=\"mb-3 text-white\">\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"marketControl\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <p className=\"text-white\">\r\n                     :{\" \"}\r\n                    <span\r\n                      className=\"font-bold px-3 py-1 rounded-2xl\"\r\n                      style={{\r\n                        color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                        background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                      }}\r\n                    >\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 mb-4\">\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button flex-1\"\r\n                    style={{\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button flex-1\"\r\n                    style={{\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400\">\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div className=\"p-3 mb-4 rounded-lg bg-amber-600 text-white text-center\">\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl bg-red-500/10 border border-red-500/30\">\r\n                <h4 className=\"mb-3 text-red-500\">   </h4>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  className=\"w-full p-3 rounded-lg bg-orange-600 text-white border-0 cursor-pointer font-semibold\"\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"parkingAccount\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div\r\n                  className=\"p-3 mb-4 rounded-lg text-white\"\r\n                  style={{\r\n                    background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  }}\r\n                >\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div className=\"p-4 rounded-xl mb-4 bg-gray-700/50\">\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-400 text-sm\">  </p>\r\n                  <p className=\"text-green-500 text-[32px] font-bold\">\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"block mb-2 text-gray-400\">\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input mb-3\"\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button w-full\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-400 mt-3\">\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               -  (    )\r\n            ======================================== */}\r\n\r\n        {/*     */}\r\n        {adminSelectedMenu === \"memberManagement\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"salarySettings\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"databaseManagement\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card min-h-[500px] max-h-[70vh] overflow-auto\">\r\n              <AdminDatabase />\r\n            </div>\r\n\r\n            {/*    */}\r\n            <div className=\"section-card mt-6 p-6 rounded-2xl bg-violet-500/5 border border-violet-500/30\">\r\n              <h3 className=\"text-lg font-bold text-violet-300 mb-3\">  </h3>\r\n              <p className=\"text-sm text-gray-400 mb-4\">    .</p>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <a\r\n                  href=\"/consent-form\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    ( )\r\n                </a>\r\n                <a\r\n                  href=\"/privacy\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                   \r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  :    */}\r\n            <ClassDataDeletionSection\r\n              userClassCode={userClassCode}\r\n              isAdmin={isAdmin}\r\n              isSuperAdmin={isSuperAdmin}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"systemManagement\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { logger } from \"../utils/logger\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    gcTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    gcTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    gcTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    gcTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      logger.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      logger.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/pages/dashboard/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db, functions, copyDefaultDataToNewClass } from \"../../firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from '../../utils/numberFormatter';\r\nimport JobList from \"../../components/JobList\";\r\nimport CommonTaskList from \"../../components/CommonTaskList\";\r\nimport TransferModal from \"../../components/modals/TransferModal\";\r\nimport DonateCouponModal from \"../../components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"../../components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"../../components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"../../components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"../../components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"../../components/PageWrapper\";\r\nimport globalCacheService from \"../../services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      logger.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      logger.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    logger.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      logger.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        logger.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      logger.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    logger.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      logger.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    const manager = realtimeManager.current;\r\n    return () => {\r\n      manager.removeAllListeners();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      logger.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          logger.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      logger.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        logger.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          logger.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        logger.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    logger.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          logger.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        //       (CLASS2025 ,  )\r\n        try {\r\n          const copyResult = await copyDefaultDataToNewClass(trimmedCode);\r\n          if (copyResult.success) {\r\n            alert(`  '${trimmedCode}' !\\n\\n   :\\n-  ${copyResult.results.jobs.copied}\\n-   ${copyResult.results.storeItems.copied}`);\r\n          } else {\r\n            alert(`  '${trimmedCode}' .\\n\\n     : ${copyResult.error}\\n(  )`);\r\n          }\r\n        } catch (copyError) {\r\n          logger.error(\"   :\", copyError);\r\n          alert(`  '${trimmedCode}' .\\n\\n    \\n(  )`);\r\n        }\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        logger.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    logger.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      logger.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      logger.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    logger.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      logger.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        logger.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      logger.log(\"[Dashboard]    \");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [userDoc?.classCode, setUserDoc]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\" className=\"!bg-gradient-to-r !from-red-500 !to-orange-500 !text-white !font-bold !shadow-lg !shadow-red-500/30 !border-2 !border-red-400 !text-sm\">  </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\nimport { logger } from '../../utils/logger';\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/pages/my-items/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\";\r\nimport \"../../styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"../../components/LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"../../firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // isAdmin   \r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n\r\n        // eslint-disable-next-line react-hooks/rules-of-hooks\r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      logger.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      logger.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    logger.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      logger.log('[MyItems]   inventory   :');\r\n      logger.log(':', allInventoryDocs.size);\r\n      logger.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      logger.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      logger.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          logger.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          logger.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      logger.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            logger.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            logger.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            logger.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            logger.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          logger.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          logger.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          logger.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          logger.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          logger.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      logger.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      logger.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        logger.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        logger.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          logger.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          logger.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      logger.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          logger.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          logger.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          logger.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      logger.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                logger.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\nimport { DailyRewardBanner, getStreakInfo } from './DailyReward';\r\nimport { doc, updateDoc, increment } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport globalCacheService from '../services/globalCacheService';\r\nimport { logger } from '../utils/logger';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../pages/dashboard/Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../pages/my-items/MyItems';\r\nimport Login from '../pages/auth/Login';\r\n\r\n//  []       -  \r\nconst PersonalShop = lazy(() => import('../pages/market/PersonalShop'));\r\nconst Banking = lazy(() => import('../pages/banking/Banking'));\r\nconst MyProfile = lazy(() => import('../pages/my-profile/MyProfile'));\r\nconst MyAssets = lazy(() => import('../pages/my-assets/MyAssets'));\r\n\r\n//    -   (  )\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminPage = lazy(() => import('../pages/admin/AdminPage'));\r\nconst AdminPanel = lazy(() => import('../pages/admin/AdminPanel'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../pages/admin/FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../pages/admin/RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../pages/learning/LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../pages/music/MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../pages/music/MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../pages/student/StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../pages/real-estate/RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../pages/coupon/CouponGoalPage'));\r\nconst OrganizationChart = lazy(() => import('../pages/organization/OrganizationChart'));\r\n\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  //     -  ( )   \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, { cash: increment(rewardAmount) });\r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n      setTimeout(() => setShowDailyRewardPopup(false), 3000);\r\n    } catch (error) {\r\n      logger.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Jua  index.html preload  ( )\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/task-management\" element={<AdminRoute><Dashboard adminTabMode=\"taskManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/salary-settings\" element={<AdminRoute><Dashboard adminTabMode=\"salarySettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/app-management\" element={<AdminRoute><Dashboard adminTabMode=\"appManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/page\" element={<AdminRoute><AdminPage /></AdminRoute>} />\r\n            <Route path=\"/admin-panel\" element={<AdminRoute><AdminPanel onClose={() => navigate(-1)} classCode={userClassCode} /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center p-5 bg-black/70 backdrop-blur-sm z-[9999] animate-fadeIn\"\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            className=\"w-full max-w-[400px] animate-slideUp\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-right mb-2\">\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                className=\"w-8 h-8 rounded-full border-none cursor-pointer text-lg text-white flex items-center justify-center ml-auto bg-white/20\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n            <div className=\"text-center mt-3 text-[13px] text-white/60\">\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { logger } from '../utils/logger';\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            logger.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      logger.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAllData, interval, enabled, ...deps]); // deps      ,   \r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      logger.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      logger.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]\" onClick={handleCancel}>\r\n      <div className=\"bg-white p-5 rounded-lg max-w-[500px] w-[90%] max-h-[90vh] overflow-y-auto shadow-md\" onClick={(e) => e.stopPropagation()}>\r\n        <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">\r\n           \r\n        </h3>\r\n        <p className=\"mb-2.5 text-sm text-gray-600\">\r\n             .\r\n        </p>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px]\">\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div className=\"flex justify-between mb-4 p-2.5 bg-gray-50 rounded-md text-[15px] text-indigo-600\">\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              className=\"block mb-1 font-medium text-gray-700\"\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm outline-none\"\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-md px-4 py-3 mb-4 text-red-800 text-sm\">\r\n              <p className=\"m-0\"> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mb-5 px-4 py-2.5 bg-indigo-50 rounded-md border-l-4 border-indigo-600\">\r\n            <div className=\"flex justify-between text-base font-semibold text-gray-800\">\r\n              <span> :</span>\r\n              <span className=\"text-indigo-600\">\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2.5 mt-5\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md text-sm cursor-pointer transition-colors duration-200\"\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-red-500 text-white border-0 rounded-md text-sm font-medium transition-all duration-200\"\r\n              style={{\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\",\r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1,\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing}\r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      logger.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      logger.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop fixed inset-0 bg-black/50 flex justify-center items-center z-[1000]\"\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal bg-white rounded-xl p-6 w-[90%] max-w-[400px] shadow-xl\"\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 className=\"mt-0 text-gray-700\"> </h3>\r\n        <div className=\"mb-4 text-gray-500\">\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : logger.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group mb-6\">\r\n          <label className=\"block mb-2 font-medium text-gray-600\">\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : logger.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            className=\"w-full p-2.5 border border-gray-300 rounded-md text-sm\"\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div className=\"modal-actions flex justify-end gap-2.5\">\r\n          <button\r\n            className=\"cancel-button px-4 py-2 bg-gray-100 text-gray-600 border-0 rounded-md cursor-pointer font-medium\"\r\n            onClick={closeModal}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button px-4 py-2 bg-emerald-500 text-white border-0 rounded-md text-sm font-medium\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nimport { logger } from \"../../utils/logger\";\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  Tailwind  \r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        logger.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          logger.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          logger.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          logger.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div className={`${showDonationHistoryModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={handleClose}>\r\n      <div className=\"bg-white rounded-xl shadow-lg w-full max-w-[600px] max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n               \r\n            {userClassCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"bg-transparent border-0 cursor-pointer text-xl text-gray-400 p-0 leading-none\"\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-5 overflow-y-auto max-h-[calc(85vh-120px)]\">\r\n          <div className=\"bg-indigo-50 px-4 py-3 rounded-lg mb-5 border border-indigo-200\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                   \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500 text-center py-10\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-lg font-semibold align-middle\">\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td\r\n                          style={{\r\n                            ...tableStyles.td,\r\n                            textAlign: \"right\",\r\n                            color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\",\r\n                            fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\"\r\n                          }}\r\n                        >\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p className=\"m-0 mb-2 text-base font-medium\">\r\n                            \r\n                  </p>\r\n                  <p className=\"m-0 text-sm\">\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end\">\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md cursor-pointer font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\nimport { logger } from '../../utils/logger';\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      logger.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5\"\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-xl shadow-lg w-full max-w-[500px] overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50\">\r\n          <h3 className=\"m-0 text-lg font-semibold text-gray-800\">\r\n             \r\n            {classCode && (\r\n              <span className=\"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-xl font-medium\">\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`bg-transparent border-0 text-xl text-gray-400 p-0 leading-none ${isDonating ? 'cursor-not-allowed' : 'cursor-pointer'}`}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-5\">\r\n          <div className=\"mb-5\">\r\n            <div className=\"flex justify-between items-center bg-indigo-50 px-4 py-3 rounded-lg border border-indigo-200\">\r\n              <span className=\"text-sm font-medium text-indigo-700\">\r\n                  \r\n              </span>\r\n              <span className=\"text-base font-semibold text-indigo-600\">\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-base ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-5\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              className={`w-full p-3 border border-gray-300 rounded-md text-sm resize-y min-h-[80px] ${isDonating ? 'bg-gray-50 cursor-not-allowed' : 'bg-white cursor-text'}`}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div className=\"bg-green-50 px-4 py-3 rounded-lg border border-green-200 mb-5\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-green-800\">\r\n                    \r\n                </span>\r\n                <span className=\"text-base font-semibold text-green-600\">\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"px-5 py-4 border-t border-gray-200 flex justify-end gap-3\">\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            className={`px-4 py-2 bg-gray-200 text-gray-700 border-0 rounded-md font-medium ${isDonating ? 'cursor-not-allowed opacity-60' : 'cursor-pointer opacity-100'}`}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n            }}\r\n            className={`px-4 py-2 text-white border-0 rounded-md font-medium ${\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n                ? \"cursor-not-allowed\"\r\n                : \"cursor-pointer\"\r\n            }`}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"rounded-full overflow-hidden relative\"\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n      }}\r\n    >\r\n      <div className=\"absolute top-1/2 left-1/2\" style={{ transform: \"translate(-50%, -60%)\" }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nimport { logger } from './logger';\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    logger.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    logger.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\nimport { logger } from \"../utils/logger\";\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    logger.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      logger.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    logger.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    logger.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    logger.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService]    :', error);\r\n    logger.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  logger.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  logger.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    logger.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      logger.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    logger.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    logger.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\nimport { logger } from '../../utils/logger';\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      logger.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activityTypeFilter, searchTerm]); // loadData activityData    \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      logger.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nimport { logger } from \"../utils/logger\";\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// logger.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// logger.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// logger.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// logger.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// logger.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// logger.log(formatCouponCount(782));             // \"782\"\r\n// logger.log(formatCouponCount(38));              // \"38\"","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim, autoPopup = true }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n      // PC   \r\n      if (autoPopup && info.canClaim) {\r\n        setShowPopup(true);\r\n      }\r\n    }\r\n  }, [userId, autoPopup]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  //   (PC  )\r\n  if (showPopup && !claimed) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm\" onClick={() => setShowPopup(false)}>\r\n        <div className=\"rounded-3xl p-8 max-w-md w-[90%] relative animate-slide-up\" onClick={(e) => e.stopPropagation()}\r\n          style={{\r\n            background: isBigReward\r\n              ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n              : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n            boxShadow: \"0 20px 60px rgba(0,0,0,0.5)\",\r\n            border: \"2px solid rgba(255,255,255,0.3)\",\r\n          }}\r\n        >\r\n          <button onClick={() => setShowPopup(false)} className=\"absolute top-3 right-3 text-white/60 hover:text-white text-2xl bg-transparent border-none cursor-pointer\"></button>\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"text-6xl mb-4\">{isBigReward ? \"\" : \"\"}</div>\r\n            <div className=\"text-white text-2xl font-bold mb-2\">{nextDay}  </div>\r\n            {streakInfo.streakBroken && (\r\n              <div className=\"px-4 py-2 rounded-xl mb-3 text-sm\" style={{ background: \"rgba(0,0,0,0.2)\", color: \"rgba(255,255,255,0.9)\" }}>\r\n                   .  1!\r\n              </div>\r\n            )}\r\n            <div className=\"text-4xl font-extrabold text-white mt-3\">+{nextReward.toLocaleString()}</div>\r\n          </div>\r\n          <button\r\n            onClick={() => { handleClaim(); setShowPopup(false); }}\r\n            className=\"w-full py-4 rounded-2xl text-xl font-bold cursor-pointer border-none transition-all hover:scale-105\"\r\n            style={{ background: \"rgba(255,255,255,0.95)\", color: isBigReward ? \"#ea580c\" : \"#6366f1\", boxShadow: \"0 4px 20px rgba(0,0,0,0.3)\" }}\r\n          >\r\n            ! \r\n          </button>\r\n          <div className=\"flex justify-between gap-1 mt-5\">\r\n            {STREAK_REWARDS.map((day, idx) => (\r\n              <div key={day.day} className=\"flex-1\">\r\n                <div className=\"w-full h-2 rounded\" style={{ background: idx < streakInfo.streak ? \"rgba(255,255,255,0.9)\" : idx === streakInfo.streak ? \"rgba(255,255,255,0.5)\" : \"rgba(255,255,255,0.2)\" }} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-5 mb-5\"\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              className=\"px-3 py-2 rounded-lg mb-3 text-sm\"\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\r\n                <span className=\"text-3xl\">\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div className=\"text-white text-lg font-bold\">\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div className=\"text-xs mt-0.5\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-extrabold mt-1\" style={{ color: \"rgba(255,255,255,0.95)\" }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              className=\"border-none py-3.5 px-7 rounded-xl text-base font-bold cursor-pointer transition-all\"\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex justify-between gap-1\">\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div key={day.day} className=\"flex-1 flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-full h-2 rounded mb-1\"\r\n                    style={{\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span className=\"text-[9px]\" style={{ color: \"rgba(255,255,255,0.7)\" }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div className=\"text-center mt-2 text-xs\" style={{ color: \"rgba(255,255,255,0.8)\" }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-2.5\">\r\n          <div className=\"text-5xl mb-3\" style={{ animation: \"bounce 0.5s ease\" }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div className=\"text-white text-3xl font-extrabold mb-2\">\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div className=\"text-base font-semibold\" style={{ color: \"rgba(255,255,255,0.9)\" }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div\r\n              className=\"mt-2.5 px-4 py-2 rounded-2xl inline-block text-sm text-white\"\r\n              style={{ background: \"rgba(255,255,255,0.2)\" }}\r\n            >\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"inline-flex items-center gap-1.5 px-3 py-1 rounded-xl text-sm font-semibold\"\r\n      style={{\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      className=\"rounded-2xl p-4\"\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 className=\"text-sm font-bold mb-3 flex items-center gap-2\" style={{ color: \"#e8e8ff\" }}>\r\n            \r\n      </h4>\r\n      <div className=\"flex flex-col gap-1.5\">\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            className=\"flex justify-between items-center px-2.5 py-1.5 rounded-lg\"\r\n            style={{\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm\"\r\n              style={{ color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\" }}\r\n            >\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span\r\n              style={{\r\n                color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n                fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n                fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n              }}\r\n            >\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          className=\"mt-2 p-2.5 rounded-xl text-center\"\r\n          style={{\r\n            background: \"#f59e0b15\",\r\n            border: \"1px solid #f59e0b30\",\r\n          }}\r\n        >\r\n          <span className=\"text-sm font-semibold\" style={{ color: \"#f59e0b\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nimport { logger } from \"../utils/logger\";\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    logger.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      logger.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    logger.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        logger.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        logger.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate, currentUserClassCode, userDoc]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, userItems, currentUserClassCode, userDoc]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    logger.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        logger.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        logger.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      logger.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash, currentUserClassCode, userDoc]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div className={`${showTransferModal ? 'flex' : 'hidden'} fixed inset-0 bg-black/50 items-center justify-center z-[1000] p-5`} onClick={() => setShowTransferModal(false)}>\r\n      <div className=\"bg-white rounded-xl p-8 max-w-[450px] w-full shadow-lg relative\" onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          className=\"absolute top-4 right-4 bg-transparent border-0 text-2xl cursor-pointer text-gray-500 p-0 w-8 h-8 flex items-center justify-center\"\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">\r\n           \r\n        </h2>\r\n\r\n        <div className=\"bg-gray-100 rounded-lg p-3 mb-5\">\r\n          <p className=\"text-sm text-gray-600 m-0\">\r\n              : <strong className=\"text-gray-800\">\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-5\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors cursor-pointer bg-white\"\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-gray-700\">\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              className=\"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm outline-none transition-colors\"\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p className=\"mt-2 text-xs text-red-500\">\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end pt-2.5 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-gray-200 text-gray-700 mr-2.5 hover:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 py-2.5 rounded-md border-0 text-sm font-medium cursor-pointer transition-all duration-200 bg-indigo-600 text-white hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nimport { logger } from \"../utils/logger\";\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    logger.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    logger.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    logger.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    logger.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    logger.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","AppIcon","_ref","style","viewBox","fill","xmlns","id","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","width","height","stdDeviation","result","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","filter","ALCHAN_MENU_ITEMS","label","icon","LayoutDashboard","path","category","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","isSubGroup","ListTodo","Briefcase","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","_ref2","title","MenuItem","_ref3","Icon","active","hasSubmenu","onClick","concat","ChevronDown","SubMenuItem","_ref4","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","_ref6","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","userDoc","logout","useAuth","expandedCategories","setExpandedCategories","useState","isMobile","setIsMobile","window","innerWidth","useEffect","handleResize","addEventListener","removeEventListener","toggleCategory","useCallback","categoryId","prev","_objectSpread","isActive","pathname","startsWith","some","item","handleItemClick","handleLogout","async","isAdmin","isSuperAdmin","userRole","userName","name","nickname","renderMenuSection","categoryKey","items","length","map","childItems","child","size","charAt","_Fragment","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","fontSize","setFontSize","useTheme","resetTutorial","user","showTutorial","setShowTutorial","loading","setLoading","uid","tutorialRef","doc","db","tutorialDoc","getDoc","exists","data","completed","error","logger","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","Object","entries","FONT_SIZES","key","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","formatMoney","amount","formatKoreanNumber","Modal","e","stopPropagation","memo","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","useRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","avatarConfig","setAvatarConfig","getAvatarConfig","handleAvatarChange","detail","userId","config","levelInfo","useMemo","netAssets","Number","cash","stockValue","realEstateValue","itemValue","getLevelInfo","bestAchievement","achievements","getUserAchievements","rarityOrder","legendary","epic","rare","common","sorted","sort","a","b","achA","getAchievementById","achB","rarity","handleClickOutside","event","current","contains","target","document","closeModal","color","level","Avatar","showBorder","Gift","coupons","ChevronLeft","background","ref","classCode","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","alert","message","Trash2","type","value","onChange","placeholder","maxLength","autoFocus","trimmed","trim","disabled","setTimeout","code","replace","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","paths","MobileNav","isTabActive","tab","p","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","parseInt","Date","now","handleBeforeInstall","preventDefault","handleDismiss","toString","Share","Plus","outcome","userChoice","log","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","clearInterval","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","setInterval","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","options","arguments","undefined","badge","vibrate","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","toLocaleString","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","backgroundColor","border","opacity","padding","boxShadow","taskInfoStyle","gap","taskNameStyle","lineHeight","taskActionsStyle","couponStyle","cursor","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","Math","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","marginBottom","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","modalOverlayStyle","selectedCardStyle","cardInnerStyle","transform","cardFrontStyle","backfaceVisibility","cardBackStyle","cardBackVisibleStyle","body","bottom","content","top","left","marginLeft","borderWidth","borderStyle","borderColor","animation","textShadow","perspective","transition","transformStyle","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","borderBottom","letterSpacing","tasks","TaskItem","borderTop","fontWeight","CommonTaskList","Array","isArray","gridTemplateColumns","createOptimizedFunction","functionName","fn","httpsCallable","functions","success","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","JSON","stringify","timestamp","warn","maxAge","backup","parsed","parse","removeItem","systemStatus","setSystemStatus","setError","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","err","handleResolveAlert","alertId","checked","toLocaleTimeString","marginTop","borderRadius","margin","health","totalUsers","stats","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","index","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","toDate","seconds","errorLogs","slice","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","ClassDataDeletionSection","userClassCode","deleteConfirmText","setDeleteConfirmText","isDeleting","setIsDeleting","showConfirmation","setShowConfirmation","usersRef","firestoreCollection","studentsQuery","firebaseQuery","firebaseWhere","studentsSnapshot","firebaseGetDocs","activityLogsRef","activityLogsQuery","activityLogsSnapshot","studentIds","docs","transactionsToDelete","batches","i","push","batch","transactionsRef","transactionsQuery","transactionsSnapshot","allDocsToDelete","BATCH_SIZE","writeBatch","forEach","docSnap","delete","commit","floor","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","students","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","savingProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","useOptimizedStudents","useQuery","queryKey","queryFn","enabled","staleTime","gcTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","Promise","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","parseFloat","increaseRateNum","isNaN","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","max","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","queryRef","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","member","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","stock","stockRef","set","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","formatLastSalaryDate","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","min","find","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","summary","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","student","salaryCalc","includes","handleToggleStudentSelection","studentId","Boolean","join","toLocaleDateString","handleEditStudentJobs","step","products","product","AdminDatabase","href","rel","SystemMonitoring","handleToggleJobSelection","htmlFor","prevStudents","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","get","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","Map","addListener","unsubscribe","has","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","EmptyState","description","ActionButton","variant","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","couponValue","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","substr","setupPolling","pollData","jobsQuery","query","where","limit","loadedJobs","getDocs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","fetchData","refreshInProgressRef","refreshTasksAfterReset","today","toDateString","manager","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","findIndex","t","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","rewardAmount","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","cached","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","copyResult","copyDefaultDataToNewClass","results","copied","storeItems","copyError","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","PageContainer","LoadingState","userNickname","RotateCcw","JobList","action","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","priceIncreasePercentage","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialStock","available","initialQuantities","checkMobile","getButtonText","currentUserCash","quantity","totalPrice","canOpenAdminPanel","AdminItemPage","editingItemFromStore","onAddItem","newItemData","onUpdateItem","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","textAlign","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","from","values","localeCompare","recentlyUsedItems","setRecentlyUsedItems","saved","prevItems","itemsChanged","updatedItems","keys","_itemData$itemDetails","itemData","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","currentTarget","quantityToUse","remainingToUse","sortedDocs","amountToUse","classmate","recipient","c","recipientName","originalUserItems","","","","","UID","inventoryRef","collection","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","updateDoc","assign","catch","React","PersonalShop","lazy","Banking","MyProfile","MyAssets","OmokGame","ChessGame","TypingPracticeGame","AdminPage","AdminPanel","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoading","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","showDailyRewardPopup","setShowDailyRewardPopup","getStreakInfo","canClaim","handleDailyRewardClaim","increment","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","DailyRewardBanner","onClaim","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","interval","deps","setData","intervalRef","mountedRef","queryFnRef","refetch","fetchFn","shift","resolve","processInitialLoadQueue","showSellCouponModal","setShowSellCouponModal","currentCoupons","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","onSubmit","required","calculateValue","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","validRecipients","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","donations","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","tableStyles","table","borderCollapse","overflow","thead","th","position","zIndex","td","tr","emptyContainer","display","flexDirection","alignItems","justifyContent","emptyIcon","processDonationData","studentsCount","donationsCount","s","classDonations","validStudents","donationsByStudent","currentClassGoalTotal","donation","donorId","donorName","totalAmount","uniqueDonors","allStudentIds","Set","add","studentInfoMap","studentName","_donationsByStudent$s","cumulativeAmount","isCurrentUser","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","onMouseOver","onMouseOut","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","_unused","saveAvatarConfig","dispatchEvent","CustomEvent","_unused2","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","darkenColor","hex","percent","r","g","f","m","o","noseColor","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","viewBoxY","viewBoxHeight","ACHIEVEMENTS","FIRST_THOUSAND","condition","totalAssets","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","achievementId","stored","normalizeType","cache","getCacheKey","getFromCache","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","q","snapshot","logs","_data$timestamp","normalizedFilterType","hasMore","paginatedLogs","newLastDoc","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","transactions","userIdsCount","allTransactions","_data$timestamp3","getTransactionsData","tx","metadata","convertTransactionsToLogs","handleLoadMore","getActivityTypeColor","typeStr","toLowerCase","formatDate","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","handleRefresh","keysToDelete","clearClassCache","info","typeCounts","typeExamples","count","filters","_log$type","_log$description","desc","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","filterName","filterFunc","matchedLogs","matchedTypes","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","activity","reason","itemName","couponAmount","PageHeader","subtitle","backButton","_ref1","primary","secondary","outline","danger","ghost","indigo","sm","md","lg","Loader2","LEVEL_THRESHOLDS","minAssets","assets","currentLevelData","nextLevelIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","iconCollection","styles","container","maxWidth","fontFamily","card","header","flex","activeTab","disabledTab","formSection","formTitle","inputGroup","input","boxSizing","textarea","minHeight","resize","gridTwo","iconSelector","selectedIcon","button","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","flexWrap","categoryButton","activeCategoryButton","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","paddingTop","setActiveTab","showIconPicker","setShowIconPicker","selectedCategory","setSelectedCategory","handleChange","isEditing","maxHeight","overflowY","handleIconSelect","onMouseEnter","onMouseLeave","number","unit","num","isNegative","units","resultParts","remaining","abs","quotient","maximumFractionDigits","formatKoreanCurrency","STREAK_REWARDS","lastLogin","yesterday","isNewDay","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","_rewardResult$reward","autoPopup","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","showPopup","setShowPopup","handleClaim","toISOString","newStreak","newData","isMilestone","claimDailyReward","nextDay","nextReward","isBigReward","StreakDisplay","currentStreak","StreakRewardInfo","ItemContext","createContext","context","useContext","marketListings","marketOffers","updateUserItemQuantity","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","isAuthAdmin","deductCash","addCash","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","newUserItems","tempId","tempNewItem","token","getIdToken","functionUrl","response","fetch","method","headers","ok","errorText","status","json","itemToPurchase","newUserItem","purchasedAt","originalStock","originalPrice","existingIndex","updated","restocked","newStock","oldPrice","oldStock","logActivity","ACTIVITY_TYPES","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","sellerId","sellerName","offerPrice","offerId","quantityChange","contextValue","Provider","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","nameA","substring","nameB","CASH_INCOME","CASH_EXPENSE","TRANSFER_SEND","TRANSFER_RECEIVE","STOCK_BUY","STOCK_SELL","ITEM_SELL","DEPOSIT_CREATE","DEPOSIT_WITHDRAW","DEPOSIT_MATURITY","LOAN_CREATE","LOAN_REPAY","PARKING_DEPOSIT","PARKING_WITHDRAW","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","addDoc","logId"],"ignoreList":[],"sourceRoot":""}