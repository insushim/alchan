{"version":3,"file":"static/js/327.79efb238.chunk.js","mappings":"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","sources":["pages/learning/LearningBoard.js"],"sourcesContent":["// src/pages/learning/LearningBoard.js\r\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport \"./LearningBoard.css\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { db } from \"../../firebase\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  orderBy,\r\n  where,\r\n  limit,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  writeBatch,\r\n  setDoc,\r\n  runTransaction,\r\n} from \"firebase/firestore\";\r\nimport { usePolling } from \"../../hooks/usePolling\";\r\nimport { logger } from \"../../utils/logger\";\r\n\r\nconst formatDate = (isoString) => {\r\n  if (!isoString) return \"\";\r\n  try {\r\n    const date = new Date(isoString);\r\n    return date.toLocaleString(\"ko-KR\", {\r\n      year: \"numeric\",\r\n      month: \"2-digit\",\r\n      day: \"2-digit\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  } catch (error) {\r\n    return \"\";\r\n  }\r\n};\r\n\r\nconst calculateCouponChange = (postData, interactionType, userId) => {\r\n  const { likes = 0, dislikes = 0, likedBy = [], dislikedBy = [] } = postData;\r\n  const userHasLiked = likedBy.includes(userId);\r\n  const userHasDisliked = dislikedBy.includes(userId);\r\n  let oldEffectiveLikes, newEffectiveLikes;\r\n\r\n  if (interactionType === 'like') {\r\n    if (userHasLiked) return 0;\r\n    oldEffectiveLikes = likes - dislikes;\r\n    newEffectiveLikes = userHasDisliked ? (likes + 1) - (dislikes - 1) : (likes + 1) - dislikes;\r\n  } else if (interactionType === 'dislike') {\r\n    if (userHasDisliked) return 0;\r\n    oldEffectiveLikes = likes - dislikes;\r\n    newEffectiveLikes = userHasLiked ? (likes - 1) - (dislikes + 1) : likes - (dislikes + 1);\r\n  } else {\r\n    return 0;\r\n  }\r\n\r\n  const prevThreshold = Math.max(0, Math.floor(oldEffectiveLikes / 3));\r\n  const currThreshold = Math.max(0, Math.floor(newEffectiveLikes / 3));\r\n  return currThreshold - prevThreshold;\r\n};\r\n\r\nconst LearningBoard = () => {\r\n  const {\r\n    userDoc: currentUser,\r\n    isAdmin,\r\n    addCouponsToUser,\r\n    loading: authLoading,\r\n  } = useAuth();\r\n\r\n  const currentUserId = currentUser?.id;\r\n  const classCode = currentUser?.classCode;\r\n\r\n  const [selectedBoard, setSelectedBoard] = useState(null);\r\n  const [selectedPost, setSelectedPost] = useState(null);\r\n  const [isWriting, setIsWriting] = useState(false);\r\n  const [newPost, setNewPost] = useState({ title: \"\", content: \"\" });\r\n  const [customCouponAmount, setCustomCouponAmount] = useState(0);\r\n  const [newBoardName, setNewBoardName] = useState(\"\");\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [showHiddenBoardsView, setShowHiddenBoardsView] = useState(false);\r\n  const [editingBoardId, setEditingBoardId] = useState(null);\r\n  const [editingBoardName, setEditingBoardName] = useState(\"\");\r\n\r\n  const boardsCollectionRef = useMemo(() => {\r\n    if (classCode) return collection(db, \"classes\", classCode, \"learningBoards\");\r\n    return null;\r\n  }, [classCode]);\r\n\r\n  const boardsQueryFn = useCallback(async () => {\r\n    if (!classCode) return [];\r\n    const ref = collection(db, \"classes\", classCode, \"learningBoards\");\r\n    const q = query(ref, orderBy(\"name\"), limit(100));\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      isHidden: typeof doc.data().isHidden === \"boolean\" ? doc.data().isHidden : false,\r\n    }));\r\n  }, [classCode]);\r\n\r\n  const { data: rawBoards, loading: boardsLoading, refetch: refetchBoards } = usePolling(boardsQueryFn, {\r\n    interval: 30 * 60 * 1000,\r\n    enabled: !!classCode,\r\n    deps: [classCode],\r\n  });\r\n\r\n  // usePollingì˜ data ì´ˆê¸°ê°’ì´ nullì´ë¯€ë¡œ í•­ìƒ ë°°ì—´ë¡œ ë³´ì¥\r\n  const boards = rawBoards || [];\r\n\r\n  const postsQueryFn = useCallback(async () => {\r\n    if (!selectedBoard || !classCode) return [];\r\n    const ref = collection(db, \"classes\", classCode, \"learningBoards\", selectedBoard.id, \"posts\");\r\n    const q = query(ref, orderBy(\"timestamp\", \"desc\"), limit(100));\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      adminCouponGiven: typeof doc.data().adminCouponGiven === \"boolean\" ? doc.data().adminCouponGiven : false,\r\n      coupons: Number(doc.data().coupons) || 0,\r\n      likes: Number(doc.data().likes) || 0,\r\n      dislikes: Number(doc.data().dislikes) || 0,\r\n      likedBy: Array.isArray(doc.data().likedBy) ? doc.data().likedBy : [],\r\n      dislikedBy: Array.isArray(doc.data().dislikedBy) ? doc.data().dislikedBy : [],\r\n      timestamp: doc.data().timestamp?.toDate ? doc.data().timestamp.toDate().toISOString() : new Date().toISOString(),\r\n    }));\r\n  }, [selectedBoard, classCode]);\r\n\r\n  const { data: rawPosts, loading: postsLoading, refetch: refetchPosts } = usePolling(postsQueryFn, {\r\n    interval: 10 * 60 * 1000,\r\n    enabled: !!selectedBoard && !!classCode,\r\n    deps: [selectedBoard?.id, classCode],\r\n  });\r\n\r\n  // usePollingì˜ data ì´ˆê¸°ê°’ì´ nullì´ë¯€ë¡œ í•­ìƒ ë°°ì—´ë¡œ ë³´ì¥\r\n  const selectedBoardPosts = rawPosts || [];\r\n\r\n  const currentUserIsAdmin = useMemo(() => isAdmin && isAdmin(), [isAdmin]);\r\n\r\n  // Loading / guard screens\r\n  if (authLoading) return <div className=\"lb-msg\">ì‚¬ìš©ì ì •ë³´ ë¡œë”© ì¤‘...</div>;\r\n  if (!currentUser) return <div className=\"lb-msg\">ê²Œì‹œíŒì„ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>;\r\n  if (!classCode && !currentUserIsAdmin) return <div className=\"lb-msg\">í•™ê¸‰ ì½”ë“œê°€ ì„¤ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.</div>;\r\n  if (classCode && boardsLoading) return <div className=\"lb-msg\">ê²Œì‹œíŒ ëª©ë¡ ë¡œë”© ì¤‘...</div>;\r\n  if (currentUserIsAdmin && !classCode) return <div className=\"lb-msg\">í•™ê¸‰ ì½”ë“œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.</div>;\r\n\r\n  // Board selection handler\r\n  const handleBoardSelect = (boardId, fromHiddenView = false) => {\r\n    const board = boards.find((b) => b.id === boardId);\r\n    if (board && (fromHiddenView || !board.isHidden || currentUserIsAdmin)) {\r\n      setSelectedBoard(board);\r\n      setSelectedPost(null);\r\n      setIsWriting(false);\r\n      if (!fromHiddenView) setShowHiddenBoardsView(false);\r\n    } else if (board && board.isHidden && !currentUserIsAdmin && !fromHiddenView) {\r\n      alert(\"ì´ ê²Œì‹œíŒì€ í˜„ì¬ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n    }\r\n  };\r\n\r\n  // Post submit\r\n  const handlePostSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedBoard || !classCode || !currentUserId) return;\r\n    if (selectedBoard.isHidden && !currentUserIsAdmin) {\r\n      alert(\"ìˆ¨ê²¨ì§„ ê²Œì‹œíŒì—ëŠ” ê¸€ì„ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      return;\r\n    }\r\n    if (!newPost.title.trim() || !newPost.content.trim()) {\r\n      alert(\"ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n    try {\r\n      const ref = collection(db, \"classes\", classCode, \"learningBoards\", selectedBoard.id, \"posts\");\r\n      await addDoc(ref, {\r\n        title: newPost.title,\r\n        content: newPost.content,\r\n        author: currentUser?.name || currentUser?.nickname || \"ìµëª…\",\r\n        authorId: currentUserId,\r\n        likes: 0, dislikes: 0, likedBy: [], dislikedBy: [],\r\n        coupons: 0,\r\n        timestamp: serverTimestamp(),\r\n        adminCouponGiven: false,\r\n        classCode,\r\n      });\r\n      refetchPosts();\r\n      setNewPost({ title: \"\", content: \"\" });\r\n      setIsWriting(false);\r\n      alert(\"ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!\");\r\n    } catch (error) {\r\n      logger.error(\"Error submitting post:\", error);\r\n      alert(`ê²Œì‹œê¸€ ì œì¶œ ì˜¤ë¥˜: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // Post interactions (like, dislike, adminCoupon)\r\n  const updatePostInteraction = async (boardId, postId, updateType, interactionValue = null) => {\r\n    if (!classCode || !currentUserId) return;\r\n    const postRef = doc(db, \"classes\", classCode, \"learningBoards\", boardId, \"posts\", postId);\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const postDoc = await transaction.get(postRef);\r\n        if (!postDoc.exists()) throw new Error(\"ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n        const postData = postDoc.data();\r\n        const updates = {};\r\n        let couponChange = 0;\r\n        const userHasLiked = postData.likedBy?.includes(currentUserId);\r\n        const userHasDisliked = postData.dislikedBy?.includes(currentUserId);\r\n\r\n        if (updateType === \"like\") {\r\n          if (userHasLiked) return;\r\n          updates.likedBy = arrayUnion(currentUserId);\r\n          updates.likes = increment(1);\r\n          if (userHasDisliked) { updates.dislikedBy = arrayRemove(currentUserId); updates.dislikes = increment(-1); }\r\n          couponChange = calculateCouponChange(postData, \"like\", currentUserId);\r\n        } else if (updateType === \"dislike\") {\r\n          if (userHasDisliked) return;\r\n          updates.dislikedBy = arrayUnion(currentUserId);\r\n          updates.dislikes = increment(1);\r\n          if (userHasLiked) { updates.likedBy = arrayRemove(currentUserId); updates.likes = increment(-1); }\r\n          couponChange = calculateCouponChange(postData, \"dislike\", currentUserId);\r\n        } else if (updateType === \"adminCoupon\" && currentUserIsAdmin && typeof interactionValue === \"number\" && interactionValue > 0) {\r\n          if (postData.adminCouponGiven) { alert(\"ì´ë¯¸ ê´€ë¦¬ì ì¿ í°ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.\"); return; }\r\n          updates.adminCouponGiven = true;\r\n          couponChange = interactionValue;\r\n        } else { return; }\r\n\r\n        if (couponChange !== 0) updates.coupons = increment(couponChange);\r\n        updates.updatedAt = serverTimestamp();\r\n        transaction.update(postRef, updates);\r\n\r\n        if (couponChange !== 0 && postData.authorId && postData.authorId !== currentUserId && addCouponsToUser) {\r\n          addCouponsToUser(postData.authorId, couponChange);\r\n        }\r\n      });\r\n      refetchPosts();\r\n      if (updateType === \"adminCoupon\" && currentUserIsAdmin) {\r\n        alert(`ê´€ë¦¬ì ì¿ í° ${interactionValue}ê°œê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n        setCustomCouponAmount(0);\r\n      }\r\n    } catch (error) {\r\n      logger.error(`Error updating post ${updateType}:`, error);\r\n      alert(`ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLike = (boardId, postId) => updatePostInteraction(boardId, postId, \"like\");\r\n  const handleDislike = (boardId, postId) => updatePostInteraction(boardId, postId, \"dislike\");\r\n  const handleGiveCoupons = (boardId, postId, amount) => updatePostInteraction(boardId, postId, \"adminCoupon\", amount);\r\n\r\n  // Board CRUD\r\n  const handleAddBoard = async (e) => {\r\n    e.preventDefault();\r\n    if (!currentUserIsAdmin || !classCode || !boardsCollectionRef) return;\r\n    const trimmedName = newBoardName.trim();\r\n    if (!trimmedName) return alert(\"ê²Œì‹œíŒ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n    if (boards.some((b) => b.name === trimmedName)) return alert(\"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.\");\r\n    try {\r\n      await addDoc(boardsCollectionRef, { name: trimmedName, isHidden: false, createdAt: serverTimestamp(), classCode });\r\n      refetchBoards();\r\n      setNewBoardName(\"\");\r\n    } catch (error) {\r\n      logger.error(\"Error adding board:\", error);\r\n      alert(\"ê²Œì‹œíŒ ì¶”ê°€ ì˜¤ë¥˜.\");\r\n    }\r\n  };\r\n\r\n  const handleStartEditBoard = (board) => { setEditingBoardId(board.id); setEditingBoardName(board.name); };\r\n  const handleCancelEditBoard = () => { setEditingBoardId(null); setEditingBoardName(\"\"); };\r\n\r\n  const handleSaveEditBoard = async (e) => {\r\n    e.preventDefault();\r\n    if (!editingBoardId || !classCode || !currentUserIsAdmin) return;\r\n    const trimmedName = editingBoardName.trim();\r\n    if (!trimmedName) return alert(\"ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n    if (boards.some((b) => b.id !== editingBoardId && b.name === trimmedName)) return alert(\"ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.\");\r\n    try {\r\n      await updateDoc(doc(db, \"classes\", classCode, \"learningBoards\", editingBoardId), { name: trimmedName, updatedAt: serverTimestamp() });\r\n      refetchBoards();\r\n      handleCancelEditBoard();\r\n    } catch (error) {\r\n      logger.error(\"Error updating board name:\", error);\r\n    }\r\n  };\r\n\r\n  const handleHideBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    try {\r\n      await updateDoc(doc(db, \"classes\", classCode, \"learningBoards\", boardId), { isHidden: true, updatedAt: serverTimestamp() });\r\n      refetchBoards();\r\n      if (selectedBoard?.id === boardId) setSelectedBoard(null);\r\n    } catch (error) { logger.error(\"Error hiding board:\", error); }\r\n  };\r\n\r\n  const handleRestoreBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    try {\r\n      await updateDoc(doc(db, \"classes\", classCode, \"learningBoards\", boardId), { isHidden: false, updatedAt: serverTimestamp() });\r\n      refetchBoards();\r\n    } catch (error) { logger.error(\"Error restoring board:\", error); }\r\n  };\r\n\r\n  const handleDeleteBoard = async (boardId) => {\r\n    if (!currentUserIsAdmin || !classCode) return;\r\n    const boardToDelete = boards.find((b) => b.id === boardId);\r\n    if (!window.confirm(`'${boardToDelete?.name}' ê²Œì‹œíŒê³¼ ëª¨ë“  ê²Œì‹œê¸€ì„ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;\r\n    try {\r\n      const boardRef = doc(db, \"classes\", classCode, \"learningBoards\", boardId);\r\n      const postsRef = collection(boardRef, \"posts\");\r\n      const postsSnapshot = await getDocs(postsRef);\r\n      const batch = writeBatch(db);\r\n      postsSnapshot.docs.forEach((d) => batch.delete(d.ref));\r\n      batch.delete(boardRef);\r\n      await batch.commit();\r\n      refetchBoards();\r\n      if (selectedBoard?.id === boardId) setSelectedBoard(null);\r\n    } catch (error) {\r\n      logger.error(\"Error deleting board:\", error);\r\n      alert(\"ì‚­ì œ ì˜¤ë¥˜.\");\r\n    }\r\n  };\r\n\r\n  const visibleBoards = (boards || []).filter((b) => !b.isHidden);\r\n  const hiddenBoards = (boards || []).filter((b) => b.isHidden);\r\n\r\n  return (\r\n    <div className=\"lb\">\r\n      {/* Header */}\r\n      <div className=\"lb-header\">\r\n        <h1 className=\"lb-title\">í•™ìŠµ ê²Œì‹œíŒ {classCode && <span className=\"lb-class-code\">({classCode})</span>}</h1>\r\n        {currentUserIsAdmin && (\r\n          <button className=\"lb-admin-toggle\" onClick={() => setShowAdminPanel((p) => !p)}>\r\n            {showAdminPanel ? \"ê´€ë¦¬ì ë‹«ê¸°\" : \"ê´€ë¦¬ì ì—´ê¸°\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Board Tabs */}\r\n      <div className=\"lb-tabs\">\r\n        {visibleBoards.map((board) => (\r\n          <button\r\n            key={board.id}\r\n            className={`lb-tab ${selectedBoard?.id === board.id && !showHiddenBoardsView ? \"active\" : \"\"}`}\r\n            onClick={() => { handleBoardSelect(board.id, false); setShowHiddenBoardsView(false); }}\r\n          >\r\n            {board.name}\r\n          </button>\r\n        ))}\r\n        {currentUserIsAdmin && (\r\n          <button\r\n            className={`lb-tab lb-tab-manage ${showHiddenBoardsView ? \"active\" : \"\"}`}\r\n            onClick={() => {\r\n              setShowHiddenBoardsView((p) => !p);\r\n              if (!showHiddenBoardsView) { setSelectedBoard(null); setSelectedPost(null); setIsWriting(false); }\r\n            }}\r\n          >\r\n            ìˆ¨ê¹€ ê´€ë¦¬ ({hiddenBoards.length})\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"lb-body\">\r\n        {/* Empty state */}\r\n        {!selectedBoard && !showHiddenBoardsView && (\r\n          <div className=\"lb-empty\">\r\n            {visibleBoards.length === 0\r\n              ? \"ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.\"\r\n              : \"ê²Œì‹œíŒì„ ì„ íƒí•´ì£¼ì„¸ìš”.\"}\r\n          </div>\r\n        )}\r\n\r\n        {/* Post List (table) */}\r\n        {selectedBoard && !selectedPost && !isWriting && !showHiddenBoardsView && (\r\n          <>\r\n            <div className=\"lb-toolbar\">\r\n              <h2 className=\"lb-board-name\">{selectedBoard.name}</h2>\r\n              <button\r\n                className=\"lb-write-btn\"\r\n                onClick={() => setIsWriting(true)}\r\n                disabled={selectedBoard.isHidden && !currentUserIsAdmin}\r\n              >\r\n                ê¸€ì“°ê¸°\r\n              </button>\r\n            </div>\r\n\r\n            {postsLoading ? (\r\n              <div className=\"lb-empty\">ë¡œë”© ì¤‘...</div>\r\n            ) : selectedBoardPosts.length === 0 ? (\r\n              <div className=\"lb-empty\">ì•„ì§ ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n            ) : (\r\n              <div className=\"lb-table-wrap\">\r\n                <table className=\"lb-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th className=\"lb-col-num\">ë²ˆí˜¸</th>\r\n                      <th className=\"lb-col-title\">ì œëª©</th>\r\n                      <th className=\"lb-col-author\">ì‘ì„±ì</th>\r\n                      <th className=\"lb-col-date\">ë‚ ì§œ</th>\r\n                      <th className=\"lb-col-likes\">ì¢‹ì•„ìš”</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {selectedBoardPosts.map((post, idx) => (\r\n                      <tr\r\n                        key={post.id}\r\n                        className=\"lb-row\"\r\n                        onClick={() => setSelectedPost(post)}\r\n                      >\r\n                        <td className=\"lb-cell-num\">{selectedBoardPosts.length - idx}</td>\r\n                        <td className=\"lb-cell-title\">\r\n                          <span className=\"lb-post-title-text\">{post.title}</span>\r\n                          {post.adminCouponGiven && <span className=\"lb-badge\" title=\"ê´€ë¦¬ì í™•ì¸\">âœ¨</span>}\r\n                        </td>\r\n                        <td className=\"lb-cell-author\">{post.author || \"ìµëª…\"}</td>\r\n                        <td className=\"lb-cell-date\">{formatDate(post.timestamp)}</td>\r\n                        <td className=\"lb-cell-likes\">\r\n                          <span className=\"lb-like-num\">ğŸ‘ {post.likes || 0}</span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Post Detail */}\r\n        {selectedBoard && selectedPost && !isWriting && !showHiddenBoardsView && (\r\n          <div className=\"lb-detail\">\r\n            <button className=\"lb-back\" onClick={() => setSelectedPost(null)}>â† ëª©ë¡ìœ¼ë¡œ</button>\r\n            <div className=\"lb-detail-card\">\r\n              <h2 className=\"lb-detail-title\">{selectedPost.title}</h2>\r\n              <div className=\"lb-detail-meta\">\r\n                <span>ì‘ì„±ì: {selectedPost.author || \"ìµëª…\"}</span>\r\n                <span>{formatDate(selectedPost.timestamp)}</span>\r\n              </div>\r\n              <div className=\"lb-detail-content\">{selectedPost.content}</div>\r\n\r\n              {/* Like / Dislike */}\r\n              <div className=\"lb-detail-actions\">\r\n                <div className=\"lb-action-row\">\r\n                  <button\r\n                    className={`lb-like-btn ${selectedPost.likedBy?.includes(currentUserId) ? \"active\" : \"\"}`}\r\n                    onClick={() => handleLike(selectedBoard.id, selectedPost.id)}\r\n                    disabled={\r\n                      selectedPost.likedBy?.includes(currentUserId) ||\r\n                      selectedPost.dislikedBy?.includes(currentUserId) ||\r\n                      selectedPost.authorId === currentUserId\r\n                    }\r\n                  >\r\n                    ğŸ‘ ì¢‹ì•„ìš” {selectedPost.likes || 0}\r\n                  </button>\r\n                  <button\r\n                    className={`lb-dislike-btn ${selectedPost.dislikedBy?.includes(currentUserId) ? \"active\" : \"\"}`}\r\n                    onClick={() => handleDislike(selectedBoard.id, selectedPost.id)}\r\n                    disabled={\r\n                      selectedPost.likedBy?.includes(currentUserId) ||\r\n                      selectedPost.dislikedBy?.includes(currentUserId) ||\r\n                      selectedPost.authorId === currentUserId\r\n                    }\r\n                  >\r\n                    ğŸ‘ ì‹«ì–´ìš” {selectedPost.dislikes || 0}\r\n                  </button>\r\n                  <span className=\"lb-stat\">íšë“ ì¿ í°: {selectedPost.coupons || 0}ê°œ</span>\r\n                  <span className=\"lb-stat\">ì‹¤íš¨ ì¢‹ì•„ìš”: {(selectedPost.likes || 0) - (selectedPost.dislikes || 0)}</span>\r\n                  {selectedPost.adminCouponGiven && !currentUserIsAdmin && (\r\n                    <span className=\"lb-verified-badge\">âœ¨ ê´€ë¦¬ì í™•ì¸</span>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Admin coupon controls */}\r\n                {currentUserIsAdmin && (\r\n                  <div className=\"lb-admin-coupon\">\r\n                    <h4>ê´€ë¦¬ì ì¿ í° ì§€ê¸‰</h4>\r\n                    {selectedPost.adminCouponGiven ? (\r\n                      <p className=\"lb-coupon-done\">ì´ë¯¸ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\r\n                    ) : (\r\n                      <div className=\"lb-coupon-row\">\r\n                        {[1, 3, 5].map((amount) => (\r\n                          <button\r\n                            key={amount}\r\n                            className=\"lb-coupon-quick\"\r\n                            onClick={() => handleGiveCoupons(selectedBoard.id, selectedPost.id, amount)}\r\n                          >\r\n                            +{amount}\r\n                          </button>\r\n                        ))}\r\n                        <input\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          value={customCouponAmount === 0 ? \"\" : customCouponAmount}\r\n                          onChange={(e) => setCustomCouponAmount(parseInt(e.target.value) || 0)}\r\n                          placeholder=\"ì§ì ‘\"\r\n                          className=\"lb-coupon-input\"\r\n                        />\r\n                        <button\r\n                          className=\"lb-coupon-give\"\r\n                          onClick={() => handleGiveCoupons(selectedBoard.id, selectedPost.id, customCouponAmount)}\r\n                          disabled={customCouponAmount <= 0}\r\n                        >\r\n                          ì§€ê¸‰\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Write Form */}\r\n        {isWriting && selectedBoard && (!selectedBoard.isHidden || currentUserIsAdmin) && !showHiddenBoardsView && (\r\n          <div className=\"lb-write\">\r\n            <button className=\"lb-back\" onClick={() => setIsWriting(false)}>â† ëª©ë¡ìœ¼ë¡œ</button>\r\n            <h2 className=\"lb-write-heading\">{selectedBoard.name}ì— ê¸€ì“°ê¸°</h2>\r\n            <form onSubmit={handlePostSubmit} className=\"lb-form\">\r\n              <div className=\"lb-field\">\r\n                <label>ì œëª©</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newPost.title}\r\n                  onChange={(e) => setNewPost({ ...newPost, title: e.target.value })}\r\n                  placeholder=\"ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"lb-field\">\r\n                <label>ë‚´ìš©</label>\r\n                <textarea\r\n                  value={newPost.content}\r\n                  onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\r\n                  placeholder=\"ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n                  required\r\n                  rows=\"10\"\r\n                />\r\n              </div>\r\n              <button type=\"submit\" className=\"lb-submit\">ê²Œì‹œí•˜ê¸°</button>\r\n            </form>\r\n          </div>\r\n        )}\r\n\r\n        {/* Hidden Board Management */}\r\n        {showHiddenBoardsView && currentUserIsAdmin && (\r\n          <div className=\"lb-hidden-manage\">\r\n            <h2>ìˆ¨ê¹€ ê²Œì‹œíŒ ê´€ë¦¬</h2>\r\n\r\n            {/* All boards for selection */}\r\n            <div className=\"lb-hidden-tabs\">\r\n              {boards.map((board) => (\r\n                <button\r\n                  key={board.id}\r\n                  className={`lb-tab ${selectedBoard?.id === board.id ? \"active\" : \"\"} ${board.isHidden ? \"lb-tab-hidden\" : \"\"}`}\r\n                  onClick={() => handleBoardSelect(board.id, true)}\r\n                >\r\n                  {board.isHidden ? \"ğŸ”’\" : \"ğŸ“‚\"} {board.name}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* If a board is selected in hidden view, show write/view */}\r\n            {selectedBoard && (\r\n              <div className=\"lb-hidden-actions\">\r\n                <button className=\"lb-write-btn\" onClick={() => { setIsWriting(true); setShowHiddenBoardsView(false); }}>\r\n                  '{selectedBoard.name}' ê¸€ì“°ê¸°\r\n                </button>\r\n                <button className=\"lb-view-btn-sm\" onClick={() => { setShowHiddenBoardsView(false); setSelectedPost(null); setIsWriting(false); }}>\r\n                  '{selectedBoard.name}' ê¸€ë³´ê¸°\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Board management list */}\r\n            <h3>ìˆ¨ê¹€/ë³µêµ¬/ì‚­ì œ</h3>\r\n            <div className=\"lb-manage-list\">\r\n              {boards.sort((a, b) => a.name.localeCompare(b.name)).map((board) => (\r\n                <div key={board.id} className={`lb-manage-item ${board.isHidden ? \"hidden\" : \"visible\"}`}>\r\n                  <span className=\"lb-manage-name\">\r\n                    {board.name} ({board.isHidden ? \"ìˆ¨ê¹€\" : \"ê³µê°œ\"})\r\n                  </span>\r\n                  <div className=\"lb-manage-btns\">\r\n                    {board.isHidden ? (\r\n                      <button className=\"lb-btn-restore\" onClick={() => handleRestoreBoard(board.id)}>ê³µê°œë¡œ</button>\r\n                    ) : (\r\n                      <button className=\"lb-btn-hide\" onClick={() => handleHideBoard(board.id)}>ìˆ¨ê¸°ê¸°</button>\r\n                    )}\r\n                    <button className=\"lb-btn-delete\" onClick={() => handleDeleteBoard(board.id)}>ì‚­ì œ</button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Admin Side Panel */}\r\n      {currentUserIsAdmin && showAdminPanel && (\r\n        <div className=\"lb-admin-panel\">\r\n          <button className=\"lb-admin-close\" onClick={() => setShowAdminPanel(false)}>Ã—</button>\r\n          <h2>ê´€ë¦¬ì ê¸°ëŠ¥</h2>\r\n\r\n          <div className=\"lb-admin-section\">\r\n            <h3>ê²Œì‹œíŒ ì¶”ê°€</h3>\r\n            <form onSubmit={handleAddBoard} className=\"lb-admin-form\">\r\n              <input\r\n                type=\"text\"\r\n                value={newBoardName}\r\n                onChange={(e) => setNewBoardName(e.target.value)}\r\n                placeholder=\"ìƒˆ ê²Œì‹œíŒ ì´ë¦„\"\r\n                required\r\n              />\r\n              <button type=\"submit\">ì¶”ê°€</button>\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"lb-admin-section\">\r\n            <h3>ê²Œì‹œíŒ ì´ë¦„ ë³€ê²½</h3>\r\n            <ul className=\"lb-admin-board-list\">\r\n              {[...boards].sort((a, b) => a.name.localeCompare(b.name)).map((board) => (\r\n                <li key={board.id} className={board.isHidden ? \"hidden\" : \"\"}>\r\n                  {editingBoardId === board.id ? (\r\n                    <form onSubmit={handleSaveEditBoard} className=\"lb-edit-form\">\r\n                      <input type=\"text\" value={editingBoardName} onChange={(e) => setEditingBoardName(e.target.value)} autoFocus />\r\n                      <button type=\"submit\">ğŸ’¾</button>\r\n                      <button type=\"button\" onClick={handleCancelEditBoard}>â†©ï¸</button>\r\n                    </form>\r\n                  ) : (\r\n                    <div className=\"lb-board-row\">\r\n                      <span>{board.name} {board.isHidden ? \"(ìˆ¨ê¹€)\" : \"\"}</span>\r\n                      <button onClick={() => handleStartEditBoard(board)}>âœï¸</button>\r\n                    </div>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"lb-admin-section\">\r\n            <h3>í†µê³„</h3>\r\n            <ul className=\"lb-stats-list\">\r\n              <li>ê³µê°œ ê²Œì‹œíŒ: {visibleBoards.length}ê°œ</li>\r\n              <li>ìˆ¨ê¹€ ê²Œì‹œíŒ: {hiddenBoards.length}ê°œ</li>\r\n              <li>ì„ íƒëœ ê²Œì‹œíŒ ê²Œì‹œê¸€: {selectedBoardPosts?.length || 0}ê°œ</li>\r\n              <li>ì„ íƒëœ ê²Œì‹œíŒ ì´ ì¿ í°: {(selectedBoardPosts || []).reduce((s, p) => s + (p.coupons || 0), 0)}ê°œ</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LearningBoard;\r\n"],"names":["formatDate","isoString","Date","toLocaleString","year","month","day","hour","minute","error","calculateCouponChange","postData","interactionType","userId","likes","dislikes","likedBy","dislikedBy","userHasLiked","includes","userHasDisliked","oldEffectiveLikes","newEffectiveLikes","prevThreshold","Math","max","floor","LearningBoard","_selectedPost$likedBy","_selectedPost$likedBy2","_selectedPost$dislike","_selectedPost$dislike2","_selectedPost$likedBy3","_selectedPost$dislike3","userDoc","currentUser","isAdmin","addCouponsToUser","loading","authLoading","useAuth","currentUserId","id","classCode","selectedBoard","setSelectedBoard","useState","selectedPost","setSelectedPost","isWriting","setIsWriting","newPost","setNewPost","title","content","customCouponAmount","setCustomCouponAmount","newBoardName","setNewBoardName","showAdminPanel","setShowAdminPanel","showHiddenBoardsView","setShowHiddenBoardsView","editingBoardId","setEditingBoardId","editingBoardName","setEditingBoardName","boardsCollectionRef","useMemo","collection","db","boardsQueryFn","useCallback","async","ref","q","query","orderBy","limit","getDocs","docs","map","doc","_objectSpread","data","isHidden","rawBoards","boardsLoading","refetch","refetchBoards","usePolling","interval","enabled","deps","boards","postsQueryFn","_doc$data$timestamp","adminCouponGiven","coupons","Number","Array","isArray","timestamp","toDate","toISOString","rawPosts","postsLoading","refetchPosts","selectedBoardPosts","currentUserIsAdmin","_jsx","className","children","handleBoardSelect","boardId","fromHiddenView","arguments","length","undefined","board","find","b","alert","updatePostInteraction","postId","updateType","interactionValue","postRef","runTransaction","_postData$likedBy","_postData$dislikedBy","postDoc","transaction","get","exists","Error","updates","couponChange","arrayUnion","increment","arrayRemove","updatedAt","serverTimestamp","update","authorId","concat","logger","message","handleGiveCoupons","amount","handleCancelEditBoard","handleSaveEditBoard","e","preventDefault","trimmedName","trim","some","name","updateDoc","visibleBoards","filter","hiddenBoards","_jsxs","onClick","p","_Fragment","disabled","post","idx","author","handleLike","handleDislike","type","min","value","onChange","parseInt","target","placeholder","onSubmit","addDoc","nickname","required","rows","sort","a","localeCompare","handleRestoreBoard","handleHideBoard","boardToDelete","window","confirm","boardRef","postsRef","postsSnapshot","batch","writeBatch","forEach","d","delete","commit","handleDeleteBoard","createdAt","autoFocus","handleStartEditBoard","reduce","s"],"ignoreList":[],"sourceRoot":""}