{"version":3,"file":"static/js/841.0ab0d449.chunk.js","mappings":"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","sources":["LoginWarning.js","hooks/usePolling.js","components/modals/SellCouponModal.js","components/modals/GiftCouponModal.js","components/modals/DonationHistoryModal.js","components/modals/DonateCouponModal.js","numberFormatter.js","services/AdminDatabaseService.js","pages/admin/AdminDatabase.js","components/PageWrapper.js","components/AlchanSidebar.js","components/TutorialGuide.js","components/SettingsPanel.js","utils/avatarSystem.js","components/Avatar.js","utils/levelSystem.js","utils/achievementSystem.js","components/AlchanHeader.js","components/MobileNav.js","components/PWAInstallPrompt.js","components/UpdateNotification.js","hooks/useServiceWorker.js","TaskItem.js","utils/jobTaskRewards.js","JobList.js","CommonTaskList.js","components/modals/TransferModal.js","services/optimizedFirebaseService.js","SystemMonitoring.js","components/modals/AdminSettingsModal.js","hooks/useOptimizedAdminData.js","components/DailyReward.js","Dashboard.js","pages/market/ItemStore.js","MyItems.js","MyAssets.js","pages/market/PersonalShop.js","pages/banking/ParkingAccount.js","pages/banking/Banking.js","components/AvatarEditor.js","MyProfile.js","components/AlchanLayout.js","pages/admin/AdminItemPage.js","contexts/ItemContext.js","utils/firestoreHelpers.js"],"sourcesContent":["// src/LoginWarning.js\r\nimport React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nconst LoginWarning = () => {\r\n  return (\r\n    <div className=\"login-warning\">\r\n      <h3> </h3>\r\n      <p>   .</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginWarning;\r\n","// src/hooks/usePolling.js - onSnapshot  Polling Hook ( )\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\n//  []     - Firestore  \r\nexport const POLLING_INTERVALS = {\r\n  REALTIME: 10 * 60 * 1000,  //  10 -    (, ) (510)\r\n  NORMAL: 30 * 60 * 1000,    //  30 -   (, ) (1530)\r\n  LOW: 60 * 60 * 1000,       //  1 -    () (301)\r\n  MANUAL: null               //  \r\n};\r\n\r\n//  []     -     \r\nlet globalInitialLoadQueue = [];\r\nlet isProcessingQueue = false;\r\n\r\nconst processInitialLoadQueue = async () => {\r\n  if (isProcessingQueue || globalInitialLoadQueue.length === 0) return;\r\n  isProcessingQueue = true;\r\n\r\n  while (globalInitialLoadQueue.length > 0) {\r\n    const fetchFn = globalInitialLoadQueue.shift();\r\n    await fetchFn();\r\n    //    100ms  \r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n\r\n  isProcessingQueue = false;\r\n};\r\n\r\n/**\r\n * Firestore  (onSnapshot) Polling  Hook\r\n *\r\n * @param {Function} queryFn - Firestore   (getDocs )\r\n * @param {Object} options - \r\n * @param {number} options.interval - Polling  (ms,  5)\r\n * @param {boolean} options.enabled - Polling  \r\n * @param {Array} options.deps -  \r\n *\r\n * @returns {Object} { data, loading, error, refetch }\r\n */\r\nexport const usePolling = (queryFn, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n  const queryFnRef = useRef(queryFn);\r\n\r\n  useEffect(() => {\r\n    queryFnRef.current = queryFn;\r\n  }, [queryFn]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!enabled) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const result = await queryFnRef.current();\r\n\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('[usePolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setError(err);\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [enabled]);\r\n\r\n  const refetch = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false    \r\n    if (!enabled || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //  []      \r\n    globalInitialLoadQueue.push(fetchData);\r\n    processInitialLoadQueue();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n  }, [fetchData, interval, enabled, ...deps]);\r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n/**\r\n *    Polling Hook\r\n *\r\n * @param {Array<{key: string, queryFn: Function}>} queries -  \r\n * @param {Object} options - \r\n *\r\n * @returns {Object} { data: {key: data}, loading, errors, refetchAll }\r\n */\r\nexport const useMultiPolling = (queries, options = {}) => {\r\n  const {\r\n    interval = POLLING_INTERVALS.NORMAL, //  []  15\r\n    enabled = true,\r\n    deps = []\r\n  } = options;\r\n\r\n  const [data, setData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [errors, setErrors] = useState({});\r\n  const intervalRef = useRef(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchAllData = useCallback(async () => {\r\n    if (!enabled || queries.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const results = await Promise.allSettled(\r\n        queries.map(({ key, queryFn }) =>\r\n          queryFn().then(result => ({ key, result }))\r\n        )\r\n      );\r\n\r\n      if (mountedRef.current) {\r\n        const newData = {};\r\n        const newErrors = {};\r\n\r\n        results.forEach((result, index) => {\r\n          const { key } = queries[index];\r\n\r\n          if (result.status === 'fulfilled') {\r\n            newData[key] = result.value.result;\r\n          } else {\r\n            newErrors[key] = result.reason;\r\n            console.error(`[useMultiPolling] ${key}  :`, result.reason);\r\n          }\r\n        });\r\n\r\n        setData(newData);\r\n        setErrors(newErrors);\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('[useMultiPolling]   :', err);\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, [queries, enabled]);\r\n\r\n  const refetchAll = useCallback(() => {\r\n    setLoading(true);\r\n    return fetchAllData();\r\n  }, [fetchAllData]);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n\r\n    //  interval \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    // enabled false      \r\n    if (!enabled || queries.length === 0 || interval === POLLING_INTERVALS.MANUAL) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    //    \r\n    fetchAllData();\r\n\r\n    // Polling  (interval null  )\r\n    if (interval && interval > 0) {\r\n      intervalRef.current = setInterval(fetchAllData, interval);\r\n    }\r\n\r\n    return () => {\r\n      mountedRef.current = false;\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n    };\r\n  }, [fetchAllData, interval, enabled, ...deps]);\r\n\r\n  return { data, loading, errors, refetchAll };\r\n};\r\n\r\nexport default usePolling;\r\n","// src/SellCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\n//   \r\nconst modalBackdropStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 1000,\r\n};\r\n\r\n//   \r\nconst modalContainerStyle = {\r\n  backgroundColor: \"white\",\r\n  padding: \"20px\",\r\n  borderRadius: \"8px\",\r\n  maxWidth: \"500px\",\r\n  width: \"90%\",\r\n  maxHeight: \"90vh\",\r\n  overflowY: \"auto\",\r\n  boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\r\n};\r\n\r\nconst SellCouponModal = memo(function SellCouponModal({\r\n  showSellCouponModal,\r\n  setShowSellCouponModal,\r\n  currentCoupons = 0,\r\n  couponValue = 1000,\r\n  sellAmount = \"\",\r\n  setSellAmount,\r\n  // Dashboard  MyAssets     props .\r\n  //   , Dashboard.js <SellCouponModal SellCoupon={handleSellCoupon} ... />   .\r\n  //  prop   .\r\n  SellCoupon, //      (Dashboard  MyAssets  )\r\n}) {\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //      \r\n  if (!showSellCouponModal) return null;\r\n\r\n  //   \r\n  const calculateValue = () => {\r\n    const amount = parseInt(sellAmount);\r\n    if (!isNaN(amount) && amount > 0) {\r\n      return amount * couponValue;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // handleSubmit  Dashboard handleSellCoupon (props  SellCoupon) .\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const amount = parseInt(sellAmount);\r\n\r\n    //   \r\n    setError(\"\");\r\n\r\n    //   \r\n    if (!amount || isNaN(amount) || amount <= 0) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (amount > currentCoupons) {\r\n      setError(\"      .\");\r\n      return;\r\n    }\r\n\r\n    // SellCoupon prop  \r\n    if (typeof SellCoupon !== \"function\") {\r\n      setError(\"     .\");\r\n      console.error(\"SellCoupon prop is not a function:\", SellCoupon);\r\n      //       .\r\n      // alert(\"     .  .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Dashboard  MyAssets  SellCoupon  .\r\n      // Dashboard.js handleSellCoupon   sellAmount  ,\r\n      //         (Dashboard.js  ).\r\n      await SellCoupon(); // Dashboard handleSellCoupon  MyAssets handleSellCoupon \r\n\r\n      //     Dashboard.js  MyAssets.js handleSellCoupon  \r\n      //  , sellAmount      .\r\n      // (: setShowSellCouponModal(false); setSellAmount(\"\");     )\r\n      //  Dashboard.js handleSellCoupon      sellAmount   .\r\n    } catch (err) {\r\n      console.error(\"     :\", err);\r\n      // err.message      \r\n      setError(\r\n        err.message || \"    .  .\"\r\n      );\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // /   isProcessing  false \r\n      //         SellCoupon  \r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setSellAmount(\"\");\r\n    setError(\"\");\r\n    setShowSellCouponModal(false);\r\n  };\r\n\r\n  //    \r\n  const isInvalidAmount =\r\n    !sellAmount ||\r\n    isNaN(parseInt(sellAmount)) ||\r\n    parseInt(sellAmount) <= 0 ||\r\n    parseInt(sellAmount) > currentCoupons;\r\n\r\n  return (\r\n    <div style={modalBackdropStyle} onClick={handleCancel}>\r\n      <div style={modalContainerStyle} onClick={(e) => e.stopPropagation()}>\r\n        <h3\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"600\",\r\n            marginBottom: \"15px\",\r\n            color: \"#1f2937\",\r\n          }}\r\n        >\r\n           \r\n        </h3>\r\n        <p\r\n          style={{\r\n            marginBottom: \"10px\",\r\n            fontSize: \"14px\",\r\n            color: \"#4b5563\",\r\n          }}\r\n        >\r\n             .\r\n        </p>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n          }}\r\n        >\r\n          <span>  :</span>\r\n          <strong>{currentCoupons.toLocaleString()}</strong>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"15px\",\r\n            padding: \"10px\",\r\n            backgroundColor: \"#f9fafb\",\r\n            borderRadius: \"6px\",\r\n            fontSize: \"15px\",\r\n            color: \"#4f46e5\",\r\n          }}\r\n        >\r\n          <span>1 :</span>\r\n          <strong>{couponValue.toLocaleString()}</strong>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"15px\" }}>\r\n            <label\r\n              htmlFor=\"sellAmount\"\r\n              style={{\r\n                display: \"block\",\r\n                marginBottom: \"5px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n              }}\r\n            >\r\n                :\r\n            </label>\r\n            <input\r\n              id=\"sellAmount\"\r\n              type=\"number\"\r\n              value={sellAmount}\r\n              onChange={(e) => setSellAmount(e.target.value)}\r\n              min=\"1\"\r\n              max={currentCoupons} //  \r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"8px 12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                outline: \"none\", //     \r\n              }}\r\n              disabled={isProcessing}\r\n              required // HTML5   \r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {error && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#fee2e2\", //  \r\n                border: \"1px solid #fecaca\", //  \r\n                borderRadius: \"6px\",\r\n                padding: \"12px 15px\",\r\n                marginBottom: \"15px\",\r\n                color: \"#b91c1c\", //   \r\n                fontSize: \"14px\",\r\n              }}\r\n            >\r\n              <p style={{ margin: 0 }}> {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n              padding: \"10px 15px\",\r\n              backgroundColor: \"#eef2ff\", //   \r\n              borderRadius: \"6px\",\r\n              borderLeft: \"4px solid #4f46e5\", //   \r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"600\",\r\n                color: \"#1f2937\", //   \r\n              }}\r\n            >\r\n              <span> :</span>\r\n              <span style={{ color: \"#4f46e5\" /*   */ }}>\r\n                {calculateValue().toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"10px\",\r\n              marginTop: \"20px\",\r\n            }}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#f3f4f6\", //   \r\n                color: \"#4b5563\", //   \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                cursor: \"pointer\",\r\n                transition: \"background-color 0.2s ease\",\r\n              }}\r\n              disabled={isProcessing}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={{\r\n                padding: \"8px 16px\",\r\n                backgroundColor: \"#ef4444\", //   ( )\r\n                color: \"white\", //  \r\n                border: \"none\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                cursor:\r\n                  isInvalidAmount || isProcessing ? \"not-allowed\" : \"pointer\", //   \r\n                opacity: isInvalidAmount || isProcessing ? 0.6 : 1, //  \r\n                transition: \"background-color 0.2s ease, opacity 0.2s ease\",\r\n              }}\r\n              disabled={isInvalidAmount || isProcessing} //  \r\n            >\r\n              {isProcessing ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SellCouponModal;\r\n","//   : React.memo \r\nimport React, { memo } from \"react\";\r\n\r\nconst GiftCouponModal = memo(function GiftCouponModal({\r\n  showGiftCouponModal,\r\n  setShowGiftCouponModal,\r\n  recipients,\r\n  giftRecipient,\r\n  setGiftRecipient, //   Dashboard  \r\n  giftAmount,\r\n  setGiftAmount, //   Dashboard   \r\n  handleGiftCoupon,\r\n  currentCoupons,\r\n  userId,\r\n}) {\r\n  if (!showGiftCouponModal) {\r\n    return null;\r\n  }\r\n\r\n  const validRecipients = recipients ?? [];\r\n\r\n  const closeModal = () => {\r\n    setShowGiftCouponModal(false);\r\n    // ---    ---\r\n    // setGiftAmount setGiftRecipient      \r\n    if (typeof setGiftAmount === \"function\") {\r\n      setGiftAmount(\"\"); //     \r\n    } else {\r\n      console.error(\"setGiftAmount prop is not a function!\", setGiftAmount); //   \r\n    }\r\n    if (typeof setGiftRecipient === \"function\") {\r\n      setGiftRecipient(\"\");\r\n    } else {\r\n      console.error(\r\n        \"setGiftRecipient prop is not a function!\",\r\n        setGiftRecipient\r\n      ); //   \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-backdrop\"\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        zIndex: 1000,\r\n      }}\r\n      onClick={closeModal} //    \r\n    >\r\n      <div\r\n        className=\"gift-coupon-modal\"\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          padding: \"24px\",\r\n          width: \"90%\",\r\n          maxWidth: \"400px\",\r\n          boxShadow: \"0 10px 25px rgba(0, 0, 0, 0.1)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()} //      \r\n      >\r\n        <h3 style={{ marginTop: 0, color: \"#374151\" }}> </h3>\r\n        <div style={{ marginBottom: \"16px\", color: \"#6b7280\" }}>\r\n          <p>\r\n              : <strong>{currentCoupons}</strong>\r\n          </p>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"16px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n             \r\n          </label>\r\n          <select\r\n            value={giftRecipient}\r\n            // onChange  setGiftRecipient  \r\n            onChange={(e) =>\r\n              typeof setGiftRecipient === \"function\"\r\n                ? setGiftRecipient(e.target.value)\r\n                : console.error(\"setGiftRecipient is not a function\")\r\n            }\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <option value=\"\">  </option>\r\n            {validRecipients\r\n              .filter((recipient) => recipient.id !== userId)\r\n              .map((recipient) => (\r\n                <option key={recipient.id} value={recipient.id}>\r\n                  {recipient.name} ({recipient.id})\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group\" style={{ marginBottom: \"24px\" }}>\r\n          <label\r\n            style={{\r\n              display: \"block\",\r\n              marginBottom: \"8px\",\r\n              fontWeight: \"500\",\r\n              color: \"#4b5563\",\r\n            }}\r\n          >\r\n              \r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={giftAmount}\r\n            // onChange  setGiftAmount  \r\n            onChange={(e) =>\r\n              typeof setGiftAmount === \"function\"\r\n                ? setGiftAmount(e.target.value)\r\n                : console.error(\"setGiftAmount is not a function\")\r\n            }\r\n            placeholder=\"   \"\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"10px\",\r\n              border: \"1px solid #d1d5db\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n            }}\r\n            max={currentCoupons}\r\n            min=\"1\"\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"modal-actions\"\r\n          style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"10px\" }}\r\n        >\r\n          <button\r\n            className=\"cancel-button\"\r\n            onClick={closeModal}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#f3f4f6\",\r\n              color: \"#4b5563\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            className=\"confirm-button\"\r\n            onClick={handleGiftCoupon}\r\n            disabled={\r\n              !giftRecipient ||\r\n              !giftAmount ||\r\n              parseInt(giftAmount) <= 0 ||\r\n              parseInt(giftAmount) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#10b981\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"500\",\r\n              cursor:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              opacity:\r\n                !giftRecipient ||\r\n                !giftAmount ||\r\n                parseInt(giftAmount) <= 0 ||\r\n                parseInt(giftAmount) > currentCoupons\r\n                  ? 0.7\r\n                  : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GiftCouponModal;\r\n","// src/DonationHistoryModal.js\r\n//   : React.memo \r\nimport React, { useState, useEffect, memo } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst DonationHistoryModal = memo(function DonationHistoryModal({\r\n  showDonationHistoryModal,\r\n  setShowDonationHistoryModal,\r\n  students = [],\r\n  classCode,\r\n  donations = [],\r\n}) {\r\n  const { user, userDoc } = useAuth();\r\n  const userId = user?.uid;\r\n  const userClassCode = userDoc?.classCode || classCode;\r\n\r\n  const [studentDonationSummary, setStudentDonationSummary] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalDonationForThisClassGoal, setTotalDonationForThisClassGoal] = useState(0);\r\n\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showDonationHistoryModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    width: \"100%\",\r\n    maxWidth: \"600px\",\r\n    maxHeight: \"85vh\",\r\n    overflow: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  };\r\n\r\n  const modalHeaderStyle = {\r\n    padding: \"16px 20px\",\r\n    borderBottom: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f9fafb\",\r\n  };\r\n\r\n  const modalBodyStyle = {\r\n    padding: \"20px\",\r\n    overflowY: \"auto\",\r\n    maxHeight: \"calc(85vh - 120px)\",\r\n  };\r\n\r\n  const modalFooterStyle = {\r\n    padding: \"16px 20px\",\r\n    borderTop: \"1px solid #e5e7eb\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  };\r\n\r\n  const tableStyles = {\r\n    table: {\r\n      width: \"100%\",\r\n      borderCollapse: \"collapse\",\r\n      fontSize: \"14px\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      border: \"1px solid #e5e7eb\",\r\n    },\r\n    thead: {\r\n      backgroundColor: \"#f3f4f6\",\r\n    },\r\n    th: {\r\n      padding: \"12px 16px\",\r\n      textAlign: \"left\",\r\n      fontWeight: \"600\",\r\n      color: \"#374151\",\r\n      borderBottom: \"1px solid #d1d5db\",\r\n      position: \"sticky\",\r\n      top: 0,\r\n      backgroundColor: \"#f3f4f6\",\r\n      zIndex: 1,\r\n    },\r\n    td: {\r\n      padding: \"12px 16px\",\r\n      borderBottom: \"1px solid #e5e7eb\",\r\n      color: \"#4b5563\",\r\n    },\r\n    tr: {\r\n      transition: \"background-color 0.2s\",\r\n    },\r\n    emptyContainer: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      padding: \"40px 20px\",\r\n      backgroundColor: \"#f9fafb\",\r\n      borderRadius: \"8px\",\r\n      border: \"1px dashed #d1d5db\",\r\n      textAlign: \"center\",\r\n      color: \"#6b7280\",\r\n    },\r\n    emptyIcon: {\r\n      fontSize: \"36px\",\r\n      marginBottom: \"16px\",\r\n      color: \"#9ca3af\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (showDonationHistoryModal) {\r\n      const processDonationData = () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        setStudentDonationSummary([]);\r\n        setTotalDonationForThisClassGoal(0);\r\n\r\n        console.log(\"[DonationHistoryModal]   :\", {\r\n          userClassCode,\r\n          studentsCount: students.length,\r\n          donationsCount: donations.length,\r\n          students: students.map(s => ({ \r\n            id: s.id || s.uid, \r\n            name: s.name || s.nickname,\r\n            classCode: s.classCode \r\n          })),\r\n          donations: donations\r\n        });\r\n\r\n        if (!userClassCode) {\r\n          setError(\"         .\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const classDonations = donations || [];\r\n          const validStudents = Array.isArray(students) ? students : [];\r\n\r\n          const donationsByStudent = {};\r\n          let currentClassGoalTotal = 0;\r\n\r\n          //         \r\n          classDonations.forEach((donation) => {\r\n            const amount = Number(donation.amount) || 0;\r\n            const donorId = donation.userId;\r\n            const donorName = donation.userName || donation.name || \"   \";\r\n\r\n            if (donorId) {\r\n              if (!donationsByStudent[donorId]) {\r\n                donationsByStudent[donorId] = {\r\n                  amount: 0,\r\n                  name: donorName\r\n                };\r\n              }\r\n              donationsByStudent[donorId].amount += amount;\r\n              //   (   )\r\n              if (donorName && donorName !== \"   \") {\r\n                donationsByStudent[donorId].name = donorName;\r\n              }\r\n            }\r\n            currentClassGoalTotal += amount;\r\n          });\r\n\r\n          setTotalDonationForThisClassGoal(currentClassGoalTotal);\r\n\r\n          console.log(\"[DonationHistoryModal]  :\", {\r\n            donationsByStudent,\r\n            totalAmount: currentClassGoalTotal,\r\n            uniqueDonors: Object.keys(donationsByStudent).length\r\n          });\r\n\r\n          //  : students     + donations   \r\n          const allStudentIds = new Set();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            if (studentId) {\r\n              allStudentIds.add(studentId);\r\n            }\r\n          });\r\n\r\n          // donations   \r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            allStudentIds.add(donorId);\r\n          });\r\n\r\n          //    Map \r\n          const studentInfoMap = new Map();\r\n\r\n          // students    \r\n          validStudents.forEach(student => {\r\n            const studentId = student.id || student.uid || student.userId;\r\n            const studentName = student.name || student.nickname || \"   \";\r\n            if (studentId) {\r\n              studentInfoMap.set(studentId, studentName);\r\n            }\r\n          });\r\n\r\n          // donations    (: donations userName)\r\n          Object.keys(donationsByStudent).forEach(donorId => {\r\n            if (!studentInfoMap.has(donorId) || donationsByStudent[donorId].name !== \"   \") {\r\n              studentInfoMap.set(donorId, donationsByStudent[donorId].name);\r\n            }\r\n          });\r\n\r\n          //     ( 0  )\r\n          const summary = Array.from(allStudentIds)\r\n            .map((studentId) => {\r\n              const studentName = studentInfoMap.get(studentId) || \"   \";\r\n              const donationAmount = donationsByStudent[studentId]?.amount || 0;\r\n              const isCurrentUser = userId && studentId === userId;\r\n\r\n              return {\r\n                id: studentId,\r\n                name: studentName,\r\n                cumulativeAmount: donationAmount,\r\n                isCurrentUser: isCurrentUser,\r\n              };\r\n            })\r\n            //     (, ,  )\r\n            .sort((a, b) => a.name.localeCompare(b.name, \"ko\"));\r\n\r\n          console.log(\"[DonationHistoryModal]   :\", {\r\n            totalStudents: summary.length,\r\n            studentsWithDonations: summary.filter(s => s.cumulativeAmount > 0).length,\r\n            summary\r\n          });\r\n\r\n          setStudentDonationSummary(summary);\r\n        } catch (err) {\r\n          console.error(\"[DonationHistoryModal]     :\", err);\r\n          setError(\"     .\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      processDonationData();\r\n    }\r\n  }, [showDonationHistoryModal, students, userId, userClassCode, donations]);\r\n\r\n  const handleClose = () => {\r\n    setShowDonationHistoryModal(false);\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    if (typeof amount !== \"number\" || isNaN(amount)) return \"0\";\r\n    return amount.toLocaleString();\r\n  };\r\n\r\n  const myTotalDonation =\r\n    studentDonationSummary.find((s) => s.isCurrentUser)?.cumulativeAmount || 0;\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={handleClose}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <div style={modalHeaderStyle}>\r\n          <h3 style={{ margin: 0, fontSize: \"18px\", fontWeight: \"600\", color: \"#1f2937\" }}>\r\n               \r\n            {userClassCode && (\r\n              <span style={{ \r\n                marginLeft: \"8px\", \r\n                fontSize: \"14px\", \r\n                backgroundColor: \"#dbeafe\", \r\n                color: \"#1e40af\", \r\n                padding: \"4px 8px\", \r\n                borderRadius: \"12px\", \r\n                fontWeight: \"500\" \r\n              }}>\r\n                {userClassCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              background: \"none\", \r\n              border: \"none\", \r\n              cursor: \"pointer\", \r\n              fontSize: \"20px\", \r\n              color: \"#9ca3af\", \r\n              padding: \"0\", \r\n              lineHeight: \"1\" \r\n            }} \r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div style={modalBodyStyle}>\r\n          <div style={{ \r\n            backgroundColor: \"#eef2ff\", \r\n            padding: \"12px 15px\", \r\n            borderRadius: \"8px\", \r\n            marginBottom: \"20px\", \r\n            border: \"1px solid #c7d2fe\" \r\n          }}>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\", \r\n              marginBottom: \"8px\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                  \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(myTotalDonation)} \r\n              </span>\r\n            </div>\r\n            <div style={{ \r\n              display: \"flex\", \r\n              justifyContent: \"space-between\", \r\n              alignItems: \"center\" \r\n            }}>\r\n              <span style={{ fontSize: \"14px\", fontWeight: \"500\", color: \"#4338ca\" }}>\r\n                   \r\n              </span>\r\n              <span style={{ fontSize: \"16px\", fontWeight: \"600\", color: \"#4f46e5\" }}>\r\n                {formatAmount(totalDonationForThisClassGoal)} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div style={{ textAlign: \"center\", padding: \"40px 0\", color: \"#6b7280\" }}>\r\n                 ...\r\n            </div>\r\n          ) : error ? (\r\n            <div style={{ color: \"#ef4444\", textAlign: \"center\", padding: \"40px 0\" }}>\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {studentDonationSummary.length > 0 ? (\r\n                <table style={tableStyles.table}>\r\n                  <thead style={tableStyles.thead}>\r\n                    <tr>\r\n                      <th style={tableStyles.th}> </th>\r\n                      <th style={{ ...tableStyles.th, width: \"150px\", textAlign: \"right\" }}>\r\n                          \r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {studentDonationSummary.map((student, index) => (\r\n                      <tr\r\n                        key={student.id || index}\r\n                        style={{\r\n                          ...tableStyles.tr,\r\n                          backgroundColor: student.isCurrentUser\r\n                            ? \"#e0e7ff\"\r\n                            : index % 2 === 0\r\n                            ? \"#f9fafb\"\r\n                            : \"#ffffff\",\r\n                        }}\r\n                        onMouseOver={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \"#eef2ff\";\r\n                          }\r\n                        }}\r\n                        onMouseOut={(e) => {\r\n                          if (!student.isCurrentUser) {\r\n                            e.currentTarget.style.backgroundColor = \r\n                              index % 2 === 0 ? \"#f9fafb\" : \"#ffffff\";\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td style={tableStyles.td}>\r\n                          {student.name}\r\n                          {student.isCurrentUser && (\r\n                            <span style={{ \r\n                              marginLeft: \"8px\", \r\n                              fontSize: \"12px\", \r\n                              backgroundColor: \"#dbeafe\", \r\n                              color: \"#1e40af\", \r\n                              padding: \"2px 6px\", \r\n                              borderRadius: \"10px\", \r\n                              fontWeight: \"600\", \r\n                              verticalAlign: \"middle\" \r\n                            }}>\r\n                              \r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                        <td style={{ \r\n                          ...tableStyles.td, \r\n                          textAlign: \"right\", \r\n                          color: student.cumulativeAmount > 0 ? \"#4f46e5\" : \"#6b7280\", \r\n                          fontWeight: student.cumulativeAmount > 0 ? \"600\" : \"normal\" \r\n                        }}>\r\n                          {formatAmount(student.cumulativeAmount)} \r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <div style={tableStyles.emptyContainer}>\r\n                  <div style={tableStyles.emptyIcon}></div>\r\n                  <p style={{ margin: \"0 0 8px 0\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                            \r\n                  </p>\r\n                  <p style={{ margin: 0, fontSize: \"14px\" }}>\r\n                        .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div style={modalFooterStyle}>\r\n          <button \r\n            onClick={handleClose} \r\n            style={{ \r\n              padding: \"8px 16px\", \r\n              backgroundColor: \"#e5e7eb\", \r\n              color: \"#374151\", \r\n              border: \"none\", \r\n              borderRadius: \"6px\", \r\n              cursor: \"pointer\", \r\n              fontWeight: \"500\", \r\n              transition: \"background-color 0.2s, color 0.2s\" \r\n            }}\r\n            onMouseOver={(e) => {\r\n              e.target.style.backgroundColor = \"#d1d5db\";\r\n              e.target.style.color = \"#1f2937\";\r\n            }}\r\n            onMouseOut={(e) => {\r\n              e.target.style.backgroundColor = \"#e5e7eb\";\r\n              e.target.style.color = \"#374151\";\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonationHistoryModal;","// src/DonateCouponModal.js\r\n//   : React.memo \r\nimport React, { useState, memo } from \"react\";\r\n\r\nconst DonateCouponModal = memo(function DonateCouponModal({\r\n  showDonateModal,\r\n  setShowDonateModal,\r\n  currentCoupons,\r\n  onDonate,\r\n  classCode, //  userId, currentGoalId    \r\n}) {\r\n  const [donateAmount, setDonateAmount] = useState(\"\");\r\n  const [donateMessage, setDonateMessage] = useState(\"\");\r\n  const [isDonating, setIsDonating] = useState(false);\r\n\r\n  const handleDonate = async () => {\r\n    const amount = parseInt(donateAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n    if (amount > currentCoupons) {\r\n      alert(\"     .\");\r\n      return;\r\n    }\r\n\r\n    setIsDonating(true);\r\n    try {\r\n      // onDonate MyAssets.js handleDonateCoupon \r\n      const success = await onDonate(amount, donateMessage);\r\n      if (success) {\r\n        //       \r\n        setDonateAmount(\"\");\r\n        setDonateMessage(\"\");\r\n        setShowDonateModal(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[DonateCouponModal]    :\", error);\r\n      alert(\"    .\");\r\n    } finally {\r\n      setIsDonating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isDonating) {\r\n      setShowDonateModal(false);\r\n      setDonateAmount(\"\");\r\n      setDonateMessage(\"\");\r\n    }\r\n  };\r\n\r\n  if (!showDonateModal) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 1000,\r\n        padding: \"20px\",\r\n      }}\r\n      onClick={handleClose}\r\n    >\r\n      <div\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n          width: \"100%\",\r\n          maxWidth: \"500px\",\r\n          overflow: \"hidden\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderBottom: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            backgroundColor: \"#f9fafb\",\r\n          }}\r\n        >\r\n          <h3\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"18px\",\r\n              fontWeight: \"600\",\r\n              color: \"#1f2937\",\r\n            }}\r\n          >\r\n             \r\n            {classCode && (\r\n              <span\r\n                style={{\r\n                  marginLeft: \"8px\",\r\n                  fontSize: \"14px\",\r\n                  backgroundColor: \"#dbeafe\",\r\n                  color: \"#1e40af\",\r\n                  padding: \"4px 8px\",\r\n                  borderRadius: \"12px\",\r\n                  fontWeight: \"500\",\r\n                }}\r\n              >\r\n                {classCode}\r\n              </span>\r\n            )}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              background: \"none\",\r\n              border: \"none\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontSize: \"20px\",\r\n              color: \"#9ca3af\",\r\n              padding: \"0\",\r\n              lineHeight: \"1\",\r\n            }}\r\n            aria-label=\"\"\r\n          >\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ padding: \"20px\" }}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                backgroundColor: \"#eef2ff\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #c7d2fe\",\r\n              }}\r\n            >\r\n              <span\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"500\",\r\n                  color: \"#4338ca\",\r\n                }}\r\n              >\r\n                  \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontSize: \"16px\",\r\n                  fontWeight: \"600\",\r\n                  color: \"#4f46e5\",\r\n                }}\r\n              >\r\n                {currentCoupons.toLocaleString()} \r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={currentCoupons}\r\n              value={donateAmount}\r\n              onChange={(e) => setDonateAmount(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"16px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"   \"\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label\r\n              style={{\r\n                display: \"block\",\r\n                fontSize: \"14px\",\r\n                fontWeight: \"500\",\r\n                color: \"#374151\",\r\n                marginBottom: \"6px\",\r\n              }}\r\n            >\r\n                ()\r\n            </label>\r\n            <textarea\r\n              value={donateMessage}\r\n              onChange={(e) => setDonateMessage(e.target.value)}\r\n              disabled={isDonating}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px\",\r\n                border: \"1px solid #d1d5db\",\r\n                borderRadius: \"6px\",\r\n                fontSize: \"14px\",\r\n                resize: \"vertical\",\r\n                minHeight: \"80px\",\r\n                backgroundColor: isDonating ? \"#f9fafb\" : \"white\",\r\n                cursor: isDonating ? \"not-allowed\" : \"text\",\r\n              }}\r\n              placeholder=\"    \"\r\n            />\r\n          </div>\r\n\r\n          {/*    */}\r\n          {donateAmount && !isNaN(parseInt(donateAmount, 10)) && (\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#f0fdf4\",\r\n                padding: \"12px 16px\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #bbf7d0\",\r\n                marginBottom: \"20px\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <span\r\n                  style={{\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"500\",\r\n                    color: \"#15803d\",\r\n                  }}\r\n                >\r\n                    \r\n                </span>\r\n                <span\r\n                  style={{\r\n                    fontSize: \"16px\",\r\n                    fontWeight: \"600\",\r\n                    color: \"#16a34a\",\r\n                  }}\r\n                >\r\n                  {parseInt(donateAmount, 10).toLocaleString()} \r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            padding: \"16px 20px\",\r\n            borderTop: \"1px solid #e5e7eb\",\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            gap: \"12px\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={isDonating}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor: \"#e5e7eb\",\r\n              color: \"#374151\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor: isDonating ? \"not-allowed\" : \"pointer\",\r\n              fontWeight: \"500\",\r\n              opacity: isDonating ? 0.6 : 1,\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleDonate}\r\n            disabled={\r\n              isDonating ||\r\n              !donateAmount ||\r\n              isNaN(parseInt(donateAmount, 10)) ||\r\n              parseInt(donateAmount, 10) <= 0 ||\r\n              parseInt(donateAmount, 10) > currentCoupons\r\n            }\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              backgroundColor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"#9ca3af\"\r\n                  : \"#4f46e5\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: \"6px\",\r\n              cursor:\r\n                isDonating ||\r\n                !donateAmount ||\r\n                isNaN(parseInt(donateAmount, 10)) ||\r\n                parseInt(donateAmount, 10) <= 0 ||\r\n                parseInt(donateAmount, 10) > currentCoupons\r\n                  ? \"not-allowed\"\r\n                  : \"pointer\",\r\n              fontWeight: \"500\",\r\n            }}\r\n          >\r\n            {isDonating ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DonateCouponModal;","// src/utils/numberFormatter.js\r\n\r\n/**\r\n *    (, , , ,  ) .\r\n * @param {number|string} number -     \r\n * @param {string} unit -      (: '', '')\r\n * @returns {string}    \r\n */\r\nexport const formatKoreanNumber = (number, unit = \"\") => {\r\n  // null, undefined \r\n  if (number === null || number === undefined || number === \"\") {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //    \r\n  let num = number;\r\n  if (typeof num === \"string\") {\r\n    //    \r\n    num = num.replace(/[,]/g, \"\").trim();\r\n    num = parseFloat(num);\r\n    if (isNaN(num)) {\r\n      return \"0\" + unit;\r\n    }\r\n  }\r\n\r\n  // 0 \r\n  if (num === 0) {\r\n    return \"0\" + unit;\r\n  }\r\n\r\n  //  \r\n  const isNegative = num < 0;\r\n  const absNumber = Math.abs(num);\r\n\r\n  const units = [\r\n    { value: 1e20, name: \"\" },\r\n    { value: 1e16, name: \"\" },\r\n    { value: 1e12, name: \"\" },\r\n    { value: 1e8, name: \"\" },\r\n    { value: 1e4, name: \"\" },\r\n  ];\r\n\r\n  const resultParts = [];\r\n  let remaining = absNumber;\r\n\r\n  //   \r\n  for (const { value, name } of units) {\r\n    if (remaining >= value) {\r\n      const quotient = Math.floor(remaining / value);\r\n      resultParts.push(`${quotient}${name}`); // (,)  toLocaleString \r\n      remaining %= value;\r\n    }\r\n  }\r\n\r\n  //    \r\n  if (remaining > 0) {\r\n    //  \r\n    if (remaining % 1 !== 0) {\r\n      resultParts.push(remaining.toLocaleString('ko-KR', { maximumFractionDigits: 2 }));\r\n    } else {\r\n      resultParts.push(Math.floor(remaining)); // (,)  toLocaleString \r\n    }\r\n  }\r\n\r\n  //  \r\n  let result = resultParts.join(\" \");\r\n  \r\n  //  \r\n  if (unit) {\r\n    result += unit;\r\n  }\r\n\r\n  //   \r\n  if (isNegative) {\r\n    result = \"-\" + result;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n *     \r\n * @param {number|string} amount -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanCurrency = (amount) => {\r\n  return formatKoreanNumber(amount, \"\");\r\n};\r\n\r\n/**\r\n *    \r\n * @param {number|string} quantity -  \r\n * @returns {string}   \r\n */\r\nexport const formatKoreanQuantity = (quantity) => {\r\n  return formatKoreanNumber(quantity, \"\");\r\n};\r\n\r\n/**\r\n *   \r\n * @param {number|string} count -  \r\n * @returns {string}   \r\n */\r\nexport const formatCouponCount = (count) => {\r\n  return formatKoreanNumber(count, \"\");\r\n};\r\n\r\n// React    ( ):\r\n/*\r\nimport { formatKoreanCurrency, formatKoreanQuantity, formatCouponCount } from './utils/numberFormatter';\r\n\r\nconst data = {\r\n  totalAssets: 22766445,\r\n  couponRemaining: 38,\r\n  targetAmount: 1500,\r\n  currentCoupons: 782,\r\n  deposit: 19508239,\r\n  profit: 1100\r\n};\r\n\r\n// :\r\nformatKoreanCurrency(data.totalAssets)     // \"2276 6445\"\r\nformatCouponCount(data.couponRemaining)    // \"38\"\r\nformatKoreanCurrency(data.deposit)        // \"1950 8239\"\r\nformatCouponCount(data.currentCoupons)     // \"782\"\r\nformatCouponCount(data.targetAmount)       // \"1500\"\r\nformatKoreanCurrency(data.profit)         // \"1100\"\r\n*/\r\n\r\n//   ( )\r\n// console.log(formatKoreanCurrency(22766445));     // \"2276 6445\"\r\n// console.log(formatKoreanCurrency(19508239));     // \"1950 8239\"\r\n// console.log(formatKoreanCurrency(1500));         // \"1500\"\r\n// console.log(formatKoreanCurrency(1100));         // \"1100\"\r\n// console.log(formatKoreanCurrency(123456789012)); // \"1234 5678 9012\"\r\n// console.log(formatCouponCount(782));             // \"782\"\r\n// console.log(formatCouponCount(38));              // \"38\"","// src/services/AdminDatabaseService.js\r\n//  DB :       50%  \r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, Timestamp } from 'firebase/firestore';\r\n\r\n/**\r\n *   \r\n *  :       \r\n */\r\n\r\n//     \r\nconst TYPE_MAPPING = {\r\n  ' ': 'COUPON_EARN',\r\n  ' ': 'COUPON_USE',\r\n  ' ': 'COUPON_GIVE',\r\n  ' ': 'COUPON_TAKE',\r\n  ' ': 'COUPON_TRANSFER_SEND',\r\n  ' ': 'COUPON_TRANSFER_RECEIVE',\r\n  ' ': 'ITEM_PURCHASE',\r\n  ' ': 'ITEM_USE',\r\n  ' ': 'ITEM_SELL',\r\n  '  ': 'ITEM_MARKET_LIST',\r\n  '  ': 'ITEM_MARKET_BUY',\r\n  '': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_TRANSFER_RECEIVE',\r\n  ' ': 'CASH_TRANSFER_SEND',\r\n  ' ': 'CASH_WITHDRAW',\r\n  ' ': 'CASH_DEPOSIT',\r\n  ' ': 'STOCK_BUY',\r\n  ' ': 'STOCK_SELL',\r\n  ' ': 'STOCK_TAX',\r\n  '': 'STOCK_TAX',\r\n  'TAX_PAYMENT': 'STOCK_TAX',\r\n  ' ': 'TASK_COMPLETE',\r\n  ' ': 'GAME_WIN',\r\n  ' ': 'GAME_LOSE',\r\n  'ADMIN_CASH_SEND': 'ADMIN_CASH_SEND',\r\n  'ADMIN_CASH_TAKE': 'ADMIN_CASH_TAKE',\r\n};\r\n\r\n//   \r\nconst normalizeType = (type) => {\r\n  if (!type) return null;\r\n  return type;\r\n};\r\n\r\n//    - TTL  (5  15, Firestore  67% )\r\nconst cache = new Map();\r\nconst CACHE_TTL = 15 * 60 * 1000; //  [] 15\r\n\r\n/**\r\n *   \r\n */\r\nconst getCacheKey = (classCode, type, options = {}) => {\r\n  return `${classCode}_${type}_${JSON.stringify(options)}`;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst getFromCache = (key) => {\r\n  const cached = cache.get(key);\r\n  if (!cached) return null;\r\n\r\n  const now = Date.now();\r\n  if (now - cached.timestamp > CACHE_TTL) {\r\n    cache.delete(key);\r\n    return null;\r\n  }\r\n\r\n  return cached.data;\r\n};\r\n\r\n/**\r\n *   \r\n */\r\nconst setCache = (key, data) => {\r\n  cache.set(key, {\r\n    data,\r\n    timestamp: Date.now()\r\n  });\r\n};\r\n\r\n/**\r\n *    ( ,   )\r\n *  :     -   50%  \r\n * @param {string} classCode -  \r\n * @param {object} options -   { userId, type, startDate, endDate, limitCount, lastDoc }\r\n * @returns {Promise<{logs: Array, hasMore: boolean, lastDoc: any}>}\r\n */\r\nexport const getActivityLogs = async (classCode, options = {}) => {\r\n  const { userId, type, startDate, endDate, limitCount = 50, lastDoc = null } = options;\r\n\r\n  try {\r\n    //   \r\n    const cacheKey = getCacheKey(classCode, 'activity_logs', options);\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]      :', { classCode, userId, type, limitCount });\r\n\r\n    //  :      \r\n    const constraints = [\r\n      where('classCode', '==', classCode)\r\n    ];\r\n\r\n    // userId  -  \r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //    -   (  : classCode + timestamp)\r\n    if (startDate) {\r\n      const startTimestamp = startDate instanceof Date ? Timestamp.fromDate(startDate) : startDate;\r\n      constraints.push(where('timestamp', '>=', startTimestamp));\r\n    }\r\n    if (endDate) {\r\n      const endTimestamp = endDate instanceof Date ? Timestamp.fromDate(endDate) : endDate;\r\n      constraints.push(where('timestamp', '<=', endTimestamp));\r\n    }\r\n\r\n    //   -   (      )\r\n    // Firestore :     \r\n    const useServerTypeFilter = type && !startDate && !endDate;\r\n    if (useServerTypeFilter) {\r\n      constraints.push(where('type', '==', normalizeType(type)));\r\n    }\r\n\r\n    //   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(limitCount + 1)); // hasMore   +1\r\n\r\n    const q = query(collection(db, 'activity_logs'), ...constraints);\r\n    const snapshot = await getDocs(q);\r\n\r\n    let logs = [];\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      logs.push({\r\n        id: doc.id,\r\n        ...data,\r\n        timestamp: data.timestamp?.toDate() || new Date()\r\n      });\r\n    });\r\n\r\n    //          \r\n    if (type && !useServerTypeFilter) {\r\n      const normalizedFilterType = normalizeType(type);\r\n      logs = logs.filter(log => log.type === normalizedFilterType);\r\n    }\r\n\r\n    // hasMore    \r\n    const hasMore = logs.length > limitCount;\r\n    const paginatedLogs = logs.slice(0, limitCount);\r\n    const newLastDoc = paginatedLogs.length > 0 ? paginatedLogs[paginatedLogs.length - 1].id : null;\r\n\r\n    console.log(`[AdminDatabaseService]    : ${paginatedLogs.length} ( )`);\r\n\r\n    const result = {\r\n      logs: paginatedLogs,\r\n      hasMore,\r\n      lastDoc: newLastDoc\r\n    };\r\n\r\n    //   \r\n    setCache(cacheKey, result);\r\n\r\n    return result;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponEarnLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_EARN'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getCouponUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'COUPON_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemPurchaseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_PURCHASE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemUseLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_USE'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *      \r\n * @param {string} classCode -  \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getItemSellLogs = async (classCode, options = {}) => {\r\n  try {\r\n    const result = await getActivityLogs(classCode, {\r\n      ...options,\r\n      type: 'ITEM_SELL'\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]     :', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *     ()\r\n *  : classCode       \r\n * @param {string} classCode -  \r\n * @param {string} userId -  ID ()\r\n * @returns {Promise<object>}\r\n */\r\nexport const getActivitySummary = async (classCode, userId = null) => {\r\n  try {\r\n    const cacheKey = getCacheKey(classCode, 'activity_summary', { userId });\r\n    const cached = getFromCache(cacheKey);\r\n    if (cached) {\r\n      console.log('[AdminDatabaseService]    ');\r\n      return cached;\r\n    }\r\n\r\n    console.log('[AdminDatabaseService]     ( ):', { classCode, userId });\r\n\r\n    //  : classCode   \r\n    const constraints = [where('classCode', '==', classCode)];\r\n\r\n    if (userId) {\r\n      constraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    //  1000   \r\n    constraints.push(orderBy('timestamp', 'desc'));\r\n    constraints.push(limit(1000));\r\n\r\n    const baseQuery = query(collection(db, 'activity_logs'), ...constraints);\r\n\r\n    //    \r\n    const snapshot = await getDocs(baseQuery);\r\n\r\n    console.log(`[AdminDatabaseService]   : ${snapshot.size} (classCode  )`);\r\n\r\n    const summary = {\r\n      totalActivities: 0,\r\n      couponEarned: 0,\r\n      couponUsed: 0,\r\n      itemPurchased: 0,\r\n      itemUsed: 0,\r\n      itemSold: 0,\r\n      byUser: {}\r\n    };\r\n\r\n    snapshot.forEach(doc => {\r\n      const data = doc.data();\r\n      const normalizedType = normalizeType(data.type); //  \r\n\r\n      summary.totalActivities++;\r\n\r\n      //  \r\n      if (!summary.byUser[data.userId]) {\r\n        summary.byUser[data.userId] = {\r\n          userName: data.userName || '  ',\r\n          couponEarned: 0,\r\n          couponUsed: 0,\r\n          itemPurchased: 0,\r\n          itemUsed: 0,\r\n          itemSold: 0,\r\n          activities: []\r\n        };\r\n      }\r\n\r\n      const userSummary = summary.byUser[data.userId];\r\n\r\n      //   (  )\r\n      switch (normalizedType) {\r\n        case 'COUPON_EARN':\r\n          const earnAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponEarned += earnAmount;\r\n          userSummary.couponEarned += earnAmount;\r\n          break;\r\n        case 'COUPON_USE':\r\n          const useAmount = data.metadata?.couponAmount || 1; //  1\r\n          summary.couponUsed += useAmount;\r\n          userSummary.couponUsed += useAmount;\r\n          break;\r\n        case 'ITEM_PURCHASE':\r\n          summary.itemPurchased++;\r\n          userSummary.itemPurchased++;\r\n          break;\r\n        case 'ITEM_USE':\r\n          summary.itemUsed++;\r\n          userSummary.itemUsed++;\r\n          break;\r\n        case 'ITEM_SELL':\r\n        case 'ITEM_MARKET_LIST':\r\n          summary.itemSold++;\r\n          userSummary.itemSold++;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      //    ( 10)\r\n      if (userSummary.activities.length < 10) {\r\n        userSummary.activities.push({\r\n          type: normalizedType, //   \r\n          description: data.description,\r\n          timestamp: data.timestamp?.toDate() || new Date(),\r\n          metadata: data.metadata\r\n        });\r\n      }\r\n    });\r\n\r\n    console.log(`[AdminDatabaseService]    :`, {\r\n      totalActivities: summary.totalActivities,\r\n      couponEarned: summary.couponEarned,\r\n      couponUsed: summary.couponUsed,\r\n      itemPurchased: summary.itemPurchased,\r\n      itemUsed: summary.itemUsed,\r\n      itemSold: summary.itemSold,\r\n      userCount: Object.keys(summary.byUser).length\r\n    });\r\n\r\n    //  \r\n    setCache(cacheKey, summary);\r\n\r\n    return summary;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService]    :', error);\r\n    console.error('[AdminDatabaseService]  :', error.message, error.code);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n *  \r\n */\r\nexport const clearCache = () => {\r\n  cache.clear();\r\n  console.log('[AdminDatabaseService]   ');\r\n};\r\n\r\n/**\r\n *    \r\n */\r\nexport const clearClassCache = (classCode) => {\r\n  const keysToDelete = [];\r\n  cache.forEach((value, key) => {\r\n    if (key.startsWith(classCode)) {\r\n      keysToDelete.push(key);\r\n    }\r\n  });\r\n  keysToDelete.forEach(key => cache.delete(key));\r\n  console.log(`[AdminDatabaseService] ${classCode}    `);\r\n};\r\n\r\n/**\r\n * transactions    ()\r\n * @param {Array} userIds -  ID \r\n * @param {object} options -  \r\n * @returns {Promise<Array>}\r\n */\r\nexport const getTransactionsData = async (userIds = [], options = {}) => {\r\n  try {\r\n    const { limitCount = 100 } = options;\r\n\r\n    console.log('[AdminDatabaseService] transactions   :', { userIdsCount: userIds.length });\r\n\r\n    if (userIds.length === 0) {\r\n      console.warn('[AdminDatabaseService] userIds ');\r\n      return [];\r\n    }\r\n\r\n    // Firestore 'in'   10   \r\n    const batches = [];\r\n    for (let i = 0; i < userIds.length; i += 10) {\r\n      batches.push(userIds.slice(i, i + 10));\r\n    }\r\n\r\n    const allTransactions = [];\r\n\r\n    for (const batch of batches) {\r\n      let q = query(\r\n        collection(db, 'transactions'),\r\n        where('userId', 'in', batch),\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n\r\n      snapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        allTransactions.push({\r\n          id: doc.id,\r\n          ...data,\r\n          timestamp: data.timestamp?.toDate() || new Date()\r\n        });\r\n      });\r\n    }\r\n\r\n    console.log(`[AdminDatabaseService] transactions  : ${allTransactions.length}`);\r\n    return allTransactions;\r\n\r\n  } catch (error) {\r\n    console.error('[AdminDatabaseService] transactions  :', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * transactions  activity_logs  \r\n * @param {Array} transactions -  \r\n * @returns {Array}\r\n */\r\nexport const convertTransactionsToLogs = (transactions) => {\r\n  return transactions.map(tx => {\r\n    let type = 'CASH_INCOME';\r\n    let description = tx.description || '';\r\n\r\n    //    \r\n    if (tx.description) {\r\n      if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_EARN';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'COUPON_USE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_PURCHASE';\r\n      } else if (tx.description.includes('') && tx.description.includes('')) {\r\n        type = 'ITEM_USE';\r\n      } else if (tx.description.includes('') && (tx.description.includes('') || tx.description.includes(''))) {\r\n        type = 'ITEM_SELL';\r\n      } else if (tx.description.includes('')) {\r\n        type = tx.amount > 0 ? 'CASH_TRANSFER_RECEIVE' : 'CASH_TRANSFER_SEND';\r\n      } else if (tx.type === 'expense') {\r\n        type = 'CASH_EXPENSE';\r\n      }\r\n    }\r\n\r\n    return {\r\n      id: tx.id,\r\n      userId: tx.userId,\r\n      userName: tx.userName || '  ',\r\n      type,\r\n      description,\r\n      timestamp: tx.timestamp,\r\n      metadata: {\r\n        amount: tx.amount,\r\n        category: tx.category,\r\n        ...tx.metadata\r\n      }\r\n    };\r\n  });\r\n};\r\n","// src/AdminDatabase.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport {\r\n  getActivityLogs,\r\n  clearClassCache,\r\n  getTransactionsData,\r\n  convertTransactionsToLogs\r\n} from '../../services/AdminDatabaseService';\r\nimport './AdminDatabase.css';\r\n\r\nconst AdminDatabase = () => {\r\n  const { userDoc, allClassMembers } = useAuth();\r\n  const [selectedUser, setSelectedUser] = useState('all');\r\n  const [activityData, setActivityData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [lastDoc, setLastDoc] = useState(null);\r\n  const [debugInfo, setDebugInfo] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activityTypeFilter, setActivityTypeFilter] = useState('all');\r\n\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const loadData = useCallback(async (refresh = false, lastDocForPagination = null) => {\r\n    if (!classCode || classCode === '') {\r\n      setError('  .');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      //  :        \r\n      const isFiltered = activityTypeFilter !== 'all' || searchTerm.trim() !== '';\r\n      const limitCount = isFiltered ? 100 : 10; //    100,  10\r\n\r\n      const options = {\r\n        userId: selectedUser !== 'all' ? selectedUser : null,\r\n        limitCount: limitCount,\r\n        lastDoc: refresh ? null : lastDocForPagination,\r\n        useCache: !refresh\r\n      };\r\n\r\n      const result = await getActivityLogs(classCode, options);\r\n\r\n      if (result.logs.length === 0 && allClassMembers.length > 0 && refresh) {\r\n        const userIds = selectedUser !== 'all'\r\n          ? [selectedUser]\r\n          : allClassMembers.map(m => m.id || m.uid);\r\n        const transactions = await getTransactionsData(userIds, { limitCount: 100 });\r\n\r\n        if (transactions.length > 0) {\r\n          result.logs = convertTransactionsToLogs(transactions);\r\n          result.hasMore = false;\r\n        }\r\n      }\r\n\r\n      if (refresh) {\r\n        setActivityData(result.logs);\r\n      } else {\r\n        setActivityData(prev => [...prev, ...result.logs]);\r\n      }\r\n      setHasMore(result.hasMore);\r\n      setLastDoc(result.lastDoc);\r\n\r\n    } catch (err) {\r\n      console.error('[AdminDatabase]   :', err);\r\n      setError('    .');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [classCode, selectedUser, allClassMembers, activityTypeFilter, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    loadData(true, null);\r\n  }, [selectedUser, classCode]); // loadData    \r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (activityData.length > 0) {\r\n      setActivityData([]);\r\n      setLastDoc(null);\r\n      setHasMore(false);\r\n      loadData(true, null);\r\n    }\r\n  }, [activityTypeFilter, searchTerm]); //     \r\n\r\n  const handleRefresh = () => {\r\n    clearClassCache(classCode);\r\n    setActivityData([]);\r\n    setLastDoc(null);\r\n    setHasMore(false);\r\n    setDebugInfo('');\r\n    loadData(true, null);\r\n  };\r\n\r\n  const handleDebugFirestore = async () => {\r\n    setDebugInfo(' ...');\r\n    try {\r\n      let info = [];\r\n\r\n      //     \r\n      const typeCounts = {};\r\n      const typeExamples = {};\r\n\r\n      activityData.forEach(log => {\r\n        const type = log.type || 'undefined';\r\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n\r\n        if (!typeExamples[type]) {\r\n          typeExamples[type] = {\r\n            description: log.description,\r\n            userName: log.userName,\r\n            timestamp: log.timestamp\r\n          };\r\n        }\r\n      });\r\n\r\n      info.push('===      ===');\r\n      info.push(` ${activityData.length} `);\r\n      info.push('');\r\n\r\n      Object.entries(typeCounts)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .forEach(([type, count]) => {\r\n          info.push(`${type}: ${count}`);\r\n          if (typeExamples[type]) {\r\n            info.push(`  : ${typeExamples[type].description}`);\r\n          }\r\n          //     \r\n          if (type.includes('COUPON') || type.includes('') ||\r\n              type.includes('ITEM') || type.includes('')) {\r\n            info.push(`   /   !`);\r\n          }\r\n        });\r\n\r\n      info.push('');\r\n      info.push('===    ===');\r\n\r\n      //      \r\n      const filters = {\r\n        'coupon': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'item': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        },\r\n        'cash': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER') ||\r\n                 type.includes('');\r\n        },\r\n        'stock': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        },\r\n        'game': (log) => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }\r\n      };\r\n\r\n      Object.entries(filters).forEach(([filterName, filterFunc]) => {\r\n        const matchedLogs = activityData.filter(log => filterFunc(log));\r\n        info.push(`${filterName}: ${matchedLogs.length}`);\r\n\r\n        const matchedTypes = new Set(matchedLogs.map(log => log.type));\r\n        if (matchedTypes.size > 0) {\r\n          info.push(`   : ${Array.from(matchedTypes).join(', ')}`);\r\n        }\r\n      });\r\n\r\n      const debugText = info.join('\\n');\r\n      setDebugInfo(debugText);\r\n\r\n    } catch (error) {\r\n      console.error('[AdminDatabase DEBUG] :', error);\r\n      setDebugInfo(`: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadData(false, lastDoc);\r\n    }\r\n  };\r\n\r\n  const getActivityTypeText = (type) => {\r\n    const typeMap = {\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '  ': '  ',\r\n      '  ': '  ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      ' ': ' ',\r\n      '': ' ',\r\n      '': '',\r\n      ' ': ' ',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      ' ': '',\r\n      'COUPON_EARN': ' ',\r\n      'COUPON_USE': ' ',\r\n      'COUPON_GIVE': ' ',\r\n      'COUPON_TAKE': ' ',\r\n      'COUPON_TRANSFER_SEND': ' ',\r\n      'COUPON_TRANSFER_RECEIVE': ' ',\r\n      'ITEM_PURCHASE': ' ',\r\n      'ITEM_USE': ' ',\r\n      'ITEM_SELL': ' ',\r\n      'ITEM_MARKET_LIST': '  ',\r\n      'ITEM_MARKET_BUY': '  ',\r\n      'CASH_TRANSFER_SEND': '',\r\n      'CASH_TRANSFER_RECEIVE': ' ',\r\n      'CASH_WITHDRAW': '',\r\n      'CASH_DEPOSIT': '',\r\n      'STOCK_BUY': ' ',\r\n      'STOCK_SELL': ' ',\r\n      'STOCK_TAX': ' ',\r\n      'TAX_PAYMENT': ' ',\r\n      'ADMIN_CASH_SEND': ' ',\r\n      'ADMIN_CASH_TAKE': ' ',\r\n      'ADMIN_COUPON_GIVE': '  ',\r\n      'ADMIN_COUPON_TAKE': '  ',\r\n      'TASK_COMPLETE': ' ',\r\n      'GAME_WIN': ' ',\r\n      'GAME_LOSE': ' ',\r\n    };\r\n    return typeMap[type] || type;\r\n  };\r\n\r\n  const getActivityTypeColor = (type) => {\r\n    if (!type) return 'text-gray-600';\r\n    const typeStr = type.toString().toLowerCase();\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-green-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-red-600';\r\n    if (type === 'COUPON_EARN' || type === 'COUPON_GIVE' || type === 'COUPON_TRANSFER_RECEIVE' || type === 'ADMIN_COUPON_GIVE') return 'text-green-600';\r\n    if (type === 'COUPON_USE' || type === 'COUPON_TAKE' || type === 'COUPON_TRANSFER_SEND' || type === 'ADMIN_COUPON_TAKE') return 'text-red-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('') && typeStr.includes('')) return 'text-orange-600';\r\n    if (typeStr.includes('') && (typeStr.includes('') || typeStr.includes(''))) return 'text-purple-600';\r\n    if (type === 'ITEM_PURCHASE' || type === 'ITEM_MARKET_BUY') return 'text-blue-600';\r\n    if (type === 'ITEM_USE') return 'text-orange-600';\r\n    if (type === 'ITEM_SELL' || type === 'ITEM_MARKET_LIST') return 'text-purple-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-green-600';\r\n    if (typeStr.includes('') || typeStr.includes('') || typeStr.includes('')) return 'text-red-600';\r\n    if (type === 'ADMIN_CASH_SEND' || type === 'CASH_TRANSFER_RECEIVE' || type === 'CASH_DEPOSIT' || type === ' ') return 'text-green-600';\r\n    if (type === 'ADMIN_CASH_TAKE' || type === 'CASH_TRANSFER_SEND' || type === 'CASH_WITHDRAW' || type === ' ') return 'text-red-600';\r\n    if (typeStr.includes('')) return 'text-blue-600';\r\n    if (typeStr.includes('')) return 'text-indigo-600';\r\n    if (typeStr.includes('') || typeStr.includes('')) return 'text-yellow-600';\r\n    if (type === 'STOCK_BUY') return 'text-blue-600';\r\n    if (type === 'STOCK_SELL') return 'text-indigo-600';\r\n    if (type === 'STOCK_TAX' || type === 'TAX_PAYMENT') return 'text-yellow-600';\r\n    if (type === 'GAME_WIN') return 'text-green-600';\r\n    if (type === 'GAME_LOSE') return 'text-red-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filteredActivityData = activityData.filter(log => {\r\n    //  \r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      const matchesSearch = (\r\n        log.description?.toLowerCase().includes(term) ||\r\n        log.userName?.toLowerCase().includes(term) ||\r\n        log.type?.toLowerCase().includes(term)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n\r\n    //   \r\n    if (activityTypeFilter !== 'all') {\r\n      const logType = log.type?.toString() || '';\r\n      const logDesc = log.description?.toString() || '';\r\n\r\n      if (activityTypeFilter === 'coupon') {\r\n        //   - Functions   \r\n        const couponTypes = [\r\n          ' ', ' ', ' ', ' ',\r\n          ' ', ' ', ' ', ' ',\r\n          'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n          'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n          'COUPON_DONATE', 'COUPON_SELL'\r\n        ];\r\n        const isCouponType = couponTypes.some(type => logType === type) ||\r\n                            logType.includes('') ||\r\n                            logDesc.includes('');\r\n        if (!isCouponType) return false;\r\n      } else if (activityTypeFilter === 'item') {\r\n        //   - Functions   \r\n        const itemTypes = [\r\n          ' ', ' ', ' ',\r\n          '  ', '  ', ' ', ' ',\r\n          'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n          'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n        ];\r\n        const isItemType = itemTypes.some(type => logType === type) ||\r\n                          logType.includes('') ||\r\n                          logDesc.includes('');\r\n        if (!isItemType) return false;\r\n      } else if (activityTypeFilter === 'cash') {\r\n        //  \r\n        const isCashType = logType.includes('CASH') || logType.includes('') ||\r\n                          logType.includes('') || logType.includes('') ||\r\n                          logType.includes('ADMIN_CASH') || logType.includes('TRANSFER') ||\r\n                          logType.includes('');\r\n        if (!isCashType) return false;\r\n      } else if (activityTypeFilter === 'stock') {\r\n        //  \r\n        const isStockType = logType.includes('STOCK') || logType.includes('') ||\r\n                           logType.includes('') || logType.includes('TAX');\r\n        if (!isStockType) return false;\r\n      } else if (activityTypeFilter === 'game') {\r\n        //  \r\n        const isGameType = logType.includes('GAME') || logType.includes('');\r\n        if (!isGameType) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  const renderActivityLogs = () => {\r\n    if (filteredActivityData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <p className=\"text-lg mb-2\">{searchTerm ? '  .' : '  .'}</p>\r\n          <p className=\"text-sm\"> : {activityData.length}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"text-sm text-gray-600 mb-4\">\r\n           {filteredActivityData.length}  (: {activityData.length} )\r\n        </div>\r\n\r\n        {filteredActivityData.map((log, index) => {\r\n          return (\r\n            <div key={log.id || index} className=\"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <span className={`font-bold text-base ${getActivityTypeColor(log.type)}`}>\r\n                      {getActivityTypeText(log.type)}\r\n                    </span>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{log.userName || '  '}</span>\r\n                    <span className=\"text-xs text-gray-500\">{formatDate(log.timestamp)}</span>\r\n                  </div>\r\n                  <p className=\"text-gray-800 text-sm mb-2 font-medium\">{log.description || ' '}</p>\r\n                  {log.metadata && Object.keys(log.metadata).length > 0 && (\r\n                    <div className=\"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200\">\r\n                      {log.metadata.activity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.activity}</div>\r\n                      )}\r\n                      {log.metadata.reason && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.reason}</div>\r\n                      )}\r\n                      {log.metadata.itemName && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.itemName}</div>\r\n                      )}\r\n                      {log.metadata.quantity && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.quantity}</div>\r\n                      )}\r\n                      {log.metadata.amount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.amount.toLocaleString()}</div>\r\n                      )}\r\n                      {log.metadata.couponAmount !== undefined && (\r\n                        <div className=\"mb-1\"><strong>:</strong> {log.metadata.couponAmount}</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {hasMore && (\r\n          <div className=\"text-center py-4\">\r\n            <button\r\n              onClick={handleLoadMore}\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300\"\r\n            >\r\n              {loading ? ' ...' : ''}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-database p-6\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\"> </h2>\r\n        <p className=\"text-gray-600\">       .</p>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n        <div className=\"flex flex-wrap gap-4 items-center\">\r\n          {/*   */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={selectedUser}\r\n              onChange={(e) => setSelectedUser(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              {allClassMembers && allClassMembers.map(member => (\r\n                <option key={member.id || member.uid} value={member.id || member.id}>\r\n                  {member.name || member.nickname || ' '}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/*    */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"> </label>\r\n            <select\r\n              value={activityTypeFilter}\r\n              onChange={(e) => setActivityTypeFilter(e.target.value)}\r\n              className=\"w-full p-2 border rounded-md\"\r\n            >\r\n              <option value=\"all\"> </option>\r\n              <option value=\"coupon\"> </option>\r\n              <option value=\"item\"> </option>\r\n              <option value=\"cash\"> </option>\r\n              <option value=\"stock\"> </option>\r\n              <option value=\"game\"> </option>\r\n            </select>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\"></label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\",   ...\"\r\n              className=\"w-full p-2 border rounded-md\"\r\n            />\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={handleDebugFirestore}\r\n              className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        {debugInfo && (\r\n          <div className=\"mt-4 p-4 bg-gray-100 rounded-md\">\r\n            <h4 className=\"font-semibold mb-2\"> :</h4>\r\n            <pre className=\"text-xs whitespace-pre-wrap\">{debugInfo}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {activityData.length > 0 && (() => {\r\n        const couponCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const couponTypes = [\r\n            ' ', ' ', ' ', ' ',\r\n            ' ', ' ', ' ', ' ',\r\n            'COUPON_EARN', 'COUPON_USE', 'COUPON_GIVE', 'COUPON_TAKE',\r\n            'COUPON_TRANSFER_SEND', 'COUPON_TRANSFER_RECEIVE',\r\n            'COUPON_DONATE', 'COUPON_SELL'\r\n          ];\r\n          return couponTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const itemCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          const desc = log.description?.toString() || '';\r\n          const itemTypes = [\r\n            ' ', ' ', ' ',\r\n            '  ', '  ', ' ', ' ',\r\n            'ITEM_PURCHASE', 'ITEM_USE', 'ITEM_SELL',\r\n            'ITEM_MARKET_LIST', 'ITEM_MARKET_BUY', 'ITEM_OBTAIN', 'ITEM_MOVE'\r\n          ];\r\n          return itemTypes.some(t => type === t) ||\r\n                 type.includes('') ||\r\n                 desc.includes('');\r\n        }).length;\r\n\r\n        const cashCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('CASH') || type.includes('') ||\r\n                 type.includes('') || type.includes('') ||\r\n                 type.includes('ADMIN_CASH') || type.includes('TRANSFER');\r\n        }).length;\r\n\r\n        const stockCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('STOCK') || type.includes('') ||\r\n                 type.includes('') || type.includes('TAX');\r\n        }).length;\r\n\r\n        const gameCount = activityData.filter(log => {\r\n          const type = log.type?.toString() || '';\r\n          return type.includes('GAME') || type.includes('');\r\n        }).length;\r\n\r\n        return (\r\n          <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">  ( )</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n              <div\r\n                className=\"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => setActivityTypeFilter('all')}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className=\"text-xl font-bold text-blue-600\">\r\n                  {activityData.length}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  couponCount > 0\r\n                    ? 'bg-green-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => couponCount > 0 && setActivityTypeFilter('coupon')}\r\n                title={couponCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${couponCount > 0 ? 'text-green-600' : 'text-gray-400'}`}>\r\n                  {couponCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  itemCount > 0\r\n                    ? 'bg-purple-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => itemCount > 0 && setActivityTypeFilter('item')}\r\n                title={itemCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${itemCount > 0 ? 'text-purple-600' : 'text-gray-400'}`}>\r\n                  {itemCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  cashCount > 0\r\n                    ? 'bg-yellow-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => cashCount > 0 && setActivityTypeFilter('cash')}\r\n                title={cashCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${cashCount > 0 ? 'text-yellow-600' : 'text-gray-400'}`}>\r\n                  {cashCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  stockCount > 0\r\n                    ? 'bg-indigo-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => stockCount > 0 && setActivityTypeFilter('stock')}\r\n                title={stockCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${stockCount > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  {stockCount}\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`p-3 rounded transition-shadow ${\r\n                  gameCount > 0\r\n                    ? 'bg-red-50 cursor-pointer hover:shadow-md'\r\n                    : 'bg-gray-100 cursor-not-allowed opacity-50'\r\n                }`}\r\n                onClick={() => gameCount > 0 && setActivityTypeFilter('game')}\r\n                title={gameCount === 0 ? '    ' : '    '}\r\n              >\r\n                <div className=\"text-xs text-gray-600 mb-1\"> </div>\r\n                <div className={`text-xl font-bold ${gameCount > 0 ? 'text-red-600' : 'text-gray-400'}`}>\r\n                  {gameCount}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n\r\n      {/*  */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-800\">  </h3>\r\n        <p className=\"text-sm text-gray-600 mt-1\">      .</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      {loading && activityData.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">  ...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/*  */}\r\n      {!loading || activityData.length > 0 ? (\r\n        <div>\r\n          {renderActivityLogs()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDatabase;","// src/components/PageWrapper.js\r\n//    -     \r\n\r\nimport React from 'react';\r\nimport { Loader2, CheckSquare } from 'lucide-react';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const PageContainer = ({ children, className = '' }) => (\r\n  <div className={`min-h-full w-full bg-[#0a0a12] ${className}`}>\r\n    <div className=\"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const PageHeader = ({\r\n  title,\r\n  subtitle,\r\n  icon: Icon,\r\n  badge,\r\n  action,\r\n  backButton,\r\n  className = '',\r\n}) => (\r\n  <section className={`bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ${className}`}>\r\n    <div className=\"flex items-center gap-3\">\r\n      {backButton}\r\n      {Icon && (\r\n        <div className=\"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30\">\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      )}\r\n      <div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h2 className=\"text-lg md:text-xl font-bold text-white tracking-tight\">\r\n            {title}\r\n          </h2>\r\n          {badge}\r\n        </div>\r\n        {subtitle && (\r\n          <p className=\"text-xs md:text-sm text-slate-400 font-medium\">\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {action && (\r\n      <div className=\"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto\">\r\n        {action}\r\n      </div>\r\n    )}\r\n  </section>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const SectionTitle = ({ children, icon: Icon, action, className = '' }) => (\r\n  <div className={`flex items-center justify-between px-1 mb-4 ${className}`}>\r\n    <h3 className=\"text-lg md:text-xl font-bold text-white flex items-center gap-2\">\r\n      {Icon && <Icon className=\"w-5 h-5 text-cyan-400\" />}\r\n      {children}\r\n    </h3>\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - null (HTML  )\r\n// ============================================\r\nexport const LoadingState = ({ message = '  ...' }) => null;\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const ErrorState = ({ title = ' ', message, onRetry }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    <div className=\"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4\">\r\n      <span className=\"text-3xl text-red-400\">!</span>\r\n    </div>\r\n    <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\r\n    {message && <p className=\"text-slate-400 mb-4 max-w-md\">{message}</p>}\r\n    {onRetry && (\r\n      <button\r\n        onClick={onRetry}\r\n        className=\"px-5 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-slate-900 rounded-xl font-bold text-sm transition-all shadow-lg shadow-cyan-500/30\"\r\n      >\r\n         \r\n      </button>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const EmptyState = ({ icon: Icon, title, description, action }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n    {Icon && (\r\n      <div className=\"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30\">\r\n        <Icon className=\"w-8 h-8 text-slate-400\" />\r\n      </div>\r\n    )}\r\n    {title && (\r\n      <h3 className=\"text-lg font-bold text-slate-300 mb-2\">{title}</h3>\r\n    )}\r\n    {description && (\r\n      <p className=\"text-slate-500 font-medium mb-6 max-w-md\">{description}</p>\r\n    )}\r\n    {action}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const CardGrid = ({ children, cols = 3, className = '' }) => {\r\n  const colsClass = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 md:grid-cols-2',\r\n    3: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3',\r\n    4: 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${colsClass[cols] || colsClass[3]} gap-6 ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const StatCard = ({\r\n  icon: Icon,\r\n  label,\r\n  value,\r\n  subValue,\r\n  trend,\r\n  iconBg = 'bg-cyan-900/30',\r\n  iconColor = 'text-cyan-400',\r\n  onClick,\r\n}) => (\r\n  <div\r\n    className={`bg-[#14142380] backdrop-blur-sm rounded-2xl p-6 border border-cyan-900/30 shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''\r\n      }`}\r\n    onClick={onClick}\r\n  >\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${iconBg}`}>\r\n        <Icon className={`w-6 h-6 ${iconColor}`} />\r\n      </div>\r\n      {trend && (\r\n        <span className={`text-xs font-bold px-2.5 py-1 rounded-lg ${trend.type === 'up' ? 'bg-emerald-900/30 text-emerald-400' : 'bg-red-900/30 text-red-400'\r\n          }`}>\r\n          {trend.type === 'up' ? '+' : '-'}{trend.value}%\r\n        </span>\r\n      )}\r\n    </div>\r\n    <div className=\"mt-4\">\r\n      <p className=\"text-sm text-slate-400 font-medium\">{label}</p>\r\n      <p className=\"text-2xl font-bold text-white mt-1 tracking-tight\">{value}</p>\r\n      {subValue && (\r\n        <p className=\"text-sm text-slate-500 mt-1\">{subValue}</p>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   - \r\n// ============================================\r\nexport const AssetCard = ({ icon: Icon, label, value, color, iconColor }) => (\r\n  <div className={`hidden lg:flex items-center gap-3 px-3 py-1.5 rounded-xl ${color} bg-opacity-50 border border-transparent`}>\r\n    <div className={`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${iconColor}`}>\r\n      <Icon className=\"w-5 h-5\" />\r\n    </div>\r\n    <div>\r\n      <p className=\"text-[10px] font-bold opacity-70 mb-0 leading-tight\">{label}</p>\r\n      <p className=\"text-lg font-black tracking-tight leading-tight\">{value}</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const TabGroup = ({ tabs, activeTab, onChange, className = '' }) => (\r\n  <div className={`flex gap-1 p-1 bg-[#0a0a12] rounded-xl border border-cyan-900/30 ${className}`}>\r\n    {tabs.map((tab) => (\r\n      <button\r\n        key={tab.id}\r\n        onClick={() => onChange(tab.id)}\r\n        className={`flex-1 px-4 py-2.5 text-sm font-bold rounded-lg transition-all duration-200 ${activeTab === tab.id\r\n          ? 'bg-cyan-500 text-slate-900 shadow-lg shadow-cyan-500/30'\r\n          : 'text-slate-400 hover:text-white hover:bg-white/5'\r\n          }`}\r\n      >\r\n        {tab.icon && <tab.icon className=\"w-4 h-4 mr-2 inline-block\" />}\r\n        {tab.label}\r\n        {tab.count !== undefined && (\r\n          <span className={`ml-2 px-1.5 py-0.5 text-xs rounded-full ${activeTab === tab.id\r\n            ? 'bg-slate-900 text-cyan-400'\r\n            : 'bg-slate-800 text-slate-400'\r\n            }`}>\r\n            {tab.count}\r\n          </span>\r\n        )}\r\n      </button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const ActionButton = ({\r\n  children,\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  onClick,\r\n  className = '',\r\n  title,\r\n}) => {\r\n  const variants = {\r\n    primary: 'bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30',\r\n    secondary: 'bg-slate-800 hover:bg-slate-700 text-slate-200',\r\n    outline: 'bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm',\r\n    'outline-green': 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    'outline-red': 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    danger: 'bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm',\r\n    success: 'bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm',\r\n    ghost: 'text-slate-400 hover:bg-slate-800 hover:text-white',\r\n    indigo: 'bg-purple-900/30 text-purple-400 hover:bg-purple-900/50',\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-4 py-2 text-sm',\r\n    md: 'px-5 py-2.5 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      title={title}\r\n      className={`inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}\r\n    >\r\n      {loading ? (\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n      ) : Icon ? (\r\n        <Icon className=\"w-4 h-4\" />\r\n      ) : null}\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const InfoBadge = ({ children, variant = 'default', className = '' }) => {\r\n  const variants = {\r\n    default: 'bg-slate-100 text-slate-700',\r\n    primary: 'bg-indigo-100 text-indigo-700',\r\n    success: 'bg-emerald-100 text-emerald-700',\r\n    warning: 'bg-amber-100 text-amber-700',\r\n    danger: 'bg-red-100 text-red-700',\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-lg ${variants[variant]} ${className}`}>\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const AlertBanner = ({ children, variant = 'info', icon: Icon, onClose, className = '' }) => {\r\n  const variants = {\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n    success: 'bg-emerald-50 border-emerald-200 text-emerald-800',\r\n    warning: 'bg-amber-50 border-amber-200 text-amber-800',\r\n    danger: 'bg-red-50 border-red-200 text-red-800',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-start gap-3 p-4 rounded-xl border ${variants[variant]} ${className}`}>\r\n      {Icon && <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />}\r\n      <div className=\"flex-1 text-sm font-medium\">{children}</div>\r\n      {onClose && (\r\n        <button onClick={onClose} className=\"text-current opacity-50 hover:opacity-100\">\r\n          \r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   /  \r\n// ============================================\r\nexport const ListItem = ({ children, icon: Icon, onClick, active, className = '' }) => (\r\n  <div\r\n    className={`flex items-center gap-3 p-4 rounded-xl transition-all ${onClick ? 'cursor-pointer' : ''\r\n      } ${active\r\n        ? 'bg-cyan-900/30 border border-cyan-500/50'\r\n        : 'bg-[#14142380] border border-cyan-900/20 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/10'\r\n      } ${className}`}\r\n    onClick={onClick}\r\n  >\r\n    {Icon && (\r\n      <div className={`p-2 rounded-lg ${active ? 'bg-cyan-500' : 'bg-slate-800'}`}>\r\n        <Icon className={`w-5 h-5 ${active ? 'text-slate-900' : 'text-slate-400'}`} />\r\n      </div>\r\n    )}\r\n    <div className=\"flex-1 min-w-0\">{children}</div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const TaskItem = ({ task, onComplete, onEdit, onDelete, showActions = true }) => (\r\n  <div className=\"group flex items-center justify-between p-3 rounded-xl bg-[#0a0a12] border border-cyan-900/30 hover:border-cyan-500/50 hover:bg-slate-900/50 hover:shadow-lg hover:shadow-cyan-500/10 transition-all\">\r\n    <div className=\"flex items-center gap-3 min-w-0\">\r\n      <div\r\n        onClick={onComplete}\r\n        className=\"w-5 h-5 rounded md:rounded-md border-2 border-slate-600 group-hover:border-cyan-500 cursor-pointer transition-colors flex items-center justify-center shrink-0\"\r\n      >\r\n        {/*   */}\r\n      </div>\r\n      <span className=\"font-bold text-slate-300 text-base truncate group-hover:text-cyan-400 transition-colors\">\r\n        {task.name}\r\n      </span>\r\n    </div>\r\n\r\n    <div className=\"flex items-center gap-2 shrink-0\">\r\n      {task.rewardType === \"random\" && (\r\n        <span className=\"px-2.5 py-1 rounded-lg bg-amber-900/30 text-amber-400 text-xs font-bold flex items-center gap-1\">\r\n           \r\n        </span>\r\n      )}\r\n      {showActions && (\r\n        <div className=\"opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity\">\r\n          {onEdit && (\r\n            <button\r\n              onClick={onEdit}\r\n              className=\"p-1.5 text-slate-500 hover:text-cyan-400 rounded hover:bg-cyan-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          {onDelete && (\r\n            <button\r\n              onClick={onDelete}\r\n              className=\"p-1.5 text-slate-500 hover:text-red-400 rounded hover:bg-red-900/30\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   -  \r\n// ============================================\r\nexport const JobCard = ({ job, children, onEdit, onDelete, onAddTask }) => {\r\n  const gradients = {\r\n    indigo: 'from-indigo-500 to-purple-600',\r\n    blue: 'from-blue-500 to-cyan-500',\r\n    emerald: 'from-emerald-500 to-teal-600',\r\n    orange: 'from-orange-400 to-red-500',\r\n    pink: 'from-pink-500 to-rose-500',\r\n    violet: 'from-violet-500 to-purple-600',\r\n  };\r\n\r\n  const gradient = job.color || gradients.indigo;\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl hover:shadow-cyan-500/10 transition-all duration-300 border border-cyan-900/30 overflow-hidden flex flex-col\">\r\n      {/*   */}\r\n      <div className={`h-16 px-6 flex items-center justify-between bg-gradient-to-r ${gradient}`}>\r\n        <h4 className=\"text-white font-bold text-lg tracking-wide flex items-center gap-2\">\r\n           {job.title}\r\n        </h4>\r\n        {(onEdit || onDelete) && (\r\n          <div className=\"flex gap-2\">\r\n            {onEdit && (\r\n              <button\r\n                onClick={onEdit}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n            {onDelete && (\r\n              <button\r\n                onClick={onDelete}\r\n                className=\"p-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"p-6 space-y-4 flex-1\">\r\n        {children}\r\n      </div>\r\n\r\n      {/*   */}\r\n      {onAddTask && (\r\n        <div className=\"px-6 pb-6 pt-2\">\r\n          <button\r\n            onClick={onAddTask}\r\n            className=\"w-full py-3 rounded-xl bg-slate-900/50 text-slate-400 text-sm font-bold border border-cyan-900/30 hover:bg-cyan-900/30 hover:text-cyan-400 hover:border-cyan-500/50 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n                \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const ContentSection = ({ children, className = '' }) => (\r\n  <div className={`bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nexport const MoneyDisplay = ({ amount, size = 'md', showSign = false, className = '' }) => {\r\n  const formatted = Math.abs(amount || 0).toLocaleString('ko-KR');\r\n  const isNegative = amount < 0;\r\n  const isPositive = amount > 0;\r\n\r\n  const sizes = {\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-xl',\r\n    xl: 'text-2xl',\r\n  };\r\n\r\n  return (\r\n    <span className={`font-bold tabular-nums ${sizes[size]} ${isNegative ? 'text-red-500' : isPositive && showSign ? 'text-emerald-500' : 'text-slate-900'\r\n      } ${className}`}>\r\n      {showSign && isPositive && '+'}\r\n      {isNegative && '-'}\r\n      {formatted}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport const AddCard = ({ onClick, label = ' ' }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className=\"group relative flex flex-col items-center justify-center h-full min-h-[260px] rounded-2xl border-2 border-dashed border-cyan-900/50 bg-slate-900/30 hover:bg-cyan-900/20 hover:border-cyan-500/50 transition-all\"\r\n  >\r\n    <div className=\"w-16 h-16 rounded-full bg-slate-800 shadow-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n      <span className=\"text-3xl text-slate-500 group-hover:text-cyan-400\"></span>\r\n    </div>\r\n    <span className=\"text-slate-500 font-bold group-hover:text-cyan-400 text-sm\">{label}</span>\r\n  </button>\r\n);\r\n\r\nexport default {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ErrorState,\r\n  EmptyState,\r\n  CardGrid,\r\n  StatCard,\r\n  AssetCard,\r\n  TabGroup,\r\n  ActionButton,\r\n  InfoBadge,\r\n  AlertBanner,\r\n  ListItem,\r\n  TaskItem,\r\n  JobCard,\r\n  ContentSection,\r\n  MoneyDisplay,\r\n  AddCard,\r\n};\r\n","// src/components/AlchanSidebar.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  X, ChevronRight, ChevronDown,\r\n  LayoutDashboard, Wallet, Target, Gamepad2, Package, TrendingUp,\r\n  Landmark, FileText, Crown, ShoppingBag, Building2, Music,\r\n  Settings, Users, Banknote, Scale, Shield, Sparkles, LogOut,\r\n  Boxes, Store, RefreshCw, Hammer, BarChart3, BookOpen, Keyboard, Circle,\r\n  Briefcase, ListTodo\r\n} from 'lucide-react';\r\n\r\n// ============================================\r\n//    (export   )\r\n// ============================================\r\nexport const AppIcon = ({ className, style }) => (\r\n  <svg className={className} style={style} viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <defs>\r\n      <linearGradient id=\"iconGradient\" x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\" gradientUnits=\"userSpaceOnUse\">\r\n        <stop offset=\"0%\" stopColor=\"#7C3AED\" />\r\n        <stop offset=\"100%\" stopColor=\"#4F46E5\" />\r\n      </linearGradient>\r\n      <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n        <feMerge>\r\n          <feMergeNode in=\"coloredBlur\" />\r\n          <feMergeNode in=\"SourceGraphic\" />\r\n        </feMerge>\r\n      </filter>\r\n    </defs>\r\n    <rect x=\"5\" y=\"5\" width=\"90\" height=\"90\" rx=\"22\" fill=\"url(#iconGradient)\" />\r\n    <path\r\n      d=\"M28 52 L42 66 L72 36\"\r\n      stroke=\"white\"\r\n      strokeWidth=\"10\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      filter=\"url(#glow)\"\r\n    />\r\n    <path\r\n      d=\"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z\"\r\n      fill=\"#FFD700\"\r\n      stroke=\"#B45309\"\r\n      strokeWidth=\"1\"\r\n    />\r\n  </svg>\r\n);\r\n\r\n//   \r\nexport const ALCHAN_MENU_ITEMS = [\r\n  // Main - \r\n  { id: 'todayTasks', label: '  ', icon: LayoutDashboard, path: '/dashboard/tasks', category: 'main' },\r\n  { id: 'myAssets', label: '  ', icon: Wallet, path: '/my-assets', category: 'main' },\r\n  { id: 'couponGoal', label: '  ', icon: Target, path: '/coupon-goal', category: 'main' },\r\n\r\n  // Games Category - \r\n  { id: 'gamesCategory', label: '  ', icon: Gamepad2, isCategory: true, category: 'play' },\r\n  { id: 'omokGame', label: '', icon: Circle, path: '/learning-games/omok', parentId: 'gamesCategory' },\r\n  { id: 'typingGame', label: '', icon: Keyboard, path: '/learning-games/typing', parentId: 'gamesCategory' },\r\n  { id: 'gonuGame', label: ' ', icon: LayoutDashboard, path: '/gonu-game', parentId: 'gamesCategory' },\r\n  { id: 'chessGame', label: ' ', icon: Crown, path: '/learning-games/science', parentId: 'gamesCategory' },\r\n\r\n  // Items Category - \r\n  { id: 'itemsCategory', label: ' ', icon: Package, isCategory: true, category: 'economy' },\r\n  { id: 'myItems', label: ' ', icon: Boxes, path: '/my-items', parentId: 'itemsCategory' },\r\n  { id: 'itemStore', label: ' ', icon: Store, path: '/item-shop', parentId: 'itemsCategory' },\r\n  { id: 'personalShop', label: ' ', icon: ShoppingBag, path: '/personal-shop', parentId: 'itemsCategory' },\r\n\r\n  // Finance Category - \r\n  { id: 'financeCategory', label: ' ', icon: TrendingUp, isCategory: true, category: 'economy' },\r\n  { id: 'banking', label: '', icon: Banknote, path: '/banking', parentId: 'financeCategory' },\r\n  { id: 'stockTrading', label: ' ', icon: BarChart3, path: '/stock-trading', parentId: 'financeCategory' },\r\n  { id: 'auction', label: '', icon: Hammer, path: '/auction', parentId: 'financeCategory' },\r\n  { id: 'realEstate', label: '', icon: Building2, path: '/real-estate', parentId: 'financeCategory' },\r\n\r\n  // Public Category - \r\n  { id: 'publicCategory', label: ' ', icon: Landmark, isCategory: true, category: 'society' },\r\n  { id: 'government', label: '', icon: Landmark, path: '/government', parentId: 'publicCategory' },\r\n  { id: 'nationalAssembly', label: '', icon: Users, path: '/national-assembly', parentId: 'publicCategory' },\r\n  { id: 'court', label: '', icon: Scale, path: '/court', parentId: 'publicCategory' },\r\n  { id: 'policeStation', label: '', icon: Shield, path: '/police', parentId: 'publicCategory' },\r\n\r\n  // Board Category - \r\n  { id: 'boardCategory', label: ' ', icon: FileText, isCategory: true, category: 'community' },\r\n  { id: 'learningBoard', label: ' ', icon: BookOpen, path: '/learning-board', parentId: 'boardCategory' },\r\n  { id: 'musicRequest', label: ' ', icon: Music, path: '/learning-board/music-request', parentId: 'boardCategory' },\r\n\r\n  // Admin Category -  ( )\r\n  { id: 'adminCategory', label: ' ', icon: Settings, isCategory: true, category: 'admin', adminOnly: true },\r\n\r\n  //  /  \r\n  { id: 'adminUserGroup', label: '  ', icon: Users, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'studentManagement', label: ' ', icon: Users, path: '/admin/students', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'classMemberManagement', label: ' ', icon: Users, path: '/admin/class-members', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminAssetGroup', label: '  ', icon: Banknote, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'moneyTransfer', label: ' /', icon: Banknote, path: '/admin/money-transfer', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'couponTransfer', label: ' /', icon: Target, path: '/admin/coupon-transfer', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //    \r\n  { id: 'adminSettingsGroup', label: '  ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminAppSettings', label: '/ ', icon: Target, path: '/admin/app-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'taskManagement', label: ' ', icon: ListTodo, path: '/admin/task-management', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'jobManagement', label: ' ', icon: Briefcase, path: '/admin/job-settings', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'salarySettings', label: ' ', icon: Banknote, path: '/admin/salary-settings', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //   \r\n  { id: 'adminSystemGroup', label: ' ', icon: Settings, isSubGroup: true, parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'activityLog', label: '', icon: FileText, path: '/admin/activity-log', parentId: 'adminCategory', adminOnly: true },\r\n  { id: 'adminPage', label: ' ', icon: Settings, path: '/admin/page', parentId: 'adminCategory', adminOnly: true },\r\n\r\n  //  SuperAdmin Category -    (isSuperAdmin  )\r\n  { id: 'superAdminCategory', label: ' ', icon: Shield, isCategory: true, category: 'superadmin', superAdminOnly: true },\r\n  { id: 'superAdminDashboard', label: '  ', icon: Shield, path: '/super-admin', parentId: 'superAdminCategory', superAdminOnly: true },\r\n];\r\n\r\n//  \r\nconst CATEGORY_LABELS = {\r\n  main: '',\r\n  play: '',\r\n  economy: '',\r\n  society: '',\r\n  community: '',\r\n  admin: '',\r\n  superadmin: ' ',\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuSection = ({ title, children }) => (\r\n  <div className=\"mb-6\">\r\n    <h3 className=\"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2\">{title}</h3>\r\n    <ul className=\"space-y-1\">\r\n      {children}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst MenuItem = ({ icon: Icon, label, active, hasSubmenu, onClick }) => (\r\n  <li>\r\n    <button\r\n      onClick={onClick}\r\n      className={`w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ${active\r\n          ? 'bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30'\r\n          : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n        }`}\r\n    >\r\n      <div className=\"flex items-center gap-3\">\r\n        <Icon className={`w-[18px] h-[18px] ${active ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'}`} />\r\n        <span className=\"text-sm\">{label}</span>\r\n      </div>\r\n      {hasSubmenu && <ChevronDown className=\"w-3.5 h-3.5 text-slate-400\" />}\r\n    </button>\r\n  </li>\r\n);\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nconst SubMenuItem = ({ icon: Icon, label, active, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${active\r\n        ? 'text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]'\r\n        : 'text-slate-500 hover:text-slate-200 hover:bg-white/5'\r\n      }`}\r\n  >\r\n    <Icon className=\"w-3.5 h-3.5\" />\r\n    {label}\r\n  </button>\r\n);\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\nconst CategoryItem = ({ category, children, isExpanded, onToggle, hasActiveChild }) => {\r\n  const Icon = category.icon;\r\n\r\n  return (\r\n    <div className=\"mb-1\">\r\n      <button\r\n        onClick={onToggle}\r\n        className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ${hasActiveChild\r\n            ? 'bg-indigo-500/10 text-indigo-400 border border-indigo-500/20'\r\n            : 'text-slate-400 hover:bg-white/5 hover:text-slate-200'\r\n          }`}\r\n      >\r\n        <Icon\r\n          className={`w-[18px] h-[18px] transition-colors flex-shrink-0 ${hasActiveChild ? 'text-indigo-400' : 'text-slate-500 group-hover:text-slate-300'\r\n            }`}\r\n        />\r\n        <span className=\"flex-1 text-left\">{category.label}</span>\r\n        <ChevronDown\r\n          className={`w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ${isExpanded ? 'rotate-180' : ''\r\n            }`}\r\n        />\r\n      </button>\r\n      <div\r\n        className={`overflow-hidden transition-all duration-300 ${isExpanded ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'\r\n          }`}\r\n      >\r\n        <div className=\"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n//   \r\n// ============================================\r\nexport default function AlchanSidebar({ isOpen, onClose, isCollapsed = false }) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { userDoc, logout } = useAuth();\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleCategory = (categoryId) => {\r\n    setExpandedCategories(prev => ({\r\n      ...prev,\r\n      [categoryId]: !prev[categoryId]\r\n    }));\r\n  };\r\n\r\n  const isActive = (path) => {\r\n    if (!path) return false;\r\n    return location.pathname === path || location.pathname.startsWith(`${path}/`);\r\n  };\r\n\r\n  const hasActiveChild = (categoryId) => {\r\n    return ALCHAN_MENU_ITEMS.some(item =>\r\n      item.parentId === categoryId && isActive(item.path)\r\n    );\r\n  };\r\n\r\n  const handleItemClick = (item) => {\r\n    if (item.path) {\r\n      navigate(item.path);\r\n      if (isMobile) onClose?.();\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n  };\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  const isSuperAdmin = userDoc?.isSuperAdmin;\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  const userName = userDoc?.name || userDoc?.nickname || \"\";\r\n\r\n  //   \r\n  const renderMenuSection = (categoryKey) => {\r\n    const items = ALCHAN_MENU_ITEMS.filter(item => {\r\n      if (item.category !== categoryKey) return false;\r\n      if (item.adminOnly && !isAdmin) return false;\r\n      if (item.superAdminOnly && !isSuperAdmin) return false;\r\n      return true;\r\n    });\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n      <MenuSection key={categoryKey} title={CATEGORY_LABELS[categoryKey]}>\r\n        {items.map(item => {\r\n          if (item.isCategory) {\r\n            const childItems = ALCHAN_MENU_ITEMS.filter(child => {\r\n              if (child.parentId !== item.id) return false;\r\n              if (child.adminOnly && !isAdmin) return false;\r\n              if (child.superAdminOnly && !isSuperAdmin) return false;\r\n              return true;\r\n            });\r\n\r\n            if (childItems.length === 0) return null;\r\n\r\n            return (\r\n              <CategoryItem\r\n                key={item.id}\r\n                category={item}\r\n                isExpanded={expandedCategories[item.id] || hasActiveChild(item.id)}\r\n                onToggle={() => toggleCategory(item.id)}\r\n                hasActiveChild={hasActiveChild(item.id)}\r\n              >\r\n                {childItems.map(child => {\r\n                  //   \r\n                  if (child.isSubGroup) {\r\n                    return (\r\n                      <div key={child.id} className=\"mt-3 mb-1 first:mt-0\">\r\n                        <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2\">\r\n                          {child.label}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  //   \r\n                  return (\r\n                    <SubMenuItem\r\n                      key={child.id}\r\n                      icon={child.icon}\r\n                      label={child.label}\r\n                      active={isActive(child.path)}\r\n                      onClick={() => handleItemClick(child)}\r\n                    />\r\n                  );\r\n                })}\r\n              </CategoryItem>\r\n            );\r\n          } else if (!item.parentId) {\r\n            return (\r\n              <MenuItem\r\n                key={item.id}\r\n                icon={item.icon}\r\n                label={item.label}\r\n                active={isActive(item.path)}\r\n                onClick={() => handleItemClick(item)}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </MenuSection>\r\n    );\r\n  };\r\n\r\n  // PC  \r\n  if (isCollapsed && !isMobile) {\r\n    return (\r\n      <aside className=\"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300\">\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            height: '64px',\r\n            minHeight: '64px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            background: 'linear-gradient(135deg, #4f46e5, #7c3aed, #4f46e5)'\r\n          }}\r\n        >\r\n          <div style={{ padding: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' }}>\r\n            <AppIcon style={{ width: '32px', height: '32px' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\r\n          {ALCHAN_MENU_ITEMS.filter(item => !item.parentId && !item.isCategory).map(item => {\r\n            if (item.adminOnly && !isAdmin) return null;\r\n            if (item.superAdminOnly && !isSuperAdmin) return null;\r\n            const Icon = item.icon;\r\n            const active = isActive(item.path);\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => handleItemClick(item)}\r\n                title={item.label}\r\n                className={`w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ${active\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none'\r\n                    : 'bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30'\r\n                  }`}\r\n              >\r\n                <Icon size={24} />\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/*   */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div className=\"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n            {userName.charAt(0)}\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      {isMobile && isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/*  */}\r\n      <aside\r\n        className={`\r\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\r\n          ${isMobile\r\n            ? isOpen ? 'translate-x-0' : '-translate-x-full'\r\n            : 'relative translate-x-0'\r\n          }\r\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\r\n        `}\r\n      >\r\n        {/*   -   */}\r\n        <div\r\n          style={{\r\n            height: '72px',\r\n            minHeight: '72px',\r\n            margin: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            alignItems: 'center',\r\n            background: 'linear-gradient(135deg, rgba(10, 10, 18, 0.95), rgba(20, 20, 35, 0.95))',\r\n            border: '1px solid rgba(0, 255, 242, 0.2)',\r\n            boxShadow: '0 0 15px rgba(0, 255, 242, 0.1)',\r\n          }}\r\n        >\r\n          {/*   */}\r\n          <div style={{ position: 'absolute', top: '-20px', right: '-20px', width: '80px', height: '80px', background: 'rgba(255,255,255,0.1)', borderRadius: '50%' }} />\r\n          <div style={{ position: 'absolute', bottom: '-30px', left: '-10px', width: '60px', height: '60px', background: 'rgba(255,255,255,0.08)', borderRadius: '50%' }} />\r\n\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '14px', padding: '0 18px', width: '100%', position: 'relative', zIndex: 10 }}>\r\n            {/*   */}\r\n            <div style={{ padding: '6px', background: 'rgba(255,255,255,0.05)', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0,0,0,0.15)', border: '1px solid rgba(255,255,255,0.1)' }}>\r\n              <AppIcon style={{ width: '36px', height: '36px' }} />\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <span style={{ fontSize: '22px', fontWeight: '900', color: '#00fff2', fontFamily: \"'Jua', sans-serif\", lineHeight: '1.1', textShadow: '0 0 10px rgba(0, 255, 242, 0.5)' }}></span>\r\n              <span style={{ fontSize: '11px', fontWeight: 'bold', color: 'rgba(232, 232, 255, 0.7)', letterSpacing: '0.2em', lineHeight: '1.1', marginTop: '3px' }}>ALCHAN</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                position: 'absolute',\r\n                right: '12px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                padding: '6px',\r\n                borderRadius: '50%',\r\n                background: 'rgba(255,255,255,0.2)',\r\n                border: 'none',\r\n                color: 'white',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <X size={18} />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <nav className=\"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide\">\r\n          {renderMenuSection('main')}\r\n          {renderMenuSection('play')}\r\n          {renderMenuSection('economy')}\r\n          {renderMenuSection('society')}\r\n          {renderMenuSection('community')}\r\n          {renderMenuSection('admin')}\r\n          {renderMenuSection('superadmin')}\r\n        </nav>\r\n\r\n        {/*    */}\r\n        <div className=\"p-4 border-t border-slate-800 bg-[#0a0a12]/50\">\r\n          <div\r\n            onClick={handleLogout}\r\n            className=\"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group\"\r\n          >\r\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n              {userName.charAt(0)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-bold text-slate-200 truncate\">{userName}</p>\r\n              <p className=\"text-xs text-slate-500 truncate\">{userRole}</p>\r\n            </div>\r\n            <LogOut className=\"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors\" />\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n","// src/components/TutorialGuide.js\r\n//    \r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport {\r\n  X, ChevronLeft, ChevronRight, Sparkles, Wallet, Target,\r\n  Gamepad2, ShoppingBag, TrendingUp, Users, Check, Play\r\n} from 'lucide-react';\r\n\r\n//   \r\nconst TUTORIAL_STEPS = [\r\n  {\r\n    id: 'welcome',\r\n    title: '   ! ',\r\n    description: '      .  ?',\r\n    icon: Sparkles,\r\n    color: 'from-indigo-500 to-violet-600',\r\n    tips: [\r\n      '      ',\r\n      '   ',\r\n      '     '\r\n    ]\r\n  },\r\n  {\r\n    id: 'assets',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: Wallet,\r\n    color: 'from-emerald-500 to-teal-600',\r\n    tips: [\r\n      ':      ',\r\n      ':     ',\r\n      '    '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/my-assets'\r\n    }\r\n  },\r\n  {\r\n    id: 'tasks',\r\n    title: '   ',\r\n    description: '     !',\r\n    icon: Target,\r\n    color: 'from-amber-500 to-orange-600',\r\n    tips: [\r\n      '  ',\r\n      '   ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/dashboard/tasks'\r\n    }\r\n  },\r\n  {\r\n    id: 'shop',\r\n    title: '   ',\r\n    description: '     .',\r\n    icon: ShoppingBag,\r\n    color: 'from-pink-500 to-rose-600',\r\n    tips: [\r\n      '  ',\r\n      '     ',\r\n      '   !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/item-shop'\r\n    }\r\n  },\r\n  {\r\n    id: 'games',\r\n    title: '   ',\r\n    description: ' ,    !',\r\n    icon: Gamepad2,\r\n    color: 'from-purple-500 to-violet-600',\r\n    tips: [\r\n      ', ,   ',\r\n      '  ',\r\n      '    !'\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/learning-games/omok'\r\n    }\r\n  },\r\n  {\r\n    id: 'finance',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: TrendingUp,\r\n    color: 'from-blue-500 to-cyan-600',\r\n    tips: [\r\n      '   ',\r\n      '    ',\r\n      '   '\r\n    ],\r\n    action: {\r\n      label: ' ',\r\n      path: '/banking'\r\n    }\r\n  },\r\n  {\r\n    id: 'community',\r\n    title: '   ',\r\n    description: ', ,     .',\r\n    icon: Users,\r\n    color: 'from-teal-500 to-emerald-600',\r\n    tips: [\r\n      '  ',\r\n      '  ',\r\n      '     '\r\n    ],\r\n    action: {\r\n      label: '',\r\n      path: '/government'\r\n    }\r\n  },\r\n  {\r\n    id: 'complete',\r\n    title: ' ! ',\r\n    description: '      !',\r\n    icon: Check,\r\n    color: 'from-green-500 to-emerald-600',\r\n    tips: [\r\n      '   ',\r\n      '    !',\r\n      '    !'\r\n    ]\r\n  }\r\n];\r\n\r\n//   \r\nexport function TutorialGuide({ onComplete, onSkip }) {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const step = TUTORIAL_STEPS[currentStep];\r\n  const Icon = step.icon;\r\n  const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (isLastStep) {\r\n      onComplete?.();\r\n      return;\r\n    }\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev + 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isLastStep, onComplete]);\r\n\r\n  const handlePrev = useCallback(() => {\r\n    if (isFirstStep) return;\r\n\r\n    setIsAnimating(true);\r\n    setTimeout(() => {\r\n      setCurrentStep(prev => prev - 1);\r\n      setIsAnimating(false);\r\n    }, 200);\r\n  }, [isFirstStep]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-md w-full overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className={`bg-gradient-to-r ${step.color} p-6 text-white relative`}>\r\n          <button\r\n            onClick={onSkip}\r\n            className=\"absolute top-4 right-4 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center\">\r\n              <Icon size={40} />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-xl font-bold text-center\">{step.title}</h2>\r\n\r\n          {/*   */}\r\n          <div className=\"flex justify-center gap-1 mt-4\">\r\n            {TUTORIAL_STEPS.map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n                  i === currentStep ? 'w-6 bg-white' : 'bg-white/40'\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className={`p-6 transition-opacity duration-200 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>\r\n          <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\r\n            {step.description}\r\n          </p>\r\n\r\n          <div className=\"space-y-3 mb-6\">\r\n            {step.tips.map((tip, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n              >\r\n                <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${step.color} flex items-center justify-center flex-shrink-0`}>\r\n                  <span className=\"text-white text-xs font-bold\">{i + 1}</span>\r\n                </div>\r\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">{tip}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {step.action && (\r\n            <a\r\n              href={step.action.path}\r\n              className={`block w-full py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold text-center mb-4 hover:opacity-90 transition-opacity`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                //      \r\n                handleNext();\r\n              }}\r\n            >\r\n              <Play size={16} className=\"inline mr-2\" />\r\n              {step.action.label}\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-6 pb-6 flex gap-3\">\r\n          <button\r\n            onClick={handlePrev}\r\n            disabled={isFirstStep}\r\n            className={`flex-1 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${\r\n              isFirstStep\r\n                ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            <ChevronLeft size={18} />\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleNext}\r\n            className={`flex-1 py-3 bg-gradient-to-r ${step.color} text-white rounded-xl font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2`}\r\n          >\r\n            {isLastStep ? '' : ''}\r\n            {!isLastStep && <ChevronRight size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n//  \r\nexport function useTutorial() {\r\n  const { user } = useAuth();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user?.uid) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const checkTutorial = async () => {\r\n      try {\r\n        const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n        const tutorialDoc = await getDoc(tutorialRef);\r\n\r\n        if (!tutorialDoc.exists() || !tutorialDoc.data().completed) {\r\n          setShowTutorial(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('  :', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkTutorial();\r\n  }, [user?.uid]);\r\n\r\n  const completeTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        completedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const skipTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: true,\r\n        skipped: true,\r\n        skippedAt: serverTimestamp()\r\n      });\r\n      setShowTutorial(false);\r\n    } catch (error) {\r\n      console.error('   :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const resetTutorial = useCallback(async () => {\r\n    if (!user?.uid) return;\r\n\r\n    try {\r\n      const tutorialRef = doc(db, 'users', user.uid, 'settings', 'tutorial');\r\n      await setDoc(tutorialRef, {\r\n        completed: false\r\n      });\r\n      setShowTutorial(true);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  return {\r\n    showTutorial,\r\n    loading,\r\n    completeTutorial,\r\n    skipTutorial,\r\n    resetTutorial\r\n  };\r\n}\r\n\r\n//    \r\nexport function FeatureTooltip({ children, title, description, position = 'bottom' }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full mb-2',\r\n    bottom: 'top-full mt-2',\r\n    left: 'right-full mr-2',\r\n    right: 'left-full ml-2'\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative inline-block\" onMouseEnter={() => setShow(true)} onMouseLeave={() => setShow(false)}>\r\n      {children}\r\n      {show && (\r\n        <div className={`absolute ${positionClasses[position]} left-1/2 -translate-x-1/2 w-48 p-3 bg-gray-900 text-white rounded-xl shadow-xl z-50`}>\r\n          <h4 className=\"font-semibold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-xs text-gray-300\">{description}</p>\r\n          <div className=\"absolute w-2 h-2 bg-gray-900 transform rotate-45 left-1/2 -translate-x-1/2 -top-1\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TutorialGuide;\r\n","// src/components/SettingsPanel.js\r\n//    ( ,   )\r\n\r\nimport React, { useState } from 'react';\r\nimport { useTheme, FONT_SIZES } from '../contexts/ThemeContext';\r\nimport { useTutorial } from './TutorialGuide';\r\nimport {\r\n  X, Moon, Sun, Type, RefreshCw, Bell, Volume2, Smartphone,\r\n  ChevronRight, Check, HelpCircle\r\n} from 'lucide-react';\r\n\r\nexport function SettingsPanel({ isOpen, onClose }) {\r\n  const { isDarkMode, toggleDarkMode, fontSize, setFontSize } = useTheme();\r\n  const { resetTutorial } = useTutorial();\r\n  const [notifications, setNotifications] = useState(\r\n    localStorage.getItem('alchan-notifications') !== 'false'\r\n  );\r\n  const [sounds, setSounds] = useState(\r\n    localStorage.getItem('alchan-sounds') !== 'false'\r\n  );\r\n\r\n  const handleNotificationToggle = () => {\r\n    const newValue = !notifications;\r\n    setNotifications(newValue);\r\n    localStorage.setItem('alchan-notifications', String(newValue));\r\n  };\r\n\r\n  const handleSoundToggle = () => {\r\n    const newValue = !sounds;\r\n    setSounds(newValue);\r\n    localStorage.setItem('alchan-sounds', String(newValue));\r\n  };\r\n\r\n  const handleResetTutorial = () => {\r\n    if (window.confirm('  ?')) {\r\n      resetTutorial();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl\">\r\n        {/*  */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 dark:text-white\"></h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <X size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"overflow-y-auto p-4 space-y-6\">\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            {/*   */}\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {isDarkMode ? (\r\n                    <Moon size={20} className=\"text-indigo-500\" />\r\n                  ) : (\r\n                    <Sun size={20} className=\"text-amber-500\" />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={toggleDarkMode}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    isDarkMode ? 'bg-indigo-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      isDarkMode ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <Type size={20} className=\"text-blue-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                         \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Object.entries(FONT_SIZES).map(([key, { label }]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => setFontSize(key)}\r\n                      className={`py-2 rounded-xl text-sm font-medium transition-all ${\r\n                        fontSize === key\r\n                          ? 'bg-indigo-500 text-white'\r\n                          : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                      }`}\r\n                    >\r\n                      {label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*   */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*   */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Bell size={20} className=\"text-green-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleNotificationToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    notifications ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      notifications ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              <div className=\"flex items-center justify-between p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Volume2 size={20} className=\"text-purple-500\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"></p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                       \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSoundToggle}\r\n                  className={`w-12 h-7 rounded-full transition-colors relative ${\r\n                    sounds ? 'bg-purple-500' : 'bg-gray-300'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${\r\n                      sounds ? 'left-6' : 'left-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/*  */}\r\n          <section>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider\">\r\n              \r\n            </h3>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600\">\r\n              {/*    */}\r\n              <button\r\n                onClick={handleResetTutorial}\r\n                className=\"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <HelpCircle size={20} className=\"text-amber-500\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">  </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        \r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </button>\r\n\r\n              {/*   */}\r\n              <div className=\"p-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Smartphone size={20} className=\"text-gray-400\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\"> </p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                      v1.0.0\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4 border-t border-gray-100 dark:border-gray-700\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsPanel;\r\n","// src/utils/avatarSystem.js -   \r\n\r\n/**\r\n *   \r\n * , , , , , ,   \r\n */\r\n\r\n// \r\nexport const SKIN_TONES = [\r\n  { id: \"fair\", name: \" \", color: \"#FFE4C4\" },\r\n  { id: \"light\", name: \" \", color: \"#F5DEB3\" },\r\n  { id: \"medium\", name: \" \", color: \"#DEB887\" },\r\n  { id: \"tan\", name: \" \", color: \"#D2A679\" },\r\n  { id: \"dark\", name: \" \", color: \"#8B7355\" },\r\n];\r\n\r\n//  -  \r\nexport const FACE_SHAPES = [\r\n  { id: \"round\", name: \"\", icon: \"\", path: \"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10\" },\r\n  { id: \"oval\", name: \"\", icon: \"\", path: \"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8\" },\r\n  { id: \"square\", name: \"\", icon: \"\", path: \"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10\" },\r\n  { id: \"heart\", name: \"\", icon: \"\", path: \"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10\" },\r\n  { id: \"long\", name: \"\", icon: \"\", path: \"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5\" },\r\n];\r\n\r\n//  \r\nexport const EYE_STYLES = [\r\n  { id: \"normal\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6 },\r\n  { id: \"big\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 8 },\r\n  { id: \"small\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 4 },\r\n  { id: \"almond\", name: \"\", leftX: 35, rightX: 65, y: 45, size: 6, shape: \"almond\" },\r\n  { id: \"round\", name: \" \", leftX: 35, rightX: 65, y: 45, size: 7, shape: \"round\" },\r\n];\r\n\r\n//  \r\nexport const EYE_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"brown\", name: \"\", color: \"#654321\" },\r\n  { id: \"hazel\", name: \"\", color: \"#8E7618\" },\r\n  { id: \"blue\", name: \"\", color: \"#1E90FF\" },\r\n  { id: \"green\", name: \"\", color: \"#228B22\" },\r\n  { id: \"gray\", name: \"\", color: \"#696969\" },\r\n];\r\n\r\n//  \r\nexport const MOUTH_STYLES = [\r\n  { id: \"smile\", name: \"\", path: \"M35,65 Q50,75 65,65\", stroke: true },\r\n  { id: \"grin\", name: \" \", path: \"M30,62 Q50,80 70,62\", stroke: true },\r\n  { id: \"neutral\", name: \"\", path: \"M38,65 L62,65\", stroke: true },\r\n  { id: \"small_smile\", name: \" \", path: \"M40,65 Q50,70 60,65\", stroke: true },\r\n  { id: \"open\", name: \" \", path: \"M35,63 Q50,75 65,63 Q50,80 35,63\", fill: true },\r\n];\r\n\r\n//  (  )\r\nconst ALL_FACES = [\"round\", \"oval\", \"square\", \"heart\", \"long\"];\r\n\r\nexport const HAIRSTYLES = [\r\n  {\r\n    id: \"none\",\r\n    name: \"\",\r\n    paths: [],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    ( )\r\n    id: \"short\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :    \r\n    id: \"medium\",\r\n    name: \" \",\r\n    paths: [\r\n      \"M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z\"\r\n    ],\r\n    bangsPath: \"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    //  :     \r\n    id: \"long\",\r\n    name: \" \",\r\n    paths: [\r\n      //   ( )\r\n      \"M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z\",\r\n    ],\r\n    bangsPath: \"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :     + \r\n    id: \"bob\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z\"\r\n    ],\r\n    bangsPath: \"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z\",\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"ponytail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z\",\r\n      //   \r\n      \"M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"twintail\",\r\n    name: \"\",\r\n    paths: [\r\n      // \r\n      \"M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z\",\r\n      //  \r\n      \"M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z\",\r\n      //  \r\n      \"M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :  \r\n    id: \"curly\",\r\n    name: \"\",\r\n    paths: [\r\n      //  \r\n      \"M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z\",\r\n      //  \r\n      \"M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z\",\r\n      //  \r\n      \"M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z\",\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n  {\r\n    // :   \r\n    id: \"mohawk\",\r\n    name: \"\",\r\n    paths: [\r\n      \"M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z\"\r\n    ],\r\n    compatibleFaces: ALL_FACES,\r\n  },\r\n];\r\n\r\n//  \r\nexport const HAIR_COLORS = [\r\n  { id: \"black\", name: \"\", color: \"#1a1a1a\" },\r\n  { id: \"dark_brown\", name: \" \", color: \"#3d2314\" },\r\n  { id: \"brown\", name: \"\", color: \"#6b4423\" },\r\n  { id: \"light_brown\", name: \" \", color: \"#a0522d\" },\r\n  { id: \"blonde\", name: \"\", color: \"#f4d03f\" },\r\n  { id: \"red\", name: \"\", color: \"#c0392b\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"gray\", name: \"\", color: \"#7f8c8d\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n];\r\n\r\n// \r\nexport const OUTFITS = [\r\n  { id: \"none\", name: \"\", color: null },\r\n  {\r\n    id: \"tshirt\",\r\n    name: \"\",\r\n    baseColor: \"#3498db\",\r\n    path: \"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    sleeves: \"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100\"\r\n  },\r\n  {\r\n    id: \"suit\",\r\n    name: \"\",\r\n    baseColor: \"#2c3e50\",\r\n    path: \"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95\",\r\n    tie: true,\r\n    lapels: true\r\n  },\r\n  {\r\n    id: \"hoodie\",\r\n    name: \"\",\r\n    baseColor: \"#e74c3c\",\r\n    path: \"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95\",\r\n    hood: true,\r\n    pocket: true\r\n  },\r\n  {\r\n    id: \"dress\",\r\n    name: \"\",\r\n    baseColor: \"#9b59b6\",\r\n    path: \"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92\"\r\n  },\r\n  {\r\n    id: \"uniform\",\r\n    name: \"\",\r\n    baseColor: \"#34495e\",\r\n    path: \"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95\",\r\n    collar: true,\r\n    buttons: true\r\n  },\r\n];\r\n\r\n//  \r\nexport const OUTFIT_COLORS = [\r\n  { id: \"blue\", name: \"\", color: \"#3498db\" },\r\n  { id: \"red\", name: \"\", color: \"#e74c3c\" },\r\n  { id: \"green\", name: \"\", color: \"#27ae60\" },\r\n  { id: \"purple\", name: \"\", color: \"#9b59b6\" },\r\n  { id: \"yellow\", name: \"\", color: \"#f1c40f\" },\r\n  { id: \"orange\", name: \"\", color: \"#e67e22\" },\r\n  { id: \"pink\", name: \"\", color: \"#ff69b4\" },\r\n  { id: \"black\", name: \"\", color: \"#2c3e50\" },\r\n  { id: \"white\", name: \"\", color: \"#ecf0f1\" },\r\n  { id: \"navy\", name: \"\", color: \"#2c3e50\" },\r\n];\r\n\r\n// \r\nexport const ACCESSORIES = [\r\n  { id: \"none\", name: \"\" },\r\n  { id: \"glasses\", name: \"\", path: \"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43\", color: \"#1a1a1a\" },\r\n  { id: \"sunglasses\", name: \"\", path: \"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40\", color: \"#1a1a1a\", fill: true },\r\n  { id: \"earrings\", name: \"\", type: \"earrings\", color: \"#f1c40f\" },\r\n  { id: \"necklace\", name: \"\", path: \"M35,88 Q50,95 65,88\", color: \"#f1c40f\" },\r\n  { id: \"hat\", name: \"\", path: \"M15,15 L85,15 L85,5 Q50,-5 15,5 Z\", color: \"#e74c3c\" },\r\n  { id: \"crown\", name: \"\", type: \"crown\", color: \"#f1c40f\" },\r\n  { id: \"headband\", name: \"\", path: \"M12,25 Q50,18 88,25\", color: \"#ff69b4\" },\r\n  { id: \"bow\", name: \"\", type: \"bow\", color: \"#ff69b4\" },\r\n  { id: \"mask\", name: \"\", path: \"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z\", color: \"#ffffff\" },\r\n];\r\n\r\n// \r\nexport const BACKGROUNDS = [\r\n  { id: \"none\", name: \"\", color: \"transparent\" },\r\n  { id: \"sky_blue\", name: \"\", color: \"#87CEEB\" },\r\n  { id: \"sunset\", name: \"\", gradient: [\"#ff7e5f\", \"#feb47b\"] },\r\n  { id: \"night\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"] },\r\n  { id: \"forest\", name: \"\", gradient: [\"#134e5e\", \"#71b280\"] },\r\n  { id: \"ocean\", name: \"\", gradient: [\"#2193b0\", \"#6dd5ed\"] },\r\n  { id: \"pink\", name: \"\", gradient: [\"#ee9ca7\", \"#ffdde1\"] },\r\n  { id: \"purple\", name: \"\", gradient: [\"#667eea\", \"#764ba2\"] },\r\n  { id: \"gold\", name: \"\", gradient: [\"#f7971e\", \"#ffd200\"] },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"] },\r\n  { id: \"galaxy\", name: \"\", gradient: [\"#0f0c29\", \"#302b63\", \"#24243e\"], stars: true },\r\n];\r\n\r\n// \r\nexport const BORDERS = [\r\n  { id: \"none\", name: \"\", style: null },\r\n  { id: \"simple\", name: \"\", color: \"#ffffff\", width: 3 },\r\n  { id: \"gold\", name: \"\", color: \"#f1c40f\", width: 4, glow: true },\r\n  { id: \"silver\", name: \"\", color: \"#bdc3c7\", width: 4, glow: true },\r\n  { id: \"bronze\", name: \"\", color: \"#cd7f32\", width: 4, glow: true },\r\n  { id: \"rainbow\", name: \"\", gradient: [\"#ff0000\", \"#ff7f00\", \"#ffff00\", \"#00ff00\", \"#0000ff\", \"#8b00ff\"], width: 4, animated: true },\r\n  { id: \"neon_blue\", name: \" \", color: \"#00fff2\", width: 3, glow: true, glowColor: \"#00fff2\" },\r\n  { id: \"neon_pink\", name: \" \", color: \"#ff69b4\", width: 3, glow: true, glowColor: \"#ff69b4\" },\r\n  { id: \"fire\", name: \"\", gradient: [\"#ff4500\", \"#ff6347\", \"#ffa500\"], width: 4, animated: true },\r\n  { id: \"ice\", name: \"\", gradient: [\"#00bfff\", \"#87ceeb\", \"#e0ffff\"], width: 4, glow: true },\r\n];\r\n\r\n// /\r\nexport const EXPRESSIONS = [\r\n  { id: \"normal\", name: \"\", eyeMod: null, mouthMod: null },\r\n  { id: \"happy\", name: \"\", eyeMod: \"happy\", mouthMod: \"grin\" },\r\n  { id: \"sad\", name: \"\", eyeMod: \"sad\", mouthMod: \"sad\" },\r\n  { id: \"angry\", name: \"\", eyeMod: \"angry\", mouthMod: \"angry\" },\r\n  { id: \"surprised\", name: \"\", eyeMod: \"wide\", mouthMod: \"open\" },\r\n  { id: \"wink\", name: \"\", eyeMod: \"wink\", mouthMod: \"smile\" },\r\n  { id: \"love\", name: \"\", eyeMod: \"hearts\", mouthMod: \"smile\" },\r\n  { id: \"cool\", name: \"\", eyeMod: \"sunglasses\", mouthMod: \"smirk\" },\r\n];\r\n\r\n//   \r\nexport const DEFAULT_AVATAR = {\r\n  skinTone: \"light\",\r\n  faceShape: \"oval\",\r\n  eyeStyle: \"normal\",\r\n  eyeColor: \"brown\",\r\n  mouthStyle: \"smile\",\r\n  hairstyle: \"short\",\r\n  hairColor: \"black\",\r\n  outfit: \"tshirt\",\r\n  outfitColor: \"blue\",\r\n  accessory: \"none\",\r\n  background: \"sky_blue\",\r\n  border: \"simple\",\r\n  expression: \"normal\",\r\n};\r\n\r\n/**\r\n *     .\r\n */\r\nexport function getAvatarConfig(userId) {\r\n  try {\r\n    const saved = localStorage.getItem(`avatar_${userId}`);\r\n    if (saved) {\r\n      return { ...DEFAULT_AVATAR, ...JSON.parse(saved) };\r\n    }\r\n  } catch {\r\n    //    \r\n  }\r\n  return { ...DEFAULT_AVATAR };\r\n}\r\n\r\n/**\r\n *     .\r\n */\r\nexport function saveAvatarConfig(userId, config) {\r\n  try {\r\n    localStorage.setItem(`avatar_${userId}`, JSON.stringify(config));\r\n    //     (    )\r\n    window.dispatchEvent(new CustomEvent('avatarChanged', { detail: { userId, config } }));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function getAvatarOptions(category) {\r\n  switch (category) {\r\n    case \"skinTone\": return SKIN_TONES;\r\n    case \"faceShape\": return FACE_SHAPES;\r\n    case \"eyeStyle\": return EYE_STYLES;\r\n    case \"eyeColor\": return EYE_COLORS;\r\n    case \"mouthStyle\": return MOUTH_STYLES;\r\n    case \"hairstyle\": return HAIRSTYLES;\r\n    case \"hairColor\": return HAIR_COLORS;\r\n    case \"outfit\": return OUTFITS;\r\n    case \"outfitColor\": return OUTFIT_COLORS;\r\n    case \"accessory\": return ACCESSORIES;\r\n    case \"background\": return BACKGROUNDS;\r\n    case \"border\": return BORDERS;\r\n    case \"expression\": return EXPRESSIONS;\r\n    default: return [];\r\n  }\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function isHairstyleCompatible(hairstyleId, faceShapeId) {\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === hairstyleId);\r\n  if (!hairstyle) return true;\r\n  return hairstyle.compatibleFaces.includes(faceShapeId);\r\n}\r\n\r\n/**\r\n *   \r\n * icon:    null (  )\r\n */\r\nexport const AVATAR_CATEGORIES = [\r\n  { id: \"skinTone\", name: \"\", icon: \"#FFE4C4\" },\r\n  { id: \"faceShape\", name: \"\", icon: \"#F5DEB3\" },\r\n  { id: \"eyeStyle\", name: \"\", icon: \"#1E90FF\" },\r\n  { id: \"eyeColor\", name: \"\", icon: \"#654321\" },\r\n  { id: \"mouthStyle\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"hairstyle\", name: \"\", icon: \"#3d2314\" },\r\n  { id: \"hairColor\", name: \"\", icon: \"#1a1a1a\" },\r\n  { id: \"outfit\", name: \"\", icon: \"#3498db\" },\r\n  { id: \"outfitColor\", name: \"\", icon: \"#e74c3c\" },\r\n  { id: \"accessory\", name: \"\", icon: \"#f1c40f\" },\r\n  { id: \"background\", name: \"\", icon: \"#87CEEB\" },\r\n  { id: \"border\", name: \"\", icon: \"#a78bfa\" },\r\n];\r\n","// src/components/Avatar.js -    ( )\r\nimport React from \"react\";\r\nimport {\r\n  SKIN_TONES,\r\n  FACE_SHAPES,\r\n  EYE_STYLES,\r\n  EYE_COLORS,\r\n  MOUTH_STYLES,\r\n  HAIRSTYLES,\r\n  HAIR_COLORS,\r\n  OUTFITS,\r\n  OUTFIT_COLORS,\r\n  ACCESSORIES,\r\n  BACKGROUNDS,\r\n  BORDERS,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *     \r\n */\r\nfunction darkenColor(hex, percent = 15) {\r\n  if (!hex || hex === 'none' || hex === 'transparent') return hex;\r\n\r\n  // hex RGB \r\n  let r = parseInt(hex.slice(1, 3), 16);\r\n  let g = parseInt(hex.slice(3, 5), 16);\r\n  let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  // \r\n  r = Math.max(0, Math.floor(r * (100 - percent) / 100));\r\n  g = Math.max(0, Math.floor(g * (100 - percent) / 100));\r\n  b = Math.max(0, Math.floor(b * (100 - percent) / 100));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n *   - SVG   ( )\r\n *   viewBox \r\n */\r\nexport default function Avatar({ config = {}, size = 100, showBorder = true, onClick }) {\r\n  const avatarConfig = { ...DEFAULT_AVATAR, ...config };\r\n\r\n  //  \r\n  const skinTone = SKIN_TONES.find(s => s.id === avatarConfig.skinTone) || SKIN_TONES[1];\r\n  const faceShape = FACE_SHAPES.find(f => f.id === avatarConfig.faceShape) || FACE_SHAPES[1];\r\n  const eyeStyle = EYE_STYLES.find(e => e.id === avatarConfig.eyeStyle) || EYE_STYLES[0];\r\n  const eyeColor = EYE_COLORS.find(e => e.id === avatarConfig.eyeColor) || EYE_COLORS[1];\r\n  const mouthStyle = MOUTH_STYLES.find(m => m.id === avatarConfig.mouthStyle) || MOUTH_STYLES[0];\r\n  const hairstyle = HAIRSTYLES.find(h => h.id === avatarConfig.hairstyle) || HAIRSTYLES[1];\r\n  const hairColor = HAIR_COLORS.find(h => h.id === avatarConfig.hairColor) || HAIR_COLORS[0];\r\n  const outfit = OUTFITS.find(o => o.id === avatarConfig.outfit) || OUTFITS[1];\r\n  const outfitColor = OUTFIT_COLORS.find(o => o.id === avatarConfig.outfitColor) || OUTFIT_COLORS[0];\r\n  const accessory = ACCESSORIES.find(a => a.id === avatarConfig.accessory);\r\n  const background = BACKGROUNDS.find(b => b.id === avatarConfig.background) || BACKGROUNDS[0];\r\n  const border = BORDERS.find(b => b.id === avatarConfig.border);\r\n\r\n  //   (  )\r\n  const noseColor = darkenColor(skinTone.color, 12);\r\n\r\n  //   \r\n  const getBackgroundStyle = () => {\r\n    if (!background || background.id === \"none\") return \"#1a1a2e\";\r\n    if (background.gradient) {\r\n      return `url(#bg-gradient-${background.id})`;\r\n    }\r\n    return background.color;\r\n  };\r\n\r\n  //  \r\n  const getBorderStyle = () => {\r\n    if (!border || border.id === \"none\" || !showBorder) return null;\r\n    return {\r\n      stroke: border.gradient ? `url(#border-gradient-${border.id})` : border.color,\r\n      strokeWidth: border.width || 3,\r\n      filter: border.glow ? `drop-shadow(0 0 ${border.width * 2}px ${border.glowColor || border.color})` : undefined,\r\n    };\r\n  };\r\n\r\n  const borderStyle = getBorderStyle();\r\n\r\n  //    (  )\r\n  const getHairFill = () => {\r\n    if (hairColor?.gradient) {\r\n      return \"url(#hair-rainbow)\";\r\n    }\r\n    return hairColor?.color || \"#1a1a1a\";\r\n  };\r\n\r\n  //    viewBox \r\n  const viewBoxY = -25; //   \r\n  const viewBoxHeight = 150; //   \r\n\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox={`-15 ${viewBoxY} 130 ${viewBoxHeight}`}\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? \"pointer\" : \"default\", overflow: \"visible\" }}\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <defs>\r\n        {/*   */}\r\n        {background?.gradient && (\r\n          <linearGradient id={`bg-gradient-${background.id}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n            {background.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (background.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        {border?.gradient && (\r\n          <linearGradient id={`border-gradient-${border.id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            {border.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (border.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   () */}\r\n        {hairColor?.gradient && (\r\n          <linearGradient id=\"hair-rainbow\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n            {hairColor.gradient.map((color, idx) => (\r\n              <stop\r\n                key={idx}\r\n                offset={`${(idx / (hairColor.gradient.length - 1)) * 100}%`}\r\n                stopColor={color}\r\n              />\r\n            ))}\r\n          </linearGradient>\r\n        )}\r\n\r\n        {/*   */}\r\n        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n          <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"2\" floodOpacity=\"0.3\" />\r\n        </filter>\r\n\r\n        {/*   -   */}\r\n        <clipPath id=\"face-clip\">\r\n          <path d={faceShape.path} />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      {/* =======  ======= */}\r\n      {background && background.id !== \"none\" && (\r\n        <rect\r\n          x=\"-15\"\r\n          y={viewBoxY}\r\n          width=\"130\"\r\n          height={viewBoxHeight}\r\n          fill={getBackgroundStyle()}\r\n          rx=\"10\"\r\n        />\r\n      )}\r\n\r\n      {/*   () */}\r\n      {background?.stars && (\r\n        <g>\r\n          <circle cx=\"15\" cy=\"10\" r=\"1.5\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"85\" cy=\"15\" r=\"2\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"45\" cy=\"-5\" r=\"1.2\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"70\" cy=\"0\" r=\"1.5\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"25\" cy=\"20\" r=\"1\" fill=\"white\" opacity=\"0.8\" />\r\n          <circle cx=\"95\" cy=\"25\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n          <circle cx=\"5\" cy=\"30\" r=\"1.5\" fill=\"white\" opacity=\"0.6\" />\r\n          <circle cx=\"60\" cy=\"100\" r=\"1\" fill=\"white\" opacity=\"0.9\" />\r\n          <circle cx=\"30\" cy=\"110\" r=\"1.2\" fill=\"white\" opacity=\"0.7\" />\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <rect\r\n        x=\"42\"\r\n        y=\"85\"\r\n        width=\"16\"\r\n        height=\"12\"\r\n        fill={skinTone.color}\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      {outfit && outfit.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          <path\r\n            d={outfit.path}\r\n            fill={outfitColor?.color || outfit.baseColor}\r\n          />\r\n          {/*  () */}\r\n          {outfit.collar && (\r\n            <g>\r\n              <path d=\"M40,95 L50,103 L60,95\" stroke=\"#ffffff\" strokeWidth=\"3\" fill=\"none\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.buttons && (\r\n            <g>\r\n              <circle cx=\"50\" cy=\"103\" r=\"2\" fill=\"#f1c40f\" />\r\n              <circle cx=\"50\" cy=\"110\" r=\"2\" fill=\"#f1c40f\" />\r\n            </g>\r\n          )}\r\n          {/*  () */}\r\n          {outfit.tie && (\r\n            <g>\r\n              <path d=\"M47,95 L50,98 L53,95\" fill=\"#c0392b\" />\r\n              <path d=\"M48,98 L50,118 L52,98 Z\" fill=\"#e74c3c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {outfit.hood && (\r\n            <path\r\n              d=\"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92\"\r\n              fill={darkenColor(outfitColor?.color || outfit.baseColor, 15)}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*      -  path    */}\r\n        {(() => {\r\n          //    ( path !)\r\n          // round/square/heart: x=10~90, oval: x=12~88, long: x=20~80\r\n          const earPositions = {\r\n            round: { leftX: 7, rightX: 93, y: 50 },\r\n            oval: { leftX: 9, rightX: 91, y: 48 },\r\n            square: { leftX: 7, rightX: 93, y: 50 },\r\n            heart: { leftX: 7, rightX: 93, y: 48 },\r\n            long: { leftX: 17, rightX: 83, y: 50 },\r\n          };\r\n          const earPos = earPositions[faceShape.id] || earPositions.round;\r\n          return (\r\n            <>\r\n              {/*  () -    */}\r\n              <ellipse\r\n                cx={earPos.leftX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.leftX + 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n              {/*  () */}\r\n              <ellipse\r\n                cx={earPos.rightX}\r\n                cy={earPos.y}\r\n                rx=\"5\"\r\n                ry=\"8\"\r\n                fill={skinTone.color}\r\n              />\r\n              <ellipse\r\n                cx={earPos.rightX - 1}\r\n                cy={earPos.y}\r\n                rx=\"2\"\r\n                ry=\"4\"\r\n                fill={darkenColor(skinTone.color, 12)}\r\n              />\r\n            </>\r\n          );\r\n        })()}\r\n        {/*   */}\r\n        <path\r\n          d={faceShape.path}\r\n          fill={skinTone.color}\r\n        />\r\n        {/*   */}\r\n        <ellipse cx=\"30\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n        <ellipse cx=\"70\" cy=\"60\" rx=\"8\" ry=\"5\" fill=\"#ffb6c1\" opacity=\"0.3\" />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <g>\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.leftX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*   */}\r\n        <ellipse\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          rx={eyeStyle.size}\r\n          ry={eyeStyle.size * 0.75}\r\n          fill=\"white\"\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX}\r\n          cy={eyeStyle.y}\r\n          r={eyeStyle.size * 0.55}\r\n          fill={eyeColor.color}\r\n        />\r\n        <circle\r\n          cx={eyeStyle.rightX - 1}\r\n          cy={eyeStyle.y - 1}\r\n          r={eyeStyle.size * 0.22}\r\n          fill=\"white\"\r\n        />\r\n\r\n        {/*  -    */}\r\n        <path\r\n          d={`M${eyeStyle.leftX - 7},${eyeStyle.y - 11} Q${eyeStyle.leftX},${eyeStyle.y - 14} ${eyeStyle.leftX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n        <path\r\n          d={`M${eyeStyle.rightX - 7},${eyeStyle.y - 11} Q${eyeStyle.rightX},${eyeStyle.y - 14} ${eyeStyle.rightX + 7},${eyeStyle.y - 11}`}\r\n          stroke={hairColor?.gradient ? \"#1a1a1a\" : (hairColor?.color || \"#1a1a1a\")}\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          strokeLinecap=\"round\"\r\n        />\r\n      </g>\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d=\"M48,53 L50,60 L52,53\"\r\n        stroke={noseColor}\r\n        strokeWidth=\"2.5\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n\r\n      {/* =======  ======= */}\r\n      <path\r\n        d={mouthStyle.path}\r\n        stroke={mouthStyle.stroke ? \"#c0392b\" : \"none\"}\r\n        strokeWidth=\"2.5\"\r\n        fill={mouthStyle.fill ? \"#c0392b\" : \"none\"}\r\n        strokeLinecap=\"round\"\r\n      />\r\n\r\n      {/* =======     ======= */}\r\n      {hairstyle && hairstyle.id !== \"none\" && (\r\n        <g>\r\n          {/*   */}\r\n          {hairstyle.paths && hairstyle.paths[0] && (\r\n            <path\r\n              d={hairstyle.paths[0]}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n          {/*   (/ ) */}\r\n          {hairstyle.paths && hairstyle.paths.slice(1).map((p, i) => (\r\n            <path\r\n              key={`hair-${i}`}\r\n              d={p}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          ))}\r\n          {/*  */}\r\n          {hairstyle.bangsPath && (\r\n            <path\r\n              d={hairstyle.bangsPath}\r\n              fill={getHairFill()}\r\n              stroke={hairColor?.color === \"#1a1a1a\" ? \"#333\" : \"none\"}\r\n              strokeWidth=\"1\"\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {accessory && accessory.id !== \"none\" && (\r\n        <g>\r\n          {/*  */}\r\n          {accessory.id === \"glasses\" && (\r\n            <g>\r\n              {/*   */}\r\n              <circle cx=\"35\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*   */}\r\n              <circle cx=\"65\" cy=\"45\" r=\"10\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M45,45 Q50,42 55,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <path d=\"M25,45 L10,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M75,45 L90,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"sunglasses\" && (\r\n            <g>\r\n              <ellipse cx=\"35\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <ellipse cx=\"65\" cy=\"45\" rx=\"12\" ry=\"8\" fill=\"#1a1a1a\" />\r\n              <path d=\"M47,45 Q50,42 53,45\" fill=\"none\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M23,45 L8,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              <path d=\"M77,45 L92,42\" stroke=\"#1a1a1a\" strokeWidth=\"2\" />\r\n              {/*  */}\r\n              <ellipse cx=\"32\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n              <ellipse cx=\"62\" cy=\"43\" rx=\"3\" ry=\"2\" fill=\"white\" opacity=\"0.3\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"earrings\" && (\r\n            <g>\r\n              <circle cx=\"6\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"94\" cy=\"58\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"5\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n              <circle cx=\"93\" cy=\"56\" r=\"1\" fill=\"white\" opacity=\"0.6\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"necklace\" && (\r\n            <g>\r\n              <path d=\"M30,88 Q50,95 70,88\" fill=\"none\" stroke=\"#f1c40f\" strokeWidth=\"2\" />\r\n              <circle cx=\"50\" cy=\"94\" r=\"4\" fill=\"#f1c40f\" />\r\n              <circle cx=\"49\" cy=\"92\" r=\"1\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"hat\" && (\r\n            <g>\r\n              <ellipse cx=\"50\" cy=\"8\" rx=\"45\" ry=\"8\" fill=\"#e74c3c\" />\r\n              <path d=\"M15,8 Q15,-15 50,-18 Q85,-15 85,8\" fill=\"#e74c3c\" />\r\n              <rect x=\"15\" y=\"5\" width=\"70\" height=\"5\" fill=\"#c0392b\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"crown\" && (\r\n            <g>\r\n              <path\r\n                d=\"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z\"\r\n                fill=\"#f1c40f\"\r\n                stroke=\"#d4ac0d\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <circle cx=\"32\" cy=\"-2\" r=\"4\" fill=\"#e74c3c\" />\r\n              <circle cx=\"50\" cy=\"-5\" r=\"5\" fill=\"#3498db\" />\r\n              <circle cx=\"68\" cy=\"-2\" r=\"4\" fill=\"#2ecc71\" />\r\n              <circle cx=\"31\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"49\" cy=\"-7\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\r\n              <circle cx=\"67\" cy=\"-4\" r=\"1.5\" fill=\"white\" opacity=\"0.5\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"headband\" && (\r\n            <path\r\n              d=\"M10,22 Q50,15 90,22\"\r\n              fill=\"none\"\r\n              stroke=\"#ff69b4\"\r\n              strokeWidth=\"4\"\r\n            />\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"bow\" && (\r\n            <g transform=\"translate(78, 15)\">\r\n              <ellipse cx=\"-10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <ellipse cx=\"10\" cy=\"0\" rx=\"10\" ry=\"6\" fill=\"#ff69b4\" />\r\n              <circle cx=\"0\" cy=\"0\" r=\"5\" fill=\"#e91e8c\" />\r\n            </g>\r\n          )}\r\n          {/*  */}\r\n          {accessory.id === \"mask\" && (\r\n            <g>\r\n              <path\r\n                d=\"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z\"\r\n                fill=\"#ffffff\"\r\n                stroke=\"#e0e0e0\"\r\n                strokeWidth=\"1\"\r\n              />\r\n              <path d=\"M35,62 L65,62\" stroke=\"#e0e0e0\" strokeWidth=\"1\" />\r\n            </g>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* =======  ======= */}\r\n      {borderStyle && showBorder && (\r\n        <rect\r\n          x=\"-13\"\r\n          y={viewBoxY + 2}\r\n          width=\"126\"\r\n          height={viewBoxHeight - 4}\r\n          fill=\"none\"\r\n          stroke={borderStyle.stroke}\r\n          strokeWidth={borderStyle.strokeWidth}\r\n          rx=\"12\"\r\n          style={{ filter: borderStyle.filter }}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/**\r\n *   \r\n *  viewBox     \r\n */\r\nexport function MiniAvatar({ config, size = 40, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      style={{\r\n        width: size,\r\n        height: size,\r\n        borderRadius: \"50%\",\r\n        overflow: \"hidden\",\r\n        cursor: onClick ? \"pointer\" : \"default\",\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.3)\",\r\n        border: \"2px solid rgba(255,255,255,0.3)\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <div style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, -60%)\", //    \r\n      }}>\r\n        <Avatar config={config} size={size * 1.6} showBorder={false} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/levelSystem.js -   /  ( )\r\n\r\n/**\r\n *      \r\n *     .\r\n * 1  1 12 \r\n */\r\n\r\nexport const LEVEL_THRESHOLDS = [\r\n  {\r\n    level: 0,\r\n    minAssets: 0,\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#6b7280\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 1,\r\n    minAssets: 10000000, // 1\r\n    title: \"\",\r\n    icon: \"\",\r\n    color: \"#22c55e\",\r\n    badge: \"\",\r\n    description: \"  !\"\r\n  },\r\n  {\r\n    level: 2,\r\n    minAssets: 50000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#84cc16\",\r\n    badge: \"\",\r\n    description: \" !\"\r\n  },\r\n  {\r\n    level: 3,\r\n    minAssets: 100000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#eab308\",\r\n    badge: \"\",\r\n    description: \"  \"\r\n  },\r\n  {\r\n    level: 4,\r\n    minAssets: 200000000, // 2\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#f97316\",\r\n    badge: \"\",\r\n    description: \"2  \"\r\n  },\r\n  {\r\n    level: 5,\r\n    minAssets: 300000000, // 3\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ef4444\",\r\n    badge: \"\",\r\n    description: \"3  \"\r\n  },\r\n  {\r\n    level: 6,\r\n    minAssets: 500000000, // 5\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#ec4899\",\r\n    badge: \"\",\r\n    description: \"5 \"\r\n  },\r\n  {\r\n    level: 7,\r\n    minAssets: 1000000000, // 10\r\n    title: \"10 \",\r\n    icon: \"\",\r\n    color: \"#a855f7\",\r\n    badge: \"\",\r\n    description: \"10 !  \"\r\n  },\r\n  {\r\n    level: 8,\r\n    minAssets: 5000000000, // 50\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#8b5cf6\",\r\n    badge: \"\",\r\n    description: \"50  \"\r\n  },\r\n  {\r\n    level: 9,\r\n    minAssets: 10000000000, // 100\r\n    title: \"100 \",\r\n    icon: \"\",\r\n    color: \"#6366f1\",\r\n    badge: \"\",\r\n    description: \"100!  \"\r\n  },\r\n  {\r\n    level: 10,\r\n    minAssets: 50000000000, // 500\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#3b82f6\",\r\n    badge: \"\",\r\n    description: \"500  \"\r\n  },\r\n  {\r\n    level: 11,\r\n    minAssets: 100000000000, // 1000\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#0ea5e9\",\r\n    badge: \"\",\r\n    description: \"1000!  \"\r\n  },\r\n  {\r\n    level: 12,\r\n    minAssets: 1000000000000, // 1\r\n    title: \" \",\r\n    icon: \"\",\r\n    color: \"#00fff2\",\r\n    badge: \"\",\r\n    description: \"1 !  \"\r\n  },\r\n];\r\n\r\n/**\r\n *     .\r\n * @param {number} netAssets -  \r\n * @returns {{ level: number, title: string, icon: string, color: string, progress: number, nextLevel: object|null }}\r\n */\r\nexport function getLevelInfo(netAssets) {\r\n  const assets = Number(netAssets) || 0;\r\n\r\n  //    ( )\r\n  let currentLevelData = LEVEL_THRESHOLDS[0];\r\n  for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {\r\n    if (assets >= LEVEL_THRESHOLDS[i].minAssets) {\r\n      currentLevelData = LEVEL_THRESHOLDS[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  //   \r\n  const nextLevelIndex = LEVEL_THRESHOLDS.findIndex(l => l.level === currentLevelData.level + 1);\r\n  const nextLevel = nextLevelIndex !== -1 ? LEVEL_THRESHOLDS[nextLevelIndex] : null;\r\n\r\n  //   (  %)\r\n  let progress = 100;\r\n  if (nextLevel) {\r\n    const currentMin = currentLevelData.minAssets;\r\n    const nextMin = nextLevel.minAssets;\r\n    progress = Math.min(100, Math.floor(((assets - currentMin) / (nextMin - currentMin)) * 100));\r\n  }\r\n\r\n  return {\r\n    level: currentLevelData.level,\r\n    title: currentLevelData.title,\r\n    icon: currentLevelData.icon,\r\n    color: currentLevelData.color,\r\n    badge: currentLevelData.badge,\r\n    description: currentLevelData.description,\r\n    progress,\r\n    nextLevel,\r\n    currentAssets: assets,\r\n    assetsToNextLevel: nextLevel ? nextLevel.minAssets - assets : 0,\r\n  };\r\n}\r\n\r\n/**\r\n *     \r\n * @param {string} color -  \r\n * @returns {object} CSS  \r\n */\r\nexport function getLevelBadgeStyle(color) {\r\n  return {\r\n    background: `linear-gradient(135deg, ${color}20 0%, ${color}40 100%)`,\r\n    border: `2px solid ${color}`,\r\n    color: color,\r\n    padding: \"4px 12px\",\r\n    borderRadius: \"20px\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"14px\",\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    gap: \"6px\",\r\n    boxShadow: `0 0 12px ${color}40`,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n * @param {number} newLevel -  \r\n * @param {string} newTitle -  \r\n * @returns {string}  \r\n */\r\nexport function getLevelUpMessage(newLevel, newTitle) {\r\n  return ` !  ${newLevel} \"${newTitle}\" !`;\r\n}\r\n\r\n/**\r\n * /  ( )\r\n * @param {number} amount - \r\n * @returns {string}  \r\n */\r\nexport function formatAssetsShort(amount) {\r\n  if (amount >= 1000000000000) {\r\n    return `${(amount / 1000000000000).toFixed(1)}`;\r\n  } else if (amount >= 100000000) {\r\n    return `${(amount / 100000000).toFixed(1)}`;\r\n  } else if (amount >= 10000) {\r\n    return `${(amount / 10000).toFixed(0)}`;\r\n  } else if (amount >= 1000) {\r\n    return `${(amount / 1000).toFixed(1)}`;\r\n  }\r\n  return amount.toLocaleString();\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function getAllLevels() {\r\n  return LEVEL_THRESHOLDS;\r\n}\r\n","// src/utils/achievementSystem.js - / \r\n\r\n/**\r\n *   \r\n *      .\r\n */\r\n\r\nexport const ACHIEVEMENTS = {\r\n  //   \r\n  FIRST_THOUSAND: {\r\n    id: \"first_thousand\",\r\n    name: \"  \",\r\n    description: \"1,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  FIRST_TEN_THOUSAND: {\r\n    id: \"first_ten_thousand\",\r\n    name: \"  \",\r\n    description: \"10,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  HUNDRED_THOUSAND: {\r\n    id: \"hundred_thousand\",\r\n    name: \"10  \",\r\n    description: \"100,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 100000,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  MILLIONAIRE: {\r\n    id: \"millionaire\",\r\n    name: \"\",\r\n    description: \"1,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 1000000,\r\n    rarity: \"rare\",\r\n    points: 100,\r\n  },\r\n  MULTI_MILLIONAIRE: {\r\n    id: \"multi_millionaire\",\r\n    name: \"\",\r\n    description: \"10,000,000  \",\r\n    icon: \"\",\r\n    category: \"wealth\",\r\n    condition: (stats) => stats.totalAssets >= 10000000,\r\n    rarity: \"legendary\",\r\n    points: 500,\r\n  },\r\n\r\n  //   \r\n  COUPON_COLLECTOR: {\r\n    id: \"coupon_collector\",\r\n    name: \" \",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 10,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  COUPON_MASTER: {\r\n    id: \"coupon_master\",\r\n    name: \" \",\r\n    description: \" 50  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n  COUPON_HOARDER: {\r\n    id: \"coupon_hoarder\",\r\n    name: \" \",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"coupon\",\r\n    condition: (stats) => stats.coupons >= 100,\r\n    rarity: \"rare\",\r\n    points: 80,\r\n  },\r\n\r\n  //   \r\n  FIRST_TRADE: {\r\n    id: \"first_trade\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 1,\r\n    rarity: \"common\",\r\n    points: 10,\r\n  },\r\n  ACTIVE_TRADER: {\r\n    id: \"active_trader\",\r\n    name: \" \",\r\n    description: \"10  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 10,\r\n    rarity: \"common\",\r\n    points: 25,\r\n  },\r\n  TRADING_EXPERT: {\r\n    id: \"trading_expert\",\r\n    name: \" \",\r\n    description: \"50  \",\r\n    icon: \"\",\r\n    category: \"trading\",\r\n    condition: (stats) => stats.totalTransactions >= 50,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n\r\n  //   \r\n  GENEROUS_HEART: {\r\n    id: \"generous_heart\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 1,\r\n    rarity: \"common\",\r\n    points: 20,\r\n  },\r\n  PHILANTHROPIST: {\r\n    id: \"philanthropist\",\r\n    name: \"\",\r\n    description: \" 10  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 10,\r\n    rarity: \"uncommon\",\r\n    points: 50,\r\n  },\r\n  DONATION_KING: {\r\n    id: \"donation_king\",\r\n    name: \"\",\r\n    description: \" 100  \",\r\n    icon: \"\",\r\n    category: \"donation\",\r\n    condition: (stats) => stats.totalDonations >= 100,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //   \r\n  SAVER_BEGINNER: {\r\n    id: \"saver_beginner\",\r\n    name: \" \",\r\n    description: \"    \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 1,\r\n    rarity: \"common\",\r\n    points: 15,\r\n  },\r\n  SMART_SAVER: {\r\n    id: \"smart_saver\",\r\n    name: \" \",\r\n    description: \"/ 3  \",\r\n    icon: \"\",\r\n    category: \"saving\",\r\n    condition: (stats) => stats.savingProducts >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 40,\r\n  },\r\n\r\n  //   \r\n  FIRST_PROPERTY: {\r\n    id: \"first_property\",\r\n    name: \" \",\r\n    description: \"   \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 1,\r\n    rarity: \"common\",\r\n    points: 30,\r\n  },\r\n  REAL_ESTATE_INVESTOR: {\r\n    id: \"real_estate_investor\",\r\n    name: \" \",\r\n    description: \" 3  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 3,\r\n    rarity: \"uncommon\",\r\n    points: 70,\r\n  },\r\n  PROPERTY_TYCOON: {\r\n    id: \"property_tycoon\",\r\n    name: \" \",\r\n    description: \" 5  \",\r\n    icon: \"\",\r\n    category: \"realestate\",\r\n    condition: (stats) => stats.properties >= 5,\r\n    rarity: \"rare\",\r\n    points: 150,\r\n  },\r\n\r\n  //  \r\n  PERFECT_ATTENDANCE: {\r\n    id: \"perfect_attendance\",\r\n    name: \"\",\r\n    description: \"7  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 7,\r\n    rarity: \"uncommon\",\r\n    points: 100,\r\n  },\r\n  MONTHLY_STREAK: {\r\n    id: \"monthly_streak\",\r\n    name: \"  \",\r\n    description: \"30  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: (stats) => stats.loginStreak >= 30,\r\n    rarity: \"rare\",\r\n    points: 300,\r\n  },\r\n  EARLY_BIRD: {\r\n    id: \"early_bird\",\r\n    name: \"\",\r\n    description: \"  \",\r\n    icon: \"\",\r\n    category: \"special\",\r\n    condition: () => false, //  \r\n    rarity: \"legendary\",\r\n    points: 200,\r\n  },\r\n};\r\n\r\nexport const RARITY_COLORS = {\r\n  common: { color: \"#9ca3af\", bg: \"#374151\", label: \"\" },\r\n  uncommon: { color: \"#22c55e\", bg: \"#14532d\", label: \"\" },\r\n  rare: { color: \"#3b82f6\", bg: \"#1e3a8a\", label: \"\" },\r\n  epic: { color: \"#a855f7\", bg: \"#581c87\", label: \"\" },\r\n  legendary: { color: \"#f59e0b\", bg: \"#78350f\", label: \"\" },\r\n};\r\n\r\nexport const CATEGORIES = {\r\n  wealth: { name: \"\", icon: \"\" },\r\n  coupon: { name: \"\", icon: \"\" },\r\n  trading: { name: \"\", icon: \"\" },\r\n  donation: { name: \"\", icon: \"\" },\r\n  saving: { name: \"\", icon: \"\" },\r\n  realestate: { name: \"\", icon: \"\" },\r\n  special: { name: \"\", icon: \"\" },\r\n};\r\n\r\n/**\r\n *       .\r\n * @param {object} userStats -  \r\n * @returns {Array}   \r\n */\r\nexport function getUnlockedAchievements(userStats) {\r\n  const stats = {\r\n    totalAssets: userStats.totalAssets || 0,\r\n    coupons: userStats.coupons || 0,\r\n    totalTransactions: userStats.totalTransactions || 0,\r\n    totalDonations: userStats.totalDonations || 0,\r\n    savingProducts: userStats.savingProducts || 0,\r\n    properties: userStats.properties || 0,\r\n    loginStreak: userStats.loginStreak || 0,\r\n    ...userStats,\r\n  };\r\n\r\n  return Object.values(ACHIEVEMENTS).filter(\r\n    (achievement) => achievement.condition(stats)\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n * @param {object} userStats -  \r\n * @returns {{ unlocked: number, total: number, percentage: number, points: number }}\r\n */\r\nexport function getAchievementProgress(userStats) {\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n  const totalAchievements = Object.keys(ACHIEVEMENTS).length;\r\n  const totalPoints = unlockedAchievements.reduce((sum, a) => sum + a.points, 0);\r\n\r\n  return {\r\n    unlocked: unlockedAchievements.length,\r\n    total: totalAchievements,\r\n    percentage: Math.round((unlockedAchievements.length / totalAchievements) * 100),\r\n    points: totalPoints,\r\n  };\r\n}\r\n\r\n/**\r\n *   \r\n * @param {object} userStats -  \r\n * @returns {object}   \r\n */\r\nexport function getAchievementsByCategory(userStats) {\r\n  const unlockedIds = new Set(\r\n    getUnlockedAchievements(userStats).map((a) => a.id)\r\n  );\r\n\r\n  const grouped = {};\r\n  for (const [category, info] of Object.entries(CATEGORIES)) {\r\n    grouped[category] = {\r\n      ...info,\r\n      achievements: Object.values(ACHIEVEMENTS)\r\n        .filter((a) => a.category === category)\r\n        .map((a) => ({\r\n          ...a,\r\n          unlocked: unlockedIds.has(a.id),\r\n        })),\r\n    };\r\n  }\r\n\r\n  return grouped;\r\n}\r\n\r\n/**\r\n * ID   .\r\n * @param {string} achievementId -  ID\r\n * @returns {object|null}    null\r\n */\r\nexport function getAchievementById(achievementId) {\r\n  return Object.values(ACHIEVEMENTS).find((a) => a.id === achievementId) || null;\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @returns {Array}    [{id, unlockedAt}, ...]\r\n */\r\nexport function getUserAchievements(userId) {\r\n  if (!userId) return [];\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const stored = localStorage.getItem(key);\r\n    return stored ? JSON.parse(stored) : [];\r\n  } catch (error) {\r\n    console.error(\"   :\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n *   .\r\n * @param {string} userId -  ID\r\n * @param {string} achievementId -  ID\r\n * @returns {boolean}    true\r\n */\r\nexport function grantAchievement(userId, achievementId) {\r\n  if (!userId || !achievementId) return false;\r\n\r\n  try {\r\n    const key = `alchan_achievements_${userId}`;\r\n    const achievements = getUserAchievements(userId);\r\n\r\n    //    false \r\n    if (achievements.some((a) => a.id === achievementId)) {\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    achievements.push({\r\n      id: achievementId,\r\n      unlockedAt: new Date().toISOString(),\r\n    });\r\n\r\n    localStorage.setItem(key, JSON.stringify(achievements));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"  :\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n * @param {string} userId -  ID\r\n * @param {object} userStats -  \r\n * @returns {Array}    \r\n */\r\nexport function checkAndGrantAchievements(userId, userStats) {\r\n  if (!userId) return [];\r\n\r\n  const newAchievements = [];\r\n  const unlockedAchievements = getUnlockedAchievements(userStats);\r\n\r\n  for (const achievement of unlockedAchievements) {\r\n    if (grantAchievement(userId, achievement.id)) {\r\n      newAchievements.push(achievement);\r\n    }\r\n  }\r\n\r\n  return newAchievements;\r\n}\r\n","// src/components/AlchanHeader.js\r\n//  UI   -    \r\n\r\nimport React, { useState, useRef, useEffect, memo, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { verifyClassCode } from '../firebase';\r\nimport {\r\n  Menu, Bell, X, LogOut, User, Key, Building2, Trash2,\r\n  ChevronLeft, ChevronRight, Sparkles, Gift, Settings, LayoutDashboard, Wallet\r\n} from 'lucide-react';\r\nimport SettingsPanel from './SettingsPanel';\r\nimport Avatar from './Avatar';\r\nimport { getAvatarConfig } from '../utils/avatarSystem';\r\nimport { getLevelInfo } from '../utils/levelSystem';\r\nimport { getUserAchievements, getAchievementById } from '../utils/achievementSystem';\r\n\r\n//  \r\nconst formatMoney = (amount) => {\r\n  if (amount >= 100000000) {\r\n    const ok = Math.floor(amount / 100000000);\r\n    const man = Math.floor((amount % 100000000) / 10000);\r\n    if (man > 0) return `${ok} ${man.toLocaleString()}`;\r\n    return `${ok}`;\r\n  }\r\n  if (amount >= 10000) {\r\n    const man = Math.floor(amount / 10000);\r\n    return `${man.toLocaleString()}`;\r\n  }\r\n  return new Intl.NumberFormat('ko-KR').format(amount);\r\n};\r\n\r\n//  \r\nconst Modal = ({ isOpen, onClose, title, children }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" onClick={onClose}>\r\n      <div className=\"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-bold text-white\">{title}</h3>\r\n          <button onClick={onClose} className=\"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors\">\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AlchanHeader = memo(({ toggleSidebar, isMobile, isSidebarCollapsed, onToggleSidebarCollapse }) => {\r\n  const navigate = useNavigate();\r\n  const { user, userDoc, logout, updateUser, changePassword, deleteCurrentUserAccount, loginWithEmailPassword } = useAuth();\r\n\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const userMenuRef = useRef(null);\r\n\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [nicknameError, setNicknameError] = useState(\"\");\r\n\r\n  // \r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [passwordSuccess, setPasswordSuccess] = useState(false);\r\n\r\n  //  \r\n  const [newClassCodeInput, setNewClassCodeInput] = useState(\"\");\r\n  const [classCodeError, setClassCodeError] = useState(\"\");\r\n  const [classCodeSuccess, setClassCodeSuccess] = useState(false);\r\n\r\n  const isCurrentUserAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  const displayName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  let userRole = \"\";\r\n  if (userDoc?.isSuperAdmin) userRole = \" \";\r\n  else if (userDoc?.isAdmin) userRole = \"\";\r\n\r\n  // , ,  \r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n\r\n  //       \r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      setAvatarConfig(getAvatarConfig(user.uid));\r\n    }\r\n\r\n    //    \r\n    const handleAvatarChange = (e) => {\r\n      if (e.detail.userId === user?.uid) {\r\n        setAvatarConfig(e.detail.config);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('avatarChanged', handleAvatarChange);\r\n    return () => window.removeEventListener('avatarChanged', handleAvatarChange);\r\n  }, [user?.uid]);\r\n\r\n  const levelInfo = useMemo(() => {\r\n    const cash = Number(userDoc?.cash) || 0;\r\n    const stockValue = Number(userDoc?.stockValue) || 0;\r\n    const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n    const itemValue = Number(userDoc?.itemValue) || 0;\r\n    const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n    return getLevelInfo(netAssets);\r\n  }, [userDoc?.cash, userDoc?.stockValue, userDoc?.realEstateValue, userDoc?.itemValue]);\r\n\r\n  const bestAchievement = useMemo(() => {\r\n    if (!user?.uid) return null;\r\n    const achievements = getUserAchievements(user.uid);\r\n    if (achievements.length === 0) return null;\r\n\r\n    const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n    const sorted = [...achievements].sort((a, b) => {\r\n      const achA = getAchievementById(a.id);\r\n      const achB = getAchievementById(b.id);\r\n      return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n    });\r\n\r\n    return getAchievementById(sorted[0].id);\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setShowUserMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const closeModal = () => {\r\n    setActiveModal(null);\r\n    setNicknameError(\"\");\r\n    setPasswordError(\"\");\r\n    setPasswordSuccess(false);\r\n    setClassCodeError(\"\");\r\n    setClassCodeSuccess(false);\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (logout) {\r\n      await logout();\r\n      navigate('/login');\r\n    }\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = () => {\r\n    setNewNickname(userDoc?.name || userDoc?.nickname || \"\");\r\n    setActiveModal('nickname');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveNickname = async () => {\r\n    const trimmed = newNickname.trim();\r\n    if (!trimmed) return setNicknameError(\" .\");\r\n    if (trimmed.length < 2) return setNicknameError(\"  2  .\");\r\n    if (trimmed.length > 12) return setNicknameError(\"  12 .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const success = await updateUser({ name: trimmed });\r\n      if (success) {\r\n        alert(\" .\");\r\n        closeModal();\r\n      } else {\r\n        setNicknameError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setNicknameError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = () => {\r\n    setActiveModal('password');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const savePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) return setPasswordError(\"  .\");\r\n    if (newPassword.length < 6) return setPasswordError(\"  6  .\");\r\n    if (newPassword !== confirmPassword) return setPasswordError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await loginWithEmailPassword(user.email, currentPassword, true);\r\n      await changePassword(newPassword);\r\n      setPasswordSuccess(true);\r\n      setTimeout(closeModal, 2000);\r\n    } catch (error) {\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        setPasswordError(\"   .\");\r\n      } else {\r\n        setPasswordError(`: ${error.message}`);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleEnterClassCode = () => {\r\n    setNewClassCodeInput(userDoc?.classCode || \"\");\r\n    setActiveModal('classCode');\r\n    setShowUserMenu(false);\r\n  };\r\n\r\n  const saveClassCode = async () => {\r\n    const trimmed = newClassCodeInput.trim().toUpperCase();\r\n    if (!trimmed) return setClassCodeError(\"  .\");\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(trimmed);\r\n      if (!isValid) {\r\n        setClassCodeError(`'${trimmed}'    .`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const success = await updateUser({ classCode: trimmed });\r\n      if (success) {\r\n        setClassCodeSuccess(true);\r\n        setTimeout(() => {\r\n          alert(`  '${trimmed}' !`);\r\n          closeModal();\r\n        }, 1000);\r\n      } else {\r\n        setClassCodeError(\" .\");\r\n      }\r\n    } catch (error) {\r\n      setClassCodeError(`: ${error.message}`);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    setShowUserMenu(false);\r\n    const confirmation = window.prompt(\"   '' .\");\r\n    if (confirmation === '') {\r\n      const password = window.prompt(\"  .\");\r\n      if (password) {\r\n        try {\r\n          await loginWithEmailPassword(user.email, password, true);\r\n          await deleteCurrentUserAccount();\r\n          alert(\" .\");\r\n        } catch (error) {\r\n          alert(` : ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/*   */}\r\n      <header className=\"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10\">\r\n        {/*    */}\r\n        <div className=\"h-14 px-3 flex items-center justify-between\">\r\n          {/* :   +   */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={toggleSidebar} className=\"p-1.5 rounded-lg hover:bg-white/5 transition-colors\">\r\n              <LayoutDashboard size={22} className=\"text-white\" />\r\n            </button>\r\n            <h2 className=\"text-sm font-bold text-white whitespace-nowrap\">\r\n               <span className=\"text-[#00fff2]\"></span> !\r\n            </h2>\r\n          </div>\r\n\r\n          {/* : / +  */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {/*  &   */}\r\n            <div\r\n              onClick={() => navigate('/my-profile')}\r\n              className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer\"\r\n              style={{ background: 'rgba(167, 139, 250, 0.2)' }}\r\n            >\r\n              <span style={{ fontSize: '14px' }}>{levelInfo?.icon || ''}</span>\r\n              <div className=\"flex flex-col leading-none\">\r\n                <span style={{ fontSize: '9px', color: '#9ca3af' }}>LEVEL</span>\r\n                <span style={{ fontSize: '12px', fontWeight: '700', color: levelInfo?.color || '#a78bfa' }}>\r\n                  {levelInfo?.level || 1}\r\n                </span>\r\n              </div>\r\n              {bestAchievement && (\r\n                <span style={{ fontSize: '14px', marginLeft: '2px' }}>{bestAchievement.icon}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/*  */}\r\n            <div\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*     */}\r\n        <div className=\"px-4 pb-3 flex gap-3\">\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <span className=\"font-bold text-xs\"></span>\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{formatMoney(userDoc?.cash || 0)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0\">\r\n              <Gift size={14} />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <p className=\"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none\"></p>\r\n              <p className=\"text-sm font-bold text-white truncate\">{userDoc?.coupons || 0}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* PC  */}\r\n      <header\r\n        className=\"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10\"\r\n        style={{ height: '64px', minHeight: '64px', maxHeight: '64px', padding: '0 16px' }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*    */}\r\n          <button\r\n            onClick={onToggleSidebarCollapse}\r\n            style={{\r\n              padding: '8px',\r\n              borderRadius: '8px',\r\n              border: '1px solid rgba(0, 255, 242, 0.1)',\r\n              background: 'rgba(255, 255, 255, 0.05)',\r\n              color: 'white',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            {isSidebarCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n          </button>\r\n          <div>\r\n            <div style={{ fontSize: '15px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n               <span style={{ color: '#00fff2', fontFamily: \"'Jua', sans-serif\" }}></span> ! \r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#94a3b8', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName} </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(16, 185, 129, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#34d399'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#10b981',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontWeight: 'bold',\r\n              fontSize: '12px'\r\n            }}></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{formatMoney(userDoc?.cash || 0)}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            padding: '6px 12px',\r\n            background: 'rgba(244, 63, 94, 0.1)',\r\n            borderRadius: '8px',\r\n            color: '#fb7185'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px',\r\n              background: '#f43f5e',\r\n              color: 'white',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}><Gift size={14} /></div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', opacity: 0.7, lineHeight: '1.2' }}></div>\r\n              <div style={{ fontSize: '13px', fontWeight: 'bold', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userDoc?.coupons || 0}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*  &   */}\r\n          <div\r\n            onClick={() => navigate('/my-profile')}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              padding: '6px 12px',\r\n              background: `rgba(167, 139, 250, 0.1)`,\r\n              borderRadius: '8px',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease',\r\n            }}\r\n            onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.2)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(167, 139, 250, 0.1)'}\r\n          >\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: '28px',\r\n              height: '28px',\r\n              borderRadius: '6px',\r\n              background: levelInfo?.color || '#a78bfa',\r\n              fontSize: '14px',\r\n            }}>\r\n              {levelInfo?.icon || ''}\r\n            </div>\r\n            <div>\r\n              <div style={{ fontSize: '10px', fontWeight: '600', color: levelInfo?.color || '#a78bfa', lineHeight: '1.2' }}>\r\n                Lv.{levelInfo?.level || 1}\r\n              </div>\r\n              <div style={{ fontSize: '11px', fontWeight: 'bold', color: '#e8e8ff', whiteSpace: 'nowrap', lineHeight: '1.2' }}>\r\n                {levelInfo?.title || ''}\r\n              </div>\r\n            </div>\r\n            {bestAchievement && (\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px',\r\n                marginLeft: '4px',\r\n                padding: '2px 6px',\r\n                background: bestAchievement.rarity === 'legendary' ? 'rgba(245, 158, 11, 0.2)' :\r\n                           bestAchievement.rarity === 'epic' ? 'rgba(167, 139, 250, 0.2)' :\r\n                           bestAchievement.rarity === 'rare' ? 'rgba(59, 130, 246, 0.2)' : 'rgba(107, 114, 128, 0.2)',\r\n                borderRadius: '4px',\r\n              }}>\r\n                <span style={{ fontSize: '12px' }}>{bestAchievement.icon}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ position: 'relative' }} ref={userMenuRef}>\r\n            <button\r\n              onClick={() => setShowUserMenu(!showUserMenu)}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px',\r\n                paddingLeft: '12px',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                background: 'transparent',\r\n                border: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <div style={{ textAlign: 'right' }}>\r\n                <div style={{ fontSize: '13px', fontWeight: 'bold', color: 'white', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{displayName}</div>\r\n                <div style={{ fontSize: '11px', color: '#818cf8', fontWeight: '500', whiteSpace: 'nowrap', lineHeight: '1.2' }}>{userRole}</div>\r\n              </div>\r\n              <div\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigate('/my-profile');\r\n                }}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                <Avatar config={avatarConfig} size={40} showBorder={true} />\r\n              </div>\r\n            </button>\r\n\r\n            {/*   */}\r\n            {showUserMenu && (\r\n              <div className=\"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50\">\r\n                <div className=\"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700\">\r\n                  <p className=\"font-bold text-white\">{displayName}</p>\r\n                  <p className=\"text-sm text-slate-400 flex items-center gap-2 mt-1\">\r\n                    {isCurrentUserAdmin && <span className=\"text-indigo-400 font-semibold\"></span>}\r\n                    {userDoc?.classCode && <span>: {userDoc.classCode}</span>}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* :   */}\r\n                <div className=\"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-emerald-400\">{formatMoney(userDoc?.cash || 0)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-slate-400\"></span>\r\n                    <span className=\"font-bold text-rose-400\">{userDoc?.coupons || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  {/*   -    */}\r\n                  <button\r\n                    onClick={() => { navigate('/my-profile'); setShowUserMenu(false); }}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2\"\r\n                  >\r\n                    <User size={18} className=\"text-indigo-400\" />\r\n                     \r\n                    <span className=\"ml-auto text-xs text-indigo-400\">Lv.{levelInfo?.level || 0}</span>\r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleChangeNickname} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <User size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleChangePassword} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Key size={18} className=\"text-slate-500\" />\r\n                     \r\n                  </button>\r\n                  <button onClick={handleEnterClassCode} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Building2 size={18} className=\"text-slate-500\" />\r\n                      \r\n                  </button>\r\n                  <button onClick={() => { setShowSettings(true); setShowUserMenu(false); }} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <Settings size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleDeleteAccount} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors\">\r\n                    <Trash2 size={18} />\r\n                     \r\n                  </button>\r\n\r\n                  <div className=\"h-px bg-slate-700 my-2\" />\r\n\r\n                  <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors\">\r\n                    <LogOut size={18} className=\"text-slate-500\" />\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/*  */}\r\n      <Modal isOpen={activeModal === 'nickname'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={(e) => setNewNickname(e.target.value)}\r\n              placeholder=\"2-12\"\r\n              maxLength={12}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          {nicknameError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{nicknameError}</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveNickname} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'password'} onClose={closeModal} title=\" \">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\"> </label>\r\n            <input type=\"password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\" />\r\n          </div>\r\n          {passwordError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{passwordError}</p>}\r\n          {passwordSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\"> !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={savePassword} disabled={isLoading || passwordSuccess} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal isOpen={activeModal === 'classCode'} onClose={closeModal} title=\"  \">\r\n        <div className=\"space-y-4\">\r\n          {userDoc?.classCode && (\r\n            <p className=\"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl\">\r\n                : <strong className=\"text-white\">{userDoc.classCode}</strong>\r\n            </p>\r\n          )}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-300 mb-2\">  </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCodeInput}\r\n              onChange={(e) => setNewClassCodeInput(e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").toUpperCase())}\r\n              placeholder=\" \"\r\n              maxLength={20}\r\n              className=\"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors\"\r\n              autoFocus\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-2\">   .</p>\r\n          </div>\r\n          {classCodeError && <p className=\"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl\">{classCodeError}</p>}\r\n          {classCodeSuccess && <p className=\"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl\">  !</p>}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={closeModal} className=\"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors\"></button>\r\n            <button onClick={saveClassCode} disabled={isLoading} className=\"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50\">\r\n              {isLoading ? \" ...\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/*   */}\r\n      <SettingsPanel isOpen={showSettings} onClose={() => setShowSettings(false)} />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default AlchanHeader;\r\n","// src/components/MobileNav.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Home, Wallet, Gamepad2, Users } from 'lucide-react';\r\n\r\nconst tabs = [\r\n  { id: 'home', icon: Home, label: '', path: '/dashboard/tasks' },\r\n  { id: 'assets', icon: Wallet, label: '', path: '/my-assets' },\r\n  { id: 'game', icon: Gamepad2, label: '', paths: ['/learning-games', '/gonu-game'] },\r\n  { id: 'community', icon: Users, label: '', path: '/learning-board' },\r\n];\r\n\r\nexport default function MobileNav() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const isTabActive = (tab) => {\r\n    if (tab.paths) {\r\n      return tab.paths.some(p => location.pathname.startsWith(p));\r\n    }\r\n    return location.pathname === tab.path || location.pathname.startsWith(tab.path + '/');\r\n  };\r\n\r\n  const handleTabClick = (tab) => {\r\n    if (tab.paths) {\r\n      navigate(tab.paths[0] + '/omok');\r\n    } else {\r\n      navigate(tab.path);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50\">\r\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\r\n        {tabs.map((tab) => {\r\n          const isActive = isTabActive(tab);\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => handleTabClick(tab)}\r\n              className={`flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ${\r\n                isActive ? 'text-indigo-600 -translate-y-1' : 'text-gray-400'\r\n              }`}\r\n            >\r\n              <Icon\r\n                size={24}\r\n                strokeWidth={isActive ? 2.5 : 2}\r\n                className={isActive ? 'drop-shadow-md' : ''}\r\n              />\r\n              <span className={`text-[10px] font-medium ${isActive ? 'opacity-100' : 'opacity-70'}`}>\r\n                {tab.label}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","// src/components/PWAInstallPrompt.js\r\n// PWA   \r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, Download, Smartphone, Share, Plus } from 'lucide-react';\r\n\r\nexport default function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showPrompt, setShowPrompt] = useState(false);\r\n  const [isIOS, setIsIOS] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // iOS \r\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    setIsIOS(isIOSDevice);\r\n\r\n    //    \r\n    if (window.matchMedia('(display-mode: standalone)').matches) {\r\n      setIsInstalled(true);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // 7   \r\n      if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // beforeinstallprompt  \r\n    const handleBeforeInstall = (e) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e);\r\n      // 2   \r\n      setTimeout(() => setShowPrompt(true), 2000);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n    // iOS  3    \r\n    if (isIOSDevice && !window.matchMedia('(display-mode: standalone)').matches) {\r\n      setTimeout(() => setShowPrompt(true), 3000);\r\n    }\r\n\r\n    //   \r\n    window.addEventListener('appinstalled', () => {\r\n      setIsInstalled(true);\r\n      setShowPrompt(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstall = async () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n\r\n    if (outcome === 'accepted') {\r\n      console.log('PWA  ');\r\n    } else {\r\n      console.log('PWA  ');\r\n    }\r\n\r\n    setDeferredPrompt(null);\r\n    setShowPrompt(false);\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setShowPrompt(false);\r\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || !showPrompt) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\r\n        {/*  */}\r\n        <div className=\"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2 text-white\">\r\n            <Smartphone size={20} />\r\n            <span className=\"font-semibold\"> </span>\r\n          </div>\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"text-white/80 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50\">\r\n              <span className=\"text-white text-2xl\"></span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-bold text-gray-900 mb-1\">\r\n                  !\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n                     ,      .\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* iOS  */}\r\n          {isIOS ? (\r\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-sm text-gray-600 mb-2 font-medium\">\r\n                iOS :\r\n              </p>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Share size={16} className=\"text-indigo-500\" />\r\n                  <span>1.    </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                  <Plus size={16} className=\"text-indigo-500\" />\r\n                  <span>2. \"  \" </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={handleDismiss}\r\n                className=\"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleInstall}\r\n                className=\"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50\"\r\n              >\r\n                <Download size={18} />\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div className=\"px-4 py-2 bg-gray-50 border-t border-gray-100\">\r\n          <p className=\"text-xs text-gray-400 text-center\">\r\n                \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/UpdateNotification.js\r\n//    \r\n\r\nimport React from 'react';\r\nimport { RefreshCw, X } from 'lucide-react';\r\n\r\nexport default function UpdateNotification({ onUpdate, onDismiss }) {\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up\">\r\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n            <RefreshCw size={20} className=\"animate-spin-slow\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold mb-1\">  !</h3>\r\n            <p className=\"text-sm text-white/80 mb-3\">\r\n                   .\r\n            </p>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className=\"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={onUpdate}\r\n                className=\"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1\"\r\n              >\r\n                <RefreshCw size={14} />\r\n                 \r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"text-white/60 hover:text-white transition-colors\"\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/hooks/useServiceWorker.js\r\n//       \r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nexport function useServiceWorker() {\r\n  const [registration, setRegistration] = useState(null);\r\n  const [updateAvailable, setUpdateAvailable] = useState(false);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n\r\n  useEffect(() => {\r\n    // /  \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    //   \r\n    if ('serviceWorker' in navigator) {\r\n      registerServiceWorker();\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  //  [] interval ID  state (cleanup )\r\n  const [updateIntervalId, setUpdateIntervalId] = useState(null);\r\n\r\n  //  [] cleanup  effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (updateIntervalId) {\r\n        clearInterval(updateIntervalId);\r\n      }\r\n    };\r\n  }, [updateIntervalId]);\r\n\r\n  const registerServiceWorker = async () => {\r\n    try {\r\n      const reg = await navigator.serviceWorker.register('/sw.js', {\r\n        scope: '/'\r\n      });\r\n\r\n      setRegistration(reg);\r\n      console.log('[PWA]    :', reg.scope);\r\n\r\n      //  \r\n      reg.addEventListener('updatefound', () => {\r\n        const newWorker = reg.installing;\r\n        if (newWorker) {\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              //      (5 )\r\n              const lastUpdated = sessionStorage.getItem('alchan_updated');\r\n              if (lastUpdated && Date.now() - parseInt(lastUpdated) < 5 * 60 * 1000) {\r\n                console.log('[PWA]   -  ');\r\n                return;\r\n              }\r\n              console.log('[PWA]    ');\r\n              setUpdateAvailable(true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      //  []    (1) - cleanup  ID \r\n      const intervalId = setInterval(() => {\r\n        reg.update();\r\n      }, 60 * 60 * 1000);\r\n      setUpdateIntervalId(intervalId);\r\n\r\n    } catch (error) {\r\n      console.error('[PWA]    :', error);\r\n    }\r\n  };\r\n\r\n  const updateServiceWorker = useCallback(() => {\r\n    //   \r\n    setUpdateAvailable(false);\r\n\r\n    //      (     )\r\n    sessionStorage.setItem('alchan_updated', Date.now().toString());\r\n\r\n    if (registration && registration.waiting) {\r\n      //      \r\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\r\n        console.log('[PWA]     - ');\r\n        window.location.reload();\r\n      });\r\n\r\n      //      \r\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' });\r\n    } else {\r\n      // waiting      \r\n      console.log('[PWA]      -  ');\r\n      window.location.reload();\r\n    }\r\n  }, [registration]);\r\n\r\n  const requestNotificationPermission = useCallback(async () => {\r\n    if (!('Notification' in window)) {\r\n      console.log('[PWA]     .');\r\n      return false;\r\n    }\r\n\r\n    if (Notification.permission === 'granted') {\r\n      return true;\r\n    }\r\n\r\n    if (Notification.permission !== 'denied') {\r\n      const permission = await Notification.requestPermission();\r\n      return permission === 'granted';\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const showNotification = useCallback(async (title, options = {}) => {\r\n    const hasPermission = await requestNotificationPermission();\r\n\r\n    if (hasPermission && registration) {\r\n      registration.showNotification(title, {\r\n        icon: '/icons/icon-192x192.png',\r\n        badge: '/icons/icon-72x72.png',\r\n        vibrate: [100, 50, 100],\r\n        ...options\r\n      });\r\n    }\r\n  }, [registration, requestNotificationPermission]);\r\n\r\n  return {\r\n    registration,\r\n    updateAvailable,\r\n    updateServiceWorker,\r\n    isOnline,\r\n    requestNotificationPermission,\r\n    showNotification\r\n  };\r\n}\r\n\r\nexport default useServiceWorker;\r\n","// src/TaskItem.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { generateJobTaskReward } from \"./utils/jobTaskRewards\";\r\n\r\nexport default function TaskItem({\r\n  task,\r\n  onEarnCoupon,\r\n  isJobTask,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  taskId, // taskId prop \r\n  jobId = null, // jobId prop  (  )\r\n}) {\r\n  const [showBubble, setShowBubble] = useState(false);\r\n  const [bubbleText, setBubbleText] = useState(\"\");\r\n  const [showCardModal, setShowCardModal] = useState(false);\r\n  const [rewardData, setRewardData] = useState(null);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isFlipping, setIsFlipping] = useState(false);\r\n\r\n  const handleInternalClick = () => {\r\n    console.log(\"[TaskItem] handleInternalClick :\", { taskName: task?.name, isJobTask, taskId, jobId });\r\n\r\n    //  \r\n    if (\r\n      !task ||\r\n      typeof task.clicks !== \"number\" ||\r\n      typeof task.maxClicks !== \"number\"\r\n    ) {\r\n      console.error(\"Invalid task prop:\", task);\r\n      return;\r\n    }\r\n    if (task.maxClicks > 0 && task.clicks >= task.maxClicks) {\r\n      return;\r\n    }\r\n\r\n    //        \r\n    console.log(\"[TaskItem]   \");\r\n    const rewards = generateJobTaskReward();\r\n    setRewardData(rewards);\r\n    setSelectedCard(null);\r\n    setIsFlipping(false);\r\n    setShowCardModal(true);\r\n  };\r\n\r\n  const handleCardSelect = (cardType) => {\r\n    if (isFlipping || selectedCard) return;\r\n\r\n    console.log(\"[TaskItem]  :\", { cardType, taskId, jobId, isJobTask });\r\n\r\n    setSelectedCard(cardType);\r\n    setIsFlipping(true);\r\n\r\n    // 800ms   \r\n    setTimeout(() => {\r\n      const reward = cardType === \"cash\" ? rewardData.cash : rewardData.coupon;\r\n      const rewardText = cardType === \"cash\" ? `${reward.toLocaleString()}` : `${reward}`;\r\n\r\n      console.log(\"[TaskItem] onEarnCoupon  :\", { taskId, jobId, isJobTask, cardType, reward });\r\n\r\n      // onEarnCoupon  - taskId, jobId, isJobTask, cardType, reward \r\n      if (typeof onEarnCoupon === \"function\") {\r\n        onEarnCoupon(taskId || task.id, jobId, isJobTask, cardType, reward);\r\n      }\r\n\r\n      setShowCardModal(false);\r\n      setBubbleText(`${cardType === \"cash\" ? \" \" : \" \"} ${rewardText} ! `);\r\n      setShowBubble(true);\r\n      setIsFlipping(false);\r\n    }, 800);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (showBubble) {\r\n      timer = setTimeout(() => {\r\n        setShowBubble(false);\r\n        setBubbleText(\"\");\r\n      }, 2000);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [showBubble]);\r\n\r\n  const isCompleted =\r\n    task && task.maxClicks > 0 && task.clicks >= task.maxClicks;\r\n\r\n  if (!task) return null;\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  const taskItemStyle = {\r\n    backgroundColor: isCompleted ? \"rgba(20, 20, 35, 0.4)\" : \"rgba(30, 30, 50, 0.6)\",\r\n    borderRadius: \"8px\",\r\n    cursor: isCompleted ? \"default\" : \"pointer\",\r\n    transition: \"all 0.2s ease\",\r\n    border: `1px solid ${isCompleted ? \"rgba(100, 116, 139, 0.1)\" : \"rgba(0, 255, 242, 0.15)\"}`,\r\n    display: \"flex\",\r\n    flexDirection: \"row\", //   \r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    position: \"relative\",\r\n    opacity: isCompleted ? 0.6 : 1,\r\n    padding: isMobile ? \"8px 10px\" : \"12px\",\r\n    marginBottom: \"8px\",\r\n    boxShadow: isCompleted ? \"none\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n    gap: isMobile ? \"6px\" : \"8px\",\r\n  };\r\n\r\n  const taskInfoStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"6px\" : \"10px\",\r\n    flexGrow: 1,\r\n    minWidth: 0,\r\n    overflow: \"hidden\",\r\n  };\r\n\r\n  const taskNameStyle = {\r\n    color: isCompleted ? \"#64748b\" : \"#e8e8ff\",\r\n    fontWeight: \"600\",\r\n    fontSize: isMobile ? \"12px\" : \"16px\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    whiteSpace: \"nowrap\",\r\n    lineHeight: \"1.4\",\r\n    flex: 1,\r\n    minWidth: 0,\r\n  };\r\n\r\n  const taskActionsStyle = {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: isMobile ? \"4px\" : \"8px\",\r\n    flexShrink: 0,\r\n  };\r\n\r\n  const couponStyle = {\r\n    backgroundColor: isJobTask ? \"rgba(79, 70, 229, 0.3)\" : \"rgba(16, 185, 129, 0.3)\",\r\n    color: isJobTask ? \"#818cf8\" : \"#34d399\",\r\n    border: isJobTask ? \"1px solid rgba(99, 102, 241, 0.5)\" : \"1px solid rgba(52, 211, 153, 0.5)\",\r\n    padding: isMobile ? \"3px 6px\" : \"4px 10px\",\r\n    borderRadius: \"10px\",\r\n    fontSize: isMobile ? \"10px\" : \"13px\",\r\n    fontWeight: \"500\",\r\n    whiteSpace: \"nowrap\",\r\n  };\r\n\r\n  const renderCardModal = () => {\r\n    if (!showCardModal || !rewardData) return null;\r\n\r\n    const mobileModalContentStyle = {\r\n      ...modalContentStyle,\r\n      padding: isMobile ? \"20px\" : \"40px\",\r\n      width: isMobile ? \"95%\" : \"90%\",\r\n    };\r\n\r\n    const mobileModalTitleStyle = {\r\n      ...modalTitleStyle,\r\n      fontSize: isMobile ? \"20px\" : \"28px\",\r\n      marginBottom: isMobile ? \"8px\" : \"10px\",\r\n    };\r\n\r\n    const mobileModalSubtitleStyle = {\r\n      ...modalSubtitleStyle,\r\n      fontSize: isMobile ? \"13px\" : \"16px\",\r\n      marginBottom: isMobile ? \"20px\" : \"30px\",\r\n    };\r\n\r\n    const mobileCardsContainerStyle = {\r\n      ...cardsContainerStyle,\r\n      gap: isMobile ? \"15px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardStyle = {\r\n      ...cardStyle,\r\n      width: isMobile ? \"140px\" : \"200px\",\r\n      height: isMobile ? \"200px\" : \"280px\",\r\n    };\r\n\r\n    const mobileCardIconStyle = {\r\n      ...cardIconStyle,\r\n      fontSize: isMobile ? \"50px\" : \"80px\",\r\n      marginBottom: isMobile ? \"10px\" : \"20px\",\r\n    };\r\n\r\n    const mobileCardTextStyle = {\r\n      ...cardTextStyle,\r\n      fontSize: isMobile ? \"18px\" : \"24px\",\r\n    };\r\n\r\n    const mobileRewardAmountStyle = {\r\n      ...rewardAmountStyle,\r\n      fontSize: isMobile ? \"24px\" : \"36px\",\r\n    };\r\n\r\n    const mobileRewardLabelStyle = {\r\n      ...rewardLabelStyle,\r\n      fontSize: isMobile ? \"14px\" : \"18px\",\r\n    };\r\n\r\n    return createPortal(\r\n      <div style={modalOverlayStyle} onClick={() => setShowCardModal(false)}>\r\n        <div style={mobileModalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n          <h3 style={mobileModalTitleStyle}>  </h3>\r\n          <p style={mobileModalSubtitleStyle}>     !</p>\r\n\r\n          <div style={mobileCardsContainerStyle}>\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"cash\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"cash\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"cash\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"cash\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.cash.toLocaleString()}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div\r\n              style={{\r\n                ...mobileCardStyle,\r\n                ...(selectedCard === \"coupon\" && selectedCardStyle),\r\n              }}\r\n              onClick={() => !selectedCard && handleCardSelect(\"coupon\")}\r\n            >\r\n              <div style={{\r\n                ...cardInnerStyle,\r\n                transform: selectedCard === \"coupon\" ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\r\n              }}>\r\n                <div style={cardFrontStyle}>\r\n                  <div style={mobileCardIconStyle}></div>\r\n                  <div style={mobileCardTextStyle}></div>\r\n                </div>\r\n                <div style={{ ...cardBackStyle, ...(selectedCard === \"coupon\" && cardBackVisibleStyle) }}>\r\n                  <div style={mobileRewardAmountStyle}>{rewardData.coupon}</div>\r\n                  <div style={mobileRewardLabelStyle}>  !</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n      document.body\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={taskItemStyle}\r\n        onClick={isCompleted ? null : handleInternalClick}\r\n      >\r\n        <div style={taskInfoStyle}>\r\n          <span style={taskNameStyle} title={task.name}>\r\n            {task.name}\r\n          </span>\r\n        </div>\r\n\r\n        <div style={taskActionsStyle}>\r\n          {/*      */}\r\n          <span style={couponStyle}>\r\n             \r\n          </span>\r\n\r\n          {isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onEditTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDeleteTask();\r\n                }}\r\n                style={adminButtonStyles}\r\n                aria-label=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {showBubble && (\r\n          <div style={bubbleStyle}>\r\n            {bubbleText}\r\n            <div style={bubbleTailStyle}></div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {renderCardModal()}\r\n    </>\r\n  );\r\n}\r\n\r\nconst adminButtonStyles = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n  cursor: \"pointer\",\r\n  padding: \"4px\",\r\n  fontSize: \"16px\",\r\n  color: \"#94a3b8\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nconst bubbleStyle = {\r\n  position: \"absolute\",\r\n  bottom: \"calc(100% + 8px)\",\r\n  left: \"50%\",\r\n  transform: \"translateX(-50%)\",\r\n  backgroundColor: \"rgba(0, 0, 0, 0.75)\",\r\n  color: \"white\",\r\n  padding: \"5px 10px\",\r\n  borderRadius: \"6px\",\r\n  fontSize: \"12px\",\r\n  fontWeight: \"500\",\r\n  whiteSpace: \"nowrap\",\r\n  zIndex: 10,\r\n  pointerEvents: \"none\",\r\n  boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\r\n};\r\n\r\nconst bubbleTailStyle = {\r\n  content: '\"\"',\r\n  position: \"absolute\",\r\n  top: \"100%\",\r\n  left: \"50%\",\r\n  marginLeft: \"-5px\",\r\n  borderWidth: \"5px\",\r\n  borderStyle: \"solid\",\r\n  borderColor: \"rgba(0, 0, 0, 0.75) transparent transparent transparent\",\r\n};\r\n\r\n//   \r\nconst modalOverlayStyle = {\r\n  position: \"fixed\",\r\n  top: 0,\r\n  left: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  zIndex: 10000,\r\n  animation: \"fadeIn 0.3s ease\",\r\n};\r\n\r\nconst modalContentStyle = {\r\n  backgroundColor: \"#1a1a2e\",\r\n  border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n  borderRadius: \"20px\",\r\n  padding: \"40px\",\r\n  maxWidth: \"600px\",\r\n  width: \"90%\",\r\n  boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  animation: \"zoomIn 0.3s ease\",\r\n};\r\n\r\nconst modalTitleStyle = {\r\n  fontSize: \"28px\",\r\n  fontWeight: \"bold\",\r\n  textAlign: \"center\",\r\n  marginBottom: \"10px\",\r\n  color: \"#ffffff\",\r\n  textShadow: \"0 0 10px rgba(0, 255, 242, 0.5)\",\r\n};\r\n\r\nconst modalSubtitleStyle = {\r\n  fontSize: \"16px\",\r\n  textAlign: \"center\",\r\n  color: \"#a0a0c0\",\r\n  marginBottom: \"30px\",\r\n};\r\n\r\nconst cardsContainerStyle = {\r\n  display: \"flex\",\r\n  gap: \"20px\",\r\n  justifyContent: \"center\",\r\n  flexWrap: \"wrap\",\r\n};\r\n\r\nconst cardStyle = {\r\n  width: \"200px\",\r\n  height: \"280px\",\r\n  perspective: \"1000px\",\r\n  cursor: \"pointer\",\r\n  transition: \"transform 0.2s ease\",\r\n};\r\n\r\nconst selectedCardStyle = {\r\n  transform: \"scale(1.05)\",\r\n};\r\n\r\nconst cardInnerStyle = {\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  transition: \"transform 0.8s\",\r\n  transformStyle: \"preserve-3d\",\r\n};\r\n\r\nconst cardFrontStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #fff\",\r\n};\r\n\r\nconst cardBackStyle = {\r\n  position: \"absolute\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  backfaceVisibility: \"hidden\",\r\n  backgroundColor: \"#fff\",\r\n  borderRadius: \"15px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  boxShadow: \"0 8px 16px rgba(0, 0, 0, 0.2)\",\r\n  border: \"3px solid #667eea\",\r\n  transform: \"rotateY(180deg)\",\r\n  opacity: 0,\r\n  transition: \"opacity 0.3s ease 0.4s\",\r\n};\r\n\r\nconst cardBackVisibleStyle = {\r\n  opacity: 1,\r\n};\r\n\r\nconst cardIconStyle = {\r\n  fontSize: \"80px\",\r\n  marginBottom: \"20px\",\r\n};\r\n\r\nconst cardTextStyle = {\r\n  fontSize: \"24px\",\r\n  fontWeight: \"bold\",\r\n  color: \"white\",\r\n};\r\n\r\nconst rewardAmountStyle = {\r\n  fontSize: \"36px\",\r\n  fontWeight: \"bold\",\r\n  color: \"#667eea\",\r\n  marginBottom: \"10px\",\r\n};\r\n\r\nconst rewardLabelStyle = {\r\n  fontSize: \"18px\",\r\n  color: \"#666\",\r\n};","//     \r\n\r\n//      ( )\r\nexport const generateJobTaskReward = () => {\r\n  //   (100 ~ 50,000) -    \r\n  const cashRewards = [\r\n    { amount: 50000, weight: 5 },     // 5:  \r\n    { amount: 30000, weight: 10 },    // 3:  \r\n    { amount: 20000, weight: 15 },    // 2:  \r\n    { amount: 10000, weight: 20 },    // 1:  \r\n    { amount: 5000, weight: 18 },     // 5\r\n    { amount: 3000, weight: 12 },     // 3\r\n    { amount: 1000, weight: 10 },     // 1:  \r\n    { amount: 500, weight: 7 },       // 500:  \r\n    { amount: 100, weight: 3 }        // 100:   \r\n  ];\r\n\r\n  //   (1, 3, 5, 10, 20)\r\n  const couponRewards = [\r\n    { amount: 20, weight: 10 },       // 20: 10%\r\n    { amount: 10, weight: 20 },       // 10: 20%\r\n    { amount: 5, weight: 20 },        // 5: 20%\r\n    { amount: 3, weight: 20 },        // 3: 20%\r\n    { amount: 1, weight: 30 }         // 1: 30%\r\n  ];\r\n\r\n  //     \r\n  const weightedRandom = (items) => {\r\n    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const item of items) {\r\n      random -= item.weight;\r\n      if (random <= 0) {\r\n        return item.amount;\r\n      }\r\n    }\r\n\r\n    return items[items.length - 1].amount;\r\n  };\r\n\r\n  return {\r\n    cash: weightedRandom(cashRewards),\r\n    coupon: weightedRandom(couponRewards)\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\"; // TaskItem   \r\n\r\n// props jobs   job   \r\nexport default function JobList({\r\n  job, //    (  prop )\r\n  isAdmin, //   (  prop )\r\n  onEditJob, //    ( )\r\n  onDeleteJob, //    ( ) <--  prop \r\n  onAddTask, //      ( )\r\n  onEditTask, //   \r\n  onDeleteTask, //   \r\n  onEarnCoupon, //   \r\n  addJobTaskButtonStyle, // Dashboard    <--  prop \r\n}) {\r\n  // job       ( )\r\n  if (!job) {\r\n    return null;\r\n  }\r\n\r\n  const isMobile = window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div\r\n      key={job.id} //  map   key  X,  \r\n      style={{\r\n        backgroundColor: \"rgba(20, 20, 35, 0.6)\",\r\n        borderRadius: \"10px\",\r\n        border: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        overflow: \"hidden\",\r\n        boxShadow: \"0 4px 15px rgba(0, 0, 0, 0.3)\",\r\n        marginBottom: \"15px\",\r\n        backdropFilter: \"blur(5px)\",\r\n        display: \"flex\", // Flexbox  \r\n        flexDirection: \"column\", //   \r\n        height: \"100%\", //      ( )\r\n      }}\r\n    >\r\n      {/*   -   */}\r\n      <div\r\n        className=\"job-header-container\"\r\n        style={{\r\n          background: \"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)\",\r\n          padding: isMobile ? \"12px 14px\" : \"14px 16px\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          borderBottom: \"1px solid rgba(0, 255, 242, 0.2)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"job-title-text\"\r\n          style={{\r\n            fontWeight: \"700\",\r\n            fontSize: isMobile ? \"15px\" : \"18px\",\r\n            textShadow: \"0 1px 3px rgba(0,0,0,0.2)\",\r\n            letterSpacing: \"-0.01em\",\r\n            color: \"#e8e8ff\", //  \r\n            textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n          }}\r\n        >\r\n          {job.title}\r\n        </div>\r\n        {/*    /  */}\r\n        {isAdmin && (\r\n          <div>\r\n            <button\r\n              onClick={() => onEditJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                marginRight: \"8px\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={() => onDeleteJob(job.id)} // job.id  \r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                cursor: \"pointer\",\r\n                color: \"rgba(255, 255, 255, 0.7)\",\r\n                padding: \"0\",\r\n              }}\r\n              aria-label={`${job.title}  `}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/*    (flex-grow   ) */}\r\n      <div style={{ padding: isMobile ? \"8px\" : \"10px\", flexGrow: 1, overflowY: \"auto\" }}>\r\n        {job.tasks && job.tasks.length > 0 ? (\r\n          job.tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              taskId={task.id}\r\n              jobId={job.id}\r\n              //  task.id  \r\n              onEarnCoupon={onEarnCoupon}\r\n              onEditTask={() => onEditTask(task.id, job.id)} // Dashboard    job.id \r\n              onDeleteTask={() => onDeleteTask(task.id, job.id)} // Dashboard    job.id \r\n              isAdmin={isAdmin}\r\n              isJobTask={true}\r\n            />\r\n          ))\r\n        ) : (\r\n          <p\r\n            style={{\r\n              fontSize: \"13px\",\r\n              color: \"#9999bb\",\r\n              textAlign: \"center\",\r\n              margin: \"10px 0\",\r\n            }}\r\n          >\r\n              .\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/*      (  ) */}\r\n      {isAdmin && (\r\n        <div style={{ padding: isMobile ? \"8px\" : \"10px\", borderTop: \"1px solid rgba(0, 255, 242, 0.1)\" }}>\r\n          <button\r\n            onClick={onAddTask} // Dashboard job.id    \r\n            // ---       ---\r\n            style={\r\n              addJobTaskButtonStyle || {\r\n                /*   ( ) */ width: \"100%\",\r\n                padding: isMobile ? \"6px\" : \"8px\",\r\n                backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n                border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n                color: \"#00fff2\",\r\n                borderRadius: \"6px\",\r\n                cursor: \"pointer\",\r\n                fontSize: isMobile ? \"12px\" : \"13px\",\r\n                fontWeight: \"500\",\r\n                marginTop: \"0\", //   \r\n                transition: \"all 0.2s ease\",\r\n              }\r\n            }\r\n          >\r\n            +    \r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport TaskItem from \"./TaskItem\";\r\n\r\n// Dashboard      \r\nexport default function CommonTaskList({\r\n  tasks,\r\n  isAdmin,\r\n  onEditTask,\r\n  onDeleteTask,\r\n  onEarnCoupon,\r\n}) {\r\n  // tasks      \r\n  if (!Array.isArray(tasks) || tasks.length === 0) {\r\n    return (\r\n      <div style={{ padding: \"20px\", textAlign: \"center\", color: \"#6b7280\" }}>\r\n        {isAdmin\r\n          ? \"   .   .\"\r\n          : \"      .\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  //  \r\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\n  return (\r\n    <div style={{\r\n      display: \"grid\",\r\n      gridTemplateColumns: isMobile ? \"1fr\" : \"repeat(2, 1fr)\",\r\n      gap: isMobile ? \"8px\" : \"10px\",\r\n    }}>\r\n      {tasks.map((task) => (\r\n        <TaskItem\r\n          key={task.id}\r\n          task={task}\r\n          taskId={task.id}\r\n          onEarnCoupon={onEarnCoupon}\r\n          onEditTask={() => onEditTask(task.id)}\r\n          onDeleteTask={() => onDeleteTask(task.id)}\r\n          isAdmin={isAdmin}\r\n          isJobTask={false}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// src/TransferModal.js\r\n//   : React.memo \r\nimport React, { memo, useMemo } from \"react\";\r\n\r\nconst TransferModal = memo(function TransferModal({\r\n  showTransferModal,\r\n  setShowTransferModal,\r\n  recipients = [],\r\n  transferRecipient,\r\n  setTransferRecipient,\r\n  transferAmount,\r\n  setTransferAmount,\r\n  handleTransfer,\r\n  userId,\r\n  userCash = 0,\r\n}) {\r\n  //  \r\n  const modalOverlayStyle = {\r\n    display: showTransferModal ? \"flex\" : \"none\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    zIndex: 1000,\r\n    padding: \"20px\",\r\n  };\r\n\r\n  const modalContentStyle = {\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"12px\",\r\n    padding: \"30px\",\r\n    maxWidth: \"450px\",\r\n    width: \"100%\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\r\n    position: \"relative\",\r\n  };\r\n\r\n  const closeButtonStyle = {\r\n    position: \"absolute\",\r\n    top: \"15px\",\r\n    right: \"15px\",\r\n    background: \"none\",\r\n    border: \"none\",\r\n    fontSize: \"24px\",\r\n    cursor: \"pointer\",\r\n    color: \"#6b7280\",\r\n    padding: \"0\",\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  };\r\n\r\n  const inputStyle = {\r\n    width: \"100%\",\r\n    padding: \"10px 12px\",\r\n    border: \"1px solid #d1d5db\",\r\n    borderRadius: \"6px\",\r\n    fontSize: \"14px\",\r\n    outline: \"none\",\r\n    transition: \"border-color 0.2s\",\r\n  };\r\n\r\n  const selectStyle = {\r\n    ...inputStyle,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"white\",\r\n  };\r\n\r\n  const labelStyle = {\r\n    display: \"block\",\r\n    marginBottom: \"8px\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    color: \"#374151\",\r\n  };\r\n\r\n  const buttonStyle = {\r\n    padding: \"10px 20px\",\r\n    borderRadius: \"6px\",\r\n    border: \"none\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.2s\",\r\n  };\r\n\r\n  const primaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#4f46e5\",\r\n    color: \"white\",\r\n  };\r\n\r\n  const secondaryButtonStyle = {\r\n    ...buttonStyle,\r\n    backgroundColor: \"#e5e7eb\",\r\n    color: \"#374151\",\r\n    marginRight: \"10px\",\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleTransfer();\r\n  };\r\n\r\n  //     ( )   \r\n  const validRecipients = recipients\r\n    .filter(r => r && r.id && r.id !== userId)\r\n    .sort((a, b) => {\r\n      const nameA = a.name || a.nickname || ` ${a.id.substring(0, 6)}`;\r\n      const nameB = b.name || b.nickname || ` ${b.id.substring(0, 6)}`;\r\n      return nameA.localeCompare(nameB, 'ko');\r\n    });\r\n\r\n  return (\r\n    <div style={modalOverlayStyle} onClick={() => setShowTransferModal(false)}>\r\n      <div style={modalContentStyle} onClick={(e) => e.stopPropagation()}>\r\n        <button\r\n          onClick={() => setShowTransferModal(false)}\r\n          style={closeButtonStyle}\r\n          aria-label=\"\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <h2 style={{ \r\n          fontSize: \"20px\", \r\n          fontWeight: \"600\", \r\n          marginBottom: \"25px\", \r\n          color: \"#1f2937\" \r\n        }}>\r\n           \r\n        </h2>\r\n\r\n        <div style={{ \r\n          backgroundColor: \"#f3f4f6\", \r\n          borderRadius: \"8px\", \r\n          padding: \"12px\", \r\n          marginBottom: \"20px\" \r\n        }}>\r\n          <p style={{ \r\n            fontSize: \"14px\", \r\n            color: \"#4b5563\", \r\n            margin: \"0\" \r\n          }}>\r\n              : <strong style={{ color: \"#1f2937\" }}>\r\n              {userCash.toLocaleString()}\r\n            </strong>\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <select\r\n              value={transferRecipient}\r\n              onChange={(e) => setTransferRecipient(e.target.value)}\r\n              style={selectStyle}\r\n              required\r\n            >\r\n              <option value=\"\">  </option>\r\n              {validRecipients.length > 0 ? (\r\n                validRecipients.map((recipient) => (\r\n                  <option key={recipient.id} value={recipient.id}>\r\n                    {recipient.name || recipient.nickname || ` ${recipient.id.substring(0, 6)}`}\r\n                  </option>\r\n                ))\r\n              ) : (\r\n                <option value=\"\" disabled>\r\n                      \r\n                </option>\r\n              )}\r\n            </select>\r\n            {validRecipients.length === 0 && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                        .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"25px\" }}>\r\n            <label style={labelStyle}>\r\n               \r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={transferAmount}\r\n              onChange={(e) => setTransferAmount(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={inputStyle}\r\n              min=\"1\"\r\n              max={userCash}\r\n              required\r\n            />\r\n            {transferAmount && parseInt(transferAmount) > userCash && (\r\n              <p style={{ \r\n                marginTop: \"8px\", \r\n                fontSize: \"12px\", \r\n                color: \"#ef4444\" \r\n              }}>\r\n                      .\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: \"flex\", \r\n            justifyContent: \"flex-end\", \r\n            paddingTop: \"10px\", \r\n            borderTop: \"1px solid #e5e7eb\" \r\n          }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowTransferModal(false)}\r\n              style={secondaryButtonStyle}\r\n              onMouseOver={(e) => {\r\n                e.target.style.backgroundColor = \"#d1d5db\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.backgroundColor = \"#e5e7eb\";\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              style={primaryButtonStyle}\r\n              disabled={!transferRecipient || !transferAmount || parseInt(transferAmount) > userCash || validRecipients.length === 0}\r\n              onMouseOver={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4338ca\";\r\n                }\r\n              }}\r\n              onMouseOut={(e) => {\r\n                if (!e.target.disabled) {\r\n                  e.target.style.backgroundColor = \"#4f46e5\";\r\n                }\r\n              }}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TransferModal;","// src/services/optimizedFirebaseService.js\r\n// Firebase    \r\n\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"../firebase\";\r\n\r\n// Firebase Functions \r\nconst createOptimizedFunction = (functionName) => {\r\n  const fn = httpsCallable(functions, functionName);\r\n\r\n  return async (data) => {\r\n    try {\r\n      const result = await fn(data);\r\n      if (result.data.success) {\r\n        return result.data;\r\n      } else {\r\n        throw new Error(result.data.message || \"  \");\r\n      }\r\n    } catch (error) {\r\n      console.error(`${functionName} :`, error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n\r\n//  Firebase Functions\r\nexport const optimizedFirebaseService = {\r\n  //      ( )\r\n  getAdminSettingsData: createOptimizedFunction(\"getAdminSettingsData\"),\r\n\r\n  //   \r\n  batchPaySalaries: createOptimizedFunction(\"batchPaySalaries\"),\r\n\r\n  //  ItemContext  ( )\r\n  getItemContextData: createOptimizedFunction(\"getItemContextData\"),\r\n};\r\n\r\n// React Query  \r\nexport const queryKeys = {\r\n  //   \r\n  adminSettings: (classCode, tab) => [\"adminSettings\", classCode, tab],\r\n\r\n  //   \r\n  students: (classCode) => [\"students\", classCode],\r\n\r\n  //   \r\n  salarySettings: (classCode) => [\"salarySettings\", classCode],\r\n\r\n  //    ( )\r\n  systemManagement: () => [\"systemManagement\"],\r\n\r\n  //   \r\n  generalSettings: (classCode) => [\"generalSettings\", classCode],\r\n};\r\n\r\n//   \r\nexport const batchOperations = {\r\n  //      \r\n  updateMultipleStudentJobs: async (updates) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", updates);\r\n  },\r\n\r\n  //     \r\n  saveMultipleSettings: async (settings) => {\r\n    //    Firebase Function  \r\n    console.log(\"  :\", settings);\r\n  },\r\n};\r\n\r\n//   \r\nexport const realtimeOptimizer = {\r\n  //     \r\n  shouldUseRealtime: () => {\r\n    return navigator.onLine && !document.hidden;\r\n  },\r\n\r\n  //     \r\n  getOptimalCacheTime: (dataSize) => {\r\n    if (dataSize < 1000) return 10 * 60 * 1000; // 10\r\n    if (dataSize < 5000) return 5 * 60 * 1000;  // 5\r\n    return 2 * 60 * 1000; // 2\r\n  },\r\n};\r\n\r\n//    ( )\r\nexport const localBackup = {\r\n  save: (key, data) => {\r\n    try {\r\n      localStorage.setItem(`backup_${key}`, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now(),\r\n      }));\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n\r\n  load: (key, maxAge = 60000) => { //  1\r\n    try {\r\n      const backup = localStorage.getItem(`backup_${key}`);\r\n      if (backup) {\r\n        const parsed = JSON.parse(backup);\r\n        if (Date.now() - parsed.timestamp < maxAge) {\r\n          return parsed.data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  clear: (key) => {\r\n    try {\r\n      localStorage.removeItem(`backup_${key}`);\r\n    } catch (error) {\r\n      console.warn(\"   :\", error);\r\n    }\r\n  },\r\n};","// src/SystemMonitoring.js -   \r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { functions } from \"./firebase\";\r\nimport \"./SystemMonitoring.css\";\r\n\r\nconst SystemMonitoring = ({ isSuperAdmin }) => {\r\n  const [systemStatus, setSystemStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [autoRefresh, setAutoRefresh] = useState(false); //   false \r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [errorCount, setErrorCount] = useState(0); //    \r\n\r\n  const getSystemStatus = httpsCallable(functions, \"getSystemStatus\");\r\n  const resolveSystemAlert = httpsCallable(functions, \"resolveSystemAlert\");\r\n\r\n  //   \r\n  const fetchSystemStatus = useCallback(async () => {\r\n    if (!isSuperAdmin) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await getSystemStatus();\r\n      if (result.data.success) {\r\n        setSystemStatus(result.data.data);\r\n        setLastUpdate(new Date());\r\n        setErrorCount(0); //      \r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[SystemMonitoring]   :\", err);\r\n      setError(err.message || \"     .\");\r\n\r\n      //     \r\n      setErrorCount(prev => prev + 1);\r\n\r\n      //  3       \r\n      if (errorCount >= 2) {\r\n        setAutoRefresh(false);\r\n        console.warn(\"[SystemMonitoring]      .\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [isSuperAdmin, getSystemStatus, errorCount]);\r\n\r\n  //   \r\n  const handleResolveAlert = useCallback(\r\n    async (alertId) => {\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await resolveSystemAlert({ alertId });\r\n        if (result.data.success) {\r\n          alert(\" .\");\r\n          //  \r\n          fetchSystemStatus();\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[SystemMonitoring]   :\", err);\r\n        alert(`    : ${err.message}`);\r\n      }\r\n    },\r\n    [resolveSystemAlert, fetchSystemStatus]\r\n  );\r\n\r\n  //  \r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      fetchSystemStatus();\r\n    }\r\n  }, [isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //   (30)\r\n  useEffect(() => {\r\n    if (!autoRefresh || !isSuperAdmin) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchSystemStatus();\r\n    }, 2 * 60 * 1000); //  [] 2 (   30 )\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [autoRefresh, isSuperAdmin, fetchSystemStatus]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (autoRefresh) {\r\n      setErrorCount(0);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  if (!isSuperAdmin) {\r\n    return (\r\n      <div className=\"system-monitoring section-card\">\r\n        <h3>   </h3>\r\n        <p className=\"admin-section-desc\">    .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"system-monitoring section-card\">\r\n      <div className=\"monitoring-header\">\r\n        <h3>   </h3>\r\n        <div className=\"monitoring-controls\">\r\n          <label className=\"auto-refresh-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n            />\r\n            <span>  (30)</span>\r\n          </label>\r\n          <button\r\n            onClick={fetchSystemStatus}\r\n            disabled={loading}\r\n            className=\"refresh-button\"\r\n          >\r\n            {loading ? \"  ...\" : \" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {lastUpdate && (\r\n        <p className=\"last-update\">\r\n           : {lastUpdate.toLocaleTimeString(\"ko-KR\")}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p> {error}</p>\r\n          {errorCount >= 3 && (\r\n            <p style={{ marginTop: \"8px\", fontSize: \"14px\" }}>\r\n                    .      .\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {systemStatus && (\r\n        <>\r\n          {/*    */}\r\n          {systemStatus.message && (\r\n            <div className=\"info-message\" style={{\r\n              padding: \"12px\",\r\n              background: \"#e3f2fd\",\r\n              border: \"1px solid #90caf9\",\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"15px\",\r\n              color: \"#1976d2\"\r\n            }}>\r\n              <p style={{ margin: 0 }}> {systemStatus.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          <div className=\"system-health-card\">\r\n            <h4> </h4>\r\n            <div className={`health-indicator health-${systemStatus.health}`}>\r\n              <span className=\"health-icon\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n              <span className=\"health-text\">\r\n                {systemStatus.health === \"healthy\"\r\n                  ? \"\"\r\n                  : systemStatus.health === \"warning\"\r\n                  ? \"\"\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">{systemStatus.totalUsers}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"stats-card\">\r\n            <h4> 1 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.errors}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"></span>\r\n                <span className=\"stat-value\">\r\n                  {(systemStatus.stats.lastMinute.errorRate * 100).toFixed(2)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.lastMinute.avgResponseTime.toFixed(0)}ms\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*    */}\r\n          {systemStatus.anomalies && systemStatus.anomalies.length > 0 && (\r\n            <div className=\"anomalies-card\">\r\n              <h4>   </h4>\r\n              <div className=\"anomalies-list\">\r\n                {systemStatus.anomalies.map((anomaly, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`anomaly-item anomaly-${anomaly.severity}`}\r\n                  >\r\n                    <div className=\"anomaly-header\">\r\n                      <span className=\"anomaly-severity\">\r\n                        {anomaly.severity === \"critical\"\r\n                          ? \" \"\r\n                          : anomaly.severity === \"error\"\r\n                          ? \" \"\r\n                          : \" \"}\r\n                      </span>\r\n                      <span className=\"anomaly-type\">{anomaly.type}</span>\r\n                    </div>\r\n                    <p className=\"anomaly-message\">{anomaly.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*   */}\r\n          {systemStatus.alerts && systemStatus.alerts.length > 0 && (\r\n            <div className=\"alerts-card\">\r\n              <h4>   ({systemStatus.alerts.length})</h4>\r\n              <div className=\"alerts-list\">\r\n                {systemStatus.alerts.map((alert) => {\r\n                  const alertTime = alert.timestamp?.toDate\r\n                    ? alert.timestamp.toDate()\r\n                    : new Date(alert.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`alert-item alert-${alert.severity}`}\r\n                    >\r\n                      <div className=\"alert-header\">\r\n                        <span className=\"alert-time\">\r\n                          {alertTime.toLocaleString(\"ko-KR\")}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => handleResolveAlert(alert.id)}\r\n                          className=\"resolve-alert-button\"\r\n                        >\r\n                          \r\n                        </button>\r\n                      </div>\r\n                      <p className=\"alert-message\">{alert.message}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*    */}\r\n          {systemStatus.errorLogs && systemStatus.errorLogs.length > 0 && (\r\n            <div className=\"error-logs-card\">\r\n              <h4>    (1)</h4>\r\n              <div className=\"error-logs-list\">\r\n                {systemStatus.errorLogs.slice(0, 10).map((log) => {\r\n                  const logTime = log.timestamp?.toDate\r\n                    ? log.timestamp.toDate()\r\n                    : new Date(log.timestamp?.seconds * 1000 || Date.now());\r\n\r\n                  return (\r\n                    <div key={log.id} className=\"error-log-item\">\r\n                      <span className=\"log-time\">\r\n                        {logTime.toLocaleTimeString(\"ko-KR\")}\r\n                      </span>\r\n                      <span className=\"log-message\">\r\n                        {log.message || \"   \"}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/*  5  */}\r\n          <div className=\"stats-card\">\r\n            <h4> 5 </h4>\r\n            <div className=\"stats-grid\">\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.reads.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\">  </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.writes.toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"stat-item\">\r\n                <span className=\"stat-label\"> </span>\r\n                <span className=\"stat-value\">\r\n                  {systemStatus.stats.last5Minutes.errors}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!systemStatus && !loading && !error && (\r\n        <div className=\"no-data-message\">\r\n          <p>      .</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemMonitoring;\r\n","// src/AdminSettingsModal.js\r\n// ========================================\r\n//     v2.0\r\n// ========================================\r\n//  :\r\n// - isSuperAdmin ( ):   ,   ,   \r\n// - isAdmin ():   , //// \r\n// ========================================\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport {\r\n  db,\r\n  functions,\r\n  firebaseDoc,\r\n  firebaseCollection,\r\n  firebaseGetSingleDoc,\r\n  firebaseUpdateDoc,\r\n  firebaseSetDoc,\r\n  firebaseGetDocs,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  query as firebaseQuery,\r\n  where as firebaseWhere,\r\n} from \"../../firebase\";\r\n\r\n//   \r\nimport {\r\n  useOptimizedAdminSettings,\r\n  useOptimizedStudents,\r\n  useOptimizedSalarySettings,\r\n  useOptimizedSystemManagement,\r\n  useBatchPaySalaries,\r\n  useAdminDataPreloader,\r\n} from \"../../hooks/useOptimizedAdminData\";\r\n\r\n//   \r\nimport SystemMonitoring from \"../../SystemMonitoring\";\r\n\r\n//   \r\nimport AdminDatabase from \"../../pages/admin/AdminDatabase\";\r\n\r\n//     \r\nconst initialStocks = [\r\n  { id: 'KP', name: ' ', price: 10000, history: [{ price: 10000, timestamp: new Date() }] },\r\n  { id: 'SS', name: '', price: 80000, history: [{ price: 80000, timestamp: new Date() }] },\r\n  { id: 'LG', name: 'LG', price: 350000, history: [{ price: 350000, timestamp: new Date() }] },\r\n  { id: 'SK', name: 'SK', price: 230000, history: [{ price: 230000, timestamp: new Date() }] },\r\n];\r\n\r\nconst AdminSettingsModal = ({\r\n  isAdmin,\r\n  isSuperAdmin,\r\n  userClassCode,\r\n  showAdminSettingsModal,\r\n  setShowAdminSettingsModal,\r\n  adminSelectedMenu,\r\n  setAdminSelectedMenu,\r\n\r\n  //    props\r\n  newGoalAmount,\r\n  setNewGoalAmount,\r\n  adminCouponValue,\r\n  setAdminCouponValue,\r\n  handleSaveAdminSettings,\r\n\r\n  //    props\r\n  jobs,\r\n  adminNewJobTitle,\r\n  setAdminNewJobTitle,\r\n  adminEditingJob,\r\n  setAdminEditingJob,\r\n  handleSaveJob,\r\n  handleDeleteJob,\r\n  handleEditJob,\r\n\r\n  //    props\r\n  commonTasks,\r\n  showAddTaskForm,\r\n  setShowAddTaskForm,\r\n  adminNewTaskName,\r\n  setAdminNewTaskName,\r\n  adminNewTaskReward,\r\n  setAdminNewTaskReward,\r\n  adminNewTaskMaxClicks,\r\n  setAdminNewTaskMaxClicks,\r\n  adminEditingTask,\r\n  setAdminEditingTask,\r\n  handleSaveTask,\r\n  handleEditTask,\r\n  handleDeleteTask,\r\n  taskFormJobId,\r\n  taskFormIsJobTask,\r\n  handleAddTaskClick,\r\n\r\n  //     props\r\n  classCodes = [],\r\n  onAddClassCode,\r\n  onRemoveClassCode,\r\n}) => {\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [classCodeOperationLoading, setClassCodeOperationLoading] =\r\n    useState(false);\r\n  const [classMembers, setClassMembers] = useState([]);\r\n  const [membersLoading, setMembersLoading] = useState(false);\r\n  const [showEditStudentJobsModal, setShowEditStudentJobsModal] =\r\n    useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [tempSelectedJobIds, setTempSelectedJobIds] = useState([]);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(false);\r\n  const [appLoading, setAppLoading] = useState(false);\r\n  const [isPayingSalary, setIsPayingSalary] = useState(false);\r\n  const [lastSalaryPaidDate, setLastSalaryPaidDate] = useState(null);\r\n  const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n  const [selectAllStudents, setSelectAllStudents] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n  const [depositProducts, setDepositProducts] = useState([]);\r\n  const [savingProducts, setSavingProducts] = useState([]);\r\n  const [loanProducts, setLoanProducts] = useState([]);\r\n  const [newProductName, setNewProductName] = useState(\"\");\r\n  const [newProductPeriod, setNewProductPeriod] = useState(\"\");\r\n  const [newProductRate, setNewProductRate] = useState(\"\");\r\n  const [financialSubTab, setFinancialSubTab] = useState(\"deposit\");\r\n  const [financialMessage, setFinancialMessage] = useState(null);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [marketStatus, setMarketStatus] = useState({ isOpen: false });\r\n  const [marketMessage, setMarketMessage] = useState('');\r\n  const [isMarketDataLoaded, setIsMarketDataLoaded] = useState(false);\r\n  const marketStatusCache = useRef(null);\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n  const [parkingInterestRate, setParkingInterestRate] = useState(0.1);\r\n  const [newInterestRate, setNewInterestRate] = useState(\"\");\r\n  const [parkingMessage, setParkingMessage] = useState(null);\r\n\r\n  // Firebase Functions\r\n  const toggleMarketManually = httpsCallable(functions, 'toggleMarketManually');\r\n\r\n  //   \r\n  const [salarySettings, setSalarySettings] = useState({\r\n    taxRate: 0.1, // 10% \r\n    salaryIncreaseRate: 0.03, // 3%   \r\n  });\r\n  const [tempTaxRate, setTempTaxRate] = useState(\"10\");\r\n  const [tempSalaryIncreaseRate, setTempSalaryIncreaseRate] = useState(\"3\");\r\n  const [salarySettingsLoading, setSalarySettingsLoading] = useState(false);\r\n\r\n  //   \r\n  const studentsQuery = useOptimizedStudents();\r\n  const salarySettingsQuery = useOptimizedSalarySettings();\r\n  const systemManagementQuery = useOptimizedSystemManagement();\r\n  const generalSettingsQuery = useOptimizedAdminSettings(\"generalSettings\");\r\n  const batchPaySalariesMutation = useBatchPaySalaries();\r\n  const { preloadAdminData } = useAdminDataPreloader();\r\n\r\n  //   \r\n  const loadSalarySettings = useCallback(async () => {\r\n    if (!db) return;\r\n\r\n    try {\r\n      //    ,    \r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const settingsSnap = await firebaseGetSingleDoc(classSettingsRef);\r\n      \r\n      if (settingsSnap.exists()) {\r\n        const data = settingsSnap.data();\r\n        const settings = {\r\n          taxRate: data.taxRate || 0.1,\r\n          salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n        };\r\n        setSalarySettings(settings);\r\n        setTempTaxRate(String((settings.taxRate * 100).toFixed(1)));\r\n        setTempSalaryIncreaseRate(String((settings.salaryIncreaseRate * 100).toFixed(1)));\r\n        \r\n        if (data.lastPaidDate) {\r\n          setLastSalaryPaidDate(data.lastPaidDate.toDate());\r\n        }\r\n      } else {\r\n        //   \r\n        await firebaseSetDoc(classSettingsRef, {\r\n          taxRate: 0.1,\r\n          salaryIncreaseRate: 0.03,\r\n          lastPaidDate: null,\r\n          classCode: userClassCode || null,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //   \r\n  const handleSaveSalarySettings = useCallback(async () => {\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const taxRateNum = parseFloat(tempTaxRate);\r\n    const increaseRateNum = parseFloat(tempSalaryIncreaseRate);\r\n\r\n    if (isNaN(taxRateNum) || taxRateNum < 0 || taxRateNum > 100) {\r\n      alert(\" 0~100   .\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(increaseRateNum) || increaseRateNum < 0 || increaseRateNum > 100) {\r\n      alert(\"  0~100   .\");\r\n      return;\r\n    }\r\n\r\n    setSalarySettingsLoading(true);\r\n\r\n    try {\r\n      const classSettingsRef = userClassCode\r\n        ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n        : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n      const newSettings = {\r\n        taxRate: taxRateNum / 100,\r\n        salaryIncreaseRate: increaseRateNum / 100,\r\n        classCode: userClassCode || null,\r\n        updatedAt: serverTimestamp(),\r\n      };\r\n\r\n      await firebaseUpdateDoc(classSettingsRef, newSettings);\r\n      setSalarySettings({\r\n        taxRate: newSettings.taxRate,\r\n        salaryIncreaseRate: newSettings.salaryIncreaseRate,\r\n      });\r\n\r\n      alert(\"  .\");\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setSalarySettingsLoading(false);\r\n    }\r\n  }, [db, userClassCode]);\r\n\r\n  //    (  )\r\n  const calculateSalary = useCallback((selectedJobIds, includesTax = false) => {\r\n    if (!Array.isArray(selectedJobIds) || selectedJobIds.length === 0) {\r\n      return { gross: 0, tax: 0, net: 0 };\r\n    }\r\n    \r\n    const baseSalary = 2000000;\r\n    const additionalSalary = 500000;\r\n    const grossSalary = baseSalary + Math.max(0, selectedJobIds.length - 1) * additionalSalary;\r\n    \r\n    if (!includesTax) {\r\n      return grossSalary;\r\n    }\r\n    \r\n    const tax = Math.floor(grossSalary * salarySettings.taxRate);\r\n    const netSalary = grossSalary - tax;\r\n    \r\n    return { gross: grossSalary, tax, net: netSalary };\r\n  }, [salarySettings.taxRate]);\r\n\r\n  //   \r\n  const handleJobEdit = useCallback(\r\n    (job) => {\r\n      console.log(\"[AdminSettingsModal]   :\", job);\r\n      if (handleEditJob && typeof handleEditJob === \"function\") {\r\n        handleEditJob(job);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditJob]\r\n  );\r\n\r\n  //   \r\n  const handleJobDelete = useCallback(\r\n    (jobId) => {\r\n      console.log(\"[AdminSettingsModal]   :\", jobId);\r\n      if (handleDeleteJob && typeof handleDeleteJob === \"function\") {\r\n        handleDeleteJob(jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteJob   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteJob]\r\n  );\r\n\r\n  //   \r\n  const handleTaskEdit = useCallback(\r\n    (task, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        task,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleEditTask && typeof handleEditTask === \"function\") {\r\n        handleEditTask(task, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleEditTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleEditTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskDelete = useCallback(\r\n    (taskId, jobId = null) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        taskId,\r\n        \"jobId:\",\r\n        jobId\r\n      );\r\n      if (handleDeleteTask && typeof handleDeleteTask === \"function\") {\r\n        handleDeleteTask(taskId, jobId);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleDeleteTask   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleDeleteTask]\r\n  );\r\n\r\n  //   \r\n  const handleTaskAdd = useCallback(\r\n    (jobId = null, isJobTask = false) => {\r\n      console.log(\r\n        \"[AdminSettingsModal]   :\",\r\n        jobId,\r\n        \"isJobTask:\",\r\n        isJobTask\r\n      );\r\n      if (handleAddTaskClick && typeof handleAddTaskClick === \"function\") {\r\n        handleAddTaskClick(jobId, isJobTask);\r\n      } else {\r\n        console.error(\r\n          \"[AdminSettingsModal] handleAddTaskClick   .\"\r\n        );\r\n        alert(\"     .\");\r\n      }\r\n    },\r\n    [handleAddTaskClick]\r\n  );\r\n\r\n  //     (Class/students  users   )\r\n  const loadStudents = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\"loadStudents: Firestore   .\");\r\n      setError(\"       .\");\r\n      setStudents([]);\r\n      setStudentsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setStudentsLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      let studentsList = [];\r\n\r\n      if (!isSuperAdmin && !userClassCode) {\r\n        setError(\"        .\");\r\n        setStudents([]);\r\n        setStudentsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 1. Class/{classCode}/students  \r\n      if (!isSuperAdmin && userClassCode) {\r\n        try {\r\n          const classStudentsRef = firebaseCollection(db, \"Class\", userClassCode, \"students\");\r\n          const classStudentsSnapshot = await firebaseGetDocs(classStudentsRef);\r\n\r\n          classStudentsSnapshot.forEach((doc) => {\r\n            const userData = doc.data();\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userClassCode,\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.money || userData.cash || 0, // money  \r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          });\r\n        } catch (classError) {\r\n          // Class     users  \r\n        }\r\n      }\r\n\r\n      // 2. users   (Class      )\r\n      if (studentsList.length === 0) {\r\n        const usersRef = firebaseCollection(db, \"users\");\r\n        let queryRef;\r\n\r\n        if (!isSuperAdmin && userClassCode) {\r\n          queryRef = firebaseQuery(\r\n            usersRef,\r\n            firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n          );\r\n        } else if (isSuperAdmin) {\r\n          queryRef = usersRef;\r\n        }\r\n\r\n        const querySnapshot = await firebaseGetDocs(queryRef);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n          if (!userData.isAdmin && !userData.isSuperAdmin) {\r\n            studentsList.push({\r\n              id: doc.id,\r\n              nickname: userData.nickname || userData.name || \" \",\r\n              name: userData.name || \"\",\r\n              email: userData.email || \"\",\r\n              classCode: userData.classCode || \"\",\r\n              selectedJobIds: userData.selectedJobIds || [],\r\n              cash: userData.cash || 0,\r\n              lastSalaryDate: userData.lastSalaryDate\r\n                ? userData.lastSalaryDate.toDate()\r\n                : null,\r\n              lastGrossSalary: userData.lastGrossSalary || 0,\r\n              lastTaxAmount: userData.lastTaxAmount || 0,\r\n              lastNetSalary: userData.lastNetSalary || 0,\r\n              totalSalaryReceived: userData.totalSalaryReceived || 0,\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setStudents(studentsList);\r\n\r\n      try {\r\n        const classSettingsRef = userClassCode\r\n          ? firebaseDoc(db, \"settings\", `salarySettings_${userClassCode}`)\r\n          : firebaseDoc(db, \"settings\", \"salarySettings\");\r\n        const settingsDoc = await firebaseGetSingleDoc(classSettingsRef);\r\n        if (settingsDoc.exists()) {\r\n          const data = settingsDoc.data();\r\n          setLastSalaryPaidDate(data.lastPaidDate ? data.lastPaidDate.toDate() : null);\r\n          setSalarySettings({\r\n            taxRate: data.taxRate || 0.1,\r\n            salaryIncreaseRate: data.salaryIncreaseRate || 0.03,\r\n          });\r\n        } else {\r\n          setLastSalaryPaidDate(null);\r\n        }\r\n      } catch (settingsError) {\r\n        console.error(\"   :\", settingsError);\r\n        setLastSalaryPaidDate(null);\r\n      }\r\n\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n    } catch (error) {\r\n      console.error(\"loadStudents:    :\", error);\r\n      setError(\"     : \" + error.message);\r\n      setStudents([]);\r\n    } finally {\r\n      setStudentsLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handlePaySalariesToSelected = async () => {\r\n    if (selectedStudentIds.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (\r\n      !window.confirm(\r\n        ` ${selectedStudentIds.length}   ?\\n( ${(currentSalarySettings.taxRate * 100).toFixed(1)}%   )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: selectedStudentIds,\r\n        payAll: false,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n\r\n        //   \r\n        setSelectedStudentIds([]);\r\n        setSelectAllStudents(false);\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handlePaySalariesToAll = async () => {\r\n    const currentStudents = studentsQuery.data?.students || students;\r\n    const currentSalarySettings = salarySettingsQuery.data?.settings || salarySettings;\r\n\r\n    if (!currentStudents || currentStudents.length === 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !window.confirm(\r\n        `    ?\\n(   ,  ${(currentSalarySettings.taxRate * 100).toFixed(1)}% )`\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setIsPayingSalary(true);\r\n\r\n    try {\r\n      const result = await batchPaySalariesMutation.mutateAsync({\r\n        studentIds: [], //     \r\n        payAll: true,\r\n      });\r\n\r\n      if (result.success) {\r\n        const { summary } = result;\r\n        alert(\r\n          `  !\\n${summary.totalStudentsPaid}  \\n : ${(\r\n            summary.totalGrossPaid / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalTaxDeducted / 10000\r\n          ).toFixed(0)}\\n : ${(\r\n            summary.totalNetPaid / 10000\r\n          ).toFixed(0)}`\r\n        );\r\n      } else {\r\n        alert(result.message || \"  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[AdminSettingsModal]     :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setIsPayingSalary(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const loadClassMembers = useCallback(async () => {\r\n    if (!db) {\r\n      console.error(\r\n        \"loadClassMembers: Firestore   .\"\r\n      );\r\n      setError(\r\n        \"        .\"\r\n      );\r\n      setClassMembers([]);\r\n      setMembersLoading(false);\r\n      return;\r\n    }\r\n\r\n    setMembersLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const usersRef = firebaseCollection(db, \"users\");\r\n      let queryRef;\r\n\r\n      if (!isSuperAdmin && userClassCode) {\r\n        queryRef = firebaseQuery(\r\n          usersRef,\r\n          firebaseWhere(\"classCode\", \"==\", userClassCode)\r\n        );\r\n      } else if (isSuperAdmin) {\r\n        queryRef = usersRef;\r\n      } else {\r\n        console.warn(\"    .\");\r\n        setError(\"        .\");\r\n        setClassMembers([]);\r\n        setMembersLoading(false);\r\n        return;\r\n      }\r\n\r\n      const querySnapshot = await firebaseGetDocs(queryRef);\r\n      const usersList = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const userData = doc.data();\r\n        usersList.push({\r\n          id: doc.id,\r\n          name: userData.name || userData.nickname || \" \",\r\n          email: userData.email,\r\n          classCode: userData.classCode || \" \",\r\n          isAdmin: userData.isAdmin || false,\r\n          isSuperAdmin: userData.isSuperAdmin || false,\r\n        });\r\n      });\r\n\r\n      setClassMembers(usersList);\r\n      console.log(\r\n        `[AdminSettingsModal] ${usersList.length}   `\r\n      );\r\n    } catch (error) {\r\n      console.error(\"loadClassMembers:    :\", error);\r\n      setError(\r\n        \"     : \" + error.message\r\n      );\r\n      setClassMembers([]);\r\n    } finally {\r\n      setMembersLoading(false);\r\n    }\r\n  }, [db, isSuperAdmin, userClassCode]);\r\n\r\n  //     \r\n  const handleEditStudentJobs = (student) => {\r\n    setSelectedStudent(student);\r\n    setTempSelectedJobIds(\r\n      Array.isArray(student.selectedJobIds) ? [...student.selectedJobIds] : []\r\n    );\r\n    setShowEditStudentJobsModal(true);\r\n  };\r\n\r\n  //   \r\n  const handleToggleJobSelection = (jobId) => {\r\n    setTempSelectedJobIds((prev) => {\r\n      if (prev.includes(jobId)) {\r\n        return prev.filter((id) => id !== jobId);\r\n      } else {\r\n        return [...prev, jobId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleStudentSelection = (studentId) => {\r\n    setSelectedStudentIds((prev) => {\r\n      if (prev.includes(studentId)) {\r\n        return prev.filter((id) => id !== studentId);\r\n      } else {\r\n        return [...prev, studentId];\r\n      }\r\n    });\r\n  };\r\n\r\n  //   \r\n  const handleToggleSelectAll = () => {\r\n    if (selectAllStudents) {\r\n      setSelectedStudentIds([]);\r\n    } else {\r\n      setSelectedStudentIds(\r\n        students.map((student) => student.id).filter((id) => id != null)\r\n      );\r\n    }\r\n    setSelectAllStudents(!selectAllStudents);\r\n  };\r\n\r\n  //   \r\n  const handleSaveStudentJobs = async () => {\r\n    if (!selectedStudent || !db) {\r\n      alert(\"     \");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n\r\n    try {\r\n      const userRef = firebaseDoc(db, \"users\", selectedStudent.id);\r\n      await firebaseUpdateDoc(userRef, {\r\n        selectedJobIds: tempSelectedJobIds,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n\r\n      setStudents((prevStudents) =>\r\n        prevStudents.map((student) =>\r\n          student.id === selectedStudent.id\r\n            ? { ...student, selectedJobIds: tempSelectedJobIds }\r\n            : student\r\n        )\r\n      );\r\n\r\n      alert(\"   .\");\r\n      setShowEditStudentJobsModal(false);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"     : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  };\r\n\r\n  const adminResetUserPassword = httpsCallable(functions, 'adminResetUserPassword');\r\n\r\n  const handleResetPassword = useCallback(async (userId) => {\r\n    if (!isAdmin && !isSuperAdmin) {\r\n      alert(\"    .\");\r\n      return;\r\n    }\r\n\r\n    const newPassword = prompt(\"  . 6  .\");\r\n\r\n    if (!newPassword || newPassword.length < 6) {\r\n      alert(\" 6  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`(ID: ${userId})   ?`)) {\r\n      try {\r\n        setMembersLoading(true);\r\n        const result = await adminResetUserPassword({ userId, newPassword });\r\n        if (result.data.success) {\r\n          alert(result.data.message);\r\n        } else {\r\n          throw new Error(result.data.message || \"   \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"  :\", error);\r\n        alert(`    : ${error.message}`);\r\n      } finally {\r\n        setMembersLoading(false);\r\n      }\r\n    }\r\n  }, [isAdmin, isSuperAdmin, adminResetUserPassword]);\r\n\r\n  //   \r\n  const toggleAdminStatus = useCallback(\r\n    async (userId, currentStatus) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!isSuperAdmin) {\r\n        alert(\"    /  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        window.confirm(\r\n          `    ${\r\n            currentStatus ? \"\" : \"\"\r\n          }?`\r\n        )\r\n      ) {\r\n        setMembersLoading(true);\r\n\r\n        try {\r\n          const userRef = firebaseDoc(db, \"users\", userId);\r\n          await firebaseUpdateDoc(userRef, { isAdmin: !currentStatus });\r\n\r\n          setClassMembers((prevMembers) =>\r\n            prevMembers.map((member) =>\r\n              member.id === userId\r\n                ? { ...member, isAdmin: !currentStatus }\r\n                : member\r\n            )\r\n          );\r\n\r\n          alert(`  ${!currentStatus ? \"\" : \"\"}.`);\r\n        } catch (error) {\r\n          console.error(\"   :\", error);\r\n          alert(\"     .\");\r\n        } finally {\r\n          setMembersLoading(false);\r\n        }\r\n      }\r\n    },\r\n    [db, isSuperAdmin]\r\n  );\r\n\r\n  // ========================================\r\n  //    \r\n  // ========================================\r\n\r\n  //   \r\n  const loadFinancialProducts = useCallback(() => {\r\n    try {\r\n      const savedDeposit = localStorage.getItem(\"depositProducts\");\r\n      const savedSaving = localStorage.getItem(\"savingProducts\");\r\n      const savedLoan = localStorage.getItem(\"loanProducts\");\r\n\r\n      if (savedDeposit) setDepositProducts(JSON.parse(savedDeposit));\r\n      if (savedSaving) setSavingProducts(JSON.parse(savedSaving));\r\n      if (savedLoan) setLoanProducts(JSON.parse(savedLoan));\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleAddProduct = useCallback(() => {\r\n    if (!newProductName || newProductName.trim() === \"\") {\r\n      setFinancialMessage({ type: \"error\", text: \" .\" });\r\n      return;\r\n    }\r\n    if (!newProductPeriod || isNaN(newProductPeriod) || parseInt(newProductPeriod) <= 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n    if (!newProductRate || isNaN(newProductRate) || parseFloat(newProductRate) < 0) {\r\n      setFinancialMessage({ type: \"error\", text: \"  .\" });\r\n      return;\r\n    }\r\n\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: newProductName.trim(),\r\n      period: parseInt(newProductPeriod),\r\n      rate: parseFloat(newProductRate),\r\n    };\r\n\r\n    const typeText = financialSubTab === \"deposit\" ? \"\" : financialSubTab === \"saving\" ? \"\" : \"\";\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (financialSubTab === \"deposit\") {\r\n      updatedProducts = [...depositProducts, newProduct];\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (financialSubTab === \"saving\") {\r\n      updatedProducts = [...savingProducts, newProduct];\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (financialSubTab === \"loan\") {\r\n      updatedProducts = [...loanProducts, newProduct];\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setNewProductName(\"\");\r\n    setNewProductPeriod(\"\");\r\n    setNewProductRate(\"\");\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [newProductName, newProductPeriod, newProductRate, financialSubTab, depositProducts, savingProducts, loanProducts]);\r\n\r\n  //   \r\n  const handleDeleteProduct = useCallback((id, type) => {\r\n    const typeText = type === \"deposit\" ? \"\" : type === \"saving\" ? \"\" : \"\";\r\n\r\n    if (!window.confirm(` ${typeText}  ?`)) return;\r\n\r\n    let updatedProducts = [];\r\n    let storageKey = \"\";\r\n\r\n    if (type === \"deposit\") {\r\n      updatedProducts = depositProducts.filter((p) => p.id !== id);\r\n      setDepositProducts(updatedProducts);\r\n      storageKey = \"depositProducts\";\r\n    } else if (type === \"saving\") {\r\n      updatedProducts = savingProducts.filter((p) => p.id !== id);\r\n      setSavingProducts(updatedProducts);\r\n      storageKey = \"savingProducts\";\r\n    } else if (type === \"loan\") {\r\n      updatedProducts = loanProducts.filter((p) => p.id !== id);\r\n      setLoanProducts(updatedProducts);\r\n      storageKey = \"loanProducts\";\r\n    }\r\n\r\n    localStorage.setItem(storageKey, JSON.stringify(updatedProducts));\r\n    setFinancialMessage({ type: \"success\", text: `${typeText}  .` });\r\n    setTimeout(() => setFinancialMessage(null), 3000);\r\n  }, [depositProducts, savingProducts, loanProducts]);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const fetchMarketStatus = useCallback(async (forceRefresh = false) => {\r\n    if (!userClassCode) return;\r\n\r\n    //  \r\n    if (!forceRefresh && marketStatusCache.current && isMarketDataLoaded) {\r\n      setMarketStatus(marketStatusCache.current);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const marketStatusRef = doc(db, `ClassStock/${userClassCode}/marketStatus/status`);\r\n      const docSnap = await getDoc(marketStatusRef);\r\n\r\n      let statusData;\r\n      if (docSnap.exists()) {\r\n        statusData = docSnap.data();\r\n      } else {\r\n        statusData = { isOpen: false };\r\n        await setDoc(marketStatusRef, statusData);\r\n      }\r\n\r\n      marketStatusCache.current = statusData;\r\n      setMarketStatus(statusData);\r\n      setIsMarketDataLoaded(true);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(\"    .\");\r\n    }\r\n  }, [userClassCode, isMarketDataLoaded]);\r\n\r\n  //  / \r\n  const handleMarketControl = useCallback(async (newIsOpenState) => {\r\n    const actionText = newIsOpenState ? ' ' : ' ';\r\n    if (!window.confirm(`  '${actionText}'  ?`)) return;\r\n\r\n    try {\r\n      //  \r\n      const optimisticStatus = { isOpen: newIsOpenState };\r\n      setMarketStatus(optimisticStatus);\r\n      marketStatusCache.current = optimisticStatus;\r\n\r\n      const result = await toggleMarketManually({\r\n        classCode: userClassCode,\r\n        isOpen: newIsOpenState\r\n      });\r\n\r\n      setMarketMessage(result.data.message);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n\r\n      // \r\n      if (marketStatusCache.current) {\r\n        setMarketStatus(marketStatusCache.current);\r\n      } else {\r\n        fetchMarketStatus(true);\r\n      }\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, [userClassCode, toggleMarketManually, fetchMarketStatus]);\r\n\r\n  //   \r\n  const handleInitializeStocks = useCallback(async () => {\r\n    if (!window.confirm(\"     ?     .\")) return;\r\n\r\n    try {\r\n      const batch = writeBatch(db);\r\n\r\n      initialStocks.forEach((stock) => {\r\n        const stockRef = doc(db, \"CentralStocks\", stock.id);\r\n        batch.set(stockRef, stock);\r\n      });\r\n\r\n      await batch.commit();\r\n      alert(\"   .\");\r\n      setMarketMessage(\"   .\");\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      setMarketMessage(` : ${error.message}`);\r\n    }\r\n    setTimeout(() => setMarketMessage(''), 5000);\r\n  }, []);\r\n\r\n  // ========================================\r\n  //   \r\n  // ========================================\r\n\r\n  //   \r\n  const loadParkingRate = useCallback(() => {\r\n    const savedRate = localStorage.getItem(\"parkingInterestRate\");\r\n    if (savedRate) {\r\n      setParkingInterestRate(parseFloat(savedRate));\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const handleParkingRateChange = useCallback(() => {\r\n    if (!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0) {\r\n      setParkingMessage({ type: \"error\", text: \"   (0 ).\" });\r\n      return;\r\n    }\r\n\r\n    const rate = parseFloat(newInterestRate);\r\n    setParkingInterestRate(rate);\r\n    localStorage.setItem(\"parkingInterestRate\", rate.toString());\r\n\r\n    setParkingMessage({ type: \"success\", text: `    ${rate}% .` });\r\n    setNewInterestRate(\"\");\r\n    setTimeout(() => setParkingMessage(null), 3000);\r\n  }, [newInterestRate]);\r\n\r\n  //   \r\n  const handleAddClassCode = useCallback(async () => {\r\n    if (!onAddClassCode || typeof onAddClassCode !== \"function\") {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const codeToAdd = newClassCode.trim();\r\n    if (!codeToAdd) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setClassCodeOperationLoading(true);\r\n\r\n    try {\r\n      const success = await onAddClassCode(codeToAdd);\r\n      if (success) {\r\n        setNewClassCode(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"AdminSettingsModal:     :\", error);\r\n    } finally {\r\n      setClassCodeOperationLoading(false);\r\n    }\r\n  }, [newClassCode, onAddClassCode]);\r\n\r\n  //   \r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!onRemoveClassCode || typeof onRemoveClassCode !== \"function\") {\r\n        alert(\"      .\");\r\n        return;\r\n      }\r\n\r\n      setClassCodeOperationLoading(true);\r\n\r\n      try {\r\n        await onRemoveClassCode(codeToRemove);\r\n      } catch (error) {\r\n        console.error(\"AdminSettingsModal:     :\", error);\r\n      } finally {\r\n        setClassCodeOperationLoading(false);\r\n      }\r\n    },\r\n    [onRemoveClassCode]\r\n  );\r\n\r\n  //   \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal) {\r\n      //   (   )\r\n      preloadAdminData();\r\n      setError(\"\");\r\n\r\n      //      \r\n      loadFinancialProducts();\r\n      loadParkingRate();\r\n    }\r\n\r\n    if (!showAdminSettingsModal) {\r\n      setNewClassCode(\"\");\r\n      setClassMembers([]);\r\n      setStudents([]);\r\n      setSelectedStudent(null);\r\n      setTempSelectedJobIds([]);\r\n      setShowEditStudentJobsModal(false);\r\n      setLastSalaryPaidDate(null);\r\n      setSelectedStudentIds([]);\r\n      setSelectAllStudents(false);\r\n      setClassCodeOperationLoading(false);\r\n      setMembersLoading(false);\r\n      setStudentsLoading(false);\r\n      setAppLoading(false);\r\n      setError(\"\");\r\n      // //  \r\n      setFinancialMessage(null);\r\n      setMarketMessage('');\r\n      setParkingMessage(null);\r\n    }\r\n  }, [\r\n    showAdminSettingsModal,\r\n    adminSelectedMenu,\r\n    loadClassMembers,\r\n    loadStudents,\r\n    loadSalarySettings,\r\n    loadFinancialProducts,\r\n    loadParkingRate,\r\n  ]);\r\n\r\n  //        \r\n  useEffect(() => {\r\n    if (showAdminSettingsModal && adminSelectedMenu === 'marketControl') {\r\n      fetchMarketStatus();\r\n    }\r\n  }, [showAdminSettingsModal, adminSelectedMenu, fetchMarketStatus]);\r\n\r\n  //    \r\n  const formatLastSalaryDate = () => {\r\n    if (!lastSalaryPaidDate) return \"   \";\r\n\r\n    try {\r\n      const date = lastSalaryPaidDate;\r\n      return `${date.getFullYear()} ${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        \"0\"\r\n      )} ${String(date.getDate()).padStart(2, \"0\")} ${String(\r\n        date.getHours()\r\n      ).padStart(2, \"0\")}:${String(date.getMinutes()).padStart(2, \"0\")}`;\r\n    } catch (e) {\r\n      console.error(\"formatLastSalaryDate :\", e);\r\n      return \"  \";\r\n    }\r\n  };\r\n\r\n  if (!showAdminSettingsModal) return null;\r\n\r\n  if (!isAdmin && !isSuperAdmin) {\r\n    return (\r\n      <div className=\"admin-settings-modal show\">\r\n        <div className=\"admin-settings-content\">\r\n          <h2> </h2>\r\n          <p>   .</p>\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-cancel-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`admin-settings-modal ${showAdminSettingsModal ? \"show\" : \"\"}`}\r\n    >\r\n      <div className=\"admin-settings-content\">\r\n        <h2>\r\n           {\" \"}\r\n          {isSuperAdmin && (\r\n            <span className=\"super-admin-badge\">( )</span>\r\n          )}\r\n        </h2>\r\n        {!isSuperAdmin && userClassCode && (\r\n          <p className=\"admin-class-info\"> : {userClassCode}</p>\r\n        )}\r\n\r\n        {/* ========================================\r\n               v2.0\r\n            - (isSuperAdmin):    \r\n            - (isAdmin):       \r\n            ======================================== */}\r\n        <div className=\"admin-menu-tabs\" style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', padding: '16px', background: 'linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)', borderRadius: '16px', border: '1px solid #374151' }}>\r\n          <button\r\n            className={adminSelectedMenu === \"generalSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"generalSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"taskManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"taskManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"jobSettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"jobSettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"studentManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"studentManagement\");\r\n              loadStudents();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"salarySettings\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"salarySettings\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"financialProducts\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"financialProducts\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"marketControl\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"marketControl\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"parkingAccount\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"parkingAccount\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"memberManagement\" ? \"active\" : \"\"}\r\n            onClick={() => {\r\n              setAdminSelectedMenu(\"memberManagement\");\r\n              loadClassMembers();\r\n            }}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n             \r\n          </button>\r\n          <button\r\n            className={adminSelectedMenu === \"databaseManagement\" ? \"active\" : \"\"}\r\n            onClick={() => setAdminSelectedMenu(\"databaseManagement\")}\r\n            style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n          >\r\n            \r\n          </button>\r\n          {isSuperAdmin && (\r\n            <button\r\n              className={adminSelectedMenu === \"systemManagement\" ? \"active\" : \"\"}\r\n              onClick={() => setAdminSelectedMenu(\"systemManagement\")}\r\n              style={{ padding: '10px 16px', borderRadius: '16px', fontSize: '13px', whiteSpace: 'nowrap' }}\r\n            >\r\n               \r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"generalSettings\" && (\r\n          <div className=\"general-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-goal-settings section-card\">\r\n              <h3>    </h3>\r\n              <div className=\"form-group\">\r\n                <label>   :</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={newGoalAmount || \"\"}\r\n                  onChange={(e) =>\r\n                    setNewGoalAmount && setNewGoalAmount(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>  ():</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={adminCouponValue || \"\"}\r\n                  onChange={(e) =>\r\n                    setAdminCouponValue && setAdminCouponValue(e.target.value)\r\n                  }\r\n                  className=\"admin-input\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={handleSaveAdminSettings}\r\n                className=\"admin-save-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"taskManagement\" && (\r\n          <div className=\"task-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-tasks-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {showAddTaskForm ? (\r\n                <div className=\"add-task-form\">\r\n                  <h4>{adminEditingTask ? \" \" : \"  \"}</h4>\r\n                  <p>\r\n                    {taskFormIsJobTask && jobs && taskFormJobId\r\n                      ? `: ${\r\n                          jobs.find((j) => j.id === taskFormJobId)?.title ||\r\n                          \"   \"\r\n                        }`\r\n                      : \" \"}\r\n                  </p>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> :</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={adminNewTaskName}\r\n                      onChange={(e) => setAdminNewTaskName(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label> ():</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={adminNewTaskReward}\r\n                      onChange={(e) => setAdminNewTaskReward(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>  :</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={adminNewTaskMaxClicks}\r\n                      onChange={(e) => setAdminNewTaskMaxClicks(e.target.value)}\r\n                      placeholder=\"  \"\r\n                      className=\"admin-input\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"task-form-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\"[AdminSettingsModal]    \");\r\n                        if (\r\n                          handleSaveTask &&\r\n                          typeof handleSaveTask === \"function\"\r\n                        ) {\r\n                          handleSaveTask();\r\n                        } else {\r\n                          console.error(\r\n                            \"[AdminSettingsModal] handleSaveTask   .\"\r\n                          );\r\n                          alert(\"     .\");\r\n                        }\r\n                      }}\r\n                      className=\"admin-save-button\"\r\n                    >\r\n                      {adminEditingTask ? \"\" : \"\"}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddTaskForm(false);\r\n                        setAdminEditingTask(null);\r\n                      }}\r\n                      className=\"admin-cancel-button\"\r\n                    >\r\n                      \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"task-management\">\r\n                  <div className=\"task-management-buttons\">\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(\r\n                          \"[AdminSettingsModal]     \"\r\n                        );\r\n                        handleTaskAdd(null, false);\r\n                      }}\r\n                      className=\"admin-button\"\r\n                    >\r\n                        \r\n                    </button>\r\n                    <select\r\n                      onChange={(e) => {\r\n                        if (e.target.value) {\r\n                          console.log(\r\n                            \"[AdminSettingsModal]    :\",\r\n                            e.target.value\r\n                          );\r\n                          handleTaskAdd(e.target.value, true);\r\n                        }\r\n                      }}\r\n                      className=\"job-select\"\r\n                      value=\"\"\r\n                    >\r\n                      <option value=\"\">  ...</option>\r\n                      {Array.isArray(jobs) &&\r\n                        jobs.map((job) => (\r\n                          <option key={job.id} value={job.id}>\r\n                            {job.title}  \r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"tasks-by-job\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(jobs) && jobs.length > 0 ? (\r\n                      jobs.map((job) => (\r\n                        <div key={job.id} className=\"job-tasks\">\r\n                          <h5>{job.title}</h5>\r\n                          {Array.isArray(job.tasks) && job.tasks.length > 0 ? (\r\n                            <ul className=\"admin-tasks\">\r\n                              {job.tasks.map((task) => (\r\n                                <li key={task.id} className=\"admin-task-item\">\r\n                                  <div className=\"task-info\">\r\n                                    <span className=\"task-name\">{task.name}</span>\r\n                                    <span className=\"task-reward\">\r\n                                      : {task.reward || 0} \r\n                                    </span>\r\n                                    <span className=\"task-clicks\">\r\n                                      : {task.clicks || 0}/\r\n                                      {task.maxClicks || 5}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"task-actions\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskEdit(task, job.id);\r\n                                      }}\r\n                                      className=\"edit-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        console.log(\r\n                                          \"[AdminSettingsModal]     :\",\r\n                                          task.id,\r\n                                          job.id\r\n                                        );\r\n                                        handleTaskDelete(task.id, job.id);\r\n                                      }}\r\n                                      className=\"delete-button\"\r\n                                    >\r\n                                      \r\n                                    </button>\r\n                                  </div>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : (\r\n                            <p className=\"no-items-message\">\r\n                                  .\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"no-items-message\">  .</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/*    */}\r\n                  <div className=\"common-tasks\">\r\n                    <h4> </h4>\r\n                    {Array.isArray(commonTasks) && commonTasks.length > 0 ? (\r\n                      <ul className=\"admin-tasks\">\r\n                        {commonTasks.map((task) => (\r\n                          <li key={task.id} className=\"admin-task-item\">\r\n                            <div className=\"task-info\">\r\n                              <span className=\"task-name\">{task.name}</span>\r\n                              <span className=\"task-reward\">\r\n                                : {task.reward || 0} \r\n                              </span>\r\n                              <span className=\"task-clicks\">\r\n                                : {task.clicks || 0}/{task.maxClicks || 5}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"task-actions\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task\r\n                                  );\r\n                                  handleTaskEdit(task);\r\n                                }}\r\n                                className=\"edit-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log(\r\n                                    \"[AdminSettingsModal]     :\",\r\n                                    task.id\r\n                                  );\r\n                                  handleTaskDelete(task.id);\r\n                                }}\r\n                                className=\"delete-button\"\r\n                              >\r\n                                \r\n                              </button>\r\n                            </div>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"no-items-message\">\r\n                           .\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"jobSettings\" && (\r\n          <div className=\"job-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"admin-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              <div className=\"add-job-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={adminNewJobTitle}\r\n                  onChange={(e) => setAdminNewJobTitle(e.target.value)}\r\n                  placeholder={adminEditingJob ? \" \" : \"  \"}\r\n                  className=\"admin-input\"\r\n                />\r\n                <button\r\n                  onClick={() => {\r\n                    console.log(\"[AdminSettingsModal]    \");\r\n                    if (handleSaveJob && typeof handleSaveJob === \"function\") {\r\n                      handleSaveJob();\r\n                    } else {\r\n                      console.error(\r\n                        \"[AdminSettingsModal] handleSaveJob   .\"\r\n                      );\r\n                      alert(\"     .\");\r\n                    }\r\n                  }}\r\n                  className=\"admin-save-button\"\r\n                >\r\n                  {adminEditingJob ? \"\" : \"\"}\r\n                </button>\r\n                {adminEditingJob && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setAdminEditingJob(null);\r\n                      setAdminNewJobTitle(\"\");\r\n                    }}\r\n                    className=\"admin-cancel-button\"\r\n                  >\r\n                    \r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"jobs-list\">\r\n                <h4>  </h4>\r\n                {jobs && jobs.length > 0 ? (\r\n                  <ul className=\"admin-jobs\">\r\n                    {jobs.map((job) => (\r\n                      <li key={job.id} className=\"admin-job-item\">\r\n                        <span className=\"job-title\">{job.title}</span>\r\n                        <div className=\"job-actions\">\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job\r\n                              );\r\n                              handleJobEdit(job);\r\n                            }}\r\n                            className=\"edit-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              console.log(\r\n                                \"[AdminSettingsModal]    :\",\r\n                                job.id\r\n                              );\r\n                              handleJobDelete(job.id);\r\n                            }}\r\n                            className=\"delete-button\"\r\n                          >\r\n                            \r\n                          </button>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"no-items-message\">  .</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"studentManagement\" && (\r\n          <div className=\"student-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"student-jobs-settings section-card\">\r\n              <h3> </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                   .    \r\n                 .\r\n              </p>\r\n\r\n              <div className=\"salary-management\">\r\n                <div className=\"salary-info\">\r\n                  <h4>  </h4>\r\n                  <p> : 200,  : 50</p>\r\n                  <p>: {(salarySettings.taxRate * 100).toFixed(1)}%</p>\r\n                  <p> : {(salarySettings.salaryIncreaseRate * 100).toFixed(1)}% ()</p>\r\n                  <p>  : {formatLastSalaryDate()}</p>\r\n                  <p className=\"auto-payment-info\">\r\n                       :    8 (  )\r\n                  </p>\r\n                </div>\r\n                <div className=\"salary-buttons\">\r\n                  <button\r\n                    className=\"admin-button pay-salary-button\"\r\n                    onClick={handlePaySalariesToAll}\r\n                    disabled={isPayingSalary || studentsLoading}\r\n                  >\r\n                    {isPayingSalary ? \"  ...\" : \"   \"}\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-button pay-selected-salary-button\"\r\n                    onClick={handlePaySalariesToSelected}\r\n                    disabled={\r\n                      isPayingSalary ||\r\n                      studentsLoading ||\r\n                      selectedStudentIds.length === 0\r\n                    }\r\n                  >\r\n                    {isPayingSalary\r\n                      ? \"  ...\"\r\n                      : ` (${selectedStudentIds.length})  `}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"student-jobs-container\">\r\n                <div className=\"student-list-header\">\r\n                  <h4>\r\n                     {\" \"}\r\n                    {!isSuperAdmin && userClassCode && `(${userClassCode} )`}\r\n                  </h4>\r\n                  <button\r\n                    onClick={loadStudents}\r\n                    className=\"admin-button\"\r\n                    disabled={studentsLoading}\r\n                  >\r\n                    {studentsLoading ? \" ...\" : \"  \"}\r\n                  </button>\r\n                </div>\r\n                {studentsLoading ? (\r\n                  <p>   ...</p>\r\n                ) : students.length > 0 ? (\r\n                  <div className=\"members-table-container\">\r\n                    <table className=\"members-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectAllStudents}\r\n                              onChange={handleToggleSelectAll}\r\n                              disabled={students.length === 0}\r\n                            />\r\n                          </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                          <th> </th>\r\n                          <th> </th>\r\n                          <th></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {students.map((student) => {\r\n                          const salaryCalc = calculateSalary(student.selectedJobIds, true);\r\n                          return (\r\n                            <tr\r\n                              key={student.id}\r\n                              className={\r\n                                selectedStudentIds.includes(student.id)\r\n                                  ? \"selected-student-row\"\r\n                                  : \"\"\r\n                              }\r\n                            >\r\n                              <td>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={selectedStudentIds.includes(student.id)}\r\n                                  onChange={() =>\r\n                                    handleToggleStudentSelection(student.id)\r\n                                  }\r\n                                />\r\n                              </td>\r\n                              <td>\r\n                                {student.nickname || student.name || \" \"}\r\n                              </td>\r\n                              <td>{student.email || \"-\"}</td>\r\n                              <td>{student.classCode || \"\"}</td>\r\n                              <td>\r\n                                {Array.isArray(student.selectedJobIds) &&\r\n                                student.selectedJobIds.length > 0 ? (\r\n                                  student.selectedJobIds\r\n                                    .map((jobId) => {\r\n                                      const job = Array.isArray(jobs)\r\n                                        ? jobs.find((j) => j.id === jobId)\r\n                                        : null;\r\n                                      return job ? job.title : null;\r\n                                    })\r\n                                    .filter(Boolean)\r\n                                    .join(\", \")\r\n                                ) : (\r\n                                  <span className=\"no-jobs\"> </span>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"salary-column\">\r\n                                {`${(salaryCalc.gross / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"tax-column\">\r\n                                {`${(salaryCalc.tax / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"net-salary-column\">\r\n                                {`${(salaryCalc.net / 10000).toFixed(0)}`}\r\n                              </td>\r\n                              <td className=\"cash-column\">\r\n                                {(student.cash || 0).toLocaleString()}\r\n                              </td>\r\n                              <td>\r\n                                {student.lastSalaryDate\r\n                                  ? student.lastSalaryDate.toLocaleDateString()\r\n                                  : \"\"}\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"edit-button\"\r\n                                  onClick={() => handleEditStudentJobs(student)}\r\n                                >\r\n                                   \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                    {!isSuperAdmin && !userClassCode\r\n                      ? \"   .\"\r\n                      : \"  .\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"financialProducts\" && (\r\n          <div className=\"financial-products-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"financial-products-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                , ,    .\r\n              </p>\r\n\r\n              {/*     */}\r\n              <div className=\"financial-sub-tabs\" style={{ display: 'flex', gap: '8px', marginBottom: '16px' }}>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'deposit' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('deposit')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'deposit' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'deposit' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'deposit' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'saving' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('saving')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'saving' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'saving' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'saving' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n                <button\r\n                  className={`sub-tab-button ${financialSubTab === 'loan' ? 'active' : ''}`}\r\n                  onClick={() => setFinancialSubTab('loan')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '8px',\r\n                    border: financialSubTab === 'loan' ? '2px solid #4f46e5' : '1px solid #374151',\r\n                    background: financialSubTab === 'loan' ? '#4f46e5' : 'transparent',\r\n                    color: financialSubTab === 'loan' ? 'white' : '#9ca3af',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {financialMessage && (\r\n                <div className={`message-box ${financialMessage.type}`} style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: financialMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {financialMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*    */}\r\n              <div className=\"add-product-form\" style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '12px', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}></label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newProductName}\r\n                      onChange={(e) => setNewProductName(e.target.value)}\r\n                      placeholder=\" \"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> ()</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductPeriod}\r\n                      onChange={(e) => setNewProductPeriod(e.target.value)}\r\n                      placeholder=\" ()\"\r\n                      min=\"1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{ display: 'block', marginBottom: '4px', color: '#9ca3af', fontSize: '12px' }}> (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newProductRate}\r\n                      onChange={(e) => setNewProductRate(e.target.value)}\r\n                      placeholder=\" (%)\"\r\n                      min=\"0\"\r\n                      step=\"0.1\"\r\n                      className=\"admin-input\"\r\n                      style={{ width: '100%' }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button onClick={handleAddProduct} className=\"admin-save-button\" style={{ width: '100%' }}>\r\n                   \r\n                </button>\r\n              </div>\r\n\r\n              {/*   */}\r\n              <div className=\"product-list\">\r\n                <h4 style={{ marginBottom: '12px', color: 'white' }}>\r\n                  {financialSubTab === 'deposit' ? '' : financialSubTab === 'saving' ? '' : ''}  \r\n                </h4>\r\n                {(() => {\r\n                  const products = financialSubTab === 'deposit' ? depositProducts :\r\n                                   financialSubTab === 'saving' ? savingProducts : loanProducts;\r\n                  if (products.length === 0) {\r\n                    return <p className=\"no-items-message\">  .</p>;\r\n                  }\r\n                  return (\r\n                    <div className=\"members-table-container\">\r\n                      <table className=\"members-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th></th>\r\n                            <th> ()</th>\r\n                            <th> (%)</th>\r\n                            <th></th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                              <td>{product.name}</td>\r\n                              <td>{product.period}</td>\r\n                              <td>{product.rate}%</td>\r\n                              <td>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id, financialSubTab)}\r\n                                  className=\"delete-button\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"marketControl\" && (\r\n          <div className=\"market-control-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"market-control-settings section-card\">\r\n              <h3>  </h3>\r\n              <p className=\"admin-section-desc\">\r\n                  /   .\r\n              </p>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                  <p style={{ color: 'white' }}>\r\n                     :{\" \"}\r\n                    <span style={{\r\n                      fontWeight: 'bold',\r\n                      color: marketStatus.isOpen ? '#22c55e' : '#ef4444',\r\n                      padding: '4px 12px',\r\n                      borderRadius: '16px',\r\n                      background: marketStatus.isOpen ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\r\n                    }}>\r\n                      {marketStatus.isOpen ? ' ' : ' '}\r\n                    </span>\r\n                  </p>\r\n                  <button\r\n                    onClick={() => fetchMarketStatus(true)}\r\n                    className=\"admin-button\"\r\n                    disabled={!userClassCode}\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px', marginBottom: '16px' }}>\r\n                  <button\r\n                    onClick={() => handleMarketControl(true)}\r\n                    disabled={marketStatus.isOpen}\r\n                    className=\"admin-save-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: marketStatus.isOpen ? '#374151' : '#22c55e',\r\n                      cursor: marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleMarketControl(false)}\r\n                    disabled={!marketStatus.isOpen}\r\n                    className=\"admin-cancel-button\"\r\n                    style={{\r\n                      flex: 1,\r\n                      background: !marketStatus.isOpen ? '#374151' : '#ef4444',\r\n                      cursor: !marketStatus.isOpen ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af' }}>\r\n                          .<br />\r\n                   / (-,  8/ 3)    .\r\n                </p>\r\n              </div>\r\n\r\n              {/*  */}\r\n              {marketMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: '#d97706',\r\n                  color: 'white',\r\n                  textAlign: 'center'\r\n                }}>\r\n                  {marketMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(239, 68, 68, 0.1)',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(239, 68, 68, 0.3)'\r\n              }}>\r\n                <h4 style={{ marginBottom: '12px', color: '#ef4444' }}>   </h4>\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '12px' }}>\r\n                  :          .     .\r\n                </p>\r\n                <button\r\n                  onClick={handleInitializeStocks}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    background: '#ea580c',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '600'\r\n                  }}\r\n                >\r\n                     \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n                ( )\r\n            ======================================== */}\r\n        {adminSelectedMenu === \"parkingAccount\" && (\r\n          <div className=\"parking-account-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"parking-account-settings section-card\">\r\n              <h3>   </h3>\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n              </p>\r\n\r\n              {/*  */}\r\n              {parkingMessage && (\r\n                <div style={{\r\n                  padding: '12px',\r\n                  marginBottom: '16px',\r\n                  borderRadius: '8px',\r\n                  background: parkingMessage.type === 'success' ? '#065f46' : '#991b1b',\r\n                  color: 'white'\r\n                }}>\r\n                  {parkingMessage.text}\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                padding: '16px',\r\n                background: 'rgba(55, 65, 81, 0.5)',\r\n                borderRadius: '12px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <p style={{ color: '#9ca3af', fontSize: '14px' }}>  </p>\r\n                  <p style={{ color: '#22c55e', fontSize: '32px', fontWeight: 'bold' }}>\r\n                    {parkingInterestRate}%\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label style={{ display: 'block', marginBottom: '8px', color: '#9ca3af' }}>\r\n                       (%)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newInterestRate}\r\n                    onChange={(e) => setNewInterestRate(e.target.value)}\r\n                    placeholder=\"   (%)\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"admin-input\"\r\n                    style={{ marginBottom: '12px' }}\r\n                  />\r\n                  <button\r\n                    onClick={handleParkingRateChange}\r\n                    className=\"admin-save-button\"\r\n                    disabled={!newInterestRate || isNaN(newInterestRate) || parseFloat(newInterestRate) < 0}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                <p style={{ fontSize: '12px', color: '#9ca3af', marginTop: '12px' }}>\r\n                          .\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ========================================\r\n               -  (    )\r\n            ======================================== */}\r\n\r\n        {/*     */}\r\n        {adminSelectedMenu === \"memberManagement\" && (\r\n          <div className=\"member-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"admin-class-members-container section-card\">\r\n              <h3>  </h3>\r\n              {error && <p className=\"error-message\">{error}</p>}\r\n              <p className=\"admin-section-desc\">\r\n                    .\r\n                {isSuperAdmin && \"        .\"}\r\n              </p>\r\n\r\n              {membersLoading ? (\r\n                <p>   ...</p>\r\n              ) : classMembers.length > 0 ? (\r\n                <div className=\"user-cards-container\">\r\n                  {classMembers.map((member) => (\r\n                    <div key={member.id} className=\"user-card\">\r\n                      <div className=\"user-card-header\">\r\n                        <span className=\"user-card-name\">{member.name}</span>\r\n                        <span className={`user-card-role role-${member.isSuperAdmin ? 'super' : member.isAdmin ? 'admin' : 'student'}`}>\r\n                          {member.isSuperAdmin\r\n                            ? \" \"\r\n                            : member.isAdmin\r\n                            ? \"\"\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"user-card-body\">\r\n                        <p><strong>:</strong> {member.email}</p>\r\n                        <p><strong> :</strong> {member.classCode}</p>\r\n                      </div>\r\n                      {isSuperAdmin && (\r\n                        <div className=\"user-card-actions\">\r\n                          {!member.isSuperAdmin && (\r\n                            <button\r\n                              onClick={() =>\r\n                                toggleAdminStatus(member.id, member.isAdmin)\r\n                              }\r\n                              className={`admin-action-button ${\r\n                                member.isAdmin\r\n                                  ? \"remove-admin-button\"\r\n                                  : \"add-admin-button\"\r\n                              }`}\r\n                              disabled={membersLoading}\r\n                            >\r\n                              {member.isAdmin ? \" \" : \" \"}\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleResetPassword(member.id)}\r\n                            className=\"admin-action-button reset-password-button\"\r\n                            disabled={membersLoading}\r\n                          >\r\n                             \r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <p className=\"no-members-message\">\r\n                  {!isSuperAdmin && !userClassCode\r\n                    ? \"   .\"\r\n                    : \"   .\"}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"refresh-members-section\">\r\n                <button\r\n                  onClick={loadClassMembers}\r\n                  className=\"admin-button\"\r\n                  disabled={membersLoading}\r\n                >\r\n                  {membersLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"salarySettings\" && (\r\n          <div className=\"salary-settings-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            {/*    */}\r\n            <div className=\"salary-settings section-card\">\r\n              <h3> </h3>\r\n              <p className=\"admin-section-desc\">\r\n                   .       8 .\r\n              </p>\r\n\r\n              <div className=\"salary-settings-form\">\r\n                <div className=\"form-group\">\r\n                  <label> (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempTaxRate}\r\n                    onChange={(e) => setTempTaxRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 10 (10%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                        .\r\n                  </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>  (%):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    value={tempSalaryIncreaseRate}\r\n                    onChange={(e) => setTempSalaryIncreaseRate(e.target.value)}\r\n                    className=\"admin-input\"\r\n                    placeholder=\": 3 (3%)\"\r\n                  />\r\n                  <small className=\"form-help\">\r\n                         .\r\n                  </small>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={handleSaveSalarySettings}\r\n                  className=\"admin-save-button\"\r\n                  disabled={salarySettingsLoading}\r\n                >\r\n                  {salarySettingsLoading ? \" ...\" : \"  \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"current-salary-settings\">\r\n                <h4>  </h4>\r\n                <div className=\"settings-display\">\r\n                  <p> : <strong>{(salarySettings.taxRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{(salarySettings.salaryIncreaseRate * 100).toFixed(1)}%</strong></p>\r\n                  <p>  : <strong>{formatLastSalaryDate()}</strong></p>\r\n                </div>\r\n                \r\n                <div className=\"salary-calculation-example\">\r\n                  <h5>  </h5>\r\n                  <p>  1:  200   {(2000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  2:  250   {(2500000 * salarySettings.taxRate / 10000).toFixed(0)}    {((2500000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                  <p>  3:  300   {(3000000 * salarySettings.taxRate / 10000).toFixed(0)}    {((3000000 * (1 - salarySettings.taxRate)) / 10000).toFixed(0)}</p>\r\n                </div>\r\n                \r\n                <div className=\"auto-payment-info\">\r\n                  <h5>   </h5>\r\n                  <p>    8    .</p>\r\n                  <p>      .</p>\r\n                  <p>     .</p>\r\n                  <p>     .</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"databaseManagement\" && (\r\n          <div className=\"database-management-tab\">\r\n            {!isSuperAdmin && userClassCode && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">   : <strong>{userClassCode}</strong></p>\r\n              </div>\r\n            )}\r\n            <div className=\"database-management-container section-card\" style={{ minHeight: \"500px\", maxHeight: \"70vh\", overflow: \"auto\" }}>\r\n              <AdminDatabase />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/*    */}\r\n        {adminSelectedMenu === \"systemManagement\" && (\r\n          <div className=\"system-management-tab\">\r\n            {isSuperAdmin && (\r\n              <div className=\"class-info-header\">\r\n                <p className=\"current-class-info\">    ( )</p>\r\n              </div>\r\n            )}\r\n            {/*     */}\r\n            {isSuperAdmin && (\r\n              <div className=\"admin-class-codes-container section-card\">\r\n                <h3>  </h3>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                <div className=\"add-class-code-form\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newClassCode}\r\n                    onChange={(e) => setNewClassCode(e.target.value)}\r\n                    placeholder=\"   \"\r\n                    disabled={classCodeOperationLoading}\r\n                    className=\"admin-input\"\r\n                  />\r\n                  <button\r\n                    onClick={handleAddClassCode}\r\n                    disabled={classCodeOperationLoading || !newClassCode.trim()}\r\n                    className=\"admin-button\"\r\n                  >\r\n                    {classCodeOperationLoading ? \" ...\" : \" \"}\r\n                  </button>\r\n                </div>\r\n                <div className=\"class-codes-list\">\r\n                  <h4>\r\n                        (\r\n                    {Array.isArray(classCodes) ? classCodes.length : 0})\r\n                  </h4>\r\n                  {Array.isArray(classCodes) && classCodes.length > 0 ? (\r\n                    <ul className=\"codes-list\">\r\n                      {classCodes.map((code) => (\r\n                        <li key={code} className=\"code-item\">\r\n                          <span className=\"code-text\">{code}</span>\r\n                          <button\r\n                            onClick={() => handleRemoveClassCode(code)}\r\n                            className=\"remove-code-button\"\r\n                            disabled={classCodeOperationLoading}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"no-codes-message\">   .</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/*     */}\r\n            <SystemMonitoring isSuperAdmin={isSuperAdmin} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-settings-footer\">\r\n          <button\r\n            onClick={() => setShowAdminSettingsModal(false)}\r\n            className=\"admin-close-button\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/*     */}\r\n      {showEditStudentJobsModal && selectedStudent && (\r\n        <div className=\"modal-overlay show\">\r\n          <div className=\"edit-student-jobs-modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                  :{\" \"}\r\n                {selectedStudent.nickname || selectedStudent.name}\r\n              </h3>\r\n              <button\r\n                className=\"close-modal-btn\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>\r\n                <strong>\r\n                  {selectedStudent.nickname || selectedStudent.name}\r\n                </strong>\r\n                  .\r\n              </p>\r\n              <div className=\"salary-info\">\r\n                <p>\r\n                    : {(selectedStudent.cash || 0).toLocaleString()}\r\n                  \r\n                </p>\r\n                {(() => {\r\n                  const salaryCalc = calculateSalary(tempSelectedJobIds, true);\r\n                  return (\r\n                    <>\r\n                      <p> : {`${(salaryCalc.gross / 10000).toFixed(0)}`}</p>\r\n                      <p> : {`${(salaryCalc.tax / 10000).toFixed(0)}`} ({(salarySettings.taxRate * 100).toFixed(1)}%)</p>\r\n                      <p>: {`${(salaryCalc.net / 10000).toFixed(0)}`}</p>\r\n                    </>\r\n                  );\r\n                })()}\r\n                <p className=\"salary-explanation\">\r\n                  ( 200 +   50,  {(salarySettings.taxRate * 100).toFixed(1)}% )\r\n                </p>\r\n              </div>\r\n              <div className=\"job-selection-list\">\r\n                {Array.isArray(jobs) &&\r\n                jobs.filter((job) => job.active !== false).length > 0 ? (\r\n                  jobs\r\n                    .filter((job) => job.active !== false)\r\n                    .map((job) => (\r\n                      <div key={job.id} className=\"job-selection-item\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={`job-modal-${job.id}`}\r\n                          checked={tempSelectedJobIds.includes(job.id)}\r\n                          onChange={() => handleToggleJobSelection(job.id)}\r\n                        />\r\n                        <label htmlFor={`job-modal-${job.id}`}>\r\n                          {job.title}\r\n                        </label>\r\n                      </div>\r\n                    ))\r\n                ) : (\r\n                  <p className=\"no-items-message\">\r\n                       .\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"admin-cancel-button\"\r\n                onClick={() => setShowEditStudentJobsModal(false)}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                className=\"admin-save-button\"\r\n                onClick={handleSaveStudentJobs}\r\n                disabled={appLoading}\r\n              >\r\n                {appLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSettingsModal;","// src/hooks/useOptimizedAdminData.js\r\n// Firebase     \r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport {\r\n  optimizedFirebaseService,\r\n  queryKeys,\r\n  localBackup,\r\n  realtimeOptimizer,\r\n} from \"../services/optimizedFirebaseService\";\r\n\r\n//     ( )\r\nexport const useOptimizedAdminSettings = (tab) => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.adminSettings(classCode, tab),\r\n    queryFn: async () => {\r\n      //     ( )\r\n      const backupKey = `admin_${classCode}_${tab}`;\r\n      const backup = localBackup.load(backupKey, 30000); // 30\r\n\r\n      if (backup && !navigator.onLine) {\r\n        return backup;\r\n      }\r\n\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n\r\n      //   \r\n      localBackup.save(backupKey, data);\r\n\r\n      return data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode && tab),\r\n    staleTime: 5 * 60 * 1000, // 5\r\n    cacheTime: 10 * 60 * 1000, // 10\r\n    retry: (failureCount, error) => {\r\n      if (error?.code === 'permission-denied') return false;\r\n      return failureCount < 2;\r\n    },\r\n    //    \r\n    refetchInterval: realtimeOptimizer.shouldUseRealtime() ? 5 * 60 * 1000 : false,\r\n  });\r\n};\r\n\r\n//    ( )\r\nexport const useOptimizedStudents = () => {\r\n  const { userDoc, isAdmin, isSuperAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.students(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"studentManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 3 * 60 * 1000, // 3 (    )\r\n    cacheTime: 8 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//   \r\nexport const useOptimizedSalarySettings = () => {\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.salarySettings(classCode),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"salarySettings\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isAdmin?.() && classCode),\r\n    staleTime: 10 * 60 * 1000, // 10 (   )\r\n    cacheTime: 15 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//     (  )\r\nexport const useOptimizedSystemManagement = () => {\r\n  const { isSuperAdmin } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.systemManagement(),\r\n    queryFn: async () => {\r\n      const data = await optimizedFirebaseService.getAdminSettingsData({\r\n        tab: \"systemManagement\"\r\n      });\r\n      return data.data;\r\n    },\r\n    enabled: !!(isSuperAdmin?.()),\r\n    staleTime: 15 * 60 * 1000, // 15 (     )\r\n    cacheTime: 20 * 60 * 1000,\r\n  });\r\n};\r\n\r\n//    \r\nexport const useBatchPaySalaries = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ studentIds, payAll }) => {\r\n      return await optimizedFirebaseService.batchPaySalaries({\r\n        studentIds,\r\n        payAll,\r\n      });\r\n    },\r\n    onSuccess: () => {\r\n      //   \r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.students(classCode),\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: queryKeys.salarySettings(classCode),\r\n      });\r\n\r\n      //   \r\n      localBackup.clear(`admin_${classCode}_studentManagement`);\r\n      localBackup.clear(`admin_${classCode}_salarySettings`);\r\n    },\r\n    onError: (error) => {\r\n      console.error(\"  :\", error);\r\n    },\r\n  });\r\n};\r\n\r\n//    ()\r\nexport const useOptimizedSettingsSave = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ type, data }) => {\r\n      //  Firebase Function  \r\n      console.log(\" :\", type, data);\r\n      return { success: true };\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      const { type } = variables;\r\n\r\n      //   \r\n      switch (type) {\r\n        case \"general\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.generalSettings(classCode),\r\n          });\r\n          break;\r\n        case \"salary\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.salarySettings(classCode),\r\n          });\r\n          break;\r\n        case \"student\":\r\n          queryClient.invalidateQueries({\r\n            queryKey: queryKeys.students(classCode),\r\n          });\r\n          break;\r\n        default:\r\n          //    \r\n          queryClient.invalidateQueries({\r\n            queryKey: [\"adminSettings\", classCode],\r\n          });\r\n      }\r\n\r\n      //    \r\n      localBackup.clear(`admin_${classCode}_${type}`);\r\n    },\r\n  });\r\n};\r\n\r\n//   \r\nexport const useAdminDataPreloader = () => {\r\n  const queryClient = useQueryClient();\r\n  const { userDoc, isAdmin } = useAuth();\r\n  const classCode = userDoc?.classCode;\r\n\r\n  const preloadAdminData = async () => {\r\n    if (!isAdmin?.() || !classCode) return;\r\n\r\n    //      \r\n    const commonTabs = [\"generalSettings\", \"studentManagement\", \"salarySettings\"];\r\n\r\n    const preloadPromises = commonTabs.map(tab =>\r\n      queryClient.prefetchQuery({\r\n        queryKey: queryKeys.adminSettings(classCode, tab),\r\n        queryFn: async () => {\r\n          const data = await optimizedFirebaseService.getAdminSettingsData({ tab });\r\n          return data;\r\n        },\r\n        staleTime: 5 * 60 * 1000,\r\n      })\r\n    );\r\n\r\n    await Promise.allSettled(preloadPromises);\r\n  };\r\n\r\n  return { preloadAdminData };\r\n};\r\n\r\n//    \r\nexport const useNetworkOptimization = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const optimizeForNetwork = () => {\r\n    if (!navigator.onLine) {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: false,\r\n          retry: false,\r\n        },\r\n      });\r\n    } else {\r\n      //     \r\n      queryClient.setDefaultOptions({\r\n        queries: {\r\n          enabled: true,\r\n          retry: 2,\r\n        },\r\n      });\r\n\r\n      //   \r\n      queryClient.refetchQueries({ stale: true });\r\n    }\r\n  };\r\n\r\n  return { optimizeForNetwork };\r\n};","// src/components/DailyReward.js -     ( )\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n *     \r\n * 1: 1 \r\n * 10: 10\r\n * 10 :  10  (  )\r\n */\r\n\r\nconst STREAK_REWARDS = [\r\n  { day: 1, reward: 10000, icon: \"\", label: \"1\" },\r\n  { day: 2, reward: 15000, icon: \"\", label: \"2\" },\r\n  { day: 3, reward: 20000, icon: \"\", label: \"3\" },\r\n  { day: 4, reward: 30000, icon: \"\", label: \"4\" },\r\n  { day: 5, reward: 40000, icon: \"\", label: \"5\" },\r\n  { day: 6, reward: 50000, icon: \"\", label: \"6\" },\r\n  { day: 7, reward: 60000, icon: \"\", label: \"7\" },\r\n  { day: 8, reward: 70000, icon: \"\", label: \"8\" },\r\n  { day: 9, reward: 85000, icon: \"\", label: \"9\" },\r\n  { day: 10, reward: 100000, icon: \"\", label: \"10!\" },\r\n];\r\n\r\n// 10  \r\nconst STREAK_BONUS_AFTER_10 = 100000;\r\n\r\n/**\r\n *      .\r\n */\r\nexport function getStreakInfo(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toDateString();\r\n\r\n  try {\r\n    const saved = localStorage.getItem(key);\r\n    if (saved) {\r\n      const data = JSON.parse(saved);\r\n      const lastLogin = new Date(data.lastLogin).toDateString();\r\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\r\n\r\n      if (lastLogin === today) {\r\n        //   \r\n        return { ...data, isNewDay: false, canClaim: false };\r\n      } else if (lastLogin === yesterday) {\r\n        //    \r\n        return {\r\n          streak: data.streak,\r\n          lastLogin: data.lastLogin,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n        };\r\n      } else {\r\n        //   - \r\n        return {\r\n          streak: 0,\r\n          lastLogin: null,\r\n          totalClaimed: data.totalClaimed || 0,\r\n          isNewDay: true,\r\n          canClaim: true,\r\n          streakBroken: true\r\n        };\r\n      }\r\n    }\r\n    //  \r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  } catch {\r\n    return { streak: 0, lastLogin: null, totalClaimed: 0, isNewDay: true, canClaim: true };\r\n  }\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nfunction getRewardForDay(day) {\r\n  if (day <= 10) {\r\n    return STREAK_REWARDS[day - 1]?.reward || 10000;\r\n  }\r\n  // 10   10\r\n  return STREAK_BONUS_AFTER_10;\r\n}\r\n\r\n/**\r\n *    .\r\n */\r\nexport function claimDailyReward(userId) {\r\n  const key = `dailyStreak_${userId}`;\r\n  const today = new Date().toISOString();\r\n  const streakInfo = getStreakInfo(userId);\r\n\r\n  if (!streakInfo.canClaim) {\r\n    return { success: false, message: \"   .\" };\r\n  }\r\n\r\n  const newStreak = streakInfo.streak + 1;\r\n  const reward = getRewardForDay(newStreak);\r\n  const icon = newStreak >= 10 ? \"\" : newStreak >= 7 ? \"\" : \"\";\r\n\r\n  const newData = {\r\n    streak: newStreak,\r\n    lastLogin: today,\r\n    totalClaimed: (streakInfo.totalClaimed || 0) + reward,\r\n  };\r\n\r\n  localStorage.setItem(key, JSON.stringify(newData));\r\n\r\n  return {\r\n    success: true,\r\n    reward: reward,\r\n    newStreak,\r\n    icon,\r\n    message: `${newStreak}  : ${reward.toLocaleString()}!`,\r\n    isMilestone: newStreak === 10 || newStreak % 30 === 0,\r\n  };\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function DailyRewardBanner({ userId, onClaim }) {\r\n  const [streakInfo, setStreakInfo] = useState(null);\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [rewardResult, setRewardResult] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n      setIsVisible(info.canClaim);\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleClaim = () => {\r\n    const result = claimDailyReward(userId);\r\n    setRewardResult(result);\r\n    setClaimed(true);\r\n\r\n    if (result.success && onClaim) {\r\n      onClaim(result.reward);\r\n    }\r\n\r\n    // 5   \r\n    setTimeout(() => {\r\n      setIsVisible(false);\r\n    }, 5000);\r\n  };\r\n\r\n  if (!isVisible || !streakInfo) return null;\r\n\r\n  const nextDay = streakInfo.streak + 1;\r\n  const nextReward = getRewardForDay(nextDay);\r\n  const isBigReward = nextDay >= 10;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: claimed\r\n          ? \"linear-gradient(135deg, #10b981 0%, #059669 100%)\"\r\n          : isBigReward\r\n            ? \"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)\"\r\n            : \"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"20px\",\r\n        marginBottom: \"20px\",\r\n        boxShadow: claimed\r\n          ? \"0 4px 20px rgba(16, 185, 129, 0.4)\"\r\n          : isBigReward\r\n            ? \"0 4px 20px rgba(245, 158, 11, 0.4)\"\r\n            : \"0 4px 20px rgba(139, 92, 246, 0.4)\",\r\n        animation: \"slideDown 0.3s ease-out\",\r\n        border: \"2px solid rgba(255,255,255,0.2)\",\r\n      }}\r\n    >\r\n      {!claimed ? (\r\n        <>\r\n          {/*    */}\r\n          {streakInfo.streakBroken && (\r\n            <div\r\n              style={{\r\n                background: \"rgba(0,0,0,0.2)\",\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"8px\",\r\n                marginBottom: \"12px\",\r\n                fontSize: \"13px\",\r\n                color: \"rgba(255,255,255,0.9)\",\r\n              }}\r\n            >\r\n                 .  1 !\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <div>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"10px\",\r\n                  marginBottom: \"6px\",\r\n                }}\r\n              >\r\n                <span style={{ fontSize: \"32px\" }}>\r\n                  {isBigReward ? \"\" : \"\"}\r\n                </span>\r\n                <div>\r\n                  <div\r\n                    style={{\r\n                      color: \"#fff\",\r\n                      fontSize: \"18px\",\r\n                      fontWeight: \"700\",\r\n                    }}\r\n                  >\r\n                    {nextDay}  \r\n                  </div>\r\n                  {nextDay >= 10 && (\r\n                    <div style={{\r\n                      fontSize: \"11px\",\r\n                      color: \"rgba(255,255,255,0.8)\",\r\n                      marginTop: \"2px\"\r\n                    }}>\r\n                       {nextDay}   !\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{\r\n                color: \"rgba(255,255,255,0.95)\",\r\n                fontSize: \"24px\",\r\n                fontWeight: \"800\",\r\n                marginTop: \"4px\"\r\n              }}>\r\n                +{nextReward.toLocaleString()}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleClaim}\r\n              style={{\r\n                background: \"rgba(255,255,255,0.95)\",\r\n                border: \"none\",\r\n                color: isBigReward ? \"#ea580c\" : \"#6366f1\",\r\n                padding: \"14px 28px\",\r\n                borderRadius: \"14px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              ! \r\n            </button>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div style={{ marginTop: \"16px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                gap: \"4px\",\r\n              }}\r\n            >\r\n              {STREAK_REWARDS.map((day, idx) => (\r\n                <div\r\n                  key={day.day}\r\n                  style={{\r\n                    flex: 1,\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      height: \"8px\",\r\n                      borderRadius: \"4px\",\r\n                      background:\r\n                        idx < streakInfo.streak\r\n                          ? \"rgba(255,255,255,0.9)\"\r\n                          : idx === streakInfo.streak\r\n                            ? \"rgba(255,255,255,0.5)\"\r\n                            : \"rgba(255,255,255,0.2)\",\r\n                      marginBottom: \"4px\",\r\n                    }}\r\n                  />\r\n                  {(idx === 0 || idx === 4 || idx === 9) && (\r\n                    <span style={{\r\n                      fontSize: \"9px\",\r\n                      color: \"rgba(255,255,255,0.7)\"\r\n                    }}>\r\n                      {idx + 1}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {nextDay > 10 && (\r\n              <div style={{\r\n                textAlign: \"center\",\r\n                marginTop: \"8px\",\r\n                fontSize: \"12px\",\r\n                color: \"rgba(255,255,255,0.8)\",\r\n              }}>\r\n                 10      10!\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{ textAlign: \"center\", padding: \"10px 0\" }}>\r\n          <div style={{\r\n            fontSize: \"48px\",\r\n            marginBottom: \"12px\",\r\n            animation: \"bounce 0.5s ease\"\r\n          }}>\r\n            {rewardResult?.icon || \"\"}\r\n          </div>\r\n          <div\r\n            style={{\r\n              color: \"#fff\",\r\n              fontSize: \"28px\",\r\n              fontWeight: \"800\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            +{rewardResult?.reward?.toLocaleString()}\r\n          </div>\r\n          <div style={{\r\n            color: \"rgba(255,255,255,0.9)\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"600\"\r\n          }}>\r\n             {rewardResult?.newStreak}  !\r\n          </div>\r\n          {rewardResult?.isMilestone && (\r\n            <div style={{\r\n              marginTop: \"10px\",\r\n              padding: \"8px 16px\",\r\n              background: \"rgba(255,255,255,0.2)\",\r\n              borderRadius: \"20px\",\r\n              display: \"inline-block\",\r\n              fontSize: \"14px\",\r\n              color: \"#fff\",\r\n            }}>\r\n               !  !\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    ()\r\n */\r\nexport function StreakDisplay({ userId }) {\r\n  const [streakInfo, setStreakInfo] = useState({ streak: 0 });\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      const info = getStreakInfo(userId);\r\n      setStreakInfo(info);\r\n    }\r\n  }, [userId]);\r\n\r\n  const currentStreak = streakInfo.streak || 0;\r\n\r\n  if (currentStreak === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"inline-flex\",\r\n        alignItems: \"center\",\r\n        gap: \"6px\",\r\n        padding: \"4px 12px\",\r\n        background: currentStreak >= 10\r\n          ? \"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)\"\r\n          : \"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)\",\r\n        border: `1px solid ${currentStreak >= 10 ? \"#f59e0b40\" : \"#8b5cf640\"}`,\r\n        borderRadius: \"14px\",\r\n        fontSize: \"13px\",\r\n        color: currentStreak >= 10 ? \"#f59e0b\" : \"#a78bfa\",\r\n        fontWeight: \"600\",\r\n      }}\r\n    >\r\n      <span></span>\r\n      <span>{currentStreak} </span>\r\n      {currentStreak >= 10 && <span></span>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function StreakRewardInfo() {\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"16px\",\r\n        padding: \"16px\",\r\n        border: \"2px solid #8b5cf640\",\r\n      }}\r\n    >\r\n      <h4 style={{\r\n        color: \"#e8e8ff\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"700\",\r\n        marginBottom: \"12px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"8px\"\r\n      }}>\r\n            \r\n      </h4>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"6px\" }}>\r\n        {STREAK_REWARDS.map((day) => (\r\n          <div\r\n            key={day.day}\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              padding: \"6px 10px\",\r\n              background: day.day === 10 ? \"#f59e0b15\" : \"transparent\",\r\n              borderRadius: \"8px\",\r\n              border: day.day === 10 ? \"1px solid #f59e0b30\" : \"none\",\r\n            }}\r\n          >\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#9ca3af\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n              {day.icon} {day.label}\r\n            </span>\r\n            <span style={{\r\n              color: day.day === 10 ? \"#f59e0b\" : \"#e8e8ff\",\r\n              fontWeight: day.day === 10 ? \"700\" : \"500\",\r\n              fontSize: day.day === 10 ? \"15px\" : \"13px\",\r\n            }}>\r\n              {day.reward.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        ))}\r\n        <div\r\n          style={{\r\n            marginTop: \"8px\",\r\n            padding: \"10px\",\r\n            background: \"#f59e0b15\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #f59e0b30\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <span style={{ color: \"#f59e0b\", fontSize: \"13px\", fontWeight: \"600\" }}>\r\n             10 :  100,000!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DailyRewardBanner;\r\n","// src/Dashboard.js - Firestore   +     + Tailwind UI\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\r\nimport { Outlet, useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Dashboard.css\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { db, functions } from \"./firebase\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  getDocs,\r\n  deleteDoc,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  increment,\r\n  arrayUnion,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  collection as firestoreCollection,\r\n  limit,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport { formatKoreanCurrency, formatCouponCount } from './numberFormatter';\r\nimport JobList from \"./JobList\";\r\nimport CommonTaskList from \"./CommonTaskList\";\r\nimport TransferModal from \"./components/modals/TransferModal\";\r\nimport DonateCouponModal from \"./components/modals/DonateCouponModal\";\r\nimport DonationHistoryModal from \"./components/modals/DonationHistoryModal\";\r\nimport SellCouponModal from \"./components/modals/SellCouponModal\";\r\nimport AdminSettingsModal from \"./components/modals/AdminSettingsModal\";\r\nimport GiftCouponModal from \"./components/modals/GiftCouponModal\";\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  EmptyState,\r\n  ActionButton,\r\n  CardGrid,\r\n} from \"./components/PageWrapper\";\r\nimport globalCacheService from \"./services/globalCacheService\";\r\nimport { Briefcase, ListTodo, Settings, RefreshCw, RotateCcw, Plus, ChevronLeft, X } from \"lucide-react\";\r\nimport { DailyRewardBanner, getStreakInfo, claimDailyReward } from \"./components/DailyReward\";\r\n\r\n// Cloud Functions   \r\nconst manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n\r\n//  [ v3.0]   - Firestore  95%  \r\n// TTL  -    globalCacheService  \r\nconst CACHE_TTL = {\r\n  JOBS: 6 * 60 * 60 * 1000,        // 6 ( )\r\n  TASKS: 6 * 60 * 60 * 1000,       // 6 ( )\r\n  SETTINGS: 12 * 60 * 60 * 1000,   // 12 ()\r\n  GOALS: 6 * 60 * 60 * 1000,       // 6 ()\r\n  CLASS_CODES: 24 * 60 * 60 * 1000, // 24 ( )\r\n};\r\n\r\n//  globalCacheService  ( dataCache  )\r\nconst dataCache = {\r\n  get: (key) => globalCacheService.get(key),\r\n  set: (key, data, ttl) => globalCacheService.set(key, data, ttl || CACHE_TTL.TASKS),\r\n  invalidate: (key) => globalCacheService.invalidate(key),\r\n  clear: () => globalCacheService.clearAll(),\r\n};\r\n\r\n//    \r\nclass BatchManager {\r\n  constructor() {\r\n    this.pendingWrites = [];\r\n    this.batchTimeout = null;\r\n    this.BATCH_DELAY = 2000; // 2 \r\n    this.MAX_BATCH_SIZE = 500; // Firestore \r\n  }\r\n\r\n  addWrite(operation) {\r\n    this.pendingWrites.push(operation);\r\n\r\n    if (this.pendingWrites.length >= this.MAX_BATCH_SIZE) {\r\n      this.executeBatch();\r\n    } else {\r\n      this.scheduleBatch();\r\n    }\r\n  }\r\n\r\n  scheduleBatch() {\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n    }\r\n\r\n    this.batchTimeout = setTimeout(() => {\r\n      this.executeBatch();\r\n    }, this.BATCH_DELAY);\r\n  }\r\n\r\n  async executeBatch() {\r\n    if (this.pendingWrites.length === 0) return;\r\n\r\n    if (this.batchTimeout) {\r\n      clearTimeout(this.batchTimeout);\r\n      this.batchTimeout = null;\r\n    }\r\n\r\n    const batch = writeBatch(db);\r\n    const operations = [...this.pendingWrites];\r\n    this.pendingWrites = [];\r\n\r\n    try {\r\n      operations.forEach(({ type, ref, data }) => {\r\n        switch (type) {\r\n          case 'set':\r\n            batch.set(ref, data);\r\n            break;\r\n          case 'update':\r\n            batch.update(ref, data);\r\n            break;\r\n          case 'delete':\r\n            batch.delete(ref);\r\n            break;\r\n        }\r\n      });\r\n\r\n      await batch.commit();\r\n      console.log(`  : ${operations.length} `);\r\n    } catch (error) {\r\n      console.error('  :', error);\r\n      //       \r\n    }\r\n  }\r\n}\r\n\r\nconst batchManager = new BatchManager();\r\n\r\n//    \r\nclass RealtimeManager {\r\n  constructor() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  addListener(key, unsubscribe) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n    }\r\n    this.listeners.set(key, unsubscribe);\r\n  }\r\n\r\n  removeListener(key) {\r\n    if (this.listeners.has(key)) {\r\n      this.listeners.get(key)();\r\n      this.listeners.delete(key);\r\n    }\r\n  }\r\n\r\n  removeAllListeners() {\r\n    this.listeners.forEach(unsubscribe => unsubscribe());\r\n    this.listeners.clear();\r\n  }\r\n}\r\n\r\n// Utility functions -    \r\nconst fetchClassData = async (classCode) => {\r\n  const cacheKey = `classData_${classCode}`;\r\n  const cached = dataCache.get(cacheKey);\r\n  if (cached) return cached;\r\n\r\n  try {\r\n    const q = query(\r\n      firestoreCollection(db, \"sharedData\"),\r\n      where(\"classCode\", \"==\", classCode),\r\n      limit(100) //  \r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const data = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n\r\n    dataCache.set(cacheKey, data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching class data:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSharedData = async (data, classCode) => {\r\n  try {\r\n    //   \r\n    const newDocRef = doc(firestoreCollection(db, \"sharedData\"));\r\n    batchManager.addWrite({\r\n      type: 'set',\r\n      ref: newDocRef,\r\n      data: {\r\n        ...data,\r\n        classCode,\r\n        createdAt: serverTimestamp(),\r\n      }\r\n    });\r\n\r\n    //  \r\n    dataCache.invalidate(`classData_${classCode}`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error saving shared data:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nfunction SelectMultipleJobsView({\r\n  availableJobs,\r\n  currentSelectedJobIds = [],\r\n  onConfirmSelection,\r\n  onCancel,\r\n}) {\r\n  const [tempSelection, setTempSelection] = useState(\r\n    Array.isArray(currentSelectedJobIds) ? [...currentSelectedJobIds] : []\r\n  );\r\n\r\n  const activeJobs = useMemo(() => {\r\n    return Array.isArray(availableJobs)\r\n      ? availableJobs.filter((job) => job.active !== false)\r\n      : [];\r\n  }, [availableJobs]);\r\n\r\n  const handleCheckboxChange = useCallback((jobId) => {\r\n    setTempSelection((prev) =>\r\n      prev.includes(jobId)\r\n        ? prev.filter((id) => id !== jobId)\r\n        : [...prev, jobId]\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8\">\r\n      <h4 className=\"text-xl font-semibold text-white text-center mb-2\">\r\n          (  )\r\n      </h4>\r\n      <p className=\"text-sm text-slate-400 text-center mb-4\">\r\n        ' '   .\r\n      </p>\r\n      <div className=\"flex flex-col gap-3\">\r\n        {activeJobs.map((job) => (\r\n          <label\r\n            key={job.id}\r\n            className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${tempSelection.includes(job.id)\r\n              ? 'border-cyan-500 bg-cyan-900/30'\r\n              : 'border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50'\r\n              }`}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={tempSelection.includes(job.id)}\r\n              onChange={() => handleCheckboxChange(job.id)}\r\n              className=\"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer\"\r\n            />\r\n            <span className={`font-medium ${tempSelection.includes(job.id)\r\n              ? 'text-cyan-400'\r\n              : 'text-slate-300'\r\n              }`}>\r\n              {job.title}\r\n            </span>\r\n          </label>\r\n        ))}\r\n        {activeJobs.length === 0 && (\r\n          <EmptyState\r\n            icon={Briefcase}\r\n            title=\"   \"\r\n            description=\"    .\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-end gap-3 mt-6\">\r\n        <ActionButton variant=\"secondary\" onClick={onCancel}>\r\n          \r\n        </ActionButton>\r\n        <ActionButton variant=\"primary\" onClick={() => onConfirmSelection(tempSelection)}>\r\n           \r\n        </ActionButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Dashboard({ adminTabMode }) {\r\n  const navigate = useNavigate();\r\n  const {\r\n    user,\r\n    userDoc,\r\n    setUserDoc,\r\n    loading: authLoading,\r\n    updateUser,\r\n    refreshUserDocument,\r\n    isAdmin,\r\n    isSuperAdmin,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  // Refs for cleanup\r\n  const realtimeManager = useRef(new RealtimeManager());\r\n  const lastFetchTime = useRef(0);\r\n  const fetchPromise = useRef(null);\r\n\r\n  // State management\r\n  const [appLoading, setAppLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState(\"list\");\r\n  const [showAdminSettingsModal, setShowAdminSettingsModal] = useState(false);\r\n  const [adminSelectedMenu, setAdminSelectedMenu] = useState(\"generalSettings\");\r\n\r\n  const [jobs, setJobs] = useState([]);\r\n  const [commonTasks, setCommonTasks] = useState([]);\r\n\r\n  const [editingJob, setEditingJob] = useState(null);\r\n  const [adminNewJobTitle, setAdminNewJobTitle] = useState(\"\");\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [currentJobIdForTask, setCurrentJobIdForTask] = useState(null);\r\n  const [isJobTaskForForm, setIsJobTaskForForm] = useState(false);\r\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\r\n  const [showDailyRewardPopup, setShowDailyRewardPopup] = useState(false);\r\n  const [adminNewTaskName, setAdminNewTaskName] = useState(\"\");\r\n  const [adminNewTaskReward, setAdminNewTaskReward] = useState(\"\");\r\n  const [adminNewTaskMaxClicks, setAdminNewTaskMaxClicks] = useState(\"5\");\r\n\r\n  const [isHandlingTask, setIsHandlingTask] = useState(false);\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n  const [adminCouponValueInput, setAdminCouponValueInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [adminGoalAmountInput, setAdminGoalAmountInput] = useState(\r\n    String(1000)\r\n  );\r\n  const [classCodes, setClassCodes] = useState([]);\r\n\r\n  // adminTabMode   \r\n  useEffect(() => {\r\n    if (adminTabMode && isAdmin?.()) {\r\n      setAdminSelectedMenu(adminTabMode);\r\n      setShowAdminSettingsModal(true);\r\n    }\r\n  }, [adminTabMode, isAdmin]);\r\n\r\n  //     -     \r\n  useEffect(() => {\r\n    if (userDoc?.uid && userDoc?.role === 'student') {\r\n      const streakInfo = getStreakInfo(userDoc.uid);\r\n      if (streakInfo.canClaim) {\r\n        //      (  )\r\n        const timer = setTimeout(() => {\r\n          setShowDailyRewardPopup(true);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [userDoc?.uid, userDoc?.role]);\r\n\r\n  //     \r\n  const handleDailyRewardClaim = useCallback(async (rewardAmount) => {\r\n    if (!userDoc?.uid || !rewardAmount) return;\r\n\r\n    try {\r\n      const userRef = doc(db, \"users\", userDoc.uid);\r\n      await updateDoc(userRef, {\r\n        cash: increment(rewardAmount),\r\n      });\r\n\r\n      //  \r\n      globalCacheService.invalidate(`user_${userDoc.uid}`);\r\n\r\n      //   (  )\r\n      setTimeout(() => {\r\n        setShowDailyRewardPopup(false);\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [userDoc?.uid]);\r\n\r\n  // Memoized values\r\n  const currentGoalId = useMemo(() => {\r\n    return userDoc?.classCode && isAdmin?.()\r\n      ? `${userDoc.classCode}_goal`\r\n      : null;\r\n  }, [userDoc?.classCode, isAdmin]);\r\n\r\n  const currentSelectedJobIdsFromUserDoc = useMemo(() => {\r\n    return userDoc && Array.isArray(userDoc.selectedJobIds)\r\n      ? userDoc.selectedJobIds\r\n      : [];\r\n  }, [userDoc]);\r\n\r\n  const jobsToShow = useMemo(() => {\r\n    const completedJobTasks = userDoc?.completedJobTasks || {};\r\n\r\n    return Array.isArray(jobs)\r\n      ? jobs\r\n        .filter(\r\n          (job) =>\r\n            currentSelectedJobIdsFromUserDoc.includes(job.id) &&\r\n            job.active !== false\r\n        )\r\n        .map((job) => ({\r\n          ...job,\r\n          tasks: (job.tasks || []).map((task) => ({\r\n            ...task,\r\n            clicks: completedJobTasks[`${job.id}_${task.id}`] || 0, //   \r\n          })),\r\n        }))\r\n      : [];\r\n  }, [jobs, currentSelectedJobIdsFromUserDoc, userDoc]);\r\n\r\n  const commonTasksWithUserProgress = useMemo(() => {\r\n    if (!commonTasks || !userDoc) {\r\n      return [];\r\n    }\r\n    const userCompletedTasks = userDoc.completedTasks || {};\r\n    return commonTasks.map(task => ({\r\n      ...task,\r\n      clicks: userCompletedTasks[task.id] || 0,\r\n    }));\r\n  }, [commonTasks, userDoc]);\r\n\r\n  // Utility function for generating IDs\r\n  const generateId = useCallback(() => {\r\n    try {\r\n      return doc(firestoreCollection(db, \"temp\")).id;\r\n    } catch (error) {\r\n      console.error(\"Error generating ID:\", error);\r\n      return Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    }\r\n  }, []);\r\n\r\n  //  [] Polling   (30)\r\n  const setupPolling = useCallback(async (classCode) => {\r\n    if (!classCode) return;\r\n\r\n    const pollData = async () => {\r\n      try {\r\n        // Jobs  (   orderBy )\r\n        const jobsQuery = query(\r\n          firestoreCollection(db, \"jobs\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const jobsSnap = await getDocs(jobsQuery);\r\n        const loadedJobs = jobsSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          tasks: (d.data().tasks || []).map((task) => ({\r\n            ...task,\r\n            reward: task.reward || 0,\r\n            clicks: 0, //    useMemo \r\n            maxClicks: task.maxClicks || 5,\r\n          })),\r\n          active: d.data().active !== false,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setJobs(loadedJobs);\r\n        dataCache.set(`jobs_${classCode}`, loadedJobs, CACHE_TTL.JOBS);\r\n\r\n        // Common Tasks  (   orderBy )\r\n        const tasksQuery = query(\r\n          firestoreCollection(db, \"commonTasks\"),\r\n          where(\"classCode\", \"==\", classCode),\r\n          limit(50)\r\n        );\r\n\r\n        const tasksSnap = await getDocs(tasksQuery);\r\n        const loadedCommonTasks = tasksSnap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...d.data(),\r\n          reward: d.data().reward || 0,\r\n          clicks: d.data().clicks || 0,\r\n          maxClicks: d.data().maxClicks || 5,\r\n        }))\r\n          //    (updatedAt  )\r\n          .sort((a, b) => {\r\n            const timeA = a.updatedAt?.toMillis?.() || 0;\r\n            const timeB = b.updatedAt?.toMillis?.() || 0;\r\n            return timeB - timeA;\r\n          });\r\n\r\n        setCommonTasks(loadedCommonTasks);\r\n        dataCache.set(`commonTasks_${classCode}`, loadedCommonTasks, CACHE_TTL.TASKS);\r\n      } catch (error) {\r\n        console.error(\"Polling :\", error);\r\n      }\r\n    };\r\n\r\n    //    \r\n    await pollData();\r\n\r\n    //  [ v3.0] 2  (152 - Firestore  )\r\n    //          \r\n    const intervalId = setInterval(pollData, 2 * 60 * 60 * 1000);\r\n\r\n    // Cleanup  \r\n    realtimeManager.current.addListener('polling', () => clearInterval(intervalId));\r\n  }, []);\r\n\r\n  //    \r\n  const loadCachedData = useCallback(async (classCode) => {\r\n    const jobsCache = dataCache.get(`jobs_${classCode}`);\r\n    const tasksCache = dataCache.get(`commonTasks_${classCode}`);\r\n    const settingsCache = dataCache.get('mainSettings');\r\n\r\n    if (jobsCache) {\r\n      setJobs(jobsCache);\r\n    }\r\n    if (tasksCache) {\r\n      setCommonTasks(tasksCache);\r\n    }\r\n    if (settingsCache) {\r\n      setCouponValue(settingsCache.couponValue || 1000);\r\n      setAdminCouponValueInput(String(settingsCache.couponValue || 1000));\r\n    }\r\n\r\n    return {\r\n      hasJobsCache: !!jobsCache,\r\n      hasTasksCache: !!tasksCache,\r\n      hasSettingsCache: !!settingsCache\r\n    };\r\n  }, []);\r\n\r\n  //    \r\n  const loadTasksData = useCallback(async (forceRefresh = false) => {\r\n    if (!userDoc?.classCode) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const classCode = userDoc.classCode;\r\n\r\n    //   \r\n    if (fetchPromise.current && !forceRefresh) {\r\n      return fetchPromise.current;\r\n    }\r\n\r\n    //  [ v3.0]     (2)\r\n    if (!forceRefresh && now - lastFetchTime.current < 2 * 60 * 60 * 1000) {\r\n      setAppLoading(false);\r\n      return;\r\n    }\r\n\r\n    //   \r\n    setAppLoading(true);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // 1:      UI \r\n        const cacheStatus = await loadCachedData(classCode);\r\n\r\n        //         UI \r\n        if (cacheStatus.hasJobsCache && cacheStatus.hasTasksCache) {\r\n          setAppLoading(false);\r\n        }\r\n\r\n        // 2:     ( )\r\n        if (!realtimeManager.current.listeners.has('jobs')) {\r\n          //         \r\n          setTimeout(() => setupPolling(classCode), 0);\r\n        }\r\n\r\n        // 3:     \r\n        const promises = [];\r\n\r\n        if (!cacheStatus.hasSettingsCache || forceRefresh) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"mainSettings\")).then(snap => ({\r\n              type: 'settings',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (currentGoalId && (!dataCache.get(`goal_${currentGoalId}`) || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"goals\", currentGoalId)).then(snap => ({\r\n              type: 'goal',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        if (isSuperAdmin() && (!dataCache.get('classCodes') || forceRefresh)) {\r\n          promises.push(\r\n            getDoc(doc(db, \"settings\", \"classCodes\")).then(snap => ({\r\n              type: 'classCodes',\r\n              data: snap.exists() ? snap.data() : null\r\n            }))\r\n          );\r\n        }\r\n\r\n        //    \r\n        if (promises.length > 0) {\r\n          const results = await Promise.all(promises);\r\n\r\n          results.forEach(result => {\r\n            switch (result.type) {\r\n              case 'settings':\r\n                if (result.data) {\r\n                  const newCouponValue = result.data.couponValue || 1000;\r\n                  setCouponValue(newCouponValue);\r\n                  setAdminCouponValueInput(String(newCouponValue));\r\n                  dataCache.set('mainSettings', result.data, CACHE_TTL.SETTINGS);\r\n                }\r\n                break;\r\n              case 'goal':\r\n                if (result.data && result.data.classCode === classCode) {\r\n                  const targetAmount = result.data.targetAmount || 1000;\r\n                  setClassCouponGoal(targetAmount);\r\n                  setAdminGoalAmountInput(String(targetAmount));\r\n                  dataCache.set(`goal_${currentGoalId}`, result.data, CACHE_TTL.GOALS);\r\n                }\r\n                break;\r\n              case 'classCodes':\r\n                if (result.data) {\r\n                  setClassCodes(result.data.validCodes || []);\r\n                  dataCache.set('classCodes', result.data, CACHE_TTL.CLASS_CODES);\r\n                }\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        lastFetchTime.current = now;\r\n      } catch (error) {\r\n      } finally {\r\n        setAppLoading(false);\r\n        fetchPromise.current = null;\r\n      }\r\n    };\r\n\r\n    fetchPromise.current = fetchData();\r\n    return fetchPromise.current;\r\n  }, [userDoc?.classCode, currentGoalId, isSuperAdmin, setupPolling, loadCachedData]);\r\n\r\n  //  []      (  )\r\n  const refreshInProgressRef = useRef(false);\r\n\r\n  const refreshTasksAfterReset = useCallback(async () => {\r\n    //       \r\n    if (refreshInProgressRef.current) {\r\n      console.log(\"[Dashboard]     -   \");\r\n      return;\r\n    }\r\n\r\n    refreshInProgressRef.current = true;\r\n    console.log(\"[Dashboard]    -   \");\r\n\r\n    try {\r\n      //    ( )\r\n      if (refreshUserDocument) {\r\n        await refreshUserDocument();\r\n      }\r\n\r\n      //   \r\n      if (loadTasksData) {\r\n        await loadTasksData(true); // force refresh\r\n      }\r\n\r\n      // localStorage    \r\n      const today = new Date().toDateString();\r\n      localStorage.setItem('lastTaskResetDate', today);\r\n\r\n      console.log(\"[Dashboard]    \");\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n    } finally {\r\n      refreshInProgressRef.current = false;\r\n    }\r\n  }, [refreshUserDocument, loadTasksData]);\r\n\r\n  // Effect for data loading\r\n  useEffect(() => {\r\n    if (authLoading) {\r\n      setAppLoading(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      setAppLoading(false);\r\n      setJobs([]);\r\n      setCommonTasks([]);\r\n      //  \r\n      realtimeManager.current.removeAllListeners();\r\n      return;\r\n    }\r\n\r\n    if (userDoc?.id && userDoc?.classCode) {\r\n      loadTasksData();\r\n    } else {\r\n      setAppLoading(false);\r\n    }\r\n\r\n    //     \r\n    return () => {\r\n      realtimeManager.current.removeAllListeners();\r\n    };\r\n  }, [authLoading, user, userDoc?.id, userDoc?.classCode, loadTasksData]);\r\n\r\n  //  []     UI  (  )\r\n  const dateCheckExecutedRef = useRef(false);\r\n  const lastCheckedDateRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userDoc?.classCode || !refreshTasksAfterReset) {\r\n      return;\r\n    }\r\n\r\n    //       (  )\r\n    const checkDateAndRefresh = () => {\r\n      const today = new Date().toDateString();\r\n      const lastResetDate = localStorage.getItem('lastTaskResetDate');\r\n\r\n      //    :     \r\n      if (lastCheckedDateRef.current === today) {\r\n        return;\r\n      }\r\n\r\n      lastCheckedDateRef.current = today;\r\n\r\n      if (lastResetDate !== today) {\r\n        // (GitHub Actions)     \r\n        //  UI \r\n        refreshTasksAfterReset();\r\n      }\r\n    };\r\n\r\n    //        ( )\r\n    if (!dateCheckExecutedRef.current) {\r\n      dateCheckExecutedRef.current = true;\r\n      checkDateAndRefresh();\r\n    }\r\n\r\n    //  [ v3.0] 1   (51, Firestore  )\r\n    //       \r\n    const dateCheckInterval = setInterval(() => {\r\n      checkDateAndRefresh();\r\n    }, 60 * 60 * 1000); // 1\r\n\r\n    // \r\n    return () => {\r\n      if (dateCheckInterval) {\r\n        clearInterval(dateCheckInterval);\r\n      }\r\n    };\r\n  }, [userDoc?.classCode, refreshTasksAfterReset]);\r\n\r\n  // Job management handlers\r\n  const handleSaveJob = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const title = adminNewJobTitle.trim();\r\n    if (!title) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      if (editingJob) {\r\n        const jobRef = doc(db, \"jobs\", editingJob.id);\r\n        //   \r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: jobRef,\r\n          data: { title, updatedAt: serverTimestamp() }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n        setEditingJob(null);\r\n        setShowAdminSettingsModal(false);\r\n      } else {\r\n        const newJobId = generateId();\r\n        const jobRef = doc(db, \"jobs\", newJobId);\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: jobRef,\r\n          data: {\r\n            title,\r\n            active: true,\r\n            tasks: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n            classCode: userDoc.classCode,\r\n          }\r\n        });\r\n\r\n        alert(` .`);\r\n        setAdminNewJobTitle(\"\");\r\n      }\r\n\r\n      //  \r\n      dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n    } catch (error) {\r\n      console.error(\"handleSaveJob :\", error);\r\n      alert(\"    \");\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [adminNewJobTitle, editingJob, generateId, userDoc]);\r\n\r\n  const handleDeleteJob = useCallback(\r\n    async (jobIdToDelete) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (\r\n        !window.confirm(\r\n          \"   ?    .\"\r\n        )\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        //   \r\n        const jobRef = doc(db, \"jobs\", jobIdToDelete);\r\n        batchManager.addWrite({\r\n          type: 'delete',\r\n          ref: jobRef,\r\n          data: null\r\n        });\r\n\r\n        if (user && userDoc?.selectedJobIds?.includes(jobIdToDelete)) {\r\n          const updatedSelectedIds = userDoc.selectedJobIds.filter(\r\n            (id) => id !== jobIdToDelete\r\n          );\r\n          await updateUser({ selectedJobIds: updatedSelectedIds });\r\n        }\r\n\r\n        if (editingJob?.id === jobIdToDelete) {\r\n          setAdminNewJobTitle(\"\");\r\n          setEditingJob(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } catch (error) {\r\n        console.error(\"handleDeleteJob :\", error);\r\n        alert(\"    \");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, userDoc, editingJob, updateUser]\r\n  );\r\n\r\n  const handleEditJob = useCallback((jobToEdit) => {\r\n    if (jobToEdit) {\r\n      setEditingJob(jobToEdit);\r\n      setAdminNewJobTitle(jobToEdit.title);\r\n      setAdminSelectedMenu(\"jobSettings\");\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  // Task management handlers\r\n  const handleAddTaskClick = useCallback((jobId = null, isJobTask = false) => {\r\n    setIsJobTaskForForm(isJobTask);\r\n    setCurrentJobIdForTask(jobId);\r\n    setAdminNewTaskName(\"\");\r\n    setAdminNewTaskReward(\"\");\r\n    setAdminNewTaskMaxClicks(\"5\");\r\n    setEditingTask(null);\r\n    setAdminSelectedMenu(\"taskManagement\");\r\n    setShowAddTaskForm(true);\r\n    setShowAdminSettingsModal(true);\r\n  }, []);\r\n\r\n  const handleEditTask = useCallback((taskToEdit, jobId = null) => {\r\n    if (taskToEdit) {\r\n      setEditingTask(taskToEdit);\r\n      setAdminNewTaskName(taskToEdit.name);\r\n      setAdminNewTaskReward(String(taskToEdit.reward || 0));\r\n      setAdminNewTaskMaxClicks(String(taskToEdit.maxClicks || 5));\r\n      setIsJobTaskForForm(!!jobId);\r\n      setCurrentJobIdForTask(jobId);\r\n      setAdminSelectedMenu(\"taskManagement\");\r\n      setShowAddTaskForm(true);\r\n      setShowAdminSettingsModal(true);\r\n    } else {\r\n      alert(\"    .\");\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveTask = useCallback(async () => {\r\n    if (!db || !userDoc?.classCode) {\r\n      alert(\"      .\");\r\n      return;\r\n    }\r\n\r\n    const name = adminNewTaskName.trim();\r\n    const reward = parseInt(adminNewTaskReward, 10);\r\n    const maxClicks = parseInt(adminNewTaskMaxClicks, 10);\r\n\r\n    if (\r\n      !name ||\r\n      isNaN(reward) ||\r\n      reward < 0 ||\r\n      isNaN(maxClicks) ||\r\n      maxClicks <= 0\r\n    ) {\r\n      alert(\r\n        \" . (, : 0  ,  : 1  )\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    const taskData = {\r\n      name,\r\n      reward,\r\n      maxClicks,\r\n      clicks: editingTask?.clicks || 0,\r\n    };\r\n\r\n    try {\r\n      if (editingTask) {\r\n        const taskId = editingTask.id;\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (\r\n            !jobSnap.exists() ||\r\n            jobSnap.data().classCode !== userDoc.classCode\r\n          ) {\r\n            throw new Error(\"      .\");\r\n          }\r\n          const jobTasks = jobSnap.data().tasks || [];\r\n          const taskIndex = jobTasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex === -1) {\r\n            throw new Error(\"     .\");\r\n          }\r\n          const updatedTasks = [...jobTasks];\r\n          updatedTasks[taskIndex] = { ...updatedTasks[taskIndex], ...taskData };\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskId);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: taskRef,\r\n            data: {\r\n              ...taskData,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        }\r\n        setShowAddTaskForm(false);\r\n        setEditingTask(null);\r\n        setShowAdminSettingsModal(false);\r\n        alert(` .`);\r\n      } else {\r\n        const newTaskId = generateId();\r\n        const newTaskDataWithId = { ...taskData, id: newTaskId, clicks: 0 };\r\n        if (isJobTaskForForm && currentJobIdForTask) {\r\n          const jobRef = doc(db, \"jobs\", currentJobIdForTask);\r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: arrayUnion(newTaskDataWithId),\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const newTaskRef = doc(db, \"commonTasks\", newTaskId);\r\n          batchManager.addWrite({\r\n            type: 'set',\r\n            ref: newTaskRef,\r\n            data: {\r\n              ...newTaskDataWithId,\r\n              createdAt: serverTimestamp(),\r\n              updatedAt: serverTimestamp(),\r\n              classCode: userDoc.classCode,\r\n            }\r\n          });\r\n        }\r\n        setAdminNewTaskName(\"\");\r\n        setAdminNewTaskReward(\"\");\r\n        setAdminNewTaskMaxClicks(\"5\");\r\n        alert(` .`);\r\n      }\r\n\r\n      //  \r\n      if (isJobTaskForForm) {\r\n        dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n      } else {\r\n        dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"handleSaveTask :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminNewTaskName,\r\n    adminNewTaskReward,\r\n    adminNewTaskMaxClicks,\r\n    editingTask,\r\n    isJobTaskForForm,\r\n    currentJobIdForTask,\r\n    generateId,\r\n    userDoc,\r\n  ]);\r\n\r\n  const handleDeleteTask = useCallback(\r\n    async (taskIdToDelete, jobId = null) => {\r\n      if (!db) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if (!window.confirm(\"   ?\")) {\r\n        return;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        if (jobId) {\r\n          const jobRef = doc(db, \"jobs\", jobId);\r\n          const jobSnap = await getDoc(jobRef);\r\n          if (!jobSnap.exists()) {\r\n            throw new Error(\"    .\");\r\n          }\r\n          const tasks = jobSnap.data().tasks || [];\r\n          const updatedTasks = tasks.filter((t) => t.id !== taskIdToDelete);\r\n\r\n          //   \r\n          batchManager.addWrite({\r\n            type: 'update',\r\n            ref: jobRef,\r\n            data: {\r\n              tasks: updatedTasks,\r\n              updatedAt: serverTimestamp(),\r\n            }\r\n          });\r\n        } else {\r\n          const taskRef = doc(db, \"commonTasks\", taskIdToDelete);\r\n          batchManager.addWrite({\r\n            type: 'delete',\r\n            ref: taskRef,\r\n            data: null\r\n          });\r\n        }\r\n\r\n        if (editingTask?.id === taskIdToDelete) {\r\n          setShowAddTaskForm(false);\r\n          setEditingTask(null);\r\n        }\r\n\r\n        setShowAdminSettingsModal(false);\r\n        alert(\" .\");\r\n\r\n        //  \r\n        if (jobId) {\r\n          dataCache.invalidate(`jobs_${userDoc.classCode}`);\r\n        } else {\r\n          dataCache.invalidate(`commonTasks_${userDoc.classCode}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleDeleteTask :\", error);\r\n        alert(\"    : \" + error.message);\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [editingTask, userDoc]\r\n  );\r\n\r\n  // Job selection handlers\r\n  const handleSelectJobClick = useCallback(() => {\r\n    setViewMode(\"selectJob\");\r\n  }, []);\r\n\r\n  const handleConfirmJobSelection = useCallback(\r\n    async (newlySelectedJobIds) => {\r\n      if (!user?.uid) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const idsToSave = Array.isArray(newlySelectedJobIds)\r\n        ? newlySelectedJobIds\r\n        : [];\r\n      setAppLoading(true);\r\n\r\n      try {\r\n        const success = await updateUser({ selectedJobIds: idsToSave });\r\n        if (success) {\r\n          setUserDoc({ ...userDoc, selectedJobIds: idsToSave }); // Optimistic update\r\n          setViewMode(\"list\");\r\n          alert(\"  .\");\r\n        } else {\r\n          alert(\"     .\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"handleConfirmJobSelection :\", error);\r\n        alert(\"       .\");\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [user, updateUser]\r\n  );\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setViewMode(\"list\");\r\n  }, []);\r\n\r\n  const handleTaskEarnCoupon = useCallback(\r\n    async (taskId, jobId = null, isJobTask = false, cardType = null, rewardAmount = null) => {\r\n      if (isHandlingTask) return;\r\n      if (!userDoc?.id) {\r\n        alert(\"   .\");\r\n        return;\r\n      }\r\n\r\n      //   :    \r\n      if (isJobTask && jobId) {\r\n        const taskKey = `${jobId}_${taskId}`;\r\n        const currentClicks = (userDoc.completedJobTasks || {})[taskKey] || 0;\r\n        const jobTask = jobs\r\n          .find(j => j.id === jobId)\r\n          ?.tasks?.find(t => t.id === taskId);\r\n\r\n        if (jobTask && jobTask.maxClicks > 0 && currentClicks >= jobTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskKey, currentClicks, maxClicks: jobTask.maxClicks });\r\n          return;\r\n        }\r\n      } else if (!isJobTask) {\r\n        const currentClicks = (userDoc.completedTasks || {})[taskId] || 0;\r\n        const commonTask = commonTasks?.find(t => t.id === taskId);\r\n\r\n        if (commonTask && commonTask.maxClicks > 0 && currentClicks >= commonTask.maxClicks) {\r\n          console.warn(\"[Dashboard]    :\", { taskId, currentClicks, maxClicks: commonTask.maxClicks });\r\n          return;\r\n        }\r\n      }\r\n\r\n      setIsHandlingTask(true);\r\n      console.log(\"[Dashboard]    :\", { taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n      //   :   \r\n      let expectedCashReward = 0;\r\n      let expectedCouponReward = 0;\r\n\r\n      //    cardType rewardAmount \r\n      if (cardType && rewardAmount) {\r\n        if (cardType === \"cash\") {\r\n          expectedCashReward = rewardAmount;\r\n        } else if (cardType === \"coupon\") {\r\n          expectedCouponReward = rewardAmount;\r\n        }\r\n      }\r\n\r\n      const prevUserDoc = { ...userDoc };\r\n\r\n      //  UI \r\n      const optimisticCash = userDoc.cash + expectedCashReward;\r\n      const optimisticCoupons = userDoc.coupons + expectedCouponReward;\r\n\r\n      if (isJobTask && jobId) {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedJobTasks: {\r\n            ...(prevDoc.completedJobTasks || {}),\r\n            [`${jobId}_${taskId}`]: ((prevDoc.completedJobTasks || {})[`${jobId}_${taskId}`] || 0) + 1,\r\n          }\r\n        }));\r\n      } else {\r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          cash: optimisticCash,\r\n          coupons: optimisticCoupons,\r\n          completedTasks: {\r\n            ...(prevDoc.completedTasks || {}),\r\n            [taskId]: (prevDoc.completedTasks?.[taskId] || 0) + 1,\r\n          }\r\n        }));\r\n      }\r\n\r\n      try {\r\n        const completeTaskFunction = httpsCallable(functions, \"completeTask\");\r\n        const result = await completeTaskFunction({ taskId, jobId, isJobTask, cardType, rewardAmount });\r\n\r\n        const resultData = result.data;\r\n        console.log(\" []   :\", resultData);\r\n\r\n        if (resultData.success) {\r\n          //     \r\n          const newCash = typeof resultData.updatedCash === 'number' ? resultData.updatedCash : optimisticCash;\r\n          const newCoupons = typeof resultData.updatedCoupons === 'number' ? resultData.updatedCoupons : optimisticCoupons;\r\n\r\n          console.log(` []  :  ${optimisticCash},  ${optimisticCoupons}   :  ${newCash},  ${newCoupons}`);\r\n\r\n          setUserDoc(prevDoc => ({ ...prevDoc, cash: newCash, coupons: newCoupons }));\r\n\r\n          alert(resultData.message);\r\n        } else {\r\n          throw new Error(resultData.message || \"    \");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[Dashboard]      :\", error);\r\n        alert(`  : ${error.message}`);\r\n\r\n        // :   \r\n        setUserDoc(prevUserDoc);\r\n      } finally {\r\n        setIsHandlingTask(false);\r\n      }\r\n    },\r\n    [isHandlingTask, userDoc, commonTasks, jobs, setUserDoc]\r\n  );\r\n\r\n  // Admin settings handlers\r\n  const handleOpenAdminSettings = useCallback((tabName = \"generalSettings\") => {\r\n    setAdminGoalAmountInput(String(classCouponGoal));\r\n    setAdminCouponValueInput(String(couponValue));\r\n    setAdminSelectedMenu(tabName);\r\n    setShowAdminSettingsModal(true);\r\n  }, [classCouponGoal, couponValue]);\r\n\r\n  const handleSaveAdminSettings = useCallback(async () => {\r\n    console.log(\"--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---\");\r\n    if (!db) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    const newGoal = parseInt(adminGoalAmountInput, 10);\r\n    const newValue = parseInt(adminCouponValueInput, 10);\r\n\r\n    if (isNaN(newGoal) || newGoal <= 0 || isNaN(newValue) || newValue <= 0) {\r\n      alert(\"      (0  ).\");\r\n      return;\r\n    }\r\n\r\n    setAppLoading(true);\r\n    try {\r\n      const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n      const settingsSnap = await getDoc(settingsRef);\r\n\r\n      if (\r\n        !settingsSnap.exists() ||\r\n        settingsSnap.data().couponValue !== newValue\r\n      ) {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: settingsRef,\r\n          data: { couponValue: newValue, updatedAt: serverTimestamp() }\r\n        });\r\n      }\r\n\r\n      if (currentGoalId && isAdmin?.()) {\r\n        try {\r\n          const goalRef = doc(db, \"goals\", currentGoalId);\r\n          // setDoc with merge: true ensures we don't overwrite existing fields like progress.\r\n          // This safely updates the target amount or creates the document if it doesn't exist.\r\n          await setDoc(goalRef, {\r\n            targetAmount: newGoal,\r\n            classCode: userDoc.classCode,\r\n            updatedAt: serverTimestamp(),\r\n          }, { merge: true });\r\n\r\n        } catch (goalError) {\r\n          console.warn(\r\n            \"       :\",\r\n            goalError.code\r\n          );\r\n        }\r\n      }\r\n\r\n      setCouponValue(newValue);\r\n      if (currentGoalId && isAdmin?.()) {\r\n        setClassCouponGoal(newGoal);\r\n      }\r\n      setShowAdminSettingsModal(false);\r\n      alert(\"  .\");\r\n\r\n      //  \r\n      dataCache.invalidate('mainSettings');\r\n      if (currentGoalId) {\r\n        dataCache.invalidate(`goal_${currentGoalId}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      alert(\"    : \" + error.message);\r\n    } finally {\r\n      setAppLoading(false);\r\n    }\r\n  }, [\r\n    adminGoalAmountInput,\r\n    adminCouponValueInput,\r\n    currentGoalId,\r\n    userDoc,\r\n    isAdmin,\r\n  ]);\r\n\r\n  // Class code management -     \r\n  const loadClassCodes = useCallback(async () => {\r\n    if (!db || !isAdmin?.()) return;\r\n\r\n    //  \r\n    const cached = dataCache.get('classCodes');\r\n    if (cached) {\r\n      setClassCodes(cached.validCodes || []);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const codeRef = doc(db, \"settings\", \"classCodes\");\r\n      const codeDoc = await getDoc(codeRef);\r\n\r\n      if (codeDoc.exists()) {\r\n        const codes = Array.isArray(codeDoc.data().validCodes)\r\n          ? codeDoc.data().validCodes\r\n          : [];\r\n        setClassCodes(codes);\r\n        dataCache.set('classCodes', codeDoc.data(), CACHE_TTL.CLASS_CODES);\r\n      } else {\r\n        batchManager.addWrite({\r\n          type: 'set',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [],\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n        setClassCodes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setClassCodes([]);\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin?.()) {\r\n      loadClassCodes();\r\n    }\r\n  }, [isAdmin, loadClassCodes]);\r\n\r\n  const handleAddClassCode = useCallback(\r\n    async (codeToAdd) => {\r\n      if (!db) return false;\r\n\r\n      const trimmedCode = codeToAdd.trim();\r\n      if (!trimmedCode) {\r\n        alert(\"  .\");\r\n        return false;\r\n      }\r\n\r\n      if (classCodes.includes(trimmedCode)) {\r\n        alert(\"   .\");\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n        const currentValidCodes = codeSnap.exists()\r\n          ? codeSnap.data().validCodes || []\r\n          : [];\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: [...currentValidCodes, trimmedCode],\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => [...prev, trimmedCode]);\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     \");\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    [classCodes]\r\n  );\r\n\r\n  const handleRemoveClassCode = useCallback(\r\n    async (codeToRemove) => {\r\n      if (!db) return false;\r\n\r\n      if (!window.confirm(`'${codeToRemove}'  ?`)) {\r\n        return false;\r\n      }\r\n\r\n      setAppLoading(true);\r\n      try {\r\n        const codeRef = doc(db, \"settings\", \"classCodes\");\r\n        const codeSnap = await getDoc(codeRef);\r\n\r\n        if (!codeSnap.exists()) {\r\n          throw new Error(\"     .\");\r\n        }\r\n\r\n        const currentValidCodes = codeSnap.data().validCodes || [];\r\n        const updatedCodes = currentValidCodes.filter(\r\n          (code) => code !== codeToRemove\r\n        );\r\n\r\n        batchManager.addWrite({\r\n          type: 'update',\r\n          ref: codeRef,\r\n          data: {\r\n            validCodes: updatedCodes,\r\n            updatedAt: serverTimestamp(),\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n\r\n        //  \r\n        setClassCodes(prev => prev.filter(code => code !== codeToRemove));\r\n\r\n        //  \r\n        dataCache.invalidate('classCodes');\r\n\r\n        return true;\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        alert(\"     : \" + error.message);\r\n        return false;\r\n      } finally {\r\n        setAppLoading(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  //   \r\n  const handleForceRefresh = useCallback(() => {\r\n    //  \r\n    dataCache.clear();\r\n\r\n    //  \r\n    realtimeManager.current.removeAllListeners();\r\n    if (userDoc?.classCode) {\r\n      setupPolling(userDoc.classCode);\r\n    }\r\n\r\n    //   \r\n    loadTasksData(true);\r\n  }, [loadTasksData, userDoc?.classCode, setupPolling]);\r\n\r\n  const handleManualTaskReset = useCallback(async () => {\r\n    console.log(\"[Dashboard]    \");\r\n    if (!userDoc?.classCode) {\r\n      console.error(\"[Dashboard]      .\");\r\n      alert(\"   .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${userDoc.classCode}'    ' '   ?\\n\\n    .`)) {\r\n      console.log(\"[Dashboard]   .\");\r\n      return;\r\n    }\r\n\r\n    console.log(`[Dashboard] ${userDoc.classCode}   ...`);\r\n    setAppLoading(true);\r\n    try {\r\n      const manualResetClassTasks = httpsCallable(functions, 'manualResetClassTasks');\r\n      const result = await manualResetClassTasks({ classCode: userDoc.classCode });\r\n      console.log(\"[Dashboard]    :\", result.data);\r\n\r\n      if (result.data.success) {\r\n        //  ,        UI \r\n\r\n        //       \r\n        setUserDoc(prevDoc => ({\r\n          ...prevDoc,\r\n          completedTasks: {},      //   \r\n          completedJobTasks: {},   //   \r\n        }));\r\n\r\n        // localStorage    \r\n        const today = new Date().toDateString();\r\n        localStorage.setItem('lastTaskResetDate', today);\r\n\r\n        alert(` !\\n${result.data.message}`);\r\n        console.log(`[Dashboard]  : ${result.data.message}`);\r\n\r\n      } else {\r\n        throw new Error(result.data.message || \"   \");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[Dashboard]   :\", error);\r\n      alert(`:   .\\n\\n${error.message}`);\r\n    } finally {\r\n      setAppLoading(false);\r\n      console.log(\"[Dashboard]    \");\r\n    }\r\n  }, [userDoc?.classCode, setUserDoc, setJobs]);\r\n\r\n  // Loading and error states\r\n  if (authLoading || appLoading) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <LoadingState message=\"  ...\" />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\" \"\r\n          description=\"   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc?.id) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"   \"\r\n          description=\"    .   .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <PageContainer className=\"flex items-center justify-center\">\r\n        <EmptyState\r\n          icon={ListTodo}\r\n          title=\"  \"\r\n          description=\"   .     .\"\r\n        />\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  const userId = user?.uid;\r\n  //    ( ->  -> displayName -> \"\")\r\n  const userNickname = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  return (\r\n    <div className=\"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0\">\r\n      {/*   -   (     ) */}\r\n      {!adminTabMode && (\r\n        <section className=\"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30\">\r\n              <ListTodo className=\"w-4 h-4\" />\r\n            </div>\r\n            <div className=\"leading-tight\">\r\n              <h2 className=\"text-sm md:text-base font-bold text-white\"> </h2>\r\n              <p className=\"text-[11px] text-slate-400\">{userNickname},  !</p>\r\n            </div>\r\n          </div>\r\n          {isAdmin?.() && viewMode === \"list\" && !showAdminSettingsModal && (\r\n            <div className=\"flex flex-wrap gap-1.5\">\r\n              <ActionButton variant=\"primary\" icon={Settings} onClick={() => handleOpenAdminSettings(\"generalSettings\")} size=\"sm\"> </ActionButton>\r\n              <ActionButton variant=\"success\" icon={RefreshCw} onClick={handleForceRefresh} size=\"sm\"></ActionButton>\r\n              <ActionButton variant=\"danger\" icon={RotateCcw} onClick={handleManualTaskReset} size=\"sm\" title=\"     \"> </ActionButton>\r\n            </div>\r\n          )}\r\n          {viewMode === \"selectJob\" && (\r\n            <ActionButton variant=\"ghost\" icon={ChevronLeft} onClick={handleCancelForm}></ActionButton>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {viewMode === \"list\" && !showAdminSettingsModal && !adminTabMode && (\r\n        <>\r\n          {/*     */}\r\n          <div className=\"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6\">\r\n            {/*     -   */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Briefcase className=\"w-5 h-5 text-white\" />\r\n                <h3 className=\"text-base md:text-lg font-bold text-white\">  </h3>\r\n              </div>\r\n              <ActionButton\r\n                variant=\"outline\"\r\n                icon={Plus}\r\n                onClick={handleSelectJobClick}\r\n                size=\"sm\"\r\n                className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n              >\r\n                 /\r\n              </ActionButton>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {jobsToShow.length > 0 ? (\r\n                  jobsToShow.map((job) => (\r\n                    <JobList\r\n                      key={job.id}\r\n                      job={job}\r\n                      isAdmin={isAdmin?.()}\r\n                      onEditJob={() => handleEditJob(job)}\r\n                      onDeleteJob={() => handleDeleteJob(job.id)}\r\n                      onAddTask={() => handleAddTaskClick(job.id, true)}\r\n                      onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                        handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                      }\r\n                      onEditTask={(task) => handleEditTask(task, job.id)}\r\n                      onDeleteTask={(taskId) =>\r\n                        handleDeleteTask(taskId, job.id)\r\n                      }\r\n                      isHandlingTask={isHandlingTask}\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <div className=\"col-span-full\">\r\n                    <EmptyState\r\n                      icon={Briefcase}\r\n                      title=\"  \"\r\n                      description=\"' /'    .\"\r\n                      action={\r\n                        <ActionButton\r\n                          variant=\"primary\"\r\n                          icon={Plus}\r\n                          onClick={handleSelectJobClick}\r\n                        >\r\n                           \r\n                        </ActionButton>\r\n                      }\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div className=\"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm\">\r\n                {/*    -   */}\r\n                <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ListTodo className=\"w-5 h-5 text-white\" />\r\n                    <h3 className=\"text-base md:text-lg font-bold text-white\"> </h3>\r\n                  </div>\r\n                  {isAdmin?.() && (\r\n                    <ActionButton\r\n                      variant=\"outline\"\r\n                      icon={Plus}\r\n                      onClick={() => handleAddTaskClick(null, false)}\r\n                      size=\"sm\"\r\n                      className=\"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30\"\r\n                    >\r\n                        \r\n                    </ActionButton>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"p-4 md:p-6 bg-[#0a0a12]/50\">\r\n                  <CommonTaskList\r\n                    tasks={commonTasksWithUserProgress}\r\n                    isAdmin={isAdmin?.()}\r\n                    onEarnCoupon={(taskId, jobId, isJobTask, cardType, rewardAmount) =>\r\n                      handleTaskEarnCoupon(taskId, jobId, isJobTask, cardType, rewardAmount)\r\n                    }\r\n                    onEditTask={(taskId) => handleEditTask(commonTasks.find(t => t.id === taskId), null)}\r\n                    onDeleteTask={(taskId) => handleDeleteTask(taskId, null)}\r\n                    isHandlingTask={isHandlingTask}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {viewMode === \"selectJob\" && (\r\n        <SelectMultipleJobsView\r\n          availableJobs={jobs}\r\n          currentSelectedJobIds={currentSelectedJobIdsFromUserDoc}\r\n          onConfirmSelection={handleConfirmJobSelection}\r\n          onCancel={handleCancelForm}\r\n        />\r\n      )}\r\n\r\n      {isAdmin?.() && (\r\n        <AdminSettingsModal\r\n          isAdmin={isAdmin?.()}\r\n          isSuperAdmin={isSuperAdmin?.()}\r\n          userClassCode={userDoc?.classCode}\r\n          showAdminSettingsModal={showAdminSettingsModal}\r\n          setShowAdminSettingsModal={setShowAdminSettingsModal}\r\n          adminSelectedMenu={adminSelectedMenu}\r\n          setAdminSelectedMenu={setAdminSelectedMenu}\r\n          classCodes={classCodes}\r\n          onAddClassCode={handleAddClassCode}\r\n          onRemoveClassCode={handleRemoveClassCode}\r\n          newGoalAmount={adminGoalAmountInput}\r\n          setNewGoalAmount={setAdminGoalAmountInput}\r\n          adminCouponValue={adminCouponValueInput}\r\n          setAdminCouponValue={setAdminCouponValueInput}\r\n          handleSaveAdminSettings={handleSaveAdminSettings}\r\n          jobs={jobs}\r\n          adminNewJobTitle={adminNewJobTitle}\r\n          setAdminNewJobTitle={setAdminNewJobTitle}\r\n          adminEditingJob={editingJob}\r\n          setAdminEditingJob={setEditingJob}\r\n          handleSaveJob={handleSaveJob}\r\n          handleDeleteJob={handleDeleteJob}\r\n          handleEditJob={handleEditJob}\r\n          commonTasks={commonTasks}\r\n          showAddTaskForm={showAddTaskForm}\r\n          setShowAddTaskForm={setShowAddTaskForm}\r\n          adminNewTaskName={adminNewTaskName}\r\n          setAdminNewTaskName={setAdminNewTaskName}\r\n          adminNewTaskReward={adminNewTaskReward}\r\n          setAdminNewTaskReward={setAdminNewTaskReward}\r\n          adminNewTaskMaxClicks={adminNewTaskMaxClicks}\r\n          setAdminNewTaskMaxClicks={setAdminNewTaskMaxClicks}\r\n          adminEditingTask={editingTask}\r\n          setAdminEditingTask={setEditingTask}\r\n          handleSaveTask={handleSaveTask}\r\n          handleEditTask={handleEditTask}\r\n          handleDeleteTask={handleDeleteTask}\r\n          taskFormJobId={currentJobIdForTask}\r\n          taskFormIsJobTask={isJobTaskForForm}\r\n          handleAddTaskClick={handleAddTaskClick}\r\n        />\r\n      )}\r\n\r\n      {/*      */}\r\n      {showDailyRewardPopup && userDoc?.uid && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: \"rgba(0, 0, 0, 0.7)\",\r\n            backdropFilter: \"blur(4px)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n            padding: \"20px\",\r\n            animation: \"fadeIn 0.3s ease-out\",\r\n          }}\r\n          onClick={() => setShowDailyRewardPopup(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              maxWidth: \"400px\",\r\n              animation: \"slideUp 0.3s ease-out\",\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/*   */}\r\n            <div style={{ textAlign: \"right\", marginBottom: \"8px\" }}>\r\n              <button\r\n                onClick={() => setShowDailyRewardPopup(false)}\r\n                style={{\r\n                  background: \"rgba(255,255,255,0.2)\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  width: \"32px\",\r\n                  height: \"32px\",\r\n                  borderRadius: \"50%\",\r\n                  cursor: \"pointer\",\r\n                  fontSize: \"18px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*    */}\r\n            <DailyRewardBanner\r\n              userId={userDoc.uid}\r\n              onClaim={handleDailyRewardClaim}\r\n            />\r\n\r\n            {/*    */}\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              marginTop: \"12px\",\r\n              color: \"rgba(255,255,255,0.6)\",\r\n              fontSize: \"13px\",\r\n            }}>\r\n                \r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","// src/ItemStore.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useItems } from \"../../contexts/ItemContext\"; // ItemContext classCode   \r\nimport \"./ItemStore.css\";\r\nimport \"../admin/AdminPanel.css\";\r\nimport LoginWarning from \"../../LoginWarning\";\r\nimport AdminItemPage from \"../admin/AdminItemPage\"; // AdminPanel  AdminItemPage import .\r\n\r\nconst StockBadge = ({ stock }) => {\r\n  if (stock === undefined || stock === null) return null;\r\n  let badgeClass = \"\";\r\n  if (stock <= 0) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 3) {\r\n    badgeClass = \"stock-low\";\r\n  } else if (stock <= 5) {\r\n    badgeClass = \"stock-medium\";\r\n  } else {\r\n    badgeClass = \"stock-high\";\r\n  }\r\n  const label = stock <= 0 ? \"\" : `(${stock})`;\r\n  return <span className={`stock-badge ${badgeClass}`}>{label}</span>;\r\n};\r\n\r\nconst ItemStore = () => {\r\n  const { user, userDoc, isAdmin } = useAuth() || {\r\n    user: null,\r\n    userDoc: null,\r\n    isAdmin: () => false,\r\n  };\r\n\r\n  const {\r\n    items,\r\n    purchaseItem,\r\n    deleteItem,\r\n    updateItem,\r\n    addItem,\r\n    setAdminPriceIncrease,\r\n    adminPriceIncreasePercentage,\r\n  } = useItems() || {\r\n    items: [],\r\n    purchaseItem: null,\r\n    updateItem: null,\r\n    deleteItem: null,\r\n    addItem: null,\r\n    setAdminPriceIncrease: null,\r\n    adminPriceIncreasePercentage: 10,\r\n  };\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [notification, setNotification] = useState(null);\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [priceIncreasePercentage, setPriceIncreasePercentage] = useState(\r\n    adminPriceIncreasePercentage || 10\r\n  );\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [purchaseQuantities, setPurchaseQuantities] = useState({});\r\n\r\n  const isCurrentUserAdmin = isAdmin();\r\n  const currentUserClassCode = userDoc?.classCode; //   classCode\r\n\r\n  useEffect(() => {\r\n    if (items && Array.isArray(items)) {\r\n      const itemsWithDefaults = items.map((item) => ({\r\n        ...item,\r\n        initialStock: item.initialStock ?? item.stock ?? 10,\r\n      }));\r\n      const availableItems = itemsWithDefaults.filter(\r\n        (item) => item?.available !== false\r\n      );\r\n      setShopItems(availableItems);\r\n\r\n      const initialQuantities = {};\r\n      availableItems.forEach((item) => {\r\n        initialQuantities[item.id] = 1;\r\n      });\r\n      setPurchaseQuantities(initialQuantities);\r\n    } else {\r\n      setShopItems([]);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n  }, [adminPriceIncreasePercentage]);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth <= 768);\r\n    checkMobile();\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const handleEditItem = (item) => {\r\n    setEditingItem({ ...item });\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = (item) => {\r\n    setItemToDelete(item);\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const handleDeleteItem = async () => {\r\n    if (!deleteItem || !itemToDelete || !currentUserClassCode) {\r\n      showNotification(\"error\", \"      \");\r\n      return;\r\n    }\r\n    try {\r\n      await deleteItem(itemToDelete.id); // classCode   ID \r\n      showNotification(\"success\", `${itemToDelete.name}  `);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setItemToDelete(null);\r\n    }\r\n  };\r\n\r\n  const handlePriceIncreaseChange = (value) => {\r\n    const numericValue = parseInt(value, 10);\r\n    if (isNaN(numericValue) || numericValue < 0) {\r\n      showNotification(\"error\", \"  0   .\");\r\n      setPriceIncreasePercentage(adminPriceIncreasePercentage || 10);\r\n      if (setAdminPriceIncrease)\r\n        setAdminPriceIncrease(\r\n          adminPriceIncreasePercentage || 10\r\n        );\r\n      return;\r\n    }\r\n    setPriceIncreasePercentage(numericValue);\r\n    if (setAdminPriceIncrease)\r\n      setAdminPriceIncrease(numericValue);\r\n  };\r\n\r\n  const handleQuantityChange = (itemId, value) => {\r\n    const item = shopItems.find((item) => item.id === itemId);\r\n    if (!item) return;\r\n    let quantity = parseInt(value, 10);\r\n    if (isNaN(quantity) || quantity < 1) quantity = 1;\r\n    if (quantity > item.stock) quantity = item.stock;\r\n    setPurchaseQuantities((prev) => ({ ...prev, [itemId]: quantity }));\r\n  };\r\n\r\n  const handlePurchase = async (item) => {\r\n    if (!item || item.stock <= 0) return showNotification(\"error\", \" \");\r\n    if (!user || !currentUserClassCode)\r\n      return showNotification(\"error\", \"    \");\r\n\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    if (currentUserCash === undefined)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    const totalPrice = item.price * quantity;\r\n    if (currentUserCash < totalPrice)\r\n      return showNotification(\"error\", \" \");\r\n\r\n    if (!purchaseItem)\r\n      return showNotification(\"error\", \"  \");\r\n\r\n    try {\r\n      const purchaseResult = await purchaseItem(item.id, quantity);\r\n\r\n      if (purchaseResult.success) {\r\n        showNotification(\"success\", `${item.name} ${quantity}  !`);\r\n      } else {\r\n        showNotification(\r\n          \"error\",\r\n          purchaseResult.message || \" .   .\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", error.message || \"   .\");\r\n    }\r\n  };\r\n\r\n  const handleAddItemViaAdminPanel = async (newItemData) => {\r\n    if (!addItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // addItem  newItemData    ItemContext \r\n      const result = await addItem(newItemData);\r\n      if (result.success) {\r\n        showNotification(\"success\", `${newItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleUpdateItemViaAdminPanel = async (updatedItemData) => {\r\n    if (!updateItem || !currentUserClassCode) {\r\n      showNotification(\r\n        \"error\",\r\n        \"        \"\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      // []  ID    \r\n      const { id: itemId, ...updatesToApply } = updatedItemData;\r\n\r\n      if (!itemId) {\r\n        showNotification(\"error\", \"  ID .\");\r\n        return false;\r\n      }\r\n\r\n      // [] updateItem  (itemId, updatesToApply)    \r\n      const result = await updateItem(itemId, updatesToApply);\r\n\r\n      if (result.success) {\r\n        showNotification(\"success\", `${updatedItemData.name}  `);\r\n        return true;\r\n      }\r\n      showNotification(\"error\", result.message || \"  \");\r\n      return false;\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      showNotification(\"error\", \"    .\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getButtonText = (item) => {\r\n    if (item.stock <= 0) return \"\";\r\n    const currentUserCash =\r\n      userDoc?.cash !== undefined ? userDoc.cash : user?.cash;\r\n    const quantity = purchaseQuantities[item.id] || 1;\r\n    const totalPrice = item.price * quantity;\r\n    if (user && currentUserCash !== undefined && currentUserCash < totalPrice)\r\n      return \" \";\r\n    return \"\";\r\n  };\r\n\r\n  const canOpenAdminPanel = isCurrentUserAdmin && currentUserClassCode;\r\n\r\n  return (\r\n    <div\r\n      className={`page-container ${showAdminPanel && canOpenAdminPanel ? \"admin-mode\" : \"\"\r\n        }`}\r\n    >\r\n      <div className=\"page-header-container\">\r\n        <h2 className=\"page-title\">\r\n          {showAdminPanel && canOpenAdminPanel\r\n            ? \" \"\r\n            : \" \"}\r\n          {currentUserClassCode && (\r\n            <span\r\n              style={{ fontSize: \"0.7em\", marginLeft: \"10px\", color: \"#777\" }}\r\n            >\r\n              (: {currentUserClassCode})\r\n            </span>\r\n          )}\r\n        </h2>\r\n        {isCurrentUserAdmin && (\r\n          <button\r\n            onClick={() => {\r\n              if (!currentUserClassCode) {\r\n                showNotification(\r\n                  \"error\",\r\n                  \"        .\"\r\n                );\r\n                return;\r\n              }\r\n              setShowAdminPanel((prev) => !prev);\r\n              if (showAdminPanel) setEditingItem(null);\r\n            }}\r\n            className=\"admin-icon-button\"\r\n            title={showAdminPanel ? \" \" : \" \"}\r\n          >\r\n            {showAdminPanel && canOpenAdminPanel ? \"\" : \"\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {notification && (\r\n        <div\r\n          className={`notification ${notification.type === \"success\"\r\n              ? \"bg-green-100 text-green-800\"\r\n              : notification.type === \"error\"\r\n                ? \"bg-red-100 text-red-800\"\r\n                : \"bg-blue-100 text-blue-800\"\r\n            }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {showDeleteConfirm && canOpenAdminPanel && (\r\n        <div className=\"delete-confirm-modal\">\r\n          <div className=\"delete-confirm-content\">\r\n            <h3>  </h3>\r\n            <p>\r\n              <strong>{itemToDelete?.name}</strong>  \r\n              ? <br />    .\r\n            </p>\r\n            <div className=\"delete-confirm-buttons\">\r\n              <button\r\n                onClick={handleDeleteItem}\r\n                className=\"delete-confirm-button\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteConfirm(false);\r\n                  setItemToDelete(null);\r\n                }}\r\n                className=\"delete-cancel-button\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showAdminPanel && canOpenAdminPanel ? (\r\n        <div className=\"admin-panel-full-container\">\r\n          <AdminItemPage\r\n            classCode={currentUserClassCode}\r\n            editingItemFromStore={editingItem}\r\n            onAddItem={handleAddItemViaAdminPanel}\r\n            onUpdateItem={handleUpdateItemViaAdminPanel}\r\n            onClose={() => {\r\n              setShowAdminPanel(false);\r\n              setEditingItem(null);\r\n            }}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {!user && <LoginWarning />}\r\n          {user &&\r\n            (!currentUserClassCode ? (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\", color: \"red\" }}\r\n              >\r\n                        . \r\n                .\r\n              </div>\r\n            ) : shopItems.length > 0 ? (\r\n              <div className=\"shop-content\">\r\n                <div className=\"content-card-section\">\r\n                  <h3 className=\"section-title\"> </h3>\r\n                  <div className=\"items-grid\">\r\n                    {shopItems.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"store-item-card shop-item-card compact-card\"\r\n                      >\r\n                        <div className=\"item-content\">\r\n                          <div className=\"item-header-compact\">\r\n                            <h3 className=\"item-name-compact\">{item.name}</h3>\r\n                            <StockBadge stock={item.stock} />\r\n                          </div>\r\n                          {item.description && item.description.trim() && (\r\n                            <p className=\"item-description-compact\">{item.description}</p>\r\n                          )}\r\n                          <div\r\n                            className={`item-actions-primary ${isMobile ? \"flex-col\" : \"\"\r\n                              }`}\r\n                          >\r\n                            <span className=\"item-price\">\r\n                              {item.price?.toLocaleString() || 0} \r\n                            </span>\r\n                            <div className=\"quantity-and-buy-container\">\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                max={item.stock}\r\n                                value={purchaseQuantities[item.id] || 1}\r\n                                onChange={(e) =>\r\n                                  handleQuantityChange(item.id, e.target.value)\r\n                                }\r\n                                className=\"quantity-input\"\r\n                                disabled={item.stock <= 0}\r\n                              />\r\n                              <button\r\n                                onClick={() => handlePurchase(item)}\r\n                                className={`buy-item-button ${isMobile ? \"w-full\" : \"\"\r\n                                  }`}\r\n                                disabled={\r\n                                  !user ||\r\n                                  item.stock <= 0 ||\r\n                                  (userDoc?.cash !== undefined\r\n                                    ? userDoc.cash\r\n                                    : user?.cash) <\r\n                                  item.price *\r\n                                  (purchaseQuantities[item.id] || 1)\r\n                                }\r\n                              >\r\n                                {getButtonText(item)}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          {isCurrentUserAdmin &&\r\n                            currentUserClassCode && (\r\n                              <div className=\"item-actions-admin\">\r\n                                <button\r\n                                  onClick={() => handleEditItem(item)}\r\n                                  className=\"edit-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteConfirm(item)}\r\n                                  className=\"delete-item-button\"\r\n                                  title=\" \"\r\n                                >\r\n                                  \r\n                                  <span className=\"admin-button-icon\"></span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"empty-message\"\r\n                style={{ padding: \"20px\", textAlign: \"center\" }}\r\n              >\r\n                <p>   .</p>\r\n                {isCurrentUserAdmin && currentUserClassCode && (\r\n                  <p>      .</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStore;","// src/MyItems.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { useItems } from \"./contexts/ItemContext\";\r\nimport \"./styles.css\";\r\nimport \"./MyItems.css\";\r\nimport LoginWarning from \"./LoginWarning\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n// Firebase\r\nimport {\r\n  db,\r\n  firebaseDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  runTransaction,\r\n  increment,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n} from \"./firebase\";\r\n\r\nconst ITEM_DEFAULT_DURATION_MS = 5 * 60 * 1000;\r\n\r\nconst formatTimeLeft = (usedTimestamp, durationMs = ITEM_DEFAULT_DURATION_MS) => {\r\n  const now = Date.now();\r\n  const timeElapsed = now - usedTimestamp;\r\n  const timeLeft = durationMs - timeElapsed;\r\n  if (timeLeft <= 0) return \"\";\r\n  const hours = Math.floor(timeLeft / (60 * 60 * 1000));\r\n  const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));\r\n  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);\r\n  let formatted = \"\";\r\n  if (hours > 0) formatted += `${hours} `;\r\n  if (minutes > 0 || hours > 0) formatted += `${minutes} `;\r\n  formatted += `${seconds} `;\r\n  return formatted.trim();\r\n};\r\n\r\nconst QuantityBadge = ({ quantity }) => {\r\n  let badgeClass = \"\";\r\n  if (quantity > 10) badgeClass = \"quantity-high\";\r\n  else if (quantity > 5) badgeClass = \"quantity-medium\";\r\n  else badgeClass = \"quantity-low\";\r\n  return <span className={`quantity-badge ${badgeClass}`}>{quantity}</span>;\r\n};\r\n\r\nconst MyItems = () => {\r\n  const { user, userDoc, users, classmates } = useAuth() || {};\r\n  const {\r\n    userItems,\r\n    useItem,\r\n    listItemForSale,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  } = useItems() || {\r\n    userItems: [],\r\n    useItem: null,\r\n    listItemForSale: null,\r\n    refreshData: null,\r\n    updateLocalUserItems: null,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [notification, setNotification] = useState(null);\r\n  const showNotification = (type, message) => {\r\n    setNotification({ type, message });\r\n    setTimeout(() => setNotification(null), 3000);\r\n  };\r\n\r\n  const groupedUserItems = useMemo(() => {\r\n    if (!userItems || userItems.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const itemsMap = new Map();\r\n\r\n    userItems.forEach(item => {\r\n      if (!item || !item.itemId || typeof item.quantity !== 'number' || item.quantity <= 0) {\r\n        return;\r\n      }\r\n\r\n      const key = item.itemId;\r\n\r\n      if (itemsMap.has(key)) {\r\n        const existingGroup = itemsMap.get(key);\r\n        existingGroup.totalQuantity += item.quantity;\r\n        existingGroup.sourceDocs.push(item);\r\n        if (item.name && !existingGroup.displayInfo.name) {\r\n          existingGroup.displayInfo.name = item.name;\r\n        }\r\n        if (item.icon && !existingGroup.displayInfo.icon) {\r\n          existingGroup.displayInfo.icon = item.icon;\r\n        }\r\n        if (item.description && !existingGroup.displayInfo.description) {\r\n          existingGroup.displayInfo.description = item.description;\r\n        }\r\n      } else {\r\n        itemsMap.set(key, {\r\n          displayInfo: {\r\n            itemId: item.itemId,\r\n            name: item.name || '   ',\r\n            icon: item.icon || '',\r\n            description: item.description || '',\r\n            type: item.type || 'general',\r\n            price: item.price || 0,\r\n            durationMs: item.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          },\r\n          totalQuantity: item.quantity,\r\n          sourceDocs: [item],\r\n        });\r\n      }\r\n    });\r\n\r\n    return Array.from(itemsMap.values()).sort((a, b) =>\r\n      a.displayInfo.name.localeCompare(b.displayInfo.name)\r\n    );\r\n  }, [userItems]);\r\n\r\n  const [recentlyUsedItems, setRecentlyUsedItems] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(\r\n        `recentlyUsedItems_${user?.uid || \"guest\"}`\r\n      );\r\n      return saved ? JSON.parse(saved) : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      localStorage.setItem(\r\n        `recentlyUsedItems_${user.uid}`,\r\n        JSON.stringify(recentlyUsedItems)\r\n      );\r\n    }\r\n  }, [recentlyUsedItems, user?.uid]);\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setRecentlyUsedItems((prevItems) => {\r\n        let itemsChanged = false;\r\n        const updatedItems = { ...prevItems };\r\n        const now = Date.now();\r\n        Object.keys(updatedItems).forEach((itemId) => {\r\n          const itemData = updatedItems[itemId];\r\n          const duration =\r\n            itemData.itemDetails?.durationMs || ITEM_DEFAULT_DURATION_MS;\r\n          if (now - itemData.usedTimestamp > duration) {\r\n            delete updatedItems[itemId];\r\n            itemsChanged = true;\r\n          }\r\n        });\r\n        return itemsChanged ? updatedItems : prevItems;\r\n      });\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const [useItemModal, setUseItemModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n  });\r\n  const [giftModal, setGiftModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n  });\r\n  const [giftRecipientUid, setGiftRecipientUid] = useState(\"\");\r\n  const [giftQuantity, setGiftQuantity] = useState(1);\r\n  const [isGifting, setIsGifting] = useState(false);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [sellToMarketModal, setSellToMarketModal] = useState({\r\n    isOpen: false,\r\n    item: null,\r\n    quantity: 1,\r\n    price: 0,\r\n  });\r\n\r\n  const handleOpenUseItemModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    setUseItemModal({ isOpen: true, item: group, quantity: 1 });\r\n  };\r\n\r\n  const handleCloseUseItemModal = () => {\r\n    setUseItemModal({ isOpen: false, item: null, quantity: 1 });\r\n  };\r\n\r\n  const handleOpenGiftModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!classmates || classmates.length === 0) {\r\n      showNotification(\"error\", \"     .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    setGiftRecipientUid(\"\");\r\n    setGiftQuantity(1);\r\n    setGiftModal({ isOpen: true, item: group });\r\n  };\r\n\r\n  const handleCloseGiftModal = () => {\r\n    setGiftModal({ isOpen: false, item: null });\r\n  };\r\n\r\n  const handleOpenSellToMarketModal = (group) => {\r\n    if (!user) {\r\n      showNotification(\"error\", \" .\");\r\n      return;\r\n    }\r\n    if (!group || group.totalQuantity <= 0) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n    if (!listItemForSale) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n    const defaultPrice = group.displayInfo.price\r\n      ? Math.max(1, Math.round(group.displayInfo.price * 0.8))\r\n      : 100;\r\n    setSellToMarketModal({\r\n      isOpen: true,\r\n      item: group,\r\n      quantity: 1,\r\n      price: defaultPrice,\r\n    });\r\n  };\r\n\r\n  const handleCloseSellToMarketModal = () => {\r\n    setSellToMarketModal({\r\n      isOpen: false,\r\n      item: null,\r\n      quantity: 1,\r\n      price: 0,\r\n    });\r\n  };\r\n\r\n  const handleSellToMarketQuantityChange = (value) => {\r\n    const maxQty = sellToMarketModal.item?.totalQuantity || 1;\r\n    const newQty = Math.max(1, Math.min(maxQty, parseInt(value) || 1));\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      quantity: newQty,\r\n    }));\r\n  };\r\n\r\n  const handleSellToMarketPriceChange = (value) => {\r\n    const newPrice = Math.max(1, parseInt(value) || 1);\r\n    setSellToMarketModal((prev) => ({\r\n      ...prev,\r\n      price: newPrice,\r\n    }));\r\n  };\r\n\r\n  const handleConfirmUseItem = async () => {\r\n    const { item: group, quantity: quantityToUse } = useItemModal;\r\n    if (!group || !quantityToUse || quantityToUse <= 0) {\r\n      showNotification(\"error\", \"    .\");\r\n      return;\r\n    }\r\n\r\n    if (group.totalQuantity < quantityToUse) {\r\n      showNotification(\"error\", \"  .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let remainingToUse = quantityToUse;\r\n      const results = [];\r\n\r\n      const sortedDocs = [...group.sourceDocs].sort((a, b) => a.quantity - b.quantity);\r\n\r\n      for (const doc of sortedDocs) {\r\n        if (remainingToUse <= 0) break;\r\n\r\n        const amountToUse = Math.min(doc.quantity, remainingToUse);\r\n        \r\n        const result = await useItem(doc.id, amountToUse);\r\n        results.push(result);\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || `   (${doc.id})`);\r\n        }\r\n\r\n        remainingToUse -= amountToUse;\r\n      }\r\n\r\n      if (remainingToUse > 0) {\r\n        throw new Error(`     . ( : ${remainingToUse})`);\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantityToUse} .`);\r\n      handleCloseUseItemModal();\r\n\r\n      setRecentlyUsedItems(prev => ({\r\n        ...prev,\r\n        [group.displayInfo.itemId]: {\r\n          usedTimestamp: Date.now(),\r\n          itemDetails: {\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            durationMs: group.displayInfo.durationMs || ITEM_DEFAULT_DURATION_MS\r\n          }\r\n        }\r\n      }));\r\n\r\n    } catch (error) {\r\n      showNotification(\"error\", `    : ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveUsedItem = (itemId) => {\r\n    setRecentlyUsedItems(prevItems => {\r\n      const updatedItems = { ...prevItems };\r\n      delete updatedItems[itemId];\r\n      return updatedItems;\r\n    });\r\n    showNotification(\"info\", \"  .\");\r\n  };\r\n\r\n  const handleSendGift = async () => {\r\n    if (isGifting) return;\r\n\r\n    const { item: group } = giftModal;\r\n    if (!user || !giftRecipientUid || !group) {\r\n      console.error('[MyItems]   :', { user: !!user, giftRecipientUid, group: !!group });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n    const quantity = Number(giftQuantity) || 1;\r\n    if (quantity <= 0 || quantity > group.totalQuantity) {\r\n      console.error('[MyItems]   :', { quantity, totalQuantity: group.totalQuantity });\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const recipient = classmates.find(c => (c.uid || c.id) === giftRecipientUid);\r\n    const recipientName = recipient ? recipient.name : '   ';\r\n\r\n    console.log('[MyItems]  :', {\r\n      : group.displayInfo.name,\r\n      : quantity,\r\n      : userDoc?.name || user.uid,\r\n      : recipientName,\r\n      UID: giftRecipientUid\r\n    });\r\n\r\n    setIsGifting(true);\r\n    let originalUserItems;\r\n    try {\r\n      //  : inventory   \r\n      const inventoryRef = collection(db, \"users\", user.uid, \"inventory\");\r\n      const allInventoryDocs = await getDocs(inventoryRef);\r\n      const actualDocs = allInventoryDocs.docs.map(doc => ({\r\n        id: doc.id,\r\n        itemId: doc.data().itemId,\r\n        name: doc.data().name,\r\n        quantity: doc.data().quantity\r\n      }));\r\n\r\n      console.log('[MyItems]   inventory   :');\r\n      console.log(':', allInventoryDocs.size);\r\n      console.log(':', actualDocs);\r\n\r\n      // itemId \r\n      const itemIdGroups = {};\r\n      actualDocs.forEach(doc => {\r\n        const key = doc.itemId || doc.id;\r\n        if (!itemIdGroups[key]) itemIdGroups[key] = [];\r\n        itemIdGroups[key].push(doc.id);\r\n      });\r\n      console.log('[MyItems] itemId :', itemIdGroups);\r\n\r\n      //       Firestore  \r\n      // group.sourceDocs  ID  \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n\r\n      console.log('[MyItems]   ID :', docIds);\r\n\r\n      //   ID   (getDoc )\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n          console.log('[MyItems]   :', { id: docSnap.id, quantity: data.quantity });\r\n        } else {\r\n          console.warn('[MyItems]   :', docId);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]      :', {\r\n        : group.sourceDocs.length,\r\n        : actualSourceDocs.length,\r\n        : actualTotalQuantity\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('     .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //      (   - Firestore )\r\n      const recipientInventoryRef = collection(db, \"users\", giftRecipientUid, \"inventory\");\r\n      const recipientQuery = query(recipientInventoryRef, where(\"itemId\", \"==\", group.displayInfo.itemId));\r\n      const recipientQuerySnapshot = await getDocs(recipientQuery);\r\n\r\n      const recipientExistingDocRef = recipientQuerySnapshot.empty ? null : recipientQuerySnapshot.docs[0].ref;\r\n\r\n      console.log('[MyItems]     ( ):', {\r\n        : !recipientQuerySnapshot.empty,\r\n        : recipientQuerySnapshot.size\r\n      });\r\n\r\n      originalUserItems = [...userItems];\r\n\r\n      const updatedUserItems = [];\r\n      let remainingToDeduct = quantity;\r\n\r\n      for (const item of userItems) {\r\n        if (item.itemId === group.displayInfo.itemId && remainingToDeduct > 0) {\r\n          const deductAmount = Math.min(item.quantity, remainingToDeduct);\r\n          const newQuantity = item.quantity - deductAmount;\r\n\r\n          if (newQuantity > 0) {\r\n            updatedUserItems.push({ ...item, quantity: newQuantity });\r\n          }\r\n\r\n          remainingToDeduct -= deductAmount;\r\n        } else {\r\n          updatedUserItems.push(item);\r\n        }\r\n      }\r\n\r\n      if (updateLocalUserItems) {\r\n        updateLocalUserItems(updatedUserItems);\r\n      }\r\n\r\n      //  :    ,     \r\n      await runTransaction(db, async (transaction) => {\r\n        // ===== 1:    =====\r\n\r\n        // 1-1.     \r\n        const senderItemSnaps = [];\r\n        for (const senderDoc of actualSourceDocs) {\r\n          const senderItemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", senderDoc.id);\r\n          const senderItemSnap = await transaction.get(senderItemRef);\r\n\r\n          if (!senderItemSnap.exists()) {\r\n            console.error('[MyItems]      :', senderDoc.id);\r\n            throw new Error('   .  .');\r\n          }\r\n\r\n          const currentQuantity = senderItemSnap.data().quantity || 0;\r\n          if (currentQuantity <= 0) {\r\n            console.error('[MyItems]      0:', senderDoc.id);\r\n            throw new Error('    .  .');\r\n          }\r\n\r\n          senderItemSnaps.push({\r\n            ref: senderItemRef,\r\n            snap: senderItemSnap,\r\n            quantity: currentQuantity\r\n          });\r\n        }\r\n\r\n        // 1-2.      ( )\r\n        let recipientItemRef = null;\r\n        let recipientCurrentQuantity = 0;\r\n\r\n        if (recipientExistingDocRef) {\r\n          //    ,    \r\n          recipientItemRef = recipientExistingDocRef;\r\n          const recipientSnap = await transaction.get(recipientItemRef);\r\n\r\n          if (recipientSnap.exists()) {\r\n            recipientCurrentQuantity = recipientSnap.data().quantity || 0;\r\n            console.log('[MyItems]     :', {\r\n              ID: recipientItemRef.id,\r\n              : recipientCurrentQuantity\r\n            });\r\n          } else {\r\n            console.warn('[MyItems]      ,  .');\r\n            recipientItemRef = null;\r\n          }\r\n        } else {\r\n          console.log('[MyItems]      ');\r\n        }\r\n\r\n        // ===== 2:    =====\r\n\r\n        let remainingToSend = quantity;\r\n        let processedAmount = 0;\r\n\r\n        // 2-1.    \r\n        for (const { ref: senderItemRef, quantity: currentQuantity } of senderItemSnaps) {\r\n          if (remainingToSend <= 0) break;\r\n\r\n          const amountFromThisDoc = Math.min(currentQuantity, remainingToSend);\r\n          const newSenderQty = currentQuantity - amountFromThisDoc;\r\n\r\n          console.log('[MyItems]  :', {\r\n            ID: senderItemRef.id,\r\n            : currentQuantity,\r\n            : amountFromThisDoc,\r\n            : newSenderQty\r\n          });\r\n\r\n          if (newSenderQty <= 0) {\r\n            transaction.delete(senderItemRef);\r\n          } else {\r\n            transaction.update(senderItemRef, { quantity: newSenderQty });\r\n          }\r\n\r\n          remainingToSend -= amountFromThisDoc;\r\n          processedAmount += amountFromThisDoc;\r\n        }\r\n\r\n        //    \r\n        if (processedAmount < quantity) {\r\n          console.error('[MyItems]   :', { : quantity, : processedAmount });\r\n          throw new Error(`  . (: ${quantity},  : ${processedAmount})`);\r\n        }\r\n\r\n        // 2-2.    \r\n        if (recipientItemRef) {\r\n          //    \r\n          console.log('[MyItems]     (  ):', {\r\n            : recipientCurrentQuantity,\r\n            : processedAmount,\r\n            : recipientCurrentQuantity + processedAmount\r\n          });\r\n          transaction.update(recipientItemRef, {\r\n            quantity: recipientCurrentQuantity + processedAmount,\r\n            updatedAt: serverTimestamp()\r\n          });\r\n        } else {\r\n          //   \r\n          console.log('[MyItems]     ( ):', { : processedAmount });\r\n          const newRecipientItemRef = firebaseDoc(recipientInventoryRef);\r\n          transaction.set(newRecipientItemRef, {\r\n            itemId: group.displayInfo.itemId,\r\n            name: group.displayInfo.name,\r\n            icon: group.displayInfo.icon,\r\n            description: group.displayInfo.description,\r\n            type: group.displayInfo.type,\r\n            quantity: processedAmount,\r\n            receivedAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          });\r\n        }\r\n      });\r\n\r\n      console.log('[MyItems]    ');\r\n      showNotification(\"success\", `${recipientName} ${group.displayInfo.name} ${quantity} .`);\r\n      handleCloseGiftModal();\r\n\r\n      setTimeout(() => {\r\n        if (refreshData) refreshData();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error('[MyItems]  :', error);\r\n\r\n      //   \r\n      if (updateLocalUserItems && originalUserItems) {\r\n        console.log('[MyItems]    -   ');\r\n        updateLocalUserItems(originalUserItems);\r\n      }\r\n\r\n      //      \r\n      showNotification(\"error\", ` : ${error.message}`);\r\n\r\n      //   \r\n      if (refreshData) {\r\n        console.log('[MyItems]   ');\r\n        try {\r\n          const result = refreshData();\r\n          if (result && typeof result.then === 'function') {\r\n            await result;\r\n          }\r\n          console.log('[MyItems]   ');\r\n        } catch (syncError) {\r\n          console.error(\"[MyItems]   :\", syncError);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsGifting(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmSellToMarket = async () => {\r\n    const { item: group, quantity, price } = sellToMarketModal;\r\n    if (!group || !quantity || !price) {\r\n      showNotification(\"error\", \"   .\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      //   Firestore   \r\n      const docIds = group.sourceDocs.map(doc => doc.id);\r\n      const actualSourceDocs = [];\r\n      let actualTotalQuantity = 0;\r\n\r\n      for (const docId of docIds) {\r\n        const docRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", docId);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          actualSourceDocs.push({\r\n            id: docSnap.id,\r\n            ...data\r\n          });\r\n          actualTotalQuantity += (data.quantity || 0);\r\n        }\r\n      }\r\n\r\n      console.log('[MyItems]   -  :', {\r\n        : quantity,\r\n        : actualTotalQuantity,\r\n        : actualSourceDocs.length\r\n      });\r\n\r\n      if (actualSourceDocs.length === 0) {\r\n        throw new Error('    .  .');\r\n      }\r\n\r\n      if (actualTotalQuantity < quantity) {\r\n        throw new Error(`  . (: ${quantity},  : ${actualTotalQuantity})`);\r\n      }\r\n\r\n      //    \r\n      let remainingToSell = quantity;\r\n      const itemsToProcess = [...actualSourceDocs].sort((a,b) => a.quantity - b.quantity);\r\n\r\n      for(const doc of itemsToProcess) {\r\n        if(remainingToSell <= 0) break;\r\n        const amountToSell = Math.min(doc.quantity, remainingToSell);\r\n\r\n        //  FIX:     undefined   \r\n        const updateFields = {};\r\n        if (doc.description === undefined) {\r\n          console.warn(`[MyItems]  description  : ${doc.id}`);\r\n          updateFields.description = \"\";\r\n        }\r\n        if (doc.icon === undefined) {\r\n          console.warn(`[MyItems]  icon  : ${doc.id}`);\r\n          updateFields.icon = \"\";\r\n        }\r\n        if (doc.type === undefined) {\r\n          console.warn(`[MyItems]  type  : ${doc.id}`);\r\n          updateFields.type = \"general\";\r\n        }\r\n        if (Object.keys(updateFields).length > 0) {\r\n          const itemRef = firebaseDoc(db, \"users\", user.uid, \"inventory\", doc.id);\r\n          await updateDoc(itemRef, updateFields);\r\n          //  doc  \r\n          Object.assign(doc, updateFields);\r\n        }\r\n\r\n        const result = await listItemForSale({\r\n          itemId: doc.id,\r\n          quantity: amountToSell,\r\n          price,\r\n        });\r\n\r\n        if (!result.success) {\r\n          throw new Error(result.message || \"    .\");\r\n        }\r\n        remainingToSell -= amountToSell;\r\n      }\r\n\r\n      showNotification(\"success\", `${group.displayInfo.name} ${quantity}   .`);\r\n      handleCloseSellToMarketModal();\r\n\r\n      setTimeout(() => {\r\n        if (window.confirm(\"  ?\")) {\r\n          navigate(\"/item-market\");\r\n        }\r\n      }, 500);\r\n\r\n    } catch(error) {\r\n      console.error('[MyItems]    :', error);\r\n\r\n      if (error.message.includes('   ') || error.message.includes(' ')) {\r\n        showNotification(\"warning\", \"  .  .\");\r\n        setIsSyncing(true);\r\n        \r\n        if (refreshData) {\r\n            refreshData().then(() => {\r\n                showNotification(\"success\", \" .  .\");\r\n                setIsSyncing(false);\r\n            }).catch((syncError) => {\r\n                console.error(\"[MyItems]   :\", syncError);\r\n                showNotification(\"error\", \"  .\");\r\n                setIsSyncing(false);\r\n            });\r\n        } else {\r\n            showNotification(\"error\", `     : ${error.message}`);\r\n            setIsSyncing(false);\r\n        }\r\n      } else {\r\n        showNotification(\"error\", `    : ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const itemToGift = giftModal.isOpen ? giftModal.item : null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"page-container relative\">\r\n        <h2 className=\"page-title\">  </h2>\r\n        {!user && <LoginWarning />}\r\n        {notification && (<div className={`notification bg-${notification.type}-100`}>{notification.message}</div>)}\r\n\r\n        {user && (\r\n          <>\r\n            {Object.keys(recentlyUsedItems).length > 0 && (\r\n              <div className=\"content-card-section\">\r\n                <h3 className=\"section-title\">  </h3>\r\n                <div className=\"items-grid\">\r\n                  {Object.entries(recentlyUsedItems).map(([itemId, itemData]) => (\r\n                    <div key={itemId} className=\"store-item-card active-item-card\">\r\n                       <div className=\"item-content\">\r\n                         <div className=\"my-item-header\">\r\n                           <div className=\"item-icon-group\"><div className=\"item-icon\">{itemData.itemDetails.icon || ''}</div></div>\r\n                           <div className=\"item-info\">\r\n                             <h3 className=\"item-name\">{itemData.itemDetails.name}</h3>\r\n                             <p className=\"timer-text\">{formatTimeLeft(itemData.usedTimestamp, itemData.itemDetails.durationMs)}</p>\r\n                           </div>\r\n                         </div>\r\n                         <div className=\"my-item-actions\"><button className=\"stop-using-button\" onClick={() => handleRemoveUsedItem(itemId)}> </button></div>\r\n                       </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"content-card-section\">\r\n              <h3 className=\"section-title\"> </h3>\r\n              {groupedUserItems.length > 0 ? (\r\n                <div className=\"items-grid\">\r\n                  {groupedUserItems.map((group) => (\r\n                    <div key={group.displayInfo.itemId} className=\"store-item-card compact-myitem-card\">\r\n                      <div className=\"item-content\">\r\n                        <div className=\"my-item-header-compact\">\r\n                          <h3 className=\"my-item-name-compact\">{group.displayInfo.name}</h3>\r\n                          <QuantityBadge quantity={group.totalQuantity} />\r\n                        </div>\r\n                        {group.displayInfo.description && group.displayInfo.description.trim() && (\r\n                          <p className=\"my-item-description-compact\">{group.displayInfo.description}</p>\r\n                        )}\r\n                        <div className=\"my-item-actions\">\r\n                          <button className=\"use-item-button\" onClick={() => {\r\n                            handleOpenUseItemModal(group);\r\n                          }} disabled={isSyncing}></button>\r\n                          <button\r\n                            className=\"gift-item-button\"\r\n                            onClick={() => {\r\n                              handleOpenGiftModal(group);\r\n                            }}\r\n                            disabled={!classmates || classmates.length === 0 || isSyncing}\r\n                          >\r\n                            {isSyncing ? ' ' : ''}\r\n                          </button>\r\n                          <button className=\"sell-to-market-button\" onClick={() => {\r\n                            handleOpenSellToMarketModal(group);\r\n                          }} disabled={isSyncing}> </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"empty-message\"><p>   .</p></div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {useItemModal.isOpen && useItemModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseUseItemModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{useItemModal.item.displayInfo.name} </h3>\r\n              <button onClick={handleCloseUseItemModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"useQuantity\"> : ( {useItemModal.item.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))} disabled={useItemModal.quantity <= 1}>-</button>\r\n                  <input id=\"useQuantity\" type=\"number\" min=\"1\" max={useItemModal.item.totalQuantity} value={useItemModal.quantity}\r\n                    onChange={(e) => setUseItemModal(prev => ({ ...prev, quantity: Math.max(1, Math.min(prev.item.totalQuantity, parseInt(e.target.value) || 1)) }))}\r\n                  />\r\n                  <button onClick={() => setUseItemModal(prev => ({ ...prev, quantity: Math.min(prev.item.totalQuantity, prev.quantity + 1) }))} disabled={useItemModal.quantity >= useItemModal.item.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseUseItemModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmUseItem} className=\"button-primary\"></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {giftModal.isOpen && itemToGift && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseGiftModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>{itemToGift.displayInfo.name || \"\"} </h3>\r\n              <button onClick={handleCloseGiftModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftRecipient\">  :</label>\r\n                <select id=\"giftRecipient\" value={giftRecipientUid} onChange={(e) => setGiftRecipientUid(e.target.value)} className=\"form-select\">\r\n                  <option value=\"\" disabled>--   --</option>\r\n                  {classmates.map((classmate) => (\r\n                    <option key={classmate.uid || classmate.id} value={classmate.uid || classmate.id}>{classmate.name} ({classmate.nickname})</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"giftQuantity\"> : ( {itemToGift.totalQuantity})</label>\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.max(1, prev - 1))} disabled={giftQuantity <= 1}>-</button>\r\n                  <input id=\"giftQuantity\" type=\"number\" min=\"1\" max={itemToGift.totalQuantity} value={giftQuantity}\r\n                    onChange={(e) => setGiftQuantity(Math.max(1, Math.min(itemToGift.totalQuantity, parseInt(e.target.value) || 1)))}\r\n                  />\r\n                  <button onClick={() => setGiftQuantity((prev) => Math.min(itemToGift.totalQuantity, prev + 1))} disabled={giftQuantity >= itemToGift.totalQuantity}>+</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseGiftModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleSendGift} className=\"button-primary\" disabled={isGifting || isSyncing}>\r\n                {isGifting ? \" ...\" : (isSyncing ? \" ...\" : \"\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {sellToMarketModal.isOpen && sellToMarketModal.item && (\r\n        <div className=\"myitems-modal-overlay\" onClick={(e) => { if (e.target === e.currentTarget) handleCloseSellToMarketModal(); }}>\r\n          <div className=\"myitems-modal-container\">\r\n            <div className=\"myitems-modal-header\">\r\n              <h3>'{sellToMarketModal.item.displayInfo.name}'  </h3>\r\n              <button onClick={handleCloseSellToMarketModal} className=\"myitems-close-button\"></button>\r\n            </div>\r\n            <div className=\"myitems-modal-body\">\r\n              <div className=\"item-preview-simple\">\r\n                <span className=\"item-icon-small\">{sellToMarketModal.item.displayInfo.icon}</span>\r\n                <span>{sellToMarketModal.item.displayInfo.name} (: {sellToMarketModal.item.totalQuantity})</span>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketQuantity\">  (: {sellToMarketModal.item.totalQuantity}):</label>\r\n                <input type=\"number\" id=\"sellToMarketQuantity\" value={sellToMarketModal.quantity} onChange={(e) => handleSellToMarketQuantityChange(e.target.value)} min=\"1\" max={sellToMarketModal.item.totalQuantity} />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"sellToMarketPrice\">   ():</label>\r\n                <input type=\"number\" id=\"sellToMarketPrice\" value={sellToMarketModal.price} onChange={(e) => handleSellToMarketPriceChange(e.target.value)} min=\"1\" />\r\n              </div>\r\n              <div className=\"total-price-preview\">\r\n                  : <strong>{(sellToMarketModal.price * sellToMarketModal.quantity).toLocaleString()}</strong>\r\n              </div>\r\n            </div>\r\n            <div className=\"myitems-modal-footer\">\r\n              <button onClick={handleCloseSellToMarketModal} className=\"button-secondary\"></button>\r\n              <button onClick={handleConfirmSellToMarket} className=\"button-primary sell-button\" disabled={isSyncing}>\r\n                {isSyncing ? ' ...' : ' '}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(MyItems);\r\n","// src/MyAssets.js - Firestore      \r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport {\r\n  db,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  serverTimestamp,\r\n  increment,\r\n  writeBatch,\r\n  arrayUnion,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  functions,\r\n  httpsCallable,\r\n} from \"./firebase\";\r\nimport { limit, runTransaction } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from './numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from './utils/firestoreHelpers';\r\nimport LoginWarning from \"./LoginWarning\";\r\nimport TransferModal from \"./components/modals/TransferModal\";\r\nimport { AlchanLoading } from \"./components/AlchanLayout\";\r\nimport { DailyRewardBanner } from \"./components/DailyReward\";\r\n\r\nexport default function MyAssets() {\r\n  const {\r\n    user,\r\n    userDoc,\r\n    users, //    (    )\r\n    classmates, // ''     (,  )\r\n    allClassMembers, //  [] ''      (  )\r\n    loading: authLoading,\r\n    updateUser: updateUserInAuth,\r\n    addCashToUserById,\r\n    deductCash,\r\n    optimisticUpdate,\r\n  } = useAuth();\r\n\r\n  const userId = user?.uid;\r\n  const userName =\r\n    userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  //  [ 1]   \r\n  const [assetsLoading, setAssetsLoading] = useState(true);\r\n  const loadingRef = useRef(false); //    \r\n  const dataFetchRef = useRef({}); //    \r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [deposits, setDeposits] = useState([]); //   \r\n  const [savings, setSavings] = useState([]); //   \r\n  const [loans, setLoans] = useState([]);\r\n  const [realEstateAssets, setRealEstateAssets] = useState([]);\r\n  const [totalNetAssets, setTotalNetAssets] = useState(0);\r\n  const [goalDonations, setGoalDonations] = useState([]);\r\n  const [transactionHistory, setTransactionHistory] = useState([]);\r\n  const [forceReload, setForceReload] = useState(0); //      \r\n\r\n  //  [ 2] Firebase Functions   ( )\r\n  const getUserAssetsDataFunction = httpsCallable(functions, 'getUserAssetsData');\r\n  const sellCouponFunction = httpsCallable(functions, 'sellCoupon');\r\n  const giftCouponFunction = httpsCallable(functions, 'giftCoupon');\r\n\r\n  //  [ 4]    \r\n  const CACHE_DURATION = 60 * 60 * 1000; //  [] 1 (Firestore  )\r\n\r\n  const currentGoalId = currentUserClassCode\r\n    ? `${currentUserClassCode}_goal`\r\n    : null;\r\n\r\n  const [classCouponGoal, setClassCouponGoal] = useState(1000);\r\n  const [couponValue, setCouponValue] = useState(1000);\r\n\r\n  //  [ ] Firestore    \r\n  useEffect(() => {\r\n    const loadCouponValueFromSettings = async () => {\r\n      try {\r\n        const settingsRef = doc(db, \"settings\", \"mainSettings\");\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n          const settingsData = settingsSnap.data();\r\n          if (settingsData.couponValue) {\r\n            setCouponValue(Number(settingsData.couponValue));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[MyAssets]     :\", error);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      loadCouponValueFromSettings();\r\n    }\r\n  }, [userId]);\r\n\r\n  const [goalProgress, setGoalProgress] = useState(0);\r\n  const [myContribution, setMyContribution] = useState(0);\r\n  const [goalAchieved, setGoalAchieved] = useState(false);\r\n  const [isResettingGoal, setIsResettingGoal] = useState(false);\r\n\r\n  const [showDonateModal, setShowDonateModal] = useState(false);\r\n  const [showSellCouponModal, setShowSellCouponModal] = useState(false);\r\n  const [sellAmount, setSellAmount] = useState(\"\");\r\n  const [showGiftCouponModal, setShowGiftCouponModal] = useState(false);\r\n  const [giftRecipient, setGiftRecipient] = useState(\"\");\r\n  const [giftAmount, setGiftAmount] = useState(\"\");\r\n  const [showDonationHistoryModal, setShowDonationHistoryModal] =\r\n    useState(false);\r\n  const [showTransferModal, setShowTransferModal] = useState(false);\r\n  const [transferRecipient, setTransferRecipient] = useState(\"\");\r\n  const [transferAmount, setTransferAmount] = useState(\"\");\r\n  const [showAllTransactions, setShowAllTransactions] = useState(false); //   / \r\n\r\n  //  [ 1]  timestamp  \r\n  const safeTimestampToDate = (timestamp) => {\r\n    try {\r\n      // null undefined \r\n      if (!timestamp) {\r\n        return new Date();\r\n      }\r\n\r\n      //  Date  \r\n      if (timestamp instanceof Date) {\r\n        return isNaN(timestamp.getTime()) ? new Date() : timestamp;\r\n      }\r\n\r\n      // Firestore Timestamp  \r\n      if (timestamp && typeof timestamp.toDate === 'function') {\r\n        const date = timestamp.toDate();\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // seconds   Firestore Timestamp  \r\n      if (timestamp && timestamp.seconds) {\r\n        const date = new Date(timestamp.seconds * 1000);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      // ISO  \r\n      if (typeof timestamp === 'string') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //   \r\n      if (typeof timestamp === 'number') {\r\n        const date = new Date(timestamp);\r\n        return isNaN(date.getTime()) ? new Date() : date;\r\n      }\r\n\r\n      //     \r\n      return new Date();\r\n    } catch (error) {\r\n      return new Date();\r\n    }\r\n  };\r\n\r\n  //  [ 5]    \r\n  const isCacheValid = (cacheKey) => {\r\n    const cachedTime = dataFetchRef.current[cacheKey];\r\n    return cachedTime && (Date.now() - cachedTime) < CACHE_DURATION;\r\n  };\r\n\r\n  //  [ 6] localStorage   \r\n  const getCachedFirestoreData = (key) => {\r\n    try {\r\n      const cached = localStorage.getItem(`firestore_cache_${key}_${userId}`);\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached);\r\n        if (Date.now() - timestamp < CACHE_DURATION) {\r\n          return data;\r\n        }\r\n      }\r\n    } catch (error) {\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const setCachedFirestoreData = (key, data) => {\r\n    try {\r\n      const cacheItem = {\r\n        data,\r\n        timestamp: Date.now(),\r\n      };\r\n      localStorage.setItem(`firestore_cache_${key}_${userId}`, JSON.stringify(cacheItem));\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 2]     -     \r\n  const addTransaction = async (userId, amount, description) => {\r\n    try {\r\n      //    \r\n      const localKey = `pending_transactions_${userId}`;\r\n      const existing = localStorage.getItem(localKey);\r\n      const pendingTransactions = existing ? JSON.parse(existing) : [];\r\n\r\n      //   timestamp   - Date  \r\n      const now = new Date();\r\n      const newTransaction = {\r\n        id: `local_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        amount: Number(amount) || 0, //   \r\n        description: String(description) || \" \", //   \r\n        timestamp: now, // Date   \r\n        timestampISO: now.toISOString(), // ISO  \r\n        synced: false,\r\n      };\r\n\r\n      pendingTransactions.push(newTransaction);\r\n      localStorage.setItem(localKey, JSON.stringify(pendingTransactions, (key, value) => {\r\n        // Date  JSON   ISO  \r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n      //    \r\n      setTransactionHistory(prev => [newTransaction, ...prev.slice(0, 4)]);\r\n\r\n\r\n      //  [ 3]    (    )\r\n      setTimeout(async () => {\r\n        try {\r\n          await syncPendingTransactions(userId);\r\n        } catch (error) {\r\n        }\r\n      }, 1000);\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ 4]     \r\n  const syncPendingTransactions = async (userId) => {\r\n    const localKey = `pending_transactions_${userId}`;\r\n    const pendingStr = localStorage.getItem(localKey);\r\n\r\n    if (!pendingStr) return;\r\n\r\n    try {\r\n      const pendingTransactions = JSON.parse(pendingStr, (key, value) => {\r\n        // JSON Date  \r\n        if (key === 'timestamp' && typeof value === 'string') {\r\n          return new Date(value);\r\n        }\r\n        return value;\r\n      });\r\n\r\n      const unsyncedTransactions = pendingTransactions.filter(tx => !tx.synced);\r\n\r\n      if (unsyncedTransactions.length === 0) return;\r\n\r\n      const batch = writeBatch(db);\r\n      const userTransactionsRef = collection(db, \"users\", userId, \"transactions\");\r\n\r\n      unsyncedTransactions.forEach(tx => {\r\n        const docRef = doc(userTransactionsRef);\r\n        batch.set(docRef, {\r\n          amount: tx.amount,\r\n          description: tx.description,\r\n          timestamp: serverTimestamp(), // Firestore serverTimestamp \r\n          localTimestamp: tx.timestampISO || tx.timestamp, //   \r\n          syncedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //   \r\n      const updatedTransactions = pendingTransactions.map(tx =>\r\n        unsyncedTransactions.find(utx => utx.id === tx.id)\r\n          ? { ...tx, synced: true }\r\n          : tx\r\n      );\r\n\r\n      localStorage.setItem(localKey, JSON.stringify(updatedTransactions, (key, value) => {\r\n        if (key === 'timestamp' && value instanceof Date) {\r\n          return value.toISOString();\r\n        }\r\n        return value;\r\n      }));\r\n\r\n    } catch (error) {\r\n    }\r\n  };\r\n\r\n  //  [ ]          \r\n  const createDefaultGoalForClass = useCallback(async (classCode, goalId) => {\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", goalId);\r\n      const defaultGoalData = {\r\n        classCode: classCode,\r\n        targetAmount: 1000,\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        title: `${classCode}  `,\r\n        description: `${classCode}   .`,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        createdBy: userId,\r\n      };\r\n\r\n      //        ( )\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n        if (!goalDoc.exists()) {\r\n          transaction.set(goalDocRef, defaultGoalData);\r\n          setCachedFirestoreData(`goal_${goalId}`, defaultGoalData);\r\n        } else {\r\n          const existingData = goalDoc.data();\r\n          setCachedFirestoreData(`goal_${goalId}`, existingData);\r\n        }\r\n      });\r\n\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }, [userId]);\r\n\r\n  //  []     -    \r\n  const loadGoalData = useCallback(async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      return;\r\n    }\r\n\r\n    //    \r\n    const cacheKey = `goal_${currentGoalId}`;\r\n    const cachedData = getCachedFirestoreData(cacheKey);\r\n\r\n    if (cachedData) {\r\n      setClassCouponGoal(Number(cachedData.targetAmount) || 1000);\r\n      setGoalProgress(Number(cachedData.progress) || 0);\r\n\r\n      const donations = Array.isArray(cachedData.donations) ? cachedData.donations : [];\r\n      setGoalDonations(donations);\r\n\r\n      const myDonations = donations.filter(d => d.userId === userId);\r\n      const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n      setMyContribution(myTotal);\r\n\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const goalData = goalDocSnap.data();\r\n\r\n        //   \r\n        setClassCouponGoal(Number(goalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(goalData.progress) || 0);\r\n\r\n        //   \r\n        const donations = Array.isArray(goalData.donations)\r\n          ? goalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(donations);\r\n\r\n        //   \r\n        const myDonations = donations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //   \r\n        setCachedFirestoreData(cacheKey, goalData);\r\n      } else {\r\n        //     \r\n        console.log('[MyAssets]     ');\r\n        await createDefaultGoalForClass(currentUserClassCode, currentGoalId);\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]    :', error);\r\n    }\r\n  }, [currentGoalId, currentUserClassCode, userId, createDefaultGoalForClass, getCachedFirestoreData, setCachedFirestoreData]);\r\n\r\n  const loadMyAssetsData = useCallback(async () => {\r\n    if (!userId || !db) {\r\n      setAssetsLoading(false);\r\n      return;\r\n    }\r\n\r\n    //      \r\n    if (loadingRef.current) {\r\n      console.log('[MyAssets]       ');\r\n      return;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //  []     (limit )\r\n      const realEstateRef1 = query(collection(db, \"classes\", currentUserClassCode, \"realEstateProperties\"), where(\"owner\", \"==\", userId), limit(50));\r\n      const realEstateRef2 = query(collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"realestates\"), limit(50));\r\n      const realEstateRef3 = query(collection(db, \"realEstate\"), where(\"ownerId\", \"==\", userId), limit(50));\r\n\r\n      const [snap1, snap2, snap3] = await Promise.all([\r\n        getDocs(realEstateRef1),\r\n        getDocs(realEstateRef2),\r\n        getDocs(realEstateRef3),\r\n      ]);\r\n\r\n      const allRealEstateAssets = [];\r\n      snap1.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap2.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n      snap3.forEach(doc => allRealEstateAssets.push({ id: doc.id, ...doc.data() }));\r\n\r\n      //    (  )\r\n      const parkingRef1 = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRef2 = collection(db, \"ClassStock\", currentUserClassCode, \"students\", userId, \"parkingAccounts\");\r\n\r\n      const [parkingSnap1, parkingSnap2] = await Promise.all([\r\n        getDoc(parkingRef1),\r\n        getDocs(parkingRef2),\r\n      ]);\r\n\r\n      let totalParkingBalance = 0;\r\n      if (parkingSnap1.exists()) {\r\n        totalParkingBalance += parkingSnap1.data().balance || 0;\r\n      }\r\n\r\n      parkingSnap2.forEach(doc => {\r\n        totalParkingBalance += doc.data().balance || 0;\r\n      });\r\n\r\n      setParkingBalance(totalParkingBalance);\r\n\r\n      //  []    (, ,   products  )\r\n      const productsRef = query(collection(db, \"users\", userId, \"products\"), limit(50));\r\n      const productsSnap = await getDocs(productsRef);\r\n\r\n      const depositsData = [];\r\n      const savingsData = [];\r\n      const loansData = [];\r\n\r\n      productsSnap.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') depositsData.push(product);\r\n        else if (product.type === 'savings') savingsData.push(product);\r\n        else if (product.type === 'loan') loansData.push(product);\r\n      });\r\n\r\n      setDeposits(depositsData);\r\n      setSavings(savingsData);\r\n      setLoans(loansData);\r\n\r\n      setRealEstateAssets(allRealEstateAssets);\r\n\r\n      //  []    useEffect  (  )\r\n      // loadGoalData() [user, currentGoalId]  useEffect \r\n\r\n      //     - activity_logs + transactions   \r\n      let activityData = [];\r\n      let transactionsData = [];\r\n\r\n      // 1. activity_logs   \r\n      try {\r\n        const activityLogsRef = query(\r\n          collection(db, \"activity_logs\"),\r\n          where(\"classCode\", \"==\", currentUserClassCode),\r\n          where(\"userId\", \"==\", userId),\r\n          limit(30)\r\n        );\r\n        const activityLogsSnap = await getDocs(activityLogsRef);\r\n        activityData = activityLogsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || data.type || ' ',\r\n              timestamp: data.timestamp,\r\n              type: data.type,\r\n              couponAmount: data.couponAmount || 0,\r\n              source: 'activity_logs'\r\n            };\r\n          })\r\n          //       \r\n          .filter(tx => tx.amount !== 0 || tx.couponAmount !== 0);\r\n      } catch (activityError) {\r\n        console.log('[MyAssets] activity_logs  :', activityError);\r\n      }\r\n\r\n      // 2.  transactions   ( )\r\n      try {\r\n        const transactionsRef = query(\r\n          collection(db, \"users\", userId, \"transactions\"),\r\n          limit(30)\r\n        );\r\n        const transactionsSnap = await getDocs(transactionsRef);\r\n        transactionsData = transactionsSnap.docs\r\n          .map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              amount: data.amount || 0,\r\n              description: data.description || ' ',\r\n              timestamp: data.timestamp || data.createdAt,\r\n              type: data.type || 'transaction',\r\n              source: 'transactions'\r\n            };\r\n          })\r\n          .filter(tx => tx.amount !== 0);\r\n      } catch (transactionsError) {\r\n        console.log('[MyAssets] transactions  :', transactionsError);\r\n      }\r\n\r\n      //    (  ID )\r\n      const allTransactions = [...activityData, ...transactionsData];\r\n\r\n      // timestamp  \r\n      allTransactions.sort((a, b) => {\r\n        const dateA = a.timestamp?.toDate ? a.timestamp.toDate() : new Date(a.timestamp?.seconds * 1000 || 0);\r\n        const dateB = b.timestamp?.toDate ? b.timestamp.toDate() : new Date(b.timestamp?.seconds * 1000 || 0);\r\n        return dateB - dateA;\r\n      });\r\n\r\n      //  20 \r\n      setTransactionHistory(allTransactions.slice(0, 20));\r\n\r\n    } catch (fallbackError) {\r\n      console.error('[MyAssets]      :', fallbackError);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, [userId, currentUserClassCode]); // loadGoalData    \r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!authLoading && user) {\r\n      loadMyAssetsData();\r\n    } else if (!authLoading && !user) {\r\n      setAssetsLoading(false);\r\n      setParkingBalance(0);\r\n      setLoans([]);\r\n      setRealEstateAssets([]);\r\n      setTotalNetAssets(0);\r\n      setMyContribution(0);\r\n      setClassCouponGoal(1000);\r\n      setGoalProgress(0);\r\n      setCouponValue(1000);\r\n      setGoalDonations([]);\r\n      setTransactionHistory([]);\r\n    } else if (authLoading) {\r\n      setAssetsLoading(true);\r\n    }\r\n  }, [authLoading, user]); // loadMyAssetsData    \r\n\r\n  useEffect(() => {\r\n    const cashValue = Number(userDoc?.cash) || 0;\r\n    const couponMonetaryValue = (Number(userDoc?.coupons) || 0) * Number(couponValue);\r\n    const realEstateValue = realEstateAssets.reduce(\r\n      (sum, asset) => sum + (Number(asset.price) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const depositsTotal = deposits.reduce(\r\n      (sum, deposit) => sum + (Number(deposit.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance )\r\n    const savingsTotal = savings.reduce(\r\n      (sum, saving) => sum + (Number(saving.balance) || 0),\r\n      0\r\n    );\r\n    //   (balance  - remainingPrincipal  balance )\r\n    const loanTotal = loans.reduce(\r\n      (sum, loan) => sum + (Number(loan.remainingPrincipal) || Number(loan.balance) || 0),\r\n      0\r\n    );\r\n    const calculatedTotalAssets =\r\n      cashValue +\r\n      couponMonetaryValue +\r\n      Number(parkingBalance) +\r\n      depositsTotal +\r\n      savingsTotal +\r\n      realEstateValue -\r\n      loanTotal;\r\n\r\n    setTotalNetAssets(calculatedTotalAssets);\r\n  }, [\r\n    userDoc?.cash,\r\n    userDoc?.coupons,\r\n    couponValue,\r\n    parkingBalance,\r\n    deposits,\r\n    savings,\r\n    realEstateAssets,\r\n    loans,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setGoalAchieved(goalProgress >= classCouponGoal && classCouponGoal > 0);\r\n  }, [goalProgress, classCouponGoal]);\r\n\r\n  //  []     -  \r\n  //       ( Firestore  )\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (!user || !currentGoalId) {\r\n      return;\r\n    }\r\n\r\n    loadGoalData();\r\n  }, [user, currentGoalId]); // loadGoalData    \r\n\r\n  //  []    -   \r\n  const handleDonateCoupon = async (amount, memo) => {\r\n    if (!userId || !currentUserClassCode) {\r\n      alert(\"       .\");\r\n      return false;\r\n    }\r\n\r\n    const donationAmount = parseInt(amount, 10);\r\n    if (isNaN(donationAmount) || donationAmount <= 0) {\r\n      alert(\"   .\");\r\n      return false;\r\n    }\r\n\r\n    //   \r\n    const currentCoupons = Number(userDoc?.coupons) || 0;\r\n    if (currentCoupons < donationAmount) {\r\n      alert(` . (: ${currentCoupons}, : ${donationAmount})`);\r\n      return false;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    //   (UI  )\r\n    const previousProgress = goalProgress;\r\n    const previousMyContribution = myContribution;\r\n    const previousDonations = goalDonations;\r\n\r\n    const newDonation = {\r\n      userId: userId,\r\n      userName: userName,\r\n      amount: donationAmount,\r\n      timestamp: new Date().toISOString(),\r\n      timestampISO: new Date().toISOString(),\r\n      message: memo || '',\r\n      classCode: currentUserClassCode,\r\n    };\r\n\r\n    setGoalProgress(prev => prev + donationAmount);\r\n    setMyContribution(prev => prev + donationAmount);\r\n    setGoalDonations(prev => [...prev, newDonation]);\r\n\r\n    //    UI  ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -donationAmount });\r\n    }\r\n\r\n    try {\r\n      // 1.    (AuthContext )\r\n      const couponDeducted = await updateUserInAuth({\r\n        coupons: increment(-donationAmount)\r\n      });\r\n\r\n      if (!couponDeducted) {\r\n        throw new Error(\"  .\");\r\n      }\r\n\r\n      // 2. Firestore   \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const goalDoc = await transaction.get(goalDocRef);\r\n\r\n        if (!goalDoc.exists()) {\r\n          throw new Error(\"    .\");\r\n        }\r\n\r\n        const firestoreDonation = {\r\n          userId: userId,\r\n          userName: userName,\r\n          amount: donationAmount,\r\n          timestamp: serverTimestamp(),\r\n          timestampISO: new Date().toISOString(),\r\n          message: memo || '',\r\n          classCode: currentUserClassCode,\r\n        };\r\n\r\n        // progress   donations  \r\n        transaction.update(goalDocRef, {\r\n          progress: increment(donationAmount),\r\n          donations: arrayUnion(firestoreDonation),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      // 3. donations   (,  )\r\n      const donationRecordRef = doc(collection(db, \"donations\"));\r\n      await setDoc(donationRecordRef, {\r\n        userId: userId,\r\n        userName: userName,\r\n        amount: donationAmount,\r\n        timestamp: serverTimestamp(),\r\n        timestampISO: new Date().toISOString(),\r\n        message: memo || '',\r\n        classCode: currentUserClassCode,\r\n        goalId: currentGoalId,\r\n      });\r\n\r\n      // 4.  \r\n      await addTransaction(userId, -donationAmount * couponValue, `  ${donationAmount} `);\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_DONATE,\r\n        description: `   ${donationAmount} `,\r\n        couponAmount: -donationAmount,\r\n        metadata: {\r\n          goalId: currentGoalId,\r\n          goalProgress: goalProgress + donationAmount,\r\n          message: memo || ''\r\n        }\r\n      });\r\n\r\n      //  5.   (   )\r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      alert(`${donationAmount}   !`);\r\n      setShowDonateModal(false);\r\n\r\n      //  6.     (  Firestore )\r\n      setTimeout(() => {\r\n        loadGoalData();\r\n      }, 500);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[MyAssets]  :', error);\r\n      alert(` : ${error.message}`);\r\n\r\n      //      \r\n      setGoalProgress(previousProgress);\r\n      setMyContribution(previousMyContribution);\r\n      setGoalDonations(previousDonations);\r\n\r\n      //  \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: donationAmount });\r\n      }\r\n\r\n      return false;\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []       \r\n  const forceRefreshGoalData = async () => {\r\n    if (!currentGoalId || !currentUserClassCode) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n\r\n    try {\r\n      //    \r\n      const cacheKey = `goal_${currentGoalId}`;\r\n      localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n      localStorage.removeItem(`firestore_cache_settings_${userId}`);\r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n\r\n      console.log('[MyAssets]   , Firestore    ...');\r\n\r\n      //  Firestore    \r\n      const goalDocRef = doc(db, \"goals\", currentGoalId);\r\n      const goalDocSnap = await getDoc(goalDocRef);\r\n\r\n      if (goalDocSnap.exists()) {\r\n        const latestGoalData = goalDocSnap.data();\r\n\r\n        setClassCouponGoal(Number(latestGoalData.targetAmount) || 1000);\r\n        setGoalProgress(Number(latestGoalData.progress) || 0);\r\n\r\n        const freshDonations = Array.isArray(latestGoalData.donations)\r\n          ? latestGoalData.donations.map((donation) => {\r\n            let processedTimestamp;\r\n            if (donation.timestamp && donation.timestamp.toDate) {\r\n              processedTimestamp = donation.timestamp.toDate().toISOString();\r\n            } else if (donation.timestamp && donation.timestamp.seconds) {\r\n              processedTimestamp = new Date(donation.timestamp.seconds * 1000).toISOString();\r\n            } else if (donation.timestampISO) {\r\n              processedTimestamp = donation.timestampISO;\r\n            } else if (typeof donation.timestamp === 'string') {\r\n              processedTimestamp = donation.timestamp;\r\n            } else {\r\n              processedTimestamp = new Date().toISOString();\r\n            }\r\n\r\n            return {\r\n              ...donation,\r\n              amount: Number(donation.amount) || 0,\r\n              timestamp: processedTimestamp,\r\n              userId: donation.userId || '',\r\n              userName: donation.userName || '   ',\r\n              message: donation.message || '',\r\n              classCode: donation.classCode || currentUserClassCode,\r\n            };\r\n          })\r\n          : [];\r\n\r\n        setGoalDonations(freshDonations);\r\n\r\n        //   \r\n        const myDonations = freshDonations.filter(d => d.userId === userId);\r\n        const myTotal = myDonations.reduce((sum, d) => sum + d.amount, 0);\r\n        setMyContribution(myTotal);\r\n\r\n        //  \r\n        setCachedFirestoreData(cacheKey, latestGoalData);\r\n\r\n        alert(`   !\\n : ${latestGoalData.progress || 0}/${latestGoalData.targetAmount || 1000}\\n : ${freshDonations.length}\\n : ${myTotal}`);\r\n      } else {\r\n        alert(\"    .  .\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[MyAssets]   :', error);\r\n      alert(`    : ${error.message}`);\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  []     \r\n  const showDebugInfo = () => {\r\n    const debugInfo = {\r\n      userId,\r\n      currentUserClassCode,\r\n      currentGoalId,\r\n      goalProgress,\r\n      classCouponGoal,\r\n      myContribution,\r\n      donationsCount: goalDonations.length,\r\n      donations: goalDonations,\r\n      userCoupons: userDoc?.coupons,\r\n      userCash: userDoc?.cash,\r\n    };\r\n\r\n    alert(`   .\\n : ${goalDonations.length}\\n : ${goalProgress}/${classCouponGoal}`);\r\n  };\r\n\r\n  //  [ ] 'resetCouponGoal'  async  \r\n  const resetCouponGoal = async () => {\r\n    if (!userDoc?.isAdmin && !userDoc?.isSuperAdmin) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (!currentUserClassCode || !currentGoalId) {\r\n      alert(\"       .\");\r\n      return;\r\n    }\r\n    if (\r\n      !window.confirm(\r\n        ` ${currentUserClassCode}      ?`\r\n      )\r\n    )\r\n      return;\r\n\r\n    setIsResettingGoal(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const goalRef = doc(db, \"goals\", currentGoalId);\r\n\r\n      //  []   limit \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", currentUserClassCode),\r\n        limit(100)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      usersSnapshot.forEach((userDocument) => {\r\n        const userRef = doc(db, \"users\", userDocument.id);\r\n        batch.update(userRef, {\r\n          myContribution: 0,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n      });\r\n\r\n      batch.update(goalRef, {\r\n        progress: 0,\r\n        donations: [],\r\n        donationCount: 0,\r\n        updatedAt: serverTimestamp(),\r\n        resetAt: serverTimestamp(),\r\n        resetBy: userId,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      //  [ 23]      \r\n      localStorage.removeItem(`goalDonationHistory_${currentUserClassCode}_goal`);\r\n      localStorage.removeItem(`firestore_cache_goal_${currentGoalId}_${userId}`);\r\n\r\n      setMyContribution(0);\r\n      setGoalProgress(0);\r\n      setGoalDonations([]);\r\n\r\n      alert(`(${currentUserClassCode})     .`);\r\n    } catch (error) {\r\n      alert(`  : ${error.message}`);\r\n    } finally {\r\n      setIsResettingGoal(false);\r\n    }\r\n  };\r\n\r\n  const handleSellCoupon = async () => {\r\n    const amount = parseInt(sellAmount, 10);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    //        UI  ( )\r\n    const cashGained = amount * couponValue;\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ coupons: -amount, cash: cashGained });\r\n    }\r\n\r\n    setAssetsLoading(true);\r\n    try {\r\n      await sellCouponFunction({ amount });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userName,\r\n        type: ACTIVITY_TYPES.COUPON_USE,\r\n        description: ` ${amount}  (${cashGained.toLocaleString()})`,\r\n        amount: cashGained,\r\n        couponAmount: -amount,\r\n        metadata: {\r\n          couponsSold: amount,\r\n          cashReceived: cashGained,\r\n          couponValue: couponValue\r\n        }\r\n      });\r\n\r\n      alert(`${amount}  .`);\r\n      setShowSellCouponModal(false);\r\n      setSellAmount(\"\");\r\n      //  [] Firebase Function  userDoc \r\n      // AuthContext    UI  (loadMyAssetsData )\r\n    } catch (error) {\r\n      alert(` : ${error.message}`);\r\n\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: amount, cash: -cashGained });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGiftCoupon = async () => {\r\n    const recipientUser = users.find((u) => u.id === giftRecipient);\r\n    const amount = parseInt(giftAmount, 10);\r\n\r\n    if (!recipientUser) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`${recipientUser.name}  ${amount} ?`)) {\r\n      //    UI  ( )\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ coupons: -amount });\r\n      }\r\n\r\n      setAssetsLoading(true);\r\n      try {\r\n        await giftCouponFunction({ recipientId: recipientUser.id, amount, message: \"\" });\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userName,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_SEND,\r\n          description: `${recipientUser.name}  ${amount} `,\r\n          couponAmount: -amount,\r\n          metadata: {\r\n            recipientId: recipientUser.id,\r\n            recipientName: recipientUser.name\r\n          }\r\n        });\r\n\r\n        //     (  ) -   \r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: recipientUser.id,\r\n          userName: recipientUser.name,\r\n          type: ACTIVITY_TYPES.COUPON_GIFT_RECEIVE,\r\n          description: `${userName}  ${amount} `,\r\n          couponAmount: amount,\r\n          metadata: {\r\n            senderId: userId,\r\n            senderName: userName\r\n          }\r\n        });\r\n\r\n        alert(\"  .\");\r\n        setShowGiftCouponModal(false);\r\n        setGiftRecipient(\"\");\r\n        setGiftAmount(\"\");\r\n        //  [] Firebase Function  userDoc \r\n        // AuthContext    UI  (loadMyAssetsData )\r\n      } catch (error) {\r\n        alert(` : ${error.message}`);\r\n\r\n        //   \r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ coupons: amount });\r\n        }\r\n      } finally {\r\n        setAssetsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTransferMoney = async () => {\r\n    setAssetsLoading(true);\r\n    try {\r\n      if (\r\n        !userDoc ||\r\n        !userId ||\r\n        !db ||\r\n        !users ||\r\n        !deductCash ||\r\n        !addCashToUserById\r\n      ) {\r\n        alert(\"   .    .\");\r\n        return;\r\n      }\r\n\r\n      const amount = parseInt(transferAmount, 10);\r\n      if (isNaN(amount) || amount <= 0) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      if ((Number(userDoc.cash) || 0) < amount) {\r\n        alert(\"  .\");\r\n        return;\r\n      }\r\n\r\n      const recipientUser = users.find((u) => u.id === transferRecipient);\r\n      if (!recipientUser) {\r\n        alert(\"    .    .\");\r\n        return;\r\n      }\r\n\r\n      if (recipientUser.id === userId) {\r\n        alert(\"    .\");\r\n        return;\r\n      }\r\n\r\n      const recipientName = recipientUser.name || recipientUser.nickname || \"\";\r\n\r\n      //      .\r\n      const deductSuccess = await deductCash(amount, `${recipientName} `);\r\n      if (deductSuccess) {\r\n        const addSuccess = await addCashToUserById(recipientUser.id, amount, `${userName} `);\r\n        if (addSuccess) {\r\n          //     ( )\r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: userId,\r\n            userName: userName,\r\n            type: ACTIVITY_TYPES.TRANSFER_SEND,\r\n            description: `${recipientName} ${amount.toLocaleString()} `,\r\n            amount: -amount,\r\n            metadata: {\r\n              recipientId: recipientUser.id,\r\n              recipientName: recipientName\r\n            }\r\n          });\r\n\r\n          //     ( ) -   \r\n          logActivity(db, {\r\n            classCode: currentUserClassCode,\r\n            userId: recipientUser.id,\r\n            userName: recipientName,\r\n            type: ACTIVITY_TYPES.TRANSFER_RECEIVE,\r\n            description: `${userName} ${amount.toLocaleString()} `,\r\n            amount: amount,\r\n            metadata: {\r\n              senderId: userId,\r\n              senderName: userName\r\n            }\r\n          });\r\n\r\n          alert(\" .\");\r\n          setShowTransferModal(false);\r\n          setTransferRecipient(\"\");\r\n          setTransferAmount(\"\");\r\n        } else {\r\n          alert(\"     .  .\");\r\n          //       .\r\n          await addCashToUserById(userId, amount, \"   \");\r\n        }\r\n      } else {\r\n        alert(\"    .\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"!!!        !!!\", error);\r\n      alert(`   : ${error.message}`);\r\n      //   \r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: parseInt(transferAmount, 10) || 0 });\r\n      }\r\n    } finally {\r\n      setAssetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForceRefresh = () => {\r\n    //  \r\n    const cacheKey = `myAssets_${userId}`;\r\n    localStorage.removeItem(`firestore_cache_${cacheKey}_${userId}`);\r\n\r\n    console.log('[MyAssets]      ');\r\n\r\n    //   \r\n    loadMyAssetsData();\r\n  };\r\n\r\n  const renderTitle = () => (\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n      <h2\r\n        style={{\r\n          fontSize: \"24px\",\r\n          fontWeight: \"bold\",\r\n          color: \"#00fff2\",\r\n          borderBottom: \"2px solid rgba(0, 255, 242, 0.2)\",\r\n          paddingBottom: \"10px\",\r\n          margin: 0,\r\n          textShadow: \"0 0 10px rgba(0, 255, 242, 0.3)\",\r\n        }}\r\n      >\r\n           \r\n      </h2>\r\n      <button\r\n        onClick={handleForceRefresh}\r\n        disabled={assetsLoading}\r\n        style={{\r\n          padding: \"8px 16px\",\r\n          backgroundColor: \"rgba(0, 255, 242, 0.1)\",\r\n          color: \"#00fff2\",\r\n          border: \"1px solid rgba(0, 255, 242, 0.3)\",\r\n          borderRadius: \"8px\",\r\n          fontSize: \"14px\",\r\n          fontWeight: \"600\",\r\n          cursor: assetsLoading ? \"not-allowed\" : \"pointer\",\r\n          opacity: assetsLoading ? 0.6 : 1,\r\n          transition: \"all 0.2s ease\",\r\n        }}\r\n      >\r\n         \r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderAssetSummary = () => {\r\n    const displayCash = Number(userDoc?.cash) || 0;\r\n    const displayCoupons = Number(userDoc?.coupons) || 0;\r\n\r\n    //     \r\n    const displayedTransactions = showAllTransactions\r\n      ? transactionHistory\r\n      : transactionHistory.slice(0, 5);\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          padding: \"0\",\r\n          background: \"transparent\",\r\n          marginBottom: \"25px\",\r\n        }}\r\n      >\r\n        {/*   -    */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(102, 126, 234, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"42px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            marginBottom: \"15px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {displayCash.toLocaleString()} <span style={{ fontSize: \"28px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <button\r\n              onClick={() => setShowTransferModal(true)}\r\n              style={{\r\n                padding: \"14px 28px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n                color: \"#667eea\",\r\n                border: \"none\",\r\n                borderRadius: \"12px\",\r\n                fontSize: \"16px\",\r\n                fontWeight: \"700\",\r\n                cursor: \"pointer\",\r\n                boxShadow: \"0 4px 15px rgba(0,0,0,0.1)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n              disabled={assetsLoading || authLoading}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = \"translateY(-2px)\";\r\n                e.target.style.boxShadow = \"0 6px 20px rgba(0,0,0,0.15)\";\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = \"translateY(0)\";\r\n                e.target.style.boxShadow = \"0 4px 15px rgba(0,0,0,0.1)\";\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    -      */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n               \r\n          </h4>\r\n          {transactionHistory.length > 0 ? (\r\n            <div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n                {displayedTransactions.map((tx) => {\r\n                  let displayDate = \" \";\r\n                  try {\r\n                    const validDate = safeTimestampToDate(tx.timestamp);\r\n                    displayDate = validDate.toLocaleDateString(\"ko-KR\", {\r\n                      month: \"2-digit\",\r\n                      day: \"2-digit\",\r\n                    });\r\n                  } catch (dateError) {\r\n                    displayDate = \"\";\r\n                  }\r\n\r\n                  const txAmount = Number(tx.amount) || 0;\r\n                  const txDescription = String(tx.description) || \" \";\r\n\r\n                  return (\r\n                    <div\r\n                      key={tx.id || Math.random()}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\",\r\n                        fontSize: \"14px\",\r\n                        color: \"#a0a0c0\",\r\n                        padding: \"14px 16px\",\r\n                        backgroundColor: txAmount > 0 ? \"rgba(5, 150, 105, 0.1)\" : \"rgba(220, 38, 38, 0.1)\",\r\n                        border: txAmount > 0 ? \"1px solid rgba(5, 150, 105, 0.3)\" : \"1px solid rgba(220, 38, 38, 0.3)\",\r\n                        borderRadius: \"10px\",\r\n                      }}\r\n                    >\r\n                      <span\r\n                        style={{\r\n                          flex: \"1\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                          marginRight: \"10px\",\r\n                          fontWeight: \"500\",\r\n                          color: \"#e8e8ff\"\r\n                        }}\r\n                      >\r\n                        {displayDate}  {txDescription}\r\n                      </span>\r\n                      <span\r\n                        style={{\r\n                          fontWeight: \"700\",\r\n                          fontSize: \"15px\",\r\n                          color: txAmount > 0 ? \"#34d399\" : \"#f87171\",\r\n                          minWidth: \"110px\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        {txAmount > 0 ? \"+\" : \"\"}\r\n                        {txAmount.toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              {transactionHistory.length > 5 && (\r\n                <button\r\n                  onClick={() => setShowAllTransactions(!showAllTransactions)}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"12px\",\r\n                    padding: \"12px\",\r\n                    backgroundColor: \"rgba(255, 255, 255, 0.05)\",\r\n                    color: \"#a0a0c0\",\r\n                    border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n                    borderRadius: \"10px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                    transition: \"all 0.2s ease\",\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.backgroundColor = \"#f3f4f6\";\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.backgroundColor = \"#f9fafb\";\r\n                  }}\r\n                >\r\n                  {showAllTransactions ? \" \" : ` ${transactionHistory.length - 5}  `}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                fontSize: \"13px\",\r\n                color: \"#6b7280\",\r\n                textAlign: \"center\",\r\n                padding: \"20px\",\r\n                backgroundColor: \"rgba(255, 255, 255, 0.03)\",\r\n                borderRadius: \"10px\",\r\n                border: \"1px dashed rgba(255, 255, 255, 0.1)\"\r\n              }}\r\n            >\r\n                 .\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*   -     */}\r\n        <div\r\n          style={{\r\n            background: \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"25px 30px\",\r\n            marginBottom: \"20px\",\r\n            boxShadow: \"0 10px 30px rgba(240, 147, 251, 0.3)\",\r\n            border: \"none\",\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: \"8px\" }}>\r\n            <span style={{ color: \"rgba(255,255,255,0.9)\", fontSize: \"16px\", fontWeight: \"500\" }}>\r\n                \r\n            </span>\r\n          </div>\r\n          <div style={{\r\n            fontSize: \"38px\",\r\n            fontWeight: \"800\",\r\n            color: \"#ffffff\",\r\n            letterSpacing: \"-1px\",\r\n            textAlign: \"right\"\r\n          }}>\r\n            {Number(totalNetAssets).toLocaleString()} <span style={{ fontSize: \"24px\", fontWeight: \"600\" }}></span>\r\n          </div>\r\n          <p style={{\r\n            marginTop: \"8px\",\r\n            fontSize: \"12px\",\r\n            color: \"rgba(255,255,255,0.8)\",\r\n            margin: \"8px 0 0 0\"\r\n          }}>\r\n             +  +  +  +  +  - \r\n          </p>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div style={{ marginBottom: \"20px\" }}>\r\n          <h4\r\n            style={{\r\n              fontSize: \"15px\",\r\n              color: \"#e8e8ff\",\r\n              fontWeight: \"700\",\r\n              marginBottom: \"12px\",\r\n            }}\r\n          >\r\n             \r\n          </h4>\r\n          <div\r\n            style={{\r\n              background: \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\",\r\n              borderRadius: \"14px\",\r\n              padding: \"20px\",\r\n              border: \"none\",\r\n              boxShadow: \"0 4px 15px rgba(6, 182, 212, 0.2)\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <span style={{ color: \"rgba(255,255,255,0.9)\", fontWeight: \"500\", fontSize: \"14px\" }}>\r\n                \r\n              </span>\r\n              <span\r\n                style={{\r\n                  fontWeight: \"800\",\r\n                  fontSize: \"26px\",\r\n                  color: \"#ffffff\",\r\n                  letterSpacing: \"-0.5px\",\r\n                  textAlign: \"right\",\r\n                  display: \"block\"\r\n                }}\r\n              >\r\n                {Number(parkingBalance).toLocaleString()}<span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <p style={{ marginTop: \"10px\", fontSize: \"12px\", color: \"#9ca3af\", textAlign: \"center\" }}>\r\n                  \r\n          </p>\r\n        </div>\r\n\r\n        {/*    -   */}\r\n        <div\r\n          style={{\r\n            padding: \"25px\",\r\n            background: \"rgba(20, 20, 35, 0.4)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid rgba(0, 255, 242, 0.1)\",\r\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n          }}\r\n        >\r\n\r\n          {/*   */}\r\n          <div\r\n            style={{\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            <h4\r\n              style={{\r\n                fontSize: \"15px\",\r\n                color: \"#374151\",\r\n                fontWeight: \"700\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            >\r\n                \r\n            </h4>\r\n            <div\r\n              style={{\r\n                background: \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\",\r\n                borderRadius: \"14px\",\r\n                padding: \"20px\",\r\n                border: \"none\",\r\n                boxShadow: \"0 4px 15px rgba(251, 191, 36, 0.2)\",\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}>\r\n                <div style={{ width: \"100%\" }}>\r\n                  <div style={{\r\n                    fontSize: \"26px\",\r\n                    fontWeight: \"800\",\r\n                    color: \"#ffffff\",\r\n                    letterSpacing: \"-0.5px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    {displayCoupons.toLocaleString()} <span style={{ fontSize: \"18px\", fontWeight: \"600\" }}></span>\r\n                  </div>\r\n                  <div style={{\r\n                    fontSize: \"12px\",\r\n                    color: \"rgba(255,255,255,0.85)\",\r\n                    fontWeight: \"500\",\r\n                    marginTop: \"4px\",\r\n                    textAlign: \"right\"\r\n                  }}>\r\n                    1 = {Number(couponValue).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (authLoading || assetsLoading) {\r\n    return <AlchanLoading />;\r\n  }\r\n  if (!user) {\r\n    return <LoginWarning />;\r\n  }\r\n  if (!userDoc && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .        .\r\n      </div>\r\n    );\r\n  }\r\n  if (!currentUserClassCode && !authLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          height: \"80vh\",\r\n          fontSize: \"1.2em\",\r\n          color: \"#ef4444\",\r\n        }}\r\n      >\r\n           .     .\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full px-4 md:px-6 lg:px-8 py-6\">\r\n        {renderTitle()}\r\n\r\n        {/*     */}\r\n        <DailyRewardBanner\r\n          userId={userId}\r\n          onClaim={async (reward) => {\r\n            try {\r\n              //   \r\n              const userRef = doc(db, \"users\", userId);\r\n              await setDoc(userRef, {\r\n                cash: increment(reward),\r\n                updatedAt: serverTimestamp(),\r\n              }, { merge: true });\r\n\r\n              //   \r\n              await logActivity(db, {\r\n                userId,\r\n                userName,\r\n                classCode: currentUserClassCode,\r\n                type: \"  \",\r\n                description: `   ${reward.toLocaleString()} `,\r\n                amount: reward,\r\n                metadata: { rewardType: \"daily_streak\" }\r\n              });\r\n\r\n              //   \r\n              if (optimisticUpdate) {\r\n                optimisticUpdate({ cash: (userDoc?.cash || 0) + reward });\r\n              }\r\n\r\n              console.log(`Daily reward claimed and added: ${reward}`);\r\n            } catch (error) {\r\n              console.error(\"   :\", error);\r\n              alert(\"    .  .\");\r\n            }\r\n          }}\r\n        />\r\n\r\n        {renderAssetSummary()}\r\n        {showTransferModal && (\r\n          <TransferModal\r\n            showTransferModal={showTransferModal}\r\n            setShowTransferModal={setShowTransferModal}\r\n            recipients={classmates}\r\n            transferRecipient={transferRecipient}\r\n            setTransferRecipient={setTransferRecipient}\r\n            transferAmount={transferAmount}\r\n            setTransferAmount={setTransferAmount}\r\n            handleTransfer={handleTransferMoney}\r\n            userId={userId}\r\n            userCash={Number(userDoc?.cash) || 0}\r\n          />\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","// src/pages/market/PersonalShop.js\r\n//    -     / \r\n// 10%   \r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n  getDocs,\r\n  runTransaction,\r\n  increment,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport \"./PersonalShop.css\";\r\n\r\n//     \r\nconst formatKoreanCurrency = (amount) => {\r\n  if (amount === null || amount === undefined) return \"0\";\r\n  return `${Number(amount).toLocaleString()}`;\r\n};\r\n\r\n//  (10%)\r\nconst VAT_RATE = 0.10;\r\n\r\n//  \r\nconst SHOP_CATEGORIES = [\r\n  { value: \"food\", label: \"/\", icon: \"\" },\r\n  { value: \"craft\", label: \"/\", icon: \"\" },\r\n  { value: \"digital\", label: \"/IT\", icon: \"\" },\r\n  { value: \"education\", label: \"/\", icon: \"\" },\r\n  { value: \"entertainment\", label: \"\", icon: \"\" },\r\n  { value: \"service\", label: \"/\", icon: \"\" },\r\n  { value: \"other\", label: \"\", icon: \"\" },\r\n];\r\n\r\n// / \r\nconst PRODUCT_TYPES = [\r\n  { value: \"product\", label: \"\", icon: \"\", description: \" \" },\r\n  { value: \"service\", label: \"\", icon: \"\", description: \" \" },\r\n];\r\n\r\n// ====================  /  ====================\r\nconst ShopModal = ({ isOpen, onClose, shop, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    shopName: \"\",\r\n    description: \"\",\r\n    category: \"other\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (shop) {\r\n      setFormData({\r\n        shopName: shop.shopName || \"\",\r\n        description: shop.description || \"\",\r\n        category: shop.category || \"other\",\r\n      });\r\n    } else {\r\n      setFormData({ shopName: \"\", description: \"\", category: \"other\" });\r\n    }\r\n  }, [shop, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.shopName.trim()) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await onSave(formData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{shop ? \" \" : \"  \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          <div className=\"form-group\">\r\n            <label>  *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.shopName}\r\n              onChange={(e) => setFormData({ ...formData, shopName: e.target.value })}\r\n              placeholder=\":  \"\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <select\r\n              value={formData.category}\r\n              onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n            >\r\n              {SHOP_CATEGORIES.map((cat) => (\r\n                <option key={cat.value} value={cat.value}>\r\n                  {cat.icon} {cat.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label> </label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"  !\"\r\n              rows={3}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : shop ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==================== /   ====================\r\nconst ProductModal = ({ isOpen, onClose, product, shopId, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    type: \"product\",\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //  \r\n  const taxAmount = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return Math.round(price * VAT_RATE);\r\n  }, [formData.price]);\r\n\r\n  const totalPrice = useMemo(() => {\r\n    const price = parseInt(formData.price) || 0;\r\n    return price + taxAmount;\r\n  }, [formData.price, taxAmount]);\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      setFormData({\r\n        type: product.type || \"product\",\r\n        name: product.name || \"\",\r\n        description: product.description || \"\",\r\n        price: product.price?.toString() || \"\",\r\n        stock: product.stock >= 0 ? product.stock.toString() : \"\",\r\n      });\r\n    } else {\r\n      setFormData({ type: \"product\", name: \"\", description: \"\", price: \"\", stock: \"\" });\r\n    }\r\n  }, [product, isOpen]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.name.trim()) {\r\n      alert(\"/  !\");\r\n      return;\r\n    }\r\n    if (!formData.price || parseInt(formData.price) <= 0) {\r\n      alert(\"  !\");\r\n      return;\r\n    }\r\n    if (formData.type === \"product\" && (!formData.stock || parseInt(formData.stock) <= 0)) {\r\n      alert(\"   !\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const productData = {\r\n        type: formData.type,\r\n        name: formData.name.trim(),\r\n        description: formData.description.trim(),\r\n        price: parseInt(formData.price),\r\n        taxAmount: taxAmount,\r\n        totalPrice: totalPrice,\r\n        stock: formData.type === \"service\" ? -1 : parseInt(formData.stock),\r\n      };\r\n      await onSave(productData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      alert(\"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3>{product ? \"/ \" : \" / \"}</h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"modal-content\">\r\n          {/*   */}\r\n          <div className=\"form-group\">\r\n            <label> *</label>\r\n            <div className=\"type-selector\">\r\n              {PRODUCT_TYPES.map((type) => (\r\n                <button\r\n                  key={type.value}\r\n                  type=\"button\"\r\n                  onClick={() => setFormData({ ...formData, type: type.value })}\r\n                  className={`type-button ${formData.type === type.value ? \"active\" : \"\"}`}\r\n                >\r\n                  <span className=\"type-icon\">{type.icon}</span>\r\n                  <span className=\"type-label\">{type.label}</span>\r\n                  <span className=\"type-desc\">{type.description}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label>{formData.type === \"product\" ? \"\" : \"\"} *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder={formData.type === \"product\" ? \":  \" : \":  \"}\r\n              maxLength={30}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label></label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              placeholder=\"/  \"\r\n              rows={2}\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n\r\n          {/*  */}\r\n          <div className=\"form-group\">\r\n            <label> () *</label>\r\n            <div className=\"input-with-suffix\">\r\n              <input\r\n                type=\"number\"\r\n                value={formData.price}\r\n                onChange={(e) => setFormData({ ...formData, price: e.target.value })}\r\n                placeholder=\"0\"\r\n                min=\"1\"\r\n              />\r\n              <span className=\"suffix\"></span>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          {formData.price && parseInt(formData.price) > 0 && (\r\n            <div className=\"tax-info-box\">\r\n              <div className=\"tax-row\">\r\n                <span> </span>\r\n                <span>{formatKoreanCurrency(parseInt(formData.price))}</span>\r\n              </div>\r\n              <div className=\"tax-row highlight\">\r\n                <span>+  (10%)</span>\r\n                <span>+{formatKoreanCurrency(taxAmount)}</span>\r\n              </div>\r\n              <div className=\"tax-row total\">\r\n                <span> </span>\r\n                <span className=\"neon-text\">{formatKoreanCurrency(totalPrice)}</span>\r\n              </div>\r\n              <p className=\"tax-notice\"> 10%   </p>\r\n            </div>\r\n          )}\r\n\r\n          {/*  ( ) */}\r\n          {formData.type === \"product\" && (\r\n            <div className=\"form-group\">\r\n              <label>  *</label>\r\n              <div className=\"input-with-suffix\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.stock}\r\n                  onChange={(e) => setFormData({ ...formData, stock: e.target.value })}\r\n                  placeholder=\"0\"\r\n                  min=\"1\"\r\n                />\r\n                <span className=\"suffix\"></span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" onClick={onClose} className=\"modal-button cancel\">\r\n              \r\n            </button>\r\n            <button type=\"submit\" disabled={loading} className=\"modal-button confirm\">\r\n              {loading ? \" ...\" : product ? \"\" : \"\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst PurchaseModal = ({ isOpen, onClose, product, shop, onConfirm }) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const totalAmount = useMemo(() => {\r\n    return product ? product.totalPrice * quantity : 0;\r\n  }, [product, quantity]);\r\n\r\n  const handleConfirm = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onConfirm(quantity);\r\n      onClose();\r\n    } catch (error) {\r\n      alert(error.message || \"   .\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const maxQuantity = product.type === \"service\" ? 10 : Math.min(product.stock, 10);\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h3> </h3>\r\n          <button className=\"close-button\" onClick={onClose}></button>\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          <div className=\"purchase-item-info\">\r\n            <div className=\"item-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n            <div className=\"item-details\">\r\n              <h4>{product.name}</h4>\r\n              <p className=\"shop-name\">{shop?.shopName}</p>\r\n              <p className=\"item-price\">{formatKoreanCurrency(product.totalPrice)} ( )</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"quantity-selector\">\r\n            <label>{product.type === \"product\" ? \" \" : \" \"}</label>\r\n            <div className=\"quantity-controls\">\r\n              <button\r\n                onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                -\r\n              </button>\r\n              <span className=\"quantity-value\">{quantity}</span>\r\n              <button\r\n                onClick={() => setQuantity(Math.min(maxQuantity, quantity + 1))}\r\n                className=\"quantity-btn\"\r\n              >\r\n                +\r\n              </button>\r\n              {product.type === \"product\" && (\r\n                <span className=\"stock-info\">(: {product.stock})</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/*   */}\r\n          <div className=\"total-amount-box\">\r\n            <span>  </span>\r\n            <span className=\"total-price neon-text\">{formatKoreanCurrency(totalAmount)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button onClick={onClose} className=\"modal-button cancel\">\r\n            \r\n          </button>\r\n          <button onClick={handleConfirm} disabled={loading} className=\"modal-button confirm\">\r\n            {loading ? \" ...\" : \"\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ShopCard = ({ shop, onClick }) => {\r\n  const category = SHOP_CATEGORIES.find((c) => c.value === shop.category);\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"shop-card\">\r\n      <div className=\"shop-card-header\">\r\n        <div className=\"shop-icon\">{category?.icon || \"\"}</div>\r\n        <div className=\"shop-info\">\r\n          <h3 className=\"shop-name\">{shop.shopName}</h3>\r\n          <p className=\"shop-owner\">{shop.ownerName} </p>\r\n        </div>\r\n      </div>\r\n      {shop.description && (\r\n        <p className=\"shop-description\">{shop.description}</p>\r\n      )}\r\n      <div className=\"shop-card-footer\">\r\n        <span className=\"shop-category\">{category?.label || \"\"}</span>\r\n        <span className=\"shop-sales\"> : {formatKoreanCurrency(shop.totalSales || 0)}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================    ====================\r\nconst ProductCard = ({ product, shop, onBuy, isOwner, onEdit, onDelete }) => {\r\n  return (\r\n    <div className=\"product-card\">\r\n      <div className=\"product-card-header\">\r\n        <div className=\"product-icon\">{product.type === \"product\" ? \"\" : \"\"}</div>\r\n        <div className=\"product-info\">\r\n          <div className=\"product-title-row\">\r\n            <h4 className=\"product-name\">{product.name}</h4>\r\n            <span className={`product-type-badge ${product.type}`}>\r\n              {product.type === \"product\" ? \"\" : \"\"}\r\n            </span>\r\n          </div>\r\n          {product.description && (\r\n            <p className=\"product-description\">{product.description}</p>\r\n          )}\r\n          <div className=\"product-price-row\">\r\n            <span className=\"product-price neon-text\">\r\n              {formatKoreanCurrency(product.totalPrice)}\r\n            </span>\r\n            <span className=\"vat-included\">(VAT )</span>\r\n            {product.type === \"product\" && (\r\n              <span className={`stock-badge ${product.stock > 0 ? \"\" : \"soldout\"}`}>\r\n                {product.stock > 0 ? ` ${product.stock}` : \"\"}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"product-card-actions\">\r\n        {isOwner ? (\r\n          <>\r\n            <button onClick={() => onEdit(product)} className=\"action-btn edit\">\r\n               \r\n            </button>\r\n            <button onClick={() => onDelete(product)} className=\"action-btn delete\">\r\n               \r\n            </button>\r\n          </>\r\n        ) : (\r\n          <button\r\n            onClick={() => onBuy(product, shop)}\r\n            disabled={product.type === \"product\" && product.stock <= 0}\r\n            className=\"action-btn buy\"\r\n          >\r\n            {product.type === \"product\" && product.stock <= 0 ? \"\" : \" \"}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ====================   ====================\r\nconst PersonalShop = () => {\r\n  const { currentUser, userProfile, refreshBalance } = useAuth();\r\n\r\n  //  \r\n  const [activeTab, setActiveTab] = useState(\"browse\"); // browse, myshop, sales\r\n\r\n  //  \r\n  const [shops, setShops] = useState([]);\r\n  const [myShop, setMyShop] = useState(null);\r\n  const [myProducts, setMyProducts] = useState([]);\r\n  const [selectedShop, setSelectedShop] = useState(null);\r\n  const [selectedShopProducts, setSelectedShopProducts] = useState([]);\r\n\r\n  //  \r\n  const [showShopModal, setShowShopModal] = useState(false);\r\n  const [showProductModal, setShowProductModal] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState(null);\r\n  const [purchaseProduct, setPurchaseProduct] = useState(null);\r\n  const [purchaseShop, setPurchaseShop] = useState(null);\r\n\r\n  //  \r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingProducts, setLoadingProducts] = useState(false);\r\n\r\n  // /\r\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  //   \r\n  const loadShops = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      let q = query(\r\n        shopsRef,\r\n        where(\"status\", \"==\", \"active\"),\r\n        orderBy(\"createdAt\", \"desc\"),\r\n        limit(50)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n      const shopsData = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setShops(shopsData);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  //   \r\n  const loadMyShop = useCallback(async () => {\r\n    if (!currentUser) return;\r\n    try {\r\n      const shopsRef = collection(db, \"personalShops\");\r\n      const q = query(shopsRef, where(\"ownerId\", \"==\", currentUser.uid), limit(1));\r\n      const snapshot = await getDocs(q);\r\n\r\n      if (!snapshot.empty) {\r\n        const shopData = { id: snapshot.docs[0].id, ...snapshot.docs[0].data() };\r\n        setMyShop(shopData);\r\n\r\n        //   \r\n        const productsRef = collection(db, \"shopProducts\");\r\n        const pq = query(\r\n          productsRef,\r\n          where(\"shopId\", \"==\", shopData.id),\r\n          orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const pSnapshot = await getDocs(pq);\r\n        setMyProducts(pSnapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  //   \r\n  const loadShopProducts = useCallback(async (shopId) => {\r\n    try {\r\n      setLoadingProducts(true);\r\n      const productsRef = collection(db, \"shopProducts\");\r\n      const q = query(\r\n        productsRef,\r\n        where(\"shopId\", \"==\", shopId),\r\n        where(\"status\", \"==\", \"available\"),\r\n        orderBy(\"createdAt\", \"desc\")\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      setSelectedShopProducts(snapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n    } finally {\r\n      setLoadingProducts(false);\r\n    }\r\n  }, []);\r\n\r\n  //  \r\n  useEffect(() => {\r\n    loadShops();\r\n    loadMyShop();\r\n  }, [loadShops, loadMyShop]);\r\n\r\n  //     \r\n  useEffect(() => {\r\n    if (selectedShop) {\r\n      loadShopProducts(selectedShop.id);\r\n    }\r\n  }, [selectedShop, loadShopProducts]);\r\n\r\n  //  /\r\n  const handleSaveShop = async (formData) => {\r\n    if (!currentUser) return;\r\n\r\n    if (myShop) {\r\n      // \r\n      await updateDoc(doc(db, \"personalShops\", myShop.id), {\r\n        ...formData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"personalShops\"), {\r\n        ...formData,\r\n        ownerId: currentUser.uid,\r\n        ownerName: userProfile?.name || \"\",\r\n        status: \"active\",\r\n        totalSales: 0,\r\n        totalTaxPaid: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    await loadMyShop();\r\n    await loadShops();\r\n  };\r\n\r\n  //  /\r\n  const handleSaveProduct = async (productData) => {\r\n    if (!myShop) return;\r\n\r\n    if (editingProduct) {\r\n      // \r\n      await updateDoc(doc(db, \"shopProducts\", editingProduct.id), {\r\n        ...productData,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    } else {\r\n      // \r\n      await addDoc(collection(db, \"shopProducts\"), {\r\n        ...productData,\r\n        shopId: myShop.id,\r\n        ownerId: currentUser.uid,\r\n        status: \"available\",\r\n        soldCount: 0,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n    }\r\n\r\n    setEditingProduct(null);\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handleDeleteProduct = async (product) => {\r\n    if (!window.confirm(`\"${product.name}\"() ?`)) return;\r\n\r\n    await deleteDoc(doc(db, \"shopProducts\", product.id));\r\n    await loadMyShop();\r\n  };\r\n\r\n  //  \r\n  const handlePurchase = async (quantity) => {\r\n    if (!currentUser || !purchaseProduct || !purchaseShop) {\r\n      throw new Error(\"   .\");\r\n    }\r\n\r\n    const totalAmount = purchaseProduct.totalPrice * quantity;\r\n    const taxAmount = purchaseProduct.taxAmount * quantity;\r\n    const sellerAmount = purchaseProduct.price * quantity;\r\n\r\n    //  \r\n    if ((userProfile?.balance || 0) < totalAmount) {\r\n      throw new Error(\" !\");\r\n    }\r\n\r\n    //    \r\n    if (purchaseShop.ownerId === currentUser.uid) {\r\n      throw new Error(\"    !\");\r\n    }\r\n\r\n    await runTransaction(db, async (transaction) => {\r\n      //   \r\n      const buyerRef = doc(db, \"users\", currentUser.uid);\r\n      transaction.update(buyerRef, {\r\n        balance: increment(-totalAmount),\r\n      });\r\n\r\n      //    ( )\r\n      const sellerRef = doc(db, \"users\", purchaseShop.ownerId);\r\n      transaction.update(sellerRef, {\r\n        balance: increment(sellerAmount),\r\n      });\r\n\r\n      //    ()\r\n      const taxRef = doc(db, \"nationalTax\", \"treasury\");\r\n      transaction.update(taxRef, {\r\n        totalVAT: increment(taxAmount),\r\n        totalTaxCollected: increment(taxAmount),\r\n      });\r\n\r\n      //   \r\n      const shopRef = doc(db, \"personalShops\", purchaseShop.id);\r\n      transaction.update(shopRef, {\r\n        totalSales: increment(sellerAmount),\r\n        totalTaxPaid: increment(taxAmount),\r\n      });\r\n\r\n      //  / \r\n      const productRef = doc(db, \"shopProducts\", purchaseProduct.id);\r\n      const updates = { soldCount: increment(quantity) };\r\n      if (purchaseProduct.type === \"product\") {\r\n        updates.stock = increment(-quantity);\r\n        if (purchaseProduct.stock - quantity <= 0) {\r\n          updates.status = \"soldout\";\r\n        }\r\n      }\r\n      transaction.update(productRef, updates);\r\n\r\n      //  \r\n      const activityRef = collection(db, \"activities\");\r\n      transaction.set(doc(activityRef), {\r\n        type: \"shop_purchase\",\r\n        buyerId: currentUser.uid,\r\n        buyerName: userProfile?.name || \"\",\r\n        sellerId: purchaseShop.ownerId,\r\n        sellerName: purchaseShop.ownerName,\r\n        shopId: purchaseShop.id,\r\n        shopName: purchaseShop.shopName,\r\n        productId: purchaseProduct.id,\r\n        productName: purchaseProduct.name,\r\n        productType: purchaseProduct.type,\r\n        quantity: quantity,\r\n        unitPrice: purchaseProduct.totalPrice,\r\n        totalAmount: totalAmount,\r\n        taxAmount: taxAmount,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    //  \r\n    if (refreshBalance) {\r\n      await refreshBalance();\r\n    }\r\n\r\n    //   \r\n    if (selectedShop) {\r\n      await loadShopProducts(selectedShop.id);\r\n    }\r\n\r\n    setPurchaseProduct(null);\r\n    setPurchaseShop(null);\r\n    alert(\" !\");\r\n  };\r\n\r\n  //   \r\n  const filteredShops = useMemo(() => {\r\n    return shops.filter((shop) => {\r\n      if (categoryFilter !== \"all\" && shop.category !== categoryFilter) return false;\r\n      if (searchQuery) {\r\n        const q = searchQuery.toLowerCase();\r\n        return (\r\n          shop.shopName.toLowerCase().includes(q) ||\r\n          shop.ownerName.toLowerCase().includes(q) ||\r\n          (shop.description && shop.description.toLowerCase().includes(q))\r\n        );\r\n      }\r\n      return true;\r\n    });\r\n  }, [shops, categoryFilter, searchQuery]);\r\n\r\n  //   \r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case \"browse\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {/*    */}\r\n            {selectedShop ? (\r\n              <div className=\"shop-detail-view\">\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedShop(null);\r\n                    setSelectedShopProducts([]);\r\n                  }}\r\n                  className=\"back-button\"\r\n                >\r\n                    \r\n                </button>\r\n\r\n                {/*   */}\r\n                <div className=\"shop-detail-header\">\r\n                  <div className=\"shop-detail-icon\">\r\n                    {SHOP_CATEGORIES.find((c) => c.value === selectedShop.category)?.icon || \"\"}\r\n                  </div>\r\n                  <div className=\"shop-detail-info\">\r\n                    <h2>{selectedShop.shopName}</h2>\r\n                    <p className=\"owner\">{selectedShop.ownerName} </p>\r\n                    {selectedShop.description && (\r\n                      <p className=\"description\">{selectedShop.description}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div className=\"products-section\">\r\n                  <h3> </h3>\r\n                  {loadingProducts ? (\r\n                    <div className=\"loading-state\">  ...</div>\r\n                  ) : selectedShopProducts.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                      <span className=\"empty-icon\"></span>\r\n                      <p>  </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"products-grid\">\r\n                      {selectedShopProducts.map((product) => (\r\n                        <ProductCard\r\n                          key={product.id}\r\n                          product={product}\r\n                          shop={selectedShop}\r\n                          onBuy={(p, s) => {\r\n                            setPurchaseProduct(p);\r\n                            setPurchaseShop(s);\r\n                          }}\r\n                          isOwner={false}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              /*   */\r\n              <div className=\"shop-list-view\">\r\n                {/*  &  */}\r\n                <div className=\"controls-section\">\r\n                  <div className=\"search-box\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                      placeholder=\" ...\"\r\n                      className=\"search-input\"\r\n                    />\r\n                  </div>\r\n                  <select\r\n                    value={categoryFilter}\r\n                    onChange={(e) => setCategoryFilter(e.target.value)}\r\n                    className=\"category-filter\"\r\n                  >\r\n                    <option value=\"all\"> </option>\r\n                    {SHOP_CATEGORIES.map((cat) => (\r\n                      <option key={cat.value} value={cat.value}>\r\n                        {cat.icon} {cat.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/*   */}\r\n                {loading ? (\r\n                  <div className=\"loading-state\">  ...</div>\r\n                ) : filteredShops.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>\r\n                      {searchQuery || categoryFilter !== \"all\"\r\n                        ? \"  \"\r\n                        : \"   \"}\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"shops-grid\">\r\n                    {filteredShops.map((shop) => (\r\n                      <ShopCard\r\n                        key={shop.id}\r\n                        shop={shop}\r\n                        onClick={() => setSelectedShop(shop)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"myshop\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            {myShop ? (\r\n              <div className=\"my-shop-view\">\r\n                {/*    */}\r\n                <div className=\"my-shop-header\">\r\n                  <div className=\"my-shop-info\">\r\n                    <div className=\"my-shop-icon\">\r\n                      {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.icon || \"\"}\r\n                    </div>\r\n                    <div className=\"my-shop-details\">\r\n                      <h2>{myShop.shopName}</h2>\r\n                      <p className=\"category\">\r\n                        {SHOP_CATEGORIES.find((c) => c.value === myShop.category)?.label}\r\n                      </p>\r\n                      {myShop.description && (\r\n                        <p className=\"description\">{myShop.description}</p>\r\n                      )}\r\n                    </div>\r\n                    <button onClick={() => setShowShopModal(true)} className=\"edit-shop-btn\">\r\n                       \r\n                    </button>\r\n                  </div>\r\n                  <div className=\"my-shop-stats\">\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value neon-text\">{formatKoreanCurrency(myShop.totalSales || 0)}</span>\r\n                    </div>\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\"> </span>\r\n                      <span className=\"stat-value\">{formatKoreanCurrency(myShop.totalTaxPaid || 0)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/*    */}\r\n                <div className=\"products-header\">\r\n                  <h3> / ({myProducts.length})</h3>\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingProduct(null);\r\n                      setShowProductModal(true);\r\n                    }}\r\n                    className=\"add-product-btn\"\r\n                  >\r\n                     \r\n                  </button>\r\n                </div>\r\n\r\n                {/*    */}\r\n                {myProducts.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\"></span>\r\n                    <p>  </p>\r\n                    <span className=\"empty-hint\">  !</span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"products-grid\">\r\n                    {myProducts.map((product) => (\r\n                      <ProductCard\r\n                        key={product.id}\r\n                        product={product}\r\n                        shop={myShop}\r\n                        isOwner={true}\r\n                        onEdit={(p) => {\r\n                          setEditingProduct(p);\r\n                          setShowProductModal(true);\r\n                        }}\r\n                        onDelete={handleDeleteProduct}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              /*   -   */\r\n              <div className=\"create-shop-view\">\r\n                <div className=\"create-shop-card\">\r\n                  <span className=\"create-icon\"></span>\r\n                  <h2>  !</h2>\r\n                  <p>    </p>\r\n                  <button onClick={() => setShowShopModal(true)} className=\"create-shop-btn\">\r\n                      \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"sales\":\r\n        return (\r\n          <div className=\"tab-content\">\r\n            <div className=\"empty-state\">\r\n              <span className=\"empty-icon\"></span>\r\n              <p>    ...</p>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"personal-shop-container\">\r\n      {/*  */}\r\n      <div className=\"market-header\">\r\n        <h1> </h1>\r\n        <p className=\"header-subtitle\">   / !</p>\r\n      </div>\r\n\r\n      {/*   */}\r\n      <div className=\"market-tabs\">\r\n        {[\r\n          { id: \"browse\", label: \" \", icon: \"\" },\r\n          { id: \"myshop\", label: \" \", icon: \"\" },\r\n          { id: \"sales\", label: \" \", icon: \"\" },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => {\r\n              setActiveTab(tab.id);\r\n              setSelectedShop(null);\r\n            }}\r\n            className={`tab-button ${activeTab === tab.id ? \"active\" : \"\"}`}\r\n          >\r\n            <span className=\"tab-icon\">{tab.icon}</span>\r\n            <span className=\"tab-label\">{tab.label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/*  */}\r\n      {renderTabContent()}\r\n\r\n      {/*  */}\r\n      <ShopModal\r\n        isOpen={showShopModal}\r\n        onClose={() => setShowShopModal(false)}\r\n        shop={myShop}\r\n        onSave={handleSaveShop}\r\n      />\r\n\r\n      <ProductModal\r\n        isOpen={showProductModal}\r\n        onClose={() => {\r\n          setShowProductModal(false);\r\n          setEditingProduct(null);\r\n        }}\r\n        product={editingProduct}\r\n        shopId={myShop?.id}\r\n        onSave={handleSaveProduct}\r\n      />\r\n\r\n      <PurchaseModal\r\n        isOpen={!!purchaseProduct}\r\n        onClose={() => {\r\n          setPurchaseProduct(null);\r\n          setPurchaseShop(null);\r\n        }}\r\n        product={purchaseProduct}\r\n        shop={purchaseShop}\r\n        onConfirm={handlePurchase}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalShop;\r\n","// src/ParkingAccount.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, doc, getDoc, setDoc, serverTimestamp, updateDoc, increment, runTransaction, collection, getDocs, deleteDoc, query, where, limit } from \"../../firebase\";\r\nimport { format, isToday, differenceInDays, isPast } from 'date-fns';\r\nimport { PiggyBank, Landmark, HandCoins, Wallet, X, TrendingUp, Building2 } from 'lucide-react';\r\nimport { formatKoreanCurrency } from '../../numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\n\r\n// ()   -   \r\nconst getTeacherAccount = async (classCode) => {\r\n  if (!classCode) return null;\r\n\r\n  try {\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(\r\n      usersRef,\r\n      where(\"classCode\", \"==\", classCode),\r\n      where(\"isAdmin\", \"==\", true),\r\n      limit(1)\r\n    );\r\n    const snapshot = await getDocs(q);\r\n\r\n    if (!snapshot.empty) {\r\n      const teacherDoc = snapshot.docs[0];\r\n      return {\r\n        id: teacherDoc.id,\r\n        ...teacherDoc.data()\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error(\"   :\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// --- Styles ---\r\n// --- Styles ---\r\nconst styles = {\r\n  container: {\r\n    fontFamily: 'sans-serif',\r\n    backgroundColor: 'transparent',\r\n    padding: '32px',\r\n    minHeight: 'auto'\r\n  },\r\n  message: (type) => ({\r\n    padding: '16px 20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '28px',\r\n    textAlign: 'center',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    color: type === 'error' ? '#f87171' : '#34d399',\r\n    backgroundColor: type === 'error' ? 'rgba(239, 68, 68, 0.1)' : 'rgba(16, 185, 129, 0.1)',\r\n    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n    border: `1px solid ${type === 'error' ? 'rgba(239, 68, 68, 0.3)' : 'rgba(16, 185, 129, 0.3)'}`\r\n  }),\r\n  grid: {\r\n    display: 'grid',\r\n    gap: '28px',\r\n    maxWidth: '1200px',\r\n    margin: '0 auto'\r\n  },\r\n  card: {\r\n    backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n    boxShadow: '0 6px 20px rgba(0, 0, 0, 0.2)',\r\n    borderRadius: '16px',\r\n    padding: '32px',\r\n    border: '1px solid rgba(255, 255, 255, 0.05)',\r\n    backdropFilter: 'blur(10px)'\r\n  },\r\n  cardHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '16px',\r\n    marginBottom: '24px',\r\n    paddingBottom: '20px',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.05)'\r\n  },\r\n  cardTitle: {\r\n    fontSize: '26px',\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n    letterSpacing: '-0.5px',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  tabContainer: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n    marginBottom: '20px',\r\n    gap: '8px'\r\n  },\r\n  tabButton: (isActive) => ({\r\n    padding: '12px 24px',\r\n    border: 'none',\r\n    background: isActive ? 'rgba(99, 102, 241, 0.2)' : 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '17px',\r\n    fontWeight: isActive ? '700' : '500',\r\n    color: isActive ? '#00fff2' : '#94a3b8',\r\n    borderBottom: `3px solid ${isActive ? '#00fff2' : 'transparent'}`,\r\n    marginBottom: '-2px',\r\n    borderRadius: '8px 8px 0 0',\r\n    transition: 'all 0.2s ease',\r\n    textShadow: isActive ? '0 0 5px rgba(0, 255, 242, 0.3)' : 'none'\r\n  }),\r\n  button: (disabled, variant = 'primary') => ({\r\n    backgroundColor: variant === 'primary' ? 'rgba(3, 105, 161, 0.8)' : (variant === 'danger' ? 'rgba(220, 38, 38, 0.8)' : (variant === 'success' ? 'rgba(5, 150, 105, 0.8)' : '#4b5563')),\r\n    color: 'white',\r\n    padding: '12px 20px',\r\n    borderRadius: '10px',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    opacity: disabled ? 0.5 : 1,\r\n    fontSize: '15px',\r\n    fontWeight: '600',\r\n    boxShadow: disabled ? 'none' : '0 4px 12px rgba(0,0,0,0.3)',\r\n    transition: 'all 0.2s ease',\r\n    ':hover': !disabled && {\r\n      transform: 'translateY(-2px)',\r\n      boxShadow: '0 6px 16px rgba(0,0,0,0.4)',\r\n      filter: 'brightness(1.1)'\r\n    }\r\n  }),\r\n  noProduct: {\r\n    textAlign: 'center',\r\n    color: '#94a3b8',\r\n    padding: '32px 0',\r\n    fontSize: '16px',\r\n    fontStyle: 'italic'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '14px 16px',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\r\n    border: '2px solid rgba(255, 255, 255, 0.1)',\r\n    borderRadius: '10px',\r\n    marginBottom: '16px',\r\n    fontSize: '16px',\r\n    color: 'white',\r\n    transition: 'border-color 0.2s ease',\r\n    ':focus': {\r\n      outline: 'none',\r\n      borderColor: '#00fff2',\r\n      boxShadow: '0 0 0 2px rgba(0, 255, 242, 0.1)'\r\n    }\r\n  },\r\n  modalOverlay: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    zIndex: 1000,\r\n    backdropFilter: 'blur(8px)'\r\n  },\r\n  modalContent: {\r\n    background: '#1a1a2e',\r\n    padding: '32px',\r\n    borderRadius: '16px',\r\n    width: '90%',\r\n    maxWidth: '450px',\r\n    position: 'relative',\r\n    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.6)',\r\n    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n    color: '#e2e8f0'\r\n  },\r\n  modalTitle: {\r\n    fontSize: '24px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '20px',\r\n    color: '#fff',\r\n    textShadow: '0 0 10px rgba(0, 255, 242, 0.3)'\r\n  },\r\n  modalCloseBtn: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    right: '20px',\r\n    background: 'none',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    color: '#94a3b8',\r\n    transition: 'color 0.2s ease',\r\n    ':hover': {\r\n      color: '#fff'\r\n    }\r\n  },\r\n};\r\n\r\n// --- Helper Functions & Sub-Components ---\r\nconst formatCurrency = (amount) => (typeof amount === 'number' ? Math.round(amount).toLocaleString() : '0');\r\n\r\n//  \r\nconst calculateCompoundInterest = (principal, dailyRate, days) => {\r\n  if (principal <= 0 || !dailyRate || days <= 0) return { interest: 0, total: principal };\r\n  const total = principal * Math.pow(1 + dailyRate / 100, days);\r\n  const interest = total - principal;\r\n  return { interest: Math.round(interest), total: Math.round(total) };\r\n};\r\n\r\n//    ( )\r\nconst calculateDailyInterest = (principal, dailyRate) => {\r\n  //    -  \r\n  return Math.round(principal * (dailyRate / 100));\r\n};\r\n\r\nconst ICON_MAP = {\r\n  parking: <Wallet size={28} style={{ color: '#0369a1' }} />,\r\n  deposits: <Landmark size={28} style={{ color: '#059669' }} />,\r\n  savings: <PiggyBank size={28} style={{ color: '#7c3aed' }} />,\r\n  loans: <HandCoins size={28} style={{ color: '#dc2626' }} />,\r\n};\r\n\r\nconst SubscribedProductItem = ({ product, onCancel, onMaturity }) => {\r\n  const isMatured = product.maturityDate && new Date() >= product.maturityDate;\r\n  const daysRemaining = product.maturityDate ? Math.max(0, differenceInDays(product.maturityDate, new Date())) : 0;\r\n  const dailyRate = product.rate; //   \r\n\r\n  const { interest, total } = calculateCompoundInterest(\r\n    product.balance,\r\n    product.rate, // \r\n    product.termInDays\r\n  );\r\n\r\n  const dailyInterestAmount = calculateDailyInterest(product.balance, product.rate);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: `2px solid ${isMatured ? 'rgba(16, 185, 129, 0.5)' : 'rgba(255, 255, 255, 0.1)'}`,\r\n      borderRadius: '12px',\r\n      marginBottom: '16px',\r\n      background: isMatured ? 'rgba(16, 185, 129, 0.1)' : 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n        <div>\r\n          <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '4px' }}>{product.name}</div>\r\n          {isMatured && <span style={{\r\n            backgroundColor: '#10b981',\r\n            color: 'white',\r\n            padding: '4px 12px',\r\n            borderRadius: '20px',\r\n            fontSize: '13px',\r\n            fontWeight: '600'\r\n          }}></span>}\r\n        </div>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#00fff2' }}>{formatCurrency(product.balance)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#94a3b8', marginTop: '16px', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 0, 0, 0.2)', padding: '16px', borderRadius: '8px' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> ():</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{product.rate}%</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '500' }}> :</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399' }}>+{formatCurrency(dailyInterestAmount)}/</span>\r\n        </div>\r\n        {product.maturityDate && (\r\n          <>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ fontWeight: '500' }}>:</span>\r\n              <span style={{ fontWeight: '600', color: '#e2e8f0' }}>{format(product.maturityDate, 'yyyy-MM-dd')}</span>\r\n            </div>\r\n            {!isMatured && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ fontWeight: '500' }}> :</span>\r\n                <span style={{ fontWeight: '600', color: '#00fff2' }}>{daysRemaining}</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed rgba(255, 255, 255, 0.1)', margin: '16px 0' }}></div>\r\n\r\n      <div style={{ fontSize: '15px', color: '#e2e8f0', display: 'grid', gap: '10px', backgroundColor: 'rgba(0, 255, 242, 0.05)', padding: '16px', borderRadius: '8px', border: '1px solid rgba(0, 255, 242, 0.1)' }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <span style={{ fontWeight: '600' }}>   ():</span>\r\n          <span style={{ fontWeight: '700', color: '#34d399', fontSize: '17px' }}>+{formatCurrency(interest)}</span>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '17px' }}>\r\n          <span style={{ fontWeight: '700' }}>  :</span>\r\n          <span style={{ fontWeight: '700', color: '#00fff2' }}>{formatCurrency(total)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '20px', textAlign: 'right' }}>\r\n        {isMatured ? (\r\n          <button\r\n            onClick={onMaturity}\r\n            style={{ ...styles.button(false, 'success'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n              ({formatCurrency(total)})\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={onCancel}\r\n            style={{ ...styles.button(false, 'danger'), padding: '10px 20px', fontSize: '15px' }}\r\n          >\r\n            {product.type === 'loan' ? ' ' : ' '}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AvailableProductItem = ({ product, onSubscribe }) => {\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest } = calculateCompoundInterest(100000, dailyRate, product.termInDays);\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      border: '2px solid rgba(255, 255, 255, 0.1)',\r\n      borderRadius: '12px',\r\n      marginBottom: '12px',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      background: 'rgba(0, 0, 0, 0.2)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n      transition: 'all 0.2s ease'\r\n    }}>\r\n      <div>\r\n        <div style={{ fontWeight: '700', fontSize: '18px', color: '#e2e8f0', marginBottom: '8px' }}>{product.name}</div>\r\n        <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '6px' }}>\r\n          <strong style={{ color: '#00fff2' }}> {product.dailyRate}%</strong> (: {product.termInDays})\r\n        </div>\r\n        <div style={{ fontSize: '14px', color: '#34d399', fontWeight: '600' }}>\r\n          <TrendingUp size={14} style={{ display: 'inline', marginRight: '4px' }} />\r\n          10    : +{formatCurrency(projectedInterest)}\r\n        </div>\r\n      </div>\r\n      <button\r\n        onClick={onSubscribe}\r\n        style={{ ...styles.button(false), padding: '12px 24px', fontSize: '16px' }}\r\n      >\r\n        \r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProductSection = ({ title, icon, subscribedProducts, availableProducts, onSubscribe, onCancel, onMaturity }) => {\r\n  const [activeTab, setActiveTab] = useState('subscribed');\r\n  return (\r\n    <div style={styles.card}>\r\n      <div style={styles.cardHeader}>\r\n        {icon}\r\n        <h2 style={styles.cardTitle}>{title}</h2>\r\n      </div>\r\n      <div style={styles.tabContainer}>\r\n        <button\r\n          onClick={() => setActiveTab('subscribed')}\r\n          style={styles.tabButton(activeTab === 'subscribed')}\r\n        >\r\n           \r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('available')}\r\n          style={styles.tabButton(activeTab === 'available')}\r\n        >\r\n            \r\n        </button>\r\n      </div>\r\n      <div>\r\n        {activeTab === 'subscribed' && (\r\n          subscribedProducts.length > 0\r\n            ? subscribedProducts.map(p => (\r\n              <SubscribedProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onCancel={() => onCancel(p)}\r\n                onMaturity={() => onMaturity(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>  .</p>\r\n        )}\r\n        {activeTab === 'available' && (\r\n          availableProducts.length > 0\r\n            ? availableProducts.map(p => (\r\n              <AvailableProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onSubscribe={() => onSubscribe(p)}\r\n              />\r\n            ))\r\n            : <p style={styles.noProduct}>   .</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SubscriptionModal = ({ isOpen, onClose, product, onConfirm, isProcessing }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const numAmount = parseFloat(amount);\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest, total: projectedTotal } = !isNaN(numAmount) && numAmount > 0\r\n    ? calculateCompoundInterest(numAmount, dailyRate, product.termInDays)\r\n    : { interest: 0, total: 0 };\r\n\r\n  return (\r\n    <div style={styles.modalOverlay} onClick={onClose}>\r\n      <div style={styles.modalContent} onClick={(e) => e.stopPropagation()}>\r\n        <button onClick={onClose} style={styles.modalCloseBtn}><X size={24} /></button>\r\n        <h3 style={styles.modalTitle}>{product.name} </h3>\r\n\r\n        <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(0, 255, 242, 0.05)', borderRadius: '10px', border: '1px solid rgba(0, 255, 242, 0.2)' }}>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8', marginBottom: '8px' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong>  {product.dailyRate}% ()\r\n          </div>\r\n          <div style={{ fontSize: '15px', color: '#94a3b8' }}>\r\n            <strong style={{ color: '#00fff2' }}>:</strong> {product.termInDays}\r\n          </div>\r\n        </div>\r\n\r\n        <p style={{ marginBottom: '12px', fontSize: '16px', fontWeight: '600', color: '#e2e8f0' }}>  </p>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          style={styles.input}\r\n          placeholder={`${formatCurrency(product.minAmount || 0)} `}\r\n          autoFocus\r\n        />\r\n\r\n        {numAmount > 0 && (\r\n          <div style={{ marginBottom: '20px', padding: '16px', backgroundColor: 'rgba(16, 185, 129, 0.1)', borderRadius: '10px', border: '1px solid rgba(16, 185, 129, 0.3)' }}>\r\n            <div style={{ fontSize: '15px', color: '#34d399', marginBottom: '6px' }}>\r\n                : <strong>+{formatCurrency(projectedInterest)}</strong>\r\n            </div>\r\n            <div style={{ fontSize: '16px', color: '#34d399', fontWeight: '700' }}>\r\n                : {formatCurrency(projectedTotal)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={() => { onConfirm(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing || !amount}\r\n          style={{ ...styles.button(isProcessing || !amount), width: '100%', fontSize: '17px', padding: '16px' }}\r\n        >\r\n          {isProcessing ? ' ...' : ''}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ParkingAccountSection = ({ balance, dailyInterest, onDeposit, onWithdraw, isProcessing, userCash }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  return (\r\n    <div style={{\r\n      ...styles.card,\r\n      background: 'linear-gradient(135deg, rgba(6, 78, 117, 0.85) 0%, rgba(20, 40, 60, 0.9) 100%)',\r\n      color: 'white',\r\n      boxShadow: '0 8px 24px rgba(0, 0, 0, 0.4)',\r\n      border: '1px solid rgba(0, 180, 216, 0.25)'\r\n    }}>\r\n      <div style={{ ...styles.cardHeader, borderBottom: '2px solid rgba(0, 180, 216, 0.2)' }}>\r\n        <Wallet size={32} style={{ color: '#67e8f9' }} />\r\n        <h2 style={{ ...styles.cardTitle, color: '#e0f7fa' }}></h2>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.15)',\r\n        padding: '12px 16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '16px',\r\n        backdropFilter: 'blur(10px)',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <span style={{ fontSize: '16px', fontWeight: '500', color: '#94a3b8' }}> </span>\r\n        <span style={{ fontSize: '20px', fontWeight: '700', color: '#e0f7fa' }}>{formatCurrency(userCash || 0)}</span>\r\n      </div>\r\n\r\n      <div style={{ fontSize: '42px', fontWeight: 'bold', color: '#e0f7fa', marginBottom: '8px' }}>\r\n        {formatCurrency(balance)}\r\n      </div>\r\n\r\n      <p style={{ fontSize: '16px', color: 'rgba(224, 247, 250, 0.8)', marginBottom: '16px', fontWeight: '500' }}>\r\n              \r\n      </p>\r\n\r\n      <div style={{\r\n        backgroundColor: 'rgba(0, 180, 216, 0.12)',\r\n        padding: '16px',\r\n        borderRadius: '10px',\r\n        marginBottom: '24px',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(0, 180, 216, 0.2)'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n          <TrendingUp size={20} style={{ color: '#67e8f9' }} />\r\n          <span style={{ fontSize: '15px', fontWeight: '600', color: '#94a3b8' }}>  </span>\r\n        </div>\r\n        <div style={{ fontSize: '28px', fontWeight: '700', color: '#67e8f9' }}>\r\n          +{formatCurrency(dailyInterest)}/\r\n        </div>\r\n        <div style={{ fontSize: '14px', marginTop: '6px', color: 'rgba(148, 163, 184, 0.9)' }}>\r\n          ( 1%  )\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', gap: '10px' }}>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\" \"\r\n          style={{\r\n            ...styles.input,\r\n            marginBottom: 0,\r\n            fontSize: '17px',\r\n            flex: 1,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n            border: '1px solid rgba(0, 180, 216, 0.3)'\r\n          }}\r\n          disabled={isProcessing}\r\n        />\r\n        <button\r\n          onClick={() => { onDeposit(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing, 'success'),\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n        <button\r\n          onClick={() => { onWithdraw(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          style={{\r\n            ...styles.button(isProcessing),\r\n            backgroundColor: 'rgba(100, 116, 139, 0.5)',\r\n            color: 'white',\r\n            fontSize: '17px',\r\n            padding: '14px 24px'\r\n          }}\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst ParkingAccount = ({\r\n  auth = {},\r\n  depositProducts = [],\r\n  installmentProducts = [],\r\n  loanProducts = [],\r\n  activeView = 'parking',\r\n  onViewChange,\r\n  onLoadUserProducts,\r\n  allUserProducts = [],\r\n  onDeleteUserProduct\r\n}) => {\r\n  const { user, userDoc, loading, refreshUserDocument, isAdmin, addCash, deductCash } = auth;\r\n  const userId = user?.uid;\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [parkingDailyInterest, setParkingDailyInterest] = useState(0);\r\n  const [userDeposits, setUserDeposits] = useState([]);\r\n  const [userSavings, setUserSavings] = useState([]);\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [modal, setModal] = useState({ isOpen: false, product: null, type: '' });\r\n  const [currentCash, setCurrentCash] = useState(userDoc?.cash || 0);\r\n\r\n  const displayMessage = (text, type = \"info\", duration = 3000) => {\r\n    setMessage(text);\r\n    setMessageType(type);\r\n    if (duration) setTimeout(() => setMessage(null), duration);\r\n  };\r\n\r\n  const loadAllData = useCallback(async () => {\r\n    if (!userId) return;\r\n    setIsProcessing(true);\r\n    try {\r\n      //  \r\n      const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRateProduct = depositProducts.length > 0 ? depositProducts[0] : null;\r\n\r\n      if (parkingRateProduct) {\r\n        const parkingDoc = await getDoc(parkingRef);\r\n        if (parkingDoc.exists()) {\r\n          const data = parkingDoc.data();\r\n          const lastInterestDate = data.lastInterestDate?.toDate();\r\n\r\n          if (!lastInterestDate || !isToday(lastInterestDate)) {\r\n            const daysToApply = lastInterestDate ? differenceInDays(new Date(), lastInterestDate) : 1;\r\n            if (daysToApply > 0) {\r\n              const dailyRate = (parkingRateProduct.dailyRate || 0.0027); //  1%     \r\n              const { interest } = calculateCompoundInterest(data.balance || 0, dailyRate, daysToApply);\r\n\r\n              if (interest > 0) {\r\n                await updateDoc(parkingRef, {\r\n                  balance: increment(interest),\r\n                  lastInterestDate: serverTimestamp()\r\n                });\r\n                displayMessage(`  ${formatCurrency(interest)} .`, 'success');\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          //   \r\n          await setDoc(parkingRef, {\r\n            balance: 0,\r\n            lastInterestDate: serverTimestamp()\r\n          });\r\n        }\r\n      }\r\n\r\n      //   \r\n      const finalParkingDoc = await getDoc(parkingRef);\r\n      if (finalParkingDoc.exists()) {\r\n        const balance = finalParkingDoc.data().balance || 0;\r\n        setParkingBalance(balance);\r\n\r\n        //    (1% )\r\n        const dailyRate = 1; // 1%  \r\n        const dailyInterest = calculateDailyInterest(balance, dailyRate);\r\n        setParkingDailyInterest(dailyInterest);\r\n      }\r\n\r\n      //   \r\n      const productsRef = collection(db, \"users\", userId, \"products\");\r\n      const snapshot = await getDocs(productsRef);\r\n      const deposits = [], savings = [], loans = [];\r\n\r\n      snapshot.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') deposits.push(product);\r\n        else if (product.type === 'savings') savings.push(product);\r\n        else if (product.type === 'loan') loans.push(product);\r\n      });\r\n\r\n      setUserDeposits(deposits);\r\n      setUserSavings(savings);\r\n      setUserLoans(loans);\r\n    } catch (error) {\r\n      console.error(\"  :\", error);\r\n      displayMessage(\"   .\", \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [userId, depositProducts]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && userId) loadAllData();\r\n  }, [userId, loading, loadAllData]);\r\n\r\n  // userDoc cash   currentCash \r\n  useEffect(() => {\r\n    if (userDoc?.cash !== undefined) {\r\n      setCurrentCash(userDoc.cash);\r\n      console.log(\"[ParkingAccount] currentCash :\", userDoc.cash);\r\n    }\r\n  }, [userDoc?.cash]);\r\n\r\n  const handleOpenModal = (product, type) => setModal({ isOpen: true, product, type });\r\n  const handleCloseModal = () => setModal({ isOpen: false, product: null, type: '' });\r\n\r\n  const handleSubscribe = async (subscribeAmount) => {\r\n    console.log(\"--- handleSubscribe  ---\");\r\n    const amount = parseFloat(subscribeAmount);\r\n    const { product, type } = modal;\r\n\r\n    console.log(\" :\", product);\r\n    console.log(` : ${type},  : ${amount}`);\r\n\r\n    if (isNaN(amount) || amount <= 0) {\r\n      console.error(\"  :\", subscribeAmount);\r\n      return displayMessage(\"  .\", \"error\");\r\n    }\r\n    if (product.minAmount && amount < product.minAmount) {\r\n      console.error(`   : ${amount} < ${product.minAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.minAmount)}.`, \"error\");\r\n    }\r\n    if (product.maxAmount && amount > product.maxAmount) {\r\n      console.error(`   : ${amount} > ${product.maxAmount}`);\r\n      return displayMessage(`   ${formatCurrency(product.maxAmount)}.`, \"error\");\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    handleCloseModal(); // UX     \r\n\r\n    // ---    ---\r\n    const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n    if (!teacherAccount) {\r\n      displayMessage(\"()    .  .\", \"error\");\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n    console.log(\" :\", teacherAccount.name, teacherAccount.id);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const tempId = `temp_${Date.now()}`;\r\n    const maturityDate = new Date(Date.now() + product.termInDays * 24 * 60 * 60 * 1000);\r\n    const optimisticProduct = {\r\n      id: tempId,\r\n      name: product.name,\r\n      termInDays: product.termInDays,\r\n      rate: product.dailyRate,\r\n      balance: amount,\r\n      startDate: new Date(),\r\n      maturityDate: maturityDate,\r\n      type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n      isOptimistic: true //   \r\n    };\r\n\r\n    //    \r\n    if (optimisticProduct.type === 'deposit') {\r\n      setUserDeposits(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'savings') {\r\n      setUserSavings(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'loan') {\r\n      setUserLoans(prev => [...prev, optimisticProduct]);\r\n    }\r\n\r\n    //    \r\n    const cashChangeAmount = type === 'loans' ? amount : -amount;\r\n    setCurrentCash(prev => prev + cashChangeAmount); //  UI   \r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccount.id);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        // /:   \r\n        if (type !== 'loans' && currentCashInDb < amount) {\r\n          throw new Error(\"  .\");\r\n        }\r\n\r\n        // : ()  \r\n        if (type === 'loans' && teacherCashInDb < amount) {\r\n          throw new Error(\"()    .\");\r\n        }\r\n\r\n        const newProductData = {\r\n          name: product.name,\r\n          termInDays: product.termInDays,\r\n          rate: product.dailyRate,\r\n          balance: amount,\r\n          startDate: serverTimestamp(),\r\n          maturityDate: maturityDate,\r\n          type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n          teacherId: teacherAccount.id, //   ID \r\n          teacherName: teacherAccount.name || ''\r\n        };\r\n\r\n        const newProductRef = doc(collection(db, \"users\", userId, \"products\"));\r\n        transaction.set(newProductRef, newProductData);\r\n\r\n        // /:   \r\n        // :   \r\n        if (type === 'loans') {\r\n          // :  \r\n          transaction.update(userRef, { cash: increment(amount) });\r\n          transaction.update(teacherRef, { cash: increment(-amount) });\r\n        } else {\r\n          // /:  \r\n          transaction.update(userRef, { cash: increment(-amount) });\r\n          transaction.update(teacherRef, { cash: increment(amount) });\r\n        }\r\n      });\r\n\r\n      const actionText = type === 'loans' ? '' : '';\r\n      displayMessage(`${product.name} ${actionText} . (  )`, \"success\");\r\n\r\n      //     (// )\r\n      const activityType = type === 'deposits' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n        : type === 'savings' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n          : ACTIVITY_TYPES.LOAN_CREATE;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: `${product.name} ${type === 'loans' ? '' : ''} (${formatCurrency(amount)}) -   `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: product.name,\r\n          productType: type,\r\n          termInDays: product.termInDays,\r\n          dailyRate: product.dailyRate,\r\n          maturityDate: maturityDate.toISOString(),\r\n          teacherId: teacherAccount.id,\r\n          teacherName: teacherAccount.name\r\n        }\r\n      });\r\n\r\n      //        \r\n      await loadAllData();\r\n      if (refreshUserDocument) refreshUserDocument();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      if (optimisticProduct.type === 'deposit') {\r\n        setUserDeposits(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'savings') {\r\n        setUserSavings(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'loan') {\r\n        setUserLoans(prev => prev.filter(p => p.id !== tempId));\r\n      }\r\n\r\n      //   ( UI)\r\n      setCurrentCash(prev => prev - cashChangeAmount);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleMaturity = async (product) => {\r\n    console.log(\"--- handleMaturity  ---\");\r\n    console.log(\" :\", product);\r\n\r\n    const { id, name, type, balance, termInDays, rate, teacherId } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleMaturity: userId .\");\r\n      return;\r\n    }\r\n\r\n    const dailyRate = rate;\r\n    const { total, interest } = calculateCompoundInterest(balance, dailyRate, termInDays);\r\n\r\n    console.log(` : =${balance}, =${interest}, =${total}`);\r\n\r\n    const confirmMsg = isLoan\r\n      ? `  :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`\r\n      : ` :  ${formatCurrency(balance)} +  ${formatCurrency(interest)} = ${formatCurrency(total)} ?`;\r\n\r\n    if (!window.confirm(confirmMsg)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"  ...\");\r\n\r\n    //    ( teacherId    )\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    console.log(\"  ID:\", teacherAccountId);\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        if (isLoan) {\r\n          //   :    (+)\r\n          if (currentCashInDb < total) {\r\n            throw new Error(` . (: ${formatCurrency(total)}, : ${formatCurrency(currentCashInDb)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(-total) });\r\n          transaction.update(teacherRef, { cash: increment(total) });\r\n          console.log(` :  -${total},  +${total}`);\r\n        } else {\r\n          // /  :    (+)\r\n          if (teacherCashInDb < total) {\r\n            throw new Error(`()   . (: ${formatCurrency(total)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(total) });\r\n          transaction.update(teacherRef, { cash: increment(-total) });\r\n          console.log(` :  +${total},  -${total}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(total)} (  )`\r\n        : `  : ${formatCurrency(total)} (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_MATURITY;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `\r\n          : `${name}   (: ${formatCurrency(balance)}, : ${formatCurrency(interest)}) -  `,\r\n        amount: isLoan ? -total : total,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          interest,\r\n          total,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument().then(() => {\r\n          console.log(\"[ParkingAccount]    userDoc  \");\r\n        });\r\n      }\r\n\r\n      console.log(\"   \");\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      //    currentCash \r\n      if (userDoc?.cash !== undefined) {\r\n        console.log(\"   :\", userDoc.cash);\r\n        setCurrentCash(userDoc.cash);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleMaturity  ---\");\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleCancelEarly = async (product) => {\r\n    console.log(\"--- handleCancelEarly  ---\");\r\n    console.log(\"  :\", product);\r\n\r\n    const { id, name, type, balance } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"  .  .\", \"error\");\r\n      console.error(\"handleCancelEarly: userId .\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = isLoan\r\n      ? ` ${formatCurrency(balance)} ?`\r\n      : `'${name}'()  ? (   )`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      console.log(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log(\"   ...\");\r\n\r\n    //    ( teacherId    )\r\n    const teacherId = product.teacherId;\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"()    .\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    console.log(\"  ID:\", teacherAccountId);\r\n\r\n    // ---   (Optimistic Update) ---\r\n    const originalProducts = {\r\n      deposit: [...userDeposits],\r\n      savings: [...userSavings],\r\n      loan: [...userLoans]\r\n    };\r\n    const originalCash = currentCash;\r\n\r\n    const cashChangeAmount = isLoan ? -balance : balance;\r\n    setCurrentCash(prev => prev + cashChangeAmount);\r\n\r\n    if (type === 'deposit') {\r\n      setUserDeposits(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'savings') {\r\n      setUserSavings(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'loan') {\r\n      setUserLoans(prev => prev.filter(p => p.id !== id));\r\n    }\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      console.log(\"Firestore  :\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        console.log(\" \");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"    .\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"()    .\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n        console.log(`   (DB): ${currentCashInDb},   : ${teacherCashInDb}`);\r\n\r\n        if (isLoan) {\r\n          //   :    ()\r\n          if (currentCashInDb < balance) {\r\n            throw new Error(\"   .\");\r\n          }\r\n          transaction.update(userRef, { cash: increment(-balance) });\r\n          transaction.update(teacherRef, { cash: increment(balance) });\r\n          console.log(`  :  -${balance},  +${balance}`);\r\n        } else {\r\n          // /  :    (,  )\r\n          if (teacherCashInDb < balance) {\r\n            throw new Error(`()   . (: ${formatCurrency(balance)})`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(balance) });\r\n          transaction.update(teacherRef, { cash: increment(-balance) });\r\n          console.log(` :  +${balance},  -${balance}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        console.log(\"   \");\r\n        console.log(\"  \");\r\n      });\r\n\r\n      console.log(\" \");\r\n\r\n      const successMsg = isLoan\r\n        ? `  : ${formatCurrency(balance)} (  )`\r\n        : `  :  ${formatCurrency(balance)}  (  )`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      //     (  /  )\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_WITHDRAW;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `  : ${name} (${formatCurrency(balance)}) -  `\r\n          : ` : ${name} ( ${formatCurrency(balance)}) -  `,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          isEarlyCancellation: true,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      //  userDoc \r\n      if (refreshUserDocument) {\r\n        console.log(\"userDoc  \");\r\n        refreshUserDocument();\r\n      }\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      console.error(\"     :\", error);\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n\r\n      // ---    ---\r\n      setUserDeposits(originalProducts.deposit);\r\n      setUserSavings(originalProducts.savings);\r\n      setUserLoans(originalProducts.loan);\r\n      setCurrentCash(originalCash);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n      console.log(\"--- handleCancelEarly  ---\");\r\n    }\r\n  };\r\n\r\n  const handleParkingDeposit = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev + amount);\r\n\r\n    try {\r\n      //     (AuthContext deductCash )\r\n      const cashDeducted = await deductCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashDeducted) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n\r\n        if (parkingSnapshot.exists()) {\r\n          transaction.update(parkingRef, { balance: increment(amount) });\r\n        } else {\r\n          transaction.set(parkingRef, { balance: amount, lastInterestDate: serverTimestamp() });\r\n        }\r\n      });\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_DEPOSIT,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: -amount,\r\n        metadata: { parkingBalance: parkingBalance + amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleParkingWithdraw = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"  .\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev - amount);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n        const currentParkingBalance = parkingSnapshot.data()?.balance ?? 0;\r\n\r\n        if (currentParkingBalance < amount) throw new Error(\"  .\");\r\n\r\n        transaction.update(parkingRef, { balance: increment(-amount) });\r\n      });\r\n\r\n      //    (AuthContext addCash )\r\n      const cashAdded = await addCash(amount, ` : ${formatCurrency(amount)}`);\r\n      if (!cashAdded) {\r\n        throw new Error(\"   .\");\r\n      }\r\n\r\n      displayMessage(`${formatCurrency(amount)}  .`, \"success\");\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.PARKING_WITHDRAW,\r\n        description: `  ${formatCurrency(amount)}`,\r\n        amount: amount,\r\n        metadata: { parkingBalance: parkingBalance - amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(` : ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteSubscribedProduct = async (product) => {\r\n    if (!isAdmin()) {\r\n      displayMessage(\"  .\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`  (${product.name})  ?     .`)) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", product.id);\r\n      await deleteDoc(productRef);\r\n      displayMessage(\"  .\", \"success\");\r\n      loadAllData();\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      displayMessage(`  : ${error.message}`, \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div style={styles.container}>   ...</div>;\r\n  if (!user) return <div style={styles.container}> .</div>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/*   */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '10px',\r\n        marginBottom: '24px',\r\n        borderBottom: '2px solid rgba(255, 255, 255, 0.1)',\r\n        paddingBottom: '0',\r\n        position: 'relative'\r\n      }}>\r\n        <button\r\n          onClick={() => onViewChange && onViewChange('parking')}\r\n          style={{\r\n            padding: '12px 24px',\r\n            border: 'none',\r\n            background: activeView === 'parking' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '17px',\r\n            fontWeight: activeView === 'parking' ? '700' : '500',\r\n            color: activeView === 'parking' ? '#00fff2' : '#94a3b8',\r\n            borderBottom: `3px solid ${activeView === 'parking' ? '#00fff2' : 'transparent'}`,\r\n            marginBottom: '-2px',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n        >\r\n            \r\n        </button>\r\n        {isAdmin && isAdmin() && (\r\n          <>\r\n            <button\r\n              onClick={() => onViewChange && onViewChange('admin')}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'admin' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'admin' ? '700' : '500',\r\n                color: activeView === 'admin' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'admin' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n               \r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (onViewChange) onViewChange('userProducts');\r\n                if (onLoadUserProducts) onLoadUserProducts();\r\n              }}\r\n              style={{\r\n                padding: '12px 24px',\r\n                border: 'none',\r\n                background: activeView === 'userProducts' ? 'rgba(0, 255, 242, 0.1)' : 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '17px',\r\n                fontWeight: activeView === 'userProducts' ? '700' : '500',\r\n                color: activeView === 'userProducts' ? '#00fff2' : '#94a3b8',\r\n                borderBottom: `3px solid ${activeView === 'userProducts' ? '#00fff2' : 'transparent'}`,\r\n                marginBottom: '-2px',\r\n                borderRadius: '8px 8px 0 0',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n            >\r\n                \r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {message && <div style={styles.message(messageType)}>{message}</div>}\r\n\r\n      {/*     */}\r\n      {activeView === 'userProducts' && isAdmin && isAdmin() && (\r\n        <div style={{\r\n          backgroundColor: 'rgba(20, 20, 35, 0.6)',\r\n          borderRadius: '16px',\r\n          padding: '32px',\r\n          boxShadow: '0 6px 20px rgba(0, 0, 0, 0.3)',\r\n          border: '1px solid rgba(255, 255, 255, 0.05)'\r\n        }}>\r\n          <h2 style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '16px', color: '#fff' }}>\r\n                 \r\n          </h2>\r\n          <p style={{ fontSize: '14px', color: '#94a3b8', marginBottom: '20px' }}>\r\n                       .\r\n          </p>\r\n\r\n          {allUserProducts.length === 0 ? (\r\n            <p style={{ textAlign: 'center', padding: '40px', color: '#94a3b8' }}>\r\n                .\r\n            </p>\r\n          ) : (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                  <tr style={{ backgroundColor: 'rgba(255, 255, 255, 0.05)', borderBottom: '2px solid rgba(255, 255, 255, 0.1)' }}>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>/</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}>()</th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                    <th style={{ padding: '12px', textAlign: 'left', fontSize: '14px', fontWeight: '600', color: '#94a3b8' }}></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allUserProducts.map((product, index) => {\r\n                    const typeLabel = product.type === 'deposit' ? '' :\r\n                      product.type === 'savings' ? '' :\r\n                        product.type === 'loan' ? '' : '';\r\n                    return (\r\n                      <tr key={`${product.userId}-${product.id}-${index}`} style={{ borderBottom: '1px solid rgba(255, 255, 255, 0.05)' }}>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.userName}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.name}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{typeLabel}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#00fff2' }}>{formatKoreanCurrency(product.balance || 0)}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.rate}%</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>{product.termInDays}</td>\r\n                        <td style={{ padding: '12px', fontSize: '14px', color: '#e2e8f0' }}>\r\n                          {product.maturityDate\r\n                            ? new Date(product.maturityDate).toLocaleDateString('ko-KR')\r\n                            : '-'}\r\n                        </td>\r\n                        <td style={{ padding: '12px' }}>\r\n                          <button\r\n                            onClick={() => onDeleteUserProduct && onDeleteUserProduct(product)}\r\n                            style={{\r\n                              ...styles.button(false, 'danger'),\r\n                              fontSize: '12px',\r\n                              padding: '6px 12px'\r\n                            }}\r\n                          >\r\n                            \r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <div style={{ marginTop: '20px', textAlign: 'right', color: '#94a3b8', fontSize: '14px' }}>\r\n                 {allUserProducts.length} \r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {activeView === 'parking' && (\r\n        <div style={styles.grid}>\r\n          <ParkingAccountSection\r\n            balance={parkingBalance}\r\n            dailyInterest={parkingDailyInterest}\r\n            onDeposit={handleParkingDeposit}\r\n            onWithdraw={handleParkingWithdraw}\r\n            isProcessing={isProcessing}\r\n            userCash={currentCash}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.deposits}\r\n            subscribedProducts={userDeposits}\r\n            availableProducts={depositProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'deposits')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.savings}\r\n            subscribedProducts={userSavings}\r\n            availableProducts={installmentProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'savings')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"\"\r\n            icon={ICON_MAP.loans}\r\n            subscribedProducts={userLoans}\r\n            availableProducts={loanProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'loans')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n        </div>\r\n      )}\r\n      <SubscriptionModal\r\n        isOpen={modal.isOpen}\r\n        onClose={handleCloseModal}\r\n        product={modal.product}\r\n        onConfirm={handleSubscribe}\r\n        isProcessing={isProcessing}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParkingAccount;\r\n","// src/Banking.js - Tailwind UI \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ParkingAccount from \"./ParkingAccount\";\r\nimport { getBankingProducts, updateBankingProducts, db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs, collectionGroup, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../numberFormatter';\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Landmark, ChevronLeft, Save, Plus, Trash2 } from \"lucide-react\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\nconst convertAdminProductsToAccountFormat = (adminProducts) => {\r\n  if (!Array.isArray(adminProducts)) {\r\n    console.error(\r\n      \"convertAdminProductsToAccountFormat:   .\",\r\n      adminProducts\r\n    );\r\n    return [];\r\n  }\r\n  return adminProducts.map((product) => ({\r\n    id: product.id,\r\n    name: product.name,\r\n    dailyRate:\r\n      product.dailyRate !== undefined && !isNaN(product.dailyRate) ? parseFloat(product.dailyRate) : 0,\r\n    termInDays:\r\n      product.termInDays !== undefined && !isNaN(product.termInDays) ? parseInt(product.termInDays) : 1,\r\n    minAmount:\r\n      product.minAmount !== undefined && !isNaN(product.minAmount) ? parseInt(product.minAmount) : 0,\r\n    maxAmount:\r\n      product.maxAmount !== undefined && !isNaN(product.maxAmount) ? parseInt(product.maxAmount) : 0,\r\n  }));\r\n};\r\n\r\nimport \"./Banking.css\";\r\n\r\nconst Banking = () => {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [activeView, setActiveView] = useState(\"parking\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [parkingDepositProducts, setParkingDepositProducts] = useState([]);\r\n  const [parkingInstallmentProducts, setParkingInstallmentProducts] = useState(\r\n    []\r\n  );\r\n  const [parkingLoanProducts, setParkingLoanProducts] = useState([]);\r\n\r\n  //    \r\n  const [allUserProducts, setAllUserProducts] = useState([]);\r\n\r\n  //     \r\n  const loadAllUserProducts = async () => {\r\n    if (!auth?.userDoc?.classCode || !(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      //      \r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", auth.userDoc.classCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      const userMap = {};\r\n      usersSnapshot.forEach((doc) => {\r\n        userMap[doc.id] = {\r\n          id: doc.id,\r\n          name: doc.data().name || doc.data().nickname || \"  \",\r\n          ...doc.data()\r\n        };\r\n      });\r\n\r\n      //  []     -   N+1  \r\n      const allProducts = [];\r\n      const userIds = Object.keys(userMap);\r\n\r\n      //   products   (  Promise.all )\r\n      const productPromises = userIds.map(async (userId) => {\r\n        const productsQuery = collection(db, \"users\", userId, \"products\");\r\n        const productsSnapshot = await getDocs(productsQuery);\r\n\r\n        return productsSnapshot.docs.map((productDoc) => {\r\n          const productData = productDoc.data();\r\n          return {\r\n            firestoreId: productDoc.id, //  Firestore  ID\r\n            userId: userId,\r\n            userName: userMap[userId].name,\r\n            ...productData,\r\n            maturityDate: productData.maturityDate?.toDate ? productData.maturityDate.toDate() : productData.maturityDate\r\n          };\r\n        });\r\n      });\r\n\r\n      //  Promise   \r\n      const productsArrays = await Promise.all(productPromises);\r\n\r\n      // 2D  1D  \r\n      productsArrays.forEach(productsArray => {\r\n        allProducts.push(...productsArray);\r\n      });\r\n\r\n      setAllUserProducts(allProducts);\r\n      console.log(\"   :\", allProducts);\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     \r\n  const handleAdminDeleteUserProduct = async (product) => {\r\n    console.log(\" :\", product);\r\n\r\n    if (!(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      console.log(\"  \");\r\n      alert(\"  .\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${product.userName}' '${product.name}'   ?\\n    .`)) {\r\n      console.log(\"  \");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // firestoreId  ( Firestore  ID)\r\n      const productId = product.firestoreId || String(product.id);\r\n      console.log(\" :\", `users/${product.userId}/products/${productId}`);\r\n      console.log(\"  ID:\", productId);\r\n\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", productId);\r\n      console.log(\" ...\");\r\n      await deleteDoc(productRef);\r\n      console.log(\" \");\r\n\r\n      setMessage(\" .\");\r\n      setMessageType(\"success\");\r\n\r\n      //  \r\n      console.log(\"  ...\");\r\n      await loadAllUserProducts();\r\n      console.log(\"  \");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"   :\", error);\r\n      setMessage(`   : ${error.message}`);\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const [formattedDepositProducts, setFormattedDepositProducts] = useState([]);\r\n  const [formattedInstallmentProducts, setFormattedInstallmentProducts] =\r\n    useState([]);\r\n  const [formattedLoanProducts, setFormattedLoanProducts] = useState([]);\r\n\r\n  // Firestore  \r\n  const loadAllData = async () => {\r\n    const classCode = auth?.userDoc?.classCode;\r\n    if (!classCode || classCode === '') {\r\n      console.warn(\"[Banking]        .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const bankingData = await getBankingProducts(classCode, true, 'Banking');\r\n\r\n      // deposits savings  ( )\r\n      if (bankingData.deposits) {\r\n        setParkingDepositProducts(bankingData.deposits);\r\n      } else {\r\n        setParkingDepositProducts([]);\r\n      }\r\n\r\n      // savings installments  ( )\r\n      if (bankingData.savings) {\r\n        setParkingInstallmentProducts(bankingData.savings);\r\n      } else {\r\n        setParkingInstallmentProducts([]);\r\n      }\r\n\r\n      // loans   ( )\r\n      if (bankingData.loans) {\r\n        setParkingLoanProducts(bankingData.loans);\r\n      } else {\r\n        setParkingLoanProducts([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"    :\", error);\r\n      setMessage(\"    .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth && !auth.loading && auth.user && auth.userDoc?.classCode) {\r\n      loadAllData();\r\n    } else if (auth && !auth.loading && !auth.user) {\r\n      setParkingSavingsProducts([]);\r\n      setParkingInstallmentProducts([]);\r\n      setParkingLoanProducts([]);\r\n    }\r\n  }, [auth?.user, auth?.loading, auth?.userDoc?.classCode]);\r\n\r\n  useEffect(() => {\r\n    setFormattedDepositProducts(\r\n      convertAdminProductsToAccountFormat(parkingDepositProducts)\r\n    );\r\n    setFormattedInstallmentProducts(\r\n      convertAdminProductsToAccountFormat(parkingInstallmentProducts)\r\n    );\r\n    setFormattedLoanProducts(\r\n      convertAdminProductsToAccountFormat(parkingLoanProducts)\r\n    );\r\n  }, [parkingDepositProducts, parkingInstallmentProducts, parkingLoanProducts]);\r\n\r\n  const handleParkingProductChange = (type, index, field, value) => {\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.map((product, i) => {\r\n      if (i === index) {\r\n        const updatedProduct = { ...product };\r\n        if (\r\n          field === \"termInDays\" ||\r\n          field === \"minAmount\" ||\r\n          field === \"maxAmount\"\r\n        ) {\r\n          const numValue = parseInt(value);\r\n          updatedProduct[field] =\r\n            isNaN(numValue) || numValue < (field === \"termInDays\" ? 1 : 0)\r\n              ? field === \"termInDays\"\r\n                ? 1\r\n                : 0\r\n              : numValue;\r\n        } else if (field === \"dailyRate\") {\r\n          const dailyRateValue = parseFloat(value);\r\n          updatedProduct.dailyRate =\r\n            isNaN(dailyRateValue) || dailyRateValue < 0 ? 0 : dailyRateValue;\r\n        } else if (field === \"name\") {\r\n          updatedProduct[field] = value;\r\n        }\r\n        return updatedProduct;\r\n      }\r\n      return product;\r\n    });\r\n    setProductsState(updatedProducts);\r\n  };\r\n\r\n  const saveParkingProducts = async (type) => {\r\n    if (!auth?.userDoc?.classCode) {\r\n      setMessage(\"     .\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      let products, firestoreType;\r\n\r\n      switch (type) {\r\n        case \"deposits\":\r\n          products = parkingDepositProducts;\r\n          firestoreType = \"deposits\"; // Firebase deposits \r\n          break;\r\n        case \"installments\":\r\n          products = parkingInstallmentProducts;\r\n          firestoreType = \"savings\"; // Firebase savings \r\n          break;\r\n        case \"loans\":\r\n          products = parkingLoanProducts;\r\n          firestoreType = \"loans\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      await updateBankingProducts(\r\n        auth.userDoc.classCode,\r\n        firestoreType,\r\n        products\r\n      );\r\n\r\n      setMessage(\r\n        `${type === \"deposits\"\r\n          ? \"\"\r\n          : type === \"installments\"\r\n            ? \"\"\r\n            : \"\"\r\n        }   .`\r\n      );\r\n      setMessageType(\"success\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(`${type}    :`, error);\r\n      setMessage(\"   .\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addParkingProduct = (type) => {\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: ` ${type === \"deposits\"\r\n        ? \"\"\r\n        : type === \"installments\"\r\n          ? \"\"\r\n          : \"\"\r\n        } `,\r\n      dailyRate: 0.01,\r\n      termInDays: 365,\r\n      minAmount: type === \"loans\" ? 0 : 100000,\r\n      maxAmount: type === \"loans\" ? 1000000 : 0,\r\n    };\r\n\r\n    switch (type) {\r\n      case \"deposits\":\r\n        setParkingDepositProducts([...parkingDepositProducts, newProduct]);\r\n        break;\r\n      case \"installments\":\r\n        setParkingInstallmentProducts([\r\n          ...parkingInstallmentProducts,\r\n          newProduct,\r\n        ]);\r\n        break;\r\n      case \"loans\":\r\n        setParkingLoanProducts([...parkingLoanProducts, newProduct]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const deleteParkingProduct = async (type, indexToDelete) => {\r\n    if (isLoading) return; //   \r\n\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.filter(\r\n      (_, index) => index !== indexToDelete\r\n    );\r\n    setProductsState(updatedProducts);\r\n\r\n    //    \r\n    if (auth?.userDoc?.classCode) {\r\n      setIsLoading(true);\r\n      try {\r\n        const firestoreType =\r\n          type === \"deposits\"\r\n            ? \"deposits\"\r\n            : type === \"installments\"\r\n              ? \"savings\"\r\n              : \"loans\";\r\n        await updateBankingProducts(\r\n          auth.userDoc.classCode,\r\n          firestoreType,\r\n          updatedProducts\r\n        );\r\n        setMessage(\" .\");\r\n        setMessageType(\"info\");\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(\"\");\r\n        }, 2000);\r\n      } catch (error) {\r\n        console.error(\"   :\", error);\r\n        setMessage(\"   .\");\r\n        setMessageType(\"error\");\r\n        //         ()\r\n        setProductsState(productsState);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (auth.loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/*   */}\r\n      {isLoading && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <AlchanLoading />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"px-4 py-6 sm:px-6\">\r\n        {/*   */}\r\n        <PageHeader\r\n          title=\"  \"\r\n          subtitle=\", ,   \"\r\n          icon={Landmark}\r\n          backButton={\r\n            <ActionButton\r\n              variant=\"ghost\"\r\n              icon={ChevronLeft}\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              \r\n            </ActionButton>\r\n          }\r\n        />\r\n\r\n        {/*   */}\r\n        {message && (\r\n          <div className={`mb-4 p-4 rounded-xl ${messageType === 'error'\r\n            ? 'bg-red-900/40 text-red-200 border border-red-800/50'\r\n            : messageType === 'success'\r\n              ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-800/50'\r\n              : 'bg-blue-900/40 text-blue-200 border border-blue-800/50'\r\n            }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className={activeView === \"admin\" ? \"content-box\" : \"\"}>\r\n          {(activeView === \"parking\" || activeView === \"userProducts\") && (\r\n            <ParkingAccount\r\n              auth={auth}\r\n              depositProducts={formattedDepositProducts}\r\n              installmentProducts={formattedInstallmentProducts}\r\n              loanProducts={formattedLoanProducts}\r\n              activeView={activeView}\r\n              onViewChange={setActiveView}\r\n              onLoadUserProducts={loadAllUserProducts}\r\n              allUserProducts={allUserProducts}\r\n              onDeleteUserProduct={handleAdminDeleteUserProduct}\r\n              isLoading={isLoading}\r\n            />\r\n          )}\r\n          {activeView === \"admin\" &&\r\n            auth.user &&\r\n            (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\") && (\r\n              <div>\r\n                <h2 className=\"admin-header\">\r\n                   -    (  )\r\n                </h2>\r\n                {/* Savings Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingDepositProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.01\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"deposits\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"deposits\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"deposits\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Installment Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingInstallmentProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.011\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"installments\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"installments\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"installments\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Loan Products */}\r\n                <div className=\"admin-section\" style={{ borderBottom: \"none\" }}>\r\n                  <h3>  </h3>\r\n                  <p className=\"admin-info-text\">\r\n                     (%) () .   '' \r\n                    .\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          \r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          ()\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           (%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                           ()\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          \r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingLoanProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\": 0.05\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.maxAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"maxAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"loans\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              \r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"loans\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      \r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"loans\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                        \r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {activeView === \"admin\" &&\r\n            !(\r\n              auth.user &&\r\n              (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")\r\n            ) && (\r\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800\">\r\n                  .\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default Banking;","// src/components/AvatarEditor.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"./Avatar\";\r\nimport {\r\n  getAvatarConfig,\r\n  saveAvatarConfig,\r\n  getAvatarOptions,\r\n  isHairstyleCompatible,\r\n  AVATAR_CATEGORIES,\r\n  DEFAULT_AVATAR,\r\n} from \"../utils/avatarSystem\";\r\n\r\n/**\r\n *    \r\n */\r\nexport default function AvatarEditor({ isOpen, onClose, userId, onSave }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"skinTone\");\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      const savedConfig = getAvatarConfig(userId);\r\n      setConfig(savedConfig);\r\n      setHasChanges(false);\r\n    }\r\n  }, [isOpen, userId]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const currentOptions = getAvatarOptions(selectedCategory);\r\n\r\n  const handleOptionSelect = (optionId) => {\r\n    const newConfig = { ...config, [selectedCategory]: optionId };\r\n\r\n    //   \r\n    if (selectedCategory === \"faceShape\") {\r\n      if (!isHairstyleCompatible(config.hairstyle, optionId)) {\r\n        //     \r\n        newConfig.hairstyle = \"short\";\r\n      }\r\n    }\r\n\r\n    setConfig(newConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    saveAvatarConfig(userId, config);\r\n    setHasChanges(false);\r\n    if (onSave) onSave(config);\r\n    onClose();\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setConfig({ ...DEFAULT_AVATAR });\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleRandomize = () => {\r\n    const randomConfig = {};\r\n    AVATAR_CATEGORIES.forEach(cat => {\r\n      const options = getAvatarOptions(cat.id);\r\n      if (options.length > 0) {\r\n        const randomIndex = Math.floor(Math.random() * options.length);\r\n        randomConfig[cat.id] = options[randomIndex].id;\r\n      }\r\n    });\r\n    setConfig(randomConfig);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  //    \r\n  const getCurrentValue = () => config[selectedCategory];\r\n\r\n  //  \r\n  const renderOptionItem = (option) => {\r\n    const isSelected = getCurrentValue() === option.id;\r\n\r\n    //   \r\n    const isIncompatible = selectedCategory === \"hairstyle\" &&\r\n      !isHairstyleCompatible(option.id, config.faceShape);\r\n\r\n    return (\r\n      <button\r\n        key={option.id}\r\n        onClick={() => !isIncompatible && handleOptionSelect(option.id)}\r\n        disabled={isIncompatible}\r\n        style={{\r\n          padding: \"12px\",\r\n          borderRadius: \"12px\",\r\n          border: isSelected ? \"3px solid #a78bfa\" : \"2px solid #374151\",\r\n          background: isSelected\r\n            ? \"linear-gradient(135deg, #a78bfa20 0%, #8b5cf620 100%)\"\r\n            : \"#1f2937\",\r\n          cursor: isIncompatible ? \"not-allowed\" : \"pointer\",\r\n          opacity: isIncompatible ? 0.4 : 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          gap: \"6px\",\r\n          minWidth: \"70px\",\r\n          transition: \"all 0.2s\",\r\n        }}\r\n      >\r\n        {/*   */}\r\n        {option.color && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: option.color,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n              boxShadow: isSelected ? `0 0 10px ${option.color}` : \"none\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*   */}\r\n        {option.gradient && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              borderRadius: \"50%\",\r\n              background: `linear-gradient(135deg, ${option.gradient.join(\", \")})`,\r\n              border: \"2px solid rgba(255,255,255,0.3)\",\r\n            }}\r\n          />\r\n        )}\r\n        {/*  - SVG  */}\r\n        {selectedCategory === \"faceShape\" && option.path && (\r\n          <div style={{ width: \"36px\", height: \"36px\" }}>\r\n            <svg viewBox=\"0 0 100 100\" width=\"36\" height=\"36\">\r\n              <path\r\n                d={option.path}\r\n                fill=\"#F5DEB3\"\r\n                stroke={isSelected ? \"#a78bfa\" : \"#666\"}\r\n                strokeWidth=\"2\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n        {/*    */}\r\n        {option.icon && selectedCategory !== \"faceShape\" && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"24px\",\r\n            }}\r\n          >\r\n            {option.icon}\r\n          </div>\r\n        )}\r\n        {/*  ( ) - , , path, icon    */}\r\n        {!option.color && !option.gradient && !option.path && !option.icon && (\r\n          <div\r\n            style={{\r\n              width: \"30px\",\r\n              height: \"30px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"20px\",\r\n              color: \"#e8e8ff\",\r\n            }}\r\n          >\r\n            {option.id === \"none\" ? \"\" : \"\"}\r\n          </div>\r\n        )}\r\n        <span\r\n          style={{\r\n            fontSize: \"11px\",\r\n            color: isSelected ? \"#a78bfa\" : \"#9ca3af\",\r\n            fontWeight: isSelected ? \"600\" : \"400\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          {option.name}\r\n        </span>\r\n        {isIncompatible && (\r\n          <span style={{ fontSize: \"9px\", color: \"#ef4444\" }}>\r\n            \r\n          </span>\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: \"rgba(0, 0, 0, 0.85)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 2000,\r\n        padding: \"10px\",\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"20px\",\r\n          maxWidth: \"600px\",\r\n          width: \"100%\",\r\n          maxHeight: \"90vh\",\r\n          overflowY: \"auto\",\r\n          border: \"2px solid #a78bfa40\",\r\n          boxShadow: \"0 20px 60px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          <h2\r\n            style={{\r\n              margin: 0,\r\n              fontSize: \"20px\",\r\n              fontWeight: \"700\",\r\n              color: \"#e8e8ff\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"10px\",\r\n            }}\r\n          >\r\n            <span style={{ fontSize: \"24px\" }}></span>\r\n             \r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: \"transparent\",\r\n              border: \"none\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"24px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/*  */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginBottom: \"16px\",\r\n            padding: \"16px\",\r\n            background: \"linear-gradient(135deg, #11182750 0%, #1f293750 100%)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid #374151\",\r\n          }}\r\n        >\r\n          <div style={{ position: \"relative\" }}>\r\n            <Avatar key={JSON.stringify(config)} config={config} size={150} />\r\n            {/*   */}\r\n            <button\r\n              onClick={handleRandomize}\r\n              style={{\r\n                position: \"absolute\",\r\n                bottom: \"-10px\",\r\n                right: \"-10px\",\r\n                width: \"40px\",\r\n                height: \"40px\",\r\n                borderRadius: \"50%\",\r\n                background: \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\",\r\n                border: \"none\",\r\n                fontSize: \"20px\",\r\n                cursor: \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                boxShadow: \"0 4px 12px rgba(245, 158, 11, 0.4)\",\r\n              }}\r\n              title=\" \"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"6px\",\r\n            overflowX: \"auto\",\r\n            overflowY: \"hidden\",\r\n            paddingBottom: \"12px\",\r\n            marginBottom: \"12px\",\r\n            WebkitOverflowScrolling: \"touch\",\r\n            scrollbarWidth: \"thin\",\r\n            msOverflowStyle: \"auto\",\r\n          }}\r\n        >\r\n          {AVATAR_CATEGORIES.map((cat) => (\r\n            <button\r\n              key={cat.id}\r\n              onClick={() => setSelectedCategory(cat.id)}\r\n              style={{\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"10px\",\r\n                border: selectedCategory === cat.id ? \"2px solid #a78bfa\" : \"2px solid transparent\",\r\n                background:\r\n                  selectedCategory === cat.id\r\n                    ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                    : \"#374151\",\r\n                color: selectedCategory === cat.id ? \"#fff\" : \"#9ca3af\",\r\n                fontSize: \"12px\",\r\n                fontWeight: \"600\",\r\n                cursor: \"pointer\",\r\n                whiteSpace: \"nowrap\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"6px\",\r\n                transition: \"all 0.2s\",\r\n                minWidth: \"fit-content\",\r\n              }}\r\n            >\r\n              {/*    */}\r\n              <span\r\n                style={{\r\n                  width: \"14px\",\r\n                  height: \"14px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: cat.icon,\r\n                  border: \"2px solid rgba(255,255,255,0.3)\",\r\n                  flexShrink: 0,\r\n                }}\r\n              />\r\n              <span>{cat.name}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fill, minmax(70px, 1fr))\",\r\n            gap: \"8px\",\r\n            maxHeight: \"200px\",\r\n            overflowY: \"auto\",\r\n            padding: \"8px\",\r\n            background: \"#11182750\",\r\n            borderRadius: \"12px\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          {currentOptions.map(renderOptionItem)}\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"10px\",\r\n            justifyContent: \"flex-end\",\r\n          }}\r\n        >\r\n          <button\r\n            onClick={handleReset}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              borderRadius: \"10px\",\r\n              border: \"1px solid #374151\",\r\n              background: \"transparent\",\r\n              color: \"#9ca3af\",\r\n              fontSize: \"14px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!hasChanges}\r\n            style={{\r\n              padding: \"10px 24px\",\r\n              borderRadius: \"10px\",\r\n              border: \"none\",\r\n              background: hasChanges\r\n                ? \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\"\r\n                : \"#374151\",\r\n              color: hasChanges ? \"#fff\" : \"#6b7280\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"600\",\r\n              cursor: hasChanges ? \"pointer\" : \"not-allowed\",\r\n              boxShadow: hasChanges ? \"0 4px 15px rgba(139, 92, 246, 0.4)\" : \"none\",\r\n            }}\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n *    \r\n */\r\nexport function AvatarProfileCard({ userId, userName, netAssets, onEditClick }) {\r\n  const [config, setConfig] = useState(DEFAULT_AVATAR);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setConfig(getAvatarConfig(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n        borderRadius: \"20px\",\r\n        padding: \"20px\",\r\n        border: \"2px solid #a78bfa40\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        gap: \"16px\",\r\n      }}\r\n    >\r\n      {/*  */}\r\n      <div style={{ position: \"relative\" }}>\r\n        <Avatar config={config} size={100} />\r\n        <button\r\n          onClick={onEditClick}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: \"-5px\",\r\n            right: \"-5px\",\r\n            width: \"32px\",\r\n            height: \"32px\",\r\n            borderRadius: \"50%\",\r\n            background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n            border: \"2px solid #1a1a2e\",\r\n            fontSize: \"14px\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n          title=\" \"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      {/*  */}\r\n      <div style={{ flex: 1 }}>\r\n        <div\r\n          style={{\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            color: \"#e8e8ff\",\r\n            marginBottom: \"8px\",\r\n          }}\r\n        >\r\n          {userName}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontSize: \"13px\",\r\n            color: \"#9ca3af\",\r\n          }}\r\n        >\r\n          : {Number(netAssets || 0).toLocaleString()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/MyProfile.js -   \r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"./contexts/AuthContext\";\r\nimport { verifyClassCode, db } from \"./firebase\";\r\nimport { doc, updateDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { updatePassword, EmailAuthProvider, reauthenticateWithCredential, deleteUser } from \"firebase/auth\";\r\nimport Avatar from \"./components/Avatar\";\r\nimport AvatarEditor from \"./components/AvatarEditor\";\r\nimport { getAvatarConfig } from \"./utils/avatarSystem\";\r\nimport { getLevelInfo, LEVEL_THRESHOLDS } from \"./utils/levelSystem\";\r\nimport { getUserAchievements, getAchievementById } from \"./utils/achievementSystem\";\r\nimport { StreakDisplay, StreakRewardInfo } from \"./components/DailyReward\";\r\nimport { formatKoreanCurrency } from \"./numberFormatter\";\r\nimport { User, Key, Building2, Trash2, LogOut, Settings, ChevronRight } from \"lucide-react\";\r\n\r\nexport default function MyProfile() {\r\n  const { user, userDoc, logout } = useAuth();\r\n  const userId = user?.uid;\r\n  const userName = userDoc?.name || userDoc?.nickname || user?.displayName || \"\";\r\n\r\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\r\n  const [avatarConfig, setAvatarConfig] = useState(null);\r\n  const [achievements, setAchievements] = useState([]);\r\n\r\n  //    \r\n  const [showNicknameModal, setShowNicknameModal] = useState(false);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [showClassCodeModal, setShowClassCodeModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n\r\n  //  \r\n  const [newNickname, setNewNickname] = useState(\"\");\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [newClassCode, setNewClassCode] = useState(\"\");\r\n  const [deleteConfirmText, setDeleteConfirmText] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  //  \r\n  const cash = Number(userDoc?.cash) || 0;\r\n  const stockValue = Number(userDoc?.stockValue) || 0;\r\n  const realEstateValue = Number(userDoc?.realEstateValue) || 0;\r\n  const itemValue = Number(userDoc?.itemValue) || 0;\r\n  const netAssets = cash + stockValue + realEstateValue + itemValue;\r\n\r\n  //  \r\n  const levelInfo = getLevelInfo(netAssets);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setAvatarConfig(getAvatarConfig(userId));\r\n      setAchievements(getUserAchievements(userId));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleAvatarSave = (newConfig) => {\r\n    setAvatarConfig(newConfig);\r\n  };\r\n\r\n  //  \r\n  const resetModals = () => {\r\n    setNewNickname(\"\");\r\n    setCurrentPassword(\"\");\r\n    setNewPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n    setNewClassCode(\"\");\r\n    setDeleteConfirmText(\"\");\r\n    setError(\"\");\r\n    setIsLoading(false);\r\n  };\r\n\r\n  //  \r\n  const handleChangeNickname = async () => {\r\n    if (!newNickname.trim()) {\r\n      setError(\" .\");\r\n      return;\r\n    }\r\n    if (newNickname.length < 2 || newNickname.length > 10) {\r\n      setError(\" 2~10  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { nickname: newNickname.trim() });\r\n      alert(\" .\");\r\n      setShowNicknameModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"  .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleChangePassword = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      setError(\"  6  .\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      setError(\"   .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n      await reauthenticateWithCredential(user, credential);\r\n      await updatePassword(user, newPassword);\r\n      alert(\" .\");\r\n      setShowPasswordModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      if (err.code === \"auth/wrong-password\") {\r\n        setError(\"   .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //   \r\n  const handleChangeClassCode = async () => {\r\n    if (!newClassCode.trim()) {\r\n      setError(\"  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const isValid = await verifyClassCode(newClassCode.trim());\r\n      if (!isValid) {\r\n        setError(\"   .\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", userId);\r\n      await updateDoc(userRef, { classCode: newClassCode.trim() });\r\n      alert(\"  .\");\r\n      setShowClassCodeModal(false);\r\n      resetModals();\r\n    } catch (err) {\r\n      setError(\"   .\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //  \r\n  const handleDeleteAccount = async () => {\r\n    if (deleteConfirmText !== \"\") {\r\n      setError(\"''  .\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Firestore   \r\n      const userRef = doc(db, \"users\", userId);\r\n      await deleteDoc(userRef);\r\n\r\n      // Firebase Auth  \r\n      await deleteUser(user);\r\n\r\n      alert(\" .\");\r\n    } catch (err) {\r\n      if (err.code === \"auth/requires-recent-login\") {\r\n        setError(\"     .\");\r\n      } else {\r\n        setError(\"  .\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  //     (legendary > epic > rare > common)\r\n  const rarityOrder = { legendary: 0, epic: 1, rare: 2, common: 3 };\r\n  const sortedAchievements = [...achievements].sort((a, b) => {\r\n    const achA = getAchievementById(a.id);\r\n    const achB = getAchievementById(b.id);\r\n    return (rarityOrder[achA?.rarity] || 99) - (rarityOrder[achB?.rarity] || 99);\r\n  });\r\n\r\n  //   (  )\r\n  const bestAchievement = sortedAchievements.length > 0\r\n    ? getAchievementById(sortedAchievements[0].id)\r\n    : null;\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <p className=\"text-gray-400\"> .</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full\" style={{ backgroundColor: \"#0a0a12\" }}>\r\n      <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\r\n        {/*   */}\r\n        <h1 style={{\r\n          fontSize: \"28px\",\r\n          fontWeight: \"800\",\r\n          background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n          WebkitBackgroundClip: \"text\",\r\n          WebkitTextFillColor: \"transparent\",\r\n          marginBottom: \"24px\",\r\n        }}>\r\n           \r\n        </h1>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)\",\r\n          borderRadius: \"24px\",\r\n          padding: \"32px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n          boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.4)\",\r\n        }}>\r\n          <div style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            gap: \"24px\",\r\n          }}>\r\n            {/*  */}\r\n            <div style={{ position: \"relative\" }}>\r\n              <Avatar config={avatarConfig} size={180} />\r\n              <button\r\n                onClick={() => setShowAvatarEditor(true)}\r\n                style={{\r\n                  position: \"absolute\",\r\n                  bottom: \"5px\",\r\n                  right: \"5px\",\r\n                  width: \"44px\",\r\n                  height: \"44px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"3px solid #1a1a2e\",\r\n                  fontSize: \"18px\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 15px rgba(167, 139, 250, 0.4)\",\r\n                }}\r\n                title=\" \"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <h2 style={{\r\n                fontSize: \"24px\",\r\n                fontWeight: \"700\",\r\n                color: \"#e8e8ff\",\r\n                marginBottom: \"8px\",\r\n              }}>\r\n                {userName}\r\n              </h2>\r\n\r\n              {/*   */}\r\n              <div style={{\r\n                display: \"inline-flex\",\r\n                alignItems: \"center\",\r\n                gap: \"8px\",\r\n                padding: \"8px 16px\",\r\n                background: `linear-gradient(135deg, ${levelInfo.color}20 0%, ${levelInfo.color}10 100%)`,\r\n                border: `2px solid ${levelInfo.color}`,\r\n                borderRadius: \"20px\",\r\n                marginBottom: \"12px\",\r\n              }}>\r\n                <span style={{ fontSize: \"20px\" }}>{levelInfo.icon}</span>\r\n                <span style={{ color: levelInfo.color, fontWeight: \"700\", fontSize: \"14px\" }}>\r\n                  Lv.{levelInfo.level} {levelInfo.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/*   */}\r\n              {bestAchievement && (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"8px\",\r\n                  marginTop: \"8px\",\r\n                }}>\r\n                  <span style={{ fontSize: \"18px\" }}>{bestAchievement.icon}</span>\r\n                  <span style={{\r\n                    color: bestAchievement.rarity === \"legendary\" ? \"#f59e0b\" :\r\n                           bestAchievement.rarity === \"epic\" ? \"#a78bfa\" :\r\n                           bestAchievement.rarity === \"rare\" ? \"#3b82f6\" : \"#9ca3af\",\r\n                    fontWeight: \"600\",\r\n                    fontSize: \"13px\"\r\n                  }}>\r\n                    {bestAchievement.name}\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/*   */}\r\n              <div style={{ marginTop: \"12px\" }}>\r\n                <StreakDisplay userId={userId} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>  \r\n          </h3>\r\n\r\n          <div style={{ marginBottom: \"16px\" }}>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>\r\n                {levelInfo.icon} Lv.{levelInfo.level} {levelInfo.title}\r\n              </span>\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", fontWeight: \"600\" }}>\r\n                {levelInfo.progress.toFixed(1)}%\r\n              </span>\r\n            </div>\r\n            <div style={{\r\n              height: \"12px\",\r\n              background: \"#374151\",\r\n              borderRadius: \"6px\",\r\n              overflow: \"hidden\",\r\n            }}>\r\n              <div style={{\r\n                width: `${levelInfo.progress}%`,\r\n                height: \"100%\",\r\n                background: `linear-gradient(90deg, ${levelInfo.color} 0%, ${levelInfo.color}99 100%)`,\r\n                borderRadius: \"6px\",\r\n                transition: \"width 0.5s ease\",\r\n              }} />\r\n            </div>\r\n            <div style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginTop: \"8px\",\r\n              fontSize: \"12px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n              <span>: {formatKoreanCurrency(netAssets)}</span>\r\n              {levelInfo.level < LEVEL_THRESHOLDS.length - 1 && (\r\n                <span>: {formatKoreanCurrency(LEVEL_THRESHOLDS[levelInfo.level + 1]?.minAssets || 0)}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/*   */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <span></span>   ({achievements.length})\r\n          </h3>\r\n\r\n          {achievements.length === 0 ? (\r\n            <div style={{\r\n              textAlign: \"center\",\r\n              padding: \"32px\",\r\n              color: \"#6b7280\",\r\n            }}>\r\n                 .\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"repeat(auto-fill, minmax(140px, 1fr))\",\r\n              gap: \"12px\",\r\n            }}>\r\n              {sortedAchievements.map((ach) => {\r\n                const achievement = getAchievementById(ach.id);\r\n                if (!achievement) return null;\r\n\r\n                const rarityColors = {\r\n                  legendary: { bg: \"#f59e0b20\", border: \"#f59e0b\", text: \"#f59e0b\" },\r\n                  epic: { bg: \"#a78bfa20\", border: \"#a78bfa\", text: \"#a78bfa\" },\r\n                  rare: { bg: \"#3b82f620\", border: \"#3b82f6\", text: \"#3b82f6\" },\r\n                  common: { bg: \"#6b728020\", border: \"#6b7280\", text: \"#9ca3af\" },\r\n                };\r\n                const colors = rarityColors[achievement.rarity] || rarityColors.common;\r\n\r\n                return (\r\n                  <div\r\n                    key={ach.id}\r\n                    style={{\r\n                      background: colors.bg,\r\n                      border: `2px solid ${colors.border}`,\r\n                      borderRadius: \"12px\",\r\n                      padding: \"16px\",\r\n                      textAlign: \"center\",\r\n                      transition: \"all 0.2s\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: \"32px\", marginBottom: \"8px\" }}>\r\n                      {achievement.icon}\r\n                    </div>\r\n                    <div style={{\r\n                      color: colors.text,\r\n                      fontSize: \"12px\",\r\n                      fontWeight: \"600\",\r\n                      marginBottom: \"4px\",\r\n                    }}>\r\n                      {achievement.name}\r\n                    </div>\r\n                    <div style={{\r\n                      color: \"#6b7280\",\r\n                      fontSize: \"10px\",\r\n                    }}>\r\n                      {new Date(ach.unlockedAt).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/*    */}\r\n        <StreakRewardInfo />\r\n\r\n        {/*    */}\r\n        <div style={{\r\n          background: \"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)\",\r\n          borderRadius: \"20px\",\r\n          padding: \"24px\",\r\n          marginBottom: \"24px\",\r\n          border: \"2px solid #374151\",\r\n        }}>\r\n          <h3 style={{\r\n            color: \"#a78bfa\",\r\n            fontSize: \"18px\",\r\n            fontWeight: \"700\",\r\n            marginBottom: \"16px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"8px\",\r\n          }}>\r\n            <Settings size={20} />  \r\n          </h3>\r\n\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n            {/*     */}\r\n            <div style={{\r\n              padding: \"16px\",\r\n              background: \"#0f0f23\",\r\n              borderRadius: \"12px\",\r\n              border: \"1px solid #374151\",\r\n              marginBottom: \"8px\",\r\n            }}>\r\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                <span style={{ color: \"#9ca3af\", fontSize: \"14px\" }}>  </span>\r\n                <span style={{ color: \"#e8e8ff\", fontSize: \"16px\", fontWeight: \"600\" }}>\r\n                  {userDoc?.classCode || \"\"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowNicknameModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <User size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowPasswordModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Key size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*    */}\r\n            <button\r\n              onClick={() => { setShowClassCodeModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Building2 size={20} style={{ color: \"#a78bfa\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}>  </span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*  */}\r\n            <button\r\n              onClick={logout}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"#0f0f23\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid #374151\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n                marginTop: \"8px\",\r\n              }}\r\n            >\r\n              <LogOut size={20} style={{ color: \"#9ca3af\" }} />\r\n              <span style={{ color: \"#e8e8ff\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}></span>\r\n              <ChevronRight size={18} style={{ color: \"#6b7280\" }} />\r\n            </button>\r\n\r\n            {/*   */}\r\n            <button\r\n              onClick={() => { setShowDeleteModal(true); setError(\"\"); }}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"12px\",\r\n                padding: \"16px\",\r\n                background: \"rgba(239, 68, 68, 0.1)\",\r\n                borderRadius: \"12px\",\r\n                border: \"1px solid rgba(239, 68, 68, 0.3)\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.2s\",\r\n              }}\r\n            >\r\n              <Trash2 size={20} style={{ color: \"#ef4444\" }} />\r\n              <span style={{ color: \"#ef4444\", fontSize: \"14px\", flex: 1, textAlign: \"left\" }}> </span>\r\n              <ChevronRight size={18} style={{ color: \"#ef4444\" }} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/*    */}\r\n      <AvatarEditor\r\n        isOpen={showAvatarEditor}\r\n        onClose={() => setShowAvatarEditor(false)}\r\n        userId={userId}\r\n        onSave={handleAvatarSave}\r\n      />\r\n\r\n      {/*    */}\r\n      {showNicknameModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowNicknameModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={newNickname}\r\n              onChange={e => setNewNickname(e.target.value)}\r\n              placeholder=\"  (2~10)\"\r\n              maxLength={10}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowNicknameModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeNickname}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showPasswordModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowPasswordModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n               \r\n            </h3>\r\n            <input\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              onChange={e => setCurrentPassword(e.target.value)}\r\n              placeholder=\" \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={e => setNewPassword(e.target.value)}\r\n              placeholder=\"  (6 )\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={e => setConfirmPassword(e.target.value)}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowPasswordModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangePassword}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*     */}\r\n      {showClassCodeModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowClassCodeModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #374151\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#e8e8ff\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"20px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\" }}>\r\n               : <span style={{ color: \"#a78bfa\", fontWeight: \"600\" }}>{userDoc?.classCode || \"\"}</span>\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={newClassCode}\r\n              onChange={e => setNewClassCode(e.target.value.toUpperCase())}\r\n              placeholder=\"  \"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #374151\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowClassCodeModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleChangeClassCode}\r\n                disabled={isLoading}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: isLoading ? \"not-allowed\" : \"pointer\",\r\n                  opacity: isLoading ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/*    */}\r\n      {showDeleteModal && (\r\n        <div style={{\r\n          position: \"fixed\",\r\n          top: 0, left: 0, right: 0, bottom: 0,\r\n          background: \"rgba(0,0,0,0.8)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          zIndex: 2000,\r\n          padding: \"20px\",\r\n        }} onClick={() => { setShowDeleteModal(false); resetModals(); }}>\r\n          <div style={{\r\n            background: \"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)\",\r\n            borderRadius: \"20px\",\r\n            padding: \"24px\",\r\n            maxWidth: \"400px\",\r\n            width: \"100%\",\r\n            border: \"2px solid #ef4444\",\r\n          }} onClick={e => e.stopPropagation()}>\r\n            <h3 style={{ color: \"#ef4444\", fontSize: \"18px\", fontWeight: \"700\", marginBottom: \"16px\" }}>\r\n                \r\n            </h3>\r\n            <p style={{ color: \"#9ca3af\", fontSize: \"13px\", marginBottom: \"16px\", lineHeight: 1.6 }}>\r\n                      .\r\n                 <span style={{ color: \"#ef4444\", fontWeight: \"600\" }}>''</span> .\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={deleteConfirmText}\r\n              onChange={e => setDeleteConfirmText(e.target.value)}\r\n              placeholder=\"\"\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"14px\",\r\n                background: \"#0f0f23\",\r\n                border: \"2px solid #ef4444\",\r\n                borderRadius: \"12px\",\r\n                color: \"#e8e8ff\",\r\n                fontSize: \"14px\",\r\n                marginBottom: \"12px\",\r\n              }}\r\n            />\r\n            {error && <p style={{ color: \"#ef4444\", fontSize: \"13px\", marginBottom: \"12px\" }}>{error}</p>}\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              <button\r\n                onClick={() => { setShowDeleteModal(false); resetModals(); }}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#e8e8ff\",\r\n                  fontSize: \"14px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={handleDeleteAccount}\r\n                disabled={isLoading || deleteConfirmText !== \"\"}\r\n                style={{\r\n                  flex: 1, padding: \"12px\",\r\n                  background: deleteConfirmText === \"\" ? \"#ef4444\" : \"#374151\",\r\n                  border: \"none\",\r\n                  borderRadius: \"10px\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"14px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: (isLoading || deleteConfirmText !== \"\") ? \"not-allowed\" : \"pointer\",\r\n                  opacity: (isLoading || deleteConfirmText !== \"\") ? 0.5 : 1,\r\n                }}\r\n              >\r\n                {isLoading ? \" ...\" : \"\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/components/AlchanLayout.js\r\n//  UI    - Tailwind CSS \r\n//   : /  lazy loading \r\n\r\nimport React, { useState, useEffect, useCallback, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ItemProvider } from '../contexts/ItemContext'; //  []   \r\nimport AlchanSidebar, { AppIcon } from './AlchanSidebar';\r\nimport AlchanHeader from './AlchanHeader';\r\nimport MobileNav from './MobileNav';\r\nimport PWAInstallPrompt from './PWAInstallPrompt';\r\nimport UpdateNotification from './UpdateNotification';\r\nimport { useServiceWorker } from '../hooks/useServiceWorker';\r\nimport { AlchanLoadingScreen } from './ui/Skeleton';\r\nimport { WifiOff } from 'lucide-react';\r\n\r\n//    -   ( )\r\nimport Dashboard from '../Dashboard';\r\nimport ItemStore from '../pages/market/ItemStore';\r\nimport MyItems from '../MyItems';\r\nimport MyAssets from '../MyAssets';\r\nimport PersonalShop from '../pages/market/PersonalShop';\r\nimport Login from '../Login';\r\nimport Banking from '../pages/banking/Banking';\r\nimport MyProfile from '../MyProfile';\r\n\r\n//    -   (  )\r\nconst GonuGame = lazy(() => import('../pages/games/GonuGame'));\r\nconst OmokGame = lazy(() => import('../pages/games/OmokGame'));\r\nconst ChessGame = lazy(() => import('../pages/games/ChessGame'));\r\nconst TypingPracticeGame = lazy(() => import('../pages/games/TypingPracticeGame'));\r\n\r\n//  /  -  \r\nconst AdminItemPage = lazy(() => import('../pages/admin/AdminItemPage'));\r\nconst AdminPage = lazy(() => import('../pages/admin/AdminPage'));\r\nconst AdminPanel = lazy(() => import('../pages/admin/AdminPanel'));\r\nconst AdminDatabase = lazy(() => import('../pages/admin/AdminDatabase'));\r\nconst FirestoreDoctor = lazy(() => import('../FirestoreDoctor'));\r\nconst RecoverDonations = lazy(() => import('../RecoverDonations'));\r\nconst StudentManager = lazy(() => import('./StudentManager'));\r\n\r\n//   (SuperAdmin)  \r\nconst SuperAdminDashboard = lazy(() => import('../pages/superadmin/SuperAdminDashboard'));\r\n\r\n//      -  \r\nconst LearningBoard = lazy(() => import('../LearningBoard'));\r\nconst MusicRequest = lazy(() => import('../MusicRequest'));\r\nconst MusicRoom = lazy(() => import('../MusicRoom'));\r\nconst StudentRequest = lazy(() => import('../StudentRequest'));\r\nconst StockExchange = lazy(() => import('../pages/banking/StockExchange'));\r\nconst RealEstateRegistry = lazy(() => import('../RealEstateRegistry'));\r\nconst NationalAssembly = lazy(() => import('../pages/government/NationalAssembly'));\r\nconst Government = lazy(() => import('../pages/government/Government'));\r\nconst Court = lazy(() => import('../pages/government/Court'));\r\nconst PoliceStation = lazy(() => import('../pages/government/PoliceStation'));\r\nconst Auction = lazy(() => import('../pages/market/Auction'));\r\nconst MoneyTransfer = lazy(() => import('../pages/banking/MoneyTransfer'));\r\nconst CouponTransfer = lazy(() => import('../pages/banking/CouponTransfer'));\r\nconst CouponGoalPage = lazy(() => import('../CouponGoalPage'));\r\n\r\n//      (  )\r\nconst FULLSCREEN_PAGES = [\r\n  '/learning-games/omok',\r\n  '/learning-games/science',\r\n  '/learning-games/typing',\r\n  '/gonu-game',\r\n  '/auction',\r\n  '/court',\r\n  '/national-assembly',\r\n  '/music-room',\r\n];\r\n\r\n//    -      \r\nconst AlchanLoading = ({ message = ' ...' }) => {\r\n  return <AlchanLoadingScreen message={message} />;\r\n};\r\n\r\n// Protected Route \r\nconst ProtectedRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Admin Route \r\nconst AdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isAdmin = userDoc?.isAdmin || userDoc?.role === \"admin\" || userDoc?.isSuperAdmin;\r\n  if (!isAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// / Route \r\nconst TeacherRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  const isTeacher = userDoc?.isTeacher || userDoc?.isAdmin || userDoc?.isSuperAdmin;\r\n  if (!isTeacher) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   (SuperAdmin)  Route \r\nconst SuperAdminRoute = ({ children }) => {\r\n  const { user, userDoc, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (!userDoc?.isSuperAdmin) {\r\n    return <Navigate to=\"/dashboard/tasks\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n//   \r\nexport default function AlchanLayout() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, userDoc, loading, logout } = useAuth();\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [showUpdateDismissed, setShowUpdateDismissed] = useState(false);\r\n\r\n  // PWA   \r\n  const { updateAvailable, updateServiceWorker, isOnline } = useServiceWorker();\r\n\r\n  // Jua  \r\n  useEffect(() => {\r\n    const link = document.createElement('link');\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Jua&display=swap';\r\n    link.rel = 'stylesheet';\r\n    document.head.appendChild(link);\r\n    return () => {\r\n      if (document.head.contains(link)) {\r\n        document.head.removeChild(link);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  //      \r\n  useEffect(() => {\r\n    const isFullscreenPage = FULLSCREEN_PAGES.some(page => location.pathname.startsWith(page));\r\n    if (isFullscreenPage && !isMobile) {\r\n      setIsSidebarCollapsed(true);\r\n    }\r\n  }, [location.pathname, isMobile]);\r\n\r\n  //   \r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const toggleSidebar = useCallback(() => {\r\n    setIsSidebarOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const closeSidebar = useCallback(() => {\r\n    setIsSidebarOpen(false);\r\n  }, []);\r\n\r\n  const toggleSidebarCollapse = useCallback(() => {\r\n    setIsSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  //        ( )\r\n  if (!loading && !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  //   (loading ,  userDoc  )\r\n  if (loading || (user && !userDoc)) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  //   (  )\r\n  if (location.pathname === '/login') {\r\n    return user ? <Navigate to=\"/dashboard/tasks\" replace /> : <Login />;\r\n  }\r\n\r\n  //   \r\n  if (!userDoc.classCode) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center\">\r\n          <div className=\"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl\">\r\n            \r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-2\">  </h2>\r\n          <p className=\"text-gray-500 mb-6\">\r\n                .\r\n          </p>\r\n          <button\r\n            onClick={() => logout()}\r\n            className=\"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const userClassCode = userDoc?.classCode;\r\n\r\n  return (\r\n    //  [] ItemProvider   -     Firestore  \r\n    <ItemProvider>\r\n    <div className=\"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex\">\r\n      {/* PC  */}\r\n      <AlchanSidebar\r\n        isOpen={isSidebarOpen}\r\n        onClose={closeSidebar}\r\n        isCollapsed={isSidebarCollapsed}\r\n      />\r\n\r\n      {/*    -    */}\r\n      <main className=\"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible\">\r\n        {/*  */}\r\n        <AlchanHeader\r\n          toggleSidebar={toggleSidebar}\r\n          isMobile={isMobile}\r\n          isSidebarCollapsed={isSidebarCollapsed}\r\n          onToggleSidebarCollapse={toggleSidebarCollapse}\r\n        />\r\n\r\n        {/*   -  Suspense lazy loading  */}\r\n        <div className=\"w-full pb-20 md:pb-4\">\r\n          <Suspense fallback={<AlchanLoading message=\"  ...\" />}>\r\n          <Routes>\r\n            {/*   */}\r\n            <Route path=\"/dashboard/tasks\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\r\n            <Route path=\"/my-assets\" element={<ProtectedRoute><MyAssets /></ProtectedRoute>} />\r\n            <Route path=\"/my-profile\" element={<ProtectedRoute><MyProfile /></ProtectedRoute>} />\r\n            <Route path=\"/coupon-goal\" element={<ProtectedRoute><CouponGoalPage /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-games/omok\" element={<ProtectedRoute><OmokGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/typing\" element={<ProtectedRoute><TypingPracticeGame /></ProtectedRoute>} />\r\n            <Route path=\"/learning-games/science\" element={<ProtectedRoute><ChessGame /></ProtectedRoute>} />\r\n            <Route path=\"/gonu-game\" element={<ProtectedRoute><GonuGame /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/item-shop\" element={<ProtectedRoute><ItemStore /></ProtectedRoute>} />\r\n            <Route path=\"/my-items\" element={<ProtectedRoute><MyItems /></ProtectedRoute>} />\r\n            <Route path=\"/item-market\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n            <Route path=\"/personal-shop\" element={<ProtectedRoute><PersonalShop /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/banking\" element={<ProtectedRoute><Banking /></ProtectedRoute>} />\r\n            <Route path=\"/stock-trading\" element={<ProtectedRoute><StockExchange /></ProtectedRoute>} />\r\n            <Route path=\"/auction\" element={<ProtectedRoute><Auction /></ProtectedRoute>} />\r\n            <Route path=\"/real-estate\" element={<ProtectedRoute><RealEstateRegistry /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/government\" element={<ProtectedRoute><Government /></ProtectedRoute>} />\r\n            <Route path=\"/national-assembly\" element={<ProtectedRoute><NationalAssembly /></ProtectedRoute>} />\r\n            <Route path=\"/court\" element={<ProtectedRoute><Court /></ProtectedRoute>} />\r\n            <Route path=\"/police\" element={<ProtectedRoute><PoliceStation /></ProtectedRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/learning-board\" element={<ProtectedRoute><LearningBoard /></ProtectedRoute>} />\r\n            <Route path=\"/learning-board/music-request\" element={<ProtectedRoute><MusicRequest user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/music-room/:roomId\" element={<ProtectedRoute><MusicRoom user={user} /></ProtectedRoute>} />\r\n            <Route path=\"/student-request/:roomId\" element={<StudentRequest />} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/admin/app-settings\" element={<AdminRoute><Dashboard adminTabMode=\"generalSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/task-management\" element={<AdminRoute><Dashboard adminTabMode=\"taskManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/job-settings\" element={<AdminRoute><Dashboard adminTabMode=\"jobSettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/salary-settings\" element={<AdminRoute><Dashboard adminTabMode=\"salarySettings\" /></AdminRoute>} />\r\n            <Route path=\"/admin/class-members\" element={<AdminRoute><Dashboard adminTabMode=\"memberManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/app-management\" element={<AdminRoute><Dashboard adminTabMode=\"appManagement\" /></AdminRoute>} />\r\n            <Route path=\"/admin/coupon-transfer\" element={<AdminRoute><CouponTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/money-transfer\" element={<AdminRoute><MoneyTransfer /></AdminRoute>} />\r\n            <Route path=\"/admin/activity-log\" element={<AdminRoute><AdminDatabase /></AdminRoute>} />\r\n            <Route path=\"/admin/items\" element={<AdminRoute><AdminItemPage /></AdminRoute>} />\r\n            <Route path=\"/admin/page\" element={<AdminRoute><AdminPage /></AdminRoute>} />\r\n            <Route path=\"/admin-panel\" element={<AdminRoute><AdminPanel onClose={() => navigate(-1)} classCode={userClassCode} /></AdminRoute>} />\r\n            <Route path=\"/admin/students\" element={<TeacherRoute><StudentManager /></TeacherRoute>} />\r\n\r\n            {/*   (SuperAdmin)  */}\r\n            <Route path=\"/super-admin\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n            <Route path=\"/super-admin/*\" element={<SuperAdminRoute><SuperAdminDashboard /></SuperAdminRoute>} />\r\n\r\n            {/*  */}\r\n            <Route path=\"/doctor\" element={<ProtectedRoute><FirestoreDoctor /></ProtectedRoute>} />\r\n            <Route path=\"/recover-donations\" element={<ProtectedRoute><RecoverDonations /></ProtectedRoute>} />\r\n\r\n            {/*   */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/dashboard/tasks\" replace />} />\r\n          </Routes>\r\n          </Suspense>\r\n        </div>\r\n\r\n        {/*  - PC */}\r\n        <footer className=\"hidden md:block py-8 text-center text-sm text-gray-400 font-medium\">\r\n           2025  Corp. All rights reserved.\r\n        </footer>\r\n      </main>\r\n\r\n      {/*    */}\r\n      <MobileNav />\r\n\r\n      {/* PWA   */}\r\n      <PWAInstallPrompt />\r\n\r\n      {/*   */}\r\n      {updateAvailable && !showUpdateDismissed && (\r\n        <UpdateNotification\r\n          onUpdate={updateServiceWorker}\r\n          onDismiss={() => setShowUpdateDismissed(true)}\r\n        />\r\n      )}\r\n\r\n      {/*   */}\r\n      {!isOnline && (\r\n        <div className=\"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2\">\r\n          <WifiOff size={16} />\r\n           .     .\r\n        </div>\r\n      )}\r\n\r\n      {/*   */}\r\n      <style>{`\r\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\r\n        .font-jua { font-family: 'Jua', sans-serif; }\r\n        @keyframes slide-up {\r\n          from { transform: translateY(100%); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\r\n        @keyframes spin-slow {\r\n          from { transform: rotate(0deg); }\r\n          to { transform: rotate(360deg); }\r\n        }\r\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\r\n      `}</style>\r\n    </div>\r\n    </ItemProvider>\r\n  );\r\n}\r\n\r\n// AlchanLoading  export\r\nexport { AlchanLoading };\r\n","// src/AdminItemPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// 50   \r\nconst iconCollection = {\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n  \"\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: '20px',\r\n    maxWidth: '1000px',\r\n    margin: '0 auto',\r\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: '16px',\r\n    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',\r\n    padding: '30px',\r\n    marginBottom: '20px'\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white',\r\n    padding: '30px',\r\n    borderRadius: '16px 16px 0 0',\r\n    marginBottom: '0'\r\n  },\r\n  title: {\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n    marginBottom: '8px'\r\n  },\r\n  subtitle: {\r\n    opacity: '0.9',\r\n    fontSize: '14px'\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    borderBottom: '2px solid #e5e7eb',\r\n    backgroundColor: '#f9fafb',\r\n    marginTop: '-4px'\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    padding: '16px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '16px',\r\n    fontWeight: '600',\r\n    color: '#6b7280',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease',\r\n    borderBottom: '3px solid transparent'\r\n  },\r\n  activeTab: {\r\n    color: '#667eea',\r\n    backgroundColor: 'white',\r\n    borderBottom: '3px solid #667eea'\r\n  },\r\n  disabledTab: {\r\n    opacity: '0.5',\r\n    cursor: 'not-allowed'\r\n  },\r\n  formSection: {\r\n    backgroundColor: '#f9fafb',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  formTitle: {\r\n    fontSize: '20px',\r\n    fontWeight: '700',\r\n    color: '#374151',\r\n    marginBottom: '20px'\r\n  },\r\n  inputGroup: {\r\n    marginBottom: '20px'\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    color: '#374151',\r\n    marginBottom: '8px'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    transition: 'border-color 0.3s ease',\r\n    boxSizing: 'border-box'\r\n  },\r\n  textarea: {\r\n    width: '100%',\r\n    padding: '12px',\r\n    border: '2px solid #e5e7eb',\r\n    borderRadius: '8px',\r\n    fontSize: '14px',\r\n    minHeight: '100px',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box'\r\n  },\r\n  gridTwo: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(2, 1fr)',\r\n    gap: '20px'\r\n  },\r\n  iconSelector: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  selectedIcon: {\r\n    fontSize: '48px',\r\n    width: '80px',\r\n    height: '80px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#f3f4f6',\r\n    borderRadius: '12px',\r\n    marginBottom: '16px'\r\n  },\r\n  button: {\r\n    padding: '12px 24px',\r\n    borderRadius: '8px',\r\n    border: 'none',\r\n    fontSize: '14px',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.3s ease'\r\n  },\r\n  primaryButton: {\r\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    color: 'white'\r\n  },\r\n  secondaryButton: {\r\n    backgroundColor: 'white',\r\n    color: '#374151',\r\n    border: '2px solid #e5e7eb'\r\n  },\r\n  iconGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    gap: '8px',\r\n    marginTop: '16px'\r\n  },\r\n  iconButton: {\r\n    fontSize: '28px',\r\n    padding: '8px',\r\n    border: '2px solid transparent',\r\n    borderRadius: '8px',\r\n    backgroundColor: '#f9fafb',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  categoryButtons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    gap: '8px',\r\n    marginBottom: '16px'\r\n  },\r\n  categoryButton: {\r\n    padding: '8px 16px',\r\n    borderRadius: '8px',\r\n    border: '2px solid #e5e7eb',\r\n    backgroundColor: 'white',\r\n    fontSize: '13px',\r\n    fontWeight: '500',\r\n    cursor: 'pointer',\r\n    transition: 'all 0.2s ease'\r\n  },\r\n  activeCategoryButton: {\r\n    backgroundColor: '#667eea',\r\n    color: 'white',\r\n    borderColor: '#667eea'\r\n  },\r\n  priceIncreaseSection: {\r\n    backgroundColor: '#fef3c7',\r\n    border: '2px solid #fcd34d',\r\n    padding: '20px',\r\n    borderRadius: '12px',\r\n    marginBottom: '20px'\r\n  },\r\n  helpText: {\r\n    fontSize: '13px',\r\n    color: '#6b7280',\r\n    marginTop: '8px',\r\n    lineHeight: '1.5'\r\n  },\r\n  checkboxWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px'\r\n  },\r\n  checkbox: {\r\n    width: '20px',\r\n    height: '20px',\r\n    cursor: 'pointer'\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginTop: '30px',\r\n    paddingTop: '20px',\r\n    borderTop: '2px solid #e5e7eb'\r\n  }\r\n};\r\n\r\nconst AdminItemPage = ({\r\n  classCode,\r\n  editingItemFromStore,\r\n  onAddItem,\r\n  onUpdateItem,\r\n  onClose,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"addItem\");\r\n  const [showIconPicker, setShowIconPicker] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    initialStock: \"\",\r\n    icon: \"\",\r\n    available: true,\r\n    priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editingItemFromStore) {\r\n      setItem({ \r\n        ...editingItemFromStore,\r\n        // []  priceIncreasePercentage ,    \r\n        priceIncreasePercentage: editingItemFromStore.priceIncreasePercentage || \"10\"\r\n      });\r\n      setActiveTab(\"editItem\");\r\n    } else {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  }, [editingItemFromStore]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setItem((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleIconSelect = (icon) => {\r\n    setItem(prev => ({ ...prev, icon }));\r\n    setShowIconPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const isEditing = !!(item && item.id);\r\n\r\n    if (\r\n      !item.name ||\r\n      !item.price ||\r\n      !item.stock ||\r\n      isNaN(item.price) ||\r\n      isNaN(item.stock) ||\r\n      parseInt(item.price, 10) < 0 ||\r\n      parseInt(item.stock, 10) < 0\r\n    ) {\r\n      alert(\", ,   (0  ) .\");\r\n      return;\r\n    }\r\n\r\n    const itemData = {\r\n      ...item,\r\n      price: parseInt(item.price, 10),\r\n      stock: parseInt(item.stock, 10),\r\n      initialStock: item.initialStock\r\n        ? parseInt(item.initialStock, 10)\r\n        : parseInt(item.stock, 10),\r\n      // []    priceIncreasePercentage ,  \r\n      priceIncreasePercentage: parseFloat(item.priceIncreasePercentage) || 0,\r\n      classCode,\r\n    };\r\n\r\n    let success = false;\r\n    if (isEditing) {\r\n      success = await onUpdateItem(itemData);\r\n    } else {\r\n      success = await onAddItem(itemData);\r\n    }\r\n\r\n    if (success) {\r\n      if (!isEditing) {\r\n        setItem({\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          stock: \"\",\r\n          initialStock: \"\",\r\n          icon: \"\",\r\n          available: true,\r\n          priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n        });\r\n        setActiveTab(\"addItem\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    if (editingItemFromStore) {\r\n      onClose();\r\n    }\r\n    if (tabName === 'addItem') {\r\n      setItem({\r\n        name: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        stock: \"\",\r\n        initialStock: \"\",\r\n        icon: \"\",\r\n        available: true,\r\n        priceIncreasePercentage: \"10\", // []  priceIncreasePercentage \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <div style={styles.header}>\r\n          <h2 style={styles.title}>   </h2>\r\n          <p style={styles.subtitle}>  </p>\r\n        </div>\r\n\r\n        <div style={styles.tabs}>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"addItem\" ? styles.activeTab : {})\r\n            }}\r\n            onClick={() => handleTabClick(\"addItem\")}\r\n          >\r\n              \r\n          </button>\r\n          <button\r\n            style={{\r\n              ...styles.tab,\r\n              ...(activeTab === \"editItem\" ? styles.activeTab : {}),\r\n              ...((!editingItemFromStore) ? styles.disabledTab : {})\r\n            }}\r\n            disabled={!editingItemFromStore}\r\n            onClick={() => setActiveTab(\"editItem\")}\r\n          >\r\n              \r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '30px' }}>\r\n          {(activeTab === \"addItem\" || activeTab === \"editItem\") && (\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formSection}>\r\n                <h3 style={styles.formTitle}>\r\n                  {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                </h3>\r\n\r\n                {/*   */}\r\n                <div style={styles.iconSelector}>\r\n                  <label style={styles.label}> </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                    <div style={styles.selectedIcon}>\r\n                      {item.icon}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowIconPicker(!showIconPicker)}\r\n                      style={{ ...styles.button, ...styles.primaryButton }}\r\n                    >\r\n                       \r\n                    </button>\r\n                  </div>\r\n\r\n                  {showIconPicker && (\r\n                    <div style={{ \r\n                      marginTop: '20px', \r\n                      padding: '16px', \r\n                      backgroundColor: '#f9fafb', \r\n                      borderRadius: '8px', \r\n                      width: '100%', \r\n                      boxSizing: 'border-box',\r\n                      maxHeight: '400px',\r\n                      overflowY: 'auto'\r\n                    }}>\r\n                      <div style={styles.categoryButtons}>\r\n                        {Object.keys(iconCollection).map((category) => (\r\n                          <button\r\n                            key={category}\r\n                            type=\"button\"\r\n                            onClick={() => setSelectedCategory(category)}\r\n                            style={{\r\n                              ...styles.categoryButton,\r\n                              ...(selectedCategory === category ? styles.activeCategoryButton : {})\r\n                            }}\r\n                          >\r\n                            {category}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                      <div style={styles.iconGrid}>\r\n                        {iconCollection[selectedCategory].map((icon) => (\r\n                          <button\r\n                            key={icon}\r\n                            type=\"button\"\r\n                            onClick={() => handleIconSelect(icon)}\r\n                            style={styles.iconButton}\r\n                            onMouseEnter={(e) => {\r\n                              e.target.style.backgroundColor = '#e5e7eb';\r\n                              e.target.style.transform = 'scale(1.1)';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              e.target.style.backgroundColor = '#f9fafb';\r\n                              e.target.style.transform = 'scale(1)';\r\n                            }}\r\n                          >\r\n                            {icon}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.gridTwo}>\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                       <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"name\"\r\n                      value={item.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\":  \"\r\n                      required\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        () <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"price\"\r\n                      type=\"number\"\r\n                      value={item.price}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 1000\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        <span style={{ color: 'red' }}>*</span>\r\n                    </label>\r\n                    <input\r\n                      name=\"stock\"\r\n                      type=\"number\"\r\n                      value={item.stock}\r\n                      onChange={handleChange}\r\n                      placeholder=\": 10\"\r\n                      required\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={styles.inputGroup}>\r\n                    <label style={styles.label}>\r\n                        (  )\r\n                    </label>\r\n                    <input\r\n                      name=\"initialStock\"\r\n                      type=\"number\"\r\n                      value={item.initialStock}\r\n                      onChange={handleChange}\r\n                      placeholder=\"   \"\r\n                      min=\"0\"\r\n                      style={styles.input}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.priceIncreaseSection}>\r\n                  <label style={styles.label}>\r\n                          (%)\r\n                  </label>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <input\r\n                      name=\"priceIncreasePercentage\" // [] input name \r\n                      type=\"number\"\r\n                      value={item.priceIncreasePercentage} // [] value \r\n                      onChange={handleChange}\r\n                      placeholder=\"10\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.5\"\r\n                      style={{ ...styles.input, width: '120px' }}\r\n                    />\r\n                    <span style={{ fontSize: '16px', color: '#374151' }}>%</span>\r\n                  </div>\r\n                  <p style={styles.helpText}>\r\n                      0          .<br />\r\n                    : 10%  , 1000  1100  1210  \r\n                  </p>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={styles.inputGroup}>\r\n                  <label style={styles.label}> </label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={item.description}\r\n                    onChange={handleChange}\r\n                    placeholder=\"    .\"\r\n                    style={styles.textarea}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/*    */}\r\n              <div style={styles.buttonGroup}>\r\n                <div style={styles.checkboxWrapper}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"available\"\r\n                    checked={item.available}\r\n                    onChange={handleChange}\r\n                    style={styles.checkbox}\r\n                  />\r\n                  <label style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                    {item.available ? \" \" : \" \"}\r\n                  </label>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '12px' }}>\r\n                  {activeTab === \"editItem\" && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleTabClick(\"addItem\")}\r\n                      style={{ ...styles.button, ...styles.secondaryButton }}\r\n                    >\r\n                      \r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ ...styles.button, ...styles.primaryButton }}\r\n                  >\r\n                    {activeTab === \"editItem\" ? \"  \" : \"  \"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminItemPage;","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { functions, httpsCallable, db } from \"../firebase\";\r\nimport { usePolling, POLLING_INTERVALS } from \"../hooks/usePolling\";\r\nimport { logActivity, ACTIVITY_TYPES } from \"../utils/firestoreHelpers\";\r\n\r\nexport const ItemContext = createContext(null);\r\n\r\nexport const useItems = () => {\r\n  const context = useContext(ItemContext);\r\n  if (!context) {\r\n    // This fallback is for components that might render outside the provider.\r\n    // It provides a safe, non-functional version of the context values.\r\n    console.warn(\"useItems: ItemContext   \");\r\n    return {\r\n      items: [], userItems: [], marketListings: [], marketOffers: [],\r\n      loading: true, error: null,\r\n      addItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      purchaseItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      deleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      useItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      updateUserItemQuantity: async () => ({ success: false, message: \"Context not available\" }),\r\n      listItemForSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      buyMarketItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      cancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      makeOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      respondToOffer: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminCancelSale: async () => ({ success: false, message: \"Context not available\" }),\r\n      adminDeleteItem: async () => ({ success: false, message: \"Context not available\" }),\r\n      refreshData: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const { user, userDoc, isAdmin: isAuthAdmin, loading: authLoading, deductCash, addCash, optimisticUpdate } = useAuth() || {};\r\n  const userId = user?.uid;\r\n  const currentUserClassCode = userDoc?.classCode;\r\n\r\n  // State for all economic data\r\n  const [items, setItems] = useState([]);\r\n  const [userItems, setUserItems] = useState([]);\r\n  const [marketListings, setMarketListings] = useState([]);\r\n  const [marketOffers, setMarketOffers] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Unified loading state\r\n  const loading = authLoading || dataLoading;\r\n\r\n  // Memoized Firebase callables\r\n  const getItemContextData = useMemo(() => httpsCallable(functions, 'getItemContextData'), []);\r\n  const firebaseFunctions = useMemo(() => ({\r\n    addStoreItem: httpsCallable(functions, 'addStoreItem'),\r\n    updateStoreItem: httpsCallable(functions, 'updateStoreItem'),\r\n    deleteStoreItem: httpsCallable(functions, 'deleteStoreItem'),\r\n    purchaseStoreItem: httpsCallable(functions, 'purchaseStoreItem'),\r\n    useUserItem: httpsCallable(functions, 'useUserItem'),\r\n    updateUserItemQuantity: httpsCallable(functions, 'updateUserItemQuantity'),\r\n    listUserItemForSale: httpsCallable(functions, 'listUserItemForSale'),\r\n    buyMarketItem: httpsCallable(functions, 'buyMarketItem'),\r\n    cancelMarketSale: httpsCallable(functions, 'cancelMarketSale'),\r\n    makeOffer: httpsCallable(functions, 'makeOffer'),\r\n    respondToOffer: httpsCallable(functions, 'respondToOffer'),\r\n    adminCancelSale: httpsCallable(functions, 'adminCancelSale'),\r\n    adminDeleteItem: httpsCallable(functions, 'adminDeleteItem'),\r\n  }), []);\r\n\r\n  // Central data fetching function\r\n  const fetchData = useCallback(async () => {\r\n    if (!userId || !currentUserClassCode) {\r\n      setDataLoading(false);\r\n      return;\r\n    }\r\n\r\n    setDataLoading(true);\r\n    try {\r\n      const result = await getItemContextData();\r\n      if (result.data.success) {\r\n        const { storeItems, userItems: groupedUserItems, marketListings, marketOffers } = result.data.data;\r\n        setItems(storeItems || []);\r\n        setUserItems(groupedUserItems || []);\r\n        setMarketListings(marketListings || []);\r\n        setMarketOffers(marketOffers || []);\r\n        setError(null);\r\n      } else {\r\n        throw new Error(result.data.message || '  .');\r\n      }\r\n    } catch (err) {\r\n      console.error('[ItemContext]   :', err);\r\n      setError(err);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  }, [userId, currentUserClassCode, getItemContextData]);\r\n\r\n  // Effect to fetch data when user is authenticated, now using polling\r\n  //  []      10   (  90% )\r\n  usePolling(fetchData, {\r\n    interval: 30 * 60 * 1000, //  [] 30   (10 )\r\n    enabled: !authLoading && !!userId && !!currentUserClassCode,\r\n    deps: [authLoading, userId, currentUserClassCode]\r\n  });\r\n\r\n  // Public refresh function\r\n  const refreshData = useCallback(() => {\r\n    return fetchData();\r\n  }, [fetchData]);\r\n\r\n  //       (Firestore  )\r\n  const updateLocalUserItems = useCallback((newUserItems) => {\r\n    console.log('[ItemContext]  userItems :', newUserItems?.length, '');\r\n    setUserItems(newUserItems);\r\n  }, []);\r\n\r\n  // All context functions now use firebaseFunctions and refreshData\r\n  const addItem = useCallback(async (newItemData) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n\r\n    // Optimistic Update: Add item to local state immediately\r\n    const tempId = `temp_${Date.now()}`;\r\n    const tempNewItem = { ...newItemData, id: tempId };\r\n    setItems(prevItems => [...prevItems, tempNewItem]);\r\n\r\n    try {\r\n      const token = await user?.getIdToken();\r\n      if (!token) {\r\n        throw new Error(\"    .\");\r\n      }\r\n\r\n      const functionUrl = `https://asia-northeast3-inconomysu-class.cloudfunctions.net/addStoreItem`;\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ data: { newItemData } })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || ` : ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.data.success) {\r\n        // Success: Refresh data from server to get final item with correct ID\r\n        await refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"    .\");\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setItems(prevItems => prevItems.filter(item => item.id !== tempId));\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, user, refreshData]);\r\n\r\n  const updateItem = useCallback(async (itemId, updatesToApply) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.updateStoreItem({ itemId, updatesToApply });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (updateStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const deleteItem = useCallback(async (itemId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.deleteStoreItem({ itemId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (deleteStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const purchaseItem = useCallback(async (itemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToPurchase = items.find(item => item.id === itemId);\r\n    if (!itemToPurchase) return { success: false, message: \"   .\" };\r\n\r\n    const totalPrice = itemToPurchase.price * quantity;\r\n\r\n    //  1.    ( )\r\n    if (optimisticUpdate) {\r\n      optimisticUpdate({ cash: -totalPrice });\r\n    }\r\n\r\n    //  2. userItems  \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToPurchase.id,\r\n      name: itemToPurchase.name,\r\n      icon: itemToPurchase.icon || '',\r\n      description: itemToPurchase.description || '',\r\n      type: itemToPurchase.type || 'general',\r\n      quantity: quantity,\r\n      price: itemToPurchase.price,\r\n      durationMs: itemToPurchase.durationMs || 300000,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    console.log('[ItemContext]  : Store  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalStock = itemToPurchase.stock;\r\n    const originalPrice = itemToPurchase.price;\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    try {\r\n      const result = await firebaseFunctions.purchaseStoreItem({ itemId, quantity });\r\n      if (result.data.success) {\r\n        //           \r\n        const { restocked, newStock, newPrice } = result.data;\r\n\r\n        console.log('[ItemContext]  :', {\r\n          itemId,\r\n          quantity,\r\n          restocked,\r\n          newStock,\r\n          newPrice,\r\n          oldPrice: originalPrice,\r\n          oldStock: originalStock\r\n        });\r\n\r\n        //     ( )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_PURCHASE,\r\n          description: `${itemToPurchase.name} ${quantity}  (${totalPrice.toLocaleString()})`,\r\n          amount: -totalPrice,\r\n          metadata: {\r\n            itemId,\r\n            itemName: itemToPurchase.name,\r\n            quantity,\r\n            pricePerItem: itemToPurchase.price,\r\n            totalPrice\r\n          }\r\n        });\r\n\r\n        if (itemToPurchase.stock !== undefined) {\r\n          setItems(prevItems =>\r\n            prevItems.map(item => {\r\n              if (item.id === itemId) {\r\n                return {\r\n                  ...item,\r\n                  stock: newStock,\r\n                  price: newPrice\r\n                };\r\n              }\r\n              return item;\r\n            })\r\n          );\r\n        }\r\n\r\n        //     ( inventory  )\r\n        console.log('[ItemContext]  ,   ');\r\n        refreshData();\r\n\r\n        return { success: true, restocked, newStock, newPrice };\r\n      } else {\r\n        //  :   \r\n        console.warn('[ItemContext]  ,  ');\r\n        if (optimisticUpdate) {\r\n          optimisticUpdate({ cash: totalPrice });\r\n        }\r\n        setUserItems(originalUserItems);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      console.error('[ItemContext]  ,  :', error);\r\n      if (optimisticUpdate) {\r\n        optimisticUpdate({ cash: totalPrice });\r\n      }\r\n      setUserItems(originalUserItems);\r\n\r\n      //   refreshData \r\n      refreshData();\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (purchaseStoreItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, items, userItems, optimisticUpdate]);\r\n\r\n  const useItem = useCallback(async (inventoryItemId, quantity = 1) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToUse = userItems.find(item => item.id === inventoryItemId || item.itemId === inventoryItemId);\r\n    const itemName = itemToUse?.name || itemToUse?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.useUserItem({ itemId: inventoryItemId, quantityToUse: quantity, sourceCollection: 'inventory' });\r\n\r\n      //     ( )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_USE,\r\n        description: `${itemName} ${quantity} `,\r\n        metadata: {\r\n          itemId: inventoryItemId,\r\n          itemName: itemName,\r\n          quantity\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (useUserItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, userItems, currentUserClassCode, userDoc, firebaseFunctions, refreshData]);\r\n\r\n  const listItemForSale = useCallback(async ({ itemId, quantity, price }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n\r\n    //      (Firebase  )\r\n    const itemToSell = userItems.find(item => item.id === itemId || item.itemId === itemId);\r\n    const itemName = itemToSell?.name || itemToSell?.itemName || '';\r\n\r\n    try {\r\n      await firebaseFunctions.listUserItemForSale({ inventoryItemId: itemId, quantity, price, sourceCollection: 'inventory' });\r\n\r\n      //     (  )\r\n      logActivity(db, {\r\n        classCode: currentUserClassCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '',\r\n        type: ACTIVITY_TYPES.ITEM_MARKET_LIST,\r\n        description: `${itemName} ${quantity}   (${price.toLocaleString()})`,\r\n        metadata: {\r\n          itemId,\r\n          itemName: itemName,\r\n          quantity,\r\n          price\r\n        }\r\n      });\r\n\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (listUserItemForSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const buyMarketItem = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    const itemToBuy = marketListings.find(item => item.id === listingId);\r\n    if (!itemToBuy) return { success: false, message: \"     .\" };\r\n\r\n    const itemPrice = itemToBuy.price || itemToBuy.totalPrice || 0;\r\n\r\n    //  1.   \r\n    const deductResult = await deductCash(itemPrice, `${itemToBuy.itemName} `);\r\n    if (!deductResult) {\r\n      return { success: false, message: \"  .\" };\r\n    }\r\n\r\n    //  2.  :   \r\n    const newUserItem = {\r\n      id: `temp-${Date.now()}-${Math.random()}`, //  ID\r\n      itemId: itemToBuy.itemId || itemToBuy.id,\r\n      name: itemToBuy.itemName,\r\n      icon: itemToBuy.icon || '',\r\n      description: itemToBuy.description || '',\r\n      type: itemToBuy.category || itemToBuy.itemType || 'general',\r\n      quantity: itemToBuy.quantity || 1,\r\n      purchasedAt: new Date(),\r\n    };\r\n\r\n    console.log('[ItemContext]  :  ', newUserItem);\r\n\r\n    //    ()\r\n    const originalUserItems = [...userItems];\r\n    const originalMarketListings = [...marketListings];\r\n\r\n    //  userItems  \r\n    setUserItems(prev => {\r\n      //  itemId   ,   \r\n      const existingIndex = prev.findIndex(item => item.itemId === newUserItem.itemId);\r\n      if (existingIndex >= 0) {\r\n        const updated = [...prev];\r\n        updated[existingIndex] = {\r\n          ...updated[existingIndex],\r\n          quantity: updated[existingIndex].quantity + newUserItem.quantity\r\n        };\r\n        return updated;\r\n      } else {\r\n        return [...prev, newUserItem];\r\n      }\r\n    });\r\n\r\n    //  marketListings  \r\n    setMarketListings(prev => prev.filter(item => item.id !== listingId));\r\n\r\n    try {\r\n      const result = await firebaseFunctions.buyMarketItem({ listingId });\r\n      if (result.data.success) {\r\n        console.log('[ItemContext]  ,   ');\r\n\r\n        //     (  )\r\n        logActivity(db, {\r\n          classCode: currentUserClassCode,\r\n          userId: userId,\r\n          userName: userDoc?.name || '',\r\n          type: ACTIVITY_TYPES.ITEM_MARKET_BUY,\r\n          description: `${itemToBuy.itemName} ${itemToBuy.quantity || 1}   (${itemPrice.toLocaleString()})`,\r\n          amount: -itemPrice,\r\n          metadata: {\r\n            listingId,\r\n            itemName: itemToBuy.itemName,\r\n            quantity: itemToBuy.quantity || 1,\r\n            sellerId: itemToBuy.sellerId,\r\n            sellerName: itemToBuy.sellerName,\r\n            price: itemPrice\r\n          }\r\n        });\r\n\r\n        //  : refreshData   \r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        //  :   \r\n        console.warn('[ItemContext]  ,  ');\r\n        await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n        setUserItems(originalUserItems);\r\n        setMarketListings(originalMarketListings);\r\n        throw new Error(result.data.message || \" .\");\r\n      }\r\n    } catch (error) {\r\n      //  :   \r\n      console.error('[ItemContext]  ,  :', error);\r\n      await addCash(itemPrice, `${itemToBuy.itemName}   ()`);\r\n      setUserItems(originalUserItems);\r\n      setMarketListings(originalMarketListings);\r\n\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (buyMarketItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData, marketListings, userItems, deductCash, addCash]);\r\n\r\n  const cancelSale = useCallback(async (listingId) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.cancelMarketSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (cancelMarketSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const makeOffer = useCallback(async ({ listingId, offerPrice, quantity = 1 }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.makeOffer({ listingId, offerPrice, quantity });\r\n      refreshData();\r\n      return { success: true, offerId: result.data.offerId };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (makeOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const respondToOffer = useCallback(async ({ offerId, response }) => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      await firebaseFunctions.respondToOffer({ offerId, response });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"  (respondToOffer)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  const adminCancelSale = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminCancelSale({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminCancelSale)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const adminDeleteItem = useCallback(async (listingId) => {\r\n    if (!isAuthAdmin()) return { success: false, message: \"  \" };\r\n    try {\r\n      await firebaseFunctions.adminDeleteItem({ listingId });\r\n      refreshData();\r\n      return { success: true };\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (adminDeleteItem)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [isAuthAdmin, firebaseFunctions, refreshData]);\r\n\r\n  const updateUserItemQuantity = useCallback(async (itemId, quantityChange, sourceCollection = 'inventory') => {\r\n    if (!userId) return { success: false, message: \" \" };\r\n    try {\r\n      const result = await firebaseFunctions.updateUserItemQuantity({ itemId, quantityChange, sourceCollection });\r\n      if (result.data.success) {\r\n        refreshData();\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(result.data.message || \"   .\");\r\n      }\r\n    } catch (error) {\r\n      refreshData();\r\n      if (error.code === 'not-found') {\r\n        return { success: false, message: \"   (updateUserItemQuantity)   .  .\" };\r\n      }\r\n      return { success: false, message: error.message };\r\n    }\r\n  }, [userId, firebaseFunctions, refreshData]);\r\n\r\n  // Final context value\r\n  const contextValue = useMemo(() => ({\r\n    items,\r\n    userItems,\r\n    marketListings,\r\n    marketOffers,\r\n    loading,\r\n    error,\r\n    addItem,\r\n    updateItem,\r\n    deleteItem,\r\n    purchaseItem,\r\n    useItem,\r\n    updateUserItemQuantity,\r\n    listItemForSale,\r\n    buyMarketItem,\r\n    cancelSale,\r\n    makeOffer,\r\n    respondToOffer,\r\n    adminCancelSale,\r\n    adminDeleteItem,\r\n    refreshData,\r\n    updateLocalUserItems,\r\n  }), [\r\n    items, userItems, marketListings, marketOffers, loading, error,\r\n    addItem, updateItem, deleteItem, purchaseItem, useItem, updateUserItemQuantity,\r\n    listItemForSale, buyMarketItem, cancelSale, makeOffer, respondToOffer,\r\n    adminCancelSale, adminDeleteItem, refreshData, updateLocalUserItems\r\n  ]);\r\n\r\n  return (\r\n    <ItemContext.Provider value={contextValue}>\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n","// src/utils/firestoreHelpers.js\r\n//  Firestore : ,  (where __name__ in),  , \r\nimport {\r\n  getDocs,\r\n  query as q,\r\n  limit as qLimit,\r\n  startAfter as qStartAfter,\r\n  where,\r\n  doc,\r\n  getDoc,\r\n  writeBatch,\r\n  runTransaction,\r\n  collection,\r\n  addDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\n// ============================================================\r\n//    ( )  \r\n// ============================================================\r\n\r\n/**\r\n *    \r\n */\r\nexport const ACTIVITY_TYPES = {\r\n  //  \r\n  CASH_INCOME: ' ',\r\n  CASH_EXPENSE: ' ',\r\n  TRANSFER_SEND: ' ',\r\n  TRANSFER_RECEIVE: ' ',\r\n\r\n  //  \r\n  STOCK_BUY: ' ',\r\n  STOCK_SELL: ' ',\r\n\r\n  //  \r\n  ITEM_PURCHASE: ' ',\r\n  ITEM_SELL: ' ',\r\n  ITEM_USE: ' ',\r\n  ITEM_MARKET_LIST: '  ',\r\n  ITEM_MARKET_BUY: '  ',\r\n\r\n  // / \r\n  DEPOSIT_CREATE: ' ',\r\n  DEPOSIT_WITHDRAW: ' ',\r\n  DEPOSIT_MATURITY: ' ',\r\n  LOAN_CREATE: ' ',\r\n  LOAN_REPAY: ' ',\r\n  PARKING_DEPOSIT: ' ',\r\n  PARKING_WITHDRAW: ' ',\r\n  PARKING_INTEREST: ' ',\r\n\r\n  //  \r\n  COUPON_EARN: ' ',\r\n  COUPON_USE: ' ',\r\n  COUPON_GIVE: ' ',\r\n  COUPON_DONATE: ' ',\r\n  COUPON_GIFT_SEND: ' ',\r\n  COUPON_GIFT_RECEIVE: ' ',\r\n\r\n  //  \r\n  GAME_WIN: ' ',\r\n  GAME_LOSE: ' ',\r\n  GAME_REWARD: ' ',\r\n  GAME_BET: ' ',\r\n\r\n  //  \r\n  AUCTION_BID: ' ',\r\n  AUCTION_WIN: ' ',\r\n  AUCTION_SOLD: ' ',\r\n  AUCTION_REFUND: ' ',\r\n\r\n  //  \r\n  REALESTATE_BUY: ' ',\r\n  REALESTATE_SELL: ' ',\r\n  REALESTATE_RENT: ' ',\r\n\r\n  // /\r\n  TAX_PAYMENT: ' ',\r\n  FINE_PAYMENT: ' ',\r\n\r\n  // \r\n  SALARY_RECEIVE: ' ',\r\n\r\n  // \r\n  ADMIN_GIVE: ' ',\r\n  ADMIN_TAKE: ' ',\r\n};\r\n\r\n/**\r\n *   Firestore .\r\n *  []     UI  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {object} params -  \r\n * @param {string} params.classCode -  \r\n * @param {string} params.userId -  ID\r\n * @param {string} params.userName -  \r\n * @param {string} params.type -   (ACTIVITY_TYPES )\r\n * @param {string} params.description -  \r\n * @param {number} [params.amount] -  ( )\r\n * @param {number} [params.couponAmount] -  \r\n * @param {object} [params.metadata] -  \r\n * @returns {Promise<{success: boolean, logId?: string, error?: string}>}\r\n */\r\nexport async function logActivity(dbInstance, {\r\n  classCode,\r\n  userId,\r\n  userName,\r\n  type,\r\n  description,\r\n  amount = 0,\r\n  couponAmount = 0,\r\n  metadata = {}\r\n}) {\r\n  if (!classCode || !userId || !type) {\r\n    console.warn('[logActivity]   :', { classCode, userId, type });\r\n    return { success: false, error: '  ' };\r\n  }\r\n\r\n  // db    import db \r\n  const firestore = dbInstance || db;\r\n\r\n  try {\r\n    //    : activity_logs   \r\n    const logsRef = collection(firestore, 'activity_logs');\r\n    const logData = {\r\n      classCode, //  classCode   (  )\r\n      userId,\r\n      userName: userName || '  ',\r\n      type,\r\n      description: description || type,\r\n      amount: amount || 0,\r\n      couponAmount: couponAmount || 0,\r\n      metadata: {\r\n        ...metadata,\r\n        timestamp: new Date().toISOString(), //   ()\r\n      },\r\n      timestamp: serverTimestamp(),\r\n      createdAt: serverTimestamp(),\r\n    };\r\n\r\n    const docRef = await addDoc(logsRef, logData);\r\n    console.log('[logActivity]   :', type, description);\r\n\r\n    return { success: true, logId: docRef.id };\r\n  } catch (error) {\r\n    console.error('[logActivity]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n *       .\r\n *  []    Firestore  \r\n *\r\n * @param {object} db - Firestore \r\n * @param {string} classCode -  \r\n * @param {Array} logs -  \r\n * @returns {Promise<{success: boolean, count?: number, error?: string}>}\r\n */\r\nexport async function logActivitiesBatch(db, classCode, logs) {\r\n  if (!classCode || !logs || logs.length === 0) {\r\n    return { success: false, error: ' ' };\r\n  }\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n    const logsRef = collection(db, 'classes', classCode, 'activityLogs');\r\n\r\n    logs.forEach((log) => {\r\n      const docRef = doc(logsRef);\r\n      batch.set(docRef, {\r\n        userId: log.userId,\r\n        userName: log.userName || '  ',\r\n        type: log.type,\r\n        description: log.description || log.type,\r\n        amount: log.amount || 0,\r\n        couponAmount: log.couponAmount || 0,\r\n        metadata: log.metadata || {},\r\n        timestamp: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    });\r\n\r\n    await batch.commit();\r\n    console.log('[logActivitiesBatch]   :', logs.length, '');\r\n\r\n    return { success: true, count: logs.length };\r\n  } catch (error) {\r\n    console.error('[logActivitiesBatch]   :', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * startAfter     .\r\n * @param {import('firebase/firestore').Query} baseQuery   orderBy  \r\n * @param {number} pageSize\r\n * @returns {{loadFirst: function(): Promise<{items: any[], lastDoc: any}>, loadMore: function(lastDoc:any): Promise<{items:any[], lastDoc:any}>}}\r\n */\r\nexport function createPaginator(baseQuery, pageSize = 20) {\r\n  if (!baseQuery) throw new Error(\"createPaginator: baseQuery .\");\r\n  if (pageSize <= 0) pageSize = 20;\r\n\r\n  const loadFirst = async () => {\r\n    const pageQ = q(baseQuery, qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const lastDoc = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc };\r\n  };\r\n\r\n  const loadMore = async (last) => {\r\n    if (!last) return { items: [], lastDoc: null };\r\n    const pageQ = q(baseQuery, qStartAfter(last), qLimit(pageSize));\r\n    const snap = await getDocs(pageQ);\r\n    const items = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    const newLast = snap.docs.length ? snap.docs[snap.docs.length - 1] : null;\r\n    return { items, lastDoc: newLast };\r\n  };\r\n\r\n  return { loadFirst, loadMore };\r\n}\r\n\r\n/**\r\n * where(\"__name__\", \"in\", [...])   . Firestore in   10.\r\n * 10      .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} collectionPath\r\n * @param {string[]} ids\r\n * @returns {Promise<Record<string, any>>}  // id -> data\r\n */\r\nexport async function batchGetByIds(db, collectionPath, ids) {\r\n  if (!ids || ids.length === 0) return {};\r\n  const chunks = [];\r\n  for (let i = 0; i < ids.length; i += 10) chunks.push(ids.slice(i, i + 10));\r\n\r\n  const colRef = collection(db, collectionPath);\r\n  const results = await Promise.all(chunks.map(async (chunk) => {\r\n    const snap = await getDocs(q(colRef, where(\"__name__\", \"in\", chunk)));\r\n    return snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n  }));\r\n\r\n  const flat = results.flat();\r\n  const map = {};\r\n  flat.forEach(doc => { map[doc.id] = doc; });\r\n  return map;\r\n}\r\n\r\n/**\r\n *  (: stats/{classCode}) /  \r\n * - (Functions) .   .\r\n * @param {import('firebase/firestore').Firestore} db\r\n * @param {string} statsDocPath  : `stats/${classCode}`\r\n * @param {(prev:any)=>any} reducer        \r\n */\r\nexport async function updateAggregateDoc(db, statsDocPath, reducer) {\r\n  const ref = doc(db, statsDocPath);\r\n  await runTransaction(db, async (tx) => {\r\n    const snap = await tx.get(ref);\r\n    const prev = snap.exists() ? snap.data() : {};\r\n    const next = reducer(prev || {});\r\n    tx.set(ref, next, { merge: true });\r\n  });\r\n}\r\n"],"names":["LoginWarning","_jsxs","className","children","_jsx","POLLING_INTERVALS","REALTIME","NORMAL","LOW","MANUAL","globalInitialLoadQueue","isProcessingQueue","usePolling","queryFn","options","arguments","length","undefined","interval","enabled","deps","data","setData","useState","loading","setLoading","error","setError","intervalRef","useRef","mountedRef","queryFnRef","useEffect","current","fetchData","useCallback","async","result","err","console","refetch","clearInterval","push","fetchFn","shift","Promise","resolve","setTimeout","processInitialLoadQueue","setInterval","modalBackdropStyle","position","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","modalContainerStyle","padding","borderRadius","maxWidth","width","maxHeight","overflowY","boxShadow","memo","_ref","showSellCouponModal","setShowSellCouponModal","currentCoupons","couponValue","sellAmount","setSellAmount","SellCoupon","isProcessing","setIsProcessing","handleCancel","isInvalidAmount","isNaN","parseInt","style","onClick","e","stopPropagation","fontSize","fontWeight","marginBottom","color","toLocaleString","onSubmit","preventDefault","amount","message","htmlFor","id","type","value","onChange","target","min","max","border","outline","disabled","required","margin","borderLeft","calculateValue","gap","marginTop","cursor","transition","opacity","showGiftCouponModal","setShowGiftCouponModal","recipients","giftRecipient","setGiftRecipient","giftAmount","setGiftAmount","handleGiftCoupon","userId","validRecipients","closeModal","filter","recipient","map","name","placeholder","_studentDonationSumma","showDonationHistoryModal","setShowDonationHistoryModal","students","classCode","donations","user","userDoc","useAuth","uid","userClassCode","studentDonationSummary","setStudentDonationSummary","totalDonationForThisClassGoal","setTotalDonationForThisClassGoal","modalOverlayStyle","tableStyles","table","borderCollapse","overflow","thead","th","textAlign","borderBottom","td","tr","emptyContainer","flexDirection","emptyIcon","processDonationData","log","studentsCount","donationsCount","s","nickname","classDonations","validStudents","Array","isArray","donationsByStudent","currentClassGoalTotal","forEach","donation","Number","donorId","donorName","userName","totalAmount","uniqueDonors","Object","keys","allStudentIds","Set","student","studentId","add","studentInfoMap","Map","studentName","set","has","summary","from","_donationsByStudent$s","get","cumulativeAmount","isCurrentUser","sort","a","b","localeCompare","totalStudents","studentsWithDonations","handleClose","formatAmount","myTotalDonation","find","marginLeft","background","lineHeight","_Fragment","_objectSpread","index","onMouseOver","currentTarget","onMouseOut","verticalAlign","borderTop","showDonateModal","setShowDonateModal","onDonate","donateAmount","setDonateAmount","donateMessage","setDonateMessage","isDonating","setIsDonating","resize","minHeight","alert","formatKoreanNumber","number","unit","num","replace","trim","parseFloat","isNegative","units","resultParts","remaining","Math","abs","quotient","floor","concat","maximumFractionDigits","join","formatKoreanCurrency","normalizeType","cache","getCacheKey","JSON","stringify","getFromCache","key","cached","Date","now","timestamp","delete","setCache","getActivityLogs","startDate","endDate","limitCount","lastDoc","cacheKey","constraints","where","startTimestamp","Timestamp","fromDate","endTimestamp","useServerTypeFilter","orderBy","limit","q","query","collection","db","snapshot","getDocs","logs","doc","_data$timestamp","toDate","normalizedFilterType","hasMore","paginatedLogs","slice","newLastDoc","AdminDatabase","allClassMembers","selectedUser","setSelectedUser","activityData","setActivityData","setHasMore","setLastDoc","debugInfo","setDebugInfo","searchTerm","setSearchTerm","activityTypeFilter","setActivityTypeFilter","loadData","refresh","lastDocForPagination","isFiltered","useCache","userIds","m","transactions","userIdsCount","warn","batches","i","allTransactions","batch","_data$timestamp3","getTransactionsData","tx","description","includes","metadata","category","convertTransactionsToLogs","prev","handleLoadMore","getActivityTypeColor","typeStr","toString","toLowerCase","formatDate","date","year","month","day","hour","minute","filteredActivityData","_log$description3","_log$userName","_log$type6","term","_log$type7","_log$description4","logType","logDesc","some","member","handleRefresh","keysToDelete","startsWith","clearClassCache","info","typeCounts","typeExamples","entries","count","filters","_log$type","_log$description","desc","t","_log$type2","_log$description2","_log$type3","_log$type4","_log$type5","_ref2","filterName","filterFunc","matchedLogs","matchedTypes","size","debugText","couponCount","_log$type8","_log$description5","itemCount","_log$type9","_log$description6","cashCount","_log$type0","stockCount","_log$type1","gameCount","_log$type10","title","activity","reason","itemName","quantity","couponAmount","PageContainer","PageHeader","subtitle","icon","Icon","badge","action","backButton","LoadingState","_ref4","EmptyState","_ref6","ActionButton","_ref1","variant","primary","secondary","danger","success","ghost","indigo","sm","md","lg","Loader2","AppIcon","viewBox","fill","xmlns","x1","y1","x2","y2","gradientUnits","offset","stopColor","x","y","height","stdDeviation","in","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ALCHAN_MENU_ITEMS","label","LayoutDashboard","path","Wallet","Target","Gamepad2","isCategory","Circle","parentId","Keyboard","Crown","Package","Boxes","Store","ShoppingBag","TrendingUp","Banknote","BarChart3","Hammer","Building2","Landmark","Users","Scale","Shield","FileText","BookOpen","Music","Settings","adminOnly","isSubGroup","ListTodo","Briefcase","superAdminOnly","CATEGORY_LABELS","main","play","economy","society","community","admin","superadmin","MenuSection","MenuItem","_ref3","active","hasSubmenu","ChevronDown","SubMenuItem","CategoryItem","_ref5","isExpanded","onToggle","hasActiveChild","AlchanSidebar","isOpen","onClose","isCollapsed","location","useLocation","navigate","useNavigate","logout","expandedCategories","setExpandedCategories","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","isActive","pathname","categoryId","item","handleItemClick","isAdmin","isSuperAdmin","userRole","renderMenuSection","categoryKey","items","childItems","child","toggleCategory","charAt","fontFamily","textShadow","letterSpacing","transform","X","LogOut","Sparkles","Check","isDarkMode","toggleDarkMode","setFontSize","useTheme","resetTutorial","showTutorial","setShowTutorial","tutorialRef","tutorialDoc","getDoc","exists","completed","checkTutorial","completeTutorial","setDoc","completedAt","serverTimestamp","skipTutorial","skipped","skippedAt","useTutorial","notifications","setNotifications","localStorage","getItem","sounds","setSounds","Moon","Sun","Type","FONT_SIZES","Bell","handleNotificationToggle","newValue","setItem","String","Volume2","handleSoundToggle","handleResetTutorial","confirm","HelpCircle","ChevronRight","Smartphone","SKIN_TONES","FACE_SHAPES","EYE_STYLES","leftX","rightX","shape","EYE_COLORS","MOUTH_STYLES","ALL_FACES","HAIRSTYLES","paths","compatibleFaces","bangsPath","HAIR_COLORS","gradient","OUTFITS","baseColor","sleeves","tie","lapels","hood","pocket","collar","buttons","OUTFIT_COLORS","ACCESSORIES","BACKGROUNDS","stars","BORDERS","glow","animated","glowColor","EXPRESSIONS","eyeMod","mouthMod","DEFAULT_AVATAR","skinTone","faceShape","eyeStyle","eyeColor","mouthStyle","hairstyle","hairColor","outfit","outfitColor","accessory","expression","getAvatarConfig","saved","parse","_unused","getAvatarOptions","isHairstyleCompatible","hairstyleId","faceShapeId","h","AVATAR_CATEGORIES","darkenColor","hex","percent","r","g","padStart","Avatar","config","showBorder","avatarConfig","f","o","noseColor","borderStyle","getHairFill","preserveAspectRatio","idx","dx","dy","floodOpacity","cx","cy","earPositions","round","oval","square","heart","long","earPos","ry","p","viewBoxY","viewBoxHeight","LEVEL_THRESHOLDS","level","minAssets","getLevelInfo","netAssets","assets","currentLevelData","nextLevelIndex","findIndex","l","nextLevel","progress","currentMin","nextMin","currentAssets","assetsToNextLevel","ACHIEVEMENTS","FIRST_THOUSAND","condition","stats","totalAssets","rarity","points","FIRST_TEN_THOUSAND","HUNDRED_THOUSAND","MILLIONAIRE","MULTI_MILLIONAIRE","COUPON_COLLECTOR","coupons","COUPON_MASTER","COUPON_HOARDER","FIRST_TRADE","totalTransactions","ACTIVE_TRADER","TRADING_EXPERT","GENEROUS_HEART","totalDonations","PHILANTHROPIST","DONATION_KING","SAVER_BEGINNER","savingProducts","SMART_SAVER","FIRST_PROPERTY","properties","REAL_ESTATE_INVESTOR","PROPERTY_TYCOON","PERFECT_ATTENDANCE","loginStreak","MONTHLY_STREAK","EARLY_BIRD","getAchievementById","achievementId","values","getUserAchievements","stored","formatMoney","ok","man","Intl","NumberFormat","format","Modal","toggleSidebar","isSidebarCollapsed","onToggleSidebarCollapse","updateUser","changePassword","deleteCurrentUserAccount","loginWithEmailPassword","showUserMenu","setShowUserMenu","isLoading","setIsLoading","userMenuRef","activeModal","setActiveModal","showSettings","setShowSettings","newNickname","setNewNickname","nicknameError","setNicknameError","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","passwordError","setPasswordError","passwordSuccess","setPasswordSuccess","newClassCodeInput","setNewClassCodeInput","classCodeError","setClassCodeError","classCodeSuccess","setClassCodeSuccess","isCurrentUserAdmin","role","displayName","setAvatarConfig","handleAvatarChange","detail","levelInfo","useMemo","cash","stockValue","realEstateValue","itemValue","bestAchievement","achievements","rarityOrder","legendary","epic","rare","common","sorted","achA","achB","handleClickOutside","event","contains","document","Gift","ChevronLeft","whiteSpace","onMouseEnter","onMouseLeave","ref","paddingLeft","User","handleChangeNickname","handleChangePassword","Key","handleEnterClassCode","prompt","password","email","Trash2","maxLength","autoFocus","trimmed","code","toUpperCase","verifyClassCode","SettingsPanel","tabs","Home","MobileNav","tab","isTabActive","handleTabClick","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isIOS","setIsIOS","isInstalled","setIsInstalled","isIOSDevice","test","navigator","userAgent","MSStream","matchMedia","matches","dismissed","dismissedTime","handleBeforeInstall","handleDismiss","Share","Plus","outcome","userChoice","Download","UpdateNotification","onUpdate","onDismiss","RefreshCw","useServiceWorker","registration","setRegistration","updateAvailable","setUpdateAvailable","isOnline","setIsOnline","onLine","handleOnline","handleOffline","registerServiceWorker","updateIntervalId","setUpdateIntervalId","reg","serviceWorker","register","scope","newWorker","installing","state","controller","lastUpdated","sessionStorage","intervalId","update","updateServiceWorker","waiting","reload","postMessage","requestNotificationPermission","Notification","permission","requestPermission","showNotification","vibrate","TaskItem","task","onEarnCoupon","isJobTask","onEditTask","onDeleteTask","taskId","jobId","showBubble","setShowBubble","bubbleText","setBubbleText","showCardModal","setShowCardModal","rewardData","setRewardData","selectedCard","setSelectedCard","isFlipping","setIsFlipping","handleCardSelect","cardType","reward","coupon","rewardText","timer","clearTimeout","isCompleted","maxClicks","clicks","taskItemStyle","taskInfoStyle","flexGrow","minWidth","taskNameStyle","textOverflow","flex","taskActionsStyle","flexShrink","couponStyle","handleInternalClick","taskName","rewards","generateJobTaskReward","weightedRandom","totalWeight","reduce","sum","weight","random","adminButtonStyles","bubbleStyle","bubbleTailStyle","renderCardModal","mobileModalContentStyle","modalContentStyle","mobileModalTitleStyle","modalTitleStyle","mobileModalSubtitleStyle","modalSubtitleStyle","mobileCardsContainerStyle","cardsContainerStyle","mobileCardStyle","cardStyle","mobileCardIconStyle","cardIconStyle","mobileCardTextStyle","cardTextStyle","mobileRewardAmountStyle","rewardAmountStyle","mobileRewardLabelStyle","rewardLabelStyle","createPortal","selectedCardStyle","cardInnerStyle","cardFrontStyle","cardBackStyle","cardBackVisibleStyle","body","pointerEvents","content","borderWidth","borderColor","animation","flexWrap","perspective","transformStyle","backfaceVisibility","JobList","job","onEditJob","onDeleteJob","onAddTask","addJobTaskButtonStyle","backdropFilter","marginRight","tasks","CommonTaskList","gridTemplateColumns","TransferModal","showTransferModal","setShowTransferModal","transferRecipient","setTransferRecipient","transferAmount","setTransferAmount","handleTransfer","userCash","inputStyle","selectStyle","labelStyle","buttonStyle","primaryButtonStyle","secondaryButtonStyle","nameA","substring","nameB","paddingTop","createOptimizedFunction","functionName","fn","httpsCallable","functions","Error","optimizedFirebaseService","getAdminSettingsData","batchPaySalaries","getItemContextData","queryKeys","adminSettings","systemManagement","realtimeOptimizer","shouldUseRealtime","hidden","localBackup","save","maxAge","backup","parsed","removeItem","systemStatus","setSystemStatus","autoRefresh","setAutoRefresh","lastUpdate","setLastUpdate","errorCount","setErrorCount","getSystemStatus","resolveSystemAlert","fetchSystemStatus","handleResolveAlert","alertId","checked","toLocaleTimeString","health","totalUsers","lastMinute","reads","writes","errors","errorRate","toFixed","avgResponseTime","anomalies","anomaly","severity","alerts","_alert$timestamp","_alert$timestamp2","alertTime","seconds","errorLogs","_log$timestamp","_log$timestamp2","logTime","last5Minutes","initialStocks","price","history","_jobs$find","showAdminSettingsModal","setShowAdminSettingsModal","adminSelectedMenu","setAdminSelectedMenu","newGoalAmount","setNewGoalAmount","adminCouponValue","setAdminCouponValue","handleSaveAdminSettings","jobs","adminNewJobTitle","setAdminNewJobTitle","adminEditingJob","setAdminEditingJob","handleSaveJob","handleDeleteJob","handleEditJob","commonTasks","showAddTaskForm","setShowAddTaskForm","adminNewTaskName","setAdminNewTaskName","adminNewTaskReward","setAdminNewTaskReward","adminNewTaskMaxClicks","setAdminNewTaskMaxClicks","adminEditingTask","setAdminEditingTask","handleSaveTask","handleEditTask","handleDeleteTask","taskFormJobId","taskFormIsJobTask","handleAddTaskClick","classCodes","onAddClassCode","onRemoveClassCode","newClassCode","setNewClassCode","classCodeOperationLoading","setClassCodeOperationLoading","classMembers","setClassMembers","membersLoading","setMembersLoading","showEditStudentJobsModal","setShowEditStudentJobsModal","selectedStudent","setSelectedStudent","tempSelectedJobIds","setTempSelectedJobIds","setStudents","studentsLoading","setStudentsLoading","appLoading","setAppLoading","isPayingSalary","setIsPayingSalary","lastSalaryPaidDate","setLastSalaryPaidDate","selectedStudentIds","setSelectedStudentIds","selectAllStudents","setSelectAllStudents","depositProducts","setDepositProducts","setSavingProducts","loanProducts","setLoanProducts","newProductName","setNewProductName","newProductPeriod","setNewProductPeriod","newProductRate","setNewProductRate","financialSubTab","setFinancialSubTab","financialMessage","setFinancialMessage","marketStatus","setMarketStatus","marketMessage","setMarketMessage","isMarketDataLoaded","setIsMarketDataLoaded","marketStatusCache","parkingInterestRate","setParkingInterestRate","newInterestRate","setNewInterestRate","parkingMessage","setParkingMessage","toggleMarketManually","salarySettings","setSalarySettings","taxRate","salaryIncreaseRate","tempTaxRate","setTempTaxRate","tempSalaryIncreaseRate","setTempSalaryIncreaseRate","salarySettingsLoading","setSalarySettingsLoading","studentsQuery","useOptimizedStudents","useQuery","queryKey","staleTime","cacheTime","salarySettingsQuery","useOptimizedSalarySettings","batchPaySalariesMutation","useOptimizedSystemManagement","backupKey","retry","failureCount","refetchInterval","useOptimizedAdminSettings","useBatchPaySalaries","queryClient","useQueryClient","useMutation","mutationFn","studentIds","payAll","onSuccess","invalidateQueries","onError","preloadAdminData","useAdminDataPreloader","preloadPromises","prefetchQuery","allSettled","loadSalarySettings","classSettingsRef","firebaseDoc","settingsSnap","firebaseGetSingleDoc","settings","lastPaidDate","firebaseSetDoc","createdAt","updatedAt","handleSaveSalarySettings","taxRateNum","increaseRateNum","newSettings","firebaseUpdateDoc","calculateSalary","selectedJobIds","includesTax","gross","tax","net","grossSalary","handleJobEdit","handleJobDelete","handleTaskEdit","handleTaskDelete","handleTaskAdd","loadStudents","studentsList","classStudentsRef","firebaseCollection","firebaseGetDocs","userData","money","lastSalaryDate","lastGrossSalary","lastTaxAmount","lastNetSalary","totalSalaryReceived","classError","usersRef","queryRef","firebaseQuery","firebaseWhere","settingsDoc","settingsError","loadClassMembers","querySnapshot","usersList","adminResetUserPassword","handleResetPassword","toggleAdminStatus","currentStatus","userRef","prevMembers","loadFinancialProducts","savedDeposit","savedSaving","savedLoan","handleAddProduct","text","newProduct","period","rate","typeText","updatedProducts","storageKey","handleDeleteProduct","fetchMarketStatus","marketStatusRef","docSnap","statusData","handleMarketControl","actionText","newIsOpenState","optimisticStatus","handleInitializeStocks","writeBatch","stock","stockRef","commit","loadParkingRate","savedRate","handleParkingRateChange","handleAddClassCode","codeToAdd","handleRemoveClassCode","codeToRemove","formatLastSalaryDate","getFullYear","getMonth","getDate","getHours","getMinutes","j","_studentsQuery$data","_salarySettingsQuery$2","currentStudents","currentSalarySettings","mutateAsync","totalStudentsPaid","totalGrossPaid","totalTaxDeducted","totalNetPaid","_salarySettingsQuery$","handleToggleSelectAll","salaryCalc","handleToggleStudentSelection","Boolean","toLocaleDateString","handleEditStudentJobs","step","products","product","SystemMonitoring","handleToggleJobSelection","prevStudents","STREAK_REWARDS","STREAK_BONUS_AFTER_10","getStreakInfo","today","toDateString","lastLogin","yesterday","isNewDay","canClaim","streak","totalClaimed","streakBroken","getRewardForDay","_STREAK_REWARDS","DailyRewardBanner","_rewardResult$reward","onClaim","streakInfo","setStreakInfo","claimed","setClaimed","rewardResult","setRewardResult","isVisible","setIsVisible","nextDay","nextReward","isBigReward","newStreak","isMilestone","handleClaim","toISOString","newData","claimDailyReward","StreakDisplay","currentStreak","StreakRewardInfo","CACHE_TTL","JOBS","TASKS","SETTINGS","GOALS","CLASS_CODES","dataCache","globalCacheService","ttl","invalidate","clear","clearAll","batchManager","constructor","this","pendingWrites","batchTimeout","BATCH_DELAY","MAX_BATCH_SIZE","addWrite","operation","executeBatch","scheduleBatch","operations","RealtimeManager","listeners","addListener","unsubscribe","removeListener","removeAllListeners","SelectMultipleJobsView","availableJobs","currentSelectedJobIds","onConfirmSelection","onCancel","tempSelection","setTempSelection","activeJobs","handleCheckboxChange","adminTabMode","setUserDoc","authLoading","refreshUserDocument","optimisticUpdate","realtimeManager","lastFetchTime","fetchPromise","viewMode","setViewMode","setJobs","setCommonTasks","editingJob","setEditingJob","editingTask","setEditingTask","currentJobIdForTask","setCurrentJobIdForTask","isJobTaskForForm","setIsJobTaskForForm","showDailyRewardPopup","setShowDailyRewardPopup","isHandlingTask","setIsHandlingTask","classCouponGoal","setClassCouponGoal","setCouponValue","adminCouponValueInput","setAdminCouponValueInput","adminGoalAmountInput","setAdminGoalAmountInput","setClassCodes","handleDailyRewardClaim","rewardAmount","updateDoc","increment","currentGoalId","currentSelectedJobIdsFromUserDoc","jobsToShow","completedJobTasks","commonTasksWithUserProgress","userCompletedTasks","completedTasks","generateId","firestoreCollection","substr","setupPolling","pollData","jobsQuery","loadedJobs","docs","_a$updatedAt","_a$updatedAt$toMillis","_b$updatedAt","_b$updatedAt$toMillis","timeA","toMillis","call","tasksQuery","loadedCommonTasks","_a$updatedAt2","_a$updatedAt2$toMilli","_b$updatedAt2","_b$updatedAt2$toMilli","loadCachedData","jobsCache","tasksCache","settingsCache","hasJobsCache","hasTasksCache","hasSettingsCache","loadTasksData","forceRefresh","cacheStatus","promises","then","snap","all","newCouponValue","targetAmount","validCodes","refreshInProgressRef","refreshTasksAfterReset","dateCheckExecutedRef","lastCheckedDateRef","checkDateAndRefresh","lastResetDate","dateCheckInterval","jobRef","newJobId","_userDoc$selectedJobI","jobIdToDelete","updatedSelectedIds","jobToEdit","taskToEdit","taskData","jobSnap","jobTasks","taskIndex","updatedTasks","taskRef","newTaskId","newTaskDataWithId","arrayUnion","newTaskRef","taskIdToDelete","handleSelectJobClick","handleConfirmJobSelection","idsToSave","newlySelectedJobIds","handleCancelForm","handleTaskEarnCoupon","_jobs$find$tasks","taskKey","currentClicks","jobTask","commonTask","expectedCashReward","expectedCouponReward","prevUserDoc","optimisticCash","optimisticCoupons","prevDoc","_prevDoc$completedTas","completeTaskFunction","resultData","newCash","updatedCash","newCoupons","updatedCoupons","handleOpenAdminSettings","tabName","newGoal","settingsRef","goalRef","merge","goalError","loadClassCodes","codeRef","codeDoc","codes","trimmedCode","codeSnap","currentValidCodes","updatedCodes","handleForceRefresh","handleManualTaskReset","manualResetClassTasks","userNickname","RotateCcw","AdminSettingsModal","StockBadge","badgeClass","ItemStore","purchaseItem","deleteItem","updateItem","addItem","setAdminPriceIncrease","adminPriceIncreasePercentage","useItems","shopItems","setShopItems","notification","setNotification","showAdminPanel","setShowAdminPanel","editingItem","setEditingItem","showDeleteConfirm","setShowDeleteConfirm","itemToDelete","setItemToDelete","priceIncreasePercentage","setPriceIncreasePercentage","purchaseQuantities","setPurchaseQuantities","currentUserClassCode","availableItems","_item$initialStock","initialStock","available","initialQuantities","checkMobile","getButtonText","currentUserCash","totalPrice","canOpenAdminPanel","AdminItemPage","editingItemFromStore","onAddItem","newItemData","onUpdateItem","itemId","updatedItemData","updatesToApply","_objectWithoutProperties","_excluded","_item$price","handleQuantityChange","purchaseResult","handlePurchase","handleEditItem","handleDeleteConfirm","ITEM_DEFAULT_DURATION_MS","formatTimeLeft","usedTimestamp","timeLeft","hours","minutes","formatted","QuantityBadge","MyItems","users","classmates","userItems","useItem","listItemForSale","refreshData","updateLocalUserItems","groupedUserItems","itemsMap","existingGroup","totalQuantity","sourceDocs","displayInfo","durationMs","recentlyUsedItems","setRecentlyUsedItems","prevItems","itemsChanged","updatedItems","_itemData$itemDetails","itemData","duration","itemDetails","useItemModal","setUseItemModal","giftModal","setGiftModal","giftRecipientUid","setGiftRecipientUid","giftQuantity","setGiftQuantity","isGifting","setIsGifting","isSyncing","setIsSyncing","sellToMarketModal","setSellToMarketModal","handleCloseUseItemModal","handleCloseGiftModal","handleCloseSellToMarketModal","itemToGift","handleRemoveUsedItem","group","handleOpenUseItemModal","handleOpenGiftModal","defaultPrice","handleOpenSellToMarketModal","quantityToUse","remainingToUse","results","sortedDocs","amountToUse","classmate","c","recipientName","originalUserItems","","","","","UID","inventoryRef","allInventoryDocs","actualDocs","itemIdGroups","docIds","actualSourceDocs","actualTotalQuantity","docId","docRef","","","","recipientInventoryRef","recipientQuery","recipientQuerySnapshot","recipientExistingDocRef","empty","","","updatedUserItems","remainingToDeduct","deductAmount","newQuantity","runTransaction","senderItemSnaps","senderDoc","senderItemRef","senderItemSnap","transaction","currentQuantity","recipientItemRef","recipientCurrentQuantity","recipientSnap","ID","","remainingToSend","processedAmount","amountFromThisDoc","newSenderQty","","","","","","","","newRecipientItemRef","receivedAt","syncError","_sellToMarketModal$it","maxQty","newQty","handleSellToMarketQuantityChange","newPrice","handleSellToMarketPriceChange","","","remainingToSell","itemsToProcess","amountToSell","updateFields","itemRef","assign","catch","React","MyAssets","updateUserInAuth","addCashToUserById","deductCash","assetsLoading","setAssetsLoading","loadingRef","parkingBalance","setParkingBalance","deposits","setDeposits","savings","setSavings","loans","setLoans","realEstateAssets","setRealEstateAssets","totalNetAssets","setTotalNetAssets","goalDonations","setGoalDonations","transactionHistory","setTransactionHistory","forceReload","setForceReload","CACHE_DURATION","settingsData","loadCouponValueFromSettings","goalProgress","setGoalProgress","myContribution","setMyContribution","goalAchieved","setGoalAchieved","isResettingGoal","setIsResettingGoal","showAllTransactions","setShowAllTransactions","getCachedFirestoreData","setCachedFirestoreData","cacheItem","createDefaultGoalForClass","goalId","goalDocRef","defaultGoalData","donationCount","createdBy","goalDoc","existingData","loadGoalData","cachedData","myTotal","goalDocSnap","goalData","processedTimestamp","timestampISO","loadMyAssetsData","realEstateRef1","realEstateRef2","realEstateRef3","snap1","snap2","snap3","allRealEstateAssets","parkingRef1","parkingRef2","parkingSnap1","parkingSnap2","totalParkingBalance","balance","productsRef","productsSnap","depositsData","savingsData","loansData","_docSnap$data$maturit","maturityDate","transactionsData","activityLogsRef","source","activityError","transactionsRef","transactionsError","_a$timestamp","_a$timestamp2","_b$timestamp","_b$timestamp2","dateA","fallbackError","cashValue","couponMonetaryValue","asset","depositsTotal","deposit","savingsTotal","saving","loanTotal","loan","remainingPrincipal","calculatedTotalAssets","AlchanLoading","paddingBottom","logActivity","rewardType","renderAssetSummary","displayCash","displayCoupons","displayedTransactions","displayDate","getTime","safeTimestampToDate","dateError","txAmount","txDescription","recipientUser","u","ACTIVITY_TYPES","TRANSFER_SEND","recipientId","TRANSFER_RECEIVE","senderId","senderName","SHOP_CATEGORIES","PRODUCT_TYPES","ShopModal","shop","onSave","formData","setFormData","shopName","cat","rows","ProductModal","shopId","taxAmount","_product$price","productData","PurchaseModal","onConfirm","setQuantity","maxQuantity","ShopCard","ownerName","totalSales","ProductCard","onBuy","isOwner","onEdit","onDelete","PersonalShop","currentUser","userProfile","refreshBalance","activeTab","setActiveTab","shops","setShops","myShop","setMyShop","myProducts","setMyProducts","selectedShop","setSelectedShop","selectedShopProducts","setSelectedShopProducts","showShopModal","setShowShopModal","showProductModal","setShowProductModal","editingProduct","setEditingProduct","purchaseProduct","setPurchaseProduct","purchaseShop","setPurchaseShop","loadingProducts","setLoadingProducts","categoryFilter","setCategoryFilter","searchQuery","setSearchQuery","loadShops","shopsRef","shopsData","loadMyShop","shopData","pq","pSnapshot","loadShopProducts","deleteDoc","filteredShops","renderTabContent","_SHOP_CATEGORIES$find","_SHOP_CATEGORIES$find2","_SHOP_CATEGORIES$find3","totalTaxPaid","addDoc","ownerId","status","soldCount","sellerAmount","buyerRef","sellerRef","taxRef","totalVAT","totalTaxCollected","shopRef","productRef","updates","activityRef","buyerId","buyerName","sellerId","sellerName","productId","productName","productType","unitPrice","getTeacherAccount","teacherDoc","styles","container","grid","card","cardHeader","cardTitle","tabContainer","tabButton","button","noProduct","fontStyle","input","modalOverlay","modalContent","modalTitle","modalCloseBtn","formatCurrency","calculateCompoundInterest","principal","dailyRate","days","interest","total","pow","calculateDailyInterest","ICON_MAP","parking","PiggyBank","HandCoins","SubscribedProductItem","onMaturity","isMatured","daysRemaining","differenceInDays","termInDays","dailyInterestAmount","AvailableProductItem","onSubscribe","projectedInterest","ProductSection","subscribedProducts","availableProducts","SubscriptionModal","setAmount","numAmount","projectedTotal","minAmount","ParkingAccountSection","dailyInterest","onDeposit","onWithdraw","auth","installmentProducts","activeView","onViewChange","onLoadUserProducts","allUserProducts","onDeleteUserProduct","addCash","setMessage","messageType","setMessageType","parkingDailyInterest","setParkingDailyInterest","userDeposits","setUserDeposits","userSavings","setUserSavings","userLoans","setUserLoans","modal","setModal","currentCash","setCurrentCash","displayMessage","loadAllData","parkingRef","parkingRateProduct","parkingDoc","_data$lastInterestDat","lastInterestDate","isToday","daysToApply","finalParkingDoc","handleOpenModal","handleCloseModal","handleMaturity","teacherId","isLoan","confirmMsg","teacherAccountId","teacherAccount","_userSnapshot$data$ca2","_userSnapshot$data2","_teacherSnapshot$data3","_teacherSnapshot$data4","teacherRef","userSnapshot","teacherSnapshot","currentCashInDb","teacherCashInDb","successMsg","activityType","LOAN_REPAY","DEPOSIT_MATURITY","handleCancelEarly","confirmMessage","originalProducts","originalCash","cashChangeAmount","_userSnapshot$data$ca3","_userSnapshot$data3","_teacherSnapshot$data5","_teacherSnapshot$data6","DEPOSIT_WITHDRAW","isEarlyCancellation","handleAdminDeleteSubscribedProduct","overflowX","typeLabel","amountStr","previousParkingBalance","previousCurrentCash","PARKING_DEPOSIT","_parkingSnapshot$data","_parkingSnapshot$data2","PARKING_WITHDRAW","onAdminDelete","subscribeAmount","maxAmount","tempId","optimisticProduct","isOptimistic","_userSnapshot$data$ca","_userSnapshot$data","_teacherSnapshot$data","_teacherSnapshot$data2","newProductData","teacherName","newProductRef","DEPOSIT_CREATE","LOAN_CREATE","convertAdminProductsToAccountFormat","adminProducts","Banking","_auth$userDoc8","_auth$userDoc1","_auth$userDoc10","_auth$userDoc11","_auth$userDoc12","setActiveView","parkingDepositProducts","setParkingDepositProducts","parkingInstallmentProducts","setParkingInstallmentProducts","parkingLoanProducts","setParkingLoanProducts","setAllUserProducts","loadAllUserProducts","_auth$userDoc","_auth$userDoc2","_auth$userDoc3","usersQuery","usersSnapshot","userMap","allProducts","productPromises","productsQuery","productDoc","_productData$maturity","firestoreId","productsArray","formattedDepositProducts","setFormattedDepositProducts","formattedInstallmentProducts","setFormattedInstallmentProducts","formattedLoanProducts","setFormattedLoanProducts","_auth$userDoc7","_auth$userDoc6","bankingData","getBankingProducts","setParkingSavingsProducts","handleParkingProductChange","field","productsState","setProductsState","updatedProduct","numValue","dailyRateValue","saveParkingProducts","_auth$userDoc9","firestoreType","updateBankingProducts","addParkingProduct","deleteParkingProduct","indexToDelete","_auth$userDoc0","_","ParkingAccount","_auth$userDoc4","_auth$userDoc5","AvatarEditor","setConfig","selectedCategory","setSelectedCategory","hasChanges","setHasChanges","savedConfig","currentOptions","handleRandomize","randomConfig","randomIndex","WebkitOverflowScrolling","scrollbarWidth","msOverflowStyle","option","isSelected","isIncompatible","optionId","newConfig","handleOptionSelect","handleReset","handleSave","dispatchEvent","CustomEvent","_unused2","saveAvatarConfig","MyProfile","_LEVEL_THRESHOLDS","showAvatarEditor","setShowAvatarEditor","setAchievements","showNicknameModal","setShowNicknameModal","showPasswordModal","setShowPasswordModal","showClassCodeModal","setShowClassCodeModal","showDeleteModal","setShowDeleteModal","deleteConfirmText","setDeleteConfirmText","resetModals","sortedAchievements","WebkitBackgroundClip","WebkitTextFillColor","ach","achievement","rarityColors","bg","colors","unlockedAt","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","textTransform","deleteUser","GonuGame","lazy","OmokGame","ChessGame","TypingPracticeGame","AdminPage","AdminPanel","FirestoreDoctor","RecoverDonations","StudentManager","SuperAdminDashboard","LearningBoard","MusicRequest","MusicRoom","StudentRequest","StockExchange","RealEstateRegistry","NationalAssembly","Government","Court","PoliceStation","Auction","MoneyTransfer","CouponTransfer","CouponGoalPage","FULLSCREEN_PAGES","AlchanLoadingScreen","ProtectedRoute","Navigate","to","AdminRoute","TeacherRoute","isTeacher","SuperAdminRoute","AlchanLayout","isSidebarOpen","setIsSidebarOpen","setIsSidebarCollapsed","showUpdateDismissed","setShowUpdateDismissed","link","createElement","href","rel","head","appendChild","removeChild","page","mobile","closeSidebar","toggleSidebarCollapse","Login","ItemProvider","AlchanHeader","Suspense","fallback","Routes","Route","element","Dashboard","WifiOff","iconCollection","header","disabledTab","formSection","formTitle","inputGroup","boxSizing","textarea","gridTwo","iconSelector","selectedIcon","primaryButton","secondaryButton","iconGrid","iconButton","categoryButtons","categoryButton","activeCategoryButton","priceIncreaseSection","helpText","checkboxWrapper","checkbox","buttonGroup","showIconPicker","setShowIconPicker","handleChange","isEditing","handleIconSelect","ItemContext","createContext","context","useContext","marketListings","marketOffers","updateUserItemQuantity","buyMarketItem","cancelSale","makeOffer","respondToOffer","adminCancelSale","adminDeleteItem","isAuthAdmin","setItems","setUserItems","setMarketListings","setMarketOffers","dataLoading","setDataLoading","firebaseFunctions","addStoreItem","updateStoreItem","deleteStoreItem","purchaseStoreItem","useUserItem","listUserItemForSale","cancelMarketSale","storeItems","newUserItems","tempNewItem","token","getIdToken","functionUrl","response","fetch","method","headers","errorText","json","itemToPurchase","newUserItem","purchasedAt","originalStock","originalPrice","existingIndex","updated","restocked","newStock","oldPrice","oldStock","ITEM_PURCHASE","pricePerItem","inventoryItemId","itemToUse","sourceCollection","ITEM_USE","itemToSell","ITEM_MARKET_LIST","itemToBuy","listingId","itemPrice","itemType","originalMarketListings","ITEM_MARKET_BUY","offerPrice","offerId","quantityChange","contextValue","Provider","CASH_INCOME","CASH_EXPENSE","STOCK_BUY","STOCK_SELL","ITEM_SELL","PARKING_INTEREST","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_DONATE","COUPON_GIFT_SEND","COUPON_GIFT_RECEIVE","GAME_WIN","GAME_LOSE","GAME_REWARD","GAME_BET","AUCTION_BID","AUCTION_WIN","AUCTION_SOLD","AUCTION_REFUND","REALESTATE_BUY","REALESTATE_SELL","REALESTATE_RENT","TAX_PAYMENT","FINE_PAYMENT","SALARY_RECEIVE","ADMIN_GIVE","ADMIN_TAKE","dbInstance","firestore","logsRef","logData","logId"],"sourceRoot":""}