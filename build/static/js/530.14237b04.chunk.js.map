{"version":3,"file":"static/js/530.14237b04.chunk.js","mappings":"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","sources":["pages/banking/ParkingAccount.js","pages/banking/Banking.js"],"sourcesContent":["// src/ParkingAccount.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { db, doc, getDoc, setDoc, serverTimestamp, updateDoc, increment, runTransaction, collection, getDocs, deleteDoc, query, where, limit } from \"../../firebase\";\r\nimport { format, isToday, differenceInDays, isPast } from 'date-fns';\r\nimport { PiggyBank, Landmark, HandCoins, Wallet, X, TrendingUp, Building2 } from 'lucide-react';\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport { logActivity, ACTIVITY_TYPES } from '../../utils/firestoreHelpers';\r\n\r\nimport { logger } from \"../../utils/logger\";\r\n// 선생님(관리자) 계정 찾기 - 같은 학급의 관리자\r\nconst getTeacherAccount = async (classCode) => {\r\n  if (!classCode) return null;\r\n\r\n  try {\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(\r\n      usersRef,\r\n      where(\"classCode\", \"==\", classCode),\r\n      where(\"isAdmin\", \"==\", true),\r\n      limit(1)\r\n    );\r\n    const snapshot = await getDocs(q);\r\n\r\n    if (!snapshot.empty) {\r\n      const teacherDoc = snapshot.docs[0];\r\n      return {\r\n        id: teacherDoc.id,\r\n        ...teacherDoc.data()\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    logger.error(\"선생님 계정 조회 오류:\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// --- Tailwind class helpers ---\r\nconst cls = {\r\n  container: \"font-sans bg-transparent p-8 min-h-0\",\r\n  message: (type) => `px-5 py-4 rounded-xl mb-7 text-center text-base font-medium shadow-sm ${\r\n    type === 'error'\r\n      ? 'text-red-400 bg-red-500/10 border border-red-500/30'\r\n      : 'text-emerald-400 bg-emerald-500/10 border border-emerald-500/30'\r\n  }`,\r\n  grid: \"grid gap-7 max-w-[1200px] mx-auto\",\r\n  card: \"bg-[rgba(20,20,35,0.6)] shadow-[0_6px_20px_rgba(0,0,0,0.2)] rounded-2xl p-8 border border-white/5 backdrop-blur-[10px]\",\r\n  cardHeader: \"flex items-center gap-4 mb-6 pb-5 border-b-2 border-white/5\",\r\n  cardTitle: \"text-[26px] font-bold text-white tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]\",\r\n  tabContainer: \"flex border-b-2 border-white/10 mb-5 gap-2\",\r\n  tabButton: (isActive) => `px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ${\r\n    isActive\r\n      ? 'bg-indigo-500/20 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan drop-shadow-[0_0_5px_rgba(0,255,242,0.3)]'\r\n      : 'font-medium text-slate-400 border-b-[3px] border-b-transparent'\r\n  }`,\r\n  button: (disabled, variant = 'primary') => `text-white px-5 py-3 rounded-[10px] border border-white/10 text-[15px] font-semibold transition-all duration-200 ${\r\n    disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer shadow-[0_4px_12px_rgba(0,0,0,0.3)] hover:-translate-y-0.5 hover:brightness-110'\r\n  } ${\r\n    variant === 'primary' ? 'bg-sky-700/80' : variant === 'danger' ? 'bg-red-600/80' : variant === 'success' ? 'bg-emerald-600/80' : 'bg-gray-600'\r\n  }`,\r\n  noProduct: \"text-center text-slate-400 py-8 text-base italic\",\r\n  input: \"w-full py-3.5 px-4 bg-black/20 border-2 border-white/10 rounded-[10px] mb-4 text-base text-white transition-colors duration-200 focus:outline-none focus:border-cyber-cyan focus:ring-2 focus:ring-cyber-cyan/10\",\r\n  modalOverlay: \"fixed inset-0 bg-black/80 flex items-center justify-center z-[1000] backdrop-blur-[8px]\",\r\n  modalContent: \"bg-[#1a1a2e] p-8 rounded-2xl w-[90%] max-w-[450px] relative shadow-[0_20px_60px_rgba(0,0,0,0.6)] border border-white/10 text-slate-200\",\r\n  modalTitle: \"text-2xl font-bold mb-5 text-white drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]\",\r\n  modalCloseBtn: \"absolute top-5 right-5 bg-transparent border-none cursor-pointer text-slate-400 transition-colors duration-200 hover:text-white\",\r\n};\r\n\r\n// --- Helper Functions & Sub-Components ---\r\nconst formatCurrency = (amount) => (typeof amount === 'number' ? Math.round(amount).toLocaleString() : '0');\r\n\r\n// 일복리 계산\r\nconst calculateCompoundInterest = (principal, dailyRate, days) => {\r\n  if (principal <= 0 || !dailyRate || days <= 0) return { interest: 0, total: principal };\r\n  const total = principal * Math.pow(1 + dailyRate / 100, days);\r\n  const interest = total - principal;\r\n  return { interest: Math.round(interest), total: Math.round(total) };\r\n};\r\n\r\n// 일일 이자 계산 (메모이제이션으로 최적화)\r\nconst calculateDailyInterest = (principal, dailyRate) => {\r\n  // 콘솔 로그 제거 - 성능 최적화\r\n  return Math.round(principal * (dailyRate / 100));\r\n};\r\n\r\nconst ICON_MAP = {\r\n  parking: <Wallet size={28} className=\"text-sky-700\" />,\r\n  deposits: <Landmark size={28} className=\"text-emerald-600\" />,\r\n  savings: <PiggyBank size={28} className=\"text-violet-600\" />,\r\n  loans: <HandCoins size={28} className=\"text-red-600\" />,\r\n};\r\n\r\nconst SubscribedProductItem = ({ product, onCancel, onMaturity }) => {\r\n  const isMatured = product.maturityDate && new Date() >= product.maturityDate;\r\n  const daysRemaining = product.maturityDate ? Math.max(0, differenceInDays(product.maturityDate, new Date())) : 0;\r\n  const dailyRate = product.rate; // 연이율을 일이율로 변환\r\n\r\n  const { interest, total } = calculateCompoundInterest(\r\n    product.balance,\r\n    product.rate, // 일복리\r\n    product.termInDays\r\n  );\r\n\r\n  const dailyInterestAmount = calculateDailyInterest(product.balance, product.rate);\r\n\r\n  return (\r\n    <div className={`p-5 border-2 rounded-xl mb-4 shadow-[0_2px_8px_rgba(0,0,0,0.2)] ${\r\n      isMatured ? 'border-emerald-500/50 bg-emerald-500/10' : 'border-white/10 bg-black/20'\r\n    }`}>\r\n      <div className=\"flex justify-between items-start mb-3\">\r\n        <div>\r\n          <div className=\"font-bold text-lg text-slate-200 mb-1\">{product.name}</div>\r\n          {isMatured && <span className=\"bg-emerald-500 text-white px-3 py-1 rounded-full text-[13px] font-semibold\">만기</span>}\r\n        </div>\r\n        <span className=\"text-xl font-bold text-cyber-cyan\">{formatCurrency(product.balance)}원</span>\r\n      </div>\r\n\r\n      <div className=\"text-[15px] text-slate-400 mt-4 grid gap-2.5 bg-black/20 p-4 rounded-lg\">\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"font-medium\">금리 (일):</span>\r\n          <span className=\"font-bold text-cyber-cyan\">{product.rate}%</span>\r\n        </div>\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"font-medium\">일일 이자:</span>\r\n          <span className=\"font-bold text-emerald-400\">+{formatCurrency(dailyInterestAmount)}원/일</span>\r\n        </div>\r\n        {product.maturityDate && (\r\n          <>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"font-medium\">만기일:</span>\r\n              <span className=\"font-semibold text-slate-200\">{format(product.maturityDate, 'yyyy-MM-dd')}</span>\r\n            </div>\r\n            {!isMatured && (\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"font-medium\">남은 기간:</span>\r\n                <span className=\"font-semibold text-cyber-cyan\">{daysRemaining}일</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"border-t border-dashed border-white/10 my-4\"></div>\r\n\r\n      <div className=\"text-[15px] text-slate-200 grid gap-2.5 bg-cyber-cyan/5 p-4 rounded-lg border border-cyber-cyan/10\">\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"font-semibold\">만기 시 이자 (세전):</span>\r\n          <span className=\"font-bold text-emerald-400 text-[17px]\">+{formatCurrency(interest)}원</span>\r\n        </div>\r\n        <div className=\"flex justify-between text-[17px]\">\r\n          <span className=\"font-bold\">만기 시 총액:</span>\r\n          <span className=\"font-bold text-cyber-cyan\">{formatCurrency(total)}원</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-5 text-right\">\r\n        {isMatured ? (\r\n          <button\r\n            onClick={onMaturity}\r\n            className={cls.button(false, 'success') + ' px-5 py-2.5 text-[15px]'}\r\n          >\r\n            만기 수령 ({formatCurrency(total)}원)\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={onCancel}\r\n            className={cls.button(false, 'danger') + ' px-5 py-2.5 text-[15px]'}\r\n          >\r\n            {product.type === 'loan' ? '대출 상환' : '중도 해지'}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AvailableProductItem = ({ product, onSubscribe }) => {\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest } = calculateCompoundInterest(100000, dailyRate, product.termInDays);\r\n\r\n  return (\r\n    <div className=\"p-5 border-2 border-white/10 rounded-xl mb-3 flex justify-between items-center bg-black/20 shadow-[0_2px_8px_rgba(0,0,0,0.2)] transition-all duration-200\">\r\n      <div>\r\n        <div className=\"font-bold text-lg text-slate-200 mb-2\">{product.name}</div>\r\n        <div className=\"text-[15px] text-slate-400 mb-1.5\">\r\n          <strong className=\"text-cyber-cyan\">일 {product.dailyRate}%</strong> (기간: {product.termInDays}일)\r\n        </div>\r\n        <div className=\"text-sm text-emerald-400 font-semibold\">\r\n          <TrendingUp size={14} className=\"inline mr-1\" />\r\n          10만원 가입 시 예상 이자: +{formatCurrency(projectedInterest)}원\r\n        </div>\r\n      </div>\r\n      <button\r\n        onClick={onSubscribe}\r\n        className={cls.button(false) + ' px-6 py-3 text-base'}\r\n      >\r\n        가입\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProductSection = ({ title, icon, subscribedProducts, availableProducts, onSubscribe, onCancel, onMaturity }) => {\r\n  const [activeTab, setActiveTab] = useState('subscribed');\r\n  return (\r\n    <div className={cls.card}>\r\n      <div className={cls.cardHeader}>\r\n        {icon}\r\n        <h2 className={cls.cardTitle}>{title}</h2>\r\n      </div>\r\n      <div className={cls.tabContainer}>\r\n        <button\r\n          onClick={() => setActiveTab('subscribed')}\r\n          className={cls.tabButton(activeTab === 'subscribed')}\r\n        >\r\n          가입한 상품\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('available')}\r\n          className={cls.tabButton(activeTab === 'available')}\r\n        >\r\n          가입 가능한 상품\r\n        </button>\r\n      </div>\r\n      <div>\r\n        {activeTab === 'subscribed' && (\r\n          subscribedProducts.length > 0\r\n            ? subscribedProducts.map(p => (\r\n              <SubscribedProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onCancel={() => onCancel(p)}\r\n                onMaturity={() => onMaturity(p)}\r\n              />\r\n            ))\r\n            : <p className={cls.noProduct}>가입한 상품이 없습니다.</p>\r\n        )}\r\n        {activeTab === 'available' && (\r\n          availableProducts.length > 0\r\n            ? availableProducts.map(p => (\r\n              <AvailableProductItem\r\n                key={p.id}\r\n                product={p}\r\n                onSubscribe={() => onSubscribe(p)}\r\n              />\r\n            ))\r\n            : <p className={cls.noProduct}>가입 가능한 상품이 없습니다.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SubscriptionModal = ({ isOpen, onClose, product, onConfirm, isProcessing }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const numAmount = parseFloat(amount);\r\n  const dailyRate = product.dailyRate;\r\n  const { interest: projectedInterest, total: projectedTotal } = !isNaN(numAmount) && numAmount > 0\r\n    ? calculateCompoundInterest(numAmount, dailyRate, product.termInDays)\r\n    : { interest: 0, total: 0 };\r\n\r\n  return (\r\n    <div className={cls.modalOverlay} onClick={onClose}>\r\n      <div className={cls.modalContent} onClick={(e) => e.stopPropagation()}>\r\n        <button onClick={onClose} className={cls.modalCloseBtn} aria-label=\"닫기\"><X size={24} /></button>\r\n        <h3 className={cls.modalTitle}>{product.name} 가입</h3>\r\n\r\n        <div className=\"mb-5 p-4 bg-cyber-cyan/5 rounded-[10px] border border-cyber-cyan/20\">\r\n          <div className=\"text-[15px] text-slate-400 mb-2\">\r\n            <strong className=\"text-cyber-cyan\">금리:</strong> 일 {product.dailyRate}% (일복리)\r\n          </div>\r\n          <div className=\"text-[15px] text-slate-400\">\r\n            <strong className=\"text-cyber-cyan\">기간:</strong> {product.termInDays}일\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"mb-3 text-base font-semibold text-slate-200\">가입 금액을 입력해주세요</p>\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          className={cls.input}\r\n          placeholder={`${formatCurrency(product.minAmount || 0)}원 이상`}\r\n          autoFocus\r\n        />\r\n\r\n        {numAmount > 0 && (\r\n          <div className=\"mb-5 p-4 bg-emerald-500/10 rounded-[10px] border border-emerald-500/30\">\r\n            <div className=\"text-[15px] text-emerald-400 mb-1.5\">\r\n              예상 만기 이자: <strong>+{formatCurrency(projectedInterest)}원</strong>\r\n            </div>\r\n            <div className=\"text-base text-emerald-400 font-bold\">\r\n              만기 시 총액: {formatCurrency(projectedTotal)}원\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={() => { onConfirm(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing || !amount}\r\n          className={cls.button(isProcessing || !amount) + ' w-full text-[17px] py-4'}\r\n        >\r\n          {isProcessing ? '처리 중...' : '가입하기'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ParkingAccountSection = ({ balance, dailyInterest, onDeposit, onWithdraw, isProcessing, userCash }) => {\r\n  const [amount, setAmount] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-[rgba(6,78,117,0.85)] to-[rgba(20,40,60,0.9)] text-white shadow-[0_8px_24px_rgba(0,0,0,0.4)] rounded-2xl p-8 border border-[rgba(0,180,216,0.25)] backdrop-blur-[10px]\">\r\n      <div className=\"flex items-center gap-4 mb-6 pb-5 border-b-2 border-[rgba(0,180,216,0.2)]\">\r\n        <Wallet size={32} className=\"text-cyan-300\" />\r\n        <h2 className=\"text-[26px] font-bold text-[#e0f7fa] tracking-tight drop-shadow-[0_0_10px_rgba(0,255,242,0.3)]\">파킹통장</h2>\r\n      </div>\r\n\r\n      {/* 보유현금 표시 */}\r\n      <div className=\"bg-[rgba(0,180,216,0.15)] px-4 py-3 rounded-[10px] mb-4 backdrop-blur-[10px] flex justify-between items-center border border-[rgba(0,180,216,0.2)]\">\r\n        <span className=\"text-base font-medium text-slate-400\">보유 현금</span>\r\n        <span className=\"text-xl font-bold text-[#e0f7fa]\">{formatCurrency(userCash || 0)}원</span>\r\n      </div>\r\n\r\n      <div className=\"text-[42px] font-bold text-[#e0f7fa] mb-2\">\r\n        {formatCurrency(balance)}원\r\n      </div>\r\n\r\n      <p className=\"text-base text-[#e0f7fa]/80 mb-4 font-medium\">\r\n        매일 이자가 자동 지급되는 자유 입출금 통장\r\n      </p>\r\n\r\n      <div className=\"bg-[rgba(0,180,216,0.12)] p-4 rounded-[10px] mb-6 backdrop-blur-[10px] border border-[rgba(0,180,216,0.2)]\">\r\n        <div className=\"flex items-center gap-2 mb-2\">\r\n          <TrendingUp size={20} className=\"text-cyan-300\" />\r\n          <span className=\"text-[15px] font-semibold text-slate-400\">일일 이자 수익</span>\r\n        </div>\r\n        <div className=\"text-[28px] font-bold text-cyan-300\">\r\n          +{formatCurrency(dailyInterest)}원/일\r\n        </div>\r\n        <div className=\"text-sm mt-1.5 text-slate-400/90\">\r\n          (일 1% 복리 기준)\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex gap-2.5\">\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\"금액 입력\"\r\n          className=\"flex-1 py-3.5 px-4 bg-black/30 border border-[rgba(0,180,216,0.3)] rounded-[10px] text-[17px] text-white focus:outline-none focus:border-cyber-cyan\"\r\n          disabled={isProcessing}\r\n        />\r\n        <button\r\n          onClick={() => { onDeposit(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          className={cls.button(isProcessing, 'success') + ' text-[17px] px-6 py-3.5'}\r\n        >\r\n          입금\r\n        </button>\r\n        <button\r\n          onClick={() => { onWithdraw(amount); setAmount(\"\"); }}\r\n          disabled={isProcessing}\r\n          className={cls.button(isProcessing) + ' !bg-slate-500/50 text-[17px] px-6 py-3.5'}\r\n        >\r\n          출금\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main Component ---\r\nconst ParkingAccount = ({\r\n  auth = {},\r\n  depositProducts = [],\r\n  installmentProducts = [],\r\n  loanProducts = [],\r\n  activeView = 'parking',\r\n  onViewChange,\r\n  onLoadUserProducts,\r\n  allUserProducts = [],\r\n  onDeleteUserProduct\r\n}) => {\r\n  const { user, userDoc, loading, refreshUserDocument, isAdmin, addCash, deductCash } = auth;\r\n  const userId = user?.uid;\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [parkingBalance, setParkingBalance] = useState(0);\r\n  const [parkingDailyInterest, setParkingDailyInterest] = useState(0);\r\n  const [userDeposits, setUserDeposits] = useState([]);\r\n  const [userSavings, setUserSavings] = useState([]);\r\n  const [userLoans, setUserLoans] = useState([]);\r\n  const [modal, setModal] = useState({ isOpen: false, product: null, type: '' });\r\n  const [currentCash, setCurrentCash] = useState(userDoc?.cash || 0);\r\n\r\n  const displayMessage = (text, type = \"info\", duration = 3000) => {\r\n    setMessage(text);\r\n    setMessageType(type);\r\n    if (duration) setTimeout(() => setMessage(null), duration);\r\n  };\r\n\r\n  const loadAllData = useCallback(async () => {\r\n    if (!userId) return;\r\n    setIsProcessing(true);\r\n    try {\r\n      // 파킹통장 처리\r\n      const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n      const parkingRateProduct = depositProducts.length > 0 ? depositProducts[0] : null;\r\n\r\n      if (parkingRateProduct) {\r\n        const parkingDoc = await getDoc(parkingRef);\r\n        if (parkingDoc.exists()) {\r\n          const data = parkingDoc.data();\r\n          const lastInterestDate = data.lastInterestDate?.toDate();\r\n\r\n          if (!lastInterestDate || !isToday(lastInterestDate)) {\r\n            const daysToApply = lastInterestDate ? differenceInDays(new Date(), lastInterestDate) : 1;\r\n            if (daysToApply > 0) {\r\n              const dailyRate = (parkingRateProduct.dailyRate || 0.0027); // 기본 1% 연이율을 일로 환산한 값과 유사하게\r\n              const { interest } = calculateCompoundInterest(data.balance || 0, dailyRate, daysToApply);\r\n\r\n              if (interest > 0) {\r\n                await updateDoc(parkingRef, {\r\n                  balance: increment(interest),\r\n                  lastInterestDate: serverTimestamp()\r\n                });\r\n                displayMessage(`파킹통장 이자 ${formatCurrency(interest)}원이 지급되었습니다.`, 'success');\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          // 파킹통장이 없으면 생성\r\n          await setDoc(parkingRef, {\r\n            balance: 0,\r\n            lastInterestDate: serverTimestamp()\r\n          });\r\n        }\r\n      }\r\n\r\n      // 최종 잔액 조회\r\n      const finalParkingDoc = await getDoc(parkingRef);\r\n      if (finalParkingDoc.exists()) {\r\n        const balance = finalParkingDoc.data().balance || 0;\r\n        setParkingBalance(balance);\r\n\r\n        // 일일 이자 계산 (1% 기준)\r\n        const dailyRate = 1; // 1% 일일 이자율\r\n        const dailyInterest = calculateDailyInterest(balance, dailyRate);\r\n        setParkingDailyInterest(dailyInterest);\r\n      }\r\n\r\n      // 가입 상품 조회\r\n      const productsRef = collection(db, \"users\", userId, \"products\");\r\n      const snapshot = await getDocs(productsRef);\r\n      const deposits = [], savings = [], loans = [];\r\n\r\n      snapshot.forEach(docSnap => {\r\n        const product = {\r\n          id: docSnap.id,\r\n          ...docSnap.data(),\r\n          maturityDate: docSnap.data().maturityDate?.toDate ? docSnap.data().maturityDate.toDate() : docSnap.data().maturityDate\r\n        };\r\n        if (product.type === 'deposit') deposits.push(product);\r\n        else if (product.type === 'savings') savings.push(product);\r\n        else if (product.type === 'loan') loans.push(product);\r\n      });\r\n\r\n      setUserDeposits(deposits);\r\n      setUserSavings(savings);\r\n      setUserLoans(loans);\r\n    } catch (error) {\r\n      logger.error(\"데이터 로드 오류:\", error);\r\n      displayMessage(\"데이터를 불러오는 데 실패했습니다.\", \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [userId, depositProducts]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && userId) loadAllData();\r\n  }, [userId, loading, loadAllData]);\r\n\r\n  // userDoc의 cash가 변경될 때마다 currentCash 업데이트\r\n  useEffect(() => {\r\n    if (userDoc?.cash !== undefined) {\r\n      setCurrentCash(userDoc.cash);\r\n      logger.log(\"[ParkingAccount] currentCash 업데이트:\", userDoc.cash);\r\n    }\r\n  }, [userDoc?.cash]);\r\n\r\n  const handleOpenModal = (product, type) => setModal({ isOpen: true, product, type });\r\n  const handleCloseModal = () => setModal({ isOpen: false, product: null, type: '' });\r\n\r\n  const handleSubscribe = async (subscribeAmount) => {\r\n    logger.log(\"--- handleSubscribe 시작 ---\");\r\n    const amount = parseFloat(subscribeAmount);\r\n    const { product, type } = modal;\r\n\r\n    logger.log(\"가입할 상품:\", product);\r\n    logger.log(`가입 유형: ${type}, 가입 금액: ${amount}`);\r\n\r\n    if (isNaN(amount) || amount <= 0) {\r\n      logger.error(\"유효하지 않은 금액:\", subscribeAmount);\r\n      return displayMessage(\"유효한 금액을 입력하세요.\", \"error\");\r\n    }\r\n    if (product.minAmount && amount < product.minAmount) {\r\n      logger.error(`최소 가입 금액 미달: ${amount} < ${product.minAmount}`);\r\n      return displayMessage(`최소 가입 금액은 ${formatCurrency(product.minAmount)}원입니다.`, \"error\");\r\n    }\r\n    if (product.maxAmount && amount > product.maxAmount) {\r\n      logger.error(`최대 가입 한도 초과: ${amount} > ${product.maxAmount}`);\r\n      return displayMessage(`최대 가입 한도는 ${formatCurrency(product.maxAmount)}원입니다.`, \"error\");\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    handleCloseModal(); // UX 개선을 위해 모달 즉시 닫기\r\n\r\n    // --- 선생님 계정 조회 ---\r\n    const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n    if (!teacherAccount) {\r\n      displayMessage(\"선생님(은행) 계정을 찾을 수 없습니다. 관리자에게 문의하세요.\", \"error\");\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n    logger.log(\"선생님 계정:\", teacherAccount.name, teacherAccount.id);\r\n\r\n    // --- 낙관적 업데이트 (Optimistic Update) ---\r\n    const tempId = `temp_${Date.now()}`;\r\n    const maturityDate = new Date(Date.now() + product.termInDays * 24 * 60 * 60 * 1000);\r\n    const optimisticProduct = {\r\n      id: tempId,\r\n      name: product.name,\r\n      termInDays: product.termInDays,\r\n      rate: product.dailyRate,\r\n      balance: amount,\r\n      startDate: new Date(),\r\n      maturityDate: maturityDate,\r\n      type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n      isOptimistic: true // 임시 데이터임을 표시\r\n    };\r\n\r\n    // 상품 목록 낙관적 업데이트\r\n    if (optimisticProduct.type === 'deposit') {\r\n      setUserDeposits(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'savings') {\r\n      setUserSavings(prev => [...prev, optimisticProduct]);\r\n    } else if (optimisticProduct.type === 'loan') {\r\n      setUserLoans(prev => [...prev, optimisticProduct]);\r\n    }\r\n\r\n    // 현금 보유량 낙관적 업데이트\r\n    const cashChangeAmount = type === 'loans' ? amount : -amount;\r\n    setCurrentCash(prev => prev + cashChangeAmount); // 로컬 UI 상태만 먼저 업데이트\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccount.id);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"사용자 정보를 찾을 수 없습니다.\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"선생님(은행) 계정을 찾을 수 없습니다.\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        // 예금/적금: 학생 현금 확인\r\n        if (type !== 'loans' && currentCashInDb < amount) {\r\n          throw new Error(\"보유 현금이 부족합니다.\");\r\n        }\r\n\r\n        // 대출: 선생님(은행) 현금 확인\r\n        if (type === 'loans' && teacherCashInDb < amount) {\r\n          throw new Error(\"은행(선생님)에 대출 가능한 자금이 부족합니다.\");\r\n        }\r\n\r\n        const newProductData = {\r\n          name: product.name,\r\n          termInDays: product.termInDays,\r\n          rate: product.dailyRate,\r\n          balance: amount,\r\n          startDate: serverTimestamp(),\r\n          maturityDate: maturityDate,\r\n          type: type === 'deposits' ? 'deposit' : (type === 'savings' ? 'savings' : 'loan'),\r\n          teacherId: teacherAccount.id, // 선생님 계정 ID 저장\r\n          teacherName: teacherAccount.name || '선생님'\r\n        };\r\n\r\n        const newProductRef = doc(collection(db, \"users\", userId, \"products\"));\r\n        transaction.set(newProductRef, newProductData);\r\n\r\n        // 예금/적금: 학생 → 선생님\r\n        // 대출: 선생님 → 학생\r\n        if (type === 'loans') {\r\n          // 대출: 선생님에서 학생으로\r\n          transaction.update(userRef, { cash: increment(amount) });\r\n          transaction.update(teacherRef, { cash: increment(-amount) });\r\n        } else {\r\n          // 예금/적금: 학생에서 선생님으로\r\n          transaction.update(userRef, { cash: increment(-amount) });\r\n          transaction.update(teacherRef, { cash: increment(amount) });\r\n        }\r\n      });\r\n\r\n      const actionText = type === 'loans' ? '대출' : '가입';\r\n      displayMessage(`${product.name} ${actionText}이 완료되었습니다. (선생님 계정과 연동)`, \"success\");\r\n\r\n      // 🔥 활동 로그 기록 (예금/적금/대출 가입)\r\n      const activityType = type === 'deposits' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n        : type === 'savings' ? ACTIVITY_TYPES.DEPOSIT_CREATE\r\n          : ACTIVITY_TYPES.LOAN_CREATE;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '사용자',\r\n        type: activityType,\r\n        description: `${product.name} ${type === 'loans' ? '대출' : '가입'} (${formatCurrency(amount)}원) - 선생님 계정 연동`,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: product.name,\r\n          productType: type,\r\n          termInDays: product.termInDays,\r\n          dailyRate: product.dailyRate,\r\n          maturityDate: maturityDate.toISOString(),\r\n          teacherId: teacherAccount.id,\r\n          teacherName: teacherAccount.name\r\n        }\r\n      });\r\n\r\n      // 서버 데이터로 다시 로드하여 낙관적 업데이트 결과 교체\r\n      await loadAllData();\r\n      if (refreshUserDocument) refreshUserDocument();\r\n\r\n    } catch (error) {\r\n      logger.error(\"가입 처리 중 오류 발생:\", error);\r\n      displayMessage(`처리 오류: ${error.message}`, \"error\");\r\n\r\n      // --- 낙관적 업데이트 롤백 ---\r\n      if (optimisticProduct.type === 'deposit') {\r\n        setUserDeposits(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'savings') {\r\n        setUserSavings(prev => prev.filter(p => p.id !== tempId));\r\n      } else if (optimisticProduct.type === 'loan') {\r\n        setUserLoans(prev => prev.filter(p => p.id !== tempId));\r\n      }\r\n\r\n      // 현금 롤백 (로컬 UI)\r\n      setCurrentCash(prev => prev - cashChangeAmount);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // 만기 수령\r\n  const handleMaturity = async (product) => {\r\n    logger.log(\"--- handleMaturity 시작 ---\");\r\n    logger.log(\"처리할 상품:\", product);\r\n\r\n    const { id, name, type, balance, termInDays, rate, teacherId } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"사용자 정보가 없습니다. 다시 로그인해주세요.\", \"error\");\r\n      logger.error(\"handleMaturity: userId가 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    const dailyRate = rate;\r\n    const { total, interest } = calculateCompoundInterest(balance, dailyRate, termInDays);\r\n\r\n    logger.log(`계산 결과: 원금=${balance}, 이자=${interest}, 총액=${total}`);\r\n\r\n    const confirmMsg = isLoan\r\n      ? `대출 만기 상환: 원금 ${formatCurrency(balance)}원 + 이자 ${formatCurrency(interest)}원 = ${formatCurrency(total)}원을 상환하시겠습니까?`\r\n      : `만기 수령: 원금 ${formatCurrency(balance)}원 + 이자 ${formatCurrency(interest)}원 = ${formatCurrency(total)}원을 수령하시겠습니까?`;\r\n\r\n    if (!window.confirm(confirmMsg)) {\r\n      logger.log(\"사용자가 만기 처리를 취소했습니다.\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    logger.log(\"만기 처리 시작...\");\r\n\r\n    // 선생님 계정 조회 (저장된 teacherId 사용 또는 새로 조회)\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"선생님(은행) 계정을 찾을 수 없습니다.\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    logger.log(\"선생님 계정 ID:\", teacherAccountId);\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      logger.log(\"Firestore 문서 참조:\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        logger.log(\"트랜잭션 시작\");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"사용자 정보를 찾을 수 없습니다.\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"선생님(은행) 계정을 찾을 수 없습니다.\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n\r\n        if (isLoan) {\r\n          // 대출 만기 상환: 학생 → 선생님 (원금+이자)\r\n          if (currentCashInDb < total) {\r\n            throw new Error(`상환금이 부족합니다. (필요: ${formatCurrency(total)}원, 보유: ${formatCurrency(currentCashInDb)}원)`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(-total) });\r\n          transaction.update(teacherRef, { cash: increment(total) });\r\n          logger.log(`대출 상환: 학생 -${total}, 선생님 +${total}`);\r\n        } else {\r\n          // 예금/적금 만기 수령: 선생님 → 학생 (원금+이자)\r\n          if (teacherCashInDb < total) {\r\n            throw new Error(`은행(선생님)에 지급할 자금이 부족합니다. (필요: ${formatCurrency(total)}원)`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(total) });\r\n          transaction.update(teacherRef, { cash: increment(-total) });\r\n          logger.log(`만기 수령: 학생 +${total}, 선생님 -${total}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        logger.log(\"상품 문서 삭제 예약\");\r\n        logger.log(\"트랜잭션 커밋 시도\");\r\n      });\r\n\r\n      logger.log(\"트랜잭션 성공\");\r\n\r\n      const successMsg = isLoan\r\n        ? `대출 상환 완료: ${formatCurrency(total)}원 (선생님 계정으로 이체)`\r\n        : `만기 수령 완료: ${formatCurrency(total)}원 (선생님 계정에서 지급)`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      // 🔥 활동 로그 기록 (예금 만기 / 대출 상환)\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_MATURITY;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '사용자',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `대출 만기 상환: ${name} (원금: ${formatCurrency(balance)}, 이자: ${formatCurrency(interest)}) - 선생님 계정으로`\r\n          : `${name} 만기 수령 (원금: ${formatCurrency(balance)}, 이자: ${formatCurrency(interest)}) - 선생님 계정에서`,\r\n        amount: isLoan ? -total : total,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          interest,\r\n          total,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      // 백그라운드에서 userDoc 갱신\r\n      if (refreshUserDocument) {\r\n        logger.log(\"userDoc 갱신 시작\");\r\n        refreshUserDocument().then(() => {\r\n          logger.log(\"[ParkingAccount] 만기 처리 후 userDoc 갱신 완료\");\r\n        });\r\n      }\r\n\r\n      logger.log(\"전체 데이터 다시 로드\");\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      logger.error(\"만기 처리 중 오류 발생:\", error);\r\n      displayMessage(`처리 오류: ${error.message}`, \"error\");\r\n      // 에러 발생 시 currentCash 롤백\r\n      if (userDoc?.cash !== undefined) {\r\n        logger.log(\"오류 발생으로 현금 롤백:\", userDoc.cash);\r\n        setCurrentCash(userDoc.cash);\r\n      }\r\n    } finally {\r\n      setIsProcessing(false);\r\n      logger.log(\"--- handleMaturity 종료 ---\");\r\n    }\r\n  };\r\n\r\n  // 중도 해지\r\n  const handleCancelEarly = async (product) => {\r\n    logger.log(\"--- handleCancelEarly 시작 ---\");\r\n    logger.log(\"중도 해지할 상품:\", product);\r\n\r\n    const { id, name, type, balance } = product;\r\n    const isLoan = type === 'loan';\r\n\r\n    if (!userId) {\r\n      displayMessage(\"사용자 정보가 없습니다. 다시 로그인해주세요.\", \"error\");\r\n      logger.error(\"handleCancelEarly: userId가 없습니다.\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = isLoan\r\n      ? `대출금 ${formatCurrency(balance)}원을 상환하시겠습니까?`\r\n      : `'${name}'을(를) 중도 해지하시겠습니까? (이자 없이 원금만 반환됩니다)`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      logger.log(\"사용자가 중도 해지를 취소했습니다.\");\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    logger.log(\"중도 해지 처리 시작...\");\r\n\r\n    // 선생님 계정 조회 (저장된 teacherId 사용 또는 새로 조회)\r\n    const teacherId = product.teacherId;\r\n    let teacherAccountId = teacherId;\r\n    if (!teacherAccountId) {\r\n      const teacherAccount = await getTeacherAccount(userDoc?.classCode);\r\n      if (!teacherAccount) {\r\n        displayMessage(\"선생님(은행) 계정을 찾을 수 없습니다.\", \"error\");\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n      teacherAccountId = teacherAccount.id;\r\n    }\r\n    logger.log(\"선생님 계정 ID:\", teacherAccountId);\r\n\r\n    // --- 낙관적 업데이트 (Optimistic Update) ---\r\n    const originalProducts = {\r\n      deposit: [...userDeposits],\r\n      savings: [...userSavings],\r\n      loan: [...userLoans]\r\n    };\r\n    const originalCash = currentCash;\r\n\r\n    const cashChangeAmount = isLoan ? -balance : balance;\r\n    setCurrentCash(prev => prev + cashChangeAmount);\r\n\r\n    if (type === 'deposit') {\r\n      setUserDeposits(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'savings') {\r\n      setUserSavings(prev => prev.filter(p => p.id !== id));\r\n    } else if (type === 'loan') {\r\n      setUserLoans(prev => prev.filter(p => p.id !== id));\r\n    }\r\n\r\n    try {\r\n      const productRef = doc(db, \"users\", userId, \"products\", String(id));\r\n      logger.log(\"Firestore 문서 참조:\", productRef.path);\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        logger.log(\"트랜잭션 시작\");\r\n        const userRef = doc(db, \"users\", userId);\r\n        const teacherRef = doc(db, \"users\", teacherAccountId);\r\n\r\n        const userSnapshot = await transaction.get(userRef);\r\n        const teacherSnapshot = await transaction.get(teacherRef);\r\n\r\n        if (!userSnapshot.exists()) throw new Error(\"사용자 정보를 찾을 수 없습니다.\");\r\n        if (!teacherSnapshot.exists()) throw new Error(\"선생님(은행) 계정을 찾을 수 없습니다.\");\r\n\r\n        const currentCashInDb = userSnapshot.data()?.cash ?? 0;\r\n        const teacherCashInDb = teacherSnapshot.data()?.cash ?? 0;\r\n        logger.log(`현재 보유 현금 (DB): ${currentCashInDb}, 선생님 보유 현금: ${teacherCashInDb}`);\r\n\r\n        if (isLoan) {\r\n          // 대출 중도 상환: 학생 → 선생님 (원금만)\r\n          if (currentCashInDb < balance) {\r\n            throw new Error(\"대출금을 상환하기에 현금이 부족합니다.\");\r\n          }\r\n          transaction.update(userRef, { cash: increment(-balance) });\r\n          transaction.update(teacherRef, { cash: increment(balance) });\r\n          logger.log(`대출 중도 상환: 학생 -${balance}, 선생님 +${balance}`);\r\n        } else {\r\n          // 예금/적금 중도 해지: 선생님 → 학생 (원금만, 이자 없음)\r\n          if (teacherCashInDb < balance) {\r\n            throw new Error(`은행(선생님)에 지급할 자금이 부족합니다. (필요: ${formatCurrency(balance)}원)`);\r\n          }\r\n          transaction.update(userRef, { cash: increment(balance) });\r\n          transaction.update(teacherRef, { cash: increment(-balance) });\r\n          logger.log(`중도 해지: 학생 +${balance}, 선생님 -${balance}`);\r\n        }\r\n\r\n        transaction.delete(productRef);\r\n        logger.log(\"상품 문서 삭제 예약\");\r\n        logger.log(\"트랜잭션 커밋 시도\");\r\n      });\r\n\r\n      logger.log(\"트랜잭션 성공\");\r\n\r\n      const successMsg = isLoan\r\n        ? `대출 상환 완료: ${formatCurrency(balance)}원 (선생님 계정으로 이체)`\r\n        : `중도 해지 완료: 원금 ${formatCurrency(balance)}원 반환 (선생님 계정에서 지급)`;\r\n      displayMessage(successMsg, \"success\");\r\n\r\n      // 🔥 활동 로그 기록 (중도 해지 / 대출 상환)\r\n      const activityType = isLoan ? ACTIVITY_TYPES.LOAN_REPAY : ACTIVITY_TYPES.DEPOSIT_WITHDRAW;\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '사용자',\r\n        type: activityType,\r\n        description: isLoan\r\n          ? `대출 중도 상환: ${name} (${formatCurrency(balance)}원) - 선생님 계정으로`\r\n          : `중도 해지: ${name} (원금 ${formatCurrency(balance)}원) - 선생님 계정에서`,\r\n        amount: cashChangeAmount,\r\n        metadata: {\r\n          productName: name,\r\n          productType: type,\r\n          principal: balance,\r\n          isEarlyCancellation: true,\r\n          teacherId: teacherAccountId\r\n        }\r\n      });\r\n\r\n      // 백그라운드에서 userDoc 갱신\r\n      if (refreshUserDocument) {\r\n        logger.log(\"userDoc 갱신 시작\");\r\n        refreshUserDocument();\r\n      }\r\n      await loadAllData();\r\n\r\n    } catch (error) {\r\n      logger.error(\"중도 해지 처리 중 오류 발생:\", error);\r\n      displayMessage(`처리 오류: ${error.message}`, \"error\");\r\n\r\n      // --- 낙관적 업데이트 롤백 ---\r\n      setUserDeposits(originalProducts.deposit);\r\n      setUserSavings(originalProducts.savings);\r\n      setUserLoans(originalProducts.loan);\r\n      setCurrentCash(originalCash);\r\n\r\n    } finally {\r\n      setIsProcessing(false);\r\n      logger.log(\"--- handleCancelEarly 종료 ---\");\r\n    }\r\n  };\r\n\r\n  const handleParkingDeposit = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"유효한 금액을 입력하세요.\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev + amount);\r\n\r\n    try {\r\n      // 먼저 사용자 현금 차감 (AuthContext의 deductCash 사용)\r\n      const cashDeducted = await deductCash(amount, `파킹통장 입금: ${formatCurrency(amount)}원`);\r\n      if (!cashDeducted) {\r\n        throw new Error(\"보유 현금 차감에 실패했습니다.\");\r\n      }\r\n\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n\r\n        if (parkingSnapshot.exists()) {\r\n          transaction.update(parkingRef, { balance: increment(amount) });\r\n        } else {\r\n          transaction.set(parkingRef, { balance: amount, lastInterestDate: serverTimestamp() });\r\n        }\r\n      });\r\n\r\n      displayMessage(`${formatCurrency(amount)}원 입금 완료.`, \"success\");\r\n\r\n      // 🔥 활동 로그 기록 (파킹통장 입금)\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '사용자',\r\n        type: ACTIVITY_TYPES.PARKING_DEPOSIT,\r\n        description: `파킹통장 입금 ${formatCurrency(amount)}원`,\r\n        amount: -amount,\r\n        metadata: { parkingBalance: parkingBalance + amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(`처리 오류: ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleParkingWithdraw = async (amountStr) => {\r\n    const amount = parseFloat(amountStr);\r\n    if (isNaN(amount) || amount <= 0) return displayMessage(\"유효한 금액을 입력하세요.\", \"error\");\r\n\r\n    setIsProcessing(true);\r\n    const previousParkingBalance = parkingBalance; // Store for rollback\r\n    const previousCurrentCash = currentCash; // Store for rollback\r\n\r\n    // Optimistically update UI for parking balance\r\n    setParkingBalance(prev => prev - amount);\r\n\r\n    try {\r\n      await runTransaction(db, async (transaction) => {\r\n        const parkingRef = doc(db, \"users\", userId, \"financials\", \"parkingAccount\");\r\n        const parkingSnapshot = await transaction.get(parkingRef);\r\n        const currentParkingBalance = parkingSnapshot.data()?.balance ?? 0;\r\n\r\n        if (currentParkingBalance < amount) throw new Error(\"파킹통장 잔액이 부족합니다.\");\r\n\r\n        transaction.update(parkingRef, { balance: increment(-amount) });\r\n      });\r\n\r\n      // 사용자 현금 추가 (AuthContext의 addCash 사용)\r\n      const cashAdded = await addCash(amount, `파킹통장 출금: ${formatCurrency(amount)}원`);\r\n      if (!cashAdded) {\r\n        throw new Error(\"보유 현금 추가에 실패했습니다.\");\r\n      }\r\n\r\n      displayMessage(`${formatCurrency(amount)}원 출금 완료.`, \"success\");\r\n\r\n      // 🔥 활동 로그 기록 (파킹통장 출금)\r\n      logActivity(db, {\r\n        classCode: userDoc?.classCode,\r\n        userId: userId,\r\n        userName: userDoc?.name || '사용자',\r\n        type: ACTIVITY_TYPES.PARKING_WITHDRAW,\r\n        description: `파킹통장 출금 ${formatCurrency(amount)}원`,\r\n        amount: amount,\r\n        metadata: { parkingBalance: parkingBalance - amount }\r\n      });\r\n\r\n      await loadAllData(); // Reconcile parkingBalance and other products\r\n    } catch (error) {\r\n      displayMessage(`처리 오류: ${error.message}`, \"error\");\r\n      // Rollback UI on error\r\n      setParkingBalance(previousParkingBalance);\r\n      setCurrentCash(previousCurrentCash);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminDeleteSubscribedProduct = async (product) => {\r\n    if (!isAdmin()) {\r\n      displayMessage(\"관리자 권한이 필요합니다.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`정말로 이 상품(${product.name})을 강제로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`)) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", product.id);\r\n      await deleteDoc(productRef);\r\n      displayMessage(\"상품이 강제로 삭제되었습니다.\", \"success\");\r\n      loadAllData();\r\n    } catch (error) {\r\n      logger.error(\"관리자 상품 삭제 중 오류:\", error);\r\n      displayMessage(`삭제 처리 오류: ${error.message}`, \"error\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className={cls.container}>금융 정보를 불러오는 중입니다...</div>;\r\n  if (!user) return <div className={cls.container}>로그인이 필요합니다.</div>;\r\n\r\n  const mainTabClass = (isActive) => `px-6 py-3 border-none cursor-pointer text-[17px] rounded-t-lg transition-all duration-200 -mb-0.5 ${\r\n    isActive\r\n      ? 'bg-cyber-cyan/10 font-bold text-cyber-cyan border-b-[3px] border-b-cyber-cyan'\r\n      : 'font-medium text-slate-400 border-b-[3px] border-b-transparent'\r\n  }`;\r\n\r\n  return (\r\n    <div className={cls.container}>\r\n      {/* 탭 메뉴 */}\r\n      <div className=\"flex gap-2.5 mb-6 border-b-2 border-white/10 relative\">\r\n        <button\r\n          onClick={() => onViewChange && onViewChange('parking')}\r\n          className={mainTabClass(activeView === 'parking')}\r\n        >\r\n          나의 금융 현황\r\n        </button>\r\n        {isAdmin && isAdmin() && (\r\n          <>\r\n            <button\r\n              onClick={() => onViewChange && onViewChange('admin')}\r\n              className={mainTabClass(activeView === 'admin')}\r\n            >\r\n              상품 관리\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (onViewChange) onViewChange('userProducts');\r\n                if (onLoadUserProducts) onLoadUserProducts();\r\n              }}\r\n              className={mainTabClass(activeView === 'userProducts')}\r\n            >\r\n              유저 상품 조회\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {message && <div className={cls.message(messageType)}>{message}</div>}\r\n\r\n      {/* 유저 상품 조회 화면 */}\r\n      {activeView === 'userProducts' && isAdmin && isAdmin() && (\r\n        <div className=\"bg-[rgba(20,20,35,0.6)] rounded-2xl p-8 shadow-[0_6px_20px_rgba(0,0,0,0.3)] border border-white/5\">\r\n          <h2 className=\"text-2xl font-bold mb-4 text-white\">\r\n            유저별 가입 상품 조회 및 관리\r\n          </h2>\r\n          <p className=\"text-sm text-slate-400 mb-5\">\r\n            클래스 내 모든 유저의 가입 상품을 조회하고 필요시 강제 삭제할 수 있습니다.\r\n          </p>\r\n\r\n          {allUserProducts.length === 0 ? (\r\n            <p className=\"text-center p-10 text-slate-400\">\r\n              가입된 상품이 없습니다.\r\n            </p>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-white/5 border-b-2 border-white/10\">\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">사용자</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">상품명</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">종류</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">잔액/금액</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">금리(일)</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">기간(일)</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">만기일</th>\r\n                    <th className=\"p-3 text-left text-sm font-semibold text-slate-400\">관리</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allUserProducts.map((product, index) => {\r\n                    const typeLabel = product.type === 'deposit' ? '예금' :\r\n                      product.type === 'savings' ? '적금' :\r\n                        product.type === 'loan' ? '대출' : '기타';\r\n                    return (\r\n                      <tr key={`${product.userId}-${product.id}-${index}`} className=\"border-b border-white/5\">\r\n                        <td className=\"p-3 text-sm text-slate-200\">{product.userName}</td>\r\n                        <td className=\"p-3 text-sm text-slate-200\">{product.name}</td>\r\n                        <td className=\"p-3 text-sm text-slate-200\">{typeLabel}</td>\r\n                        <td className=\"p-3 text-sm text-cyber-cyan\">{formatKoreanCurrency(product.balance || 0)}원</td>\r\n                        <td className=\"p-3 text-sm text-slate-200\">{product.rate}%</td>\r\n                        <td className=\"p-3 text-sm text-slate-200\">{product.termInDays}일</td>\r\n                        <td className=\"p-3 text-sm text-slate-200\">\r\n                          {product.maturityDate\r\n                            ? new Date(product.maturityDate).toLocaleDateString('ko-KR')\r\n                            : '-'}\r\n                        </td>\r\n                        <td className=\"p-3\">\r\n                          <button\r\n                            onClick={() => onDeleteUserProduct && onDeleteUserProduct(product)}\r\n                            className={cls.button(false, 'danger') + ' text-xs px-3 py-1.5'}\r\n                          >\r\n                            삭제\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <div className=\"mt-5 text-right text-slate-400 text-sm\">\r\n                총 {allUserProducts.length}개의 상품\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* 기존 금융 현황 화면 */}\r\n      {activeView === 'parking' && (\r\n        <div className={cls.grid}>\r\n          <ParkingAccountSection\r\n            balance={parkingBalance}\r\n            dailyInterest={parkingDailyInterest}\r\n            onDeposit={handleParkingDeposit}\r\n            onWithdraw={handleParkingWithdraw}\r\n            isProcessing={isProcessing}\r\n            userCash={currentCash}\r\n          />\r\n          <ProductSection\r\n            title=\"예금\"\r\n            icon={ICON_MAP.deposits}\r\n            subscribedProducts={userDeposits}\r\n            availableProducts={depositProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'deposits')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"적금\"\r\n            icon={ICON_MAP.savings}\r\n            subscribedProducts={userSavings}\r\n            availableProducts={installmentProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'savings')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n          <ProductSection\r\n            title=\"대출\"\r\n            icon={ICON_MAP.loans}\r\n            subscribedProducts={userLoans}\r\n            availableProducts={loanProducts}\r\n            onSubscribe={(p) => handleOpenModal(p, 'loans')}\r\n            onCancel={handleCancelEarly}\r\n            onMaturity={handleMaturity}\r\n            isAdmin={isAdmin()}\r\n            onAdminDelete={handleAdminDeleteSubscribedProduct}\r\n          />\r\n        </div>\r\n      )}\r\n      <SubscriptionModal\r\n        isOpen={modal.isOpen}\r\n        onClose={handleCloseModal}\r\n        product={modal.product}\r\n        onConfirm={handleSubscribe}\r\n        isProcessing={isProcessing}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParkingAccount;\r\n","// src/Banking.js - Tailwind UI 리팩토링\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ParkingAccount from \"./ParkingAccount\";\r\nimport { getBankingProducts, updateBankingProducts, db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs, collectionGroup, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { formatKoreanCurrency } from '../../utils/numberFormatter';\r\nimport {\r\n  PageContainer,\r\n  PageHeader,\r\n  SectionTitle,\r\n  LoadingState,\r\n  ActionButton,\r\n} from \"../../components/PageWrapper\";\r\nimport { Landmark, ChevronLeft, Save, Plus, Trash2 } from \"lucide-react\";\r\nimport { AlchanLoading } from \"../../components/AlchanLayout\";\r\n\r\nconst convertAdminProductsToAccountFormat = (adminProducts) => {\r\n  if (!Array.isArray(adminProducts)) {\r\n    logger.error(\r\n      \"convertAdminProductsToAccountFormat: 입력값이 배열이 아닙니다.\",\r\n      adminProducts\r\n    );\r\n    return [];\r\n  }\r\n  return adminProducts.map((product) => ({\r\n    id: product.id,\r\n    name: product.name,\r\n    dailyRate:\r\n      product.dailyRate !== undefined && !isNaN(product.dailyRate) ? parseFloat(product.dailyRate) : 0,\r\n    termInDays:\r\n      product.termInDays !== undefined && !isNaN(product.termInDays) ? parseInt(product.termInDays) : 1,\r\n    minAmount:\r\n      product.minAmount !== undefined && !isNaN(product.minAmount) ? parseInt(product.minAmount) : 0,\r\n    maxAmount:\r\n      product.maxAmount !== undefined && !isNaN(product.maxAmount) ? parseInt(product.maxAmount) : 0,\r\n  }));\r\n};\r\n\r\nimport \"./Banking.css\";\r\nimport { logger } from \"../../utils/logger\";\r\n\r\nconst Banking = () => {\r\n  const auth = useAuth();\r\n  const navigate = useNavigate();\r\n  const [message, setMessage] = useState(null);\r\n  const [messageType, setMessageType] = useState(\"\");\r\n  const [activeView, setActiveView] = useState(\"parking\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [parkingDepositProducts, setParkingDepositProducts] = useState([]);\r\n  const [parkingInstallmentProducts, setParkingInstallmentProducts] = useState(\r\n    []\r\n  );\r\n  const [parkingLoanProducts, setParkingLoanProducts] = useState([]);\r\n\r\n  // 유저별 가입 상품 관리\r\n  const [allUserProducts, setAllUserProducts] = useState([]);\r\n\r\n  // 모든 유저의 가입 상품 로드\r\n  const loadAllUserProducts = async () => {\r\n    if (!auth?.userDoc?.classCode || !(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // 먼저 해당 클래스의 모든 유저 조회\r\n      const usersQuery = query(\r\n        collection(db, \"users\"),\r\n        where(\"classCode\", \"==\", auth.userDoc.classCode)\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n\r\n      const userMap = {};\r\n      usersSnapshot.forEach((doc) => {\r\n        userMap[doc.id] = {\r\n          id: doc.id,\r\n          name: doc.data().name || doc.data().nickname || \"알 수 없음\",\r\n          ...doc.data()\r\n        };\r\n      });\r\n\r\n      // 🔥 [최적화] 각 유저의 상품 조회 - 병렬 처리로 N+1 문제 해결\r\n      const allProducts = [];\r\n      const userIds = Object.keys(userMap);\r\n\r\n      // 모든 유저의 products를 병렬로 조회 (순차 대신 Promise.all 사용)\r\n      const productPromises = userIds.map(async (userId) => {\r\n        const productsQuery = collection(db, \"users\", userId, \"products\");\r\n        const productsSnapshot = await getDocs(productsQuery);\r\n\r\n        return productsSnapshot.docs.map((productDoc) => {\r\n          const productData = productDoc.data();\r\n          return {\r\n            firestoreId: productDoc.id, // 실제 Firestore 문서 ID\r\n            userId: userId,\r\n            userName: userMap[userId].name,\r\n            ...productData,\r\n            maturityDate: productData.maturityDate?.toDate ? productData.maturityDate.toDate() : productData.maturityDate\r\n          };\r\n        });\r\n      });\r\n\r\n      // 모든 Promise가 완료될 때까지 대기\r\n      const productsArrays = await Promise.all(productPromises);\r\n\r\n      // 2D 배열을 1D 배열로 평탄화\r\n      productsArrays.forEach(productsArray => {\r\n        allProducts.push(...productsArray);\r\n      });\r\n\r\n      setAllUserProducts(allProducts);\r\n      logger.log(\"유저 상품 로드 완료:\", allProducts);\r\n    } catch (error) {\r\n      logger.error(\"유저 상품 로드 중 오류:\", error);\r\n      setMessage(\"유저 상품 로드 중 오류가 발생했습니다.\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // 관리자가 유저 상품 강제 삭제\r\n  const handleAdminDeleteUserProduct = async (product) => {\r\n    logger.log(\"삭제 시도:\", product);\r\n\r\n    if (!(auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")) {\r\n      logger.log(\"관리자 권한 없음\");\r\n      alert(\"관리자 권한이 필요합니다.\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`'${product.userName}'님의 '${product.name}' 상품을 강제로 삭제하시겠습니까?\\n이 작업은 되돌릴 수 없습니다.`)) {\r\n      logger.log(\"사용자가 삭제 취소\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // firestoreId를 사용 (실제 Firestore 문서 ID)\r\n      const productId = product.firestoreId || String(product.id);\r\n      logger.log(\"삭제 경로:\", `users/${product.userId}/products/${productId}`);\r\n      logger.log(\"사용할 문서 ID:\", productId);\r\n\r\n      const productRef = doc(db, \"users\", product.userId, \"products\", productId);\r\n      logger.log(\"삭제 시작...\");\r\n      await deleteDoc(productRef);\r\n      logger.log(\"삭제 완료\");\r\n\r\n      setMessage(\"상품이 삭제되었습니다.\");\r\n      setMessageType(\"success\");\r\n\r\n      // 목록 새로고침\r\n      logger.log(\"목록 새로고침 시작...\");\r\n      await loadAllUserProducts();\r\n      logger.log(\"목록 새로고침 완료\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      logger.error(\"상품 삭제 중 오류:\", error);\r\n      setMessage(`삭제 중 오류가 발생했습니다: ${error.message}`);\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const [formattedDepositProducts, setFormattedDepositProducts] = useState([]);\r\n  const [formattedInstallmentProducts, setFormattedInstallmentProducts] =\r\n    useState([]);\r\n  const [formattedLoanProducts, setFormattedLoanProducts] = useState([]);\r\n\r\n  // Firestore에서 데이터 로드\r\n  const loadAllData = async () => {\r\n    const classCode = auth?.userDoc?.classCode;\r\n    if (!classCode || classCode === '미지정') {\r\n      logger.warn(\"[Banking] 유효한 학급 코드가 없어 뱅킹 상품을 로드하지 않습니다.\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const bankingData = await getBankingProducts(classCode, true, 'Banking');\r\n\r\n      // deposits를 savings로 매핑 (예금 상품)\r\n      if (bankingData.deposits) {\r\n        setParkingDepositProducts(bankingData.deposits);\r\n      } else {\r\n        setParkingDepositProducts([]);\r\n      }\r\n\r\n      // savings를 installments로 매핑 (적금 상품)\r\n      if (bankingData.savings) {\r\n        setParkingInstallmentProducts(bankingData.savings);\r\n      } else {\r\n        setParkingInstallmentProducts([]);\r\n      }\r\n\r\n      // loans는 그대로 매핑 (대출 상품)\r\n      if (bankingData.loans) {\r\n        setParkingLoanProducts(bankingData.loans);\r\n      } else {\r\n        setParkingLoanProducts([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      logger.error(\"뱅킹 상품 로드 중 오류:\", error);\r\n      setMessage(\"데이터 로딩 중 오류가 발생했습니다.\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth && !auth.loading && auth.user && auth.userDoc?.classCode) {\r\n      loadAllData();\r\n    } else if (auth && !auth.loading && !auth.user) {\r\n      setParkingSavingsProducts([]);\r\n      setParkingInstallmentProducts([]);\r\n      setParkingLoanProducts([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [auth?.user, auth?.loading, auth?.userDoc?.classCode]); // loadAllData 추가하면 무한루프, auth 객체 전체 추가도 불필요한 리렌더링 발생\r\n\r\n  useEffect(() => {\r\n    setFormattedDepositProducts(\r\n      convertAdminProductsToAccountFormat(parkingDepositProducts)\r\n    );\r\n    setFormattedInstallmentProducts(\r\n      convertAdminProductsToAccountFormat(parkingInstallmentProducts)\r\n    );\r\n    setFormattedLoanProducts(\r\n      convertAdminProductsToAccountFormat(parkingLoanProducts)\r\n    );\r\n  }, [parkingDepositProducts, parkingInstallmentProducts, parkingLoanProducts]);\r\n\r\n  const handleParkingProductChange = (type, index, field, value) => {\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.map((product, i) => {\r\n      if (i === index) {\r\n        const updatedProduct = { ...product };\r\n        if (\r\n          field === \"termInDays\" ||\r\n          field === \"minAmount\" ||\r\n          field === \"maxAmount\"\r\n        ) {\r\n          const numValue = parseInt(value);\r\n          updatedProduct[field] =\r\n            isNaN(numValue) || numValue < (field === \"termInDays\" ? 1 : 0)\r\n              ? field === \"termInDays\"\r\n                ? 1\r\n                : 0\r\n              : numValue;\r\n        } else if (field === \"dailyRate\") {\r\n          const dailyRateValue = parseFloat(value);\r\n          updatedProduct.dailyRate =\r\n            isNaN(dailyRateValue) || dailyRateValue < 0 ? 0 : dailyRateValue;\r\n        } else if (field === \"name\") {\r\n          updatedProduct[field] = value;\r\n        }\r\n        return updatedProduct;\r\n      }\r\n      return product;\r\n    });\r\n    setProductsState(updatedProducts);\r\n  };\r\n\r\n  const saveParkingProducts = async (type) => {\r\n    if (!auth?.userDoc?.classCode) {\r\n      setMessage(\"학급 코드가 없어 저장할 수 없습니다.\");\r\n      setMessageType(\"error\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      let products, firestoreType;\r\n\r\n      switch (type) {\r\n        case \"deposits\":\r\n          products = parkingDepositProducts;\r\n          firestoreType = \"deposits\"; // Firebase에서는 deposits로 저장\r\n          break;\r\n        case \"installments\":\r\n          products = parkingInstallmentProducts;\r\n          firestoreType = \"savings\"; // Firebase에서는 savings로 저장\r\n          break;\r\n        case \"loans\":\r\n          products = parkingLoanProducts;\r\n          firestoreType = \"loans\";\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      await updateBankingProducts(\r\n        auth.userDoc.classCode,\r\n        firestoreType,\r\n        products\r\n      );\r\n\r\n      setMessage(\r\n        `${type === \"deposits\"\r\n          ? \"예금\"\r\n          : type === \"installments\"\r\n            ? \"적금\"\r\n            : \"대출\"\r\n        } 상품이 성공적으로 저장되었습니다.`\r\n      );\r\n      setMessageType(\"success\");\r\n\r\n      setTimeout(() => {\r\n        setMessage(null);\r\n        setMessageType(\"\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      logger.error(`${type} 상품 저장 중 오류:`, error);\r\n      setMessage(\"저장 중 오류가 발생했습니다.\");\r\n      setMessageType(\"error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const addParkingProduct = (type) => {\r\n    const newProduct = {\r\n      id: Date.now(),\r\n      name: `새 ${type === \"deposits\"\r\n        ? \"예금\"\r\n        : type === \"installments\"\r\n          ? \"적금\"\r\n          : \"대출\"\r\n        } 상품`,\r\n      dailyRate: 0.01,\r\n      termInDays: 365,\r\n      minAmount: type === \"loans\" ? 0 : 100000,\r\n      maxAmount: type === \"loans\" ? 1000000 : 0,\r\n    };\r\n\r\n    switch (type) {\r\n      case \"deposits\":\r\n        setParkingDepositProducts([...parkingDepositProducts, newProduct]);\r\n        break;\r\n      case \"installments\":\r\n        setParkingInstallmentProducts([\r\n          ...parkingInstallmentProducts,\r\n          newProduct,\r\n        ]);\r\n        break;\r\n      case \"loans\":\r\n        setParkingLoanProducts([...parkingLoanProducts, newProduct]);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const deleteParkingProduct = async (type, indexToDelete) => {\r\n    if (isLoading) return; // 중복 클릭 방지\r\n\r\n    let productsState, setProductsState;\r\n    switch (type) {\r\n      case \"deposits\":\r\n        productsState = parkingDepositProducts;\r\n        setProductsState = setParkingDepositProducts;\r\n        break;\r\n      case \"installments\":\r\n        productsState = parkingInstallmentProducts;\r\n        setProductsState = setParkingInstallmentProducts;\r\n        break;\r\n      case \"loans\":\r\n        productsState = parkingLoanProducts;\r\n        setProductsState = setParkingLoanProducts;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    const updatedProducts = productsState.filter(\r\n      (_, index) => index !== indexToDelete\r\n    );\r\n    setProductsState(updatedProducts);\r\n\r\n    // 삭제 후 자동 저장\r\n    if (auth?.userDoc?.classCode) {\r\n      setIsLoading(true);\r\n      try {\r\n        const firestoreType =\r\n          type === \"deposits\"\r\n            ? \"deposits\"\r\n            : type === \"installments\"\r\n              ? \"savings\"\r\n              : \"loans\";\r\n        await updateBankingProducts(\r\n          auth.userDoc.classCode,\r\n          firestoreType,\r\n          updatedProducts\r\n        );\r\n        setMessage(\"상품이 삭제되었습니다.\");\r\n        setMessageType(\"info\");\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n          setMessageType(\"\");\r\n        }, 2000);\r\n      } catch (error) {\r\n        logger.error(\"상품 삭제 중 오류:\", error);\r\n        setMessage(\"삭제 중 오류가 발생했습니다.\");\r\n        setMessageType(\"error\");\r\n        // 삭제 실패 시 원래 상태로 되돌릴 수 있습니다 (선택적)\r\n        setProductsState(productsState);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (auth.loading) {\r\n    return <AlchanLoading />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/* 로딩 오버레이 */}\r\n      {isLoading && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <AlchanLoading />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"px-4 py-6 sm:px-6\">\r\n        {/* 페이지 헤더 */}\r\n        <PageHeader\r\n          title=\"통합 금융 관리\"\r\n          subtitle=\"예금, 적금, 대출 상품을 관리하세요\"\r\n          icon={Landmark}\r\n          backButton={\r\n            <ActionButton\r\n              variant=\"ghost\"\r\n              icon={ChevronLeft}\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              뒤로가기\r\n            </ActionButton>\r\n          }\r\n        />\r\n\r\n        {/* 메시지 표시 */}\r\n        {message && (\r\n          <div className={`mb-4 p-4 rounded-xl ${messageType === 'error'\r\n            ? 'bg-red-900/40 text-red-200 border border-red-800/50'\r\n            : messageType === 'success'\r\n              ? 'bg-emerald-900/40 text-emerald-200 border border-emerald-800/50'\r\n              : 'bg-blue-900/40 text-blue-200 border border-blue-800/50'\r\n            }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className={activeView === \"admin\" ? \"content-box\" : \"\"}>\r\n          {(activeView === \"parking\" || activeView === \"userProducts\") && (\r\n            <ParkingAccount\r\n              auth={auth}\r\n              depositProducts={formattedDepositProducts}\r\n              installmentProducts={formattedInstallmentProducts}\r\n              loanProducts={formattedLoanProducts}\r\n              activeView={activeView}\r\n              onViewChange={setActiveView}\r\n              onLoadUserProducts={loadAllUserProducts}\r\n              allUserProducts={allUserProducts}\r\n              onDeleteUserProduct={handleAdminDeleteUserProduct}\r\n              isLoading={isLoading}\r\n            />\r\n          )}\r\n          {activeView === \"admin\" &&\r\n            auth.user &&\r\n            (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\") && (\r\n              <div>\r\n                <h2 className=\"admin-header\">\r\n                  관리자 - 금융 상품 관리 (일 복리 기준)\r\n                </h2>\r\n                {/* Savings Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>파킹 예금 상품</h3>\r\n                  <p className=\"admin-info-text\">\r\n                    일 이율(%)과 기간(일)을 입력합니다. 변경 후 '저장' 버튼을\r\n                    클릭하세요.\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          상품명\r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          기간(일)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          일 이율(%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          최소금액(원)\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          관리\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingDepositProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\"예: 0.01\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"deposits\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"deposits\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              삭제\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"deposits\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      추가\r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"deposits\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      예금 상품 저장\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Installment Products */}\r\n                <div className=\"admin-section\">\r\n                  <h3>파킹 적금 상품</h3>\r\n                  <p className=\"admin-info-text\">\r\n                    일 이율(%)과 기간(일)을 입력합니다. 변경 후 '저장' 버튼을\r\n                    클릭하세요.\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          상품명\r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          기간(일)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          일 이율(%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          최소 월납입(원)\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          관리\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingInstallmentProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\"예: 0.011\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.minAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"installments\",\r\n                                  index,\r\n                                  \"minAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"installments\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              삭제\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"installments\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      추가\r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"installments\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      적금 상품 저장\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Loan Products */}\r\n                <div className=\"admin-section\" style={{ borderBottom: \"none\" }}>\r\n                  <h3>파킹 대출 상품</h3>\r\n                  <p className=\"admin-info-text\">\r\n                    일 이율(%)과 기간(일)을 입력합니다. 변경 후 '저장' 버튼을\r\n                    클릭하세요.\r\n                  </p>\r\n                  <table className=\"admin-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: \"25%\" }}>\r\n                          상품명\r\n                        </th>\r\n                        <th style={{ width: \"15%\" }}>\r\n                          기간(일)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          일 이율(%)\r\n                        </th>\r\n                        <th style={{ width: \"18%\" }}>\r\n                          최대 대출액(원)\r\n                        </th>\r\n                        <th style={{ width: \"12%\" }}>\r\n                          관리\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {parkingLoanProducts.map((p, index) => (\r\n                        <tr key={p.id}>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={p.name || ''}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"name\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={p.termInDays || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"termInDays\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              step=\"0.001\"\r\n                              min=\"0\"\r\n                              value={p.dailyRate || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"dailyRate\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              placeholder=\"예: 0.05\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={p.maxAmount || 0}\r\n                              onChange={(e) =>\r\n                                handleParkingProductChange(\r\n                                  \"loans\",\r\n                                  index,\r\n                                  \"maxAmount\",\r\n                                  e.target.value\r\n                                )\r\n                              }\r\n                              className=\"admin-input\"\r\n                              disabled={isLoading}\r\n                              style={{ backgroundColor: 'rgba(255,255,255,0.05)', color: '#fff', border: '1px solid rgba(255,255,255,0.1)' }}\r\n                            />\r\n                          </td>\r\n                          <td className=\"admin-td\">\r\n                            <button\r\n                              onClick={() =>\r\n                                deleteParkingProduct(\"loans\", index)\r\n                              }\r\n                              className={`admin-button-small delete-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                              disabled={isLoading}>\r\n                              삭제\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"admin-action-buttons\">\r\n                    <button\r\n                      onClick={() => addParkingProduct(\"loans\")}\r\n                      className={`admin-button-small add-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      추가\r\n                    </button>\r\n                    <button\r\n                      onClick={() => saveParkingProducts(\"loans\")}\r\n                      className={`admin-button-small save-button ${isLoading ? \"disabled-button\" : \"\"}`}\r\n                      disabled={isLoading}>\r\n                      대출 상품 저장\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          {activeView === \"admin\" &&\r\n            !(\r\n              auth.user &&\r\n              (auth.userDoc?.isAdmin || auth.userDoc?.role === \"admin\")\r\n            ) && (\r\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800\">\r\n                관리자 권한이 필요합니다.\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default Banking;"],"names":["getTeacherAccount","async","classCode","usersRef","collection","db","q","query","where","limit","snapshot","getDocs","empty","teacherDoc","docs","_objectSpread","id","data","error","logger","cls","type","concat","isActive","disabled","variant","arguments","length","undefined","formatCurrency","amount","Math","round","toLocaleString","calculateCompoundInterest","principal","dailyRate","days","interest","total","pow","calculateDailyInterest","ICON_MAP","parking","_jsx","Wallet","size","className","deposits","Landmark","savings","PiggyBank","loans","HandCoins","SubscribedProductItem","_ref","product","onCancel","onMaturity","isMatured","maturityDate","Date","daysRemaining","max","differenceInDays","rate","balance","termInDays","dailyInterestAmount","_jsxs","children","name","_Fragment","format","onClick","AvailableProductItem","_ref2","onSubscribe","projectedInterest","TrendingUp","ProductSection","_ref3","title","icon","subscribedProducts","availableProducts","activeTab","setActiveTab","useState","map","p","SubscriptionModal","_ref4","isOpen","onClose","onConfirm","isProcessing","setAmount","numAmount","parseFloat","projectedTotal","isNaN","e","stopPropagation","X","value","onChange","target","placeholder","minAmount","autoFocus","ParkingAccountSection","_ref5","dailyInterest","onDeposit","onWithdraw","userCash","_ref6","auth","depositProducts","installmentProducts","loanProducts","activeView","onViewChange","onLoadUserProducts","allUserProducts","onDeleteUserProduct","user","userDoc","loading","refreshUserDocument","isAdmin","addCash","deductCash","userId","uid","setIsProcessing","message","setMessage","messageType","setMessageType","parkingBalance","setParkingBalance","parkingDailyInterest","setParkingDailyInterest","userDeposits","setUserDeposits","userSavings","setUserSavings","userLoans","setUserLoans","modal","setModal","currentCash","setCurrentCash","cash","displayMessage","text","duration","setTimeout","loadAllData","useCallback","parkingRef","doc","parkingRateProduct","parkingDoc","getDoc","exists","_data$lastInterestDat","lastInterestDate","toDate","isToday","daysToApply","updateDoc","increment","serverTimestamp","setDoc","finalParkingDoc","productsRef","forEach","docSnap","_docSnap$data$maturit","push","useEffect","log","handleOpenModal","handleCloseModal","handleMaturity","teacherId","isLoan","confirmMsg","window","confirm","teacherAccountId","teacherAccount","productRef","String","path","runTransaction","_userSnapshot$data$ca2","_userSnapshot$data2","_teacherSnapshot$data3","_teacherSnapshot$data4","userRef","teacherRef","userSnapshot","transaction","get","teacherSnapshot","Error","currentCashInDb","teacherCashInDb","update","delete","successMsg","activityType","ACTIVITY_TYPES","LOAN_REPAY","DEPOSIT_MATURITY","logActivity","userName","description","metadata","productName","productType","then","handleCancelEarly","confirmMessage","originalProducts","deposit","loan","originalCash","cashChangeAmount","prev","filter","_userSnapshot$data$ca3","_userSnapshot$data3","_teacherSnapshot$data5","_teacherSnapshot$data6","DEPOSIT_WITHDRAW","isEarlyCancellation","handleAdminDeleteSubscribedProduct","deleteDoc","mainTabClass","index","typeLabel","formatKoreanCurrency","toLocaleDateString","amountStr","previousParkingBalance","previousCurrentCash","set","PARKING_DEPOSIT","_parkingSnapshot$data","_parkingSnapshot$data2","PARKING_WITHDRAW","onAdminDelete","subscribeAmount","maxAmount","tempId","now","optimisticProduct","startDate","isOptimistic","_userSnapshot$data$ca","_userSnapshot$data","_teacherSnapshot$data","_teacherSnapshot$data2","newProductData","teacherName","newProductRef","actionText","DEPOSIT_CREATE","LOAN_CREATE","toISOString","convertAdminProductsToAccountFormat","adminProducts","Array","isArray","parseInt","Banking","_auth$userDoc8","_auth$userDoc1","_auth$userDoc10","_auth$userDoc11","_auth$userDoc12","useAuth","navigate","useNavigate","setActiveView","isLoading","setIsLoading","parkingDepositProducts","setParkingDepositProducts","parkingInstallmentProducts","setParkingInstallmentProducts","parkingLoanProducts","setParkingLoanProducts","setAllUserProducts","loadAllUserProducts","_auth$userDoc","_auth$userDoc2","_auth$userDoc3","role","usersQuery","usersSnapshot","userMap","nickname","allProducts","productPromises","Object","keys","productsQuery","productDoc","_productData$maturity","productData","firestoreId","Promise","all","productsArray","formattedDepositProducts","setFormattedDepositProducts","formattedInstallmentProducts","setFormattedInstallmentProducts","formattedLoanProducts","setFormattedLoanProducts","_auth$userDoc7","_auth$userDoc6","bankingData","getBankingProducts","warn","setParkingSavingsProducts","handleParkingProductChange","field","productsState","setProductsState","i","updatedProduct","numValue","dailyRateValue","saveParkingProducts","_auth$userDoc9","products","firestoreType","updateBankingProducts","addParkingProduct","newProduct","deleteParkingProduct","indexToDelete","_auth$userDoc0","updatedProducts","_","AlchanLoading","PageContainer","PageHeader","subtitle","backButton","ActionButton","ChevronLeft","ParkingAccount","_auth$userDoc4","_auth$userDoc5","alert","productId","style","width","backgroundColor","color","border","min","step","borderBottom"],"ignoreList":[],"sourceRoot":""}