"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[180],{293:(e,t,s)=>{s.d(t,{A:()=>n});s(5043),s(5173);var a=s(579);const n=()=>(0,a.jsxs)("div",{className:"login-warning",children:[(0,a.jsx)("h3",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,a.jsx)("p",{children:"\uc544\uc774\ud15c\uc744 \uad6c\ub9e4\ud558\uac70\ub098 \uc0ac\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})]})},783:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5043),n=s(579);const i={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},o={backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},l=(0,a.memo)(function(e){let{showSellCouponModal:t,setShowSellCouponModal:s,currentCoupons:l=0,couponValue:r=1e3,sellAmount:d="",setSellAmount:c,SellCoupon:x}=e;const[p,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)("");if(!t)return null;const g=()=>{c(""),h(""),s(!1)},f=!d||isNaN(parseInt(d))||parseInt(d)<=0||parseInt(d)>l;return(0,n.jsx)("div",{style:i,onClick:g,children:(0,n.jsxs)("div",{style:o,onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"15px",color:"#1f2937"},children:"\ucfe0\ud3f0 \ud310\ub9e4\ud558\uae30"}),(0,n.jsx)("p",{style:{marginBottom:"10px",fontSize:"14px",color:"#4b5563"},children:"\ucfe0\ud3f0\uc744 \ud310\ub9e4\ud558\uace0 \ud604\uae08\uc73c\ub85c \uad50\ud658\ud558\uc138\uc694."}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px",padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px",fontSize:"15px"},children:[(0,n.jsx)("span",{children:"\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0:"}),(0,n.jsx)("strong",{children:l.toLocaleString()})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px",padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px",fontSize:"15px",color:"#4f46e5"},children:[(0,n.jsx)("span",{children:"1\ucfe0\ud3f0 \ud310\ub9e4\uac00:"}),(0,n.jsxs)("strong",{children:[r.toLocaleString(),"\uc6d0"]})]}),(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(d);if(h(""),!t||isNaN(t)||t<=0)h("\uc720\ud6a8\ud55c \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(t>l)h("\ubcf4\uc720\ud55c \ucfe0\ud3f0\ubcf4\ub2e4 \ub9ce\uc740 \uc218\ub7c9\uc744 \ud310\ub9e4\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else{if("function"!==typeof x)return h("\ud310\ub9e4 \ucc98\ub9ac \ud568\uc218\uac00 \uc62c\ubc14\ub974\uac8c \uc804\ub2ec\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),void console.error("SellCoupon prop is not a function:",x);m(!0);try{await x()}catch(s){console.error("\ud310\ub9e4 \ucc98\ub9ac \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958:",s),h(s.message||"\ud310\ub9e4 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}finally{m(!1)}}},children:[(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsx)("label",{htmlFor:"sellAmount",style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#374151"},children:"\ud310\ub9e4\ud560 \ucfe0\ud3f0 \uc218:"}),(0,n.jsx)("input",{id:"sellAmount",type:"number",value:d,onChange:e=>c(e.target.value),min:"1",max:l,style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"},disabled:p,required:!0})]}),u&&(0,n.jsx)("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",padding:"12px 15px",marginBottom:"15px",color:"#b91c1c",fontSize:"14px"},children:(0,n.jsxs)("p",{style:{margin:0},children:["\u26a0\ufe0f ",u]})}),(0,n.jsx)("div",{style:{marginBottom:"20px",padding:"10px 15px",backgroundColor:"#eef2ff",borderRadius:"6px",borderLeft:"4px solid #4f46e5"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:[(0,n.jsx)("span",{children:"\uc608\uc0c1 \uc218\ub839\uc561:"}),(0,n.jsxs)("span",{style:{color:"#4f46e5"},children:[(()=>{const e=parseInt(d);return!isNaN(e)&&e>0?e*r:0})().toLocaleString(),"\uc6d0"]})]})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,n.jsx)("button",{type:"button",onClick:g,style:{padding:"8px 16px",backgroundColor:"#f3f4f6",color:"#4b5563",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",transition:"background-color 0.2s ease"},disabled:p,children:"\ucde8\uc18c"}),(0,n.jsx)("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:f||p?"not-allowed":"pointer",opacity:f||p?.6:1,transition:"background-color 0.2s ease, opacity 0.2s ease"},disabled:f||p,children:p?"\ucc98\ub9ac \uc911...":"\ud310\ub9e4\ud558\uae30"})]})]})]})})})},813:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),n=s(579);const i=(0,a.memo)(function(e){let{showGiftCouponModal:t,setShowGiftCouponModal:s,recipients:a,giftRecipient:i,setGiftRecipient:o,giftAmount:l,setGiftAmount:r,handleGiftCoupon:d,currentCoupons:c,userId:x}=e;if(!t)return null;const p=null!==a&&void 0!==a?a:[],m=()=>{s(!1),"function"===typeof r?r(""):console.error("setGiftAmount prop is not a function!",r),"function"===typeof o?o(""):console.error("setGiftRecipient prop is not a function!",o)};return(0,n.jsx)("div",{className:"modal-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:m,children:(0,n.jsxs)("div",{className:"gift-coupon-modal",style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"400px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h3",{style:{marginTop:0,color:"#374151"},children:"\ucfe0\ud3f0 \uc120\ubb3c\ud558\uae30"}),(0,n.jsx)("div",{style:{marginBottom:"16px",color:"#6b7280"},children:(0,n.jsxs)("p",{children:["\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0: ",(0,n.jsxs)("strong",{children:[c,"\uac1c"]})]})}),(0,n.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#4b5563"},children:"\ubc1b\ub294 \uc0ac\ub78c"}),(0,n.jsxs)("select",{value:i,onChange:e=>"function"===typeof o?o(e.target.value):console.error("setGiftRecipient is not a function"),style:{width:"100%",padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},children:[(0,n.jsx)("option",{value:"",children:"\ubc1b\ub294 \ubd84\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),p.filter(e=>e.id!==x).map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))]})]}),(0,n.jsxs)("div",{className:"form-group",style:{marginBottom:"24px"},children:[(0,n.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#4b5563"},children:"\uc120\ubb3c\ud560 \ucfe0\ud3f0 \uc218\ub7c9"}),(0,n.jsx)("input",{type:"number",value:l,onChange:e=>"function"===typeof r?r(e.target.value):console.error("setGiftAmount is not a function"),placeholder:"\uc120\ubb3c\ud560 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud558\uc138\uc694",style:{width:"100%",padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},max:c,min:"1"})]}),(0,n.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,n.jsx)("button",{className:"cancel-button",onClick:m,style:{padding:"8px 16px",backgroundColor:"#f3f4f6",color:"#4b5563",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"\ucde8\uc18c"}),(0,n.jsx)("button",{className:"confirm-button",onClick:d,disabled:!i||!l||parseInt(l)<=0||parseInt(l)>c,style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:!i||!l||parseInt(l)<=0||parseInt(l)>c?"not-allowed":"pointer",opacity:!i||!l||parseInt(l)<=0||parseInt(l)>c?.7:1},children:"\uc120\ubb3c\ud558\uae30"})]})]})})})},3057:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(4919),n=s(5043),i=s(5016),o=s(579);const l=(0,n.memo)(function(e){var t;let{showDonationHistoryModal:s,setShowDonationHistoryModal:l,students:r=[],classCode:d,donations:c=[]}=e;const{user:x,userDoc:p}=(0,i.As)(),m=null===x||void 0===x?void 0:x.uid,u=(null===p||void 0===p?void 0:p.classCode)||d,[h,g]=(0,n.useState)([]),[f,b]=(0,n.useState)(!0),[y,j]=(0,n.useState)(null),[v,w]=(0,n.useState)(0),N={display:s?"flex":"none",position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},k={table:{width:"100%",borderCollapse:"collapse",fontSize:"14px",borderRadius:"8px",overflow:"hidden",border:"1px solid #e5e7eb"},thead:{backgroundColor:"#f3f4f6"},th:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151",borderBottom:"1px solid #d1d5db",position:"sticky",top:0,backgroundColor:"#f3f4f6",zIndex:1},td:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",color:"#4b5563"},tr:{transition:"background-color 0.2s"},emptyContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px dashed #d1d5db",textAlign:"center",color:"#6b7280"},emptyIcon:{fontSize:"36px",marginBottom:"16px",color:"#9ca3af"}};(0,n.useEffect)(()=>{if(s){(()=>{if(b(!0),j(null),g([]),w(0),console.log("[DonationHistoryModal] \ub370\uc774\ud130 \ucc98\ub9ac \uc2dc\uc791:",{userClassCode:u,studentsCount:r.length,donationsCount:c.length,students:r.map(e=>({id:e.id||e.uid,name:e.name||e.nickname,classCode:e.classCode})),donations:c}),!u)return j("\ud559\uae09 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc5c6\uc5b4 \uae30\ubd80 \ub0b4\uc5ed\uc744 \ucc98\ub9ac\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void b(!1);try{const e=c||[],t=Array.isArray(r)?r:[],s={};let a=0;e.forEach(e=>{const t=Number(e.amount)||0,n=e.userId,i=e.userName||e.name||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790";n&&(s[n]||(s[n]={amount:0,name:i}),s[n].amount+=t,i&&"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790"!==i&&(s[n].name=i)),a+=t}),w(a),console.log("[DonationHistoryModal] \uae30\ubd80 \uc9d1\uacc4:",{donationsByStudent:s,totalAmount:a,uniqueDonors:Object.keys(s).length});const n=new Set;t.forEach(e=>{const t=e.id||e.uid||e.userId;t&&n.add(t)}),Object.keys(s).forEach(e=>{n.add(e)});const i=new Map;t.forEach(e=>{const t=e.id||e.uid||e.userId,s=e.name||e.nickname||"\uc54c \uc218 \uc5c6\ub294 \ud559\uc0dd";t&&i.set(t,s)}),Object.keys(s).forEach(e=>{i.has(e)&&"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790"===s[e].name||i.set(e,s[e].name)});const o=Array.from(n).map(e=>{var t;return{id:e,name:i.get(e)||"\uc54c \uc218 \uc5c6\ub294 \ud559\uc0dd",cumulativeAmount:(null===(t=s[e])||void 0===t?void 0:t.amount)||0,isCurrentUser:m&&e===m}}).sort((e,t)=>e.name.localeCompare(t.name,"ko"));console.log("[DonationHistoryModal] \ucd5c\uc885 \ud559\uc0dd \ubaa9\ub85d:",{totalStudents:o.length,studentsWithDonations:o.filter(e=>e.cumulativeAmount>0).length,summary:o}),g(o)}catch(e){console.error("[DonationHistoryModal] \uae30\ubd80 \ub0b4\uc5ed \ucc98\ub9ac \uc911 \uc624\ub958:",e),j("\uae30\ubd80 \ub0b4\uc5ed\uc744 \ucc98\ub9ac\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{b(!1)}})()}},[s,r,m,u,c]);const C=()=>{l(!1)},S=e=>"number"!==typeof e||isNaN(e)?"0":e.toLocaleString(),A=(null===(t=h.find(e=>e.isCurrentUser))||void 0===t?void 0:t.cumulativeAmount)||0;return(0,o.jsx)("div",{style:N,onClick:C,children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",width:"100%",maxWidth:"600px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[(0,o.jsxs)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:["\uc6b0\ub9ac \ud559\uae09 \uae30\ubd80 \ud604\ud669",u&&(0,o.jsx)("span",{style:{marginLeft:"8px",fontSize:"14px",backgroundColor:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:u})]}),(0,o.jsx)("button",{onClick:C,style:{background:"none",border:"none",cursor:"pointer",fontSize:"20px",color:"#9ca3af",padding:"0",lineHeight:"1"},"aria-label":"\ub2eb\uae30",children:"\xd7"})]}),(0,o.jsxs)("div",{style:{padding:"20px",overflowY:"auto",maxHeight:"calc(85vh - 120px)"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"#eef2ff",padding:"12px 15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #c7d2fe"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,o.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#4338ca"},children:"\ub0b4 \ub204\uc801 \uae30\ubd80\uc561"}),(0,o.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#4f46e5"},children:[S(A)," \ucfe0\ud3f0"]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#4338ca"},children:"\uc6b0\ub9ac \ud559\uae09 \ucd1d \uae30\ubd80\uc561"}),(0,o.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#4f46e5"},children:[S(v)," \ucfe0\ud3f0"]})]})]}),f?(0,o.jsx)("div",{style:{textAlign:"center",padding:"40px 0",color:"#6b7280"},children:"\uae30\ubd80 \ud604\ud669\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."}):y?(0,o.jsx)("div",{style:{color:"#ef4444",textAlign:"center",padding:"40px 0"},children:y}):(0,o.jsx)(o.Fragment,{children:h.length>0?(0,o.jsxs)("table",{style:k.table,children:[(0,o.jsx)("thead",{style:k.thead,children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:k.th,children:"\ud559\uc0dd \uc774\ub984"}),(0,o.jsx)("th",{style:(0,a.A)((0,a.A)({},k.th),{},{width:"150px",textAlign:"right"}),children:"\ub204\uc801 \uae30\ubd80 \ucfe0\ud3f0"})]})}),(0,o.jsx)("tbody",{children:h.map((e,t)=>(0,o.jsxs)("tr",{style:(0,a.A)((0,a.A)({},k.tr),{},{backgroundColor:e.isCurrentUser?"#e0e7ff":t%2===0?"#f9fafb":"#ffffff"}),onMouseOver:t=>{e.isCurrentUser||(t.currentTarget.style.backgroundColor="#eef2ff")},onMouseOut:s=>{e.isCurrentUser||(s.currentTarget.style.backgroundColor=t%2===0?"#f9fafb":"#ffffff")},children:[(0,o.jsxs)("td",{style:k.td,children:[e.name,e.isCurrentUser&&(0,o.jsx)("span",{style:{marginLeft:"8px",fontSize:"12px",backgroundColor:"#dbeafe",color:"#1e40af",padding:"2px 6px",borderRadius:"10px",fontWeight:"600",verticalAlign:"middle"},children:"\ub098"})]}),(0,o.jsxs)("td",{style:(0,a.A)((0,a.A)({},k.td),{},{textAlign:"right",color:e.cumulativeAmount>0?"#4f46e5":"#6b7280",fontWeight:e.cumulativeAmount>0?"600":"normal"}),children:[S(e.cumulativeAmount)," \ucfe0\ud3f0"]})]},e.id||t))})]}):(0,o.jsxs)("div",{style:k.emptyContainer,children:[(0,o.jsx)("div",{style:k.emptyIcon,children:"\ud83d\udc65"}),(0,o.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"500"},children:"\ud559\uae09 \ud559\uc0dd \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uac70\ub098 \ub4f1\ub85d\ub41c \ud559\uc0dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("p",{style:{margin:0,fontSize:"14px"},children:"\uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."})]})})]}),(0,o.jsx)("div",{style:{padding:"16px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:(0,o.jsx)("button",{onClick:C,style:{padding:"8px 16px",backgroundColor:"#e5e7eb",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s, color 0.2s"},onMouseOver:e=>{e.target.style.backgroundColor="#d1d5db",e.target.style.color="#1f2937"},onMouseOut:e=>{e.target.style.backgroundColor="#e5e7eb",e.target.style.color="#374151"},children:"\ub2eb\uae30"})})]})})})},5226:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),n=s(579);const i=(0,a.memo)(function(e){let{showDonateModal:t,setShowDonateModal:s,currentCoupons:i,onDonate:o,classCode:l}=e;const[r,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(""),[p,m]=(0,a.useState)(!1),u=()=>{p||(s(!1),d(""),x(""))};return t?(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:u,children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",width:"100%",maxWidth:"500px",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[(0,n.jsxs)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:["\ucfe0\ud3f0 \uae30\ubd80\ud558\uae30",l&&(0,n.jsx)("span",{style:{marginLeft:"8px",fontSize:"14px",backgroundColor:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"12px",fontWeight:"500"},children:l})]}),(0,n.jsx)("button",{onClick:u,disabled:p,style:{background:"none",border:"none",cursor:p?"not-allowed":"pointer",fontSize:"20px",color:"#9ca3af",padding:"0",lineHeight:"1"},"aria-label":"\ub2eb\uae30",children:"\xd7"})]}),(0,n.jsxs)("div",{style:{padding:"20px"},children:[(0,n.jsx)("div",{style:{marginBottom:"20px"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#eef2ff",padding:"12px 16px",borderRadius:"8px",border:"1px solid #c7d2fe"},children:[(0,n.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#4338ca"},children:"\ud604\uc7ac \ubcf4\uc720 \ucfe0\ud3f0"}),(0,n.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#4f46e5"},children:[i.toLocaleString()," \uac1c"]})]})}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"\uae30\ubd80\ud560 \ucfe0\ud3f0 \uc218\ub7c9"}),(0,n.jsx)("input",{type:"number",min:"1",max:i,value:r,onChange:e=>d(e.target.value),disabled:p,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"16px",backgroundColor:p?"#f9fafb":"white",cursor:p?"not-allowed":"text"},placeholder:"\uae30\ubd80\ud560 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"\uae30\ubd80 \uba54\uc2dc\uc9c0 (\uc120\ud0dd\uc0ac\ud56d)"}),(0,n.jsx)("textarea",{value:c,onChange:e=>x(e.target.value),disabled:p,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",resize:"vertical",minHeight:"80px",backgroundColor:p?"#f9fafb":"white",cursor:p?"not-allowed":"text"},placeholder:"\uae30\ubd80\uc640 \ud568\uaed8 \uc804\ud560 \uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),r&&!isNaN(parseInt(r,10))&&(0,n.jsx)("div",{style:{backgroundColor:"#f0fdf4",padding:"12px 16px",borderRadius:"8px",border:"1px solid #bbf7d0",marginBottom:"20px"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:"#15803d"},children:"\uae30\ubd80 \uc608\uc815 \ucfe0\ud3f0"}),(0,n.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#16a34a"},children:[parseInt(r,10).toLocaleString()," \uac1c"]})]})})]}),(0,n.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,n.jsx)("button",{onClick:u,disabled:p,style:{padding:"8px 16px",backgroundColor:"#e5e7eb",color:"#374151",border:"none",borderRadius:"6px",cursor:p?"not-allowed":"pointer",fontWeight:"500",opacity:p?.6:1},children:"\ucde8\uc18c"}),(0,n.jsx)("button",{onClick:async()=>{const e=parseInt(r,10);if(isNaN(e)||e<=0)alert("\uc62c\ubc14\ub978 \ucfe0\ud3f0 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(e>i)alert("\ubcf4\uc720 \ucfe0\ud3f0\ubcf4\ub2e4 \ub9ce\uc774 \uae30\ubd80\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else{m(!0);try{await o(e,c)&&(d(""),x(""),s(!1))}catch(t){console.error("[DonateCouponModal] \uae30\ubd80 \ucc98\ub9ac \uc911 \uc624\ub958:",t),alert("\uae30\ubd80 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{m(!1)}}},disabled:p||!r||isNaN(parseInt(r,10))||parseInt(r,10)<=0||parseInt(r,10)>i,style:{padding:"8px 16px",backgroundColor:p||!r||isNaN(parseInt(r,10))||parseInt(r,10)<=0||parseInt(r,10)>i?"#9ca3af":"#4f46e5",color:"white",border:"none",borderRadius:"6px",cursor:p||!r||isNaN(parseInt(r,10))||parseInt(r,10)<=0||parseInt(r,10)>i?"not-allowed":"pointer",fontWeight:"500"},children:p?"\uae30\ubd80 \uc911...":"\uae30\ubd80\ud558\uae30"})]})]})}):null})},5533:(e,t,s)=>{s.d(t,{bL:()=>n});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null===e||void 0===e||""===e)return"0"+t;let s=e;if("string"===typeof s&&(s=s.replace(/[,\uc6d0\uac1c]/g,"").trim(),s=parseFloat(s),isNaN(s)))return"0"+t;if(0===s)return"0"+t;const a=s<0,n=[{value:1e20,name:"\ub2e8"},{value:1e16,name:"\uacbd"},{value:1e12,name:"\uc870"},{value:1e8,name:"\uc5b5"},{value:1e4,name:"\ub9cc"}],i=[];let o=Math.abs(s);for(const{value:r,name:d}of n)if(o>=r){const e=Math.floor(o/r);i.push("".concat(e).concat(d)),o%=r}o>0&&(o%1!==0?i.push(o.toLocaleString("ko-KR",{maximumFractionDigits:2})):i.push(Math.floor(o)));let l=i.join(" ");return t&&(l+=t),a&&(l="-"+l),l},n=e=>a(e,"\uc6d0")},5967:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(5043),n=s(5016),i=s(4919),o=s(791),l=s(5472);const r=e=>e||null,d=new Map,c=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"".concat(e,"_").concat(t,"_").concat(JSON.stringify(s))},x=e=>{const t=d.get(e);if(!t)return null;return Date.now()-t.timestamp>9e5?(d.delete(e),null):t.data},p=(e,t)=>{d.set(e,{data:t,timestamp:Date.now()})},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{userId:s,type:a,startDate:n,endDate:d,limitCount:m=50,lastDoc:u=null}=t;try{const u=c(e,"activity_logs",t),h=x(u);if(h)return console.log("[AdminDatabaseService] \uce90\uc2dc\ub41c \ud65c\ub3d9 \ub85c\uadf8 \uc0ac\uc6a9"),h;console.log("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc11c\ubc84 \uc0ac\uc774\ub4dc \ud544\ud130\ub9c1 \uc870\ud68c:",{classCode:e,userId:s,type:a,limitCount:m});const g=[(0,l._M)("classCode","==",e)];if(s&&g.push((0,l._M)("userId","==",s)),n){const e=n instanceof Date?l.Dc.fromDate(n):n;g.push((0,l._M)("timestamp",">=",e))}if(d){const e=d instanceof Date?l.Dc.fromDate(d):d;g.push((0,l._M)("timestamp","<=",e))}const f=a&&!n&&!d;f&&g.push((0,l._M)("type","==",r(a))),g.push((0,l.My)("timestamp","desc")),g.push((0,l.AB)(m+1));const b=(0,l.P)((0,l.rJ)(o.db,"activity_logs"),...g),y=await(0,l.GG)(b);let j=[];if(y.forEach(e=>{var t;const s=e.data();j.push((0,i.A)((0,i.A)({id:e.id},s),{},{timestamp:(null===(t=s.timestamp)||void 0===t?void 0:t.toDate())||new Date}))}),a&&!f){const e=r(a);j=j.filter(t=>t.type===e)}const v=j.length>m,w=j.slice(0,m),N=w.length>0?w[w.length-1].id:null;console.log("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc870\ud68c \uc644\ub8cc: ".concat(w.length,"\uac1c (\uc11c\ubc84 \ud544\ud130\ub9c1)"));const k={logs:w,hasMore:v,lastDoc:N};return p(u,k),k}catch(h){throw console.error("[AdminDatabaseService] \ud65c\ub3d9 \ub85c\uadf8 \uc870\ud68c \uc624\ub958:",h),h}};var u=s(579);const h=()=>{const{userDoc:e,allClassMembers:t}=(0,n.As)(),[s,r]=(0,a.useState)("all"),[c,x]=(0,a.useState)([]),[p,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[b,y]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[w,N]=(0,a.useState)(""),[k,C]=(0,a.useState)(""),[S,A]=(0,a.useState)("all"),I=null===e||void 0===e?void 0:e.classCode,T=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(I&&"\ubbf8\uc9c0\uc815"!==I){h(!0),f(null);try{const n="all"!==S||""!==k.trim(),r={userId:"all"!==s?s:null,limitCount:n?100:10,lastDoc:e?null:a,useCache:!e},d=await m(I,r);if(0===d.logs.length&&t.length>0&&e){const e="all"!==s?[s]:t.map(e=>e.id||e.uid),a=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{limitCount:s=100}=t;if(console.log("[AdminDatabaseService] transactions \uceec\ub809\uc158 \uc870\ud68c \uc2dc\uc791:",{userIdsCount:e.length}),0===e.length)return console.warn("[AdminDatabaseService] userIds\uac00 \ube44\uc5b4\uc788\uc74c"),[];const a=[];for(let t=0;t<e.length;t+=10)a.push(e.slice(t,t+10));const n=[];for(const e of a){let t=(0,l.P)((0,l.rJ)(o.db,"transactions"),(0,l._M)("userId","in",e),(0,l.My)("timestamp","desc"),(0,l.AB)(s));(await(0,l.GG)(t)).forEach(e=>{var t;const s=e.data();n.push((0,i.A)((0,i.A)({id:e.id},s),{},{timestamp:(null===(t=s.timestamp)||void 0===t?void 0:t.toDate())||new Date}))})}return console.log("[AdminDatabaseService] transactions \uc870\ud68c \uc644\ub8cc: ".concat(n.length,"\uac1c")),n}catch(g){return console.error("[AdminDatabaseService] transactions \uc870\ud68c \uc624\ub958:",g),[]}}(e,{limitCount:100});a.length>0&&(d.logs=(e=>e.map(e=>{let t="CASH_INCOME",s=e.description||"\uac70\ub798";return e.description&&(e.description.includes("\ucfe0\ud3f0")&&e.description.includes("\ud68d\ub4dd")?t="COUPON_EARN":e.description.includes("\ucfe0\ud3f0")&&e.description.includes("\uc0ac\uc6a9")?t="COUPON_USE":e.description.includes("\uc544\uc774\ud15c")&&e.description.includes("\uad6c\ub9e4")?t="ITEM_PURCHASE":e.description.includes("\uc544\uc774\ud15c")&&e.description.includes("\uc0ac\uc6a9")?t="ITEM_USE":e.description.includes("\uc544\uc774\ud15c")&&(e.description.includes("\ud310\ub9e4")||e.description.includes("\ub4f1\ub85d"))?t="ITEM_SELL":e.description.includes("\uc1a1\uae08")?t=e.amount>0?"CASH_TRANSFER_RECEIVE":"CASH_TRANSFER_SEND":"expense"===e.type&&(t="CASH_EXPENSE")),{id:e.id,userId:e.userId,userName:e.userName||"\uc54c \uc218 \uc5c6\uc74c",type:t,description:s,timestamp:e.timestamp,metadata:(0,i.A)({amount:e.amount,category:e.category},e.metadata)}}))(a),d.hasMore=!1)}x(e?d.logs:e=>[...e,...d.logs]),y(d.hasMore),v(d.lastDoc)}catch(n){console.error("[AdminDatabase] \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",n),f("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{h(!1)}}else f("\ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},[I,s,t,S,k]);(0,a.useEffect)(()=>{x([]),v(null),y(!1),T(!0,null)},[s,I]),(0,a.useEffect)(()=>{c.length>0&&(x([]),v(null),y(!1),T(!0,null))},[S,k]);const M=()=>{!p&&b&&T(!1,j)},E=e=>{if(!e)return"text-gray-600";const t=e.toString().toLowerCase();return t.includes("\ucfe0\ud3f0")&&(t.includes("\ud68d\ub4dd")||t.includes("\uc9c0\uae09"))?"text-green-600":t.includes("\ucfe0\ud3f0")&&(t.includes("\uc0ac\uc6a9")||t.includes("\ud68c\uc218"))?"text-red-600":"COUPON_EARN"===e||"COUPON_GIVE"===e||"COUPON_TRANSFER_RECEIVE"===e||"ADMIN_COUPON_GIVE"===e?"text-green-600":"COUPON_USE"===e||"COUPON_TAKE"===e||"COUPON_TRANSFER_SEND"===e||"ADMIN_COUPON_TAKE"===e?"text-red-600":t.includes("\uc544\uc774\ud15c")&&t.includes("\uad6c\ub9e4")?"text-blue-600":t.includes("\uc544\uc774\ud15c")&&t.includes("\uc0ac\uc6a9")?"text-orange-600":t.includes("\uc544\uc774\ud15c")&&(t.includes("\ud310\ub9e4")||t.includes("\ub4f1\ub85d"))?"text-purple-600":"ITEM_PURCHASE"===e||"ITEM_MARKET_BUY"===e?"text-blue-600":"ITEM_USE"===e?"text-orange-600":"ITEM_SELL"===e||"ITEM_MARKET_LIST"===e?"text-purple-600":t.includes("\uc9c0\uae09")||t.includes("\uc785\uae08")||t.includes("\uc218\uc2e0")?"text-green-600":t.includes("\ud68c\uc218")||t.includes("\ucd9c\uae08")||t.includes("\uc1a1\uae08")?"text-red-600":"ADMIN_CASH_SEND"===e||"CASH_TRANSFER_RECEIVE"===e||"CASH_DEPOSIT"===e||"\ud604\uae08 \uc785\uae08"===e?"text-green-600":"ADMIN_CASH_TAKE"===e||"CASH_TRANSFER_SEND"===e||"CASH_WITHDRAW"===e||"\ud604\uae08 \ucd9c\uae08"===e?"text-red-600":t.includes("\ub9e4\uc218")?"text-blue-600":t.includes("\ub9e4\ub3c4")?"text-indigo-600":t.includes("\uac70\ub798\uc138")||t.includes("\uc138\uae08")?"text-yellow-600":"STOCK_BUY"===e?"text-blue-600":"STOCK_SELL"===e?"text-indigo-600":"STOCK_TAX"===e||"TAX_PAYMENT"===e?"text-yellow-600":"GAME_WIN"===e?"text-green-600":"GAME_LOSE"===e?"text-red-600":"text-gray-600"},z=e=>{if(!e)return"-";return(e instanceof Date?e:new Date(e)).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},D=c.filter(e=>{if(k){var t,s,a;const n=k.toLowerCase();if(!((null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(s=e.userName)||void 0===s?void 0:s.toLowerCase().includes(n))||(null===(a=e.type)||void 0===a?void 0:a.toLowerCase().includes(n))))return!1}if("all"!==S){var n,i;const t=(null===(n=e.type)||void 0===n?void 0:n.toString())||"",s=(null===(i=e.description)||void 0===i?void 0:i.toString())||"";if("coupon"===S){if(!(["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>t===e)||t.includes("\ucfe0\ud3f0")||s.includes("\ucfe0\ud3f0")))return!1}else if("item"===S){if(!(["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>t===e)||t.includes("\uc544\uc774\ud15c")||s.includes("\uc544\uc774\ud15c")))return!1}else if("cash"===S){if(!(t.includes("CASH")||t.includes("\uc1a1\uae08")||t.includes("\uc785\uae08")||t.includes("\ucd9c\uae08")||t.includes("ADMIN_CASH")||t.includes("TRANSFER")||t.includes("\ud604\uae08")))return!1}else if("stock"===S){if(!(t.includes("STOCK")||t.includes("\uc8fc\uc2dd")||t.includes("\uac70\ub798\uc138")||t.includes("TAX")))return!1}else if("game"===S){if(!(t.includes("GAME")||t.includes("\uac8c\uc784")))return!1}}return!0});return(0,u.jsxs)("div",{className:"admin-database p-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud559\uae09 \ub370\uc774\ud130\ubca0\uc774\uc2a4"}),(0,u.jsx)("p",{className:"text-gray-600",children:"\ud559\uae09 \ud559\uc0dd\ub4e4\uc758 \ubaa8\ub4e0 \ud65c\ub3d9 \ub0b4\uc5ed\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,u.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud559\uc0dd \uc120\ud0dd"}),(0,u.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,u.jsx)("option",{value:"all",children:"\uc804\uccb4 \ud559\uc0dd"}),t&&t.map(e=>(0,u.jsx)("option",{value:e.id||e.id,children:e.name||e.nickname||"\uc774\ub984 \uc5c6\uc74c"},e.id||e.uid))]})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud65c\ub3d9 \ud0c0\uc785"}),(0,u.jsxs)("select",{value:S,onChange:e=>A(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,u.jsx)("option",{value:"all",children:"\uc804\uccb4 \ud65c\ub3d9"}),(0,u.jsx)("option",{value:"coupon",children:"\ucfe0\ud3f0 \uad00\ub828"}),(0,u.jsx)("option",{value:"item",children:"\uc544\uc774\ud15c \uad00\ub828"}),(0,u.jsx)("option",{value:"cash",children:"\ud604\uae08 \uad00\ub828"}),(0,u.jsx)("option",{value:"stock",children:"\uc8fc\uc2dd \uad00\ub828"}),(0,u.jsx)("option",{value:"game",children:"\uac8c\uc784 \uad00\ub828"})]})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uac80\uc0c9"}),(0,u.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"\ud559\uc0dd\uba85, \ud65c\ub3d9 \ub0b4\uc6a9 \uac80\uc0c9...",className:"w-full p-2 border rounded-md"})]}),(0,u.jsxs)("div",{className:"flex items-end gap-2",children:[(0,u.jsx)("button",{onClick:()=>{(e=>{const t=[];d.forEach((s,a)=>{a.startsWith(e)&&t.push(a)}),t.forEach(e=>d.delete(e)),console.log("[AdminDatabaseService] ".concat(e," \ud559\uae09 \uce90\uc2dc \ucd08\uae30\ud654 \uc644\ub8cc"))})(I),x([]),v(null),y(!1),N(""),T(!0,null)},disabled:p,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300",children:"\uc0c8\ub85c\uace0\uce68"}),(0,u.jsx)("button",{onClick:async()=>{N("\uc870\ud68c \uc911...");try{let e=[];const t={},s={};c.forEach(e=>{const a=e.type||"undefined";t[a]=(t[a]||0)+1,s[a]||(s[a]={description:e.description,userName:e.userName,timestamp:e.timestamp})}),e.push("=== \ud604\uc7ac \ub85c\ub4dc\ub41c \ub370\uc774\ud130 \ud0c0\uc785 \ubd84\ud3ec ==="),e.push("\ucd1d ".concat(c.length,"\uac1c\uc758 \ub85c\uadf8")),e.push(""),Object.entries(t).sort((e,t)=>t[1]-e[1]).forEach(t=>{let[a,n]=t;e.push("".concat(a,": ").concat(n,"\uac1c")),s[a]&&e.push("  \uc608\uc2dc: ".concat(s[a].description)),(a.includes("COUPON")||a.includes("\ucfe0\ud3f0")||a.includes("ITEM")||a.includes("\uc544\uc774\ud15c"))&&e.push("  \u2b50 \ucfe0\ud3f0/\uc544\uc774\ud15c \uad00\ub828 \ud0c0\uc785 \ubc1c\uacac!")}),e.push(""),e.push("=== \ud544\ud130\ubcc4 \ub9e4\uce6d \uacb0\uacfc ===");const a={coupon:e=>{var t,s;const a=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",n=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>a===e)||a.includes("\ucfe0\ud3f0")||n.includes("\ucfe0\ud3f0")},item:e=>{var t,s;const a=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",n=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>a===e)||a.includes("\uc544\uc774\ud15c")||n.includes("\uc544\uc774\ud15c")},cash:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("CASH")||s.includes("\uc1a1\uae08")||s.includes("\uc785\uae08")||s.includes("\ucd9c\uae08")||s.includes("ADMIN_CASH")||s.includes("TRANSFER")||s.includes("\ud604\uae08")},stock:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("STOCK")||s.includes("\uc8fc\uc2dd")||s.includes("\uac70\ub798\uc138")||s.includes("TAX")},game:e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("GAME")||s.includes("\uac8c\uc784")}};Object.entries(a).forEach(t=>{let[s,a]=t;const n=c.filter(e=>a(e));e.push("".concat(s,": ").concat(n.length,"\uac1c"));const i=new Set(n.map(e=>e.type));i.size>0&&e.push("  \ub9e4\uce6d\ub41c \ud0c0\uc785: ".concat(Array.from(i).join(", ")))});const n=e.join("\n");N(n)}catch(g){console.error("[AdminDatabase DEBUG] \uc624\ub958:",g),N("\uc624\ub958: ".concat(g.message))}},className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",children:"\ub514\ubc84\uadf8"})]})]}),w&&(0,u.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 rounded-md",children:[(0,u.jsx)("h4",{className:"font-semibold mb-2",children:"\ub514\ubc84\uadf8 \uc815\ubcf4:"}),(0,u.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:w})]})]}),c.length>0&&(()=>{const e=c.filter(e=>{var t,s;const a=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",n=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218","\ucfe0\ud3f0 \uc1a1\uae08","\ucfe0\ud3f0 \uc218\uc2e0","\ucfe0\ud3f0 \uae30\ubd80","\ucfe0\ud3f0 \ud310\ub9e4","COUPON_EARN","COUPON_USE","COUPON_GIVE","COUPON_TAKE","COUPON_TRANSFER_SEND","COUPON_TRANSFER_RECEIVE","COUPON_DONATE","COUPON_SELL"].some(e=>a===e)||a.includes("\ucfe0\ud3f0")||n.includes("\ucfe0\ud3f0")}).length,t=c.filter(e=>{var t,s;const a=(null===(t=e.type)||void 0===t?void 0:t.toString())||"",n=(null===(s=e.description)||void 0===s?void 0:s.toString())||"";return["\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc544\uc774\ud15c \ud68d\ub4dd","\uc544\uc774\ud15c \uc774\ub3d9","ITEM_PURCHASE","ITEM_USE","ITEM_SELL","ITEM_MARKET_LIST","ITEM_MARKET_BUY","ITEM_OBTAIN","ITEM_MOVE"].some(e=>a===e)||a.includes("\uc544\uc774\ud15c")||n.includes("\uc544\uc774\ud15c")}).length,s=c.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("CASH")||s.includes("\uc1a1\uae08")||s.includes("\uc785\uae08")||s.includes("\ucd9c\uae08")||s.includes("ADMIN_CASH")||s.includes("TRANSFER")}).length,a=c.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("STOCK")||s.includes("\uc8fc\uc2dd")||s.includes("\uac70\ub798\uc138")||s.includes("TAX")}).length,n=c.filter(e=>{var t;const s=(null===(t=e.type)||void 0===t?void 0:t.toString())||"";return s.includes("GAME")||s.includes("\uac8c\uc784")}).length;return(0,u.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\ud65c\ub3d9 \ud1b5\uacc4 (\ud074\ub9ad\ud558\uc5ec \ud544\ud130)"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,u.jsxs)("div",{className:"bg-blue-50 p-3 rounded cursor-pointer hover:shadow-md transition-shadow",onClick:()=>A("all"),children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc804\uccb4 \ud65c\ub3d9"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-600",children:c.length})]}),(0,u.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(e>0?"bg-green-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>e>0&&A("coupon"),title:0===e?"\uc544\uc9c1 \ucfe0\ud3f0 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \ucfe0\ud3f0 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\ucfe0\ud3f0 \uad00\ub828"}),(0,u.jsx)("div",{className:"text-xl font-bold ".concat(e>0?"text-green-600":"text-gray-400"),children:e})]}),(0,u.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(t>0?"bg-purple-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>t>0&&A("item"),title:0===t?"\uc544\uc9c1 \uc544\uc774\ud15c \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uc544\uc774\ud15c \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc544\uc774\ud15c \uad00\ub828"}),(0,u.jsx)("div",{className:"text-xl font-bold ".concat(t>0?"text-purple-600":"text-gray-400"),children:t})]}),(0,u.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(s>0?"bg-yellow-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>s>0&&A("cash"),title:0===s?"\uc544\uc9c1 \ud604\uae08 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \ud604\uae08 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\ud604\uae08 \uad00\ub828"}),(0,u.jsx)("div",{className:"text-xl font-bold ".concat(s>0?"text-yellow-600":"text-gray-400"),children:s})]}),(0,u.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(a>0?"bg-indigo-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>a>0&&A("stock"),title:0===a?"\uc544\uc9c1 \uc8fc\uc2dd \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uc8fc\uc2dd \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uc8fc\uc2dd \uad00\ub828"}),(0,u.jsx)("div",{className:"text-xl font-bold ".concat(a>0?"text-indigo-600":"text-gray-400"),children:a})]}),(0,u.jsxs)("div",{className:"p-3 rounded transition-shadow ".concat(n>0?"bg-red-50 cursor-pointer hover:shadow-md":"bg-gray-100 cursor-not-allowed opacity-50"),onClick:()=>n>0&&A("game"),title:0===n?"\uc544\uc9c1 \uac8c\uc784 \uad00\ub828 \ud65c\ub3d9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":"\ud074\ub9ad\ud558\uc5ec \uac8c\uc784 \uad00\ub828 \ud65c\ub3d9\ub9cc \ubcf4\uae30",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\uac8c\uc784 \uad00\ub828"}),(0,u.jsx)("div",{className:"text-xl font-bold ".concat(n>0?"text-red-600":"text-gray-400"),children:n})]})]})]})})(),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"\uc804\uccb4 \ud65c\ub3d9 \ub0b4\uc5ed"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\uc2dc\uac04\uc21c\uc73c\ub85c \uc815\ub82c\ub41c \ubaa8\ub4e0 \ud65c\ub3d9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),g&&(0,u.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),p&&0===c.length&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,u.jsx)("p",{className:"mt-4 text-gray-600",children:"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]}),!p||c.length>0?(0,u.jsx)("div",{children:0===D.length?(0,u.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,u.jsx)("p",{className:"text-lg mb-2",children:k?"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud65c\ub3d9 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,u.jsxs)("p",{className:"text-sm",children:["\uc804\uccb4 \ub370\uc774\ud130: ",c.length,"\uac1c"]})]}):(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["\ucd1d ",D.length,"\uac1c\uc758 \ud65c\ub3d9 (\uac80\uc0c9: ",c.length,"\uac1c \uc911)"]}),D.map((e,t)=>{return(0,u.jsx)("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 hover:shadow-lg transition-shadow",children:(0,u.jsx)("div",{className:"flex justify-between items-start",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,u.jsx)("span",{className:"font-bold text-base ".concat(E(e.type)),children:(s=e.type,{"\ucfe0\ud3f0 \ud68d\ub4dd":"\ucfe0\ud3f0 \ud68d\ub4dd","\ucfe0\ud3f0 \uc0ac\uc6a9":"\ucfe0\ud3f0 \uc0ac\uc6a9","\ucfe0\ud3f0 \uc9c0\uae09":"\ucfe0\ud3f0 \uc9c0\uae09","\ucfe0\ud3f0 \ud68c\uc218":"\ucfe0\ud3f0 \ud68c\uc218","\uc544\uc774\ud15c \uad6c\ub9e4":"\uc544\uc774\ud15c \uad6c\ub9e4","\uc544\uc774\ud15c \uc0ac\uc6a9":"\uc544\uc774\ud15c \uc0ac\uc6a9","\uc544\uc774\ud15c \ud310\ub9e4":"\uc544\uc774\ud15c \ud310\ub9e4","\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d":"\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d","\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4":"\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4","\uc8fc\uc2dd \ub9e4\uc218":"\uc8fc\uc2dd \ub9e4\uc218","\uc8fc\uc2dd \ub9e4\ub3c4":"\uc8fc\uc2dd \ub9e4\ub3c4","\uc8fc\uc2dd \uac70\ub798\uc138":"\uc8fc\uc2dd \uac70\ub798\uc138","\uac70\ub798\uc138":"\uc8fc\uc2dd \uac70\ub798\uc138","\uc1a1\uae08":"\uc1a1\uae08","\uc1a1\uae08 \uc218\uc2e0":"\uc1a1\uae08 \uc218\uc2e0","\ub3c8 \uc1a1\uae08":"\uc1a1\uae08","\ub3c8 \ucd9c\uae08":"\ucd9c\uae08","\ub3c8 \uc785\uae08":"\uc785\uae08","\ud604\uae08 \ucd9c\uae08":"\ucd9c\uae08","\ud604\uae08 \uc785\uae08":"\uc785\uae08",COUPON_EARN:"\ucfe0\ud3f0 \ud68d\ub4dd",COUPON_USE:"\ucfe0\ud3f0 \uc0ac\uc6a9",COUPON_GIVE:"\ucfe0\ud3f0 \uc9c0\uae09",COUPON_TAKE:"\ucfe0\ud3f0 \ud68c\uc218",COUPON_TRANSFER_SEND:"\ucfe0\ud3f0 \uc1a1\uae08",COUPON_TRANSFER_RECEIVE:"\ucfe0\ud3f0 \uc218\uc2e0",ITEM_PURCHASE:"\uc544\uc774\ud15c \uad6c\ub9e4",ITEM_USE:"\uc544\uc774\ud15c \uc0ac\uc6a9",ITEM_SELL:"\uc544\uc774\ud15c \ud310\ub9e4",ITEM_MARKET_LIST:"\uc544\uc774\ud15c \uc2dc\uc7a5 \ub4f1\ub85d",ITEM_MARKET_BUY:"\uc544\uc774\ud15c \uc2dc\uc7a5 \uad6c\ub9e4",CASH_TRANSFER_SEND:"\uc1a1\uae08",CASH_TRANSFER_RECEIVE:"\uc1a1\uae08 \uc218\uc2e0",CASH_WITHDRAW:"\ucd9c\uae08",CASH_DEPOSIT:"\uc785\uae08",STOCK_BUY:"\uc8fc\uc2dd \ub9e4\uc218",STOCK_SELL:"\uc8fc\uc2dd \ub9e4\ub3c4",STOCK_TAX:"\uc8fc\uc2dd \uac70\ub798\uc138",TAX_PAYMENT:"\uc8fc\uc2dd \uac70\ub798\uc138",ADMIN_CASH_SEND:"\uad00\ub9ac\uc790 \uc9c0\uae09",ADMIN_CASH_TAKE:"\uad00\ub9ac\uc790 \ud68c\uc218",ADMIN_COUPON_GIVE:"\uad00\ub9ac\uc790 \ucfe0\ud3f0 \uc9c0\uae09",ADMIN_COUPON_TAKE:"\uad00\ub9ac\uc790 \ucfe0\ud3f0 \ud68c\uc218",TASK_COMPLETE:"\uacfc\uc81c \uc644\ub8cc",GAME_WIN:"\uac8c\uc784 \uc2b9\ub9ac",GAME_LOSE:"\uac8c\uc784 \ud328\ubc30"}[s]||s)}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.userName||"\uc54c \uc218 \uc5c6\uc74c"}),(0,u.jsx)("span",{className:"text-xs text-gray-500",children:z(e.timestamp)})]}),(0,u.jsx)("p",{className:"text-gray-800 text-sm mb-2 font-medium",children:e.description||"\uc124\uba85 \uc5c6\uc74c"}),e.metadata&&Object.keys(e.metadata).length>0&&(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-200",children:[e.metadata.activity&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\ud65c\ub3d9:"})," ",e.metadata.activity]}),e.metadata.reason&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\uc0ac\uc720:"})," ",e.metadata.reason]}),e.metadata.itemName&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\uc544\uc774\ud15c:"})," ",e.metadata.itemName]}),e.metadata.quantity&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\uc218\ub7c9:"})," ",e.metadata.quantity]}),void 0!==e.metadata.amount&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\uae08\uc561:"})," ",e.metadata.amount.toLocaleString(),"\uc6d0"]}),void 0!==e.metadata.couponAmount&&(0,u.jsxs)("div",{className:"mb-1",children:[(0,u.jsx)("strong",{children:"\ucfe0\ud3f0:"})," ",e.metadata.couponAmount,"\uac1c"]})]})]})})},e.id||t);var s}),b&&(0,u.jsx)("div",{className:"text-center py-4",children:(0,u.jsx)("button",{onClick:M,disabled:p,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300",children:p?"\ub85c\ub529 \uc911...":"\ub354\ubcf4\uae30"})})]})}):null]})}},6353:()=>{},6555:(e,t,s)=>{s.d(t,{Gu:()=>l,LN:()=>i,pp:()=>r,rA:()=>d,zY:()=>o});s(5043);var a=s(2024),n=(s(5881),s(579));const i=e=>{let{children:t,className:s=""}=e;return(0,n.jsx)("div",{className:"min-h-full w-full bg-[#0a0a12] ".concat(s),children:(0,n.jsx)("div",{className:"w-full max-w-none px-2 md:px-3 lg:px-4 py-1 md:py-2",children:t})})},o=e=>{let{title:t,subtitle:s,icon:a,badge:i,action:o,backButton:l,className:r=""}=e;return(0,n.jsxs)("section",{className:"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 md:px-4 md:py-2 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 md:gap-2 mb-2 md:mb-3 ".concat(r),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[l,a&&(0,n.jsx)("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-cyan-900/30 rounded-lg flex items-center justify-center text-cyan-400 shrink-0 shadow-sm border border-cyan-500/30",children:(0,n.jsx)(a,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h2",{className:"text-lg md:text-xl font-bold text-white tracking-tight",children:t}),i]}),s&&(0,n.jsx)("p",{className:"text-xs md:text-sm text-slate-400 font-medium",children:s})]})]}),o&&(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 md:ml-auto",children:o})]})},l=e=>{let{message:t="\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}=e;return null},r=e=>{let{icon:t,title:s,description:a,action:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[t&&(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-[#14142380] shadow-lg flex items-center justify-center mb-4 border border-cyan-900/30",children:(0,n.jsx)(t,{className:"w-8 h-8 text-slate-400"})}),s&&(0,n.jsx)("h3",{className:"text-lg font-bold text-slate-300 mb-2",children:s}),a&&(0,n.jsx)("p",{className:"text-slate-500 font-medium mb-6 max-w-md",children:a}),i]})},d=e=>{let{children:t,icon:s,variant:i="primary",size:o="md",loading:l=!1,disabled:r=!1,onClick:d,className:c="",title:x}=e;return(0,n.jsxs)("button",{onClick:d,disabled:r||l,title:x,className:"inline-flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 active:scale-95 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat({primary:"bg-cyan-500 text-slate-900 hover:bg-cyan-400 ring-1 ring-cyan-400 shadow-cyan-500/30",secondary:"bg-slate-800 hover:bg-slate-700 text-slate-200",outline:"bg-transparent text-slate-300 ring-1 ring-slate-600 hover:bg-slate-800 hover:ring-slate-500 shadow-sm","outline-green":"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm","outline-red":"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",danger:"bg-transparent text-rose-400 ring-1 ring-rose-600 hover:bg-rose-900/30 hover:ring-rose-500 shadow-sm",success:"bg-transparent text-emerald-400 ring-1 ring-emerald-600 hover:bg-emerald-900/30 hover:ring-emerald-500 shadow-sm",ghost:"text-slate-400 hover:bg-slate-800 hover:text-white",indigo:"bg-purple-900/30 text-purple-400 hover:bg-purple-900/50"}[i]," ").concat({sm:"px-4 py-2 text-sm",md:"px-5 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[o]," ").concat(c),children:[l?(0,n.jsx)(a.A,{className:"w-4 h-4 animate-spin"}):s?(0,n.jsx)(s,{className:"w-4 h-4"}):null,t]})}},8164:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var a=s(4919),n=s(5043),i=s(579);const o={"\uc74c\uc2dd":["\ud83c\udf55","\ud83c\udf54","\ud83c\udf5f","\ud83c\udf2d","\ud83e\udd50","\ud83e\udd56","\ud83e\uddc0","\ud83c\udf56","\ud83c\udf57","\ud83e\udd53","\ud83c\udf73","\ud83e\udd5e"],"\uc74c\ub8cc":["\u2615","\ud83c\udf75","\ud83e\uddc3","\ud83e\udd64","\ud83e\uddcb","\ud83c\udf7a","\ud83c\udf77","\ud83e\udd5b","\ud83c\udf79","\ud83c\udf78","\ud83c\udf7e","\ud83e\uddc9"],"\uacfc\uc77c":["\ud83c\udf4e","\ud83c\udf4a","\ud83c\udf4b","\ud83c\udf4c","\ud83c\udf49","\ud83c\udf47","\ud83c\udf53","\ud83e\uded0","\ud83c\udf48","\ud83c\udf52","\ud83c\udf51","\ud83e\udd6d"],"\ucc44\uc18c":["\ud83e\udd66","\ud83e\udd6c","\ud83e\udd52","\ud83c\udf3d","\ud83e\udd55","\ud83e\uded1","\ud83c\udf36\ufe0f","\ud83e\udd54","\ud83c\udf60","\ud83e\uddc4","\ud83e\uddc5","\ud83c\udf44"],"\ub514\uc800\ud2b8":["\ud83c\udf70","\ud83c\udf82","\ud83e\uddc1","\ud83e\udd67","\ud83c\udf6e","\ud83c\udf6d","\ud83c\udf6c","\ud83c\udf6b","\ud83c\udf69","\ud83c\udf6a","\ud83c\udf66","\ud83e\uddca"],"\ubb34\uae30":["\u2694\ufe0f","\ud83d\udde1\ufe0f","\ud83c\udff9","\ud83d\udee1\ufe0f","\ud83e\ude93","\ud83d\udd2b","\ud83d\udca3","\ud83e\udde8","\ud83e\ude83","\ud83e\udd4a","\ud83c\udfaf","\ud83c\udfcf"],"\ub9c8\ubc95":["\u2728","\ud83d\udcab","\u2b50","\ud83c\udf1f","\ud83d\udca5","\u26a1","\ud83d\udd25","\u2744\ufe0f","\ud83d\udca7","\ud83c\udf0a","\ud83c\udf2a\ufe0f","\u2604\ufe0f"],"\ubcf4\ubb3c":["\ud83d\udc8e","\ud83d\udc8d","\ud83d\udc51","\ud83c\udfc6","\ud83c\udf81","\ud83d\udcb0","\ud83d\udcb5","\ud83e\ude99","\ud83d\udd2e","\ud83d\udcff","\ud83d\udddd\ufe0f","\ud83c\udf96\ufe0f"],"\ub3c4\uad6c":["\ud83d\udd28","\ud83e\ude9b","\ud83d\udd27","\ud83e\ude9a","\u26cf\ufe0f","\ud83e\ude9d","\ud83e\uddf2","\ud83d\udd29","\u2699\ufe0f","\ud83d\udddc\ufe0f","\u2696\ufe0f","\ud83d\udd26"],"\uc758\ub8cc":["\ud83d\udc8a","\ud83d\udc89","\ud83e\ude79","\ud83e\ude7a","\ud83e\uddea","\ud83e\uddeb","\ud83e\ude78","\ud83e\udda0","\ud83e\uddec","\ud83d\udd2c","\u2697\ufe0f","\ud83c\udf21\ufe0f"],"\uc790\uc5f0":["\ud83c\udf38","\ud83c\udf3a","\ud83c\udf3b","\ud83c\udf39","\ud83c\udf37","\ud83c\udf31","\ud83c\udf3f","\ud83c\udf40","\ud83c\udf8b","\ud83c\udf8d","\ud83c\udf3e","\ud83c\udf34"],"\ud2b9\ubcc4":["\ud83c\udfaa","\ud83c\udfa8","\ud83c\udfad","\ud83c\udfaa","\ud83c\udfaf","\ud83c\udfb2","\ud83c\udfb0","\ud83e\udde9","\ud83e\ude84","\ud83d\udd14","\ud83d\udcef","\ud83e\udd41"],"\uc2e0\uaddc":["\ud83c\udd95","\u2705","\u274c","\u2753","\u2757","\ud83d\udcaf","\ud83d\udd36","\ud83d\udd37","\ud83d\udd38","\ud83d\udd39","\u2660\ufe0f","\u2663\ufe0f"]},l={container:{padding:"20px",maxWidth:"1000px",margin:"0 auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},card:{backgroundColor:"#ffffff",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",padding:"30px",marginBottom:"20px"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"30px",borderRadius:"16px 16px 0 0",marginBottom:"0"},title:{fontSize:"28px",fontWeight:"bold",marginBottom:"8px"},subtitle:{opacity:"0.9",fontSize:"14px"},tabs:{display:"flex",borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb",marginTop:"-4px"},tab:{flex:1,padding:"16px",backgroundColor:"transparent",border:"none",fontSize:"16px",fontWeight:"600",color:"#6b7280",cursor:"pointer",transition:"all 0.3s ease",borderBottom:"3px solid transparent"},activeTab:{color:"#667eea",backgroundColor:"white",borderBottom:"3px solid #667eea"},disabledTab:{opacity:"0.5",cursor:"not-allowed"},formSection:{backgroundColor:"#f9fafb",padding:"20px",borderRadius:"12px",marginBottom:"20px"},formTitle:{fontSize:"20px",fontWeight:"700",color:"#374151",marginBottom:"20px"},inputGroup:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},input:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",transition:"border-color 0.3s ease",boxSizing:"border-box"},textarea:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",minHeight:"100px",resize:"vertical",boxSizing:"border-box"},gridTwo:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},iconSelector:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"2px solid #e5e7eb"},selectedIcon:{fontSize:"48px",width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"12px",marginBottom:"16px"},button:{padding:"12px 24px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},secondaryButton:{backgroundColor:"white",color:"#374151",border:"2px solid #e5e7eb"},iconGrid:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:"8px",marginTop:"16px"},iconButton:{fontSize:"28px",padding:"8px",border:"2px solid transparent",borderRadius:"8px",backgroundColor:"#f9fafb",cursor:"pointer",transition:"all 0.2s ease"},categoryButtons:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},categoryButton:{padding:"8px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},activeCategoryButton:{backgroundColor:"#667eea",color:"white",borderColor:"#667eea"},priceIncreaseSection:{backgroundColor:"#fef3c7",border:"2px solid #fcd34d",padding:"20px",borderRadius:"12px",marginBottom:"20px"},helpText:{fontSize:"13px",color:"#6b7280",marginTop:"8px",lineHeight:"1.5"},checkboxWrapper:{display:"flex",alignItems:"center",gap:"12px"},checkbox:{width:"20px",height:"20px",cursor:"pointer"},buttonGroup:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"30px",paddingTop:"20px",borderTop:"2px solid #e5e7eb"}},r=e=>{let{classCode:t,editingItemFromStore:s,onAddItem:r,onUpdateItem:d,onClose:c}=e;const[x,p]=(0,n.useState)("addItem"),[m,u]=(0,n.useState)(!1),[h,g]=(0,n.useState)("\ub9c8\ubc95"),[f,b]=(0,n.useState)({name:"",description:"",price:"",stock:"",initialStock:"",icon:"\u2728",available:!0,priceIncreasePercentage:"10"});(0,n.useEffect)(()=>{s?(b((0,a.A)((0,a.A)({},s),{},{priceIncreasePercentage:s.priceIncreasePercentage||"10"})),p("editItem")):b({name:"",description:"",price:"",stock:"",initialStock:"",icon:"\u2728",available:!0,priceIncreasePercentage:"10"})},[s]);const y=e=>{const{name:t,value:s,type:n,checked:i}=e.target;b(e=>(0,a.A)((0,a.A)({},e),{},{[t]:"checkbox"===n?i:s}))},j=e=>{p(e),s&&c(),"addItem"===e&&b({name:"",description:"",price:"",stock:"",initialStock:"",icon:"\u2728",available:!0,priceIncreasePercentage:"10"})};return(0,i.jsx)("div",{style:l.container,children:(0,i.jsxs)("div",{style:l.card,children:[(0,i.jsxs)("div",{style:l.header,children:[(0,i.jsx)("h2",{style:l.title,children:"\ud83c\udfea \uc0c1\uc810 \uad00\ub9ac \uc2dc\uc2a4\ud15c"}),(0,i.jsx)("p",{style:l.subtitle,children:"\uc544\uc774\ud15c\uc744 \ucd94\uac00\ud558\uace0 \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,i.jsxs)("div",{style:l.tabs,children:[(0,i.jsx)("button",{style:(0,a.A)((0,a.A)({},l.tab),"addItem"===x?l.activeTab:{}),onClick:()=>j("addItem"),children:"\u2795 \uc544\uc774\ud15c \ucd94\uac00"}),(0,i.jsx)("button",{style:(0,a.A)((0,a.A)((0,a.A)({},l.tab),"editItem"===x?l.activeTab:{}),s?{}:l.disabledTab),disabled:!s,onClick:()=>p("editItem"),children:"\u270f\ufe0f \uc544\uc774\ud15c \uc218\uc815"})]}),(0,i.jsx)("div",{style:{padding:"30px"},children:("addItem"===x||"editItem"===x)&&(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=!(!f||!f.id);if(!f.name||!f.price||!f.stock||isNaN(f.price)||isNaN(f.stock)||parseInt(f.price,10)<0||parseInt(f.stock,10)<0)return void alert("\uc0c1\ud488\uba85, \uac00\uaca9, \uc7ac\uace0\ub97c \uc62c\ubc14\ub974\uac8c (0 \uc774\uc0c1 \uc22b\uc790) \uc785\ub825\ud574\uc8fc\uc138\uc694.");const n=(0,a.A)((0,a.A)({},f),{},{price:parseInt(f.price,10),stock:parseInt(f.stock,10),initialStock:f.initialStock?parseInt(f.initialStock,10):parseInt(f.stock,10),priceIncreasePercentage:parseFloat(f.priceIncreasePercentage)||0,classCode:t});let i=!1;i=s?await d(n):await r(n),i&&(s||(b({name:"",description:"",price:"",stock:"",initialStock:"",icon:"\u2728",available:!0,priceIncreasePercentage:"10"}),p("addItem")))},children:[(0,i.jsxs)("div",{style:l.formSection,children:[(0,i.jsx)("h3",{style:l.formTitle,children:"editItem"===x?"\uc544\uc774\ud15c \uc815\ubcf4 \uc218\uc815":"\uc0c8 \uc544\uc774\ud15c \ub9cc\ub4e4\uae30"}),(0,i.jsxs)("div",{style:l.iconSelector,children:[(0,i.jsx)("label",{style:l.label,children:"\uc544\uc774\ud15c \uc544\uc774\ucf58"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,i.jsx)("div",{style:l.selectedIcon,children:f.icon}),(0,i.jsx)("button",{type:"button",onClick:()=>u(!m),style:(0,a.A)((0,a.A)({},l.button),l.primaryButton),children:"\uc544\uc774\ucf58 \uc120\ud0dd"})]}),m&&(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",width:"100%",boxSizing:"border-box",maxHeight:"400px",overflowY:"auto"},children:[(0,i.jsx)("div",{style:l.categoryButtons,children:Object.keys(o).map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>g(e),style:(0,a.A)((0,a.A)({},l.categoryButton),h===e?l.activeCategoryButton:{}),children:e},e))}),(0,i.jsx)("div",{style:l.iconGrid,children:o[h].map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{b(t=>(0,a.A)((0,a.A)({},t),{},{icon:e})),u(!1)})(e),style:l.iconButton,onMouseEnter:e=>{e.target.style.backgroundColor="#e5e7eb",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.backgroundColor="#f9fafb",e.target.style.transform="scale(1)"},children:e},e))})]})]}),(0,i.jsxs)("div",{style:l.gridTwo,children:[(0,i.jsxs)("div",{style:l.inputGroup,children:[(0,i.jsxs)("label",{style:l.label,children:["\uc0c1\ud488\uba85 ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{name:"name",value:f.name,onChange:y,placeholder:"\uc608: \ub9c8\ubc95\uc758 \ubb3c\uc57d",required:!0,style:l.input})]}),(0,i.jsxs)("div",{style:l.inputGroup,children:[(0,i.jsxs)("label",{style:l.label,children:["\uae30\ubcf8 \uac00\uaca9 (\uc6d0) ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{name:"price",type:"number",value:f.price,onChange:y,placeholder:"\uc608: 1000",required:!0,min:"0",style:l.input})]}),(0,i.jsxs)("div",{style:l.inputGroup,children:[(0,i.jsxs)("label",{style:l.label,children:["\ud604\uc7ac \uc7ac\uace0 ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{name:"stock",type:"number",value:f.stock,onChange:y,placeholder:"\uc608: 10",required:!0,min:"0",style:l.input})]}),(0,i.jsxs)("div",{style:l.inputGroup,children:[(0,i.jsx)("label",{style:l.label,children:"\ucd08\uae30 \uc7ac\uace0 (\uc790\ub3d9 \ubcf4\ucda9 \uae30\uc900)"}),(0,i.jsx)("input",{name:"initialStock",type:"number",value:f.initialStock,onChange:y,placeholder:"\ubbf8\uc785\ub825\uc2dc \ud604\uc7ac \uc7ac\uace0\uc640 \ub3d9\uc77c",min:"0",style:l.input})]})]}),(0,i.jsxs)("div",{style:l.priceIncreaseSection,children:[(0,i.jsx)("label",{style:l.label,children:"\uc790\ub3d9 \uc7ac\uace0 \ubcf4\ucda9 \uc2dc \uac00\uaca9 \uc0c1\uc2b9\ub960 (%)"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,i.jsx)("input",{name:"priceIncreasePercentage",type:"number",value:f.priceIncreasePercentage,onChange:y,placeholder:"10",min:"0",max:"100",step:"0.5",style:(0,a.A)((0,a.A)({},l.input),{},{width:"120px"})}),(0,i.jsx)("span",{style:{fontSize:"16px",color:"#374151"},children:"%"})]}),(0,i.jsxs)("p",{style:l.helpText,children:["\ud83d\udca1 \uc7ac\uace0\uac00 0\uc774 \ub418\uc5b4 \uc790\ub3d9\uc73c\ub85c \ucd08\uae30 \uc7ac\uace0\ub9cc\ud07c \ubcf4\ucda9\ub420 \ub54c\ub9c8\ub2e4 \uac00\uaca9\uc774 \uc124\uc815\ud55c \ube44\uc728\ub9cc\ud07c \uc0c1\uc2b9\ud569\ub2c8\ub2e4.",(0,i.jsx)("br",{}),"\uc608: 10% \uc124\uc815 \uc2dc, 1000\uc6d0 \u2192 1100\uc6d0 \u2192 1210\uc6d0 \uc21c\uc73c\ub85c \uc0c1\uc2b9"]})]}),(0,i.jsxs)("div",{style:l.inputGroup,children:[(0,i.jsx)("label",{style:l.label,children:"\uc0c1\ud488 \uc124\uba85"}),(0,i.jsx)("textarea",{name:"description",value:f.description,onChange:y,placeholder:"\uc544\uc774\ud15c\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",style:l.textarea})]})]}),(0,i.jsxs)("div",{style:l.buttonGroup,children:[(0,i.jsxs)("div",{style:l.checkboxWrapper,children:[(0,i.jsx)("input",{type:"checkbox",name:"available",checked:f.available,onChange:y,style:l.checkbox}),(0,i.jsx)("label",{style:{fontSize:"16px",fontWeight:"500"},children:f.available?"\ud83d\udfe2 \ud310\ub9e4\uc911":"\ud83d\udd34 \ud310\ub9e4\uc911\uc9c0"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"12px"},children:["editItem"===x&&(0,i.jsx)("button",{type:"button",onClick:()=>j("addItem"),style:(0,a.A)((0,a.A)({},l.button),l.secondaryButton),children:"\ucde8\uc18c"}),(0,i.jsx)("button",{type:"submit",style:(0,a.A)((0,a.A)({},l.button),l.primaryButton),children:"editItem"===x?"\u2705 \uc218\uc815 \uc644\ub8cc":"\u2795 \uc544\uc774\ud15c \ucd94\uac00"})]})]})]})})]})})}},8180:(e,t,s)=>{s.r(t),s.d(t,{AlchanLoading:()=>ga,default:()=>ja});var a=s(5043),n=s(3216),i=s(5016),o=s(4919),l=s(4379),r=s(2029),d=s(3165),c=s(5326),x=s(9868),p=s(4473),m=s(2629),u=s(1990),h=s(2171),g=s(6511),f=s(516),b=s(7300),y=s(6790),j=s(7033),v=s(830),w=s(3639),N=s(920),k=s(7118),C=s(8012),S=s(2489),A=s(1680),I=s(2626),T=s(9829),M=s(7365),E=s(9809),z=s(3190),D=s(2382),R=s(614),O=s(9493),L=s(579);const _=e=>{let{className:t,style:s}=e;return(0,L.jsxs)("svg",{className:t,style:s,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsxs)("defs",{children:[(0,L.jsxs)("linearGradient",{id:"iconGradient",x1:"0",y1:"0",x2:"100",y2:"100",gradientUnits:"userSpaceOnUse",children:[(0,L.jsx)("stop",{offset:"0%",stopColor:"#7C3AED"}),(0,L.jsx)("stop",{offset:"100%",stopColor:"#4F46E5"})]}),(0,L.jsxs)("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,L.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,L.jsxs)("feMerge",{children:[(0,L.jsx)("feMergeNode",{in:"coloredBlur"}),(0,L.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,L.jsx)("rect",{x:"5",y:"5",width:"90",height:"90",rx:"22",fill:"url(#iconGradient)"}),(0,L.jsx)("path",{d:"M28 52 L42 66 L72 36",stroke:"white",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),(0,L.jsx)("path",{d:"M75 25 L77 30 L82 30 L78 34 L79 39 L75 36 L71 39 L72 34 L68 30 L73 30 Z",fill:"#FFD700",stroke:"#B45309",strokeWidth:"1"})]})},W=[{id:"todayTasks",label:"\uc54c\ucc2c \uc624\ub298\uc758 \ud560\uc77c",icon:l.A,path:"/dashboard/tasks",category:"main"},{id:"myAssets",label:"\uc54c\ucc2c \ub098\uc758 \uc790\uc0b0",icon:r.A,path:"/my-assets",category:"main"},{id:"couponGoal",label:"\uc54c\ucc2c \ucfe0\ud3f0 \ubaa9\ud45c",icon:d.A,path:"/coupon-goal",category:"main"},{id:"gamesCategory",label:"\uc54c\ucc2c \ud559\uc2b5 \uac8c\uc784",icon:c.A,isCategory:!0,category:"play"},{id:"omokGame",label:"\uc624\ubaa9",icon:x.A,path:"/learning-games/omok",parentId:"gamesCategory"},{id:"typingGame",label:"\ud0c0\uc790\uc5f0\uc2b5",icon:p.A,path:"/learning-games/typing",parentId:"gamesCategory"},{id:"gonuGame",label:"\uace0\ub204 \uac8c\uc784",icon:l.A,path:"/gonu-game",parentId:"gamesCategory"},{id:"chessGame",label:"\uccb4\uc2a4 \uac8c\uc784",icon:m.A,path:"/learning-games/science",parentId:"gamesCategory"},{id:"itemsCategory",label:"\uc54c\ucc2c \uc544\uc774\ud15c",icon:u.A,isCategory:!0,category:"economy"},{id:"myItems",label:"\ub0b4 \uc544\uc774\ud15c",icon:h.A,path:"/my-items",parentId:"itemsCategory"},{id:"itemStore",label:"\uc544\uc774\ud15c \uc0c1\uc810",icon:g.A,path:"/item-shop",parentId:"itemsCategory"},{id:"itemMarket",label:"\uc544\uc774\ud15c \uc2dc\uc7a5",icon:f.A,path:"/item-market",parentId:"itemsCategory"},{id:"financeCategory",label:"\uc54c\ucc2c \uae08\uc735",icon:b.A,isCategory:!0,category:"economy"},{id:"banking",label:"\uc740\ud589",icon:y.A,path:"/banking",parentId:"financeCategory"},{id:"stockTrading",label:"\uc8fc\uc2dd \uac70\ub798\uc18c",icon:j.A,path:"/stock-trading",parentId:"financeCategory"},{id:"auction",label:"\uacbd\ub9e4\uc7a5",icon:v.A,path:"/auction",parentId:"financeCategory"},{id:"realEstate",label:"\ubd80\ub3d9\uc0b0",icon:w.A,path:"/real-estate",parentId:"financeCategory"},{id:"publicCategory",label:"\uc54c\ucc2c \uacf5\uacf5\uae30\uad00",icon:N.A,isCategory:!0,category:"society"},{id:"government",label:"\uc815\ubd80",icon:N.A,path:"/government",parentId:"publicCategory"},{id:"nationalAssembly",label:"\uad6d\ud68c",icon:k.A,path:"/national-assembly",parentId:"publicCategory"},{id:"court",label:"\ubc95\uc6d0",icon:C.A,path:"/court",parentId:"publicCategory"},{id:"policeStation",label:"\uacbd\ucc30\uc11c",icon:S.A,path:"/police",parentId:"publicCategory"},{id:"boardCategory",label:"\uc54c\ucc2c \uac8c\uc2dc\ud310",icon:A.A,isCategory:!0,category:"community"},{id:"learningBoard",label:"\ud559\uc2b5 \uac8c\uc2dc\ud310",icon:I.A,path:"/learning-board",parentId:"boardCategory"},{id:"musicRequest",label:"\uc74c\uc545 \uc2e0\uccad",icon:T.A,path:"/learning-board/music-request",parentId:"boardCategory"},{id:"adminCategory",label:"\uc54c\ucc2c \uad00\ub9ac\uc790",icon:M.A,isCategory:!0,category:"admin",adminOnly:!0},{id:"adminUserGroup",label:"\ud83d\udc65 \ud559\uc0dd \uad00\ub9ac",icon:k.A,isSubGroup:!0,parentId:"adminCategory",adminOnly:!0},{id:"studentManagement",label:"\ud559\uc0dd \ubaa9\ub85d",icon:k.A,path:"/admin/students",parentId:"adminCategory",adminOnly:!0},{id:"classMemberManagement",label:"\ud559\uae09 \uad6c\uc131\uc6d0",icon:k.A,path:"/admin/class-members",parentId:"adminCategory",adminOnly:!0},{id:"adminAssetGroup",label:"\ud83d\udcb0 \uc790\uc0b0 \uad00\ub9ac",icon:y.A,isSubGroup:!0,parentId:"adminCategory",adminOnly:!0},{id:"moneyTransfer",label:"\ub3c8 \ubcf4\ub0b4\uae30/\uac00\uc838\uc624\uae30",icon:y.A,path:"/admin/money-transfer",parentId:"adminCategory",adminOnly:!0},{id:"couponTransfer",label:"\ucfe0\ud3f0 \ubcf4\ub0b4\uae30/\uac00\uc838\uc624\uae30",icon:d.A,path:"/admin/coupon-transfer",parentId:"adminCategory",adminOnly:!0},{id:"adminSettingsGroup",label:"\u2699\ufe0f \ud559\uae09 \uc124\uc815",icon:M.A,isSubGroup:!0,parentId:"adminCategory",adminOnly:!0},{id:"adminAppSettings",label:"\ubaa9\ud45c/\ucfe0\ud3f0 \uc124\uc815",icon:d.A,path:"/admin/app-settings",parentId:"adminCategory",adminOnly:!0},{id:"taskManagement",label:"\ud560\uc77c \uad00\ub9ac",icon:E.A,path:"/admin/task-management",parentId:"adminCategory",adminOnly:!0},{id:"jobManagement",label:"\uc9c1\uc5c5 \uad00\ub9ac",icon:z.A,path:"/admin/job-settings",parentId:"adminCategory",adminOnly:!0},{id:"salarySettings",label:"\uae09\uc5ec \uc124\uc815",icon:y.A,path:"/admin/salary-settings",parentId:"adminCategory",adminOnly:!0},{id:"adminSystemGroup",label:"\ud83d\udd27 \uc2dc\uc2a4\ud15c",icon:M.A,isSubGroup:!0,parentId:"adminCategory",adminOnly:!0},{id:"activityLog",label:"\ub370\uc774\ud130\ubca0\uc774\uc2a4",icon:A.A,path:"/admin/activity-log",parentId:"adminCategory",adminOnly:!0},{id:"adminPage",label:"\uad00\ub9ac\uc790 \uc81c\uc5b4\ud310",icon:M.A,path:"/admin/page",parentId:"adminCategory",adminOnly:!0}],B={main:"\uba54\uc778",play:"\uac8c\uc784",economy:"\uacbd\uc81c",society:"\uc0ac\ud68c",community:"\ucee4\ubba4\ub2c8\ud2f0",admin:"\uad00\ub9ac"},P=e=>{let{title:t,children:s}=e;return(0,L.jsxs)("div",{className:"mb-6",children:[(0,L.jsx)("h3",{className:"px-4 text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:t}),(0,L.jsx)("ul",{className:"space-y-1",children:s})]})},F=e=>{let{icon:t,label:s,active:a,hasSubmenu:n,onClick:i}=e;return(0,L.jsx)("li",{children:(0,L.jsxs)("button",{onClick:i,className:"w-full flex items-center justify-between px-4 py-2.5 rounded-xl transition-all duration-200 group ".concat(a?"bg-indigo-500/20 text-indigo-400 font-bold shadow-sm border border-indigo-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"),children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(t,{className:"w-[18px] h-[18px] ".concat(a?"text-indigo-400":"text-slate-500 group-hover:text-slate-300")}),(0,L.jsx)("span",{className:"text-sm",children:s})]}),n&&(0,L.jsx)(D.A,{className:"w-3.5 h-3.5 text-slate-400"})]})})},Q=e=>{let{icon:t,label:s,active:a,onClick:n}=e;return(0,L.jsxs)("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(a?"text-indigo-400 bg-indigo-500/20 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"text-slate-500 hover:text-slate-200 hover:bg-white/5"),children:[(0,L.jsx)(t,{className:"w-3.5 h-3.5"}),s]})},H=e=>{let{category:t,children:s,isExpanded:a,onToggle:n,hasActiveChild:i}=e;const o=t.icon;return(0,L.jsxs)("div",{className:"mb-1",children:[(0,L.jsxs)("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group ".concat(i?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"text-slate-400 hover:bg-white/5 hover:text-slate-200"),children:[(0,L.jsx)(o,{className:"w-[18px] h-[18px] transition-colors flex-shrink-0 ".concat(i?"text-indigo-400":"text-slate-500 group-hover:text-slate-300")}),(0,L.jsx)("span",{className:"flex-1 text-left",children:t.label}),(0,L.jsx)(D.A,{className:"w-3.5 h-3.5 transition-transform duration-300 opacity-50 flex-shrink-0 ".concat(a?"rotate-180":"")})]}),(0,L.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(a?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,L.jsx)("div",{className:"pl-4 mt-2 space-y-1 border-l-2 border-slate-700 ml-4",children:s})})]})};function q(e){let{isOpen:t,onClose:s,isCollapsed:l=!1}=e;const r=(0,n.zy)(),d=(0,n.Zp)(),{userDoc:c,logout:x}=(0,i.As)(),[p,m]=(0,a.useState)({}),[u,h]=(0,a.useState)(window.innerWidth<768);(0,a.useEffect)(()=>{const e=()=>h(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const g=e=>!!e&&(r.pathname===e||r.pathname.startsWith("".concat(e,"/"))),f=e=>W.some(t=>t.parentId===e&&g(t.path)),b=e=>{e.path&&(d(e.path),u&&(null===s||void 0===s||s()))},y=(null===c||void 0===c?void 0:c.isAdmin)||(null===c||void 0===c?void 0:c.isSuperAdmin),j=null===c||void 0===c?void 0:c.isSuperAdmin;let v="\ud559\uc0dd";null!==c&&void 0!==c&&c.isSuperAdmin?v="\uc571 \uad00\ub9ac\uc790":null!==c&&void 0!==c&&c.isAdmin&&(v="\uad50\uc0ac");const w=(null===c||void 0===c?void 0:c.name)||(null===c||void 0===c?void 0:c.nickname)||"\uc0ac\uc6a9\uc790",N=e=>{const t=W.filter(t=>t.category===e&&(!(t.adminOnly&&!y)&&!(t.superAdminOnly&&!j)));return 0===t.length?null:(0,L.jsx)(P,{title:B[e],children:t.map(e=>{if(e.isCategory){const t=W.filter(t=>t.parentId===e.id&&(!(t.adminOnly&&!y)&&!(t.superAdminOnly&&!j)));return 0===t.length?null:(0,L.jsx)(H,{category:e,isExpanded:p[e.id]||f(e.id),onToggle:()=>{return t=e.id,void m(e=>(0,o.A)((0,o.A)({},e),{},{[t]:!e[t]}));var t},hasActiveChild:f(e.id),children:t.map(e=>e.isSubGroup?(0,L.jsx)("div",{className:"mt-3 mb-1 first:mt-0",children:(0,L.jsx)("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider px-2",children:e.label})},e.id):(0,L.jsx)(Q,{icon:e.icon,label:e.label,active:g(e.path),onClick:()=>b(e)},e.id))},e.id)}return e.parentId?null:(0,L.jsx)(F,{icon:e.icon,label:e.label,active:g(e.path),onClick:()=>b(e)},e.id)})},e)};return l&&!u?(0,L.jsxs)("aside",{className:"hidden md:flex flex-col w-20 bg-[#141423] border-r border-[#00fff2]/10 h-screen sticky top-0 left-0 z-50 shadow-xl transition-all duration-300",children:[(0,L.jsx)("div",{style:{height:"64px",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #4f46e5, #7c3aed, #4f46e5)"},children:(0,L.jsx)("div",{style:{padding:"4px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:(0,L.jsx)(_,{style:{width:"32px",height:"32px"}})})}),(0,L.jsx)("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-2",children:W.filter(e=>!e.parentId&&!e.isCategory).map(e=>{if(e.adminOnly&&!y)return null;if(e.superAdminOnly&&!j)return null;const t=e.icon,s=g(e.path);return(0,L.jsx)("button",{onClick:()=>b(e),title:e.label,className:"w-14 h-14 mx-auto rounded-2xl flex items-center justify-center transition-all duration-200 ".concat(s?"bg-gradient-to-br from-indigo-600 to-violet-700 text-white shadow-lg shadow-indigo-500/40 border-none":"bg-[#1a1a2e] border border-slate-700/50 text-slate-400 hover:bg-indigo-900/30 hover:text-indigo-400 hover:border-indigo-500/30"),children:(0,L.jsx)(t,{size:24})},e.id)})}),(0,L.jsx)("div",{className:"p-4 border-t border-slate-800 bg-[#0a0a12]/50",children:(0,L.jsx)("div",{className:"w-10 h-10 mx-auto rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold",children:w.charAt(0)})})]}):(0,L.jsxs)(L.Fragment,{children:[u&&t&&(0,L.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden",onClick:s}),(0,L.jsxs)("aside",{className:"\n          fixed inset-y-0 left-0 z-50 w-72 bg-[#141423] border-r border-[#00fff2]/10 shadow-[0_4px_20px_rgba(0,0,0,0.5)] transform transition-transform duration-300 ease-in-out\n          ".concat(u?t?"translate-x-0":"-translate-x-full":"relative translate-x-0","\n          lg:relative lg:translate-x-0 lg:w-72 flex flex-col shrink-0\n        "),children:[(0,L.jsxs)("div",{style:{height:"72px",minHeight:"72px",margin:"12px",display:"flex",alignItems:"center",alignItems:"center",background:"linear-gradient(135deg, rgba(10, 10, 18, 0.95), rgba(20, 20, 35, 0.95))",border:"1px solid rgba(0, 255, 242, 0.2)",boxShadow:"0 0 15px rgba(0, 255, 242, 0.1)"},children:[(0,L.jsx)("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"80px",height:"80px",background:"rgba(255,255,255,0.1)",borderRadius:"50%"}}),(0,L.jsx)("div",{style:{position:"absolute",bottom:"-30px",left:"-10px",width:"60px",height:"60px",background:"rgba(255,255,255,0.08)",borderRadius:"50%"}}),(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"0 18px",width:"100%",position:"relative",zIndex:10},children:[(0,L.jsx)("div",{style:{padding:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"1px solid rgba(255,255,255,0.1)"},children:(0,L.jsx)(_,{style:{width:"36px",height:"36px"}})}),(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,L.jsx)("span",{style:{fontSize:"22px",fontWeight:"900",color:"#00fff2",fontFamily:"'Jua', sans-serif",lineHeight:"1.1",textShadow:"0 0 10px rgba(0, 255, 242, 0.5)"},children:"\uc54c\ucc2c"}),(0,L.jsx)("span",{style:{fontSize:"11px",fontWeight:"bold",color:"rgba(232, 232, 255, 0.7)",letterSpacing:"0.2em",lineHeight:"1.1",marginTop:"3px"},children:"ALCHAN"})]})]}),u&&(0,L.jsx)("button",{onClick:s,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",padding:"6px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",border:"none",color:"white",cursor:"pointer"},children:(0,L.jsx)(R.A,{size:18})})]}),(0,L.jsxs)("nav",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-8 scrollbar-hide",children:[N("main"),N("play"),N("economy"),N("society"),N("community"),N("admin")]}),(0,L.jsx)("div",{className:"p-4 border-t border-slate-800 bg-[#0a0a12]/50",children:(0,L.jsxs)("div",{onClick:async()=>{x&&(await x(),d("/login"))},className:"flex items-center gap-3 p-3 rounded-xl bg-[#141423] shadow-sm border border-slate-700 hover:shadow-md hover:border-indigo-500/50 transition-all cursor-pointer group",children:[(0,L.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold",children:w.charAt(0)}),(0,L.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,L.jsx)("p",{className:"text-sm font-bold text-slate-200 truncate",children:w}),(0,L.jsx)("p",{className:"text-xs text-slate-500 truncate",children:v})]}),(0,L.jsx)(O.A,{className:"w-4 h-4 text-slate-400 group-hover:text-red-500 transition-colors"})]})})]})]})}var G=s(791),U=s(3946),J=s(8326),V=s(9463),K=s(4459),X=s(7737),Y=s(9855),Z=s(3005),$=s(5472),ee=s(6099),te=s(7095),se=s(6210);ee.A,r.A,d.A,te.A,c.A,b.A,k.A,se.A;var ae=s(8393),ne=s(7940),ie=s(2300),oe=s(9233),le=s(3677),re=s(7666),de=s(6963);const ce=function(e){let{isOpen:t,onClose:s}=e;const{isDarkMode:n,toggleDarkMode:o,fontSize:l,setFontSize:r}=(0,Z.DP)(),{resetTutorial:d}=function(){const{user:e}=(0,i.As)(),[t,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.uid?(async()=>{try{const t=(0,$.H9)(G.db,"users",e.uid,"settings","tutorial"),a=await(0,$.x7)(t);a.exists()&&a.data().completed||s(!0)}catch(t){console.error("\ud29c\ud1a0\ub9ac\uc5bc \uccb4\ud06c \uc624\ub958:",t)}finally{o(!1)}})():o(!1)},[null===e||void 0===e?void 0:e.uid]),{showTutorial:t,loading:n,completeTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,$.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,$.BN)(t,{completed:!0,completedAt:(0,$.O5)()}),s(!1)}catch(t){console.error("\ud29c\ud1a0\ub9ac\uc5bc \uc644\ub8cc \uc800\uc7a5 \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid]),skipTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,$.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,$.BN)(t,{completed:!0,skipped:!0,skippedAt:(0,$.O5)()}),s(!1)}catch(t){console.error("\ud29c\ud1a0\ub9ac\uc5bc \uc2a4\ud0b5 \uc800\uc7a5 \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid]),resetTutorial:(0,a.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,$.H9)(G.db,"users",e.uid,"settings","tutorial");await(0,$.BN)(t,{completed:!1}),s(!0)}catch(t){console.error("\ud29c\ud1a0\ub9ac\uc5bc \ub9ac\uc14b \uc624\ub958:",t)}},[null===e||void 0===e?void 0:e.uid])}}(),[c,x]=(0,a.useState)("false"!==localStorage.getItem("alchan-notifications")),[p,m]=(0,a.useState)("false"!==localStorage.getItem("alchan-sounds"));return t?(0,L.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,L.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl",children:[(0,L.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700",children:[(0,L.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"\uc124\uc815"}),(0,L.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,L.jsx)(R.A,{size:20,className:"text-gray-500"})})]}),(0,L.jsxs)("div",{className:"overflow-y-auto p-4 space-y-6",children:[(0,L.jsxs)("section",{children:[(0,L.jsx)("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider",children:"\ud654\uba74"}),(0,L.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-4",children:[(0,L.jsxs)("div",{className:"flex items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,L.jsx)(ae.A,{size:20,className:"text-indigo-500"}):(0,L.jsx)(ne.A,{size:20,className:"text-amber-500"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\ub2e4\ud06c \ubaa8\ub4dc"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc5b4\ub450\uc6b4 \ud654\uba74\uc73c\ub85c \ub208\uc758 \ud53c\ub85c\ub97c \uc904\uc5ec\uc694"})]})]}),(0,L.jsx)("button",{onClick:o,className:"w-12 h-7 rounded-full transition-colors relative ".concat(n?"bg-indigo-500":"bg-gray-300"),children:(0,L.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(n?"left-6":"left-1")})})]}),(0,L.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,L.jsx)(ie.A,{size:20,className:"text-blue-500"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\uae00\uaf34 \ud06c\uae30"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc77d\uae30 \ud3b8\ud55c \ud06c\uae30\ub97c \uc120\ud0dd\ud558\uc138\uc694"})]})]}),(0,L.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Z.$N).map(e=>{let[t,{label:s}]=e;return(0,L.jsx)("button",{onClick:()=>r(t),className:"py-2 rounded-xl text-sm font-medium transition-all ".concat(l===t?"bg-indigo-500 text-white":"bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500"),children:s},t)})})]})]})]}),(0,L.jsxs)("section",{children:[(0,L.jsx)("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider",children:"\uc54c\ub9bc"}),(0,L.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(oe.A,{size:20,className:"text-green-500"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\ud478\uc2dc \uc54c\ub9bc"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc0c8 \uc18c\uc2dd\uc744 \uc54c\ub824\ub4dc\ub824\uc694"})]})]}),(0,L.jsx)("button",{onClick:()=>{const e=!c;x(e),localStorage.setItem("alchan-notifications",String(e))},className:"w-12 h-7 rounded-full transition-colors relative ".concat(c?"bg-green-500":"bg-gray-300"),children:(0,L.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(c?"left-6":"left-1")})})]}),(0,L.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(le.A,{size:20,className:"text-purple-500"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\uc18c\ub9ac"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc54c\ub9bc\uc74c\uacfc \ud6a8\uacfc\uc74c"})]})]}),(0,L.jsx)("button",{onClick:()=>{const e=!p;m(e),localStorage.setItem("alchan-sounds",String(e))},className:"w-12 h-7 rounded-full transition-colors relative ".concat(p?"bg-purple-500":"bg-gray-300"),children:(0,L.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(p?"left-6":"left-1")})})]})]})]}),(0,L.jsxs)("section",{children:[(0,L.jsx)("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3 uppercase tracking-wider",children:"\uae30\ud0c0"}),(0,L.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl divide-y divide-gray-200 dark:divide-gray-600",children:[(0,L.jsxs)("button",{onClick:()=>{window.confirm("\ud29c\ud1a0\ub9ac\uc5bc\uc744 \ub2e4\uc2dc \ubcf4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(d(),s())},className:"flex items-center justify-between p-4 w-full hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors",children:[(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(re.A,{size:20,className:"text-amber-500"}),(0,L.jsxs)("div",{className:"text-left",children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\ud29c\ud1a0\ub9ac\uc5bc \ub2e4\uc2dc \ubcf4\uae30"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc0ac\uc6a9\ubc95\uc744 \ub2e4\uc2dc \ubc30\uc6cc\uc694"})]})]}),(0,L.jsx)(J.A,{size:20,className:"text-gray-400"})]}),(0,L.jsx)("div",{className:"p-4",children:(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)(de.A,{size:20,className:"text-gray-400"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"\uc571 \ubc84\uc804"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"v1.0.0"})]})]})})]})]})]}),(0,L.jsx)("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700",children:(0,L.jsx)("button",{onClick:s,className:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-semibold transition-colors",children:"\uc644\ub8cc"})})]})}):null},xe=[{id:"fair",name:"\ubc1d\uc740 \ud53c\ubd80",color:"#FFE4C4"},{id:"light",name:"\uc5f0\ud55c \ud53c\ubd80",color:"#F5DEB3"},{id:"medium",name:"\uc911\uac04 \ud53c\ubd80",color:"#DEB887"},{id:"tan",name:"\uadf8\uc744\ub9b0 \ud53c\ubd80",color:"#D2A679"},{id:"dark",name:"\uc5b4\ub450\uc6b4 \ud53c\ubd80",color:"#8B7355"}],pe=[{id:"round",name:"\ub465\uadfc\ud615",icon:"\ud83d\udd35",path:"M50,10 C82,10 90,32 90,55 C90,78 78,90 50,90 C22,90 10,78 10,55 C10,32 18,10 50,10"},{id:"oval",name:"\uacc4\ub780\ud615",icon:"\ud83e\udd5a",path:"M50,8 C78,8 88,28 88,52 C88,80 72,92 50,92 C28,92 12,80 12,52 C12,28 22,8 50,8"},{id:"square",name:"\uac01\uc9c4\ud615",icon:"\ud83d\udfe7",path:"M50,10 C85,10 90,30 90,55 C90,80 82,90 50,90 C18,90 10,80 10,55 C10,30 15,10 50,10"},{id:"heart",name:"\ud558\ud2b8\ud615",icon:"\ud83d\udc9c",path:"M50,10 C80,10 90,30 90,52 C90,78 70,90 50,92 C30,90 10,78 10,52 C10,30 20,10 50,10"},{id:"long",name:"\uae34\ud615",icon:"\ud83d\udccf",path:"M50,5 C72,5 80,25 80,50 C80,82 65,95 50,95 C35,95 20,82 20,50 C20,25 28,5 50,5"}],me=[{id:"normal",name:"\uae30\ubcf8",leftX:35,rightX:65,y:45,size:6},{id:"big",name:"\ud070 \ub208",leftX:35,rightX:65,y:45,size:8},{id:"small",name:"\uc791\uc740 \ub208",leftX:35,rightX:65,y:45,size:4},{id:"almond",name:"\uc544\ubaac\ub4dc\ud615",leftX:35,rightX:65,y:45,size:6,shape:"almond"},{id:"round",name:"\ub3d9\uadf8\ub780 \ub208",leftX:35,rightX:65,y:45,size:7,shape:"round"}],ue=[{id:"black",name:"\uac80\uc740\uc0c9",color:"#1a1a1a"},{id:"brown",name:"\uac08\uc0c9",color:"#654321"},{id:"hazel",name:"\ud5e4\uc774\uc990",color:"#8E7618"},{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#1E90FF"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#228B22"},{id:"gray",name:"\ud68c\uc0c9",color:"#696969"}],he=[{id:"smile",name:"\ubbf8\uc18c",path:"M35,65 Q50,75 65,65",stroke:!0},{id:"grin",name:"\ud65c\uc9dd \uc6c3\uc74c",path:"M30,62 Q50,80 70,62",stroke:!0},{id:"neutral",name:"\ubb34\ud45c\uc815",path:"M38,65 L62,65",stroke:!0},{id:"small_smile",name:"\uc791\uc740 \ubbf8\uc18c",path:"M40,65 Q50,70 60,65",stroke:!0},{id:"open",name:"\ubc8c\ub9b0 \uc785",path:"M35,63 Q50,75 65,63 Q50,80 35,63",fill:!0}],ge=["round","oval","square","heart","long"],fe=[{id:"none",name:"\ubbfc\uba38\ub9ac",paths:[],compatibleFaces:ge},{id:"short",name:"\uc9e7\uc740 \uba38\ub9ac",paths:["M15,28 Q15,8 50,5 Q85,8 85,28 Q85,18 50,15 Q15,18 15,28 Z"],compatibleFaces:ge},{id:"medium",name:"\uc911\uac04 \uba38\ub9ac",paths:["M8,50 Q5,15 50,2 Q95,15 92,50 L88,48 Q88,20 50,12 Q12,20 12,48 Z"],bangsPath:"M20,22 Q35,32 50,30 Q65,32 80,22 L80,12 Q65,22 50,20 Q35,22 20,12 Z",compatibleFaces:ge},{id:"long",name:"\uae34 \uba38\ub9ac",paths:["M3,95 Q-2,40 50,0 Q102,40 97,95 L92,90 Q92,35 50,10 Q8,35 8,90 Z"],bangsPath:"M15,25 Q30,38 50,35 Q70,38 85,25 L85,10 Q70,25 50,22 Q30,25 15,10 Z",compatibleFaces:ge},{id:"bob",name:"\ub2e8\ubc1c",paths:["M5,70 L5,30 Q5,5 50,2 Q95,5 95,30 L95,70 Q95,75 90,75 L85,55 Q85,20 50,12 Q15,20 15,55 L10,75 Q5,75 5,70 Z"],bangsPath:"M15,30 L20,18 Q35,30 50,28 Q65,30 80,18 L85,30 Q70,38 50,35 Q30,38 15,30 Z",compatibleFaces:ge},{id:"ponytail",name:"\ud3ec\ub2c8\ud14c\uc77c",paths:["M15,35 Q12,12 50,5 Q88,12 85,35 Q85,22 50,15 Q15,22 15,35 Z","M75,15 Q95,10 100,25 Q105,50 95,75 Q90,85 82,70 Q88,50 85,30 Q82,20 75,15 Z"],compatibleFaces:ge},{id:"twintail",name:"\ud2b8\uc708\ud14c\uc77c",paths:["M18,35 Q15,12 50,5 Q85,12 82,35 Q82,22 50,15 Q18,22 18,35 Z","M12,35 Q0,40 -5,55 Q-8,80 5,90 Q12,85 8,65 Q5,50 12,35 Z","M88,35 Q100,40 105,55 Q108,80 95,90 Q88,85 92,65 Q95,50 88,35 Z"],compatibleFaces:ge},{id:"curly",name:"\uacf1\uc2ac\uba38\ub9ac",paths:["M0,55 Q-5,25 50,0 Q105,25 100,55 Q100,35 50,12 Q0,35 0,55 Z","M5,40 Q-2,50 5,60 Q-2,70 5,75 Q12,65 8,55 Q12,45 5,40 Z","M95,40 Q102,50 95,60 Q102,70 95,75 Q88,65 92,55 Q88,45 95,40 Z"],compatibleFaces:ge},{id:"mohawk",name:"\ubaa8\ud788\uce78",paths:["M35,25 L40,-5 L45,-15 L50,-20 L55,-15 L60,-5 L65,25 Q60,20 50,18 Q40,20 35,25 Z"],compatibleFaces:ge}],be=[{id:"black",name:"\uac80\uc740\uc0c9",color:"#1a1a1a"},{id:"dark_brown",name:"\uc9c4\ud55c \uac08\uc0c9",color:"#3d2314"},{id:"brown",name:"\uac08\uc0c9",color:"#6b4423"},{id:"light_brown",name:"\ubc1d\uc740 \uac08\uc0c9",color:"#a0522d"},{id:"blonde",name:"\uae08\ubc1c",color:"#f4d03f"},{id:"red",name:"\ube68\uac04\uc0c9",color:"#c0392b"},{id:"orange",name:"\uc8fc\ud669\uc0c9",color:"#e67e22"},{id:"pink",name:"\ud551\ud06c",color:"#ff69b4"},{id:"purple",name:"\ubcf4\ub77c\uc0c9",color:"#9b59b6"},{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#3498db"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#27ae60"},{id:"gray",name:"\ud68c\uc0c9",color:"#7f8c8d"},{id:"white",name:"\ud770\uc0c9",color:"#ecf0f1"},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"]}],ye=[{id:"none",name:"\uc5c6\uc74c",color:null},{id:"tshirt",name:"\ud2f0\uc154\uce20",baseColor:"#3498db",path:"M20,95 L15,120 L85,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95",sleeves:"M20,95 L8,105 L15,110 L22,100 M80,95 L92,105 L85,110 L78,100"},{id:"suit",name:"\uc815\uc7a5",baseColor:"#2c3e50",path:"M18,95 L15,120 L85,120 L82,95 Q80,88 65,88 L58,92 L42,92 L35,88 Q20,88 18,95",tie:!0,lapels:!0},{id:"hoodie",name:"\ud6c4\ub4dc\ud2f0",baseColor:"#e74c3c",path:"M15,95 L12,120 L88,120 L85,95 Q82,86 65,86 L58,90 L42,90 L35,86 Q18,86 15,95",hood:!0,pocket:!0},{id:"dress",name:"\uc6d0\ud53c\uc2a4",baseColor:"#9b59b6",path:"M28,92 L22,125 L78,125 L72,92 Q70,88 60,88 L55,92 L45,92 L40,88 Q30,88 28,92"},{id:"uniform",name:"\uad50\ubcf5",baseColor:"#34495e",path:"M20,95 L18,120 L82,120 L80,95 Q78,88 65,88 L58,92 L42,92 L35,88 Q22,88 20,95",collar:!0,buttons:!0}],je=[{id:"blue",name:"\ud30c\ub780\uc0c9",color:"#3498db"},{id:"red",name:"\ube68\uac04\uc0c9",color:"#e74c3c"},{id:"green",name:"\ucd08\ub85d\uc0c9",color:"#27ae60"},{id:"purple",name:"\ubcf4\ub77c\uc0c9",color:"#9b59b6"},{id:"yellow",name:"\ub178\ub780\uc0c9",color:"#f1c40f"},{id:"orange",name:"\uc8fc\ud669\uc0c9",color:"#e67e22"},{id:"pink",name:"\ud551\ud06c",color:"#ff69b4"},{id:"black",name:"\uac80\uc740\uc0c9",color:"#2c3e50"},{id:"white",name:"\ud770\uc0c9",color:"#ecf0f1"},{id:"navy",name:"\ub124\uc774\ube44",color:"#2c3e50"}],ve=[{id:"none",name:"\uc5c6\uc74c"},{id:"glasses",name:"\uc548\uacbd",path:"M25,43 L28,43 A8,8 0 1,1 42,43 L58,43 A8,8 0 1,1 72,43 L75,43",color:"#1a1a1a"},{id:"sunglasses",name:"\uc120\uae00\ub77c\uc2a4",path:"M22,40 L25,40 C25,40 25,50 35,50 C45,50 45,40 45,40 L55,40 C55,40 55,50 65,50 C75,50 75,40 75,40 L78,40",color:"#1a1a1a",fill:!0},{id:"earrings",name:"\uadc0\uac78\uc774",type:"earrings",color:"#f1c40f"},{id:"necklace",name:"\ubaa9\uac78\uc774",path:"M35,88 Q50,95 65,88",color:"#f1c40f"},{id:"hat",name:"\ubaa8\uc790",path:"M15,15 L85,15 L85,5 Q50,-5 15,5 Z",color:"#e74c3c"},{id:"crown",name:"\uc655\uad00",type:"crown",color:"#f1c40f"},{id:"headband",name:"\uba38\ub9ac\ub760",path:"M12,25 Q50,18 88,25",color:"#ff69b4"},{id:"bow",name:"\ub9ac\ubcf8",type:"bow",color:"#ff69b4"},{id:"mask",name:"\ub9c8\uc2a4\ud06c",path:"M25,55 Q50,70 75,55 L75,65 Q50,80 25,65 Z",color:"#ffffff"}],we=[{id:"none",name:"\uc5c6\uc74c",color:"transparent"},{id:"sky_blue",name:"\ud558\ub298\uc0c9",color:"#87CEEB"},{id:"sunset",name:"\uc11d\uc591",gradient:["#ff7e5f","#feb47b"]},{id:"night",name:"\ubc24\ud558\ub298",gradient:["#0f0c29","#302b63","#24243e"]},{id:"forest",name:"\uc232",gradient:["#134e5e","#71b280"]},{id:"ocean",name:"\ubc14\ub2e4",gradient:["#2193b0","#6dd5ed"]},{id:"pink",name:"\ud551\ud06c",gradient:["#ee9ca7","#ffdde1"]},{id:"purple",name:"\ubcf4\ub77c",gradient:["#667eea","#764ba2"]},{id:"gold",name:"\uace8\ub4dc",gradient:["#f7971e","#ffd200"]},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"]},{id:"galaxy",name:"\uc740\ud558\uc218",gradient:["#0f0c29","#302b63","#24243e"],stars:!0}],Ne=[{id:"none",name:"\uc5c6\uc74c",style:null},{id:"simple",name:"\ub2e8\uc21c",color:"#ffffff",width:3},{id:"gold",name:"\uace8\ub4dc",color:"#f1c40f",width:4,glow:!0},{id:"silver",name:"\uc2e4\ubc84",color:"#bdc3c7",width:4,glow:!0},{id:"bronze",name:"\ube0c\ub860\uc988",color:"#cd7f32",width:4,glow:!0},{id:"rainbow",name:"\ubb34\uc9c0\uac1c",gradient:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff"],width:4,animated:!0},{id:"neon_blue",name:"\ub124\uc628 \ube14\ub8e8",color:"#00fff2",width:3,glow:!0,glowColor:"#00fff2"},{id:"neon_pink",name:"\ub124\uc628 \ud551\ud06c",color:"#ff69b4",width:3,glow:!0,glowColor:"#ff69b4"},{id:"fire",name:"\ubd88\uaf43",gradient:["#ff4500","#ff6347","#ffa500"],width:4,animated:!0},{id:"ice",name:"\uc5bc\uc74c",gradient:["#00bfff","#87ceeb","#e0ffff"],width:4,glow:!0}],ke=[{id:"normal",name:"\uae30\ubcf8",eyeMod:null,mouthMod:null},{id:"happy",name:"\ud589\ubcf5",eyeMod:"happy",mouthMod:"grin"},{id:"sad",name:"\uc2ac\ud514",eyeMod:"sad",mouthMod:"sad"},{id:"angry",name:"\ud654\ub0a8",eyeMod:"angry",mouthMod:"angry"},{id:"surprised",name:"\ub180\ub78c",eyeMod:"wide",mouthMod:"open"},{id:"wink",name:"\uc719\ud06c",eyeMod:"wink",mouthMod:"smile"},{id:"love",name:"\uc0ac\ub791",eyeMod:"hearts",mouthMod:"smile"},{id:"cool",name:"\uba4b\uc9d0",eyeMod:"sunglasses",mouthMod:"smirk"}],Ce={skinTone:"light",faceShape:"oval",eyeStyle:"normal",eyeColor:"brown",mouthStyle:"smile",hairstyle:"short",hairColor:"black",outfit:"tshirt",outfitColor:"blue",accessory:"none",background:"sky_blue",border:"simple",expression:"normal"};function Se(e){try{const t=localStorage.getItem("avatar_".concat(e));if(t)return(0,o.A)((0,o.A)({},Ce),JSON.parse(t))}catch(t){}return(0,o.A)({},Ce)}function Ae(e){switch(e){case"skinTone":return xe;case"faceShape":return pe;case"eyeStyle":return me;case"eyeColor":return ue;case"mouthStyle":return he;case"hairstyle":return fe;case"hairColor":return be;case"outfit":return ye;case"outfitColor":return je;case"accessory":return ve;case"background":return we;case"border":return Ne;case"expression":return ke;default:return[]}}function Ie(e,t){const s=fe.find(t=>t.id===e);return!s||s.compatibleFaces.includes(t)}const Te=[{id:"skinTone",name:"\ud53c\ubd80",icon:"#FFE4C4"},{id:"faceShape",name:"\uc5bc\uad74",icon:"#F5DEB3"},{id:"eyeStyle",name:"\ub208",icon:"#1E90FF"},{id:"eyeColor",name:"\ub208\uc0c9",icon:"#654321"},{id:"mouthStyle",name:"\uc785",icon:"#e74c3c"},{id:"hairstyle",name:"\ud5e4\uc5b4",icon:"#3d2314"},{id:"hairColor",name:"\uba38\ub9ac\uc0c9",icon:"#1a1a1a"},{id:"outfit",name:"\uc758\uc0c1",icon:"#3498db"},{id:"outfitColor",name:"\uc758\uc0c1\uc0c9",icon:"#e74c3c"},{id:"accessory",name:"\uc545\uc138",icon:"#f1c40f"},{id:"background",name:"\ubc30\uacbd",icon:"#87CEEB"},{id:"border",name:"\ud14c\ub450\ub9ac",icon:"#a78bfa"}];function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if(!e||"none"===e||"transparent"===e)return e;let s=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return s=Math.max(0,Math.floor(s*(100-t)/100)),a=Math.max(0,Math.floor(a*(100-t)/100)),n=Math.max(0,Math.floor(n*(100-t)/100)),"#".concat(s.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0"))}function Ee(e){let{config:t={},size:s=100,showBorder:a=!0,onClick:n}=e;const i=(0,o.A)((0,o.A)({},Ce),t),l=xe.find(e=>e.id===i.skinTone)||xe[1],r=pe.find(e=>e.id===i.faceShape)||pe[1],d=me.find(e=>e.id===i.eyeStyle)||me[0],c=ue.find(e=>e.id===i.eyeColor)||ue[1],x=he.find(e=>e.id===i.mouthStyle)||he[0],p=fe.find(e=>e.id===i.hairstyle)||fe[1],m=be.find(e=>e.id===i.hairColor)||be[0],u=ye.find(e=>e.id===i.outfit)||ye[1],h=je.find(e=>e.id===i.outfitColor)||je[0],g=ve.find(e=>e.id===i.accessory),f=we.find(e=>e.id===i.background)||we[0],b=Ne.find(e=>e.id===i.border),y=Me(l.color,12),j=b&&"none"!==b.id&&a?{stroke:b.gradient?"url(#border-gradient-".concat(b.id,")"):b.color,strokeWidth:b.width||3,filter:b.glow?"drop-shadow(0 0 ".concat(2*b.width,"px ").concat(b.glowColor||b.color,")"):void 0}:null,v=()=>null!==m&&void 0!==m&&m.gradient?"url(#hair-rainbow)":(null===m||void 0===m?void 0:m.color)||"#1a1a1a";return(0,L.jsxs)("svg",{width:s,height:s,viewBox:"-15 ".concat(-25," 130 ").concat(150),onClick:n,style:{cursor:n?"pointer":"default",overflow:"visible"},preserveAspectRatio:"xMidYMid meet",children:[(0,L.jsxs)("defs",{children:[(null===f||void 0===f?void 0:f.gradient)&&(0,L.jsx)("linearGradient",{id:"bg-gradient-".concat(f.id),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:f.gradient.map((e,t)=>(0,L.jsx)("stop",{offset:"".concat(t/(f.gradient.length-1)*100,"%"),stopColor:e},t))}),(null===b||void 0===b?void 0:b.gradient)&&(0,L.jsx)("linearGradient",{id:"border-gradient-".concat(b.id),x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:b.gradient.map((e,t)=>(0,L.jsx)("stop",{offset:"".concat(t/(b.gradient.length-1)*100,"%"),stopColor:e},t))}),(null===m||void 0===m?void 0:m.gradient)&&(0,L.jsx)("linearGradient",{id:"hair-rainbow",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:m.gradient.map((e,t)=>(0,L.jsx)("stop",{offset:"".concat(t/(m.gradient.length-1)*100,"%"),stopColor:e},t))}),(0,L.jsx)("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:(0,L.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.3"})}),(0,L.jsx)("clipPath",{id:"face-clip",children:(0,L.jsx)("path",{d:r.path})})]}),f&&"none"!==f.id&&(0,L.jsx)("rect",{x:"-15",y:-25,width:"130",height:150,fill:f&&"none"!==f.id?f.gradient?"url(#bg-gradient-".concat(f.id,")"):f.color:"#1a1a2e",rx:"10"}),(null===f||void 0===f?void 0:f.stars)&&(0,L.jsxs)("g",{children:[(0,L.jsx)("circle",{cx:"15",cy:"10",r:"1.5",fill:"white",opacity:"0.9"}),(0,L.jsx)("circle",{cx:"85",cy:"15",r:"2",fill:"white",opacity:"0.8"}),(0,L.jsx)("circle",{cx:"45",cy:"-5",r:"1.2",fill:"white",opacity:"0.9"}),(0,L.jsx)("circle",{cx:"70",cy:"0",r:"1.5",fill:"white",opacity:"0.7"}),(0,L.jsx)("circle",{cx:"25",cy:"20",r:"1",fill:"white",opacity:"0.8"}),(0,L.jsx)("circle",{cx:"95",cy:"25",r:"1.2",fill:"white",opacity:"0.7"}),(0,L.jsx)("circle",{cx:"5",cy:"30",r:"1.5",fill:"white",opacity:"0.6"}),(0,L.jsx)("circle",{cx:"60",cy:"100",r:"1",fill:"white",opacity:"0.9"}),(0,L.jsx)("circle",{cx:"30",cy:"110",r:"1.2",fill:"white",opacity:"0.7"})]}),(0,L.jsx)("rect",{x:"42",y:"85",width:"16",height:"12",fill:l.color}),u&&"none"!==u.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("path",{d:u.path,fill:(null===h||void 0===h?void 0:h.color)||u.baseColor}),u.collar&&(0,L.jsx)("g",{children:(0,L.jsx)("path",{d:"M40,95 L50,103 L60,95",stroke:"#ffffff",strokeWidth:"3",fill:"none"})}),u.buttons&&(0,L.jsxs)("g",{children:[(0,L.jsx)("circle",{cx:"50",cy:"103",r:"2",fill:"#f1c40f"}),(0,L.jsx)("circle",{cx:"50",cy:"110",r:"2",fill:"#f1c40f"})]}),u.tie&&(0,L.jsxs)("g",{children:[(0,L.jsx)("path",{d:"M47,95 L50,98 L53,95",fill:"#c0392b"}),(0,L.jsx)("path",{d:"M48,98 L50,118 L52,98 Z",fill:"#e74c3c"})]}),u.hood&&(0,L.jsx)("path",{d:"M25,92 Q22,80 35,75 L65,75 Q78,80 75,92",fill:Me((null===h||void 0===h?void 0:h.color)||u.baseColor,15)})]}),(0,L.jsxs)("g",{children:[(()=>{const e={round:{leftX:7,rightX:93,y:50},oval:{leftX:9,rightX:91,y:48},square:{leftX:7,rightX:93,y:50},heart:{leftX:7,rightX:93,y:48},long:{leftX:17,rightX:83,y:50}},t=e[r.id]||e.round;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("ellipse",{cx:t.leftX,cy:t.y,rx:"5",ry:"8",fill:l.color}),(0,L.jsx)("ellipse",{cx:t.leftX+1,cy:t.y,rx:"2",ry:"4",fill:Me(l.color,12)}),(0,L.jsx)("ellipse",{cx:t.rightX,cy:t.y,rx:"5",ry:"8",fill:l.color}),(0,L.jsx)("ellipse",{cx:t.rightX-1,cy:t.y,rx:"2",ry:"4",fill:Me(l.color,12)})]})})(),(0,L.jsx)("path",{d:r.path,fill:l.color}),(0,L.jsx)("ellipse",{cx:"30",cy:"60",rx:"8",ry:"5",fill:"#ffb6c1",opacity:"0.3"}),(0,L.jsx)("ellipse",{cx:"70",cy:"60",rx:"8",ry:"5",fill:"#ffb6c1",opacity:"0.3"})]}),(0,L.jsxs)("g",{children:[(0,L.jsx)("ellipse",{cx:d.leftX,cy:d.y,rx:d.size,ry:.75*d.size,fill:"white"}),(0,L.jsx)("circle",{cx:d.leftX,cy:d.y,r:.55*d.size,fill:c.color}),(0,L.jsx)("circle",{cx:d.leftX-1,cy:d.y-1,r:.22*d.size,fill:"white"}),(0,L.jsx)("ellipse",{cx:d.rightX,cy:d.y,rx:d.size,ry:.75*d.size,fill:"white"}),(0,L.jsx)("circle",{cx:d.rightX,cy:d.y,r:.55*d.size,fill:c.color}),(0,L.jsx)("circle",{cx:d.rightX-1,cy:d.y-1,r:.22*d.size,fill:"white"}),(0,L.jsx)("path",{d:"M".concat(d.leftX-7,",").concat(d.y-11," Q").concat(d.leftX,",").concat(d.y-14," ").concat(d.leftX+7,",").concat(d.y-11),stroke:null!==m&&void 0!==m&&m.gradient?"#1a1a1a":(null===m||void 0===m?void 0:m.color)||"#1a1a1a",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,L.jsx)("path",{d:"M".concat(d.rightX-7,",").concat(d.y-11," Q").concat(d.rightX,",").concat(d.y-14," ").concat(d.rightX+7,",").concat(d.y-11),stroke:null!==m&&void 0!==m&&m.gradient?"#1a1a1a":(null===m||void 0===m?void 0:m.color)||"#1a1a1a",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"})]}),(0,L.jsx)("path",{d:"M48,53 L50,60 L52,53",stroke:y,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),(0,L.jsx)("path",{d:x.path,stroke:x.stroke?"#c0392b":"none",strokeWidth:"2.5",fill:x.fill?"#c0392b":"none",strokeLinecap:"round"}),p&&"none"!==p.id&&(0,L.jsxs)("g",{children:[p.paths&&p.paths[0]&&(0,L.jsx)("path",{d:p.paths[0],fill:v(),stroke:"#1a1a1a"===(null===m||void 0===m?void 0:m.color)?"#333":"none",strokeWidth:"1"}),p.paths&&p.paths.slice(1).map((e,t)=>(0,L.jsx)("path",{d:e,fill:v(),stroke:"#1a1a1a"===(null===m||void 0===m?void 0:m.color)?"#333":"none",strokeWidth:"1"},"hair-".concat(t))),p.bangsPath&&(0,L.jsx)("path",{d:p.bangsPath,fill:v(),stroke:"#1a1a1a"===(null===m||void 0===m?void 0:m.color)?"#333":"none",strokeWidth:"1"})]}),g&&"none"!==g.id&&(0,L.jsxs)("g",{children:["glasses"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("circle",{cx:"35",cy:"45",r:"10",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("circle",{cx:"65",cy:"45",r:"10",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M45,45 Q50,42 55,45",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M25,45 L10,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M75,45 L90,42",stroke:"#1a1a1a",strokeWidth:"2"})]}),"sunglasses"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("ellipse",{cx:"35",cy:"45",rx:"12",ry:"8",fill:"#1a1a1a"}),(0,L.jsx)("ellipse",{cx:"65",cy:"45",rx:"12",ry:"8",fill:"#1a1a1a"}),(0,L.jsx)("path",{d:"M47,45 Q50,42 53,45",fill:"none",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M23,45 L8,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M77,45 L92,42",stroke:"#1a1a1a",strokeWidth:"2"}),(0,L.jsx)("ellipse",{cx:"32",cy:"43",rx:"3",ry:"2",fill:"white",opacity:"0.3"}),(0,L.jsx)("ellipse",{cx:"62",cy:"43",rx:"3",ry:"2",fill:"white",opacity:"0.3"})]}),"earrings"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("circle",{cx:"6",cy:"58",r:"4",fill:"#f1c40f"}),(0,L.jsx)("circle",{cx:"94",cy:"58",r:"4",fill:"#f1c40f"}),(0,L.jsx)("circle",{cx:"5",cy:"56",r:"1",fill:"white",opacity:"0.6"}),(0,L.jsx)("circle",{cx:"93",cy:"56",r:"1",fill:"white",opacity:"0.6"})]}),"necklace"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("path",{d:"M30,88 Q50,95 70,88",fill:"none",stroke:"#f1c40f",strokeWidth:"2"}),(0,L.jsx)("circle",{cx:"50",cy:"94",r:"4",fill:"#f1c40f"}),(0,L.jsx)("circle",{cx:"49",cy:"92",r:"1",fill:"white",opacity:"0.5"})]}),"hat"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("ellipse",{cx:"50",cy:"8",rx:"45",ry:"8",fill:"#e74c3c"}),(0,L.jsx)("path",{d:"M15,8 Q15,-15 50,-18 Q85,-15 85,8",fill:"#e74c3c"}),(0,L.jsx)("rect",{x:"15",y:"5",width:"70",height:"5",fill:"#c0392b"})]}),"crown"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("path",{d:"M18,12 L22,0 L32,-12 L42,5 L50,-15 L58,5 L68,-12 L78,0 L82,12 Z",fill:"#f1c40f",stroke:"#d4ac0d",strokeWidth:"1"}),(0,L.jsx)("circle",{cx:"32",cy:"-2",r:"4",fill:"#e74c3c"}),(0,L.jsx)("circle",{cx:"50",cy:"-5",r:"5",fill:"#3498db"}),(0,L.jsx)("circle",{cx:"68",cy:"-2",r:"4",fill:"#2ecc71"}),(0,L.jsx)("circle",{cx:"31",cy:"-4",r:"1.5",fill:"white",opacity:"0.5"}),(0,L.jsx)("circle",{cx:"49",cy:"-7",r:"2",fill:"white",opacity:"0.5"}),(0,L.jsx)("circle",{cx:"67",cy:"-4",r:"1.5",fill:"white",opacity:"0.5"})]}),"headband"===g.id&&(0,L.jsx)("path",{d:"M10,22 Q50,15 90,22",fill:"none",stroke:"#ff69b4",strokeWidth:"4"}),"bow"===g.id&&(0,L.jsxs)("g",{transform:"translate(78, 15)",children:[(0,L.jsx)("ellipse",{cx:"-10",cy:"0",rx:"10",ry:"6",fill:"#ff69b4"}),(0,L.jsx)("ellipse",{cx:"10",cy:"0",rx:"10",ry:"6",fill:"#ff69b4"}),(0,L.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#e91e8c"})]}),"mask"===g.id&&(0,L.jsxs)("g",{children:[(0,L.jsx)("path",{d:"M20,55 Q50,72 80,55 L80,70 Q50,88 20,70 Z",fill:"#ffffff",stroke:"#e0e0e0",strokeWidth:"1"}),(0,L.jsx)("path",{d:"M35,62 L65,62",stroke:"#e0e0e0",strokeWidth:"1"})]})]}),j&&a&&(0,L.jsx)("rect",{x:"-13",y:-23,width:"126",height:146,fill:"none",stroke:j.stroke,strokeWidth:j.strokeWidth,rx:"12",style:{filter:j.filter}})]})}const ze=[{level:0,minAssets:0,title:"\uacbd\uc81c \uc785\ubb38\uc790",icon:"\ud83c\udf31",color:"#6b7280",badge:"\ud83c\udfc5",description:"\uacbd\uc81c \uc5ec\uc815\uc758 \uc2dc\uc791"},{level:1,minAssets:1e7,title:"\ucc9c\ub9cc\uc7a5\uc790",icon:"\ud83d\udcb0",color:"#22c55e",badge:"\ud83e\udd49",description:"\uccab \ucc9c\ub9cc\uc6d0 \ub2ec\uc131!"},{level:2,minAssets:5e7,title:"\uc624\ucc9c\ub9cc \ud074\ub7fd",icon:"\ud83d\udcb5",color:"#84cc16",badge:"\ud83e\udd48",description:"\ubc18\uc5b5 \ub3cc\ud30c!"},{level:3,minAssets:1e8,title:"\uc5b5\ub300 \uc790\uc0b0\uac00",icon:"\ud83d\udc8e",color:"#eab308",badge:"\ud83e\udd47",description:"\uc5b5\ub300 \uc790\uc0b0 \ubcf4\uc720\uc790"},{level:4,minAssets:2e8,title:"\uc790\uc0b0 \uad00\ub9ac\uc0ac",icon:"\ud83d\udcca",color:"#f97316",badge:"\ud83c\udfc6",description:"2\uc5b5 \uc790\uc0b0 \ub2ec\uc131"},{level:5,minAssets:3e8,title:"\ud22c\uc790 \uc804\ubb38\uac00",icon:"\ud83d\udcc8",color:"#ef4444",badge:"\ud83d\udcab",description:"3\uc5b5 \uace0\uc9c0 \uc810\ub839"},{level:6,minAssets:5e8,title:"\ubd80\ub3d9\uc0b0 \uc655",icon:"\ud83c\udfe2",color:"#ec4899",badge:"\u2b50",description:"5\uc5b5 \uc790\uc0b0\uac00"},{level:7,minAssets:1e9,title:"10\uc5b5 \ud074\ub7fd",icon:"\ud83d\udc51",color:"#a855f7",badge:"\ud83c\udf1f",description:"10\uc5b5 \ub3cc\ud30c! \uc9c4\uc815\ud55c \ubd80\uc790"},{level:8,minAssets:5e9,title:"\uacbd\uc81c \uac70\ubb3c",icon:"\ud83e\udd81",color:"#8b5cf6",badge:"\ud83d\udc8e",description:"50\uc5b5 \uc790\uc0b0\uc758 \uac70\ubb3c"},{level:9,minAssets:1e10,title:"100\uc5b5 \uc7ac\ubc8c",icon:"\ud83d\udc09",color:"#6366f1",badge:"\ud83d\udc51",description:"100\uc5b5! \uc7ac\ubc8c\uc758 \ubc18\uc5f4"},{level:10,minAssets:5e10,title:"\uacbd\uc81c \ud669\uc81c",icon:"\ud83c\udff0",color:"#3b82f6",badge:"\ud83c\udfef",description:"500\uc5b5 \uacbd\uc81c \ud669\uc81c"},{level:11,minAssets:1e11,title:"\ucc9c\uc5b5 \ud0c0\uc774\ucfe4",icon:"\ud83c\udf0d",color:"#0ea5e9",badge:"\ud83c\udf0d",description:"1000\uc5b5! \uae00\ub85c\ubc8c \ud0c0\uc774\ucfe4"},{level:12,minAssets:1e12,title:"\uc54c\ucc2c \uc804\uc124",icon:"\ud83c\udf0c",color:"#00fff2",badge:"\ud83c\udf0c",description:"1\uc870 \ub2ec\uc131! \uc804\uc124\uc774 \ub418\ub2e4"}];function De(e){const t=Number(e)||0;let s=ze[0];for(let o=ze.length-1;o>=0;o--)if(t>=ze[o].minAssets){s=ze[o];break}const a=ze.findIndex(e=>e.level===s.level+1),n=-1!==a?ze[a]:null;let i=100;if(n){const e=s.minAssets,a=n.minAssets;i=Math.min(100,Math.floor((t-e)/(a-e)*100))}return{level:s.level,title:s.title,icon:s.icon,color:s.color,badge:s.badge,description:s.description,progress:i,nextLevel:n,currentAssets:t,assetsToNextLevel:n?n.minAssets-t:0}}const Re={FIRST_THOUSAND:{id:"first_thousand",name:"\uccab \ucc9c \uc6d0",description:"1,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83e\ude99",category:"wealth",condition:e=>e.totalAssets>=1e3,rarity:"common",points:10},FIRST_TEN_THOUSAND:{id:"first_ten_thousand",name:"\ub9cc \uc6d0\uc758 \uae30\uc068",description:"10,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udcb5",category:"wealth",condition:e=>e.totalAssets>=1e4,rarity:"common",points:25},HUNDRED_THOUSAND:{id:"hundred_thousand",name:"10\ub9cc \uc6d0 \ud074\ub7fd",description:"100,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udcb0",category:"wealth",condition:e=>e.totalAssets>=1e5,rarity:"uncommon",points:50},MILLIONAIRE:{id:"millionaire",name:"\ubc31\ub9cc\uc7a5\uc790",description:"1,000,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83e\udd11",category:"wealth",condition:e=>e.totalAssets>=1e6,rarity:"rare",points:100},MULTI_MILLIONAIRE:{id:"multi_millionaire",name:"\ucc9c\ub9cc\uc7a5\uc790",description:"10,000,000\uc6d0 \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83d\udc8e",category:"wealth",condition:e=>e.totalAssets>=1e7,rarity:"legendary",points:500},COUPON_COLLECTOR:{id:"coupon_collector",name:"\ucfe0\ud3f0 \uc218\uc9d1\uac00",description:"\ucfe0\ud3f0 10\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udf9f\ufe0f",category:"coupon",condition:e=>e.coupons>=10,rarity:"common",points:15},COUPON_MASTER:{id:"coupon_master",name:"\ucfe0\ud3f0 \ub9c8\uc2a4\ud130",description:"\ucfe0\ud3f0 50\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udfab",category:"coupon",condition:e=>e.coupons>=50,rarity:"uncommon",points:40},COUPON_HOARDER:{id:"coupon_hoarder",name:"\ucfe0\ud3f0 \ubd80\uc790",description:"\ucfe0\ud3f0 100\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udff7\ufe0f",category:"coupon",condition:e=>e.coupons>=100,rarity:"rare",points:80},FIRST_TRADE:{id:"first_trade",name:"\uccab \uac70\ub798",description:"\uccab \ubc88\uc9f8 \uac70\ub798 \uc644\ub8cc\ud558\uae30",icon:"\ud83e\udd1d",category:"trading",condition:e=>e.totalTransactions>=1,rarity:"common",points:10},ACTIVE_TRADER:{id:"active_trader",name:"\ud65c\ubc1c\ud55c \uac70\ub798\uc790",description:"10\ud68c \uc774\uc0c1 \uac70\ub798\ud558\uae30",icon:"\ud83d\udcca",category:"trading",condition:e=>e.totalTransactions>=10,rarity:"common",points:25},TRADING_EXPERT:{id:"trading_expert",name:"\uac70\ub798 \uc804\ubb38\uac00",description:"50\ud68c \uc774\uc0c1 \uac70\ub798\ud558\uae30",icon:"\ud83d\udcc8",category:"trading",condition:e=>e.totalTransactions>=50,rarity:"uncommon",points:50},GENEROUS_HEART:{id:"generous_heart",name:"\ub530\ub73b\ud55c \ub9c8\uc74c",description:"\ud559\uae09 \ubaa9\ud45c\uc5d0 \ucc98\uc74c\uc73c\ub85c \uae30\ubd80\ud558\uae30",icon:"\u2764\ufe0f",category:"donation",condition:e=>e.totalDonations>=1,rarity:"common",points:20},PHILANTHROPIST:{id:"philanthropist",name:"\uc790\uc120\uac00",description:"\ucd1d 10\uac1c \uc774\uc0c1 \uae30\ubd80\ud558\uae30",icon:"\ud83c\udf81",category:"donation",condition:e=>e.totalDonations>=10,rarity:"uncommon",points:50},DONATION_KING:{id:"donation_king",name:"\uae30\ubd80\uc655",description:"\ucd1d 100\uac1c \uc774\uc0c1 \uae30\ubd80\ud558\uae30",icon:"\ud83d\udc51",category:"donation",condition:e=>e.totalDonations>=100,rarity:"rare",points:150},SAVER_BEGINNER:{id:"saver_beginner",name:"\uc800\ucd95\uc758 \uc2dc\uc791",description:"\uccab \uc608\uae08 \ub610\ub294 \uc801\uae08 \uac00\uc785\ud558\uae30",icon:"\ud83c\udfe6",category:"saving",condition:e=>e.savingProducts>=1,rarity:"common",points:15},SMART_SAVER:{id:"smart_saver",name:"\ub611\ub611\ud55c \uc800\ucd95\ub7ec",description:"\uc608\uae08/\uc801\uae08 3\uac1c \uc774\uc0c1 \uac00\uc785\ud558\uae30",icon:"\ud83d\udcb3",category:"saving",condition:e=>e.savingProducts>=3,rarity:"uncommon",points:40},FIRST_PROPERTY:{id:"first_property",name:"\uccab \ubd80\ub3d9\uc0b0",description:"\uccab \ubc88\uc9f8 \ubd80\ub3d9\uc0b0 \uad6c\ub9e4\ud558\uae30",icon:"\ud83c\udfe0",category:"realestate",condition:e=>e.properties>=1,rarity:"common",points:30},REAL_ESTATE_INVESTOR:{id:"real_estate_investor",name:"\ubd80\ub3d9\uc0b0 \ud22c\uc790\uc790",description:"\ubd80\ub3d9\uc0b0 3\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udfe2",category:"realestate",condition:e=>e.properties>=3,rarity:"uncommon",points:70},PROPERTY_TYCOON:{id:"property_tycoon",name:"\ubd80\ub3d9\uc0b0 \uc7ac\ubc8c",description:"\ubd80\ub3d9\uc0b0 5\uac1c \uc774\uc0c1 \ubcf4\uc720\ud558\uae30",icon:"\ud83c\udff0",category:"realestate",condition:e=>e.properties>=5,rarity:"rare",points:150},PERFECT_ATTENDANCE:{id:"perfect_attendance",name:"\uac1c\uadfc\uc0c1",description:"7\uc77c \uc5f0\uc18d \uc811\uc18d\ud558\uae30",icon:"\ud83d\udcc5",category:"special",condition:e=>e.loginStreak>=7,rarity:"uncommon",points:100},MONTHLY_STREAK:{id:"monthly_streak",name:"\ud55c \ub2ec \ucd9c\uc11d\uc655",description:"30\uc77c \uc5f0\uc18d \uc811\uc18d\ud558\uae30",icon:"\ud83d\uddd3\ufe0f",category:"special",condition:e=>e.loginStreak>=30,rarity:"rare",points:300},EARLY_BIRD:{id:"early_bird",name:"\uc5bc\ub9ac\ubc84\ub4dc",description:"\uc11c\ube44\uc2a4 \ucd08\uae30 \uc0ac\uc6a9\uc790",icon:"\ud83d\udc26",category:"special",condition:()=>!1,rarity:"legendary",points:200}};function Oe(e){return Object.values(Re).find(t=>t.id===e)||null}function Le(e){if(!e)return[];try{const t="alchan_achievements_".concat(e),s=localStorage.getItem(t);return s?JSON.parse(s):[]}catch(t){return console.error("\uc5c5\uc801 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",t),[]}}const _e=e=>{if(e>=1e8){const t=Math.floor(e/1e8),s=Math.floor(e%1e8/1e4);return s>0?"".concat(t,"\uc5b5 ").concat(s.toLocaleString(),"\ub9cc"):"".concat(t,"\uc5b5")}if(e>=1e4){const t=Math.floor(e/1e4);return"".concat(t.toLocaleString(),"\ub9cc")}return new Intl.NumberFormat("ko-KR").format(e)},We=e=>{let{isOpen:t,onClose:s,title:a,children:n}=e;return t?(0,L.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:s,children:(0,L.jsxs)("div",{className:"bg-[#1a1a2e] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,L.jsxs)("div",{className:"px-6 py-5 border-b border-slate-700 bg-gradient-to-r from-[#141423] to-indigo-900/20 flex items-center justify-between",children:[(0,L.jsx)("h3",{className:"text-lg font-bold text-white",children:a}),(0,L.jsx)("button",{onClick:s,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 transition-colors",children:(0,L.jsx)(R.A,{size:18})})]}),(0,L.jsx)("div",{className:"p-6",children:n})]})}):null},Be=(0,a.memo)(e=>{let{toggleSidebar:t,isMobile:s,isSidebarCollapsed:o,onToggleSidebarCollapse:r}=e;const d=(0,n.Zp)(),{user:c,userDoc:x,logout:p,updateUser:m,changePassword:u,deleteCurrentUserAccount:h,loginWithEmailPassword:g}=(0,i.As)(),[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),v=(0,a.useRef)(null),[N,k]=(0,a.useState)(null),[C,S]=(0,a.useState)(!1),[A,I]=(0,a.useState)(""),[T,E]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[R,_]=(0,a.useState)(""),[W,B]=(0,a.useState)(""),[P,F]=(0,a.useState)(""),[Q,H]=(0,a.useState)(!1),[q,Z]=(0,a.useState)(""),[$,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(!1),ae=(null===x||void 0===x?void 0:x.isAdmin)||"admin"===(null===x||void 0===x?void 0:x.role)||(null===x||void 0===x?void 0:x.isSuperAdmin),ne=(null===x||void 0===x?void 0:x.name)||(null===x||void 0===x?void 0:x.nickname)||(null===c||void 0===c?void 0:c.displayName)||"\uc0ac\uc6a9\uc790";let ie="\ud559\uc0dd";null!==x&&void 0!==x&&x.isSuperAdmin?ie="\uc571 \uad00\ub9ac\uc790":null!==x&&void 0!==x&&x.isAdmin&&(ie="\uad50\uc0ac");const[oe,le]=(0,a.useState)(null);(0,a.useEffect)(()=>{null!==c&&void 0!==c&&c.uid&&le(Se(c.uid));const e=e=>{e.detail.userId===(null===c||void 0===c?void 0:c.uid)&&le(e.detail.config)};return window.addEventListener("avatarChanged",e),()=>window.removeEventListener("avatarChanged",e)},[null===c||void 0===c?void 0:c.uid]);const re=(0,a.useMemo)(()=>De((Number(null===x||void 0===x?void 0:x.cash)||0)+(Number(null===x||void 0===x?void 0:x.stockValue)||0)+(Number(null===x||void 0===x?void 0:x.realEstateValue)||0)+(Number(null===x||void 0===x?void 0:x.itemValue)||0)),[null===x||void 0===x?void 0:x.cash,null===x||void 0===x?void 0:x.stockValue,null===x||void 0===x?void 0:x.realEstateValue,null===x||void 0===x?void 0:x.itemValue]),de=(0,a.useMemo)(()=>{if(null===c||void 0===c||!c.uid)return null;const e=Le(c.uid);if(0===e.length)return null;const t={legendary:0,epic:1,rare:2,common:3},s=[...e].sort((e,s)=>{const a=Oe(e.id),n=Oe(s.id);return(t[null===a||void 0===a?void 0:a.rarity]||99)-(t[null===n||void 0===n?void 0:n.rarity]||99)});return Oe(s[0].id)},[null===c||void 0===c?void 0:c.uid]);(0,a.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const xe=()=>{k(null),E(""),F(""),H(!1),ee(""),se(!1),D(""),_(""),B("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("header",{className:"md:hidden sticky top-0 z-30 bg-[#141423] border-b border-[#00fff2]/10",children:[(0,L.jsxs)("div",{className:"h-14 px-3 flex items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)("button",{onClick:t,className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors",children:(0,L.jsx)(l.A,{size:22,className:"text-white"})}),(0,L.jsxs)("h2",{className:"text-sm font-bold text-white whitespace-nowrap",children:["\uc624\ub298\ub3c4 ",(0,L.jsx)("span",{className:"text-[#00fff2]",children:"\uc54c\ucc2c"})," \ud558\ub8e8!"]})]}),(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsxs)("div",{onClick:()=>d("/my-profile"),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg cursor-pointer",style:{background:"rgba(167, 139, 250, 0.2)"},children:[(0,L.jsx)("span",{style:{fontSize:"14px"},children:(null===re||void 0===re?void 0:re.icon)||"\ud83c\udf1f"}),(0,L.jsxs)("div",{className:"flex flex-col leading-none",children:[(0,L.jsx)("span",{style:{fontSize:"9px",color:"#9ca3af"},children:"LEVEL"}),(0,L.jsx)("span",{style:{fontSize:"12px",fontWeight:"700",color:(null===re||void 0===re?void 0:re.color)||"#a78bfa"},children:(null===re||void 0===re?void 0:re.level)||1})]}),de&&(0,L.jsx)("span",{style:{fontSize:"14px",marginLeft:"2px"},children:de.icon})]}),(0,L.jsx)("div",{onClick:()=>b(!f),className:"cursor-pointer",children:(0,L.jsx)(Ee,{config:oe,size:40,showBorder:!0})})]})]}),(0,L.jsxs)("div",{className:"px-4 pb-3 flex gap-3",children:[(0,L.jsxs)("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 bg-emerald-900/10 rounded-xl border border-emerald-500/20",children:[(0,L.jsx)("div",{className:"w-8 h-8 rounded-lg bg-emerald-600 text-white flex items-center justify-center shadow-sm flex-shrink-0",children:(0,L.jsx)("span",{className:"font-bold text-xs",children:"\u20a9"})}),(0,L.jsxs)("div",{className:"min-w-0",children:[(0,L.jsx)("p",{className:"text-[9px] text-emerald-400 font-bold uppercase tracking-wider leading-none",children:"\ud604\uae08"}),(0,L.jsxs)("p",{className:"text-sm font-bold text-white truncate",children:[_e((null===x||void 0===x?void 0:x.cash)||0),"\uc6d0"]})]})]}),(0,L.jsxs)("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 bg-rose-900/10 rounded-xl border border-rose-500/20",children:[(0,L.jsx)("div",{className:"w-8 h-8 rounded-lg bg-rose-600 text-white flex items-center justify-center shadow-sm flex-shrink-0",children:(0,L.jsx)(U.A,{size:14})}),(0,L.jsxs)("div",{className:"min-w-0",children:[(0,L.jsx)("p",{className:"text-[9px] text-rose-400 font-bold uppercase tracking-wider leading-none",children:"\ucfe0\ud3f0"}),(0,L.jsxs)("p",{className:"text-sm font-bold text-white truncate",children:[(null===x||void 0===x?void 0:x.coupons)||0,"\uac1c"]})]})]})]})]}),(0,L.jsxs)("header",{className:"hidden md:flex items-center justify-between bg-[#141423] border-b border-[#00fff2]/10 shadow-sm z-10",style:{height:"64px",minHeight:"64px",maxHeight:"64px",padding:"0 16px"},children:[(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,L.jsx)("button",{onClick:r,style:{padding:"8px",borderRadius:"8px",border:"1px solid rgba(0, 255, 242, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:o?(0,L.jsx)(J.A,{size:16}):(0,L.jsx)(V.A,{size:16})}),(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{fontSize:"15px",fontWeight:"bold",color:"white",whiteSpace:"nowrap",lineHeight:"1.2"},children:["\uc624\ub298\ub3c4 ",(0,L.jsx)("span",{style:{color:"#00fff2",fontFamily:"'Jua', sans-serif"},children:"\uc54c\ucc2c"})," \ud558\ub8e8! \ud83d\udc4b"]}),(0,L.jsxs)("div",{style:{fontSize:"12px",color:"#94a3b8",whiteSpace:"nowrap",lineHeight:"1.2"},children:[ne,"\ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4"]})]})]}),(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",color:"#34d399"},children:[(0,L.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"12px"},children:"\u20a9"}),(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:{fontSize:"10px",fontWeight:"600",opacity:.7,lineHeight:"1.2"},children:"\ud604\uae08"}),(0,L.jsxs)("div",{style:{fontSize:"13px",fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"1.2"},children:[_e((null===x||void 0===x?void 0:x.cash)||0),"\uc6d0"]})]})]}),(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"rgba(244, 63, 94, 0.1)",borderRadius:"8px",color:"#fb7185"},children:[(0,L.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#f43f5e",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(U.A,{size:14})}),(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:{fontSize:"10px",fontWeight:"600",opacity:.7,lineHeight:"1.2"},children:"\ucfe0\ud3f0"}),(0,L.jsxs)("div",{style:{fontSize:"13px",fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"1.2"},children:[(null===x||void 0===x?void 0:x.coupons)||0,"\uac1c"]})]})]}),(0,L.jsxs)("div",{onClick:()=>d("/my-profile"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"rgba(167, 139, 250, 0.1)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="rgba(167, 139, 250, 0.2)",onMouseLeave:e=>e.currentTarget.style.background="rgba(167, 139, 250, 0.1)",children:[(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"6px",background:(null===re||void 0===re?void 0:re.color)||"#a78bfa",fontSize:"14px"},children:(null===re||void 0===re?void 0:re.icon)||"\ud83c\udf1f"}),(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{fontSize:"10px",fontWeight:"600",color:(null===re||void 0===re?void 0:re.color)||"#a78bfa",lineHeight:"1.2"},children:["Lv.",(null===re||void 0===re?void 0:re.level)||1]}),(0,L.jsx)("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#e8e8ff",whiteSpace:"nowrap",lineHeight:"1.2"},children:(null===re||void 0===re?void 0:re.title)||"\uc0c8\uc2f9"})]}),de&&(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginLeft:"4px",padding:"2px 6px",background:"legendary"===de.rarity?"rgba(245, 158, 11, 0.2)":"epic"===de.rarity?"rgba(167, 139, 250, 0.2)":"rare"===de.rarity?"rgba(59, 130, 246, 0.2)":"rgba(107, 114, 128, 0.2)",borderRadius:"4px"},children:(0,L.jsx)("span",{style:{fontSize:"12px"},children:de.icon})})]}),(0,L.jsxs)("div",{style:{position:"relative"},ref:v,children:[(0,L.jsxs)("button",{onClick:()=>b(!f),style:{display:"flex",alignItems:"center",gap:"8px",paddingLeft:"12px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",background:"transparent",border:"none",cursor:"pointer"},children:[(0,L.jsxs)("div",{style:{textAlign:"right"},children:[(0,L.jsx)("div",{style:{fontSize:"13px",fontWeight:"bold",color:"white",whiteSpace:"nowrap",lineHeight:"1.2"},children:ne}),(0,L.jsx)("div",{style:{fontSize:"11px",color:"#818cf8",fontWeight:"500",whiteSpace:"nowrap",lineHeight:"1.2"},children:ie})]}),(0,L.jsx)("div",{onClick:e=>{e.stopPropagation(),d("/my-profile")},style:{cursor:"pointer"},children:(0,L.jsx)(Ee,{config:oe,size:40,showBorder:!0})})]}),f&&(0,L.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-72 bg-[#1a1a2e] rounded-2xl shadow-2xl border border-slate-700 overflow-hidden z-50",children:[(0,L.jsxs)("div",{className:"px-5 py-4 bg-gradient-to-r from-[#141423] to-indigo-900/20 border-b border-slate-700",children:[(0,L.jsx)("p",{className:"font-bold text-white",children:ne}),(0,L.jsxs)("p",{className:"text-sm text-slate-400 flex items-center gap-2 mt-1",children:[ae&&(0,L.jsx)("span",{className:"text-indigo-400 font-semibold",children:"\uad00\ub9ac\uc790"}),(null===x||void 0===x?void 0:x.classCode)&&(0,L.jsxs)("span",{children:["\ud559\uae09: ",x.classCode]})]})]}),(0,L.jsxs)("div",{className:"md:hidden px-5 py-4 bg-[#141423]/50 border-b border-slate-700",children:[(0,L.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,L.jsx)("span",{className:"text-sm text-slate-400",children:"\ud604\uae08"}),(0,L.jsxs)("span",{className:"font-bold text-emerald-400",children:[_e((null===x||void 0===x?void 0:x.cash)||0),"\uc6d0"]})]}),(0,L.jsxs)("div",{className:"flex justify-between items-center",children:[(0,L.jsx)("span",{className:"text-sm text-slate-400",children:"\ucfe0\ud3f0"}),(0,L.jsxs)("span",{className:"font-bold text-rose-400",children:[(null===x||void 0===x?void 0:x.coupons)||0,"\uac1c"]})]})]}),(0,L.jsxs)("div",{className:"p-2",children:[(0,L.jsxs)("button",{onClick:()=>{d("/my-profile"),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-white hover:bg-indigo-600/20 transition-colors bg-indigo-500/10 border border-indigo-500/30 mb-2",children:[(0,L.jsx)(K.A,{size:18,className:"text-indigo-400"}),"\ub0b4 \ud504\ub85c\ud544",(0,L.jsxs)("span",{className:"ml-auto text-xs text-indigo-400",children:["Lv.",(null===re||void 0===re?void 0:re.level)||0]})]}),(0,L.jsx)("div",{className:"h-px bg-slate-700 my-2"}),(0,L.jsxs)("button",{onClick:()=>{I((null===x||void 0===x?void 0:x.name)||(null===x||void 0===x?void 0:x.nickname)||""),k("nickname"),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors",children:[(0,L.jsx)(K.A,{size:18,className:"text-slate-500"}),"\ub2c9\ub124\uc784 \ubcc0\uacbd"]}),(0,L.jsxs)("button",{onClick:()=>{k("password"),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors",children:[(0,L.jsx)(X.A,{size:18,className:"text-slate-500"}),"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"]}),(0,L.jsxs)("button",{onClick:()=>{Z((null===x||void 0===x?void 0:x.classCode)||""),k("classCode"),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors",children:[(0,L.jsx)(w.A,{size:18,className:"text-slate-500"}),"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd"]}),(0,L.jsxs)("button",{onClick:()=>{S(!0),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors",children:[(0,L.jsx)(M.A,{size:18,className:"text-slate-500"}),"\uc124\uc815"]}),(0,L.jsx)("div",{className:"h-px bg-slate-700 my-2"}),(0,L.jsxs)("button",{onClick:async()=>{b(!1);if("\uacc4\uc815\uc0ad\uc81c"===window.prompt("\uc815\ub9d0\ub85c \uacc4\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\ub824\uba74 '\uacc4\uc815\uc0ad\uc81c'\ub77c\uace0 \uc785\ub825\ud574\uc8fc\uc138\uc694.")){const t=window.prompt("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(t)try{await g(c.email,t,!0),await h(),alert("\uacc4\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){alert("\uc0ad\uc81c \uc624\ub958: ".concat(e.message))}}},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-900/10 transition-colors",children:[(0,L.jsx)(Y.A,{size:18}),"\uacc4\uc815 \uc0ad\uc81c"]}),(0,L.jsx)("div",{className:"h-px bg-slate-700 my-2"}),(0,L.jsxs)("button",{onClick:async()=>{p&&(await p(),d("/login")),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-300 hover:bg-white/5 transition-colors",children:[(0,L.jsx)(O.A,{size:18,className:"text-slate-500"}),"\ub85c\uadf8\uc544\uc6c3"]})]})]})]})]})]}),(0,L.jsx)(We,{isOpen:"nickname"===N,onClose:xe,title:"\ub2c9\ub124\uc784 \ubcc0\uacbd",children:(0,L.jsxs)("div",{className:"space-y-4",children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ub2c9\ub124\uc784"}),(0,L.jsx)("input",{type:"text",value:A,onChange:e=>I(e.target.value),placeholder:"2-12\uc790",maxLength:12,className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors",autoFocus:!0})]}),T&&(0,L.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:T}),(0,L.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,L.jsx)("button",{onClick:xe,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{const e=A.trim();if(!e)return E("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(e.length<2)return E("\ub2c9\ub124\uc784\uc740 \ucd5c\uc18c 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(e.length>12)return E("\ub2c9\ub124\uc784\uc740 \ucd5c\ub300 12\uc790\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4.");j(!0);try{await m({name:e})?(alert("\ub2c9\ub124\uc784\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),xe()):E("\ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(t){E("\uc624\ub958: ".concat(t.message))}j(!1)},disabled:y,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:y?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})}),(0,L.jsx)(We,{isOpen:"password"===N,onClose:xe,title:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd",children:(0,L.jsxs)("div",{className:"space-y-4",children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,L.jsx)("input",{type:"password",value:z,onChange:e=>D(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,L.jsx)("input",{type:"password",value:R,onChange:e=>_(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,L.jsx)("input",{type:"password",value:W,onChange:e=>B(e.target.value),className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),P&&(0,L.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:P}),Q&&(0,L.jsx)("p",{className:"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl",children:"\ube44\ubc00\ubc88\ud638\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,L.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,L.jsx)("button",{onClick:xe,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(!z||!R||!W)return F("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(R.length<6)return F("\uc0c8 \ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(R!==W)return F("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");j(!0);try{await g(c.email,z,!0),await u(R),H(!0),setTimeout(xe,2e3)}catch(e){"auth/wrong-password"===e.code||"auth/invalid-credential"===e.code?F("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."):F("\uc624\ub958: ".concat(e.message))}j(!1)},disabled:y||Q,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:y?"\ubcc0\uacbd \uc911...":"\ubcc0\uacbd"})]})]})}),(0,L.jsx)(We,{isOpen:"classCode"===N,onClose:xe,title:"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd",children:(0,L.jsxs)("div",{className:"space-y-4",children:[(null===x||void 0===x?void 0:x.classCode)&&(0,L.jsxs)("p",{className:"text-sm text-slate-400 bg-slate-800/50 p-3 rounded-xl",children:["\ud604\uc7ac \ud559\uae09 \ucf54\ub4dc: ",(0,L.jsx)("strong",{className:"text-white",children:x.classCode})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"\uc0c8 \ud559\uae09 \ucf54\ub4dc"}),(0,L.jsx)("input",{type:"text",value:q,onChange:e=>Z(e.target.value.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()),placeholder:"\uc601\ubb38\uc790\uc640 \uc22b\uc790\ub9cc",maxLength:20,className:"w-full px-4 py-3 border-2 border-slate-700 bg-[#141423] text-white rounded-xl text-sm focus:outline-none focus:border-indigo-500 transition-colors",autoFocus:!0}),(0,L.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"\uc601\ubb38\uc790\uc640 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),$&&(0,L.jsx)("p",{className:"text-sm text-red-400 bg-red-900/10 p-3 rounded-xl",children:$}),te&&(0,L.jsx)("p",{className:"text-sm text-green-400 bg-green-900/10 p-3 rounded-xl",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,L.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,L.jsx)("button",{onClick:xe,className:"flex-1 py-3 border border-slate-700 rounded-xl text-sm font-semibold text-slate-300 hover:bg-slate-800 transition-colors",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{const e=q.trim().toUpperCase();if(!e)return ee("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");j(!0);try{if(!await(0,G.JK)(e))return ee("'".concat(e,"'\ub294 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ud559\uae09 \ucf54\ub4dc\uc785\ub2c8\ub2e4.")),void j(!1);await m({classCode:e})?(se(!0),setTimeout(()=>{alert("\ud559\uae09 \ucf54\ub4dc\uac00 '".concat(e,"'\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")),xe()},1e3)):ee("\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(t){ee("\uc624\ub958: ".concat(t.message))}j(!1)},disabled:y,className:"flex-1 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl text-sm font-semibold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-violet-700 transition-all disabled:opacity-50",children:y?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})}),(0,L.jsx)(ce,{isOpen:C,onClose:()=>S(!1)})]})});const Pe=[{id:"home",icon:s(3658).A,label:"\ud648",path:"/dashboard/tasks"},{id:"assets",icon:r.A,label:"\uc790\uc0b0",path:"/my-assets"},{id:"game",icon:c.A,label:"\uac8c\uc784",paths:["/learning-games","/gonu-game"]},{id:"community",icon:k.A,label:"\ucee4\ubba4\ub2c8\ud2f0",path:"/learning-board"}];function Fe(){const e=(0,n.zy)(),t=(0,n.Zp)();return(0,L.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-100/50 pb-safe pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] z-50",children:(0,L.jsx)("div",{className:"flex justify-between items-center max-w-md mx-auto",children:Pe.map(s=>{const a=(t=>t.paths?t.paths.some(t=>e.pathname.startsWith(t)):e.pathname===t.path||e.pathname.startsWith(t.path+"/"))(s),n=s.icon;return(0,L.jsxs)("button",{onClick:()=>(e=>{e.paths?t(e.paths[0]+"/omok"):t(e.path)})(s),className:"flex flex-col items-center gap-1 p-2 min-w-[64px] transition-all duration-300 ".concat(a?"text-indigo-600 -translate-y-1":"text-gray-400"),children:[(0,L.jsx)(n,{size:24,strokeWidth:a?2.5:2,className:a?"drop-shadow-md":""}),(0,L.jsx)("span",{className:"text-[10px] font-medium ".concat(a?"opacity-100":"opacity-70"),children:s.label})]},s.id)})})})}var Qe=s(441),He=s(1360),qe=s(7104);function Ge(){const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[l,r]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(o(e),window.matchMedia("(display-mode: standalone)").matches)return void r(!0);const s=localStorage.getItem("pwa-install-dismissed");if(s){const e=parseInt(s,10);if(Date.now()-e<6048e5)return}const a=e=>{e.preventDefault(),t(e),setTimeout(()=>n(!0),2e3)};return window.addEventListener("beforeinstallprompt",a),e&&!window.matchMedia("(display-mode: standalone)").matches&&setTimeout(()=>n(!0),3e3),window.addEventListener("appinstalled",()=>{r(!0),n(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]);const d=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return l||!s?null:(0,L.jsx)("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up",children:(0,L.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,L.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-violet-600 px-4 py-3 flex items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,L.jsx)(de.A,{size:20}),(0,L.jsx)("span",{className:"font-semibold",children:"\uc571 \uc124\uce58\ud558\uae30"})]}),(0,L.jsx)("button",{onClick:d,className:"text-white/80 hover:text-white transition-colors",children:(0,L.jsx)(R.A,{size:20})})]}),(0,L.jsxs)("div",{className:"p-4",children:[(0,L.jsxs)("div",{className:"flex items-start gap-4",children:[(0,L.jsx)("div",{className:"w-14 h-14 bg-gradient-to-tr from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-200/50",children:(0,L.jsx)("span",{className:"text-white text-2xl",children:"\u2728"})}),(0,L.jsxs)("div",{className:"flex-1",children:[(0,L.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"\uc54c\ucc2c \uc571\uc744 \uc124\uce58\ud558\uc138\uc694!"}),(0,L.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:"\ud648 \ud654\uba74\uc5d0 \ucd94\uac00\ud558\uba74 \ub354 \ube60\ub974\uac8c \uc811\uc18d\ud558\uace0, \uc624\ud504\ub77c\uc778\uc5d0\uc11c\ub3c4 \uc77c\ubd80 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."})]})]}),i?(0,L.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-xl",children:[(0,L.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"iOS\uc5d0\uc11c \uc124\uce58\ud558\uae30:"}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,L.jsx)(Qe.A,{size:16,className:"text-indigo-500"}),(0,L.jsx)("span",{children:"1. \ud558\ub2e8\uc758 \uacf5\uc720 \ubc84\ud2bc \ud0ed"})]}),(0,L.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,L.jsx)(He.A,{size:16,className:"text-indigo-500"}),(0,L.jsx)("span",{children:'2. "\ud648 \ud654\uba74\uc5d0 \ucd94\uac00" \uc120\ud0dd'})]})]})]}):(0,L.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,L.jsx)("button",{onClick:d,className:"flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors",children:"\ub098\uc911\uc5d0"}),(0,L.jsxs)("button",{onClick:async()=>{if(!e)return;e.prompt();const{outcome:s}=await e.userChoice;"accepted"===s?console.log("PWA \uc124\uce58 \uc218\ub77d"):console.log("PWA \uc124\uce58 \uac70\uc808"),t(null),n(!1)},className:"flex-1 px-4 py-2.5 text-white bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-200/50",children:[(0,L.jsx)(qe.A,{size:18}),"\uc124\uce58\ud558\uae30"]})]})]}),(0,L.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:(0,L.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"\uc124\uce58\ud574\ub3c4 \uc800\uc7a5\uacf5\uac04\uc744 \uac70\uc758 \ucc28\uc9c0\ud558\uc9c0 \uc54a\uc544\uc694"})})]})})}function Ue(e){let{onUpdate:t,onDismiss:s}=e;return(0,L.jsx)("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up",children:(0,L.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl shadow-2xl p-4 text-white",children:(0,L.jsxs)("div",{className:"flex items-start gap-3",children:[(0,L.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,L.jsx)(f.A,{size:20,className:"animate-spin-slow"})}),(0,L.jsxs)("div",{className:"flex-1",children:[(0,L.jsx)("h3",{className:"font-bold mb-1",children:"\uc0c8 \ubc84\uc804\uc774 \uc788\uc5b4\uc694!"}),(0,L.jsx)("p",{className:"text-sm text-white/80 mb-3",children:"\ub354 \ub098\uc740 \uc54c\ucc2c\uc744 \uc704\ud574 \uc5c5\ub370\uc774\ud2b8\ub97c \uc801\uc6a9\ud574\uc8fc\uc138\uc694."}),(0,L.jsxs)("div",{className:"flex gap-2",children:[(0,L.jsx)("button",{onClick:s,className:"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"\ub098\uc911\uc5d0"}),(0,L.jsxs)("button",{onClick:t,className:"px-3 py-1.5 text-sm bg-white text-emerald-600 font-semibold rounded-lg hover:bg-white/90 transition-colors flex items-center gap-1",children:[(0,L.jsx)(f.A,{size:14}),"\uc9c0\uae08 \uc5c5\ub370\uc774\ud2b8"]})]})]}),(0,L.jsx)("button",{onClick:s,className:"text-white/60 hover:text-white transition-colors",children:(0,L.jsx)(R.A,{size:18})})]})})})}function Je(){const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[i,l]=(0,a.useState)(navigator.onLine);(0,a.useEffect)(()=>{const e=()=>l(!0),t=()=>l(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),"serviceWorker"in navigator&&r(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const r=async()=>{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});t(e),console.log("[PWA] \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ub4f1\ub85d \uc131\uacf5:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{if("installed"===t.state&&navigator.serviceWorker.controller){const e=sessionStorage.getItem("alchan_updated");if(e&&Date.now()-parseInt(e)<3e5)return void console.log("[PWA] \ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8\ub428 - \uc54c\ub9bc \uc0dd\ub7b5");console.log("[PWA] \uc0c8 \ubc84\uc804 \uc0ac\uc6a9 \uac00\ub2a5"),n(!0)}})}),setInterval(()=>{e.update()},36e5)}catch(e){console.error("[PWA] \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ub4f1\ub85d \uc2e4\ud328:",e)}},d=(0,a.useCallback)(()=>{n(!1),sessionStorage.setItem("alchan_updated",Date.now().toString()),e&&e.waiting?(navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("[PWA] \uc0c8 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ud65c\uc131\ud654\ub428 - \uc0c8\ub85c\uace0\uce68"),window.location.reload()}),e.waiting.postMessage({type:"SKIP_WAITING"})):(console.log("[PWA] \ub300\uae30 \uc911\uc778 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \uc5c6\uc74c - \uac15\uc81c \uc0c8\ub85c\uace0\uce68"),window.location.reload())},[e]),c=(0,a.useCallback)(async()=>{if(!("Notification"in window))return console.log("[PWA] \uc774 \ube0c\ub77c\uc6b0\uc800\ub294 \uc54c\ub9bc\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission){return"granted"===await Notification.requestPermission()}return!1},[]),x=(0,a.useCallback)(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await c()&&e&&e.showNotification(t,(0,o.A)({icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",vibrate:[100,50,100]},s))},[e,c]);return{registration:e,updateAvailable:s,updateServiceWorker:d,isOnline:i,requestNotificationPermission:c,showNotification:x}}var Ve=s(5881),Ke=s(2861),Xe=s(2395),Ye=s(7950);function Ze(e){let{task:t,onEarnCoupon:s,isJobTask:n,isAdmin:i,onEditTask:l,onDeleteTask:r,taskId:d,jobId:c=null}=e;const[x,p]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),N=e=>{v||y||(console.log("[TaskItem] \uce74\ub4dc \uc120\ud0dd:",{cardType:e,taskId:d,jobId:c,isJobTask:n}),j(e),w(!0),setTimeout(()=>{const a="cash"===e?f.cash:f.coupon,i="cash"===e?"".concat(a.toLocaleString(),"\uc6d0"):"".concat(a,"\uac1c");console.log("[TaskItem] onEarnCoupon \ud638\ucd9c \uc900\ube44:",{taskId:d,jobId:c,isJobTask:n,cardType:e,reward:a}),"function"===typeof s&&s(d||t.id,c,n,e,a),g(!1),u("".concat("cash"===e?"\ud83d\udcb0 \ud604\uae08":"\ud83c\udfab \ucfe0\ud3f0"," ").concat(i," \ud68d\ub4dd! \ud83d\ude0a")),p(!0),w(!1)},800))};(0,a.useEffect)(()=>{let e;return x&&(e=setTimeout(()=>{p(!1),u("")},2e3)),()=>clearTimeout(e)},[x]);const k=t&&t.maxClicks>0&&t.clicks>=t.maxClicks;if(!t)return null;const C=window.innerWidth<=768,S={backgroundColor:k?"rgba(20, 20, 35, 0.4)":"rgba(30, 30, 50, 0.6)",borderRadius:"8px",cursor:k?"default":"pointer",transition:"all 0.2s ease",border:"1px solid ".concat(k?"rgba(100, 116, 139, 0.1)":"rgba(0, 255, 242, 0.15)"),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",position:"relative",opacity:k?.6:1,padding:C?"8px 10px":"12px",marginBottom:"8px",boxShadow:k?"none":"0 4px 12px rgba(0, 0, 0, 0.1)",gap:C?"6px":"8px"},A={display:"flex",alignItems:"center",gap:C?"6px":"10px",flexGrow:1,minWidth:0,overflow:"hidden"},I={color:k?"#64748b":"#e8e8ff",fontWeight:"600",fontSize:C?"12px":"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"1.4",flex:1,minWidth:0},T={display:"flex",alignItems:"center",gap:C?"4px":"8px",flexShrink:0},M={backgroundColor:n?"rgba(79, 70, 229, 0.3)":"rgba(16, 185, 129, 0.3)",color:n?"#818cf8":"#34d399",border:n?"1px solid rgba(99, 102, 241, 0.5)":"1px solid rgba(52, 211, 153, 0.5)",padding:C?"3px 6px":"4px 10px",borderRadius:"10px",fontSize:C?"10px":"13px",fontWeight:"500",whiteSpace:"nowrap"};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:S,onClick:k?null:()=>{if(console.log("[TaskItem] handleInternalClick \ud638\ucd9c\ub428:",{taskName:null===t||void 0===t?void 0:t.name,isJobTask:n,taskId:d,jobId:c}),!t||"number"!==typeof t.clicks||"number"!==typeof t.maxClicks)return void console.error("Invalid task prop:",t);if(t.maxClicks>0&&t.clicks>=t.maxClicks)return;console.log("[TaskItem] \uce74\ub4dc \ubaa8\ub2ec \uc5f4\uae30");const e=(()=>{const e=e=>{const t=e.reduce((e,t)=>e+t.weight,0);let s=Math.random()*t;for(const a of e)if(s-=a.weight,s<=0)return a.amount;return e[e.length-1].amount};return{cash:e([{amount:5e4,weight:5},{amount:3e4,weight:10},{amount:2e4,weight:15},{amount:1e4,weight:20},{amount:5e3,weight:18},{amount:3e3,weight:12},{amount:1e3,weight:10},{amount:500,weight:7},{amount:100,weight:3}]),coupon:e([{amount:20,weight:10},{amount:10,weight:20},{amount:5,weight:20},{amount:3,weight:20},{amount:1,weight:30}])}})();b(e),j(null),w(!1),g(!0)},children:[(0,L.jsx)("div",{style:A,children:(0,L.jsx)("span",{style:I,title:t.name,children:t.name})}),(0,L.jsxs)("div",{style:T,children:[(0,L.jsx)("span",{style:M,children:"\ud83c\udf81 \ub79c\ub364\ubcf4\uc0c1"}),i&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},style:$e,"aria-label":"\ud560\uc77c \uc218\uc815",children:"\u270f\ufe0f"}),(0,L.jsx)("button",{onClick:e=>{e.stopPropagation(),r()},style:$e,"aria-label":"\ud560\uc77c \uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]}),x&&(0,L.jsxs)("div",{style:et,children:[m,(0,L.jsx)("div",{style:tt})]})]}),(()=>{if(!h||!f)return null;const e=(0,o.A)((0,o.A)({},at),{},{padding:C?"20px":"40px",width:C?"95%":"90%"}),t=(0,o.A)((0,o.A)({},nt),{},{fontSize:C?"20px":"28px",marginBottom:C?"8px":"10px"}),s=(0,o.A)((0,o.A)({},it),{},{fontSize:C?"13px":"16px",marginBottom:C?"20px":"30px"}),a=(0,o.A)((0,o.A)({},ot),{},{gap:C?"15px":"20px"}),n=(0,o.A)((0,o.A)({},lt),{},{width:C?"140px":"200px",height:C?"200px":"280px"}),i=(0,o.A)((0,o.A)({},mt),{},{fontSize:C?"50px":"80px",marginBottom:C?"10px":"20px"}),l=(0,o.A)((0,o.A)({},ut),{},{fontSize:C?"18px":"24px"}),r=(0,o.A)((0,o.A)({},ht),{},{fontSize:C?"24px":"36px"}),d=(0,o.A)((0,o.A)({},gt),{},{fontSize:C?"14px":"18px"});return(0,Ye.createPortal)((0,L.jsx)("div",{style:st,onClick:()=>g(!1),children:(0,L.jsxs)("div",{style:e,onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("h3",{style:t,children:"\ud83c\udf81 \ubcf4\uc0c1 \uc120\ud0dd"}),(0,L.jsx)("p",{style:s,children:"\ub450 \uac1c\uc758 \uce74\ub4dc \uc911 \ud558\ub098\ub97c \uc120\ud0dd\ud558\uc138\uc694!"}),(0,L.jsxs)("div",{style:a,children:[(0,L.jsx)("div",{style:(0,o.A)((0,o.A)({},n),"cash"===y&&rt),onClick:()=>!y&&N("cash"),children:(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},dt),{},{transform:"cash"===y?"rotateY(180deg)":"rotateY(0deg)"}),children:[(0,L.jsxs)("div",{style:ct,children:[(0,L.jsx)("div",{style:i,children:"\ud83d\udcb0"}),(0,L.jsx)("div",{style:l,children:"\ud604\uae08"})]}),(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},xt),"cash"===y&&pt),children:[(0,L.jsxs)("div",{style:r,children:[f.cash.toLocaleString(),"\uc6d0"]}),(0,L.jsx)("div",{style:d,children:"\ud83d\udcb0 \ud604\uae08 \ud68d\ub4dd!"})]})]})}),(0,L.jsx)("div",{style:(0,o.A)((0,o.A)({},n),"coupon"===y&&rt),onClick:()=>!y&&N("coupon"),children:(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},dt),{},{transform:"coupon"===y?"rotateY(180deg)":"rotateY(0deg)"}),children:[(0,L.jsxs)("div",{style:ct,children:[(0,L.jsx)("div",{style:i,children:"\ud83c\udfab"}),(0,L.jsx)("div",{style:l,children:"\ucfe0\ud3f0"})]}),(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},xt),"coupon"===y&&pt),children:[(0,L.jsxs)("div",{style:r,children:[f.coupon,"\uac1c"]}),(0,L.jsx)("div",{style:d,children:"\ud83c\udfab \ucfe0\ud3f0 \ud68d\ub4dd!"})]})]})})]})]})}),document.body)})()]})}const $e={background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:"16px",color:"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center"},et={position:"absolute",bottom:"calc(100% + 8px)",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.75)",color:"white",padding:"5px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",zIndex:10,pointerEvents:"none",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"},tt={content:'""',position:"absolute",top:"100%",left:"50%",marginLeft:"-5px",borderWidth:"5px",borderStyle:"solid",borderColor:"rgba(0, 0, 0, 0.75) transparent transparent transparent"},st={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.3s ease"},at={backgroundColor:"#1a1a2e",border:"1px solid rgba(0, 255, 242, 0.3)",borderRadius:"20px",padding:"40px",maxWidth:"600px",width:"90%",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",animation:"zoomIn 0.3s ease"},nt={fontSize:"28px",fontWeight:"bold",textAlign:"center",marginBottom:"10px",color:"#ffffff",textShadow:"0 0 10px rgba(0, 255, 242, 0.5)"},it={fontSize:"16px",textAlign:"center",color:"#a0a0c0",marginBottom:"30px"},ot={display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap"},lt={width:"200px",height:"280px",perspective:"1000px",cursor:"pointer",transition:"transform 0.2s ease"},rt={transform:"scale(1.05)"},dt={position:"relative",width:"100%",height:"100%",transition:"transform 0.8s",transformStyle:"preserve-3d"},ct={position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",border:"3px solid #fff"},xt={position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundColor:"#fff",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",border:"3px solid #667eea",transform:"rotateY(180deg)",opacity:0,transition:"opacity 0.3s ease 0.4s"},pt={opacity:1},mt={fontSize:"80px",marginBottom:"20px"},ut={fontSize:"24px",fontWeight:"bold",color:"white"},ht={fontSize:"36px",fontWeight:"bold",color:"#667eea",marginBottom:"10px"},gt={fontSize:"18px",color:"#666"};function ft(e){let{job:t,isAdmin:s,onEditJob:a,onDeleteJob:n,onAddTask:i,onEditTask:o,onDeleteTask:l,onEarnCoupon:r,addJobTaskButtonStyle:d}=e;if(!t)return null;const c=window.innerWidth<=768;return(0,L.jsxs)("div",{style:{backgroundColor:"rgba(20, 20, 35, 0.6)",borderRadius:"10px",border:"1px solid rgba(0, 255, 242, 0.2)",overflow:"hidden",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)",marginBottom:"15px",backdropFilter:"blur(5px)",display:"flex",flexDirection:"column",height:"100%"},children:[(0,L.jsxs)("div",{className:"job-header-container",style:{background:"linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)",padding:c?"12px 14px":"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(0, 255, 242, 0.2)"},children:[(0,L.jsx)("div",{className:"job-title-text",style:{fontWeight:"700",fontSize:c?"15px":"18px",textShadow:"0 1px 3px rgba(0,0,0,0.2)",letterSpacing:"-0.01em",color:"#e8e8ff",textShadow:"0 0 10px rgba(0, 255, 242, 0.3)"},children:t.title}),s&&(0,L.jsxs)("div",{children:[(0,L.jsx)("button",{onClick:()=>a(t.id),style:{background:"none",border:"none",cursor:"pointer",color:"rgba(255, 255, 255, 0.7)",marginRight:"8px",padding:"0"},"aria-label":"".concat(t.title," \uc9c1\uc5c5 \uc218\uc815"),children:"\u270f\ufe0f"}),(0,L.jsx)("button",{onClick:()=>n(t.id),style:{background:"none",border:"none",cursor:"pointer",color:"rgba(255, 255, 255, 0.7)",padding:"0"},"aria-label":"".concat(t.title," \uc9c1\uc5c5 \uc0ad\uc81c"),children:"\ud83d\uddd1\ufe0f"})]})]}),(0,L.jsx)("div",{style:{padding:c?"8px":"10px",flexGrow:1,overflowY:"auto"},children:t.tasks&&t.tasks.length>0?t.tasks.map(e=>(0,L.jsx)(Ze,{task:e,taskId:e.id,jobId:t.id,onEarnCoupon:r,onEditTask:()=>o(e.id,t.id),onDeleteTask:()=>l(e.id,t.id),isAdmin:s,isJobTask:!0},e.id)):(0,L.jsx)("p",{style:{fontSize:"13px",color:"#9999bb",textAlign:"center",margin:"10px 0"},children:"\ub4f1\ub85d\ub41c \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})}),s&&(0,L.jsx)("div",{style:{padding:c?"8px":"10px",borderTop:"1px solid rgba(0, 255, 242, 0.1)"},children:(0,L.jsx)("button",{onClick:i,style:d||{width:"100%",padding:c?"6px":"8px",backgroundColor:"rgba(0, 255, 242, 0.1)",border:"1px solid rgba(0, 255, 242, 0.3)",color:"#00fff2",borderRadius:"6px",cursor:"pointer",fontSize:c?"12px":"13px",fontWeight:"500",marginTop:"0",transition:"all 0.2s ease"},children:"+ \uc774 \uc9c1\uc5c5\uc5d0 \ud560\uc77c \ucd94\uac00"})})]},t.id)}function bt(e){let{tasks:t,isAdmin:s,onEditTask:a,onDeleteTask:n,onEarnCoupon:i}=e;if(!Array.isArray(t)||0===t.length)return(0,L.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:s?"\ub4f1\ub85d\ub41c \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uc124\uc815\uc5d0\uc11c \ucd94\uac00\ud574\uc8fc\uc138\uc694.":"\ud604\uc7ac \uc218\ud589\ud560 \uc218 \uc788\ub294 \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."});const o="undefined"!==typeof window&&window.innerWidth<=768;return(0,L.jsx)("div",{style:{display:"grid",gridTemplateColumns:o?"1fr":"repeat(2, 1fr)",gap:o?"8px":"10px"},children:t.map(e=>(0,L.jsx)(Ze,{task:e,taskId:e.id,onEarnCoupon:i,onEditTask:()=>a(e.id),onDeleteTask:()=>n(e.id),isAdmin:s,isJobTask:!1},e.id))})}const yt=(0,a.memo)(function(e){let{showTransferModal:t,setShowTransferModal:s,recipients:a=[],transferRecipient:n,setTransferRecipient:i,transferAmount:l,setTransferAmount:r,handleTransfer:d,userId:c,userCash:x=0}=e;const p={display:t?"flex":"none",position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},m={width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},u=(0,o.A)((0,o.A)({},m),{},{cursor:"pointer",backgroundColor:"white"}),h={display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},g={padding:"10px 20px",borderRadius:"6px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},f=(0,o.A)((0,o.A)({},g),{},{backgroundColor:"#4f46e5",color:"white"}),b=(0,o.A)((0,o.A)({},g),{},{backgroundColor:"#e5e7eb",color:"#374151",marginRight:"10px"}),y=a.filter(e=>e&&e.id&&e.id!==c).sort((e,t)=>{const s=e.name||e.nickname||"\uc0ac\uc6a9\uc790 ".concat(e.id.substring(0,6)),a=t.name||t.nickname||"\uc0ac\uc6a9\uc790 ".concat(t.id.substring(0,6));return s.localeCompare(a,"ko")});return(0,L.jsx)("div",{style:p,onClick:()=>s(!1),children:(0,L.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"30px",maxWidth:"450px",width:"100%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("button",{onClick:()=>s(!1),style:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"\ub2eb\uae30",children:"\xd7"}),(0,L.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"25px",color:"#1f2937"},children:"\ud83d\udcb8 \uc1a1\uae08\ud558\uae30"}),(0,L.jsx)("div",{style:{backgroundColor:"#f3f4f6",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:(0,L.jsxs)("p",{style:{fontSize:"14px",color:"#4b5563",margin:"0"},children:["\ud604\uc7ac \ubcf4\uc720 \ud604\uae08: ",(0,L.jsxs)("strong",{style:{color:"#1f2937"},children:[x.toLocaleString(),"\uc6d0"]})]})}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d()},children:[(0,L.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,L.jsx)("label",{style:h,children:"\ubc1b\ub294 \uc0ac\ub78c"}),(0,L.jsxs)("select",{value:n,onChange:e=>i(e.target.value),style:u,required:!0,children:[(0,L.jsx)("option",{value:"",children:"\ubc1b\ub294 \ubd84\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),y.length>0?y.map(e=>(0,L.jsx)("option",{value:e.id,children:e.name||e.nickname||"\uc0ac\uc6a9\uc790 ".concat(e.id.substring(0,6))},e.id)):(0,L.jsx)("option",{value:"",disabled:!0,children:"\uc1a1\uae08 \uac00\ub2a5\ud55c \ud559\uae09 \uce5c\uad6c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]}),0===y.length&&(0,L.jsx)("p",{style:{marginTop:"8px",fontSize:"12px",color:"#ef4444"},children:"\u26a0\ufe0f \uac19\uc740 \ud559\uae09\uc758 \ub2e4\ub978 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uac70\ub098 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,L.jsx)("label",{style:h,children:"\uc1a1\uae08 \uae08\uc561"}),(0,L.jsx)("input",{type:"number",value:l,onChange:e=>r(e.target.value),placeholder:"\uc1a1\uae08\ud560 \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694",style:m,min:"1",max:x,required:!0}),l&&parseInt(l)>x&&(0,L.jsx)("p",{style:{marginTop:"8px",fontSize:"12px",color:"#ef4444"},children:"\ubcf4\uc720 \ud604\uae08\ubcf4\ub2e4 \ub9ce\uc740 \uae08\uc561\uc740 \uc1a1\uae08\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:[(0,L.jsx)("button",{type:"button",onClick:()=>s(!1),style:b,onMouseOver:e=>{e.target.style.backgroundColor="#d1d5db"},onMouseOut:e=>{e.target.style.backgroundColor="#e5e7eb"},children:"\ucde8\uc18c"}),(0,L.jsx)("button",{type:"submit",style:f,disabled:!n||!l||parseInt(l)>x||0===y.length,onMouseOver:e=>{e.target.disabled||(e.target.style.backgroundColor="#4338ca")},onMouseOut:e=>{e.target.disabled||(e.target.style.backgroundColor="#4f46e5")},children:"\uc1a1\uae08"})]})]})]})})}),jt=yt;s(5226),s(3057),s(783);var vt=s(7029),wt=s(3248),Nt=s(7097);const kt=e=>{const t=(0,Xe.Qg)(G.Cn,e);return async s=>{try{const e=await t(s);if(e.data.success)return e.data;throw new Error(e.data.message||"\ud568\uc218 \uc2e4\ud589 \uc2e4\ud328")}catch(a){throw console.error("".concat(e," \uc624\ub958:"),a),a}}},Ct={getAdminSettingsData:kt("getAdminSettingsData"),batchPaySalaries:kt("batchPaySalaries"),getItemContextData:kt("getItemContextData")},St=(e,t)=>["adminSettings",e,t],At=e=>["students",e],It=e=>["salarySettings",e],Tt=()=>["systemManagement"],Mt=()=>navigator.onLine&&!document.hidden,Et=(e,t)=>{try{localStorage.setItem("backup_".concat(e),JSON.stringify({data:t,timestamp:Date.now()}))}catch(s){console.warn("\ub85c\uceec \ubc31\uc5c5 \uc800\uc7a5 \uc2e4\ud328:",s)}},zt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;try{const s=localStorage.getItem("backup_".concat(e));if(s){const e=JSON.parse(s);if(Date.now()-e.timestamp<t)return e.data}}catch(s){console.warn("\ub85c\uceec \ubc31\uc5c5 \ub85c\ub4dc \uc2e4\ud328:",s)}return null},Dt=e=>{try{localStorage.removeItem("backup_".concat(e))}catch(t){console.warn("\ub85c\uceec \ubc31\uc5c5 \uc0ad\uc81c \uc2e4\ud328:",t)}},Rt=e=>{let{isSuperAdmin:t}=e;const[s,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[l,r]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[m,u]=(0,a.useState)(0),h=(0,Xe.Qg)(G.Cn,"getSystemStatus"),g=(0,Xe.Qg)(G.Cn,"resolveSystemAlert"),f=(0,a.useCallback)(async()=>{if(t){o(!0),r(null);try{const e=await h();if(!e.data.success)throw new Error(e.data.message||"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328");n(e.data.data),p(new Date),u(0)}catch(e){console.error("[SystemMonitoring] \uc0c1\ud0dc \uc870\ud68c \uc624\ub958:",e),r(e.message||"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),u(e=>e+1),m>=2&&(c(!1),console.warn("[SystemMonitoring] \uc5f0\uc18d \uc5d0\ub7ec \ubc1c\uc0dd\uc73c\ub85c \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc744 \uc911\uc9c0\ud569\ub2c8\ub2e4."))}finally{o(!1)}}},[t,h,m]),b=(0,a.useCallback)(async e=>{if(window.confirm("\uc774 \uacbd\uace0\ub97c \ud574\uacb0 \ucc98\ub9ac\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{(await g({alertId:e})).data.success&&(alert("\uacbd\uace0\uac00 \ud574\uacb0\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),f())}catch(t){console.error("[SystemMonitoring] \uacbd\uace0 \ud574\uacb0 \uc624\ub958:",t),alert("\uacbd\uace0 \ud574\uacb0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(t.message))}},[g,f]);return(0,a.useEffect)(()=>{t&&f()},[t,f]),(0,a.useEffect)(()=>{if(!d||!t)return;const e=setInterval(()=>{f()},12e4);return()=>clearInterval(e)},[d,t,f]),(0,a.useEffect)(()=>{d&&u(0)},[d]),t?(0,L.jsxs)("div",{className:"system-monitoring section-card",children:[(0,L.jsxs)("div",{className:"monitoring-header",children:[(0,L.jsx)("h3",{children:"\ud83d\udda5\ufe0f \uc11c\ubc84 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1"}),(0,L.jsxs)("div",{className:"monitoring-controls",children:[(0,L.jsxs)("label",{className:"auto-refresh-toggle",children:[(0,L.jsx)("input",{type:"checkbox",checked:d,onChange:e=>c(e.target.checked)}),(0,L.jsx)("span",{children:"\uc790\ub3d9 \uc0c8\ub85c\uace0\uce68 (30\ucd08)"})]}),(0,L.jsx)("button",{onClick:f,disabled:i,className:"refresh-button",children:i?"\u23f3 \uc870\ud68c \uc911...":"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"})]})]}),x&&(0,L.jsxs)("p",{className:"last-update",children:["\ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8: ",x.toLocaleTimeString("ko-KR")]}),l&&(0,L.jsxs)("div",{className:"error-message",children:[(0,L.jsxs)("p",{children:["\u274c ",l]}),m>=3&&(0,L.jsx)("p",{style:{marginTop:"8px",fontSize:"14px"},children:"\u26a0\ufe0f \uc5f0\uc18d \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc5ec \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc774 \uc911\uc9c0\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc218\ub3d9\uc73c\ub85c \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc790\ub3d9 \uc0c8\ub85c\uace0\uce68\uc744 \ub2e4\uc2dc \ud65c\uc131\ud654\ud574\uc8fc\uc138\uc694."})]}),s&&(0,L.jsxs)(L.Fragment,{children:[s.message&&(0,L.jsx)("div",{className:"info-message",style:{padding:"12px",background:"#e3f2fd",border:"1px solid #90caf9",borderRadius:"4px",marginBottom:"15px",color:"#1976d2"},children:(0,L.jsxs)("p",{style:{margin:0},children:["\u2139\ufe0f ",s.message]})}),(0,L.jsxs)("div",{className:"system-health-card",children:[(0,L.jsx)("h4",{children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc"}),(0,L.jsxs)("div",{className:"health-indicator health-".concat(s.health),children:[(0,L.jsx)("span",{className:"health-icon",children:"healthy"===s.health?"\u2705":"warning"===s.health?"\u26a0\ufe0f":"\ud83d\udea8"}),(0,L.jsx)("span",{className:"health-text",children:"healthy"===s.health?"\uc815\uc0c1":"warning"===s.health?"\uc8fc\uc758":"\uc704\ud5d8"})]}),(0,L.jsx)("div",{className:"stats-grid",children:(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\uc804\uccb4 \uc0ac\uc6a9\uc790"}),(0,L.jsx)("span",{className:"stat-value",children:s.totalUsers})]})})]}),(0,L.jsxs)("div",{className:"stats-card",children:[(0,L.jsx)("h4",{children:"\ucd5c\uadfc 1\ubd84 \ud1b5\uacc4"}),(0,L.jsxs)("div",{className:"stats-grid",children:[(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\uc77d\uae30 \uc791\uc5c5"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.lastMinute.reads.toLocaleString()})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\uc4f0\uae30 \uc791\uc5c5"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.lastMinute.writes.toLocaleString()})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\uc5d0\ub7ec \uc218"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.lastMinute.errors})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\uc5d0\ub7ec\uc728"}),(0,L.jsxs)("span",{className:"stat-value",children:[(100*s.stats.lastMinute.errorRate).toFixed(2),"%"]})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04"}),(0,L.jsxs)("span",{className:"stat-value",children:[s.stats.lastMinute.avgResponseTime.toFixed(0),"ms"]})]})]})]}),s.anomalies&&s.anomalies.length>0&&(0,L.jsxs)("div",{className:"anomalies-card",children:[(0,L.jsx)("h4",{children:"\u26a0\ufe0f \ube44\uc815\uc0c1 \ud328\ud134 \uac10\uc9c0"}),(0,L.jsx)("div",{className:"anomalies-list",children:s.anomalies.map((e,t)=>(0,L.jsxs)("div",{className:"anomaly-item anomaly-".concat(e.severity),children:[(0,L.jsxs)("div",{className:"anomaly-header",children:[(0,L.jsx)("span",{className:"anomaly-severity",children:"critical"===e.severity?"\ud83d\udea8 \uc2ec\uac01":"error"===e.severity?"\u274c \uc624\ub958":"\u26a0\ufe0f \uacbd\uace0"}),(0,L.jsx)("span",{className:"anomaly-type",children:e.type})]}),(0,L.jsx)("p",{className:"anomaly-message",children:e.message})]},t))})]}),s.alerts&&s.alerts.length>0&&(0,L.jsxs)("div",{className:"alerts-card",children:[(0,L.jsxs)("h4",{children:["\ud83d\udd14 \ud65c\uc131 \uacbd\uace0 (",s.alerts.length,")"]}),(0,L.jsx)("div",{className:"alerts-list",children:s.alerts.map(e=>{var t,s;const a=null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate():new Date(1e3*(null===(s=e.timestamp)||void 0===s?void 0:s.seconds)||Date.now());return(0,L.jsxs)("div",{className:"alert-item alert-".concat(e.severity),children:[(0,L.jsxs)("div",{className:"alert-header",children:[(0,L.jsx)("span",{className:"alert-time",children:a.toLocaleString("ko-KR")}),(0,L.jsx)("button",{onClick:()=>b(e.id),className:"resolve-alert-button",children:"\ud574\uacb0"})]}),(0,L.jsx)("p",{className:"alert-message",children:e.message})]},e.id)})})]}),s.errorLogs&&s.errorLogs.length>0&&(0,L.jsxs)("div",{className:"error-logs-card",children:[(0,L.jsx)("h4",{children:"\ud83d\udcdd \ucd5c\uadfc \uc5d0\ub7ec \ub85c\uadf8 (1\uc2dc\uac04)"}),(0,L.jsx)("div",{className:"error-logs-list",children:s.errorLogs.slice(0,10).map(e=>{var t,s;const a=null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate():new Date(1e3*(null===(s=e.timestamp)||void 0===s?void 0:s.seconds)||Date.now());return(0,L.jsxs)("div",{className:"error-log-item",children:[(0,L.jsx)("span",{className:"log-time",children:a.toLocaleTimeString("ko-KR")}),(0,L.jsx)("span",{className:"log-message",children:e.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"})]},e.id)})})]}),(0,L.jsxs)("div",{className:"stats-card",children:[(0,L.jsx)("h4",{children:"\ucd5c\uadfc 5\ubd84 \ud1b5\uacc4"}),(0,L.jsxs)("div",{className:"stats-grid",children:[(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\ucd1d \uc77d\uae30 \uc791\uc5c5"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.last5Minutes.reads.toLocaleString()})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\ucd1d \uc4f0\uae30 \uc791\uc5c5"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.last5Minutes.writes.toLocaleString()})]}),(0,L.jsxs)("div",{className:"stat-item",children:[(0,L.jsx)("span",{className:"stat-label",children:"\ucd1d \uc5d0\ub7ec"}),(0,L.jsx)("span",{className:"stat-value",children:s.stats.last5Minutes.errors})]})]})]})]}),!s&&!i&&!l&&(0,L.jsx)("div",{className:"no-data-message",children:(0,L.jsx)("p",{children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub824\uba74 \uc0c8\ub85c\uace0\uce68 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."})})]}):(0,L.jsxs)("div",{className:"system-monitoring section-card",children:[(0,L.jsx)("h3",{children:"\ud83d\udd12 \uc11c\ubc84 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\ucd5c\uace0 \uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})};var Ot=s(5967);const Lt=[{id:"KP",name:"\ucf54\ub529 \ud30c\ud2b8\ub108",price:1e4,history:[{price:1e4,timestamp:new Date}]},{id:"SS",name:"\uc0bc\uc131\uc804\uc790",price:8e4,history:[{price:8e4,timestamp:new Date}]},{id:"LG",name:"LG\uc5d0\ub108\uc9c0\uc194\ub8e8\uc158",price:35e4,history:[{price:35e4,timestamp:new Date}]},{id:"SK",name:"SK\ud558\uc774\ub2c9\uc2a4",price:23e4,history:[{price:23e4,timestamp:new Date}]}],_t=e=>{var t;let{isAdmin:s,isSuperAdmin:n,userClassCode:l,showAdminSettingsModal:r,setShowAdminSettingsModal:d,adminSelectedMenu:c,setAdminSelectedMenu:x,newGoalAmount:p,setNewGoalAmount:m,adminCouponValue:u,setAdminCouponValue:h,handleSaveAdminSettings:g,jobs:f,adminNewJobTitle:b,setAdminNewJobTitle:y,adminEditingJob:j,setAdminEditingJob:v,handleSaveJob:w,handleDeleteJob:N,handleEditJob:k,commonTasks:C,showAddTaskForm:S,setShowAddTaskForm:A,adminNewTaskName:I,setAdminNewTaskName:T,adminNewTaskReward:M,setAdminNewTaskReward:E,adminNewTaskMaxClicks:z,setAdminNewTaskMaxClicks:D,adminEditingTask:R,setAdminEditingTask:O,handleSaveTask:_,handleEditTask:W,handleDeleteTask:B,taskFormJobId:P,taskFormIsJobTask:F,handleAddTaskClick:Q,classCodes:H=[],onAddClassCode:q,onRemoveClassCode:U}=e;const[J,V]=(0,a.useState)(""),[K,X]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)([]),[ee,te]=(0,a.useState)(!1),[se,ae]=(0,a.useState)(!1),[ne,ie]=(0,a.useState)(null),[oe,le]=(0,a.useState)([]),[re,de]=(0,a.useState)([]),[ce,xe]=(0,a.useState)(!1),[pe,me]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[ge,fe]=(0,a.useState)(null),[be,ye]=(0,a.useState)([]),[je,ve]=(0,a.useState)(!1),[we,Ne]=(0,a.useState)(""),[ke,Ce]=(0,a.useState)([]),[Se,Ae]=(0,a.useState)([]),[Ie,Te]=(0,a.useState)([]),[Me,Ee]=(0,a.useState)(""),[ze,De]=(0,a.useState)(""),[Re,Oe]=(0,a.useState)(""),[Le,_e]=(0,a.useState)("deposit"),[We,Be]=(0,a.useState)(null),[Pe,Fe]=(0,a.useState)({isOpen:!1}),[Qe,He]=(0,a.useState)(""),[qe,Ge]=(0,a.useState)(!1),Ue=(0,a.useRef)(null),[Je,Ve]=(0,a.useState)(.1),[Ke,Ye]=(0,a.useState)(""),[Ze,$e]=(0,a.useState)(null),et=(0,Xe.Qg)(G.Cn,"toggleMarketManually"),[tt,st]=(0,a.useState)({taxRate:.1,salaryIncreaseRate:.03}),[at,nt]=(0,a.useState)("10"),[it,ot]=(0,a.useState)("3"),[lt,rt]=(0,a.useState)(!1),dt=(()=>{const{userDoc:e,isAdmin:t,isSuperAdmin:s}=(0,i.As)(),a=null===e||void 0===e?void 0:e.classCode;return(0,vt.I)({queryKey:At(a),queryFn:async()=>(await Ct.getAdminSettingsData({tab:"studentManagement"})).data,enabled:!(null===t||void 0===t||!t()||!a),staleTime:18e4,cacheTime:48e4})})(),ct=(()=>{const{userDoc:e,isAdmin:t}=(0,i.As)(),s=null===e||void 0===e?void 0:e.classCode;return(0,vt.I)({queryKey:It(s),queryFn:async()=>(await Ct.getAdminSettingsData({tab:"salarySettings"})).data,enabled:!(null===t||void 0===t||!t()||!s),staleTime:6e5,cacheTime:9e5})})(),xt=((()=>{const{isSuperAdmin:e}=(0,i.As)();(0,vt.I)({queryKey:Tt(),queryFn:async()=>(await Ct.getAdminSettingsData({tab:"systemManagement"})).data,enabled:!(null===e||void 0===e||!e()),staleTime:9e5,cacheTime:12e5})})(),(e=>{const{userDoc:t,isAdmin:s}=(0,i.As)(),a=null===t||void 0===t?void 0:t.classCode;(0,vt.I)({queryKey:St(a,e),queryFn:async()=>{const t="admin_".concat(a,"_").concat(e),s=zt(t,3e4);if(s&&!navigator.onLine)return s;const n=await Ct.getAdminSettingsData({tab:e});return Et(t,n),n},enabled:!!(null!==s&&void 0!==s&&s()&&a&&e),staleTime:3e5,cacheTime:6e5,retry:(e,t)=>"permission-denied"!==(null===t||void 0===t?void 0:t.code)&&e<2,refetchInterval:!!Mt()&&3e5})})("generalSettings"),(()=>{const e=(0,wt.jE)(),{userDoc:t}=(0,i.As)(),s=null===t||void 0===t?void 0:t.classCode;return(0,Nt.n)({mutationFn:async e=>{let{studentIds:t,payAll:s}=e;return await Ct.batchPaySalaries({studentIds:t,payAll:s})},onSuccess:()=>{e.invalidateQueries({queryKey:At(s)}),e.invalidateQueries({queryKey:It(s)}),Dt("admin_".concat(s,"_studentManagement")),Dt("admin_".concat(s,"_salarySettings"))},onError:e=>{console.error("\uae09\uc5ec \uc9c0\uae09 \uc2e4\ud328:",e)}})})()),{preloadAdminData:pt}=(()=>{const e=(0,wt.jE)(),{userDoc:t,isAdmin:s}=(0,i.As)(),a=null===t||void 0===t?void 0:t.classCode;return{preloadAdminData:async()=>{if(null===s||void 0===s||!s()||!a)return;const t=["generalSettings","studentManagement","salarySettings"].map(t=>e.prefetchQuery({queryKey:St(a,t),queryFn:async()=>await Ct.getAdminSettingsData({tab:t}),staleTime:3e5}));await Promise.allSettled(t)}}})(),mt=(0,a.useCallback)(async()=>{if(G.db)try{const e=l?(0,G.EW)(G.db,"settings","salarySettings_".concat(l)):(0,G.EW)(G.db,"settings","salarySettings"),t=await(0,G.I_)(e);if(t.exists()){const e=t.data(),s={taxRate:e.taxRate||.1,salaryIncreaseRate:e.salaryIncreaseRate||.03};st(s),nt(String((100*s.taxRate).toFixed(1))),ot(String((100*s.salaryIncreaseRate).toFixed(1))),e.lastPaidDate&&fe(e.lastPaidDate.toDate())}else await(0,G.iv)(e,{taxRate:.1,salaryIncreaseRate:.03,lastPaidDate:null,classCode:l||null,createdAt:(0,G.O5)(),updatedAt:(0,G.O5)()})}catch(we){console.error("\uae09\uc5ec \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",we)}},[G.db,l]),ut=(0,a.useCallback)(async()=>{if(!G.db)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.");const e=parseFloat(at),t=parseFloat(it);if(isNaN(e)||e<0||e>100)alert("\uc138\uc728\uc740 0~100 \uc0ac\uc774\uc758 \uc22b\uc790\uc5ec\uc57c \ud569\ub2c8\ub2e4.");else if(isNaN(t)||t<0||t>100)alert("\uc8fc\uae09 \uc778\uc0c1\ub960\uc740 0~100 \uc0ac\uc774\uc758 \uc22b\uc790\uc5ec\uc57c \ud569\ub2c8\ub2e4.");else{rt(!0);try{const s=l?(0,G.EW)(G.db,"settings","salarySettings_".concat(l)):(0,G.EW)(G.db,"settings","salarySettings"),a={taxRate:e/100,salaryIncreaseRate:t/100,classCode:l||null,updatedAt:(0,G.O5)()};await(0,G.tI)(s,a),st({taxRate:a.taxRate,salaryIncreaseRate:a.salaryIncreaseRate}),alert("\uae09\uc5ec \uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(we){console.error("\uae09\uc5ec \uc124\uc815 \uc800\uc7a5 \uc624\ub958:",we),alert("\uae09\uc5ec \uc124\uc815 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message)}finally{rt(!1)}}},[G.db,l]),ht=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e)||0===e.length)return{gross:0,tax:0,net:0};const s=2e6+5e5*Math.max(0,e.length-1);if(!t)return s;const a=Math.floor(s*tt.taxRate);return{gross:s,tax:a,net:s-a}},[tt.taxRate]),gt=(0,a.useCallback)(e=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud3b8\uc9d1 \ud074\ub9ad:",e),k&&"function"===typeof k?k(e):(console.error("[AdminSettingsModal] handleEditJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \ud3b8\uc9d1 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[k]),ft=(0,a.useCallback)(e=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc0ad\uc81c \ud074\ub9ad:",e),N&&"function"===typeof N?N(e):(console.error("[AdminSettingsModal] handleDeleteJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[N]),bt=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("[AdminSettingsModal] \ud560\uc77c \ud3b8\uc9d1 \ud074\ub9ad:",e,"jobId:",t),W&&"function"===typeof W?W(e,t):(console.error("[AdminSettingsModal] handleEditTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \ud3b8\uc9d1 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[W]),yt=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("[AdminSettingsModal] \ud560\uc77c \uc0ad\uc81c \ud074\ub9ad:",e,"jobId:",t),B&&"function"===typeof B?B(e,t):(console.error("[AdminSettingsModal] handleDeleteTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[B]),jt=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("[AdminSettingsModal] \ud560\uc77c \ucd94\uac00 \ud074\ub9ad:",e,"isJobTask:",t),Q&&"function"===typeof Q?Q(e,t):(console.error("[AdminSettingsModal] handleAddTaskClick \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \ucd94\uac00 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},[Q]),kt=(0,a.useCallback)(async()=>{if(!G.db)return console.error("loadStudents: Firestore \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),Ne("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958\ub85c \ud559\uc0dd \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),de([]),void xe(!1);xe(!0),Ne("");try{let s=[];if(!n&&!l)return Ne("\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \ud559\uc0dd \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),de([]),void xe(!1);if(!n&&l)try{const e=(0,G.gJ)(G.db,"Class",l,"students");(await(0,G.FX)(e)).forEach(e=>{const t=e.data();s.push({id:e.id,nickname:t.nickname||t.name||"\uc774\ub984 \uc5c6\uc74c",name:t.name||"",email:t.email||"",classCode:l,selectedJobIds:t.selectedJobIds||[],cash:t.money||t.cash||0,lastSalaryDate:t.lastSalaryDate?t.lastSalaryDate.toDate():null,lastGrossSalary:t.lastGrossSalary||0,lastTaxAmount:t.lastTaxAmount||0,lastNetSalary:t.lastNetSalary||0,totalSalaryReceived:t.totalSalaryReceived||0})})}catch(e){}if(0===s.length){const e=(0,G.gJ)(G.db,"users");let t;!n&&l?t=(0,G.P)(e,(0,G._M)("classCode","==",l)):n&&(t=e);(await(0,G.FX)(t)).forEach(e=>{const t=e.data();t.isAdmin||t.isSuperAdmin||s.push({id:e.id,nickname:t.nickname||t.name||"\uc774\ub984 \uc5c6\uc74c",name:t.name||"",email:t.email||"",classCode:t.classCode||"\ubbf8\uc9c0\uc815",selectedJobIds:t.selectedJobIds||[],cash:t.cash||0,lastSalaryDate:t.lastSalaryDate?t.lastSalaryDate.toDate():null,lastGrossSalary:t.lastGrossSalary||0,lastTaxAmount:t.lastTaxAmount||0,lastNetSalary:t.lastNetSalary||0,totalSalaryReceived:t.totalSalaryReceived||0})})}de(s);try{const e=l?(0,G.EW)(G.db,"settings","salarySettings_".concat(l)):(0,G.EW)(G.db,"settings","salarySettings"),t=await(0,G.I_)(e);if(t.exists()){const e=t.data();fe(e.lastPaidDate?e.lastPaidDate.toDate():null),st({taxRate:e.taxRate||.1,salaryIncreaseRate:e.salaryIncreaseRate||.03})}else fe(null)}catch(t){console.error("\uae09\uc5ec \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",t),fe(null)}ye([]),ve(!1)}catch(we){console.error("loadStudents: \ud559\uc0dd \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",we),Ne("\ud559\uc0dd \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message),de([])}finally{xe(!1)}},[G.db,n,l]),_t=(0,a.useCallback)(async()=>{if(!G.db)return console.error("loadClassMembers: Firestore \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),Ne("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958\ub85c \ud559\uae09 \uad6c\uc131\uc6d0 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),Z([]),void te(!1);te(!0),Ne("");try{const e=(0,G.gJ)(G.db,"users");let t;if(!n&&l)t=(0,G.P)(e,(0,G._M)("classCode","==",l));else{if(!n)return console.warn("\uad00\ub9ac\uc790\uc758 \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),Ne("\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \uad6c\uc131\uc6d0 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),Z([]),void te(!1);t=e}const s=await(0,G.FX)(t),a=[];s.forEach(e=>{const t=e.data();a.push({id:e.id,name:t.name||t.nickname||"\uc774\ub984 \uc5c6\uc74c",email:t.email,classCode:t.classCode||"\ucf54\ub4dc \uc5c6\uc74c",isAdmin:t.isAdmin||!1,isSuperAdmin:t.isSuperAdmin||!1})}),Z(a),console.log("[AdminSettingsModal] ".concat(a.length,"\uba85\uc758 \uad6c\uc131\uc6d0 \ub85c\ub4dc \uc644\ub8cc"))}catch(we){console.error("loadClassMembers: \ud559\uae09 \uad6c\uc131\uc6d0 \ub85c\ub4dc \uc624\ub958:",we),Ne("\ud559\uae09 \uad6c\uc131\uc6d0\uc744 \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message),Z([])}finally{te(!1)}},[G.db,n,l]),Wt=(0,Xe.Qg)(G.Cn,"adminResetUserPassword"),Bt=(0,a.useCallback)(async e=>{if(!s&&!n)return void alert("\uad00\ub9ac\uc790\ub9cc \ube44\ubc00\ubc88\ud638\ub97c \ucd08\uae30\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const t=prompt("\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694. 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");if(!t||t.length<6)alert("\ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");else if(window.confirm("\uc0ac\uc6a9\uc790(ID: ".concat(e,")\uc758 \ube44\ubc00\ubc88\ud638\ub97c \uc815\ub9d0\ub85c \ucd08\uae30\ud654\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{te(!0);const s=await Wt({userId:e,newPassword:t});if(!s.data.success)throw new Error(s.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958");alert(s.data.message)}catch(we){console.error("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654 \uc624\ub958:",we),alert("\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(we.message))}finally{te(!1)}},[s,n,Wt]),Pt=(0,a.useCallback)(async(e,t)=>{if(G.db)if(n){if(window.confirm("\uc774 \uc0ac\uc6a9\uc790\uc758 \uad00\ub9ac\uc790 \uad8c\ud55c\uc744 ".concat(t?"\uc81c\uac70":"\ubd80\uc5ec","\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){te(!0);try{const s=(0,G.EW)(G.db,"users",e);await(0,G.tI)(s,{isAdmin:!t}),Z(s=>s.map(s=>s.id===e?(0,o.A)((0,o.A)({},s),{},{isAdmin:!t}):s)),alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 ".concat(t?"\uc81c\uac70":"\ubd80\uc5ec","\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(we){console.error("\uad00\ub9ac\uc790 \uad8c\ud55c \ubcc0\uacbd \uc624\ub958:",we),alert("\uad00\ub9ac\uc790 \uad8c\ud55c \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{te(!1)}}}else alert("\ucd5c\uace0 \uad00\ub9ac\uc790\ub9cc \uad00\ub9ac\uc790 \uad8c\ud55c\uc744 \ubd80\uc5ec/\ud574\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[G.db,n]),Ft=(0,a.useCallback)(()=>{try{const e=localStorage.getItem("depositProducts"),t=localStorage.getItem("savingProducts"),s=localStorage.getItem("loanProducts");e&&Ce(JSON.parse(e)),t&&Ae(JSON.parse(t)),s&&Te(JSON.parse(s))}catch(we){console.error("\uae08\uc735 \uc0c1\ud488 \ub85c\ub4dc \uc624\ub958:",we)}},[]),Qt=(0,a.useCallback)(()=>{if(!Me||""===Me.trim())return void Be({type:"error",text:"\uc0c1\ud488\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});if(!ze||isNaN(ze)||parseInt(ze)<=0)return void Be({type:"error",text:"\uc720\ud6a8\ud55c \uae30\uac04\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});if(!Re||isNaN(Re)||parseFloat(Re)<0)return void Be({type:"error",text:"\uc720\ud6a8\ud55c \uc774\uc728\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});const e={id:Date.now(),name:Me.trim(),period:parseInt(ze),rate:parseFloat(Re)},t="deposit"===Le?"\uc608\uae08":"saving"===Le?"\uc801\uae08":"\ub300\ucd9c";let s=[],a="";"deposit"===Le?(s=[...ke,e],Ce(s),a="depositProducts"):"saving"===Le?(s=[...Se,e],Ae(s),a="savingProducts"):"loan"===Le&&(s=[...Ie,e],Te(s),a="loanProducts"),localStorage.setItem(a,JSON.stringify(s)),Be({type:"success",text:"".concat(t," \uc0c1\ud488\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),Ee(""),De(""),Oe(""),setTimeout(()=>Be(null),3e3)},[Me,ze,Re,Le,ke,Se,Ie]),Ht=(0,a.useCallback)((e,t)=>{const s="deposit"===t?"\uc608\uae08":"saving"===t?"\uc801\uae08":"\ub300\ucd9c";if(!window.confirm("\uc774 ".concat(s," \uc0c1\ud488\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return;let a=[],n="";"deposit"===t?(a=ke.filter(t=>t.id!==e),Ce(a),n="depositProducts"):"saving"===t?(a=Se.filter(t=>t.id!==e),Ae(a),n="savingProducts"):"loan"===t&&(a=Ie.filter(t=>t.id!==e),Te(a),n="loanProducts"),localStorage.setItem(n,JSON.stringify(a)),Be({type:"success",text:"".concat(s," \uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),setTimeout(()=>Be(null),3e3)},[ke,Se,Ie]),qt=(0,a.useCallback)(async function(){if(l)if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&Ue.current&&qe)Fe(Ue.current);else try{const e=(0,$.H9)(G.db,"ClassStock/".concat(l,"/marketStatus/status")),t=await(0,$.x7)(e);let s;t.exists()?s=t.data():(s={isOpen:!1},await(0,$.BN)(e,s)),Ue.current=s,Fe(s),Ge(!0)}catch(we){console.error("\uc2dc\uc7a5 \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328:",we),He("\uc2dc\uc7a5 \uc0c1\ud0dc\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},[l,qe]),Gt=(0,a.useCallback)(async e=>{const t=e?"\uc218\ub3d9 \uac1c\uc7a5":"\uc218\ub3d9 \ud3d0\uc7a5";if(window.confirm("\uc815\ub9d0\ub85c \uc2dc\uc7a5\uc744 '".concat(t,"' \uc0c1\ud0dc\ub85c \ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){try{const t={isOpen:e};Fe(t),Ue.current=t;const s=await et({classCode:l,isOpen:e});He(s.data.message)}catch(we){console.error("\uc2dc\uc7a5 \uc0c1\ud0dc \ubcc0\uacbd \uc624\ub958:",we),He("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(we.message)),Ue.current?Fe(Ue.current):qt(!0)}setTimeout(()=>He(""),5e3)}},[l,et,qt]),Ut=(0,a.useCallback)(async()=>{if(window.confirm("\ubaa8\ub4e0 \uc8fc\uc2dd \uc815\ubcf4\ub97c \ucd08\uae30\ud654\ud558\uace0 \uae30\ubcf8\uac12\uc73c\ub85c \uc124\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")){try{const e=(0,G.wP)(G.db);Lt.forEach(t=>{const s=(0,$.H9)(G.db,"CentralStocks",t.id);e.set(s,t)}),await e.commit(),alert("\uc8fc\uc2dd \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),He("\uc8fc\uc2dd \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(we){console.error("\uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654 \uc911 \uc624\ub958 \ubc1c\uc0dd:",we),He("\ucd08\uae30\ud654 \uc2e4\ud328: ".concat(we.message))}setTimeout(()=>He(""),5e3)}},[]),Jt=(0,a.useCallback)(()=>{const e=localStorage.getItem("parkingInterestRate");e&&Ve(parseFloat(e))},[]),Vt=(0,a.useCallback)(()=>{if(!Ke||isNaN(Ke)||parseFloat(Ke)<0)return void $e({type:"error",text:"\uc720\ud6a8\ud55c \uc774\uc790\uc728\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694 (0 \uc774\uc0c1)."});const e=parseFloat(Ke);Ve(e),localStorage.setItem("parkingInterestRate",e.toString()),$e({type:"success",text:"\ud30c\ud0b9 \ud1b5\uc7a5 \uc77c\uc77c \uc774\uc790\uc728\uc774 ".concat(e,"%\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}),Ye(""),setTimeout(()=>$e(null),3e3)},[Ke]),Kt=(0,a.useCallback)(async()=>{if(!q||"function"!==typeof q)return void alert("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const e=J.trim();if(e){X(!0);try{await q(e)&&V("")}catch(we){console.error("AdminSettingsModal: \ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc911 \uc624\ub958:",we)}finally{X(!1)}}else alert("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[J,q]),Xt=(0,a.useCallback)(async e=>{if(U&&"function"===typeof U){X(!0);try{await U(e)}catch(we){console.error("AdminSettingsModal: \ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc911 \uc624\ub958:",we)}finally{X(!1)}}else alert("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[U]);(0,a.useEffect)(()=>{r&&(pt(),Ne(""),Ft(),Jt()),r||(V(""),Z([]),de([]),ie(null),le([]),ae(!1),fe(null),ye([]),ve(!1),X(!1),te(!1),xe(!1),me(!1),Ne(""),Be(null),He(""),$e(null))},[r,c,_t,kt,mt,Ft,Jt]),(0,a.useEffect)(()=>{r&&"marketControl"===c&&qt()},[r,c,qt]);const Yt=()=>{if(!ge)return"\uc544\uc9c1 \uc9c0\uae09 \uae30\ub85d \uc5c6\uc74c";try{const e=ge;return"".concat(e.getFullYear(),"\ub144 ").concat(String(e.getMonth()+1).padStart(2,"0"),"\uc6d4 ").concat(String(e.getDate()).padStart(2,"0"),"\uc77c ").concat(String(e.getHours()).padStart(2,"0"),":").concat(String(e.getMinutes()).padStart(2,"0"))}catch(e){return console.error("formatLastSalaryDate \uc624\ub958:",e),"\ub0a0\uc9dc \ud615\uc2dd \uc624\ub958"}};return r?s||n?(0,L.jsxs)("div",{className:"admin-settings-modal ".concat(r?"show":""),children:[(0,L.jsxs)("div",{className:"admin-settings-content",children:[(0,L.jsxs)("h2",{children:["\uad00\ub9ac\uc790 \uc124\uc815"," ",n&&(0,L.jsx)("span",{className:"super-admin-badge",children:"(\ucd5c\uace0 \uad00\ub9ac\uc790)"})]}),!n&&l&&(0,L.jsxs)("p",{className:"admin-class-info",children:["\uad00\ub9ac \ud559\uae09: ",l]}),(0,L.jsxs)("div",{className:"admin-menu-tabs",style:{display:"flex",flexWrap:"wrap",gap:"10px",padding:"16px",background:"linear-gradient(135deg, #16213e 0%, #1a1a2e 100%)",borderRadius:"16px",border:"1px solid #374151"},children:[(0,L.jsx)("button",{className:"generalSettings"===c?"active":"",onClick:()=>x("generalSettings"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uc77c\ubc18 \uc124\uc815"}),(0,L.jsx)("button",{className:"taskManagement"===c?"active":"",onClick:()=>x("taskManagement"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\ud560\uc77c \uad00\ub9ac"}),(0,L.jsx)("button",{className:"jobSettings"===c?"active":"",onClick:()=>x("jobSettings"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uc9c1\uc5c5 \uad00\ub9ac"}),(0,L.jsx)("button",{className:"studentManagement"===c?"active":"",onClick:()=>{x("studentManagement"),kt()},style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\ud559\uc0dd \uad00\ub9ac"}),(0,L.jsx)("button",{className:"salarySettings"===c?"active":"",onClick:()=>x("salarySettings"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uae09\uc5ec \uc124\uc815"}),(0,L.jsx)("button",{className:"financialProducts"===c?"active":"",onClick:()=>x("financialProducts"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uae08\uc735 \uc0c1\ud488"}),(0,L.jsx)("button",{className:"marketControl"===c?"active":"",onClick:()=>x("marketControl"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uc2dc\uc7a5 \uc81c\uc5b4"}),(0,L.jsx)("button",{className:"parkingAccount"===c?"active":"",onClick:()=>x("parkingAccount"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\ud30c\ud0b9 \ud1b5\uc7a5"}),(0,L.jsx)("button",{className:"memberManagement"===c?"active":"",onClick:()=>{x("memberManagement"),_t()},style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\ud559\uae09 \uad6c\uc131\uc6d0"}),(0,L.jsx)("button",{className:"databaseManagement"===c?"active":"",onClick:()=>x("databaseManagement"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4"}),n&&(0,L.jsx)("button",{className:"systemManagement"===c?"active":"",onClick:()=>x("systemManagement"),style:{padding:"10px 16px",borderRadius:"16px",fontSize:"13px",whiteSpace:"nowrap"},children:"\uc2dc\uc2a4\ud15c \uad00\ub9ac"})]}),"generalSettings"===c&&(0,L.jsxs)("div",{className:"general-settings-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"admin-goal-settings section-card",children:[(0,L.jsx)("h3",{children:"\ubaa9\ud45c \ubc0f \ucfe0\ud3f0 \uac00\uce58 \uc124\uc815"}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ud074\ub798\uc2a4 \ubaa9\ud45c \ucfe0\ud3f0 \uc218:"}),(0,L.jsx)("input",{type:"number",min:"1",value:p||"",onChange:e=>m&&m(e.target.value),className:"admin-input"})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ucfe0\ud3f0 \uac00\uce58 (\uc6d0):"}),(0,L.jsx)("input",{type:"number",min:"1",value:u||"",onChange:e=>h&&h(e.target.value),className:"admin-input"})]}),(0,L.jsx)("button",{onClick:g,className:"admin-save-button",children:"\uc800\uc7a5"})]})]}),"taskManagement"===c&&(0,L.jsxs)("div",{className:"task-management-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"admin-tasks-settings section-card",children:[(0,L.jsx)("h3",{children:"\ud560\uc77c \uad00\ub9ac"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c\uacfc \uacf5\ud1b5 \ud560\uc77c\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."}),S?(0,L.jsxs)("div",{className:"add-task-form",children:[(0,L.jsx)("h4",{children:R?"\ud560\uc77c \uc218\uc815":"\uc0c8 \ud560\uc77c \ucd94\uac00"}),(0,L.jsx)("p",{children:F&&f&&P?"\uc9c1\uc5c5: ".concat((null===(t=f.find(e=>e.id===P))||void 0===t?void 0:t.title)||"\uc54c \uc218 \uc5c6\ub294 \uc9c1\uc5c5"):"\uacf5\ud1b5 \ud560\uc77c"}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ud560\uc77c \uc774\ub984:"}),(0,L.jsx)("input",{type:"text",value:I,onChange:e=>T(e.target.value),placeholder:"\ud560\uc77c \uc774\ub984 \uc785\ub825",className:"admin-input"})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ubcf4\uc0c1 (\ucfe0\ud3f0):"}),(0,L.jsx)("input",{type:"number",min:"0",value:M,onChange:e=>E(e.target.value),placeholder:"\ucfe0\ud3f0 \ubcf4\uc0c1",className:"admin-input"})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ucd5c\ub300 \ud074\ub9ad \uc218:"}),(0,L.jsx)("input",{type:"number",min:"1",value:z,onChange:e=>D(e.target.value),placeholder:"\ucd5c\ub300 \ud074\ub9ad \uc218",className:"admin-input"})]}),(0,L.jsxs)("div",{className:"task-form-buttons",children:[(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \ud560\uc77c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad"),_&&"function"===typeof _?_():(console.error("[AdminSettingsModal] handleSaveTask \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\ud560\uc77c \uc800\uc7a5 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},className:"admin-save-button",children:R?"\uc218\uc815":"\ucd94\uac00"}),(0,L.jsx)("button",{onClick:()=>{A(!1),O(null)},className:"admin-cancel-button",children:"\ucde8\uc18c"})]})]}):(0,L.jsxs)("div",{className:"task-management",children:[(0,L.jsxs)("div",{className:"task-management-buttons",children:[(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \ucd94\uac00 \ubc84\ud2bc \ud074\ub9ad"),jt(null,!1)},className:"admin-button",children:"\uacf5\ud1b5 \ud560\uc77c \ucd94\uac00"}),(0,L.jsxs)("select",{onChange:e=>{e.target.value&&(console.log("[AdminSettingsModal] \uc9c1\uc5c5\ubcc4 \ud560\uc77c \ucd94\uac00 \uc120\ud0dd:",e.target.value),jt(e.target.value,!0))},className:"job-select",value:"",children:[(0,L.jsx)("option",{value:"",children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c \ucd94\uac00..."}),Array.isArray(f)&&f.map(e=>(0,L.jsxs)("option",{value:e.id,children:[e.title,"\uc5d0 \ud560\uc77c \ucd94\uac00"]},e.id))]})]}),(0,L.jsxs)("div",{className:"tasks-by-job",children:[(0,L.jsx)("h4",{children:"\uc9c1\uc5c5\ubcc4 \ud560\uc77c"}),Array.isArray(f)&&f.length>0?f.map(e=>(0,L.jsxs)("div",{className:"job-tasks",children:[(0,L.jsx)("h5",{children:e.title}),Array.isArray(e.tasks)&&e.tasks.length>0?(0,L.jsx)("ul",{className:"admin-tasks",children:e.tasks.map(t=>(0,L.jsxs)("li",{className:"admin-task-item",children:[(0,L.jsxs)("div",{className:"task-info",children:[(0,L.jsx)("span",{className:"task-name",children:t.name}),(0,L.jsxs)("span",{className:"task-reward",children:["\ubcf4\uc0c1: ",t.reward||0," \ucfe0\ud3f0"]}),(0,L.jsxs)("span",{className:"task-clicks",children:["\ud074\ub9ad: ",t.clicks||0,"/",t.maxClicks||5]})]}),(0,L.jsxs)("div",{className:"task-actions",children:[(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud560\uc77c \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",t,e.id),bt(t,e.id)},className:"edit-button",children:"\uc218\uc815"}),(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \ud560\uc77c \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",t.id,e.id),yt(t.id,e.id)},className:"delete-button",children:"\uc0ad\uc81c"})]})]},t.id))}):(0,L.jsx)("p",{className:"no-items-message",children:"\uc774 \uc9c1\uc5c5\uc5d0 \ub4f1\ub85d\ub41c \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]},e.id)):(0,L.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{className:"common-tasks",children:[(0,L.jsx)("h4",{children:"\uacf5\ud1b5 \ud560\uc77c"}),Array.isArray(C)&&C.length>0?(0,L.jsx)("ul",{className:"admin-tasks",children:C.map(e=>(0,L.jsxs)("li",{className:"admin-task-item",children:[(0,L.jsxs)("div",{className:"task-info",children:[(0,L.jsx)("span",{className:"task-name",children:e.name}),(0,L.jsxs)("span",{className:"task-reward",children:["\ubcf4\uc0c1: ",e.reward||0," \ucfe0\ud3f0"]}),(0,L.jsxs)("span",{className:"task-clicks",children:["\ud074\ub9ad: ",e.clicks||0,"/",e.maxClicks||5]})]}),(0,L.jsxs)("div",{className:"task-actions",children:[(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e),bt(e)},className:"edit-button",children:"\uc218\uc815"}),(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uacf5\ud1b5 \ud560\uc77c \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",e.id),yt(e.id)},className:"delete-button",children:"\uc0ad\uc81c"})]})]},e.id))}):(0,L.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uacf5\ud1b5 \ud560\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})]})]}),"jobSettings"===c&&(0,L.jsxs)("div",{className:"job-settings-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"admin-jobs-settings section-card",children:[(0,L.jsx)("h3",{children:"\uc9c1\uc5c5 \uad00\ub9ac"}),(0,L.jsxs)("div",{className:"add-job-form",children:[(0,L.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:j?"\uc9c1\uc5c5\uba85 \uc218\uc815":"\uc0c8 \uc9c1\uc5c5\uba85 \uc785\ub825",className:"admin-input"}),(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad"),w&&"function"===typeof w?w():(console.error("[AdminSettingsModal] handleSaveJob \ud568\uc218\uac00 \uc815\uc758\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."),alert("\uc9c1\uc5c5 \uc800\uc7a5 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))},className:"admin-save-button",children:j?"\uc218\uc815":"\ucd94\uac00"}),j&&(0,L.jsx)("button",{onClick:()=>{v(null),y("")},className:"admin-cancel-button",children:"\ucde8\uc18c"})]}),(0,L.jsxs)("div",{className:"jobs-list",children:[(0,L.jsx)("h4",{children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5 \ubaa9\ub85d"}),f&&f.length>0?(0,L.jsx)("ul",{className:"admin-jobs",children:f.map(e=>(0,L.jsxs)("li",{className:"admin-job-item",children:[(0,L.jsx)("span",{className:"job-title",children:e.title}),(0,L.jsxs)("div",{className:"job-actions",children:[(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e),gt(e)},className:"edit-button",children:"\uc218\uc815"}),(0,L.jsx)("button",{onClick:()=>{console.log("[AdminSettingsModal] \uc9c1\uc5c5 \uc0ad\uc81c \ubc84\ud2bc \ud074\ub9ad:",e.id),ft(e.id)},className:"delete-button",children:"\uc0ad\uc81c"})]})]},e.id))}):(0,L.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})]}),"studentManagement"===c&&(0,L.jsxs)("div",{className:"student-management-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"student-jobs-settings section-card",children:[(0,L.jsx)("h3",{children:"\ud559\uc0dd\uc9c1\uc5c5 \uad00\ub9ac"}),we&&(0,L.jsx)("p",{className:"error-message",children:we}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\ud559\uc0dd\ub4e4\uc5d0\uac8c \uc9c1\uc5c5\uc744 \ubc30\uc815\ud558\uac70\ub098 \uad00\ub9ac\ud569\ub2c8\ub2e4. \uc8fc\uae09\uc740 \uc9c1\uc5c5 \uc218\uc5d0 \ub530\ub77c \ucc28\ub4f1 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,L.jsxs)("div",{className:"salary-management",children:[(0,L.jsxs)("div",{className:"salary-info",children:[(0,L.jsx)("h4",{children:"\uc8fc\uae09 \uc9c0\uae09 \uad00\ub9ac"}),(0,L.jsx)("p",{children:"\uae30\ubcf8 \uc8fc\uae09: 200\ub9cc\uc6d0, \ucd94\uac00 \uc9c1\uc5c5\ub2f9: 50\ub9cc\uc6d0"}),(0,L.jsxs)("p",{children:["\uc138\uc728: ",(100*tt.taxRate).toFixed(1),"%"]}),(0,L.jsxs)("p",{children:["\uc8fc\uae09 \uc778\uc0c1\ub960: ",(100*tt.salaryIncreaseRate).toFixed(1),"% (\ub9e4\uc8fc)"]}),(0,L.jsxs)("p",{children:["\ub9c8\uc9c0\ub9c9 \uc8fc\uae09 \uc9c0\uae09\uc77c: ",Yt()]}),(0,L.jsx)("p",{className:"auto-payment-info",children:"\u23f0 \uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09: \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc (\uc11c\ubc84 \uc790\ub3d9 \uc2e4\ud589)"})]}),(0,L.jsxs)("div",{className:"salary-buttons",children:[(0,L.jsx)("button",{className:"admin-button pay-salary-button",onClick:async()=>{var e,t;const s=(null===(e=dt.data)||void 0===e?void 0:e.students)||re,a=(null===(t=ct.data)||void 0===t?void 0:t.settings)||tt;if(s&&0!==s.length){if(window.confirm("\ubaa8\ub4e0 \ud559\uc0dd\ub4e4\uc5d0\uac8c \uc9c1\uc5c5\ubcc4 \uc8fc\uae09\uc744 \uc9c0\uae09\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\uc9c1\uc5c5\uc774 \uc788\ub294 \ud559\uc0dd\ub9cc \ud574\ub2f9, \uc138\uae08 ".concat((100*a.taxRate).toFixed(1),"% \uacf5\uc81c)"))){he(!0);try{const e=await xt.mutateAsync({studentIds:[],payAll:!0});if(e.success){const{summary:t}=e;alert("\uc8fc\uae09 \uc9c0\uae09 \uc644\ub8cc!\n".concat(t.totalStudentsPaid,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc9c0\uae09\n\ucd1d \uae09\uc5ec: ").concat((t.totalGrossPaid/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc138\uae08 \uacf5\uc81c: ").concat((t.totalTaxDeducted/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc2e4\uc81c \uc9c0\uae09: ").concat((t.totalNetPaid/1e4).toFixed(0),"\ub9cc\uc6d0"))}else alert(e.message||"\uc8fc\uae09 \uc9c0\uae09\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(we){console.error("[AdminSettingsModal] \uc804\uccb4 \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09 \uc624\ub958:",we),alert("\uc8fc\uae09 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message)}finally{he(!1)}}}else alert("\ud559\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},disabled:ue||ce,children:ue?"\uc8fc\uae09 \uc9c0\uae09 \uc911...":"\uc804\uccb4 \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09"}),(0,L.jsx)("button",{className:"admin-button pay-selected-salary-button",onClick:async()=>{var e;if(0===be.length)return void alert("\uc120\ud0dd\ub41c \ud559\uc0dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=(null===(e=ct.data)||void 0===e?void 0:e.settings)||tt;if(window.confirm("\uc120\ud0dd\ub41c ".concat(be.length,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc8fc\uae09\uc744 \uc9c0\uae09\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n(\uc138\uae08 ").concat((100*t.taxRate).toFixed(1),"% \uacf5\uc81c \ud6c4 \uc9c0\uae09)"))){he(!0);try{const e=await xt.mutateAsync({studentIds:be,payAll:!1});if(e.success){const{summary:t}=e;alert("\uc8fc\uae09 \uc9c0\uae09 \uc644\ub8cc!\n".concat(t.totalStudentsPaid,"\uba85\uc758 \ud559\uc0dd\uc5d0\uac8c \uc9c0\uae09\n\ucd1d \uae09\uc5ec: ").concat((t.totalGrossPaid/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc138\uae08 \uacf5\uc81c: ").concat((t.totalTaxDeducted/1e4).toFixed(0),"\ub9cc\uc6d0\n\uc2e4\uc81c \uc9c0\uae09: ").concat((t.totalNetPaid/1e4).toFixed(0),"\ub9cc\uc6d0")),ye([]),ve(!1)}else alert(e.message||"\uc8fc\uae09 \uc9c0\uae09\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(we){console.error("[AdminSettingsModal] \uc120\ud0dd\ub41c \ud559\uc0dd \uc8fc\uae09 \uc9c0\uae09 \uc624\ub958:",we),alert("\uc8fc\uae09 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message)}finally{he(!1)}}},disabled:ue||ce||0===be.length,children:ue?"\uc8fc\uae09 \uc9c0\uae09 \uc911...":"\uc120\ud0dd \ud559\uc0dd(".concat(be.length,") \uc8fc\uae09 \uc9c0\uae09")})]})]}),(0,L.jsxs)("div",{className:"student-jobs-container",children:[(0,L.jsxs)("div",{className:"student-list-header",children:[(0,L.jsxs)("h4",{children:["\ud559\uc0dd \ubaa9\ub85d"," ",!n&&l&&"(".concat(l," \ud559\uae09)")]}),(0,L.jsx)("button",{onClick:kt,className:"admin-button",disabled:ce,children:ce?"\ub85c\ub529 \uc911...":"\ud559\uc0dd \ubaa9\ub85d \uc0c8\ub85c\uace0\uce68"})]}),ce?(0,L.jsx)("p",{children:"\ud559\uc0dd \uc815\ubcf4 \ub85c\ub529 \uc911..."}):re.length>0?(0,L.jsx)("div",{className:"members-table-container",children:(0,L.jsxs)("table",{className:"members-table",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{children:(0,L.jsx)("input",{type:"checkbox",checked:je,onChange:()=>{ye(je?[]:re.map(e=>e.id).filter(e=>null!=e)),ve(!je)},disabled:0===re.length})}),(0,L.jsx)("th",{children:"\ud559\uc0dd \uc774\ub984"}),(0,L.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,L.jsx)("th",{children:"\ud559\uae09"}),(0,L.jsx)("th",{children:"\ud604\uc7ac \uc9c1\uc5c5"}),(0,L.jsx)("th",{children:"\uc608\uc0c1 \ucd1d\uae09\uc5ec"}),(0,L.jsx)("th",{children:"\uc138\uae08 \uacf5\uc81c"}),(0,L.jsx)("th",{children:"\uc2e4\uae09\uc5ec"}),(0,L.jsx)("th",{children:"\ubcf4\uc720 \ud604\uae08"}),(0,L.jsx)("th",{children:"\ucd5c\uadfc \uc8fc\uae09\uc77c"}),(0,L.jsx)("th",{children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:re.map(e=>{const t=ht(e.selectedJobIds,!0);return(0,L.jsxs)("tr",{className:be.includes(e.id)?"selected-student-row":"",children:[(0,L.jsx)("td",{children:(0,L.jsx)("input",{type:"checkbox",checked:be.includes(e.id),onChange:()=>{return t=e.id,void ye(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})}),(0,L.jsx)("td",{children:e.nickname||e.name||"\uc774\ub984 \uc5c6\uc74c"}),(0,L.jsx)("td",{children:e.email||"-"}),(0,L.jsx)("td",{children:e.classCode||"\ubbf8\uc9c0\uc815"}),(0,L.jsx)("td",{children:Array.isArray(e.selectedJobIds)&&e.selectedJobIds.length>0?e.selectedJobIds.map(e=>{const t=Array.isArray(f)?f.find(t=>t.id===e):null;return t?t.title:null}).filter(Boolean).join(", "):(0,L.jsx)("span",{className:"no-jobs",children:"\uc9c1\uc5c5 \uc5c6\uc74c"})}),(0,L.jsx)("td",{className:"salary-column",children:"".concat((t.gross/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,L.jsx)("td",{className:"tax-column",children:"".concat((t.tax/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,L.jsx)("td",{className:"net-salary-column",children:"".concat((t.net/1e4).toFixed(0),"\ub9cc\uc6d0")}),(0,L.jsxs)("td",{className:"cash-column",children:[(e.cash||0).toLocaleString(),"\uc6d0"]}),(0,L.jsx)("td",{children:e.lastSalaryDate?e.lastSalaryDate.toLocaleDateString():"\uc5c6\uc74c"}),(0,L.jsx)("td",{children:(0,L.jsx)("button",{className:"edit-button",onClick:()=>(e=>{ie(e),le(Array.isArray(e.selectedJobIds)?[...e.selectedJobIds]:[]),ae(!0)})(e),children:"\uc9c1\uc5c5 \uc124\uc815"})})]},e.id)})})]})}):(0,L.jsx)("p",{className:"no-items-message",children:n||l?"\ud559\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})]}),"financialProducts"===c&&(0,L.jsxs)("div",{className:"financial-products-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"financial-products-settings section-card",children:[(0,L.jsx)("h3",{children:"\uae08\uc735 \uc0c1\ud488 \uad00\ub9ac"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\uc608\uae08, \uc801\uae08, \ub300\ucd9c \uc0c1\ud488\uc744 \ucd94\uac00\ud558\uac70\ub098 \uc0ad\uc81c\ud569\ub2c8\ub2e4."}),(0,L.jsxs)("div",{className:"financial-sub-tabs",style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[(0,L.jsx)("button",{className:"sub-tab-button ".concat("deposit"===Le?"active":""),onClick:()=>_e("deposit"),style:{padding:"8px 16px",borderRadius:"8px",border:"deposit"===Le?"2px solid #4f46e5":"1px solid #374151",background:"deposit"===Le?"#4f46e5":"transparent",color:"deposit"===Le?"white":"#9ca3af",cursor:"pointer",fontWeight:"600"},children:"\uc608\uae08 \uc0c1\ud488"}),(0,L.jsx)("button",{className:"sub-tab-button ".concat("saving"===Le?"active":""),onClick:()=>_e("saving"),style:{padding:"8px 16px",borderRadius:"8px",border:"saving"===Le?"2px solid #4f46e5":"1px solid #374151",background:"saving"===Le?"#4f46e5":"transparent",color:"saving"===Le?"white":"#9ca3af",cursor:"pointer",fontWeight:"600"},children:"\uc801\uae08 \uc0c1\ud488"}),(0,L.jsx)("button",{className:"sub-tab-button ".concat("loan"===Le?"active":""),onClick:()=>_e("loan"),style:{padding:"8px 16px",borderRadius:"8px",border:"loan"===Le?"2px solid #4f46e5":"1px solid #374151",background:"loan"===Le?"#4f46e5":"transparent",color:"loan"===Le?"white":"#9ca3af",cursor:"pointer",fontWeight:"600"},children:"\ub300\ucd9c \uc0c1\ud488"})]}),We&&(0,L.jsx)("div",{className:"message-box ".concat(We.type),style:{padding:"12px",marginBottom:"16px",borderRadius:"8px",background:"success"===We.type?"#065f46":"#991b1b",color:"white"},children:We.text}),(0,L.jsxs)("div",{className:"add-product-form",style:{padding:"16px",background:"rgba(55, 65, 81, 0.5)",borderRadius:"12px",marginBottom:"16px"},children:[(0,L.jsxs)("h4",{style:{marginBottom:"12px",color:"white"},children:["deposit"===Le?"\uc608\uae08":"saving"===Le?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488 \ucd94\uac00"]}),(0,L.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"12px"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{style:{display:"block",marginBottom:"4px",color:"#9ca3af",fontSize:"12px"},children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("input",{type:"text",value:Me,onChange:e=>Ee(e.target.value),placeholder:"\uc0c1\ud488\uba85 \uc785\ub825",className:"admin-input",style:{width:"100%"}})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{style:{display:"block",marginBottom:"4px",color:"#9ca3af",fontSize:"12px"},children:"\uae30\uac04 (\uc77c)"}),(0,L.jsx)("input",{type:"number",value:ze,onChange:e=>De(e.target.value),placeholder:"\uae30\uac04 (\uc77c)",min:"1",className:"admin-input",style:{width:"100%"}})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("label",{style:{display:"block",marginBottom:"4px",color:"#9ca3af",fontSize:"12px"},children:"\uc774\uc728 (%)"}),(0,L.jsx)("input",{type:"number",value:Re,onChange:e=>Oe(e.target.value),placeholder:"\uc774\uc728 (%)",min:"0",step:"0.1",className:"admin-input",style:{width:"100%"}})]})]}),(0,L.jsx)("button",{onClick:Qt,className:"admin-save-button",style:{width:"100%"},children:"\uc0c1\ud488 \ucd94\uac00\ud558\uae30"})]}),(0,L.jsxs)("div",{className:"product-list",children:[(0,L.jsxs)("h4",{style:{marginBottom:"12px",color:"white"},children:["deposit"===Le?"\uc608\uae08":"saving"===Le?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488 \ubaa9\ub85d"]}),(()=>{const e="deposit"===Le?ke:"saving"===Le?Se:Ie;return 0===e.length?(0,L.jsx)("p",{className:"no-items-message",children:"\ub4f1\ub85d\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsx)("div",{className:"members-table-container",children:(0,L.jsxs)("table",{className:"members-table",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("th",{children:"\uae30\uac04 (\uc77c)"}),(0,L.jsx)("th",{children:"\uc774\uc728 (%)"}),(0,L.jsx)("th",{children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:e.map(e=>(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{children:e.name}),(0,L.jsxs)("td",{children:[e.period,"\uc77c"]}),(0,L.jsxs)("td",{children:[e.rate,"%"]}),(0,L.jsx)("td",{children:(0,L.jsx)("button",{onClick:()=>Ht(e.id,Le),className:"delete-button",children:"\uc0ad\uc81c"})})]},e.id))})]})})})()]})]})]}),"marketControl"===c&&(0,L.jsxs)("div",{className:"market-control-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"market-control-settings section-card",children:[(0,L.jsx)("h3",{children:"\uc8fc\uc2dd \uc2dc\uc7a5 \uc81c\uc5b4"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\uc8fc\uc2dd \uc2dc\uc7a5\uc758 \uac1c\uc7a5/\ud3d0\uc7a5 \uc0c1\ud0dc\ub97c \uc218\ub3d9\uc73c\ub85c \uc81c\uc5b4\ud569\ub2c8\ub2e4."}),(0,L.jsxs)("div",{style:{padding:"16px",background:"rgba(55, 65, 81, 0.5)",borderRadius:"12px",marginBottom:"16px"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,L.jsxs)("p",{style:{color:"white"},children:["\ud604\uc7ac \uc0c1\ud0dc:"," ",(0,L.jsx)("span",{style:{fontWeight:"bold",color:Pe.isOpen?"#22c55e":"#ef4444",padding:"4px 12px",borderRadius:"16px",background:Pe.isOpen?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)"},children:Pe.isOpen?"\ud83d\udfe2 \uac1c\uc7a5":"\ud83d\udd34 \ud3d0\uc7a5"})]}),(0,L.jsx)("button",{onClick:()=>qt(!0),className:"admin-button",disabled:!l,children:"\uc0c8\ub85c\uace0\uce68"})]}),(0,L.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[(0,L.jsx)("button",{onClick:()=>Gt(!0),disabled:Pe.isOpen,className:"admin-save-button",style:{flex:1,background:Pe.isOpen?"#374151":"#22c55e",cursor:Pe.isOpen?"not-allowed":"pointer"},children:"\uc218\ub3d9 \uac1c\uc7a5"}),(0,L.jsx)("button",{onClick:()=>Gt(!1),disabled:!Pe.isOpen,className:"admin-cancel-button",style:{flex:1,background:Pe.isOpen?"#ef4444":"#374151",cursor:Pe.isOpen?"pointer":"not-allowed"},children:"\uc218\ub3d9 \ud3d0\uc7a5"})]}),(0,L.jsxs)("p",{style:{fontSize:"12px",color:"#9ca3af"},children:["\ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc815\ud574\uc9c4 \uc2dc\uac04\uacfc \uc0c1\uad00\uc5c6\uc774 \uc2dc\uc7a5 \uc0c1\ud0dc\uac00 \uc989\uc2dc \ubcc0\uacbd\ub429\ub2c8\ub2e4.",(0,L.jsx)("br",{}),"\uc790\ub3d9 \uac1c\uc7a5/\ud3d0\uc7a5 \uc2dc\uac04(\uc6d4-\uae08, \uc624\uc804 8\uc2dc/\uc624\ud6c4 3\uc2dc)\uc774 \ub418\uba74 \uc790\ub3d9\uc73c\ub85c \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub429\ub2c8\ub2e4."]})]}),Qe&&(0,L.jsx)("div",{style:{padding:"12px",marginBottom:"16px",borderRadius:"8px",background:"#d97706",color:"white",textAlign:"center"},children:Qe}),(0,L.jsxs)("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[(0,L.jsx)("h4",{style:{marginBottom:"12px",color:"#ef4444"},children:"\u26a0\ufe0f \uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654"}),(0,L.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af",marginBottom:"12px"},children:"\uc8fc\uc758: \uc774 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \ubaa8\ub4e0 \uc8fc\uc2dd\uc758 \uac00\uaca9\uacfc \uac70\ub798 \ub0b4\uc5ed\uc774 \uae30\ubcf8\uac12\uc73c\ub85c \ucd08\uae30\ud654\ub429\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,L.jsx)("button",{onClick:Ut,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#ea580c",color:"white",border:"none",cursor:"pointer",fontWeight:"600"},children:"\ubaa8\ub4e0 \uc8fc\uc2dd \uc815\ubcf4 \ucd08\uae30\ud654"})]})]})]}),"parkingAccount"===c&&(0,L.jsxs)("div",{className:"parking-account-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"parking-account-settings section-card",children:[(0,L.jsx)("h3",{children:"\ud30c\ud0b9 \ud1b5\uc7a5 \uc774\uc790\uc728 \uad00\ub9ac"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\ud30c\ud0b9 \ud1b5\uc7a5\uc758 \uc77c\uc77c \uc774\uc790\uc728\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."}),Ze&&(0,L.jsx)("div",{style:{padding:"12px",marginBottom:"16px",borderRadius:"8px",background:"success"===Ze.type?"#065f46":"#991b1b",color:"white"},children:Ze.text}),(0,L.jsxs)("div",{style:{padding:"16px",background:"rgba(55, 65, 81, 0.5)",borderRadius:"12px",marginBottom:"16px"},children:[(0,L.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,L.jsx)("p",{style:{color:"#9ca3af",fontSize:"14px"},children:"\ud604\uc7ac \uc77c\uc77c \uc774\uc790\uc728"}),(0,L.jsxs)("p",{style:{color:"#22c55e",fontSize:"32px",fontWeight:"bold"},children:[Je,"%"]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#9ca3af"},children:"\uc0c8 \uc77c\uc77c \uc774\uc790\uc728 (%)"}),(0,L.jsx)("input",{type:"number",value:Ke,onChange:e=>Ye(e.target.value),placeholder:"\uc0c8 \uc774\uc790\uc728 \uc785\ub825 (%)",min:"0",step:"0.01",className:"admin-input",style:{marginBottom:"12px"}}),(0,L.jsx)("button",{onClick:Vt,className:"admin-save-button",disabled:!Ke||isNaN(Ke)||parseFloat(Ke)<0,style:{width:"100%"},children:"\uc774\uc790\uc728 \ubcc0\uacbd"})]}),(0,L.jsx)("p",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"12px"},children:"\ud30c\ud0b9 \ud1b5\uc7a5\uc5d0 \uc608\uce58\ub41c \uae08\uc561\uc740 \ub9e4\uc77c \uc124\uc815\ub41c \uc774\uc790\uc728\ub9cc\ud07c \uc774\uc790\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."})]})]})]}),"memberManagement"===c&&(0,L.jsxs)("div",{className:"member-management-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"admin-class-members-container section-card",children:[(0,L.jsx)("h3",{children:"\ud559\uae09 \uad6c\uc131\uc6d0 \uad00\ub9ac"}),we&&(0,L.jsx)("p",{className:"error-message",children:we}),(0,L.jsxs)("p",{className:"admin-section-desc",children:["\ud559\uae09 \uad6c\uc131\uc6d0\uc758 \uc815\ubcf4\ub97c \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud569\ub2c8\ub2e4.",n&&" \ucd5c\uace0 \uad00\ub9ac\uc790\ub294 \ubaa8\ub4e0 \ud559\uae09\uc758 \uad6c\uc131\uc6d0\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),ee?(0,L.jsx)("p",{children:"\uad6c\uc131\uc6d0 \uc815\ubcf4 \ub85c\ub529 \uc911..."}):Y.length>0?(0,L.jsx)("div",{className:"user-cards-container",children:Y.map(e=>(0,L.jsxs)("div",{className:"user-card",children:[(0,L.jsxs)("div",{className:"user-card-header",children:[(0,L.jsx)("span",{className:"user-card-name",children:e.name}),(0,L.jsx)("span",{className:"user-card-role role-".concat(e.isSuperAdmin?"super":e.isAdmin?"admin":"student"),children:e.isSuperAdmin?"\ucd5c\uace0 \uad00\ub9ac\uc790":e.isAdmin?"\uad00\ub9ac\uc790":"\ud559\uc0dd"})]}),(0,L.jsxs)("div",{className:"user-card-body",children:[(0,L.jsxs)("p",{children:[(0,L.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",e.email]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("strong",{children:"\ud559\uae09 \ucf54\ub4dc:"})," ",e.classCode]})]}),n&&(0,L.jsxs)("div",{className:"user-card-actions",children:[!e.isSuperAdmin&&(0,L.jsx)("button",{onClick:()=>Pt(e.id,e.isAdmin),className:"admin-action-button ".concat(e.isAdmin?"remove-admin-button":"add-admin-button"),disabled:ee,children:e.isAdmin?"\uad00\ub9ac\uc790 \ud574\uc81c":"\uad00\ub9ac\uc790 \uc9c0\uc815"}),(0,L.jsx)("button",{onClick:()=>Bt(e.id),className:"admin-action-button reset-password-button",disabled:ee,children:"\ube44\ubc00\ubc88\ud638 \ucd08\uae30\ud654"})]})]},e.id))}):(0,L.jsx)("p",{className:"no-members-message",children:n||l?"\ub4f1\ub85d\ub41c \ud559\uae09 \uad6c\uc131\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."}),(0,L.jsx)("div",{className:"refresh-members-section",children:(0,L.jsx)("button",{onClick:_t,className:"admin-button",disabled:ee,children:ee?"\ub85c\ub529 \uc911...":"\uad6c\uc131\uc6d0 \ubaa9\ub85d \uc0c8\ub85c\uace0\uce68"})})]})]}),"salarySettings"===c&&(0,L.jsxs)("div",{className:"salary-settings-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsxs)("div",{className:"salary-settings section-card",children:[(0,L.jsx)("h3",{children:"\uae09\uc5ec \uc124\uc815"}),(0,L.jsx)("p",{className:"admin-section-desc",children:"\uc138\uc728\uacfc \uc8fc\uae09 \uc778\uc0c1\ub960\uc744 \uc124\uc815\ud569\ub2c8\ub2e4. \uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09\uc740 \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc\uc5d0 \uc2e4\ud589\ub429\ub2c8\ub2e4."}),(0,L.jsxs)("div",{className:"salary-settings-form",children:[(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\uc138\uc728 (%):"}),(0,L.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:at,onChange:e=>nt(e.target.value),className:"admin-input",placeholder:"\uc608: 10 (10%)"}),(0,L.jsx)("small",{className:"form-help",children:"\ud559\uc0dd\ub4e4\uc758 \uc8fc\uae09\uc5d0\uc11c \uacf5\uc81c\ub420 \uc138\uc728\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\uc8fc\uae09 \uc778\uc0c1\ub960 (%):"}),(0,L.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:it,onChange:e=>ot(e.target.value),className:"admin-input",placeholder:"\uc608: 3 (3%)"}),(0,L.jsx)("small",{className:"form-help",children:"\ub9e4\uc8fc \uc790\ub3d9\uc73c\ub85c \uc801\uc6a9\ub420 \uc8fc\uae09 \uc778\uc0c1\ub960\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."})]}),(0,L.jsx)("button",{onClick:ut,className:"admin-save-button",disabled:lt,children:lt?"\uc800\uc7a5 \uc911...":"\uae09\uc5ec \uc124\uc815 \uc800\uc7a5"})]}),(0,L.jsxs)("div",{className:"current-salary-settings",children:[(0,L.jsx)("h4",{children:"\ud604\uc7ac \uae09\uc5ec \uc124\uc815"}),(0,L.jsxs)("div",{className:"settings-display",children:[(0,L.jsxs)("p",{children:["\ud604\uc7ac \uc138\uc728: ",(0,L.jsxs)("strong",{children:[(100*tt.taxRate).toFixed(1),"%"]})]}),(0,L.jsxs)("p",{children:["\ud604\uc7ac \uc8fc\uae09 \uc778\uc0c1\ub960: ",(0,L.jsxs)("strong",{children:[(100*tt.salaryIncreaseRate).toFixed(1),"%"]})]}),(0,L.jsxs)("p",{children:["\ub9c8\uc9c0\ub9c9 \uc790\ub3d9 \uc9c0\uae09\uc77c: ",(0,L.jsx)("strong",{children:Yt()})]})]}),(0,L.jsxs)("div",{className:"salary-calculation-example",children:[(0,L.jsx)("h5",{children:"\uc8fc\uae09 \uacc4\uc0b0 \uc608\uc2dc"}),(0,L.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 1\uac1c: \ucd1d 200\ub9cc\uc6d0 \u2192 \uc138\uae08 ",(2e6*tt.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec ",(2e6*(1-tt.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]}),(0,L.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 2\uac1c: \ucd1d 250\ub9cc\uc6d0 \u2192 \uc138\uae08 ",(25e5*tt.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec ",(25e5*(1-tt.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]}),(0,L.jsxs)("p",{children:["\u2022 \uc9c1\uc5c5 3\uac1c: \ucd1d 300\ub9cc\uc6d0 \u2192 \uc138\uae08 ",(3e6*tt.taxRate/1e4).toFixed(0),"\ub9cc\uc6d0 \uacf5\uc81c \u2192 \uc2e4\uae09\uc5ec ",(3e6*(1-tt.taxRate)/1e4).toFixed(0),"\ub9cc\uc6d0"]})]}),(0,L.jsxs)("div",{className:"auto-payment-info",children:[(0,L.jsx)("h5",{children:"\uc790\ub3d9 \uc8fc\uae09 \uc9c0\uae09 \uc2dc\uc2a4\ud15c"}),(0,L.jsx)("p",{children:"\ud83e\udd16 \ub9e4\uc8fc \uae08\uc694\uc77c \uc624\uc804 8\uc2dc\uc5d0 \uc11c\ubc84\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \uc8fc\uae09\uc774 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,L.jsx)("p",{children:"\ud83d\udcc8 \ub9e4\uc8fc \uc8fc\uae09 \uc778\uc0c1\ub960\ub9cc\ud07c \uae09\uc5ec\uac00 \uc790\ub3d9\uc73c\ub85c \uc778\uc0c1\ub429\ub2c8\ub2e4."}),(0,L.jsx)("p",{children:"\ud83d\udcb0 \uc138\uae08\uc774 \uc790\ub3d9\uc73c\ub85c \uacf5\uc81c\ub418\uc5b4 \uc2e4\uae09\uc5ec\uac00 \uc9c0\uae09\ub429\ub2c8\ub2e4."}),(0,L.jsx)("p",{children:"\u2699\ufe0f \uad00\ub9ac\uc790\uac00 \ub85c\uadf8\uc778\ud558\uc9c0 \uc54a\uc544\ub3c4 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4."})]})]})]})]}),"databaseManagement"===c&&(0,L.jsxs)("div",{className:"database-management-tab",children:[!n&&l&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsxs)("p",{className:"current-class-info",children:["\ud83c\udfeb \ud604\uc7ac \uad00\ub9ac \ud559\uae09: ",(0,L.jsx)("strong",{children:l})]})}),(0,L.jsx)("div",{className:"database-management-container section-card",style:{minHeight:"500px",maxHeight:"70vh",overflow:"auto"},children:(0,L.jsx)(Ot.default,{})})]}),"systemManagement"===c&&(0,L.jsxs)("div",{className:"system-management-tab",children:[n&&(0,L.jsx)("div",{className:"class-info-header",children:(0,L.jsx)("p",{className:"current-class-info",children:"\ud83c\udf10 \uc2dc\uc2a4\ud15c \uc804\uccb4 \uad00\ub9ac (\ucd5c\uace0 \uad00\ub9ac\uc790)"})}),n&&(0,L.jsxs)("div",{className:"admin-class-codes-container section-card",children:[(0,L.jsx)("h3",{children:"\ud559\uae09 \ucf54\ub4dc \uad00\ub9ac"}),we&&(0,L.jsx)("p",{className:"error-message",children:we}),(0,L.jsxs)("div",{className:"add-class-code-form",children:[(0,L.jsx)("input",{type:"text",value:J,onChange:e=>V(e.target.value),placeholder:"\uc0c8 \ud559\uae09 \ucf54\ub4dc \uc785\ub825",disabled:K,className:"admin-input"}),(0,L.jsx)("button",{onClick:Kt,disabled:K||!J.trim(),className:"admin-button",children:K?"\ucd94\uac00 \uc911...":"\ucf54\ub4dc \ucd94\uac00"})]}),(0,L.jsxs)("div",{className:"class-codes-list",children:[(0,L.jsxs)("h4",{children:["\ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc \ubaa9\ub85d (",Array.isArray(H)?H.length:0,"\uac1c)"]}),Array.isArray(H)&&H.length>0?(0,L.jsx)("ul",{className:"codes-list",children:H.map(e=>(0,L.jsxs)("li",{className:"code-item",children:[(0,L.jsx)("span",{className:"code-text",children:e}),(0,L.jsx)("button",{onClick:()=>Xt(e),className:"remove-code-button",disabled:K,children:"\uc0ad\uc81c"})]},e))}):(0,L.jsx)("p",{className:"no-codes-message",children:"\ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]}),(0,L.jsx)(Rt,{isSuperAdmin:n})]}),(0,L.jsx)("div",{className:"admin-settings-footer",children:(0,L.jsx)("button",{onClick:()=>d(!1),className:"admin-close-button",children:"\ub2eb\uae30"})})]}),se&&ne&&(0,L.jsx)("div",{className:"modal-overlay show",children:(0,L.jsxs)("div",{className:"edit-student-jobs-modal",children:[(0,L.jsxs)("div",{className:"modal-header",children:[(0,L.jsxs)("h3",{children:["\ud559\uc0dd \uc9c1\uc5c5 \uc124\uc815:"," ",ne.nickname||ne.name]}),(0,L.jsx)("button",{className:"close-modal-btn",onClick:()=>ae(!1),children:"\u2715"})]}),(0,L.jsxs)("div",{className:"modal-body",children:[(0,L.jsxs)("p",{children:[(0,L.jsx)("strong",{children:ne.nickname||ne.name}),"\ub2d8\uc758 \uc9c1\uc5c5\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."]}),(0,L.jsxs)("div",{className:"salary-info",children:[(0,L.jsxs)("p",{children:["\ud604\uc7ac \ubcf4\uc720 \ud604\uae08: ",(ne.cash||0).toLocaleString(),"\uc6d0"]}),(()=>{const e=ht(oe,!0);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("p",{children:["\uc608\uc0c1 \ucd1d\uae09\uc5ec: ","".concat((e.gross/1e4).toFixed(0),"\ub9cc\uc6d0")]}),(0,L.jsxs)("p",{children:["\uc138\uae08 \uacf5\uc81c: ","".concat((e.tax/1e4).toFixed(0),"\ub9cc\uc6d0")," (",(100*tt.taxRate).toFixed(1),"%)"]}),(0,L.jsxs)("p",{children:["\uc2e4\uae09\uc5ec: ","".concat((e.net/1e4).toFixed(0),"\ub9cc\uc6d0")]})]})})(),(0,L.jsxs)("p",{className:"salary-explanation",children:["(\uae30\ubcf8 200\ub9cc\uc6d0 + \ucd94\uac00 \uc9c1\uc5c5\ub2f9 50\ub9cc\uc6d0, \uc138\uae08 ",(100*tt.taxRate).toFixed(1),"% \uacf5\uc81c)"]})]}),(0,L.jsx)("div",{className:"job-selection-list",children:Array.isArray(f)&&f.filter(e=>!1!==e.active).length>0?f.filter(e=>!1!==e.active).map(e=>(0,L.jsxs)("div",{className:"job-selection-item",children:[(0,L.jsx)("input",{type:"checkbox",id:"job-modal-".concat(e.id),checked:oe.includes(e.id),onChange:()=>{return t=e.id,void le(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}}),(0,L.jsx)("label",{htmlFor:"job-modal-".concat(e.id),children:e.title})]},e.id)):(0,L.jsx)("p",{className:"no-items-message",children:"\uc124\uc815 \uac00\ub2a5\ud55c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]}),(0,L.jsxs)("div",{className:"modal-footer",children:[(0,L.jsx)("button",{className:"admin-cancel-button",onClick:()=>ae(!1),children:"\ucde8\uc18c"}),(0,L.jsx)("button",{className:"admin-save-button",onClick:async()=>{if(ne&&G.db){me(!0);try{const e=(0,G.EW)(G.db,"users",ne.id);await(0,G.tI)(e,{selectedJobIds:oe,updatedAt:(0,G.O5)()}),de(e=>e.map(e=>e.id===ne.id?(0,o.A)((0,o.A)({},e),{},{selectedJobIds:oe}):e)),alert("\ud559\uc0dd \uc9c1\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),ae(!1)}catch(we){console.error("\ud559\uc0dd \uc9c1\uc5c5 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",we),alert("\ud559\uc0dd \uc9c1\uc5c5 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+we.message)}finally{me(!1)}}else alert("\ud559\uc0dd \uc815\ubcf4 \ub610\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958")},disabled:pe,children:pe?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"})]})]})})]}):(0,L.jsx)("div",{className:"admin-settings-modal show",children:(0,L.jsxs)("div",{className:"admin-settings-content",children:[(0,L.jsx)("h2",{children:"\uad00\ub9ac\uc790 \uc124\uc815"}),(0,L.jsx)("p",{children:"\uad00\ub9ac\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,L.jsx)("button",{onClick:()=>d(!1),className:"admin-cancel-button",children:"\ub2eb\uae30"})]})}):null};s(813);var Wt=s(6555),Bt=s(4891),Pt=s(4805);const Ft=[{day:1,reward:1e4,icon:"\ud83c\udf81",label:"1\uc77c\ucc28"},{day:2,reward:15e3,icon:"\ud83c\udf81",label:"2\uc77c\ucc28"},{day:3,reward:2e4,icon:"\ud83c\udf81",label:"3\uc77c\ucc28"},{day:4,reward:3e4,icon:"\ud83c\udf81",label:"4\uc77c\ucc28"},{day:5,reward:4e4,icon:"\ud83c\udf81",label:"5\uc77c\ucc28"},{day:6,reward:5e4,icon:"\ud83c\udf81",label:"6\uc77c\ucc28"},{day:7,reward:6e4,icon:"\ud83c\udf89",label:"7\uc77c\ucc28"},{day:8,reward:7e4,icon:"\ud83c\udf89",label:"8\uc77c\ucc28"},{day:9,reward:85e3,icon:"\ud83c\udf89",label:"9\uc77c\ucc28"},{day:10,reward:1e5,icon:"\ud83c\udfc6",label:"10\uc77c\ucc28!"}],Qt=1e5;function Ht(e){const t="dailyStreak_".concat(e),s=(new Date).toDateString();try{const e=localStorage.getItem(t);if(e){const t=JSON.parse(e),a=new Date(t.lastLogin).toDateString(),n=new Date(Date.now()-864e5).toDateString();return a===s?(0,o.A)((0,o.A)({},t),{},{isNewDay:!1,canClaim:!1}):a===n?{streak:t.streak,lastLogin:t.lastLogin,totalClaimed:t.totalClaimed||0,isNewDay:!0,canClaim:!0}:{streak:0,lastLogin:null,totalClaimed:t.totalClaimed||0,isNewDay:!0,canClaim:!0,streakBroken:!0}}return{streak:0,lastLogin:null,totalClaimed:0,isNewDay:!0,canClaim:!0}}catch(a){return{streak:0,lastLogin:null,totalClaimed:0,isNewDay:!0,canClaim:!0}}}function qt(e){var t;return e<=10?(null===(t=Ft[e-1])||void 0===t?void 0:t.reward)||1e4:Qt}function Gt(e){var t;let{userId:s,onClaim:n}=e;const[i,o]=(0,a.useState)(null),[l,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(s){const e=Ht(s);o(e),p(e.canClaim)}},[s]);if(!x||!i)return null;const m=i.streak+1,u=qt(m),h=m>=10;return(0,L.jsx)("div",{style:{background:l?"linear-gradient(135deg, #10b981 0%, #059669 100%)":h?"linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:l?"0 4px 20px rgba(16, 185, 129, 0.4)":h?"0 4px 20px rgba(245, 158, 11, 0.4)":"0 4px 20px rgba(139, 92, 246, 0.4)",animation:"slideDown 0.3s ease-out",border:"2px solid rgba(255,255,255,0.2)"},children:l?(0,L.jsxs)("div",{style:{textAlign:"center",padding:"10px 0"},children:[(0,L.jsx)("div",{style:{fontSize:"48px",marginBottom:"12px",animation:"bounce 0.5s ease"},children:(null===d||void 0===d?void 0:d.icon)||"\ud83c\udf89"}),(0,L.jsxs)("div",{style:{color:"#fff",fontSize:"28px",fontWeight:"800",marginBottom:"8px"},children:["+",null===d||void 0===d||null===(t=d.reward)||void 0===t?void 0:t.toLocaleString(),"\uc6d0"]}),(0,L.jsxs)("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",fontWeight:"600"},children:["\ud83d\udd25 ",null===d||void 0===d?void 0:d.newStreak,"\uc77c \uc5f0\uc18d \ucd9c\uc11d!"]}),(null===d||void 0===d?void 0:d.isMilestone)&&(0,L.jsx)("div",{style:{marginTop:"10px",padding:"8px 16px",background:"rgba(255,255,255,0.2)",borderRadius:"20px",display:"inline-block",fontSize:"14px",color:"#fff"},children:"\ud83c\udfc6 \ucd95\ud558\ud569\ub2c8\ub2e4! \ub9c8\uc77c\uc2a4\ud1a4 \ub2ec\uc131!"})]}):(0,L.jsxs)(L.Fragment,{children:[i.streakBroken&&(0,L.jsx)("div",{style:{background:"rgba(0,0,0,0.2)",padding:"8px 12px",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"rgba(255,255,255,0.9)"},children:"\ud83d\ude22 \uc5f0\uc18d \ucd9c\uc11d\uc774 \ub04a\uc5b4\uc84c\uc5b4\uc694. \ub2e4\uc2dc 1\uc77c\ucc28\ubd80\ud130 \uc2dc\uc791!"}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[(0,L.jsx)("span",{style:{fontSize:"32px"},children:h?"\ud83c\udfc6":"\ud83c\udf81"}),(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{color:"#fff",fontSize:"18px",fontWeight:"700"},children:[m,"\uc77c\ucc28 \ucd9c\uc11d \ubcf4\uc0c1"]}),m>=10&&(0,L.jsxs)("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.8)",marginTop:"2px"},children:["\ud83d\udd25 ",m,"\uc77c \uc5f0\uc18d \ucd9c\uc11d \uc911!"]})]})]}),(0,L.jsxs)("div",{style:{color:"rgba(255,255,255,0.95)",fontSize:"24px",fontWeight:"800",marginTop:"4px"},children:["+",u.toLocaleString(),"\uc6d0"]})]}),(0,L.jsx)("button",{onClick:()=>{const e=function(e){const t="dailyStreak_".concat(e),s=(new Date).toISOString(),a=Ht(e);if(!a.canClaim)return{success:!1,message:"\uc624\ub298 \uc774\ubbf8 \ubcf4\uc0c1\uc744 \ubc1b\uc558\uc2b5\ub2c8\ub2e4."};const n=a.streak+1,i=qt(n),o=n>=10?"\ud83c\udfc6":n>=7?"\ud83c\udf89":"\ud83c\udf81",l={streak:n,lastLogin:s,totalClaimed:(a.totalClaimed||0)+i};return localStorage.setItem(t,JSON.stringify(l)),{success:!0,reward:i,newStreak:n,icon:o,message:"".concat(n,"\uc77c\ucc28 \ucd9c\uc11d \ubcf4\uc0c1: ").concat(i.toLocaleString(),"\uc6d0!"),isMilestone:10===n||n%30===0}}(s);c(e),r(!0),e.success&&n&&n(e.reward),setTimeout(()=>{p(!1)},5e3)},style:{background:"rgba(255,255,255,0.95)",border:"none",color:h?"#ea580c":"#6366f1",padding:"14px 28px",borderRadius:"14px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:"\ubc1b\uae30! \ud83c\udf89"})]}),(0,L.jsxs)("div",{style:{marginTop:"16px"},children:[(0,L.jsx)("div",{style:{display:"flex",justifyContent:"space-between",gap:"4px"},children:Ft.map((e,t)=>(0,L.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,L.jsx)("div",{style:{width:"100%",height:"8px",borderRadius:"4px",background:t<i.streak?"rgba(255,255,255,0.9)":t===i.streak?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)",marginBottom:"4px"}}),(0===t||4===t||9===t)&&(0,L.jsxs)("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.7)"},children:[t+1,"\uc77c"]})]},e.day))}),m>10&&(0,L.jsx)("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px",color:"rgba(255,255,255,0.8)"},children:"\u2728 10\uc77c \uc774\uc0c1 \uc5f0\uc18d \ucd9c\uc11d \uc2dc \ub9e4\uc77c 10\ub9cc\uc6d0!"})]})]})})}function Ut(e){let{userId:t}=e;const[s,n]=(0,a.useState)({streak:0});(0,a.useEffect)(()=>{if(t){const e=Ht(t);n(e)}},[t]);const i=s.streak||0;return 0===i?null:(0,L.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",background:i>=10?"linear-gradient(135deg, #f59e0b20 0%, #ea580c20 100%)":"linear-gradient(135deg, #8b5cf620 0%, #6366f120 100%)",border:"1px solid ".concat(i>=10?"#f59e0b40":"#8b5cf640"),borderRadius:"14px",fontSize:"13px",color:i>=10?"#f59e0b":"#a78bfa",fontWeight:"600"},children:[(0,L.jsx)("span",{children:"\ud83d\udd25"}),(0,L.jsxs)("span",{children:[i,"\uc77c \uc5f0\uc18d"]}),i>=10&&(0,L.jsx)("span",{children:"\ud83c\udfc6"})]})}function Jt(){return(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)",borderRadius:"16px",padding:"16px",border:"2px solid #8b5cf640"},children:[(0,L.jsx)("h4",{style:{color:"#e8e8ff",fontSize:"15px",fontWeight:"700",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:"\ud83c\udf81 \uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1 \uc548\ub0b4"}),(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[Ft.map(e=>(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:10===e.day?"#f59e0b15":"transparent",borderRadius:"8px",border:10===e.day?"1px solid #f59e0b30":"none"},children:[(0,L.jsxs)("span",{style:{color:10===e.day?"#f59e0b":"#9ca3af",fontSize:"13px"},children:[e.icon," ",e.label]}),(0,L.jsxs)("span",{style:{color:10===e.day?"#f59e0b":"#e8e8ff",fontWeight:10===e.day?"700":"500",fontSize:10===e.day?"15px":"13px"},children:[e.reward.toLocaleString(),"\uc6d0"]})]},e.day)),(0,L.jsx)("div",{style:{marginTop:"8px",padding:"10px",background:"#f59e0b15",borderRadius:"10px",border:"1px solid #f59e0b30",textAlign:"center"},children:(0,L.jsx)("span",{style:{color:"#f59e0b",fontSize:"13px",fontWeight:"600"},children:"\ud83c\udfc6 10\uc77c \uc774\ud6c4: \ub9e4\uc77c 100,000\uc6d0!"})})]})]})}(0,Xe.Qg)(G.Cn,"manualResetClassTasks");const Vt={JOBS:216e5,TASKS:216e5,SETTINGS:432e5,GOALS:216e5,CLASS_CODES:864e5},Kt=e=>Bt.Ay.get(e),Xt=(e,t,s)=>Bt.Ay.set(e,t,s||Vt.TASKS),Yt=e=>Bt.Ay.invalidate(e),Zt=()=>Bt.Ay.clearAll();const $t=new class{constructor(){this.pendingWrites=[],this.batchTimeout=null,this.BATCH_DELAY=2e3,this.MAX_BATCH_SIZE=500}addWrite(e){this.pendingWrites.push(e),this.pendingWrites.length>=this.MAX_BATCH_SIZE?this.executeBatch():this.scheduleBatch()}scheduleBatch(){this.batchTimeout&&clearTimeout(this.batchTimeout),this.batchTimeout=setTimeout(()=>{this.executeBatch()},this.BATCH_DELAY)}async executeBatch(){if(0===this.pendingWrites.length)return;this.batchTimeout&&(clearTimeout(this.batchTimeout),this.batchTimeout=null);const e=(0,$.wP)(G.db),t=[...this.pendingWrites];this.pendingWrites=[];try{t.forEach(t=>{let{type:s,ref:a,data:n}=t;switch(s){case"set":e.set(a,n);break;case"update":e.update(a,n);break;case"delete":e.delete(a)}}),await e.commit(),console.log("\ubc30\uce58 \uc2e4\ud589 \uc644\ub8cc: ".concat(t.length,"\uac1c \uc791\uc5c5"))}catch(s){console.error("\ubc30\uce58 \uc2e4\ud589 \uc2e4\ud328:",s)}}};class es{constructor(){this.listeners=new Map}addListener(e,t){this.listeners.has(e)&&this.listeners.get(e)(),this.listeners.set(e,t)}removeListener(e){this.listeners.has(e)&&(this.listeners.get(e)(),this.listeners.delete(e))}removeAllListeners(){this.listeners.forEach(e=>e()),this.listeners.clear()}}function ts(e){let{availableJobs:t,currentSelectedJobIds:s=[],onConfirmSelection:n,onCancel:i}=e;const[o,l]=(0,a.useState)(Array.isArray(s)?[...s]:[]),r=(0,a.useMemo)(()=>Array.isArray(t)?t.filter(e=>!1!==e.active):[],[t]),d=(0,a.useCallback)(e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]);return(0,L.jsxs)("div",{className:"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 p-6 max-w-xl mx-auto my-8",children:[(0,L.jsx)("h4",{className:"text-xl font-semibold text-white text-center mb-2",children:"\uc9c1\uc5c5 \uc120\ud0dd (\ub2e4\uc911 \uc120\ud0dd \uac00\ub2a5)"}),(0,L.jsx)("p",{className:"text-sm text-slate-400 text-center mb-4",children:"'\ub098\uc758 \ud560\uc77c'\uc5d0 \ud45c\uc2dc\ud560 \uc9c1\uc5c5\uc744 \uc120\ud0dd\ud558\uc138\uc694."}),(0,L.jsxs)("div",{className:"flex flex-col gap-3",children:[r.map(e=>(0,L.jsxs)("label",{className:"p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ".concat(o.includes(e.id)?"border-cyan-500 bg-cyan-900/30":"border-cyan-900/20 bg-[#14142380] hover:border-cyan-500/50"),children:[(0,L.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>d(e.id),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer"}),(0,L.jsx)("span",{className:"font-medium ".concat(o.includes(e.id)?"text-cyan-400":"text-slate-300"),children:e.title})]},e.id)),0===r.length&&(0,L.jsx)(Wt.pp,{icon:z.A,title:"\uc120\ud0dd \uac00\ub2a5\ud55c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",description:"\uad00\ub9ac\uc790\uac00 \uc9c1\uc5c5\uc744 \ub4f1\ub85d\ud558\uba74 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,L.jsx)(Wt.rA,{variant:"secondary",onClick:i,children:"\ucde8\uc18c"}),(0,L.jsx)(Wt.rA,{variant:"primary",onClick:()=>n(o),children:"\uc120\ud0dd \uc644\ub8cc"})]})]})}const ss=function(e){let{adminTabMode:t}=e;(0,n.Zp)();const{user:s,userDoc:l,setUserDoc:r,loading:d,updateUser:c,refreshUserDocument:x,isAdmin:p,isSuperAdmin:m,optimisticUpdate:u}=(0,i.As)(),h=(0,a.useRef)(new es),g=(0,a.useRef)(0),b=(0,a.useRef)(null),[y,j]=(0,a.useState)(!0),[v,w]=(0,a.useState)("list"),[N,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)("generalSettings"),[A,I]=(0,a.useState)([]),[T,D]=(0,a.useState)([]),[R,O]=(0,a.useState)(null),[_,W]=(0,a.useState)(""),[B,P]=(0,a.useState)(null),[F,Q]=(0,a.useState)(null),[H,q]=(0,a.useState)(!1),[U,J]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(""),[ee,te]=(0,a.useState)(""),[se,ae]=(0,a.useState)("5"),[ne,ie]=(0,a.useState)(!1),[oe,le]=(0,a.useState)(1e3),[re,de]=(0,a.useState)(1e3),[ce,xe]=(0,a.useState)(String(1e3)),[pe,me]=(0,a.useState)(String(1e3)),[ue,he]=(0,a.useState)([]);(0,a.useEffect)(()=>{t&&null!==p&&void 0!==p&&p()&&(S(t),k(!0))},[t,p]),(0,a.useEffect)(()=>{if(null!==l&&void 0!==l&&l.uid&&"student"===(null===l||void 0===l?void 0:l.role)){if(Ht(l.uid).canClaim){const e=setTimeout(()=>{X(!0)},500);return()=>clearTimeout(e)}}},[null===l||void 0===l?void 0:l.uid,null===l||void 0===l?void 0:l.role]);const ge=(0,a.useCallback)(async e=>{if(null!==l&&void 0!==l&&l.uid&&e)try{const t=(0,$.H9)(G.db,"users",l.uid);await(0,$.mZ)(t,{cash:(0,$.GV)(e)}),Bt.Ay.invalidate("user_".concat(l.uid)),setTimeout(()=>{X(!1)},3e3)}catch(t){console.error("\ucd9c\uc11d \ubcf4\uc0c1 \uc9c0\uae09 \uc2e4\ud328:",t)}},[null===l||void 0===l?void 0:l.uid]),fe=(0,a.useMemo)(()=>null!==l&&void 0!==l&&l.classCode&&null!==p&&void 0!==p&&p()?"".concat(l.classCode,"_goal"):null,[null===l||void 0===l?void 0:l.classCode,p]),be=(0,a.useMemo)(()=>l&&Array.isArray(l.selectedJobIds)?l.selectedJobIds:[],[l]),ye=(0,a.useMemo)(()=>{const e=(null===l||void 0===l?void 0:l.completedJobTasks)||{};return Array.isArray(A)?A.filter(e=>be.includes(e.id)&&!1!==e.active).map(t=>(0,o.A)((0,o.A)({},t),{},{tasks:(t.tasks||[]).map(s=>(0,o.A)((0,o.A)({},s),{},{clicks:e["".concat(t.id,"_").concat(s.id)]||0}))})):[]},[A,be,l]),je=(0,a.useMemo)(()=>{if(!T||!l)return[];const e=l.completedTasks||{};return T.map(t=>(0,o.A)((0,o.A)({},t),{},{clicks:e[t.id]||0}))},[T,l]),ve=(0,a.useCallback)(()=>{try{return(0,$.H9)((0,$.rJ)(G.db,"temp")).id}catch(e){return console.error("Error generating ID:",e),Date.now().toString()+Math.random().toString(36).substr(2,9)}},[]),we=(0,a.useCallback)(async e=>{if(!e)return;const t=async()=>{try{const t=(0,$.P)((0,$.rJ)(G.db,"jobs"),(0,$._M)("classCode","==",e),(0,$.AB)(50)),s=(await(0,$.GG)(t)).docs.map(e=>(0,o.A)((0,o.A)({id:e.id},e.data()),{},{tasks:(e.data().tasks||[]).map(e=>(0,o.A)((0,o.A)({},e),{},{reward:e.reward||0,clicks:0,maxClicks:e.maxClicks||5})),active:!1!==e.data().active})).sort((e,t)=>{var s,a,n,i;const o=(null===(s=e.updatedAt)||void 0===s||null===(a=s.toMillis)||void 0===a?void 0:a.call(s))||0;return((null===(n=t.updatedAt)||void 0===n||null===(i=n.toMillis)||void 0===i?void 0:i.call(n))||0)-o});I(s),Xt("jobs_".concat(e),s,Vt.JOBS);const a=(0,$.P)((0,$.rJ)(G.db,"commonTasks"),(0,$._M)("classCode","==",e),(0,$.AB)(50)),n=(await(0,$.GG)(a)).docs.map(e=>(0,o.A)((0,o.A)({id:e.id},e.data()),{},{reward:e.data().reward||0,clicks:e.data().clicks||0,maxClicks:e.data().maxClicks||5})).sort((e,t)=>{var s,a,n,i;const o=(null===(s=e.updatedAt)||void 0===s||null===(a=s.toMillis)||void 0===a?void 0:a.call(s))||0;return((null===(n=t.updatedAt)||void 0===n||null===(i=n.toMillis)||void 0===i?void 0:i.call(n))||0)-o});D(n),Xt("commonTasks_".concat(e),n,Vt.TASKS)}catch(t){console.error("Polling \uc5d0\ub7ec:",t)}};await t();const s=setInterval(t,72e5);h.current.addListener("polling",()=>clearInterval(s))},[]),Ne=(0,a.useCallback)(async e=>{const t=Kt("jobs_".concat(e)),s=Kt("commonTasks_".concat(e)),a=Kt("mainSettings");return t&&I(t),s&&D(s),a&&(de(a.couponValue||1e3),xe(String(a.couponValue||1e3))),{hasJobsCache:!!t,hasTasksCache:!!s,hasSettingsCache:!!a}},[]),ke=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null===l||void 0===l||!l.classCode)return void j(!1);const t=Date.now(),s=l.classCode;if(b.current&&!e)return b.current;if(!e&&t-g.current<72e5)return void j(!1);j(!0);return b.current=(async()=>{try{const a=await Ne(s);a.hasJobsCache&&a.hasTasksCache&&j(!1),h.current.listeners.has("jobs")||setTimeout(()=>we(s),0);const n=[];if(a.hasSettingsCache&&!e||n.push((0,$.x7)((0,$.H9)(G.db,"settings","mainSettings")).then(e=>({type:"settings",data:e.exists()?e.data():null}))),!fe||Kt("goal_".concat(fe))&&!e||n.push((0,$.x7)((0,$.H9)(G.db,"goals",fe)).then(e=>({type:"goal",data:e.exists()?e.data():null}))),!m()||Kt("classCodes")&&!e||n.push((0,$.x7)((0,$.H9)(G.db,"settings","classCodes")).then(e=>({type:"classCodes",data:e.exists()?e.data():null}))),n.length>0){(await Promise.all(n)).forEach(e=>{switch(e.type){case"settings":if(e.data){const t=e.data.couponValue||1e3;de(t),xe(String(t)),Xt("mainSettings",e.data,Vt.SETTINGS)}break;case"goal":if(e.data&&e.data.classCode===s){const t=e.data.targetAmount||1e3;le(t),me(String(t)),Xt("goal_".concat(fe),e.data,Vt.GOALS)}break;case"classCodes":e.data&&(he(e.data.validCodes||[]),Xt("classCodes",e.data,Vt.CLASS_CODES))}})}g.current=t}catch(a){}finally{j(!1),b.current=null}})(),b.current},[null===l||void 0===l?void 0:l.classCode,fe,m,we,Ne]),Ce=(0,a.useRef)(!1),Se=(0,a.useCallback)(async()=>{if(Ce.current)console.log("[Dashboard] \uc774\ubbf8 \uc0c8\ub85c\uace0\uce68 \uc9c4\ud589 \uc911 - \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");else{Ce.current=!0,console.log("[Dashboard] \uc11c\ubc84 \ub9ac\uc14b \uac10\uc9c0 - \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68");try{x&&await x(),ke&&await ke(!0);const e=(new Date).toDateString();localStorage.setItem("lastTaskResetDate",e),console.log("[Dashboard] \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc")}catch(e){console.error("[Dashboard] \uc0c1\ud0dc \uc0c8\ub85c\uace0\uce68 \uc624\ub958:",e)}finally{Ce.current=!1}}},[x,ke]);(0,a.useEffect)(()=>{if(!d)return s?(null!==l&&void 0!==l&&l.id&&null!==l&&void 0!==l&&l.classCode?ke():j(!1),()=>{h.current.removeAllListeners()}):(j(!1),I([]),D([]),void h.current.removeAllListeners());j(!0)},[d,s,null===l||void 0===l?void 0:l.id,null===l||void 0===l?void 0:l.classCode,ke]);const Ae=(0,a.useRef)(!1),Ie=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(null===l||void 0===l||!l.classCode||!Se)return;const e=()=>{const e=(new Date).toDateString(),t=localStorage.getItem("lastTaskResetDate");Ie.current!==e&&(Ie.current=e,t!==e&&Se())};Ae.current||(Ae.current=!0,e());const t=setInterval(()=>{e()},36e5);return()=>{t&&clearInterval(t)}},[null===l||void 0===l?void 0:l.classCode,Se]);const Te=(0,a.useCallback)(async()=>{if(!G.db||null===l||void 0===l||!l.classCode)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c.");const e=_.trim();if(e){j(!0);try{if(R){const t=(0,$.H9)(G.db,"jobs",R.id);$t.addWrite({type:"update",ref:t,data:{title:e,updatedAt:(0,$.O5)()}}),alert("\uc9c1\uc5c5\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),W(""),O(null),k(!1)}else{const t=ve(),s=(0,$.H9)(G.db,"jobs",t);$t.addWrite({type:"set",ref:s,data:{title:e,active:!0,tasks:[],createdAt:(0,$.O5)(),updatedAt:(0,$.O5)(),classCode:l.classCode}}),alert("\uc9c1\uc5c5\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),W("")}Yt("jobs_".concat(l.classCode))}catch(t){console.error("handleSaveJob \uc624\ub958:",t),alert("\uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd")}finally{j(!1)}}else alert("\uc9c1\uc5c5 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},[_,R,ve,l]),Me=(0,a.useCallback)(async e=>{if(G.db){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc9c1\uc5c5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uad00\ub828\ub41c \ud560\uc77c\ub3c4 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")){j(!0);try{var t;const a=(0,$.H9)(G.db,"jobs",e);if($t.addWrite({type:"delete",ref:a,data:null}),s&&null!==l&&void 0!==l&&null!==(t=l.selectedJobIds)&&void 0!==t&&t.includes(e)){const t=l.selectedJobIds.filter(t=>t!==e);await c({selectedJobIds:t})}(null===R||void 0===R?void 0:R.id)===e&&(W(""),O(null)),k(!1),alert("\uc9c1\uc5c5\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Yt("jobs_".concat(l.classCode))}catch(a){console.error("handleDeleteJob \uc624\ub958:",a),alert("\uc9c1\uc5c5 \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd")}finally{j(!1)}}}else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[s,l,R,c]),Ee=(0,a.useCallback)(e=>{e?(O(e),W(e.title),S("jobSettings"),k(!0)):alert("\ud574\ub2f9 \uc9c1\uc5c5\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[]),ze=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;q(arguments.length>1&&void 0!==arguments[1]&&arguments[1]),Q(e),Z(""),te(""),ae("5"),P(null),S("taskManagement"),J(!0),k(!0)},[]),De=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(P(e),Z(e.name),te(String(e.reward||0)),ae(String(e.maxClicks||5)),q(!!t),Q(t),S("taskManagement"),J(!0),k(!0)):alert("\uc218\uc815\ud560 \ud560\uc77c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},[]),Re=(0,a.useCallback)(async()=>{if(!G.db||null===l||void 0===l||!l.classCode)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c.");const e=Y.trim(),t=parseInt(ee,10),s=parseInt(se,10);if(!e||isNaN(t)||t<0||isNaN(s)||s<=0)return void alert("\uc785\ub825\uac12\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694. (\uc774\ub984, \ubcf4\uc0c1: 0 \uc774\uc0c1 \uc22b\uc790, \ucd5c\ub300 \ud074\ub9ad: 1 \uc774\uc0c1 \uc22b\uc790)");j(!0);const a={name:e,reward:t,maxClicks:s,clicks:(null===B||void 0===B?void 0:B.clicks)||0};try{if(B){const e=B.id;if(H&&F){const t=(0,$.H9)(G.db,"jobs",F),s=await(0,$.x7)(t);if(!s.exists()||s.data().classCode!==l.classCode)throw new Error("\uc9c1\uc5c5 \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uac70\ub098 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const n=s.data().tasks||[],i=n.findIndex(t=>t.id===e);if(-1===i)throw new Error("\uc9c1\uc5c5 \ub0b4 \ud560\uc77c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=[...n];r[i]=(0,o.A)((0,o.A)({},r[i]),a),$t.addWrite({type:"update",ref:t,data:{tasks:r,updatedAt:(0,$.O5)()}})}else{const t=(0,$.H9)(G.db,"commonTasks",e);$t.addWrite({type:"update",ref:t,data:(0,o.A)((0,o.A)({},a),{},{updatedAt:(0,$.O5)()})})}J(!1),P(null),k(!1),alert("\ud560\uc77c\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else{const e=ve(),t=(0,o.A)((0,o.A)({},a),{},{id:e,clicks:0});if(H&&F){const e=(0,$.H9)(G.db,"jobs",F);$t.addWrite({type:"update",ref:e,data:{tasks:(0,$.hq)(t),updatedAt:(0,$.O5)()}})}else{const s=(0,$.H9)(G.db,"commonTasks",e);$t.addWrite({type:"set",ref:s,data:(0,o.A)((0,o.A)({},t),{},{createdAt:(0,$.O5)(),updatedAt:(0,$.O5)(),classCode:l.classCode})})}Z(""),te(""),ae("5"),alert("\ud560\uc77c\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}Yt(H?"jobs_".concat(l.classCode):"commonTasks_".concat(l.classCode))}catch(n){console.error("handleSaveTask \uc624\ub958:",n),alert("\ud560\uc77c \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd: "+n.message)}finally{j(!1)}},[Y,ee,se,B,H,F,ve,l]),Oe=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(G.db){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \ud560\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){j(!0);try{if(t){const s=(0,$.H9)(G.db,"jobs",t),a=await(0,$.x7)(s);if(!a.exists())throw new Error("\uc9c1\uc5c5 \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const n=(a.data().tasks||[]).filter(t=>t.id!==e);$t.addWrite({type:"update",ref:s,data:{tasks:n,updatedAt:(0,$.O5)()}})}else{const t=(0,$.H9)(G.db,"commonTasks",e);$t.addWrite({type:"delete",ref:t,data:null})}(null===B||void 0===B?void 0:B.id)===e&&(J(!1),P(null)),k(!1),alert("\ud560\uc77c\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Yt(t?"jobs_".concat(l.classCode):"commonTasks_".concat(l.classCode))}catch(s){console.error("handleDeleteTask \uc624\ub958:",s),alert("\ud560\uc77c \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd: "+s.message)}finally{j(!1)}}}else alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.")},[B,l]),Le=(0,a.useCallback)(()=>{w("selectJob")},[]),_e=(0,a.useCallback)(async e=>{if(null===s||void 0===s||!s.uid)return void alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc624\ub958.");const t=Array.isArray(e)?e:[];j(!0);try{await c({selectedJobIds:t})?(r((0,o.A)((0,o.A)({},l),{},{selectedJobIds:t})),w("list"),alert("\uc120\ud0dd\ud55c \uc9c1\uc5c5\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\uc120\ud0dd\ud55c \uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc624\ub958 \ubc1c\uc0dd.")}catch(a){console.error("handleConfirmJobSelection \uc624\ub958:",a),alert("\uc120\ud0dd \uc9c1\uc5c5 \uc800\uc7a5 \uc911 \uc608\uc0c1\uce58 \ubabb\ud55c \uc624\ub958 \ubc1c\uc0dd.")}finally{j(!1)}},[s,c]),We=(0,a.useCallback)(()=>{w("list")},[]),Be=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(ne)return;if(null===l||void 0===l||!l.id)return void alert("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");if(s&&t){var i,d;const s="".concat(t,"_").concat(e),a=(l.completedJobTasks||{})[s]||0,n=null===(i=A.find(e=>e.id===t))||void 0===i||null===(d=i.tasks)||void 0===d?void 0:d.find(t=>t.id===e);if(n&&n.maxClicks>0&&a>=n.maxClicks)return void console.warn("[Dashboard] \uc774\ubbf8 \uc644\ub8cc\ub41c \uc9c1\uc5c5 \ud560\uc77c:",{taskKey:s,currentClicks:a,maxClicks:n.maxClicks})}else if(!s){const t=(l.completedTasks||{})[e]||0,s=null===T||void 0===T?void 0:T.find(t=>t.id===e);if(s&&s.maxClicks>0&&t>=s.maxClicks)return void console.warn("[Dashboard] \uc774\ubbf8 \uc644\ub8cc\ub41c \uacf5\ud1b5 \ud560\uc77c:",{taskId:e,currentClicks:t,maxClicks:s.maxClicks})}ie(!0),console.log("[Dashboard] \ud560\uc77c \uc644\ub8cc \ucc98\ub9ac \uc2dc\uc791:",{taskId:e,jobId:t,isJobTask:s,cardType:a,rewardAmount:n});let c=0,x=0;a&&n&&("cash"===a?c=n:"coupon"===a&&(x=n));const p=(0,o.A)({},l),m=l.cash+c,u=l.coupons+x;r(s&&t?s=>(0,o.A)((0,o.A)({},s),{},{cash:m,coupons:u,completedJobTasks:(0,o.A)((0,o.A)({},s.completedJobTasks||{}),{},{["".concat(t,"_").concat(e)]:((s.completedJobTasks||{})["".concat(t,"_").concat(e)]||0)+1})}):t=>{var s;return(0,o.A)((0,o.A)({},t),{},{cash:m,coupons:u,completedTasks:(0,o.A)((0,o.A)({},t.completedTasks||{}),{},{[e]:((null===(s=t.completedTasks)||void 0===s?void 0:s[e])||0)+1})})});try{const i=(0,Xe.Qg)(G.Cn,"completeTask"),l=(await i({taskId:e,jobId:t,isJobTask:s,cardType:a,rewardAmount:n})).data;if(console.log("\u2705 [\ub514\ubc84\uadf8] \uc11c\ubc84\ub85c\ubd80\ud130 \ubc1b\uc740 \uacb0\uacfc:",l),!l.success)throw new Error(l.message||"\uc54c \uc218 \uc5c6\ub294 \uc11c\ubc84 \uc624\ub958");{const e="number"===typeof l.updatedCash?l.updatedCash:m,t="number"===typeof l.updatedCoupons?l.updatedCoupons:u;console.log("\u2705 [\ub514\ubc84\uadf8] \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8: \ud604\uae08 ".concat(m,"\uc6d0, \ucfe0\ud3f0 ").concat(u,"\uac1c \u2192 \uc11c\ubc84 \ud655\uc815: \ud604\uae08 ").concat(e,"\uc6d0, \ucfe0\ud3f0 ").concat(t,"\uac1c")),r(s=>(0,o.A)((0,o.A)({},s),{},{cash:e,coupons:t})),alert(l.message)}}catch(h){console.error("[Dashboard] \ud560\uc77c \uc644\ub8cc \ucc98\ub9ac \uc911 \uc2ec\uac01\ud55c \uc624\ub958:",h),alert("\ud560\uc77c \uc644\ub8cc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(h.message)),r(p)}finally{ie(!1)}},[ne,l,T,A,r]),Pe=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"generalSettings";me(String(oe)),xe(String(re)),S(e),k(!0)},[oe,re]),Fe=(0,a.useCallback)(async()=>{if(console.log("--- [DEBUG] EXECUTING handleSaveAdminSettings with LATEST code ---"),!G.db)return void alert("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc624\ub958.");const e=parseInt(pe,10),t=parseInt(ce,10);if(isNaN(e)||e<=0||isNaN(t)||t<=0)alert("\uc62c\ubc14\ub978 \ubaa9\ud45c \uae08\uc561\uacfc \ucfe0\ud3f0 \uac00\uce58\ub97c \uc785\ub825\ud558\uc138\uc694 (0\ubcf4\ub2e4 \ud070 \uc22b\uc790).");else{j(!0);try{const a=(0,$.H9)(G.db,"settings","mainSettings"),n=await(0,$.x7)(a);if(n.exists()&&n.data().couponValue===t||$t.addWrite({type:"set",ref:a,data:{couponValue:t,updatedAt:(0,$.O5)()}}),fe&&null!==p&&void 0!==p&&p())try{const t=(0,$.H9)(G.db,"goals",fe);await(0,$.BN)(t,{targetAmount:e,classCode:l.classCode,updatedAt:(0,$.O5)()},{merge:!0})}catch(s){console.warn("\ubaa9\ud45c \uc124\uc815 \uad8c\ud55c\uc774 \uc5c6\uc5b4 \ubaa9\ud45c \uae08\uc561 \uc124\uc815\uc744 \uac74\ub108\ub700:",s.code)}de(t),fe&&null!==p&&void 0!==p&&p()&&le(e),k(!1),alert("\uad00\ub9ac\uc790 \uc124\uc815\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Yt("mainSettings"),fe&&Yt("goal_".concat(fe))}catch(a){console.error("\uad00\ub9ac\uc790 \uc124\uc815 \uc800\uc7a5 \uc624\ub958:",a),alert("\uad00\ub9ac\uc790 \uc124\uc815 \uc800\uc7a5 \uc911 \uc624\ub958: "+a.message)}finally{j(!1)}}},[pe,ce,fe,l,p]),Qe=(0,a.useCallback)(async()=>{if(!G.db||null===p||void 0===p||!p())return;const e=Kt("classCodes");if(e)he(e.validCodes||[]);else try{const e=(0,$.H9)(G.db,"settings","classCodes"),t=await(0,$.x7)(e);if(t.exists()){const e=Array.isArray(t.data().validCodes)?t.data().validCodes:[];he(e),Xt("classCodes",t.data(),Vt.CLASS_CODES)}else $t.addWrite({type:"set",ref:e,data:{validCodes:[],createdAt:(0,$.O5)(),updatedAt:(0,$.O5)()}}),he([])}catch(t){console.error("\ud559\uae09 \ucf54\ub4dc \ub85c\ub4dc \uc624\ub958:",t),he([])}},[p]);(0,a.useEffect)(()=>{null!==p&&void 0!==p&&p()&&Qe()},[p,Qe]);const qe=(0,a.useCallback)(async e=>{if(!G.db)return!1;const t=e.trim();if(!t)return alert("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),!1;if(ue.includes(t))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \ud559\uae09 \ucf54\ub4dc\uc785\ub2c8\ub2e4."),!1;j(!0);try{const e=(0,$.H9)(G.db,"settings","classCodes"),s=await(0,$.x7)(e),a=s.exists()&&s.data().validCodes||[];return $t.addWrite({type:"update",ref:e,data:{validCodes:[...a,t],updatedAt:(0,$.O5)()}}),alert("\ud559\uae09 \ucf54\ub4dc\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),he(e=>[...e,t]),Yt("classCodes"),!0}catch(s){return console.error("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc624\ub958:",s),alert("\ud559\uae09 \ucf54\ub4dc \ucd94\uac00 \uc911 \uc624\ub958 \ubc1c\uc0dd"),!1}finally{j(!1)}},[ue]),Ge=(0,a.useCallback)(async e=>{if(!G.db)return!1;if(!window.confirm("'".concat(e,"' \ucf54\ub4dc\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return!1;j(!0);try{const t=(0,$.H9)(G.db,"settings","classCodes"),s=await(0,$.x7)(t);if(!s.exists())throw new Error("\ud559\uae09 \ucf54\ub4dc \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const a=(s.data().validCodes||[]).filter(t=>t!==e);return $t.addWrite({type:"update",ref:t,data:{validCodes:a,updatedAt:(0,$.O5)()}}),alert("\ud559\uae09 \ucf54\ub4dc\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),he(t=>t.filter(t=>t!==e)),Yt("classCodes"),!0}catch(t){return console.error("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc624\ub958:",t),alert("\ud559\uae09 \ucf54\ub4dc \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd: "+t.message),!1}finally{j(!1)}},[]),Ue=(0,a.useCallback)(()=>{Zt(),h.current.removeAllListeners(),null!==l&&void 0!==l&&l.classCode&&we(l.classCode),ke(!0)},[ke,null===l||void 0===l?void 0:l.classCode,we]),Je=(0,a.useCallback)(async()=>{if(console.log("[Dashboard] \uc218\ub3d9 \ud560\uc77c \ub9ac\uc14b \uc2dc\uc791"),null===l||void 0===l||!l.classCode)return console.error("[Dashboard] \ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc5b4 \ub9ac\uc14b\uc744 \uc911\ub2e8\ud569\ub2c8\ub2e4."),void alert("\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(window.confirm("'".concat(l.classCode,"' \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \ud559\uc0dd\ub4e4\uc758 '\uc624\ub298\uc758 \ud560\uc77c' \uc644\ub8cc \uae30\ub85d\uc744 \ucd08\uae30\ud654\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){console.log("[Dashboard] ".concat(l.classCode," \ud074\ub798\uc2a4 \ub9ac\uc14b \uc2e4\ud589...")),j(!0);try{const e=(0,Xe.Qg)(G.Cn,"manualResetClassTasks"),t=await e({classCode:l.classCode});if(console.log("[Dashboard] \ud074\ub77c\uc6b0\ub4dc \ud568\uc218 \uacb0\uacfc \uc218\uc2e0:",t.data),!t.data.success)throw new Error(t.data.message||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958");{r(e=>(0,o.A)((0,o.A)({},e),{},{completedTasks:{},completedJobTasks:{}}));const e=(new Date).toDateString();localStorage.setItem("lastTaskResetDate",e),alert("\ub9ac\uc14b \uc131\uacf5!\n".concat(t.data.message)),console.log("[Dashboard] \ub9ac\uc14b \uc131\uacf5: ".concat(t.data.message))}}catch(e){console.error("[Dashboard] \ud560\uc77c \ub9ac\uc14b \uc2e4\ud328:",e),alert("\uc624\ub958: \ud560\uc77c \ub9ac\uc14b\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.\n\n".concat(e.message))}finally{j(!1),console.log("[Dashboard] \uc218\ub3d9 \ud560\uc77c \ub9ac\uc14b \uc885\ub8cc")}}else console.log("[Dashboard] \uc0ac\uc6a9\uc790\uac00 \ub9ac\uc14b\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.")},[null===l||void 0===l?void 0:l.classCode,r,I]);if(d||y)return(0,L.jsx)(Wt.LN,{className:"flex items-center justify-center",children:(0,L.jsx)(Wt.Gu,{message:"\uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})});if(!s)return(0,L.jsx)(Wt.LN,{className:"flex items-center justify-center",children:(0,L.jsx)(Wt.pp,{icon:E.A,title:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4",description:"\ud560\uc77c\uc744 \ud655\uc778\ud558\ub824\uba74 \uba3c\uc800 \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})});if(null===l||void 0===l||!l.id)return(0,L.jsx)(Wt.LN,{className:"flex items-center justify-center",children:(0,L.jsx)(Wt.pp,{icon:E.A,title:"\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc2e4\ud328",description:"\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uc644\uc804\ud788 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."})});if(!l.classCode)return(0,L.jsx)(Wt.LN,{className:"flex items-center justify-center",children:(0,L.jsx)(Wt.pp,{icon:E.A,title:"\ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c",description:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \ucf54\ub4dc\ub97c \ud560\ub2f9\ubc1b\uc73c\uc138\uc694."})});null===s||void 0===s||s.uid;const Ve=(null===l||void 0===l?void 0:l.name)||(null===l||void 0===l?void 0:l.nickname)||(null===s||void 0===s?void 0:s.displayName)||"\uc0ac\uc6a9\uc790";return(0,L.jsxs)("div",{className:"min-h-full w-full bg-[#0a0a12] px-2 pt-1 pb-0",children:[!t&&(0,L.jsxs)("section",{className:"bg-[#14142380] backdrop-blur-sm rounded-lg px-3 py-1.5 shadow-lg border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-1.5 mb-2",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)("div",{className:"w-7 h-7 bg-cyan-900/30 rounded-md flex items-center justify-center text-cyan-400 shrink-0 border border-cyan-500/30",children:(0,L.jsx)(E.A,{className:"w-4 h-4"})}),(0,L.jsxs)("div",{className:"leading-tight",children:[(0,L.jsx)("h2",{className:"text-sm md:text-base font-bold text-white",children:"\uc624\ub298\uc758 \ud560\uc77c"}),(0,L.jsxs)("p",{className:"text-[11px] text-slate-400",children:[Ve,"\ub2d8, \uc624\ub298\ub3c4 \ud654\uc774\ud305!"]})]})]}),(null===p||void 0===p?void 0:p())&&"list"===v&&!N&&(0,L.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,L.jsx)(Wt.rA,{variant:"primary",icon:M.A,onClick:()=>Pe("generalSettings"),size:"sm",children:"\uad00\ub9ac\uc790 \uae30\ub2a5"}),(0,L.jsx)(Wt.rA,{variant:"success",icon:f.A,onClick:Ue,size:"sm",children:"\uc0c8\ub85c\uace0\uce68"}),(0,L.jsx)(Wt.rA,{variant:"danger",icon:Pt.A,onClick:Je,size:"sm",title:"\uc774 \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ud560\uc77c\uc744 \ub9ac\uc14b\ud569\ub2c8\ub2e4",children:"\ud560\uc77c \ub9ac\uc14b"})]}),"selectJob"===v&&(0,L.jsx)(Wt.rA,{variant:"ghost",icon:V.A,onClick:We,children:"\ub4a4\ub85c\uac00\uae30"})]}),"list"===v&&!N&&!t&&(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)("div",{className:"bg-[#14142380] backdrop-blur-sm rounded-2xl shadow-lg border border-cyan-900/30 overflow-hidden mb-6",children:[(0,L.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(z.A,{className:"w-5 h-5 text-white"}),(0,L.jsx)("h3",{className:"text-base md:text-lg font-bold text-white",children:"\ub098\uc758 \uc9c1\uc5c5 \ud560\uc77c"})]}),(0,L.jsx)(Wt.rA,{variant:"outline",icon:He.A,onClick:Le,size:"sm",className:"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30",children:"\uc9c1\uc5c5 \ucd94\uac00/\uc120\ud0dd"})]}),(0,L.jsxs)("div",{className:"p-4 md:p-6",children:[(0,L.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ye.length>0?ye.map(e=>(0,L.jsx)(ft,{job:e,isAdmin:null===p||void 0===p?void 0:p(),onEditJob:()=>Ee(e),onDeleteJob:()=>Me(e.id),onAddTask:()=>ze(e.id,!0),onEarnCoupon:(e,t,s,a,n)=>Be(e,t,s,a,n),onEditTask:t=>De(t,e.id),onDeleteTask:t=>Oe(t,e.id),isHandlingTask:ne},e.id)):(0,L.jsx)("div",{className:"col-span-full",children:(0,L.jsx)(Wt.pp,{icon:z.A,title:"\ud45c\uc2dc\ud560 \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",description:"'\uc9c1\uc5c5 \ucd94\uac00/\uc120\ud0dd' \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc9c1\uc5c5\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",action:(0,L.jsx)(Wt.rA,{variant:"primary",icon:He.A,onClick:Le,children:"\uc9c1\uc5c5 \uc120\ud0dd\ud558\uae30"})})})}),(0,L.jsxs)("div",{className:"mt-6 rounded-xl overflow-hidden border border-emerald-900/30 bg-[#14142380] backdrop-blur-sm",children:[(0,L.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(E.A,{className:"w-5 h-5 text-white"}),(0,L.jsx)("h3",{className:"text-base md:text-lg font-bold text-white",children:"\uacf5\ud1b5 \ud560\uc77c"})]}),(null===p||void 0===p?void 0:p())&&(0,L.jsx)(Wt.rA,{variant:"outline",icon:He.A,onClick:()=>ze(null,!1),size:"sm",className:"!bg-white/20 !text-white !border-white/30 hover:!bg-white/30",children:"\uacf5\ud1b5 \ud560\uc77c \ucd94\uac00"})]}),(0,L.jsx)("div",{className:"p-4 md:p-6 bg-[#0a0a12]/50",children:(0,L.jsx)(bt,{tasks:je,isAdmin:null===p||void 0===p?void 0:p(),onEarnCoupon:(e,t,s,a,n)=>Be(e,t,s,a,n),onEditTask:e=>De(T.find(t=>t.id===e),null),onDeleteTask:e=>Oe(e,null),isHandlingTask:ne})})]})]})]})}),"selectJob"===v&&(0,L.jsx)(ts,{availableJobs:A,currentSelectedJobIds:be,onConfirmSelection:_e,onCancel:We}),(null===p||void 0===p?void 0:p())&&(0,L.jsx)(_t,{isAdmin:null===p||void 0===p?void 0:p(),isSuperAdmin:null===m||void 0===m?void 0:m(),userClassCode:null===l||void 0===l?void 0:l.classCode,showAdminSettingsModal:N,setShowAdminSettingsModal:k,adminSelectedMenu:C,setAdminSelectedMenu:S,classCodes:ue,onAddClassCode:qe,onRemoveClassCode:Ge,newGoalAmount:pe,setNewGoalAmount:me,adminCouponValue:ce,setAdminCouponValue:xe,handleSaveAdminSettings:Fe,jobs:A,adminNewJobTitle:_,setAdminNewJobTitle:W,adminEditingJob:R,setAdminEditingJob:O,handleSaveJob:Te,handleDeleteJob:Me,handleEditJob:Ee,commonTasks:T,showAddTaskForm:U,setShowAddTaskForm:J,adminNewTaskName:Y,setAdminNewTaskName:Z,adminNewTaskReward:ee,setAdminNewTaskReward:te,adminNewTaskMaxClicks:se,setAdminNewTaskMaxClicks:ae,adminEditingTask:B,setAdminEditingTask:P,handleSaveTask:Re,handleEditTask:De,handleDeleteTask:Oe,taskFormJobId:F,taskFormIsJobTask:H,handleAddTaskClick:ze}),K&&(null===l||void 0===l?void 0:l.uid)&&(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px",animation:"fadeIn 0.3s ease-out"},onClick:()=>X(!1),children:(0,L.jsxs)("div",{style:{width:"100%",maxWidth:"400px",animation:"slideUp 0.3s ease-out"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("div",{style:{textAlign:"right",marginBottom:"8px"},children:(0,L.jsx)("button",{onClick:()=>X(!1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u2715"})}),(0,L.jsx)(Gt,{userId:l.uid,onClaim:ge}),(0,L.jsx)("div",{style:{textAlign:"center",marginTop:"12px",color:"rgba(255,255,255,0.6)",fontSize:"13px"},children:"\ubc30\uacbd\uc744 \ud130\uce58\ud558\uba74 \ub2eb\ud799\ub2c8\ub2e4"})]})})]})};var as=s(9222),ns=s(8719),is=(s(6353),s(293)),os=s(8164);const ls=["id"],rs=e=>{let{stock:t}=e;if(void 0===t||null===t)return null;let s="";s=t<=0||t<=3?"stock-low":t<=5?"stock-medium":"stock-high";const a=t<=0?"\ud488\uc808":"\uc7ac\uace0(".concat(t,"\uac1c)");return(0,L.jsx)("span",{className:"stock-badge ".concat(s),children:a})},ds=()=>{const{user:e,userDoc:t,isAdmin:s}=(0,i.As)()||{user:null,userDoc:null,isAdmin:()=>!1},{items:n,purchaseItem:l,deleteItem:r,updateItem:d,addItem:c,setAdminPriceIncrease:x,adminPriceIncreasePercentage:p}=(0,ns.wB)()||{items:[],purchaseItem:null,updateItem:null,deleteItem:null,addItem:null,setAdminPriceIncrease:null,adminPriceIncreasePercentage:10},[m,u]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),[N,k]=(0,a.useState)(null),[C,S]=(0,a.useState)(p||10),[A,I]=(0,a.useState)(!1),[T,M]=(0,a.useState)({}),E=s(),z=null===t||void 0===t?void 0:t.classCode;(0,a.useEffect)(()=>{if(n&&Array.isArray(n)){const e=n.map(e=>{var t,s;return(0,o.A)((0,o.A)({},e),{},{initialStock:null!==(t=null!==(s=e.initialStock)&&void 0!==s?s:e.stock)&&void 0!==t?t:10})}).filter(e=>!1!==(null===e||void 0===e?void 0:e.available));u(e);const t={};e.forEach(e=>{t[e.id]=1}),M(t)}else u([])},[n]),(0,a.useEffect)(()=>{S(p||10)},[p]),(0,a.useEffect)(()=>{const e=()=>I(window.innerWidth<=768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const D=(e,t)=>{g({type:e,message:t}),setTimeout(()=>g(null),3e3)},R=s=>{if(s.stock<=0)return"\ud488\uc808";const a=void 0!==(null===t||void 0===t?void 0:t.cash)?t.cash:null===e||void 0===e?void 0:e.cash,n=T[s.id]||1,i=s.price*n;return e&&void 0!==a&&a<i?"\uc794\uc561 \ubd80\uc871":"\uad6c\ub9e4\ud558\uae30"},O=E&&z;return(0,L.jsxs)("div",{className:"page-container ".concat(f&&O?"admin-mode":""),children:[(0,L.jsxs)("div",{className:"page-header-container",children:[(0,L.jsxs)("h2",{className:"page-title",children:[f&&O?"\uad00\ub9ac\uc790 \ud398\uc774\uc9c0":"\uc544\uc774\ud15c \uc0c1\uc810",z&&(0,L.jsxs)("span",{style:{fontSize:"0.7em",marginLeft:"10px",color:"#777"},children:["(\ud559\uae09: ",z,")"]})]}),E&&(0,L.jsx)("button",{onClick:()=>{z?(b(e=>!e),f&&j(null)):D("error","\uad00\ub9ac\uc790\uc758 \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \uad00\ub9ac\uc790 \ud328\ub110\uc744 \uc5f4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"admin-icon-button",title:f?"\uc0c1\uc810 \ubcf4\uae30":"\uad00\ub9ac\uc790 \uae30\ub2a5",children:f&&O?"\ud83d\uded2":"\u2699\ufe0f"})]}),h&&(0,L.jsx)("div",{className:"notification ".concat("success"===h.type?"bg-green-100 text-green-800":"error"===h.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:h.message}),v&&O&&(0,L.jsx)("div",{className:"delete-confirm-modal",children:(0,L.jsxs)("div",{className:"delete-confirm-content",children:[(0,L.jsx)("h3",{children:"\uc544\uc774\ud15c \uc0ad\uc81c \ud655\uc778"}),(0,L.jsxs)("p",{children:[(0,L.jsx)("strong",{children:null===N||void 0===N?void 0:N.name})," \uc544\uc774\ud15c\uc744 \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? ",(0,L.jsx)("br",{}),"\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,L.jsxs)("div",{className:"delete-confirm-buttons",children:[(0,L.jsx)("button",{onClick:async()=>{if(r&&N&&z)try{await r(N.id),D("success","".concat(N.name," \uc0ad\uc81c \uc644\ub8cc"))}catch(e){console.error("\uc544\uc774\ud15c \uc0ad\uc81c \uc911 \uc624\ub958:",e),D("error","\uc544\uc774\ud15c \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{w(!1),k(null)}else D("error","\uc0ad\uc81c \uae30\ub2a5 \uc624\ub958 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c")},className:"delete-confirm-button",children:"\uc0ad\uc81c"}),(0,L.jsx)("button",{onClick:()=>{w(!1),k(null)},className:"delete-cancel-button",children:"\ucde8\uc18c"})]})]})}),f&&O?(0,L.jsx)("div",{className:"admin-panel-full-container",children:(0,L.jsx)(os.default,{classCode:z,editingItemFromStore:y,onAddItem:async e=>{if(!c||!z)return D("error","\uc544\uc774\ud15c \ucd94\uac00 \uae30\ub2a5 \uc0ac\uc6a9 \ubd88\uac00 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c"),!1;try{const t=await c(e);return t.success?(D("success","".concat(e.name," \ucd94\uac00 \uc644\ub8cc")),!0):(D("error",t.message||"\uc544\uc774\ud15c \ucd94\uac00 \uc2e4\ud328"),!1)}catch(t){return console.error("\uc544\uc774\ud15c \ucd94\uac00 \uc911 \uc624\ub958:",t),D("error","\uc544\uc774\ud15c \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),!1}},onUpdateItem:async e=>{if(!d||!z)return D("error","\uc544\uc774\ud15c \uc5c5\ub370\uc774\ud2b8 \uae30\ub2a5 \uc0ac\uc6a9 \ubd88\uac00 \ub610\ub294 \ud559\uae09 \ucf54\ub4dc \uc5c6\uc74c"),!1;try{const{id:t}=e,s=(0,as.A)(e,ls);if(!t)return D("error","\uc5c5\ub370\uc774\ud2b8\ud560 \uc544\uc774\ud15c\uc758 ID\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),!1;const a=await d(t,s);return a.success?(D("success","".concat(e.name," \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc")),!0):(D("error",a.message||"\uc544\uc774\ud15c \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328"),!1)}catch(t){return console.error("\uc544\uc774\ud15c \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958:",t),D("error","\uc544\uc774\ud15c \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),!1}},onClose:()=>{b(!1),j(null)}})}):(0,L.jsxs)(L.Fragment,{children:[!e&&(0,L.jsx)(is.A,{}),e&&(z?m.length>0?(0,L.jsx)("div",{className:"shop-content",children:(0,L.jsxs)("div",{className:"content-card-section",children:[(0,L.jsx)("h3",{className:"section-title",children:"\ud310\ub9e4 \uc544\uc774\ud15c"}),(0,L.jsx)("div",{className:"items-grid",children:m.map(s=>{var a;return(0,L.jsx)("div",{className:"store-item-card shop-item-card compact-card",children:(0,L.jsxs)("div",{className:"item-content",children:[(0,L.jsxs)("div",{className:"item-header-compact",children:[(0,L.jsx)("h3",{className:"item-name-compact",children:s.name}),(0,L.jsx)(rs,{stock:s.stock})]}),s.description&&s.description.trim()&&(0,L.jsx)("p",{className:"item-description-compact",children:s.description}),(0,L.jsxs)("div",{className:"item-actions-primary ".concat(A?"flex-col":""),children:[(0,L.jsxs)("span",{className:"item-price",children:[(null===(a=s.price)||void 0===a?void 0:a.toLocaleString())||0," \uc6d0"]}),(0,L.jsxs)("div",{className:"quantity-and-buy-container",children:[(0,L.jsx)("input",{type:"number",min:"1",max:s.stock,value:T[s.id]||1,onChange:e=>((e,t)=>{const s=m.find(t=>t.id===e);if(!s)return;let a=parseInt(t,10);(isNaN(a)||a<1)&&(a=1),a>s.stock&&(a=s.stock),M(t=>(0,o.A)((0,o.A)({},t),{},{[e]:a}))})(s.id,e.target.value),className:"quantity-input",disabled:s.stock<=0}),(0,L.jsx)("button",{onClick:()=>(async s=>{if(!s||s.stock<=0)return D("error","\uc7ac\uace0 \uc5c6\uc74c");if(!e||!z)return D("error","\ub85c\uadf8\uc778 \ub610\ub294 \ud559\uae09 \uc815\ubcf4 \ud544\uc694");const a=T[s.id]||1,n=void 0!==(null===t||void 0===t?void 0:t.cash)?t.cash:null===e||void 0===e?void 0:e.cash;if(void 0===n)return D("error","\uc794\uc561 \uc815\ubcf4 \uc624\ub958");if(n<s.price*a)return D("error","\uc794\uc561 \ubd80\uc871");if(!l)return D("error","\uad6c\ub9e4 \uae30\ub2a5 \uc624\ub958");try{const e=await l(s.id,a);e.success?D("success","".concat(s.name," ").concat(a,"\uac1c \uad6c\ub9e4 \uc644\ub8cc!")):D("error",e.message||"\uad6c\ub9e4\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.")}catch(i){console.error("\uad6c\ub9e4 \ucc98\ub9ac \uc911 \uc624\ub958:",i),D("error",i.message||"\uad6c\ub9e4 \uc911 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})(s),className:"buy-item-button ".concat(A?"w-full":""),disabled:!e||s.stock<=0||(void 0!==(null===t||void 0===t?void 0:t.cash)?t.cash:null===e||void 0===e?void 0:e.cash)<s.price*(T[s.id]||1),children:R(s)})]})]}),E&&z&&(0,L.jsxs)("div",{className:"item-actions-admin",children:[(0,L.jsxs)("button",{onClick:()=>(e=>{j((0,o.A)({},e)),b(!0)})(s),className:"edit-item-button",title:"\uc544\uc774\ud15c \uc218\uc815",children:["\uc218\uc815",(0,L.jsx)("span",{className:"admin-button-icon",children:"\u270f\ufe0f"})]}),(0,L.jsxs)("button",{onClick:()=>(e=>{k(e),w(!0)})(s),className:"delete-item-button",title:"\uc544\uc774\ud15c \uc0ad\uc81c",children:["\uc0ad\uc81c",(0,L.jsx)("span",{className:"admin-button-icon",children:"\ud83d\uddd1\ufe0f"})]})]})]})},s.id)})})]})}):(0,L.jsxs)("div",{className:"empty-message",style:{padding:"20px",textAlign:"center"},children:[(0,L.jsx)("p",{children:"\ud310\ub9e4 \uc911\uc778 \uc544\uc774\ud15c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),E&&z&&(0,L.jsx)("p",{children:"\uad00\ub9ac\uc790 \uae30\ub2a5\uc744 \ud1b5\ud574 \uc544\uc774\ud15c\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}):(0,L.jsx)("div",{className:"empty-message",style:{padding:"20px",textAlign:"center",color:"red"},children:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc5b4 \uc0c1\uc810 \uae30\ub2a5\uc744 \uc774\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."}))]})]})};s(5173);const cs=3e5,xs=function(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs)-(Date.now()-e);if(t<=0)return"\ub9cc\ub8cc\ub428";const s=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3);let i="";return s>0&&(i+="".concat(s,"\uc2dc\uac04 ")),(a>0||s>0)&&(i+="".concat(a,"\ubd84 ")),i+="".concat(n,"\ucd08 \ub0a8\uc74c"),i.trim()},ps=e=>{let{quantity:t}=e,s="";return s=t>10?"quantity-high":t>5?"quantity-medium":"quantity-low",(0,L.jsxs)("span",{className:"quantity-badge ".concat(s),children:["\xd7",t]})},ms=()=>{const{user:e,userDoc:t,users:s,classmates:l}=(0,i.As)()||{},{userItems:r,useItem:d,listItemForSale:c,refreshData:x,updateLocalUserItems:p}=(0,ns.wB)()||{userItems:[],useItem:null,listItemForSale:null,refreshData:null,updateLocalUserItems:null},m=(0,n.Zp)(),[u,h]=(0,a.useState)(null),g=(e,t)=>{h({type:e,message:t}),setTimeout(()=>h(null),3e3)},f=(0,a.useMemo)(()=>{if(!r||0===r.length)return[];const e=new Map;return r.forEach(t=>{if(!t||!t.itemId||"number"!==typeof t.quantity||t.quantity<=0)return;const s=t.itemId;if(e.has(s)){const a=e.get(s);a.totalQuantity+=t.quantity,a.sourceDocs.push(t),t.name&&!a.displayInfo.name&&(a.displayInfo.name=t.name),t.icon&&!a.displayInfo.icon&&(a.displayInfo.icon=t.icon),t.description&&!a.displayInfo.description&&(a.displayInfo.description=t.description)}else e.set(s,{displayInfo:{itemId:t.itemId,name:t.name||"\uc54c \uc218 \uc5c6\ub294 \uc544\uc774\ud15c",icon:t.icon||"\ud83d\udd2e",description:t.description||"",type:t.type||"general",price:t.price||0,durationMs:t.durationMs||cs},totalQuantity:t.quantity,sourceDocs:[t]})}),Array.from(e.values()).sort((e,t)=>e.displayInfo.name.localeCompare(t.displayInfo.name))},[r]),[b,y]=(0,a.useState)(()=>{try{const t=localStorage.getItem("recentlyUsedItems_".concat((null===e||void 0===e?void 0:e.uid)||"guest"));return t?JSON.parse(t):{}}catch(t){return{}}});(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.uid&&localStorage.setItem("recentlyUsedItems_".concat(e.uid),JSON.stringify(b))},[b,null===e||void 0===e?void 0:e.uid]),(0,a.useEffect)(()=>{const e=setInterval(()=>{y(e=>{let t=!1;const s=(0,o.A)({},e),a=Date.now();return Object.keys(s).forEach(e=>{var n;const i=s[e],o=(null===(n=i.itemDetails)||void 0===n?void 0:n.durationMs)||cs;a-i.usedTimestamp>o&&(delete s[e],t=!0)}),t?s:e})},1e3);return()=>clearInterval(e)},[]);const[j,v]=(0,a.useState)({isOpen:!1,item:null,quantity:1}),[w,N]=(0,a.useState)({isOpen:!1,item:null}),[k,C]=(0,a.useState)(""),[S,A]=(0,a.useState)(1),[I,T]=(0,a.useState)(!1),[M,E]=(0,a.useState)(!1),[z,D]=(0,a.useState)({isOpen:!1,item:null,quantity:1,price:0}),R=()=>{v({isOpen:!1,item:null,quantity:1})},O=()=>{N({isOpen:!1,item:null})},_=()=>{D({isOpen:!1,item:null,quantity:1,price:0})},W=w.isOpen?w.item:null;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"page-container relative",children:[(0,L.jsx)("h2",{className:"page-title",children:"\ub0b4 \uc544\uc774\ud15c \uad00\ub9ac"}),!e&&(0,L.jsx)(is.A,{}),u&&(0,L.jsx)("div",{className:"notification bg-".concat(u.type,"-100"),children:u.message}),e&&(0,L.jsxs)(L.Fragment,{children:[Object.keys(b).length>0&&(0,L.jsxs)("div",{className:"content-card-section",children:[(0,L.jsx)("h3",{className:"section-title",children:"\uc0ac\uc6a9 \uc911\uc778 \uc544\uc774\ud15c"}),(0,L.jsx)("div",{className:"items-grid",children:Object.entries(b).map(e=>{let[t,s]=e;return(0,L.jsx)("div",{className:"store-item-card active-item-card",children:(0,L.jsxs)("div",{className:"item-content",children:[(0,L.jsxs)("div",{className:"my-item-header",children:[(0,L.jsx)("div",{className:"item-icon-group",children:(0,L.jsx)("div",{className:"item-icon",children:s.itemDetails.icon||"\u2728"})}),(0,L.jsxs)("div",{className:"item-info",children:[(0,L.jsx)("h3",{className:"item-name",children:s.itemDetails.name}),(0,L.jsx)("p",{className:"timer-text",children:xs(s.usedTimestamp,s.itemDetails.durationMs)})]})]}),(0,L.jsx)("div",{className:"my-item-actions",children:(0,L.jsx)("button",{className:"stop-using-button",onClick:()=>(e=>{y(t=>{const s=(0,o.A)({},t);return delete s[e],s}),g("info","\uc544\uc774\ud15c \uc0ac\uc6a9\uc744 \uc911\uc9c0\ud588\uc2b5\ub2c8\ub2e4.")})(t),children:"\uc0ac\uc6a9 \uc911\uc9c0"})})]})},t)})})]}),(0,L.jsxs)("div",{className:"content-card-section",children:[(0,L.jsx)("h3",{className:"section-title",children:"\ubcf4\uc720 \uc544\uc774\ud15c"}),f.length>0?(0,L.jsx)("div",{className:"items-grid",children:f.map(t=>(0,L.jsx)("div",{className:"store-item-card compact-myitem-card",children:(0,L.jsxs)("div",{className:"item-content",children:[(0,L.jsxs)("div",{className:"my-item-header-compact",children:[(0,L.jsx)("h3",{className:"my-item-name-compact",children:t.displayInfo.name}),(0,L.jsx)(ps,{quantity:t.totalQuantity})]}),t.displayInfo.description&&t.displayInfo.description.trim()&&(0,L.jsx)("p",{className:"my-item-description-compact",children:t.displayInfo.description}),(0,L.jsxs)("div",{className:"my-item-actions",children:[(0,L.jsx)("button",{className:"use-item-button",onClick:()=>{(t=>{e?!t||t.totalQuantity<=0?g("error","\uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc544\uc774\ud15c\uc774 \uc544\ub2d9\ub2c8\ub2e4."):v({isOpen:!0,item:t,quantity:1}):g("error","\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")})(t)},disabled:M,children:"\uc0ac\uc6a9\ud558\uae30"}),(0,L.jsx)("button",{className:"gift-item-button",onClick:()=>{(t=>{e?l&&0!==l.length?!t||t.totalQuantity<=0?g("error","\uc120\ubb3c\ud560 \uc544\uc774\ud15c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."):(C(""),A(1),N({isOpen:!0,item:t})):g("error","\uc120\ubb3c\ud560 \uce5c\uad6c \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):g("error","\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")})(t)},disabled:!l||0===l.length||M,children:M?"\ub3d9\uae30\ud654 \uc911":"\uc120\ubb3c\ud558\uae30"}),(0,L.jsx)("button",{className:"sell-to-market-button",onClick:()=>{(t=>{if(!e)return void g("error","\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(!t||t.totalQuantity<=0)return void g("error","\ud310\ub9e4\ud560 \uc544\uc774\ud15c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!c)return void g("error","\ud310\ub9e4 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const s=t.displayInfo.price?Math.max(1,Math.round(.8*t.displayInfo.price)):100;D({isOpen:!0,item:t,quantity:1,price:s})})(t)},disabled:M,children:"\uc2dc\uc7a5\uc5d0 \ud314\uae30"})]})]})},t.displayInfo.itemId))}):(0,L.jsx)("div",{className:"empty-message",children:(0,L.jsx)("p",{children:"\ubcf4\uc720 \uc911\uc778 \uc544\uc774\ud15c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})]})]}),j.isOpen&&j.item&&(0,L.jsx)("div",{className:"myitems-modal-overlay",onClick:e=>{e.target===e.currentTarget&&R()},children:(0,L.jsxs)("div",{className:"myitems-modal-container",children:[(0,L.jsxs)("div",{className:"myitems-modal-header",children:[(0,L.jsxs)("h3",{children:[j.item.displayInfo.name," \uc0ac\uc6a9\ud558\uae30"]}),(0,L.jsx)("button",{onClick:R,className:"myitems-close-button",children:"\u2715"})]}),(0,L.jsx)("div",{className:"myitems-modal-body",children:(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsxs)("label",{htmlFor:"useQuantity",children:["\uc0ac\uc6a9\ud560 \uc218\ub7c9: (\ucd5c\ub300 ",j.item.totalQuantity,"\uac1c)"]}),(0,L.jsxs)("div",{className:"quantity-controls",children:[(0,L.jsx)("button",{onClick:()=>v(e=>(0,o.A)((0,o.A)({},e),{},{quantity:Math.max(1,e.quantity-1)})),disabled:j.quantity<=1,children:"-"}),(0,L.jsx)("input",{id:"useQuantity",type:"number",min:"1",max:j.item.totalQuantity,value:j.quantity,onChange:e=>v(t=>(0,o.A)((0,o.A)({},t),{},{quantity:Math.max(1,Math.min(t.item.totalQuantity,parseInt(e.target.value)||1))}))}),(0,L.jsx)("button",{onClick:()=>v(e=>(0,o.A)((0,o.A)({},e),{},{quantity:Math.min(e.item.totalQuantity,e.quantity+1)})),disabled:j.quantity>=j.item.totalQuantity,children:"+"})]})]})}),(0,L.jsxs)("div",{className:"myitems-modal-footer",children:[(0,L.jsx)("button",{onClick:R,className:"button-secondary",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{const{item:e,quantity:t}=j;if(!e||!t||t<=0)g("error","\uc0ac\uc6a9\ud560 \uc544\uc774\ud15c \uc815\ubcf4\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");else if(e.totalQuantity<t)g("error","\ubcf4\uc720 \uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");else try{let s=t;const a=[],n=[...e.sourceDocs].sort((e,t)=>e.quantity-t.quantity);for(const e of n){if(s<=0)break;const t=Math.min(e.quantity,s),n=await d(e.id,t);if(a.push(n),!n.success)throw new Error(n.message||"\uc544\uc774\ud15c \uc0ac\uc6a9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4 (".concat(e.id,")"));s-=t}if(s>0)throw new Error("\uc694\uccad\ud55c \uc218\ub7c9\uc744 \ubaa8\ub450 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. (\ubd80\uc871\ud55c \uc218\ub7c9: ".concat(s,")"));g("success","".concat(e.displayInfo.name," ").concat(t,"\uac1c\ub97c \uc0ac\uc6a9\ud588\uc2b5\ub2c8\ub2e4.")),R(),y(t=>(0,o.A)((0,o.A)({},t),{},{[e.displayInfo.itemId]:{usedTimestamp:Date.now(),itemDetails:{name:e.displayInfo.name,icon:e.displayInfo.icon,durationMs:e.displayInfo.durationMs||cs}}}))}catch(s){g("error","\uc544\uc774\ud15c \uc0ac\uc6a9 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(s.message))}},className:"button-primary",children:"\uc0ac\uc6a9\ud558\uae30"})]})]})}),w.isOpen&&W&&(0,L.jsx)("div",{className:"myitems-modal-overlay",onClick:e=>{e.target===e.currentTarget&&O()},children:(0,L.jsxs)("div",{className:"myitems-modal-container",children:[(0,L.jsxs)("div",{className:"myitems-modal-header",children:[(0,L.jsxs)("h3",{children:[W.displayInfo.name||"\uc544\uc774\ud15c"," \uc120\ubb3c\ud558\uae30"]}),(0,L.jsx)("button",{onClick:O,className:"myitems-close-button",children:"\u2715"})]}),(0,L.jsxs)("div",{className:"myitems-modal-body",children:[(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"giftRecipient",children:"\uc120\ubb3c \ubc1b\uc744 \uce5c\uad6c:"}),(0,L.jsxs)("select",{id:"giftRecipient",value:k,onChange:e=>C(e.target.value),className:"form-select",children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"-- \uce5c\uad6c\ub97c \uc120\ud0dd\ud558\uc138\uc694 --"}),l.map(e=>(0,L.jsxs)("option",{value:e.uid||e.id,children:[e.name," (",e.nickname,")"]},e.uid||e.id))]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsxs)("label",{htmlFor:"giftQuantity",children:["\uc120\ubb3c\ud560 \uc218\ub7c9: (\ucd5c\ub300 ",W.totalQuantity,"\uac1c)"]}),(0,L.jsxs)("div",{className:"quantity-controls",children:[(0,L.jsx)("button",{onClick:()=>A(e=>Math.max(1,e-1)),disabled:S<=1,children:"-"}),(0,L.jsx)("input",{id:"giftQuantity",type:"number",min:"1",max:W.totalQuantity,value:S,onChange:e=>A(Math.max(1,Math.min(W.totalQuantity,parseInt(e.target.value)||1)))}),(0,L.jsx)("button",{onClick:()=>A(e=>Math.min(W.totalQuantity,e+1)),disabled:S>=W.totalQuantity,children:"+"})]})]})]}),(0,L.jsxs)("div",{className:"myitems-modal-footer",children:[(0,L.jsx)("button",{onClick:O,className:"button-secondary",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(I)return;const{item:s}=w;if(!e||!k||!s)return console.error("[MyItems] \uc120\ubb3c \uc815\ubcf4 \uc624\ub958:",{user:!!e,giftRecipientUid:k,group:!!s}),void g("error","\uc120\ubb3c \uc815\ubcf4\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");const a=Number(S)||1;if(a<=0||a>s.totalQuantity)return console.error("[MyItems] \uc120\ubb3c \uc218\ub7c9 \uc624\ub958:",{quantity:a,totalQuantity:s.totalQuantity}),void g("error","\uc120\ubb3c \uc218\ub7c9\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");const n=l.find(e=>(e.uid||e.id)===k),i=n?n.name:"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790";let d;console.log("[MyItems] \uc120\ubb3c \uc2dc\uc791:",{"\uc544\uc774\ud15c":s.displayInfo.name,"\uc218\ub7c9":a,"\ubcf4\ub0b4\ub294\uc0ac\ub78c":(null===t||void 0===t?void 0:t.name)||e.uid,"\ubc1b\ub294\uc0ac\ub78c":i,"\ubc1b\ub294\uc0ac\ub78cUID":k}),T(!0);try{const t=(0,G.rJ)(G.db,"users",e.uid,"inventory"),n=await(0,G.GG)(t),l=n.docs.map(e=>({id:e.id,itemId:e.data().itemId,name:e.data().name,quantity:e.data().quantity}));console.log("[MyItems] \ud83d\udd0d \uc2e4\uc81c inventory \uceec\ub809\uc158 \uc804\uccb4 \uc870\ud68c:"),console.log("\ucd1d\ubb38\uc11c\uc218:",n.size),console.log("\ubb38\uc11c\ub4e4:",l);const c={};l.forEach(e=>{const t=e.itemId||e.id;c[t]||(c[t]=[]),c[t].push(e.id)}),console.log("[MyItems] itemId\ubcc4 \uadf8\ub8f9:",c);const m=s.sourceDocs.map(e=>e.id);console.log("[MyItems] \uce90\uc2dc\ub41c \ubb38\uc11c ID \ubaa9\ub85d:",m);const u=[];let h=0;for(const s of m){const t=(0,G.EW)(G.db,"users",e.uid,"inventory",s),a=await(0,G.x7)(t);if(a.exists()){const e=a.data();u.push((0,o.A)({id:a.id},e)),h+=e.quantity||0,console.log("[MyItems] \u2705 \ubb38\uc11c \ubc1c\uacac:",{id:a.id,quantity:e.quantity})}else console.warn("[MyItems] \u26a0\ufe0f \ubb38\uc11c \uc5c6\uc74c:",s)}if(console.log("[MyItems] \ubcf4\ub0b4\ub294 \uc0ac\ub78c \uc778\ubca4\ud1a0\ub9ac \uc2e4\uc81c \uc870\ud68c \uc644\ub8cc:",{"\uce90\uc2dc\ubb38\uc11c\uc218":s.sourceDocs.length,"\uc2e4\uc81c\ubb38\uc11c\uc218":u.length,"\uc2e4\uc81c\ucd1d\uc218\ub7c9":h}),0===u.length)throw new Error("\ubcf4\uc720 \uc911\uc778 \uc544\uc774\ud15c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud574\uc8fc\uc138\uc694.");if(h<a)throw new Error("\uc544\uc774\ud15c \uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(a,", \uc2e4\uc81c \ubcf4\uc720: ").concat(h,")"));const f=(0,G.rJ)(G.db,"users",k,"inventory"),b=(0,G.P)(f,(0,G._M)("itemId","==",s.displayInfo.itemId)),y=await(0,G.GG)(b),j=y.empty?null:y.docs[0].ref;console.log("[MyItems] \ubc1b\ub294 \uc0ac\ub78c \uc778\ubca4\ud1a0\ub9ac \uc870\ud68c (\ud2b8\ub79c\uc7ad\uc158 \uc678\ubd80):",{"\uae30\uc874\uc544\uc774\ud15c\uc874\uc7ac":!y.empty,"\ubb38\uc11c\uc218":y.size}),d=[...r];const v=[];let w=a;for(const e of r)if(e.itemId===s.displayInfo.itemId&&w>0){const t=Math.min(e.quantity,w),s=e.quantity-t;s>0&&v.push((0,o.A)((0,o.A)({},e),{},{quantity:s})),w-=t}else v.push(e);p&&p(v),await(0,G.c4)(G.db,async t=>{const n=[];for(const s of u){const a=(0,G.EW)(G.db,"users",e.uid,"inventory",s.id),i=await t.get(a);if(!i.exists())throw console.error("[MyItems] \u274c \ud2b8\ub79c\uc7ad\uc158 \uc911 \uc544\uc774\ud15c \ubb38\uc11c\uac00 \uc0ac\ub77c\uc9d0:",s.id),new Error("\ud2b8\ub79c\uc7ad\uc158 \uc911 \uc544\uc774\ud15c\uc774 \uc0ac\ub77c\uc84c\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");const o=i.data().quantity||0;if(o<=0)throw console.error("[MyItems] \u274c \ud2b8\ub79c\uc7ad\uc158 \uc911 \uc544\uc774\ud15c \uc218\ub7c9\uc774 0:",s.id),new Error("\ud2b8\ub79c\uc7ad\uc158 \uc911 \uc544\uc774\ud15c \uc218\ub7c9\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");n.push({ref:a,snap:i,quantity:o})}let i=null,o=0;if(j){i=j;const e=await t.get(i);e.exists()?(o=e.data().quantity||0,console.log("[MyItems] \ubc1b\ub294 \uc0ac\ub78c \uae30\uc874 \uc544\uc774\ud15c \ubc1c\uacac:",{"\ubb38\uc11cID":i.id,"\ud604\uc7ac\uc218\ub7c9":o})):(console.warn("[MyItems] \u26a0\ufe0f \ubc1b\ub294 \uc0ac\ub78c\uc758 \uae30\uc874 \uc544\uc774\ud15c\uc774 \uc0ac\ub77c\uc9d0, \uc0c8\ub85c \uc0dd\uc131\ud569\ub2c8\ub2e4."),i=null)}else console.log("[MyItems] \ubc1b\ub294 \uc0ac\ub78c\uc5d0\uac8c \uc0c8 \uc544\uc774\ud15c \uc0dd\uc131 \uc608\uc815");let l=a,r=0;for(const{ref:e,quantity:s}of n){if(l<=0)break;const a=Math.min(s,l),n=s-a;console.log("[MyItems] \uc544\uc774\ud15c \ucc28\uac10:",{"\ubb38\uc11cID":e.id,"\uae30\uc874\uc218\ub7c9":s,"\ucc28\uac10\uc218\ub7c9":a,"\ub0a8\uc740\uc218\ub7c9":n}),n<=0?t.delete(e):t.update(e,{quantity:n}),l-=a,r+=a}if(r<a)throw console.error("[MyItems] \ucc98\ub9ac\ub41c \uc218\ub7c9 \ubd80\uc871:",{"\uc694\uccad":a,"\ucc98\ub9ac\ub428":r}),new Error("\uc544\uc774\ud15c \uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(a,", \uc2e4\uc81c \ubcf4\uc720: ").concat(r,")"));if(i)console.log("[MyItems] \ubc1b\ub294 \uc0ac\ub78c \uc544\uc774\ud15c \uc5c5\ub370\uc774\ud2b8 (\uae30\uc874 \uc544\uc774\ud15c\uc5d0 \ucd94\uac00):",{"\uae30\uc874\uc218\ub7c9":o,"\ucd94\uac00\uc218\ub7c9":r,"\ucd5c\uc885\uc218\ub7c9":o+r}),t.update(i,{quantity:o+r,updatedAt:(0,G.O5)()});else{console.log("[MyItems] \ubc1b\ub294 \uc0ac\ub78c \uc544\uc774\ud15c \uc0dd\uc131 (\uc0c8 \uc544\uc774\ud15c):",{"\uc218\ub7c9":r});const e=(0,G.EW)(f);t.set(e,{itemId:s.displayInfo.itemId,name:s.displayInfo.name,icon:s.displayInfo.icon,description:s.displayInfo.description,type:s.displayInfo.type,quantity:r,receivedAt:(0,G.O5)(),updatedAt:(0,G.O5)()})}}),console.log("[MyItems] \u2705 \uc120\ubb3c \ud2b8\ub79c\uc7ad\uc158 \uc644\ub8cc"),g("success","".concat(i,"\ub2d8\uc5d0\uac8c ").concat(s.displayInfo.name," ").concat(a,"\uac1c\ub97c \uc120\ubb3c\ud588\uc2b5\ub2c8\ub2e4.")),O(),setTimeout(()=>{x&&x()},2e3)}catch(c){if(console.error("[MyItems] \uc120\ubb3c\ud558\uae30 \uc2e4\ud328:",c),p&&d&&(console.log("[MyItems] \ub099\uad00\uc801 \uc5c5\ub370\uc774\ud2b8 \ub864\ubc31 - \uc6d0\ub798 \uc0c1\ud0dc\ub85c \ubcf5\uc6d0"),p(d)),g("error","\uc120\ubb3c\ud558\uae30 \uc2e4\ud328: ".concat(c.message)),x){console.log("[MyItems] \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68 \uc2dc\uc791");try{const e=x();e&&"function"===typeof e.then&&await e,console.log("[MyItems] \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc")}catch(m){console.error("[MyItems] \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68 \uc2e4\ud328:",m)}}}finally{T(!1)}},className:"button-primary",disabled:I||M,children:I?"\uc120\ubb3c\ud558\ub294 \uc911...":M?"\ub3d9\uae30\ud654 \uc911...":"\uc120\ubb3c\ud558\uae30"})]})]})}),z.isOpen&&z.item&&(0,L.jsx)("div",{className:"myitems-modal-overlay",onClick:e=>{e.target===e.currentTarget&&_()},children:(0,L.jsxs)("div",{className:"myitems-modal-container",children:[(0,L.jsxs)("div",{className:"myitems-modal-header",children:[(0,L.jsxs)("h3",{children:["'",z.item.displayInfo.name,"' \uc2dc\uc7a5\uc5d0 \ud310\ub9e4\ud558\uae30"]}),(0,L.jsx)("button",{onClick:_,className:"myitems-close-button",children:"\u2715"})]}),(0,L.jsxs)("div",{className:"myitems-modal-body",children:[(0,L.jsxs)("div",{className:"item-preview-simple",children:[(0,L.jsx)("span",{className:"item-icon-small",children:z.item.displayInfo.icon}),(0,L.jsxs)("span",{children:[z.item.displayInfo.name," (\ubcf4\uc720: ",z.item.totalQuantity,"\uac1c)"]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsxs)("label",{htmlFor:"sellToMarketQuantity",children:["\ud310\ub9e4 \uc218\ub7c9 (\ucd5c\ub300: ",z.item.totalQuantity,"\uac1c):"]}),(0,L.jsx)("input",{type:"number",id:"sellToMarketQuantity",value:z.quantity,onChange:e=>(e=>{var t;const s=(null===(t=z.item)||void 0===t?void 0:t.totalQuantity)||1,a=Math.max(1,Math.min(s,parseInt(e)||1));D(e=>(0,o.A)((0,o.A)({},e),{},{quantity:a}))})(e.target.value),min:"1",max:z.item.totalQuantity})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"sellToMarketPrice",children:"\uac1c\ub2f9 \ud310\ub9e4 \uac00\uaca9 (\uc6d0):"}),(0,L.jsx)("input",{type:"number",id:"sellToMarketPrice",value:z.price,onChange:e=>(e=>{const t=Math.max(1,parseInt(e)||1);D(e=>(0,o.A)((0,o.A)({},e),{},{price:t}))})(e.target.value),min:"1"})]}),(0,L.jsxs)("div",{className:"total-price-preview",children:["\uc608\uc0c1 \ud310\ub9e4 \ucd1d\uc561: ",(0,L.jsxs)("strong",{children:[(z.price*z.quantity).toLocaleString(),"\uc6d0"]})]})]}),(0,L.jsxs)("div",{className:"myitems-modal-footer",children:[(0,L.jsx)("button",{onClick:_,className:"button-secondary",children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{const{item:t,quantity:s,price:a}=z;if(t&&s&&a)try{const n=t.sourceDocs.map(e=>e.id),i=[];let l=0;for(const t of n){const s=(0,G.EW)(G.db,"users",e.uid,"inventory",t),a=await(0,G.x7)(s);if(a.exists()){const e=a.data();i.push((0,o.A)({id:a.id},e)),l+=e.quantity||0}}if(console.log("[MyItems] \uc2dc\uc7a5\uc5d0 \ud314\uae30 - \uc2e4\uc81c \uc870\ud68c:",{"\uc694\uccad\uc218\ub7c9":s,"\uc2e4\uc81c\ubcf4\uc720":l,"\ubb38\uc11c\uc218":i.length}),0===i.length)throw new Error("\ud310\ub9e4\ud560 \uc544\uc774\ud15c\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud574\uc8fc\uc138\uc694.");if(l<s)throw new Error("\uc544\uc774\ud15c \uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ".concat(s,", \uc2e4\uc81c \ubcf4\uc720: ").concat(l,")"));let r=s;const d=[...i].sort((e,t)=>e.quantity-t.quantity);for(const t of d){if(r<=0)break;const s=Math.min(t.quantity,r),n={};if(void 0===t.description&&(console.warn("[MyItems] \ub204\ub77d\ub41c description \ud544\ub4dc \uc218\uc815: ".concat(t.id)),n.description=""),void 0===t.icon&&(console.warn("[MyItems] \ub204\ub77d\ub41c icon \ud544\ub4dc \uc218\uc815: ".concat(t.id)),n.icon="\ud83d\udd2e"),void 0===t.type&&(console.warn("[MyItems] \ub204\ub77d\ub41c type \ud544\ub4dc \uc218\uc815: ".concat(t.id)),n.type="general"),Object.keys(n).length>0){const s=(0,G.EW)(G.db,"users",e.uid,"inventory",t.id);await(0,G.mZ)(s,n),Object.assign(t,n)}const i=await c({itemId:t.id,quantity:s,price:a});if(!i.success)throw new Error(i.message||"\uc77c\ubd80 \uc544\uc774\ud15c \ud310\ub9e4 \ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");r-=s}g("success","".concat(t.displayInfo.name," ").concat(s,"\uac1c\ub97c \uc2dc\uc7a5\uc5d0 \ud310\ub9e4 \ub4f1\ub85d\ud588\uc2b5\ub2c8\ub2e4.")),_(),setTimeout(()=>{window.confirm("\uc544\uc774\ud15c \uc2dc\uc7a5\uc73c\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&m("/item-market")},500)}catch(n){console.error("[MyItems] \uc2dc\uc7a5 \ud310\ub9e4 \ub4f1\ub85d \uc2e4\ud328:",n),n.message.includes("\uc544\uc774\ud15c\uc744 \ucc3e\uc744 \uc218 \uc5c6")||n.message.includes("\uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4")?(g("warning","\uc544\uc774\ud15c \uc815\ubcf4\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub370\uc774\ud130\ub97c \ub3d9\uae30\ud654\ud569\ub2c8\ub2e4."),E(!0),x?x().then(()=>{g("success","\ub3d9\uae30\ud654\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),E(!1)}).catch(e=>{console.error("[MyItems] \ub370\uc774\ud130 \ub3d9\uae30\ud654 \uc2e4\ud328:",e),g("error","\ub370\uc774\ud130 \ub3d9\uae30\ud654\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),E(!1)}):(g("error","\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc73c\uba70 \ub370\uc774\ud130\ub97c \uc0c8\ub85c\uace0\uce60 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: ".concat(n.message)),E(!1))):g("error","\uc2dc\uc7a5 \ud310\ub9e4 \ub4f1\ub85d \uc911 \uc624\ub958: ".concat(n.message))}else g("error","\ud310\ub9e4 \uc815\ubcf4\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")},className:"button-primary sell-button",disabled:M,children:M?"\ub3d9\uae30\ud654 \uc911...":"\ud310\ub9e4 \ub4f1\ub85d"})]})]})})]})},us=a.memo(ms);var hs=s(9270);function gs(){const{user:e,userDoc:t,users:s,classmates:n,allClassMembers:l,loading:r,updateUser:d,addCashToUserById:c,deductCash:x,optimisticUpdate:p}=(0,i.As)(),m=null===e||void 0===e?void 0:e.uid,u=(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.displayName)||"\uc0ac\uc6a9\uc790",h=null===t||void 0===t?void 0:t.classCode,[g,f]=(0,a.useState)(!0),b=(0,a.useRef)(!1),[y,j]=((0,a.useRef)({}),(0,a.useState)(0)),[v,w]=(0,a.useState)([]),[N,k]=(0,a.useState)([]),[C,S]=(0,a.useState)([]),[A,I]=(0,a.useState)([]),[T,M]=(0,a.useState)(0),[E,z]=(0,a.useState)([]),[D,R]=(0,a.useState)([]),[O,_]=(0,a.useState)(0),W=((0,G.Qg)(G.Cn,"getUserAssetsData"),(0,G.Qg)(G.Cn,"sellCoupon"),(0,G.Qg)(G.Cn,"giftCoupon"),36e5),B=h?"".concat(h,"_goal"):null,[P,F]=(0,a.useState)(1e3),[Q,H]=(0,a.useState)(1e3);(0,a.useEffect)(()=>{m&&(async()=>{try{const e=(0,G.H9)(G.db,"settings","mainSettings"),t=await(0,G.x7)(e);if(t.exists()){const e=t.data();e.couponValue&&H(Number(e.couponValue))}}catch(e){console.error("[MyAssets] \ucfe0\ud3f0 \uac00\uce58 \uc124\uc815 \ub85c\ub4dc \uc2e4\ud328:",e)}})()},[m]);const[q,U]=(0,a.useState)(0),[J,V]=(0,a.useState)(0),[K,X]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(!1),[se,ae]=(0,a.useState)(!1),[ne,ie]=(0,a.useState)(""),[oe,le]=(0,a.useState)(!1),[re,de]=(0,a.useState)(""),[ce,xe]=(0,a.useState)(""),[pe,me]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[ge,fe]=(0,a.useState)(""),[be,ye]=(0,a.useState)(""),[je,ve]=(0,a.useState)(!1),we=e=>{try{const t=localStorage.getItem("firestore_cache_".concat(e,"_").concat(m));if(t){const{data:e,timestamp:s}=JSON.parse(t);if(Date.now()-s<W)return e}}catch(t){}return null},Ne=(e,t)=>{try{const s={data:t,timestamp:Date.now()};localStorage.setItem("firestore_cache_".concat(e,"_").concat(m),JSON.stringify(s))}catch(s){}},ke=(0,a.useCallback)(async(e,t)=>{try{const s=(0,G.H9)(G.db,"goals",t),a={classCode:e,targetAmount:1e3,progress:0,donations:[],donationCount:0,title:"".concat(e," \ud559\uae09 \ubaa9\ud45c"),description:"".concat(e," \ud559\uae09\uc758 \ucfe0\ud3f0 \ubaa9\ud45c\uc785\ub2c8\ub2e4."),createdAt:(0,G.O5)(),updatedAt:(0,G.O5)(),createdBy:m};await(0,$.c4)(G.db,async e=>{const n=await e.get(s);if(n.exists()){const e=n.data();Ne("goal_".concat(t),e)}else e.set(s,a),Ne("goal_".concat(t),a)})}catch(s){throw s}},[m]),Ce=(0,a.useCallback)(async()=>{if(!B||!h)return;const e="goal_".concat(B),t=we(e);if(t){F(Number(t.targetAmount)||1e3),U(Number(t.progress)||0);const e=Array.isArray(t.donations)?t.donations:[];z(e);const s=e.filter(e=>e.userId===m).reduce((e,t)=>e+t.amount,0);return void V(s)}try{const t=(0,G.H9)(G.db,"goals",B),s=await(0,G.x7)(t);if(s.exists()){const t=s.data();F(Number(t.targetAmount)||1e3),U(Number(t.progress)||0);const a=Array.isArray(t.donations)?t.donations.map(e=>{let t;return t=e.timestamp&&e.timestamp.toDate?e.timestamp.toDate().toISOString():e.timestamp&&e.timestamp.seconds?new Date(1e3*e.timestamp.seconds).toISOString():e.timestampISO?e.timestampISO:"string"===typeof e.timestamp?e.timestamp:(new Date).toISOString(),(0,o.A)((0,o.A)({},e),{},{amount:Number(e.amount)||0,timestamp:t,userId:e.userId||"",userName:e.userName||"\uc54c \uc218 \uc5c6\ub294 \uc0ac\uc6a9\uc790",message:e.message||"",classCode:e.classCode||h})}):[];z(a);const n=a.filter(e=>e.userId===m).reduce((e,t)=>e+t.amount,0);V(n),Ne(e,t)}else console.log("[MyAssets] \ubaa9\ud45c \ubb38\uc11c\uac00 \uc5c6\uc5b4 \uae30\ubcf8\uac12 \uc0dd\uc131"),await ke(h,B)}catch(s){console.error("[MyAssets] \ubaa9\ud45c \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",s)}},[B,h,m,ke,we,Ne]),Se=(0,a.useCallback)(async()=>{if(m&&G.db)if(b.current)console.log("[MyAssets] \u23f8\ufe0f \uc774\ubbf8 \ub85c\ub529 \uc911\uc774\ubbc0\ub85c \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");else{b.current=!0,f(!0);try{const s=(0,G.P)((0,G.rJ)(G.db,"classes",h,"realEstateProperties"),(0,G._M)("owner","==",m),(0,$.AB)(50)),a=(0,G.P)((0,G.rJ)(G.db,"ClassStock",h,"students",m,"realestates"),(0,$.AB)(50)),n=(0,G.P)((0,G.rJ)(G.db,"realEstate"),(0,G._M)("ownerId","==",m),(0,$.AB)(50)),[i,l,r]=await Promise.all([(0,G.GG)(s),(0,G.GG)(a),(0,G.GG)(n)]),d=[];i.forEach(e=>d.push((0,o.A)({id:e.id},e.data()))),l.forEach(e=>d.push((0,o.A)({id:e.id},e.data()))),r.forEach(e=>d.push((0,o.A)({id:e.id},e.data())));const c=(0,G.H9)(G.db,"users",m,"financials","parkingAccount"),x=(0,G.rJ)(G.db,"ClassStock",h,"students",m,"parkingAccounts"),[p,u]=await Promise.all([(0,G.x7)(c),(0,G.GG)(x)]);let g=0;p.exists()&&(g+=p.data().balance||0),u.forEach(e=>{g+=e.data().balance||0}),j(g);const f=(0,G.P)((0,G.rJ)(G.db,"users",m,"products"),(0,$.AB)(50)),b=await(0,G.GG)(f),y=[],v=[],N=[];b.forEach(e=>{var t;const s=(0,o.A)((0,o.A)({id:e.id},e.data()),{},{maturityDate:null!==(t=e.data().maturityDate)&&void 0!==t&&t.toDate?e.data().maturityDate.toDate():e.data().maturityDate});"deposit"===s.type?y.push(s):"savings"===s.type?v.push(s):"loan"===s.type&&N.push(s)}),w(y),k(v),S(N),I(d);let C=[],A=[];try{const e=(0,G.P)((0,G.rJ)(G.db,"activity_logs"),(0,G._M)("classCode","==",h),(0,G._M)("userId","==",m),(0,$.AB)(30));C=(await(0,G.GG)(e)).docs.map(e=>{const t=e.data();return{id:e.id,amount:t.amount||0,description:t.description||t.type||"\uac70\ub798 \ub0b4\uc5ed",timestamp:t.timestamp,type:t.type,couponAmount:t.couponAmount||0,source:"activity_logs"}}).filter(e=>0!==e.amount||0!==e.couponAmount)}catch(e){console.log("[MyAssets] activity_logs \uc870\ud68c \uc2e4\ud328:",e)}try{const e=(0,G.P)((0,G.rJ)(G.db,"users",m,"transactions"),(0,$.AB)(30));A=(await(0,G.GG)(e)).docs.map(e=>{const t=e.data();return{id:e.id,amount:t.amount||0,description:t.description||"\uac70\ub798 \ub0b4\uc5ed",timestamp:t.timestamp||t.createdAt,type:t.type||"transaction",source:"transactions"}}).filter(e=>0!==e.amount)}catch(t){console.log("[MyAssets] transactions \uc870\ud68c \uc2e4\ud328:",t)}const T=[...C,...A];T.sort((e,t)=>{var s,a,n,i;const o=null!==(s=e.timestamp)&&void 0!==s&&s.toDate?e.timestamp.toDate():new Date(1e3*(null===(a=e.timestamp)||void 0===a?void 0:a.seconds)||0);return(null!==(n=t.timestamp)&&void 0!==n&&n.toDate?t.timestamp.toDate():new Date(1e3*(null===(i=t.timestamp)||void 0===i?void 0:i.seconds)||0))-o}),R(T.slice(0,20))}catch(s){console.error("[MyAssets] \ud83d\udea8 \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21 \uc9c1\uc811 \uc870\ud68c \uc2e4\ud328:",s)}finally{f(!1),b.current=!1}}else f(!1)},[m,h]);(0,a.useEffect)(()=>{!r&&e?Se():r||e?r&&f(!0):(f(!1),j(0),S([]),I([]),M(0),V(0),F(1e3),U(0),H(1e3),z([]),R([]))},[r,e]),(0,a.useEffect)(()=>{const e=Number(null===t||void 0===t?void 0:t.cash)||0,s=(Number(null===t||void 0===t?void 0:t.coupons)||0)*Number(Q),a=A.reduce((e,t)=>e+(Number(t.price)||0),0),n=v.reduce((e,t)=>e+(Number(t.balance)||0),0),i=N.reduce((e,t)=>e+(Number(t.balance)||0),0),o=C.reduce((e,t)=>e+(Number(t.remainingPrincipal)||Number(t.balance)||0),0),l=e+s+Number(y)+n+i+a-o;M(l)},[null===t||void 0===t?void 0:t.cash,null===t||void 0===t?void 0:t.coupons,Q,y,v,N,A,C]),(0,a.useEffect)(()=>{X(q>=P&&P>0)},[q,P]),(0,a.useEffect)(()=>{e&&B&&Ce()},[e,B]);const Ae=()=>{const e="myAssets_".concat(m);localStorage.removeItem("firestore_cache_".concat(e,"_").concat(m)),console.log("[MyAssets] \ud83d\udd04 \uce90\uc2dc \uc0ad\uc81c \ubc0f \uac15\uc81c \uc0c8\ub85c\uace0\uce68"),Se()};return r||g?(0,L.jsx)(ga,{}):e?t||r?h||r?(0,L.jsx)("div",{className:"w-full min-h-full",style:{backgroundColor:"#0a0a12"},children:(0,L.jsxs)("div",{className:"w-full px-4 md:px-6 lg:px-8 py-6",children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,L.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#00fff2",borderBottom:"2px solid rgba(0, 255, 242, 0.2)",paddingBottom:"10px",margin:0,textShadow:"0 0 10px rgba(0, 255, 242, 0.3)"},children:"\ub098\uc758 \uc790\uc0b0 \ud604\ud669 \ud83d\udcb3"}),(0,L.jsx)("button",{onClick:Ae,disabled:g,style:{padding:"8px 16px",backgroundColor:"rgba(0, 255, 242, 0.1)",color:"#00fff2",border:"1px solid rgba(0, 255, 242, 0.3)",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",opacity:g?.6:1,transition:"all 0.2s ease"},children:"\ud83d\udd04 \uc0c8\ub85c\uace0\uce68"})]}),(0,L.jsx)(Gt,{userId:m,onClaim:async e=>{try{const s=(0,G.H9)(G.db,"users",m);await(0,G.BN)(s,{cash:(0,G.GV)(e),updatedAt:(0,G.O5)()},{merge:!0}),await(0,hs.Mx)(G.db,{userId:m,userName:u,classCode:h,type:"\uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1",description:"\uc77c\uc77c \ucd9c\uc11d \ubcf4\uc0c1\uc73c\ub85c ".concat(e.toLocaleString(),"\uc6d0 \ud68d\ub4dd"),amount:e,metadata:{rewardType:"daily_streak"}}),p&&p({cash:((null===t||void 0===t?void 0:t.cash)||0)+e}),console.log("Daily reward claimed and added: ".concat(e))}catch(s){console.error("\uc77c\uc77c \ubcf4\uc0c1 \uc9c0\uae09 \uc624\ub958:",s),alert("\ubcf4\uc0c1 \uc9c0\uae09 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}}}),(()=>{const e=Number(null===t||void 0===t?void 0:t.cash)||0,s=Number(null===t||void 0===t?void 0:t.coupons)||0,a=je?D:D.slice(0,5);return(0,L.jsxs)("div",{style:{padding:"0",background:"transparent",marginBottom:"25px"},children:[(0,L.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",padding:"30px",marginBottom:"20px",boxShadow:"0 10px 30px rgba(102, 126, 234, 0.3)",border:"none"},children:[(0,L.jsx)("div",{style:{marginBottom:"10px"},children:(0,L.jsx)("span",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",fontWeight:"500"},children:"\ud83d\udcb0 \ubcf4\uc720 \ud604\uae08"})}),(0,L.jsxs)("div",{style:{fontSize:"42px",fontWeight:"800",color:"#ffffff",letterSpacing:"-1px",marginBottom:"15px",textAlign:"right"},children:[e.toLocaleString()," ",(0,L.jsx)("span",{style:{fontSize:"28px",fontWeight:"600"},children:"\uc6d0"})]}),(0,L.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)("button",{onClick:()=>he(!0),style:{padding:"14px 28px",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#667eea",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"700",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},disabled:g||r,onMouseOver:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)"},onMouseOut:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(0,0,0,0.1)"},children:"\ud83d\udcb8 \uc1a1\uae08\ud558\uae30"})})]}),(0,L.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,L.jsx)("h4",{style:{fontSize:"15px",color:"#e8e8ff",fontWeight:"700",marginBottom:"12px"},children:"\ud83d\udcb3 \ucd5c\uadfc \uc785\ucd9c\uae08 \ub0b4\uc5ed"}),D.length>0?(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map(e=>{let t="\ub0a0\uc9dc \uc5c6\uc74c";try{t=(e=>{try{if(!e)return new Date;if(e instanceof Date)return isNaN(e.getTime())?new Date:e;if(e&&"function"===typeof e.toDate){const t=e.toDate();return isNaN(t.getTime())?new Date:t}if(e&&e.seconds){const t=new Date(1e3*e.seconds);return isNaN(t.getTime())?new Date:t}if("string"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}if("number"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}return new Date}catch(t){return new Date}})(e.timestamp).toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"})}catch(n){t="\uc624\ub298"}const s=Number(e.amount)||0,a=String(e.description)||"\ub0b4\uc5ed \uc5c6\uc74c";return(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px",color:"#a0a0c0",padding:"14px 16px",backgroundColor:s>0?"rgba(5, 150, 105, 0.1)":"rgba(220, 38, 38, 0.1)",border:s>0?"1px solid rgba(5, 150, 105, 0.3)":"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"10px"},children:[(0,L.jsxs)("span",{style:{flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"10px",fontWeight:"500",color:"#e8e8ff"},children:[t," \u2022 ",a]}),(0,L.jsxs)("span",{style:{fontWeight:"700",fontSize:"15px",color:s>0?"#34d399":"#f87171",minWidth:"110px",textAlign:"right"},children:[s>0?"+":"",s.toLocaleString(),"\uc6d0"]})]},e.id||Math.random())})}),D.length>5&&(0,L.jsx)("button",{onClick:()=>ve(!je),style:{width:"100%",marginTop:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.05)",color:"#a0a0c0",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.backgroundColor="#f3f4f6"},onMouseOut:e=>{e.target.style.backgroundColor="#f9fafb"},children:je?"\u25b2 \uc811\uae30":"\u25bc ".concat(D.length-5,"\uac1c \ub354 \ubcf4\uae30")})]}):(0,L.jsx)("div",{style:{fontSize:"13px",color:"#6b7280",textAlign:"center",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"1px dashed rgba(255, 255, 255, 0.1)"},children:"\ucd5c\uadfc \uac70\ub798 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,L.jsxs)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"20px",padding:"25px 30px",marginBottom:"20px",boxShadow:"0 10px 30px rgba(240, 147, 251, 0.3)",border:"none"},children:[(0,L.jsx)("div",{style:{marginBottom:"8px"},children:(0,L.jsx)("span",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",fontWeight:"500"},children:"\ud83d\udcca \ucd1d \uc21c\uc790\uc0b0"})}),(0,L.jsxs)("div",{style:{fontSize:"38px",fontWeight:"800",color:"#ffffff",letterSpacing:"-1px",textAlign:"right"},children:[Number(T).toLocaleString()," ",(0,L.jsx)("span",{style:{fontSize:"24px",fontWeight:"600"},children:"\uc6d0"})]}),(0,L.jsx)("p",{style:{marginTop:"8px",fontSize:"12px",color:"rgba(255,255,255,0.8)",margin:"8px 0 0 0"},children:"\ud604\uae08 + \ucfe0\ud3f0\uac00\uce58 + \ud30c\ud0b9\ud1b5\uc7a5 + \uc608\uae08 + \uc801\uae08 + \ubd80\ub3d9\uc0b0 - \ub300\ucd9c"})]}),(0,L.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,L.jsx)("h4",{style:{fontSize:"15px",color:"#e8e8ff",fontWeight:"700",marginBottom:"12px"},children:"\ud83c\udd7f\ufe0f \ud30c\ud0b9\ud1b5\uc7a5"}),(0,L.jsx)("div",{style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",borderRadius:"14px",padding:"20px",border:"none",boxShadow:"0 4px 15px rgba(6, 182, 212, 0.2)"},children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)("span",{style:{color:"rgba(255,255,255,0.9)",fontWeight:"500",fontSize:"14px"},children:"\uc794\uc561"}),(0,L.jsxs)("span",{style:{fontWeight:"800",fontSize:"26px",color:"#ffffff",letterSpacing:"-0.5px",textAlign:"right",display:"block"},children:[Number(y).toLocaleString(),(0,L.jsx)("span",{style:{fontSize:"18px",fontWeight:"600"},children:"\uc6d0"})]})]})}),(0,L.jsx)("p",{style:{marginTop:"10px",fontSize:"12px",color:"#9ca3af",textAlign:"center"},children:"\ud30c\ud0b9\ud1b5\uc7a5 \uba54\ub274\uc5d0\uc11c \uc785\ucd9c\uae08 \ubc0f \uc0c1\ud488 \uac00\uc785 \uac00\ub2a5"})]}),(0,L.jsx)("div",{style:{padding:"25px",background:"rgba(20, 20, 35, 0.4)",borderRadius:"16px",border:"1px solid rgba(0, 255, 242, 0.1)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:(0,L.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,L.jsx)("h4",{style:{fontSize:"15px",color:"#374151",fontWeight:"700",marginBottom:"12px"},children:"\ud83c\udf9f\ufe0f \ubcf4\uc720 \ucfe0\ud3f0"}),(0,L.jsx)("div",{style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",borderRadius:"14px",padding:"20px",border:"none",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.2)"},children:(0,L.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,L.jsxs)("div",{style:{width:"100%"},children:[(0,L.jsxs)("div",{style:{fontSize:"26px",fontWeight:"800",color:"#ffffff",letterSpacing:"-0.5px",textAlign:"right"},children:[s.toLocaleString()," ",(0,L.jsx)("span",{style:{fontSize:"18px",fontWeight:"600"},children:"\uac1c"})]}),(0,L.jsxs)("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.85)",fontWeight:"500",marginTop:"4px",textAlign:"right"},children:["1\ucfe0\ud3f0 = ",Number(Q).toLocaleString(),"\uc6d0"]})]})})})]})})]})})(),ue&&(0,L.jsx)(jt,{showTransferModal:ue,setShowTransferModal:he,recipients:n,transferRecipient:ge,setTransferRecipient:fe,transferAmount:be,setTransferAmount:ye,handleTransfer:async()=>{f(!0);try{if(!t||!m||!G.db||!s||!x||!c)return void alert("\ud544\uc218 \uc815\ubcf4\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");const e=parseInt(be,10);if(isNaN(e)||e<=0)return void alert("\uc62c\ubc14\ub978 \uc1a1\uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if((Number(t.cash)||0)<e)return void alert("\ubcf4\uc720 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const a=s.find(e=>e.id===ge);if(!a)return void alert("\uc1a1\uae08 \ub300\uc0c1\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ubaa9\ub85d\uc744 \uc0c8\ub85c\uace0\uce68\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(a.id===m)return void alert("\uc790\uae30 \uc790\uc2e0\uc5d0\uac8c\ub294 \uc1a1\uae08\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const n=a.name||a.nickname||"\uc0ac\uc6a9\uc790";if(await x(e,"".concat(n,"\ub2d8\uc5d0\uac8c \uc1a1\uae08"))){await c(a.id,e,"".concat(u,"\ub2d8\uc73c\ub85c\ubd80\ud130 \uc785\uae08"))?((0,hs.Mx)(G.db,{classCode:h,userId:m,userName:u,type:hs.gI.TRANSFER_SEND,description:"".concat(n,"\ub2d8\uc5d0\uac8c ").concat(e.toLocaleString(),"\uc6d0 \uc1a1\uae08"),amount:-e,metadata:{recipientId:a.id,recipientName:n}}),(0,hs.Mx)(G.db,{classCode:h,userId:a.id,userName:n,type:hs.gI.TRANSFER_RECEIVE,description:"".concat(u,"\ub2d8\uc73c\ub85c\ubd80\ud130 ").concat(e.toLocaleString(),"\uc6d0 \uc785\uae08"),amount:e,metadata:{senderId:m,senderName:u}}),alert("\uc1a1\uae08\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),he(!1),fe(""),ye("")):(alert("\ubc1b\ub294 \uc0ac\ub78c\uc5d0\uac8c \ud604\uae08\uc744 \uc804\ub2ec\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc1a1\uae08\uc774 \ucde8\uc18c\ub429\ub2c8\ub2e4."),await c(m,e,"\uc1a1\uae08 \uc2e4\ud328\ub85c \uc778\ud55c \ubcf5\uc6d0"))}else alert("\uacc4\uc88c\uc5d0\uc11c \ud604\uae08\uc744 \uc778\ucd9c\ud558\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("!!! \uc1a1\uae08 \ucc98\ub9ac \uc911 \uc608\uae30\uce58 \uc54a\uc740 \uc624\ub958 \ubc1c\uc0dd !!!",e),alert("\uc1a1\uae08 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(e.message)),p&&p({cash:parseInt(be,10)||0})}finally{f(!1)}},userId:m,userCash:Number(null===t||void 0===t?void 0:t.cash)||0})]})}):(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",fontSize:"1.2em",color:"#ef4444"},children:"\ud559\uae09 \ucf54\ub4dc \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc5ec \ud559\uae09 \ucf54\ub4dc\ub97c \ud560\ub2f9\ubc1b\uc73c\uc138\uc694."}):(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",fontSize:"1.2em",color:"#ef4444"},children:"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4\uc5d0\ub3c4 \uc774 \uba54\uc2dc\uc9c0\uac00 \ubcf4\uc774\uba74 \uc571\uc744 \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc7ac\ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."}):(0,L.jsx)(is.A,{})}const fs=e=>e?e.toDate?e.toDate().toLocaleDateString():e.toLocaleDateString?e.toLocaleDateString():"\uc54c \uc218 \uc5c6\uc74c":"\uc54c \uc218 \uc5c6\uc74c",bs=e=>{let{item:t,onSave:s,onCancel:n,currentUser:i}=e;const[o,l]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(!1);return(0,L.jsx)("div",{className:"modal-overlay",onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,L.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),style:{backgroundColor:"#1a1a2e",borderRadius:"24px",padding:"20px",minWidth:"400px",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",color:"#e2e8f0"},children:[(0,L.jsxs)("div",{className:"modal-header",children:[(0,L.jsx)("h3",{children:"\uac00\uaca9 \uc81c\uc548\ud558\uae30"}),(0,L.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,L.jsxs)("div",{className:"modal-content",children:[(0,L.jsxs)("div",{className:"proposal-item-info",children:[(0,L.jsx)("h4",{children:t.itemName}),(0,L.jsxs)("p",{children:["\ud604\uc7ac \uac00\uaca9: ",(t.price||t.totalPrice||0).toLocaleString(),"\uc6d0"]}),(0,L.jsxs)("p",{children:["\ud310\ub9e4\uc790: ",t.sellerName]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"proposalPrice",children:"\uc81c\uc548 \uac00\uaca9 (\uc6d0)"}),(0,L.jsx)("input",{type:"number",id:"proposalPrice",value:o,onChange:e=>{l(e.target.value)},placeholder:"\uc81c\uc548\ud560 \uac00\uaca9\uc744 \uc785\ub825\ud558\uc138\uc694",min:"1",max:(null===i||void 0===i?void 0:i.cash)||0,disabled:c}),(0,L.jsxs)("p",{className:"form-hint",children:["\ubcf4\uc720 \uae08\uc561: ",((null===i||void 0===i?void 0:i.cash)||0).toLocaleString(),"\uc6d0"]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"proposalMessage",children:"\uba54\uc2dc\uc9c0 (\uc120\ud0dd)"}),(0,L.jsx)("textarea",{id:"proposalMessage",value:r,onChange:e=>{d(e.target.value)},placeholder:"\ud310\ub9e4\uc790\uc5d0\uac8c \uc804\ub2ec\ud560 \uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud558\uc138\uc694",rows:"3",disabled:c})]})]}),(0,L.jsxs)("div",{className:"modal-footer",children:[(0,L.jsx)("button",{onClick:()=>{n()},className:"modal-button cancel",disabled:c,children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:()=>{(async()=>{if(c)return;const e=parseInt(o,10);if(isNaN(e)||e<=0)return void alert("\uc720\ud6a8\ud55c \uac00\uaca9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(e>((null===i||void 0===i?void 0:i.cash)||0))return void alert("\ubcf4\uc720 \uae08\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");x(!0);const a={itemId:t.id,proposedPrice:e,message:r.trim()||"\uac00\uaca9 \uc81c\uc548"};try{await s(a)}catch(n){alert("\uc81c\uc548 \uc81c\ucd9c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{x(!1)}})()},className:"modal-button propose",disabled:c||!o,children:c?"\uc81c\uc548 \uc911...":"\uc81c\uc548\ud558\uae30"})]})]})})},ys=e=>{var t,s;let{onSave:n,onCancel:i,userItems:o=[]}=e;const[l,r]=(0,a.useState)("inventory"),[d,c]=(0,a.useState)(""),[x,p]=(0,a.useState)(1),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[y,j]=(0,a.useState)("\uae30\ud0c0"),[v,w]=(0,a.useState)(!1),N=(0,a.useMemo)(()=>{if(!o||0===o.length)return[];const e=new Map;return o.forEach(t=>{if(!t||!t.itemId||"number"!==typeof t.quantity||t.quantity<=0)return;const s=t.itemId;if(e.has(s)){const a=e.get(s);a.totalQuantity+=t.quantity,a.sourceDocs.push(t)}else e.set(s,{displayInfo:{itemId:t.itemId,name:t.name||"\uc54c \uc218 \uc5c6\ub294 \uc544\uc774\ud15c",icon:t.icon||"\ud83d\udd2e",description:t.description||"",type:t.type||"general"},totalQuantity:t.quantity,sourceDocs:[t]})}),Array.from(e.values()).sort((e,t)=>e.displayInfo.name.localeCompare(t.displayInfo.name))},[o]);(0,a.useEffect)(()=>{if("inventory"===l&&d){const e=N.find(e=>e.displayInfo.itemId===d);e&&(u(e.displayInfo.name),g(e.displayInfo.description),j(e.displayInfo.type),p(1))}},[d,l,N]);return(0,L.jsx)("div",{className:"modal-overlay",onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},children:(0,L.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),style:{backgroundColor:"#1a1a2e",borderRadius:"24px",padding:"20px",minWidth:"400px",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",color:"#e2e8f0"},children:[(0,L.jsxs)("div",{className:"modal-header",children:[(0,L.jsx)("h3",{children:"\uc0c1\ud488 \ub4f1\ub85d"}),(0,L.jsx)("button",{className:"close-button",onClick:i,children:"\xd7"})]}),(0,L.jsxs)("div",{className:"modal-content",children:[(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{children:"\ub4f1\ub85d \ubc29\uc2dd"}),(0,L.jsxs)("div",{className:"radio-group",children:[(0,L.jsxs)("label",{children:[(0,L.jsx)("input",{type:"radio",value:"inventory",checked:"inventory"===l,onChange:e=>r(e.target.value),disabled:v}),"\ubcf4\uc720 \uc544\uc774\ud15c \ud310\ub9e4"]}),(0,L.jsxs)("label",{children:[(0,L.jsx)("input",{type:"radio",value:"custom",checked:"custom"===l,onChange:e=>r(e.target.value),disabled:v}),"\uc9c1\uc811 \uc785\ub825"]})]})]}),"inventory"===l&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"inventoryItem",children:"\ud310\ub9e4\ud560 \uc544\uc774\ud15c \uc120\ud0dd *"}),(0,L.jsxs)("select",{id:"inventoryItem",value:d,onChange:e=>c(e.target.value),disabled:v,children:[(0,L.jsx)("option",{value:"",children:"-- \uc544\uc774\ud15c\uc744 \uc120\ud0dd\ud558\uc138\uc694 --"}),N.map(e=>(0,L.jsxs)("option",{value:e.displayInfo.itemId,children:[e.displayInfo.name," (",e.totalQuantity,"\uac1c)"]},e.displayInfo.itemId))]})]}),d&&(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"quantity",children:"\ud310\ub9e4 \uc218\ub7c9 *"}),(0,L.jsx)("input",{type:"number",id:"quantity",value:x,onChange:e=>p(Math.max(1,parseInt(e.target.value)||1)),min:"1",max:(null===(t=N.find(e=>e.displayInfo.itemId===d))||void 0===t?void 0:t.totalQuantity)||1,disabled:v}),(0,L.jsxs)("p",{className:"form-hint",children:["\ucd5c\ub300 ",(null===(s=N.find(e=>e.displayInfo.itemId===d))||void 0===s?void 0:s.totalQuantity)||0,"\uac1c\uae4c\uc9c0 \ud310\ub9e4 \uac00\ub2a5"]})]})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"itemName",children:"\uc0c1\ud488\uba85 *"}),(0,L.jsx)("input",{type:"text",id:"itemName",value:m,onChange:e=>u(e.target.value),placeholder:"\uc0c1\ud488\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",maxLength:"50",disabled:v||"inventory"===l&&d})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"description",children:"\uc0c1\ud488 \uc124\uba85"}),(0,L.jsx)("textarea",{id:"description",value:h,onChange:e=>g(e.target.value),placeholder:"\uc0c1\ud488\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",rows:"3",maxLength:"200",disabled:v})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"price",children:"\uac00\uaca9 (\uc6d0) *"}),(0,L.jsx)("input",{type:"number",id:"price",value:f,onChange:e=>b(e.target.value),placeholder:"\uac00\uaca9\uc744 \uc785\ub825\ud558\uc138\uc694",min:"1",disabled:v})]}),(0,L.jsxs)("div",{className:"form-group",children:[(0,L.jsx)("label",{htmlFor:"category",children:"\uce74\ud14c\uace0\ub9ac"}),(0,L.jsxs)("select",{id:"category",value:y,onChange:e=>j(e.target.value),disabled:v||"inventory"===l&&d,children:[(0,L.jsx)("option",{value:"\ud559\uc6a9\ud488",children:"\ud559\uc6a9\ud488"}),(0,L.jsx)("option",{value:"\uc74c\uc2dd",children:"\uc74c\uc2dd"}),(0,L.jsx)("option",{value:"\ucc45",children:"\ucc45"}),(0,L.jsx)("option",{value:"\uc7a5\ub09c\uac10",children:"\uc7a5\ub09c\uac10"}),(0,L.jsx)("option",{value:"\uc758\ub958",children:"\uc758\ub958"}),(0,L.jsx)("option",{value:"\uc804\uc790\uae30\uae30",children:"\uc804\uc790\uae30\uae30"}),(0,L.jsx)("option",{value:"\uae30\ud0c0",children:"\uae30\ud0c0"})]})]})]}),(0,L.jsxs)("div",{className:"modal-footer",children:[(0,L.jsx)("button",{onClick:i,className:"modal-button cancel",disabled:v,children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(v)return;if("inventory"===l){if(!d)return void alert("\ud310\ub9e4\ud560 \uc544\uc774\ud15c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");if(x<=0)return void alert("\ud310\ub9e4\ud560 \uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e=N.find(e=>e.displayInfo.itemId===d);if(!e||e.totalQuantity<x)return void alert("\ubcf4\uc720 \uc218\ub7c9\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.")}else if(!m.trim())return void alert("\uc0c1\ud488\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e=parseInt(f,10);if(isNaN(e)||e<=0)alert("\uc720\ud6a8\ud55c \uac00\uaca9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else{w(!0);try{const t={itemName:m.trim(),description:h.trim(),price:e,category:y,registrationType:l};if("inventory"===l){const e=N.find(e=>e.displayInfo.itemId===d);t.inventoryItemId=e.sourceDocs[0].id,t.quantity=x,t.sourceDocs=e.sourceDocs,t.icon=e.displayInfo.icon}await n(t)}catch(t){alert("\uc0c1\ud488 \ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{w(!1)}}},className:"modal-button save",disabled:v||!m.trim()||!f,children:v?"\ub4f1\ub85d \uc911...":"\ub4f1\ub85d"})]})]})})},js=()=>{const e=(0,i.As)(),t=(0,ns.wB)(),s=e.userDoc,n=null===s||void 0===s?void 0:s.id,l=null===s||void 0===s?void 0:s.classCode,{marketListings:r,marketOffers:d,loading:c,refreshData:x,buyMarketItem:p,makeOffer:m,respondToOffer:u,listItemForSale:h,cancelSale:g,adminDeleteItem:f,userItems:b}=(0,ns.wB)(),{classmates:y,loading:j}=(0,i.As)(),[v,w]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[A,I]=(0,a.useState)("market"),[T,M]=(0,a.useState)("\uc804\uccb4"),[E,z]=(0,a.useState)(""),[D,R]=(0,a.useState)({}),[O,_]=(0,a.useState)(null),[W,B]=(0,a.useState)(!0),[P,F]=(0,a.useState)(null),[Q,H]=(0,a.useState)(20),q=c||j;(0,a.useEffect)(()=>{l?(B(!1),_({}),F(null)):B(!1)},[l]),(0,a.useEffect)(()=>()=>{},[]);const U=(0,a.useCallback)(e=>{if(!e)return"\uc54c \uc218 \uc5c6\uc74c";const t=y.find(t=>t.id===e||t.uid===e);return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.displayName)||"\uc54c \uc218 \uc5c6\uc74c"},[y]),J=(0,a.useCallback)(e=>(null===e||void 0===e?void 0:e.sellerName)||U(null===e||void 0===e?void 0:e.sellerId),[U]),V=(0,a.useMemo)(()=>(r||[]).filter(e=>{const t="\uc804\uccb4"===T||e.category===T||e.itemType===T,s=!E||e.itemName.toLowerCase().includes(E.toLowerCase())||(e.description||"").toLowerCase().includes(E.toLowerCase())||(e.sellerName||"").toLowerCase().includes(E.toLowerCase()),a="available"===e.status||"active"===e.status;return t&&s&&a}),[r,T,E,n]),K=(0,a.useMemo)(()=>(r||[]).filter(e=>e.sellerId===n),[r,n]),{receivedProposals:X,sentProposals:Y}=(0,a.useMemo)(()=>({receivedProposals:(d||[]).filter(e=>e.sellerId===n),sentProposals:(d||[]).filter(e=>e.buyerId===n)}),[d,n]);(0,a.useMemo)(()=>O?Object.entries(O).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}):[],[O]);if(q)return(0,L.jsx)("div",{className:"market-container loading",children:"\ub85c\ub529 \uc911..."});if(!s)return(0,L.jsx)("div",{className:"market-container loading",children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."});if(!l)return(0,L.jsx)("div",{className:"market-container loading",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."});const Z=V.slice(0,Q);return(0,L.jsxs)("div",{className:"market-container",children:[(0,L.jsxs)("div",{className:"market-header",children:[(0,L.jsxs)("h1",{children:["\uc544\uc774\ud15c \uc2dc\uc7a5 (\ud559\uae09: ",l,")"]}),(0,L.jsx)("div",{className:"header-info",children:(0,L.jsxs)("span",{children:["\ubcf4\uc720 \uae08\uc561: ",(s.cash||0).toLocaleString(),"\uc6d0"]})})]}),(0,L.jsxs)("div",{className:"market-tabs",children:[(0,L.jsxs)("button",{className:"tab-button ".concat("market"===A?"active":""),onClick:()=>I("market"),children:["\uc0c1\ud488 \ub458\ub7ec\ubcf4\uae30 (",V.length,")"]}),(0,L.jsxs)("button",{className:"tab-button ".concat("my-items"===A?"active":""),onClick:()=>I("my-items"),children:["\ub0b4 \uc0c1\ud488 (",K.length,")"]}),(0,L.jsxs)("button",{className:"tab-button ".concat("proposals"===A?"active":""),onClick:()=>I("proposals"),children:["\uc81c\uc548 \uad00\ub9ac (",X.filter(e=>"pending"===e.status).length,")"]})]}),(0,L.jsxs)("div",{className:"market-content",children:["market"===A&&(0,L.jsxs)("div",{className:"market-section",children:[(0,L.jsxs)("div",{className:"market-controls",children:[(0,L.jsxs)("div",{className:"search-and-filter",children:[(0,L.jsx)("input",{type:"text",placeholder:"\uc0c1\ud488\uba85, \uc124\uba85, \ud310\ub9e4\uc790 \uac80\uc0c9...",value:E,onChange:e=>z(e.target.value),className:"search-input"}),(0,L.jsxs)("select",{value:T,onChange:e=>M(e.target.value),className:"category-filter",children:[(0,L.jsx)("option",{value:"\uc804\uccb4",children:"\uc804\uccb4 \uce74\ud14c\uace0\ub9ac"}),(0,L.jsx)("option",{value:"\ud559\uc6a9\ud488",children:"\ud559\uc6a9\ud488"}),(0,L.jsx)("option",{value:"\uc74c\uc2dd",children:"\uc74c\uc2dd"}),(0,L.jsx)("option",{value:"\ucc45",children:"\ucc45"}),(0,L.jsx)("option",{value:"\uc7a5\ub09c\uac10",children:"\uc7a5\ub09c\uac10"}),(0,L.jsx)("option",{value:"\uc758\ub958",children:"\uc758\ub958"}),(0,L.jsx)("option",{value:"\uc804\uc790\uae30\uae30",children:"\uc804\uc790\uae30\uae30"}),(0,L.jsx)("option",{value:"\uae30\ud0c0",children:"\uae30\ud0c0"})]})]}),(0,L.jsx)("button",{onClick:()=>w(!0),className:"register-button",children:"\uc0c1\ud488 \ub4f1\ub85d"})]}),q?(0,L.jsx)("div",{className:"loading",children:"\uc0c1\ud488\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."}):0===Z.length?(0,L.jsx)("div",{className:"empty-state",style:{backgroundColor:"#1a1a2e",color:"#94a3b8"},children:E||"\uc804\uccb4"!==T?"\uac80\uc0c9 \uc870\uac74\uc5d0 \ub9de\ub294 \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ub4f1\ub85d\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"items-grid",children:Z.map(t=>(0,L.jsxs)("div",{className:"item-card",children:[(0,L.jsxs)("div",{className:"item-info",children:[(0,L.jsx)("h3",{children:t.name||t.itemName||"\uc774\ub984 \uc5c6\ub294 \uc544\uc774\ud15c"}),(0,L.jsx)("p",{className:"item-description",children:t.description||"\uc124\uba85 \uc5c6\uc74c"}),(0,L.jsxs)("p",{className:"item-price",children:[(t.price||t.totalPrice||0).toLocaleString(),"\uc6d0"]}),(0,L.jsxs)("p",{className:"item-seller",children:["\ud310\ub9e4\uc790: ",J(t)]}),(0,L.jsx)("p",{className:"item-category",children:t.category||t.itemType||t.type||"\uae30\ud0c0"})]}),(0,L.jsxs)("div",{className:"item-actions",children:[t.sellerId!==n&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("button",{onClick:()=>(async e=>{if(D[e.id])return;if(!n)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(e.sellerId===n)return void alert("\ubcf8\uc778\uc774 \ub4f1\ub85d\ud55c \uc0c1\ud488\uc740 \uad6c\ub9e4\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=e.price||e.totalPrice||0;if(((null===s||void 0===s?void 0:s.cash)||0)<t)alert("\ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");else if(window.confirm("".concat(e.itemName,"\uc744(\ub97c) ").concat(t.toLocaleString(),"\uc6d0\uc5d0 \uad6c\ub9e4\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){R(t=>(0,o.A)((0,o.A)({},t),{},{[e.id]:!0}));try{const t=await p(e.id);if(!t.success)throw new Error(t.message||"\uad6c\ub9e4\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\uad6c\ub9e4\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),x()}catch(a){a.message.includes("409")?alert("\uc774\ubbf8 \ud310\ub9e4\ub418\uc5c8\uac70\ub098 \uad6c\ub9e4\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud488\uc785\ub2c8\ub2e4."):alert("\uad6c\ub9e4 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+a.message),x()}finally{R(t=>(0,o.A)((0,o.A)({},t),{},{[e.id]:!1}))}}})(t),className:"buy-button",disabled:D[t.id]||!s||(s.cash||0)<(t.price||t.totalPrice||0),children:D[t.id]?"\uad6c\ub9e4 \uc911...":"\ubc14\ub85c \uad6c\ub9e4"}),(0,L.jsx)("button",{onClick:()=>{S(t),k(!0)},className:"propose-button",children:"\uc81c\uc548\ud558\uae30"})]}),e.isAdmin()&&(0,L.jsx)("button",{onClick:()=>(async t=>{if(e.isAdmin()){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc0c1\ud488\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))try{const e=await f(t);if(!e.success)throw new Error(e.message||"\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc0c1\ud488\uc774 \uac15\uc81c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),x()}catch(s){alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+s.message),x()}}else alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")})(t.id),className:"delete-button",children:"\uad00\ub9ac\uc790 \uc0ad\uc81c"})]})]},t.id))}),V.length>Q&&(0,L.jsx)("div",{className:"load-more-container",children:(0,L.jsx)("button",{onClick:()=>H(e=>e+20),className:"load-more-button",children:"\ub354 \ubcf4\uae30"})})]})]}),"my-items"===A&&(0,L.jsxs)("div",{className:"my-items-section",children:[(0,L.jsxs)("div",{className:"section-header",children:[(0,L.jsx)("h2",{children:"\ub0b4 \uc0c1\ud488"}),(0,L.jsx)("button",{onClick:()=>w(!0),className:"register-button",children:"\uc0c1\ud488 \ub4f1\ub85d"})]}),0===K.length?(0,L.jsx)("div",{className:"empty-state",style:{backgroundColor:"#1a1a2e",color:"#94a3b8"},children:"\ub4f1\ub85d\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsx)("div",{className:"items-list",children:K.map(e=>(0,L.jsxs)("div",{className:"item-row",children:[(0,L.jsxs)("div",{className:"item-info",children:[(0,L.jsx)("h3",{children:e.itemName}),(0,L.jsx)("p",{children:e.description}),(0,L.jsxs)("p",{className:"price",children:[(e.price||e.totalPrice||0).toLocaleString(),"\uc6d0"]}),(0,L.jsxs)("p",{children:["\uce74\ud14c\uace0\ub9ac: ",e.category||e.itemType||"\uae30\ud0c0"]}),(0,L.jsx)("span",{className:"status ".concat(e.status),children:"available"===e.status||"active"===e.status?"\ud310\ub9e4\uc911":"sold"===e.status?"\ud310\ub9e4\uc644\ub8cc (".concat((e.soldPrice||e.totalPrice||0).toLocaleString(),"\uc6d0)"):"\ubcf4\ub958"}),e.isLegacy&&(0,L.jsx)("span",{className:"legacy-badge",children:"\uae30\uc874 \uc0c1\ud488"}),e.soldAt&&(0,L.jsxs)("p",{children:["\ud310\ub9e4\uc77c: ",fs(e.soldAt)]})]}),(0,L.jsx)("div",{className:"item-actions",children:("available"===e.status||"active"===e.status)&&(0,L.jsx)("button",{onClick:()=>(async e=>{const t=r.find(t=>t.id===e);if(!t)return;if(t.sellerId!==n)return void alert("\ubcf8\uc778\uc774 \ub4f1\ub85d\ud55c \uc0c1\ud488\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const s=d.filter(t=>t.itemId===e&&"pending"===t.status);let a="\uc815\ub9d0\ub85c \uc774 \uc0c1\ud488\uc758 \ud310\ub9e4\ub97c \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";if(s.length>0&&(a="\uc774 \uc0c1\ud488\uc5d0 ".concat(s.length,"\uac1c\uc758 \ub300\uae30 \uc911\uc778 \uc81c\uc548\uc774 \uc788\uc2b5\ub2c8\ub2e4. \uc815\ub9d0\ub85c \ud310\ub9e4\ub97c \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc81c\uc548\uc740 \ubaa8\ub450 \uac70\uc808\ub429\ub2c8\ub2e4.")),window.confirm(a))try{const t=await g(e);if(!t.success)throw new Error(t.message||"\ud310\ub9e4 \ucde8\uc18c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\ud310\ub9e4\uac00 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc544\uc774\ud15c\uc740 \uc778\ubca4\ud1a0\ub9ac\ub85c \ubcf5\uad6c\ub429\ub2c8\ub2e4.")}catch(i){alert("\ud310\ub9e4 \ucde8\uc18c \uc911 \uc624\ub958: ".concat(i.message))}})(e.id),className:"delete-button",children:"\uc0ad\uc81c"})})]},e.id))})]}),"proposals"===A&&(0,L.jsxs)("div",{className:"proposals-section",children:[(0,L.jsx)("div",{className:"section-header",children:(0,L.jsx)("h2",{children:"\uc81c\uc548 \uad00\ub9ac"})}),(0,L.jsxs)("div",{className:"proposals-tabs",children:[(0,L.jsxs)("h3",{children:["\ubc1b\uc740 \uc81c\uc548 (",X.length,")"]}),0===X.length?(0,L.jsx)("div",{className:"empty-state",style:{backgroundColor:"#1a1a2e",color:"#94a3b8"},children:"\ubc1b\uc740 \uc81c\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsx)("div",{className:"proposals-list",children:X.map(e=>(0,L.jsxs)("div",{className:"proposal-card",children:[(0,L.jsxs)("div",{className:"proposal-info",children:[(0,L.jsx)("h4",{children:e.itemName}),(0,L.jsxs)("p",{children:["\uc81c\uc548\uc790: ",U(e.buyerId)]}),(0,L.jsxs)("p",{children:["\uc81c\uc548 \uac00\uaca9: ",(0,L.jsxs)("strong",{children:[e.proposedPrice.toLocaleString(),"\uc6d0"]})]}),(0,L.jsxs)("p",{children:["\uc6d0\ub798 \uac00\uaca9: ",e.originalPrice.toLocaleString(),"\uc6d0"]}),e.message&&(0,L.jsxs)("p",{children:['\uba54\uc2dc\uc9c0: "',e.message,'"']}),(0,L.jsxs)("p",{children:["\uc81c\uc548\uc77c: ",fs(e.createdAt)]}),(0,L.jsxs)("p",{children:["\uc0c1\ud0dc: ",(0,L.jsx)("span",{className:"status ".concat(e.status),children:"pending"===e.status?"\ub300\uae30\uc911":"accepted"===e.status?"\uc218\ub77d\ub428":"\uac70\uc808\ub428"})]})]}),"pending"===e.status&&(0,L.jsxs)("div",{className:"proposal-actions",children:[(0,L.jsx)("button",{onClick:()=>(async e=>{if(!n||!l)return;const t=d.find(t=>t.id===e);if(!t)return void alert("\uc81c\uc548\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(t.sellerId!==n)return void alert("\ubcf8\uc778\uc758 \uc0c1\ud488\uc5d0 \ub300\ud55c \uc81c\uc548\ub9cc \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");if("pending"!==t.status)return void alert("\uc774\ubbf8 \ucc98\ub9ac\ub41c \uc81c\uc548\uc785\ub2c8\ub2e4.");const s=r.find(e=>e.id===t.itemId);if(s&&"available"===s.status){if(window.confirm("".concat(t.buyerName,"\ub2d8\uc758 ").concat(t.proposedPrice.toLocaleString(),"\uc6d0 \uc81c\uc548\uc744 \uc218\ub77d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{await(0,$.c4)(G.db,async s=>{const a=(0,$.H9)(G.db,"users",t.buyerId),n=await s.get(a);if(!n.exists())throw new Error("\uad6c\ub9e4\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if((n.data().cash||0)<t.proposedPrice)throw new Error("\uad6c\ub9e4\uc790\uc758 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const i=(0,$.H9)(G.db,"classes",l,"marketProposals",e);s.update(i,{status:"accepted",acceptedAt:(0,$.O5)()});const o=(0,$.H9)(G.db,"classes",l,"marketItems",t.itemId);s.update(o,{status:"sold",soldTo:t.buyerId,soldPrice:t.proposedPrice,soldAt:(0,$.O5)()});const r=(0,$.H9)(G.db,"users",t.sellerId);s.update(a,{cash:(0,$.GV)(-t.proposedPrice),updatedAt:(0,$.O5)()}),s.update(r,{cash:(0,$.GV)(t.proposedPrice),updatedAt:(0,$.O5)()})}),await x(),await Promise.all([(0,G.TB)(t.buyerId,"\uc0c1\ud488 \uad6c\ub9e4","".concat(t.itemName,"\uc744(\ub97c) ").concat(t.proposedPrice.toLocaleString(),"\uc6d0\uc5d0 \uad6c\ub9e4\ud588\uc2b5\ub2c8\ub2e4.")),(0,G.TB)(t.sellerId,"\uc0c1\ud488 \ud310\ub9e4","".concat(t.itemName,"\uc744(\ub97c) ").concat(t.proposedPrice.toLocaleString(),"\uc6d0\uc5d0 \ud310\ub9e4\ud588\uc2b5\ub2c8\ub2e4.")),(0,G.yY)(t.buyerId,-t.proposedPrice,"\uc0c1\ud488 \uad6c\ub9e4: ".concat(t.itemName)),(0,G.yY)(t.sellerId,t.proposedPrice,"\uc0c1\ud488 \ud310\ub9e4: ".concat(t.itemName))]),alert("\uc81c\uc548\uc774 \uc218\ub77d\ub418\uc5b4 \uac70\ub798\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){alert("\uc81c\uc548 \uc218\ub77d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+a.message)}}else alert("\uc0c1\ud488\uc774 \ub354 \uc774\uc0c1 \ud310\ub9e4 \uac00\ub2a5\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")})(e.id),className:"accept-button",children:"\uc218\ub77d"}),(0,L.jsx)("button",{onClick:()=>(async e=>{if(!n||!l)return;const t=d.find(t=>t.id===e);if(t)if(t.sellerId===n)if("pending"===t.status){if(window.confirm("".concat(t.buyerName,"\ub2d8\uc758 \uc81c\uc548\uc744 \uac70\uc808\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const t=(0,$.H9)(G.db,"classes",l,"marketProposals",e);await(0,$.mZ)(t,{status:"rejected",rejectedAt:(0,$.O5)()}),await x(),alert("\uc81c\uc548\uc774 \uac70\uc808\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(s){alert("\uc81c\uc548 \uac70\uc808 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+s.message)}}else alert("\uc774\ubbf8 \ucc98\ub9ac\ub41c \uc81c\uc548\uc785\ub2c8\ub2e4.");else alert("\ubcf8\uc778\uc758 \uc0c1\ud488\uc5d0 \ub300\ud55c \uc81c\uc548\ub9cc \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");else alert("\uc81c\uc548\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})(e.id),className:"reject-button",children:"\uac70\uc808"})]})]},e.id))}),(0,L.jsxs)("h3",{children:["\ubcf4\ub0b8 \uc81c\uc548 (",Y.length,")"]}),0===Y.length?(0,L.jsx)("div",{className:"empty-state",style:{backgroundColor:"#1a1a2e",color:"#94a3b8"},children:"\ubcf4\ub0b8 \uc81c\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsx)("div",{className:"proposals-list",children:Y.map(e=>(0,L.jsx)("div",{className:"proposal-card",children:(0,L.jsxs)("div",{className:"proposal-info",children:[(0,L.jsx)("h4",{children:e.itemName||"\uc54c \uc218 \uc5c6\uc74c"}),(0,L.jsxs)("p",{children:["\ud310\ub9e4\uc790: ",U(e.sellerId)]}),(0,L.jsxs)("p",{children:["\uc81c\uc548 \uac00\uaca9: ",(0,L.jsxs)("strong",{children:[(e.proposedPrice||0).toLocaleString(),"\uc6d0"]})]}),(0,L.jsxs)("p",{children:["\uc6d0\ub798 \uac00\uaca9: ",(e.originalPrice||0).toLocaleString(),"\uc6d0"]}),e.message&&(0,L.jsxs)("p",{children:['\uba54\uc2dc\uc9c0: "',e.message,'"']}),(0,L.jsxs)("p",{children:["\uc81c\uc548\uc77c: ",fs(e.createdAt)]}),(0,L.jsxs)("p",{children:["\uc0c1\ud0dc: ",(0,L.jsx)("span",{className:"status ".concat(e.status),children:"pending"===e.status?"\ub300\uae30\uc911":"accepted"===e.status?"\uc218\ub77d\ub428":"\uac70\uc808\ub428"})]}),e.acceptedAt&&(0,L.jsxs)("p",{children:["\ucc98\ub9ac\uc77c: ",fs(e.acceptedAt)]})]})},e.id))})]})]})]}),v&&(0,L.jsx)(ys,{onSave:async e=>{if(n&&l)try{if("inventory"!==e.registrationType)return void alert("\uc9c1\uc811 \ub4f1\ub85d \uae30\ub2a5\uc740 \ud604\uc7ac \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");{const{inventoryItemId:t,quantity:s,price:a}=e,n=await h({itemId:t,quantity:s,price:a});if(!n.success)throw new Error(n.message);alert("".concat(e.itemName," ").concat(s,"\uac1c\ub97c \uc2dc\uc7a5\uc5d0 \ud310\ub9e4 \ub4f1\ub85d\ud588\uc2b5\ub2c8\ub2e4."))}w(!1),x()}catch(t){alert("\uc0c1\ud488 \ub4f1\ub85d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+t.message)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},onCancel:()=>w(!1),userItems:t.userItems||[]}),N&&C&&(0,L.jsx)(bs,{item:C,onSave:async e=>{if(n&&l)try{const t=await m(e);if(!t.success)throw new Error(t.message||"\uc81c\uc548\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc81c\uc548\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),k(!1),S(null)}catch(t){alert("\uc81c\uc548 \uc804\uc1a1 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+t.message)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},onCancel:()=>{k(!1),S(null)},currentUser:s})]})};var vs=s(4577),ws=s(1662),Ns=s(6648),ks=s(6794),Cs=s(773),Ss=s(3242),As=s(5533);const Is={container:{fontFamily:"sans-serif",backgroundColor:"transparent",padding:"32px",minHeight:"auto"},message:e=>({padding:"16px 20px",borderRadius:"12px",marginBottom:"28px",textAlign:"center",fontSize:"16px",fontWeight:"500",color:"error"===e?"#f87171":"#34d399",backgroundColor:"error"===e?"rgba(239, 68, 68, 0.1)":"rgba(16, 185, 129, 0.1)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid ".concat("error"===e?"rgba(239, 68, 68, 0.3)":"rgba(16, 185, 129, 0.3)")}),grid:{display:"grid",gap:"28px",maxWidth:"1200px",margin:"0 auto"},card:{backgroundColor:"rgba(20, 20, 35, 0.6)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",borderRadius:"16px",padding:"32px",border:"1px solid rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)"},cardHeader:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",paddingBottom:"20px",borderBottom:"2px solid rgba(255, 255, 255, 0.05)"},cardTitle:{fontSize:"26px",fontWeight:"bold",color:"#fff",letterSpacing:"-0.5px",textShadow:"0 0 10px rgba(0, 255, 242, 0.3)"},tabContainer:{display:"flex",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",marginBottom:"20px",gap:"8px"},tabButton:e=>({padding:"12px 24px",border:"none",background:e?"rgba(99, 102, 241, 0.2)":"none",cursor:"pointer",fontSize:"17px",fontWeight:e?"700":"500",color:e?"#00fff2":"#94a3b8",borderBottom:"3px solid ".concat(e?"#00fff2":"transparent"),marginBottom:"-2px",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",textShadow:e?"0 0 5px rgba(0, 255, 242, 0.3)":"none"}),button:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return{backgroundColor:"primary"===t?"rgba(3, 105, 161, 0.8)":"danger"===t?"rgba(220, 38, 38, 0.8)":"success"===t?"rgba(5, 150, 105, 0.8)":"#4b5563",color:"white",padding:"12px 20px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)",cursor:e?"not-allowed":"pointer",opacity:e?.5:1,fontSize:"15px",fontWeight:"600",boxShadow:e?"none":"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s ease",":hover":!e&&{transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(0,0,0,0.4)",filter:"brightness(1.1)"}}},noProduct:{textAlign:"center",color:"#94a3b8",padding:"32px 0",fontSize:"16px",fontStyle:"italic"},input:{width:"100%",padding:"14px 16px",backgroundColor:"rgba(0, 0, 0, 0.2)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",marginBottom:"16px",fontSize:"16px",color:"white",transition:"border-color 0.2s ease",":focus":{outline:"none",borderColor:"#00fff2",boxShadow:"0 0 0 2px rgba(0, 255, 242, 0.1)"}},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},modalContent:{background:"#1a1a2e",padding:"32px",borderRadius:"16px",width:"90%",maxWidth:"450px",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#e2e8f0"},modalTitle:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#fff",textShadow:"0 0 10px rgba(0, 255, 242, 0.3)"},modalCloseBtn:{position:"absolute",top:"20px",right:"20px",background:"none",border:"none",cursor:"pointer",color:"#94a3b8",transition:"color 0.2s ease",":hover":{color:"#fff"}}},Ts=e=>"number"===typeof e?Math.round(e).toLocaleString():"0",Ms=(e,t,s)=>{if(e<=0||!t||s<=0)return{interest:0,total:e};const a=e*Math.pow(1+t/100,s),n=a-e;return{interest:Math.round(n),total:Math.round(a)}},Es=(e,t)=>Math.round(e*(t/100)),zs={parking:(0,L.jsx)(r.A,{size:28,style:{color:"#0369a1"}}),deposits:(0,L.jsx)(N.A,{size:28,style:{color:"#059669"}}),savings:(0,L.jsx)(Cs.A,{size:28,style:{color:"#7c3aed"}}),loans:(0,L.jsx)(Ss.A,{size:28,style:{color:"#dc2626"}})},Ds=e=>{let{product:t,onCancel:s,onMaturity:a}=e;const n=t.maturityDate&&new Date>=t.maturityDate,i=t.maturityDate?Math.max(0,(0,ws.c)(t.maturityDate,new Date)):0,{interest:l,total:r}=(t.rate,Ms(t.balance,t.rate,t.termInDays)),d=Es(t.balance,t.rate);return(0,L.jsxs)("div",{style:{padding:"20px",border:"2px solid ".concat(n?"rgba(16, 185, 129, 0.5)":"rgba(255, 255, 255, 0.1)"),borderRadius:"12px",marginBottom:"16px",background:n?"rgba(16, 185, 129, 0.1)":"rgba(0, 0, 0, 0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:{fontWeight:"700",fontSize:"18px",color:"#e2e8f0",marginBottom:"4px"},children:t.name}),n&&(0,L.jsx)("span",{style:{backgroundColor:"#10b981",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"600"},children:"\ub9cc\uae30"})]}),(0,L.jsxs)("span",{style:{fontSize:"20px",fontWeight:"700",color:"#00fff2"},children:[Ts(t.balance),"\uc6d0"]})]}),(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#94a3b8",marginTop:"16px",display:"grid",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"16px",borderRadius:"8px"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)("span",{style:{fontWeight:"500"},children:"\uae08\ub9ac (\uc77c):"}),(0,L.jsxs)("span",{style:{fontWeight:"700",color:"#00fff2"},children:[t.rate,"%"]})]}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)("span",{style:{fontWeight:"500"},children:"\uc77c\uc77c \uc774\uc790:"}),(0,L.jsxs)("span",{style:{fontWeight:"700",color:"#34d399"},children:["+",Ts(d),"\uc6d0/\uc77c"]})]}),t.maturityDate&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)("span",{style:{fontWeight:"500"},children:"\ub9cc\uae30\uc77c:"}),(0,L.jsx)("span",{style:{fontWeight:"600",color:"#e2e8f0"},children:(0,Ns.GP)(t.maturityDate,"yyyy-MM-dd")})]}),!n&&(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)("span",{style:{fontWeight:"500"},children:"\ub0a8\uc740 \uae30\uac04:"}),(0,L.jsxs)("span",{style:{fontWeight:"600",color:"#00fff2"},children:[i,"\uc77c"]})]})]})]}),(0,L.jsx)("div",{style:{borderTop:"1px dashed rgba(255, 255, 255, 0.1)",margin:"16px 0"}}),(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#e2e8f0",display:"grid",gap:"10px",backgroundColor:"rgba(0, 255, 242, 0.05)",padding:"16px",borderRadius:"8px",border:"1px solid rgba(0, 255, 242, 0.1)"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)("span",{style:{fontWeight:"600"},children:"\ub9cc\uae30 \uc2dc \uc774\uc790 (\uc138\uc804):"}),(0,L.jsxs)("span",{style:{fontWeight:"700",color:"#34d399",fontSize:"17px"},children:["+",Ts(l),"\uc6d0"]})]}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"17px"},children:[(0,L.jsx)("span",{style:{fontWeight:"700"},children:"\ub9cc\uae30 \uc2dc \ucd1d\uc561:"}),(0,L.jsxs)("span",{style:{fontWeight:"700",color:"#00fff2"},children:[Ts(r),"\uc6d0"]})]})]}),(0,L.jsx)("div",{style:{marginTop:"20px",textAlign:"right"},children:n?(0,L.jsxs)("button",{onClick:a,style:(0,o.A)((0,o.A)({},Is.button(!1,"success")),{},{padding:"10px 20px",fontSize:"15px"}),children:["\ub9cc\uae30 \uc218\ub839 (",Ts(r),"\uc6d0)"]}):(0,L.jsx)("button",{onClick:s,style:(0,o.A)((0,o.A)({},Is.button(!1,"danger")),{},{padding:"10px 20px",fontSize:"15px"}),children:"loan"===t.type?"\ub300\ucd9c \uc0c1\ud658":"\uc911\ub3c4 \ud574\uc9c0"})})]})},Rs=e=>{let{product:t,onSubscribe:s}=e;const a=t.dailyRate,{interest:n}=Ms(1e5,a,t.termInDays);return(0,L.jsxs)("div",{style:{padding:"20px",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0, 0, 0, 0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.2s ease"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:{fontWeight:"700",fontSize:"18px",color:"#e2e8f0",marginBottom:"8px"},children:t.name}),(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#94a3b8",marginBottom:"6px"},children:[(0,L.jsxs)("strong",{style:{color:"#00fff2"},children:["\uc77c ",t.dailyRate,"%"]})," (\uae30\uac04: ",t.termInDays,"\uc77c)"]}),(0,L.jsxs)("div",{style:{fontSize:"14px",color:"#34d399",fontWeight:"600"},children:[(0,L.jsx)(b.A,{size:14,style:{display:"inline",marginRight:"4px"}}),"10\ub9cc\uc6d0 \uac00\uc785 \uc2dc \uc608\uc0c1 \uc774\uc790: +",Ts(n),"\uc6d0"]})]}),(0,L.jsx)("button",{onClick:s,style:(0,o.A)((0,o.A)({},Is.button(!1)),{},{padding:"12px 24px",fontSize:"16px"}),children:"\uac00\uc785"})]})},Os=e=>{let{title:t,icon:s,subscribedProducts:n,availableProducts:i,onSubscribe:o,onCancel:l,onMaturity:r}=e;const[d,c]=(0,a.useState)("subscribed");return(0,L.jsxs)("div",{style:Is.card,children:[(0,L.jsxs)("div",{style:Is.cardHeader,children:[s,(0,L.jsx)("h2",{style:Is.cardTitle,children:t})]}),(0,L.jsxs)("div",{style:Is.tabContainer,children:[(0,L.jsx)("button",{onClick:()=>c("subscribed"),style:Is.tabButton("subscribed"===d),children:"\uac00\uc785\ud55c \uc0c1\ud488"}),(0,L.jsx)("button",{onClick:()=>c("available"),style:Is.tabButton("available"===d),children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488"})]}),(0,L.jsxs)("div",{children:["subscribed"===d&&(n.length>0?n.map(e=>(0,L.jsx)(Ds,{product:e,onCancel:()=>l(e),onMaturity:()=>r(e)},e.id)):(0,L.jsx)("p",{style:Is.noProduct,children:"\uac00\uc785\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})),"available"===d&&(i.length>0?i.map(e=>(0,L.jsx)(Rs,{product:e,onSubscribe:()=>o(e)},e.id)):(0,L.jsx)("p",{style:Is.noProduct,children:"\uac00\uc785 \uac00\ub2a5\ud55c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}))]})]})},Ls=e=>{let{isOpen:t,onClose:s,product:n,onConfirm:i,isProcessing:l}=e;const[r,d]=(0,a.useState)("");if(!t||!n)return null;const c=parseFloat(r),x=n.dailyRate,{interest:p,total:m}=!isNaN(c)&&c>0?Ms(c,x,n.termInDays):{interest:0,total:0};return(0,L.jsx)("div",{style:Is.modalOverlay,onClick:s,children:(0,L.jsxs)("div",{style:Is.modalContent,onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("button",{onClick:s,style:Is.modalCloseBtn,children:(0,L.jsx)(R.A,{size:24})}),(0,L.jsxs)("h3",{style:Is.modalTitle,children:[n.name," \uac00\uc785"]}),(0,L.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:"rgba(0, 255, 242, 0.05)",borderRadius:"10px",border:"1px solid rgba(0, 255, 242, 0.2)"},children:[(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#94a3b8",marginBottom:"8px"},children:[(0,L.jsx)("strong",{style:{color:"#00fff2"},children:"\uae08\ub9ac:"})," \uc77c ",n.dailyRate,"% (\uc77c\ubcf5\ub9ac)"]}),(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#94a3b8"},children:[(0,L.jsx)("strong",{style:{color:"#00fff2"},children:"\uae30\uac04:"})," ",n.termInDays,"\uc77c"]})]}),(0,L.jsx)("p",{style:{marginBottom:"12px",fontSize:"16px",fontWeight:"600",color:"#e2e8f0"},children:"\uac00\uc785 \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,L.jsx)("input",{type:"number",value:r,onChange:e=>d(e.target.value),style:Is.input,placeholder:"".concat(Ts(n.minAmount||0),"\uc6d0 \uc774\uc0c1"),autoFocus:!0}),c>0&&(0,L.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"10px",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[(0,L.jsxs)("div",{style:{fontSize:"15px",color:"#34d399",marginBottom:"6px"},children:["\uc608\uc0c1 \ub9cc\uae30 \uc774\uc790: ",(0,L.jsxs)("strong",{children:["+",Ts(p),"\uc6d0"]})]}),(0,L.jsxs)("div",{style:{fontSize:"16px",color:"#34d399",fontWeight:"700"},children:["\ub9cc\uae30 \uc2dc \ucd1d\uc561: ",Ts(m),"\uc6d0"]})]}),(0,L.jsx)("button",{onClick:()=>{i(r),d("")},disabled:l||!r,style:(0,o.A)((0,o.A)({},Is.button(l||!r)),{},{width:"100%",fontSize:"17px",padding:"16px"}),children:l?"\ucc98\ub9ac \uc911...":"\uac00\uc785\ud558\uae30"})]})})},_s=e=>{let{balance:t,dailyInterest:s,onDeposit:n,onWithdraw:i,isProcessing:l,userCash:d}=e;const[c,x]=(0,a.useState)("");return(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},Is.card),{},{background:"linear-gradient(135deg, rgba(6, 78, 117, 0.85) 0%, rgba(20, 40, 60, 0.9) 100%)",color:"white",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(0, 180, 216, 0.25)"}),children:[(0,L.jsxs)("div",{style:(0,o.A)((0,o.A)({},Is.cardHeader),{},{borderBottom:"2px solid rgba(0, 180, 216, 0.2)"}),children:[(0,L.jsx)(r.A,{size:32,style:{color:"#67e8f9"}}),(0,L.jsx)("h2",{style:(0,o.A)((0,o.A)({},Is.cardTitle),{},{color:"#e0f7fa"}),children:"\ud30c\ud0b9\ud1b5\uc7a5"})]}),(0,L.jsxs)("div",{style:{backgroundColor:"rgba(0, 180, 216, 0.15)",padding:"12px 16px",borderRadius:"10px",marginBottom:"16px",backdropFilter:"blur(10px)",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid rgba(0, 180, 216, 0.2)"},children:[(0,L.jsx)("span",{style:{fontSize:"16px",fontWeight:"500",color:"#94a3b8"},children:"\ubcf4\uc720 \ud604\uae08"}),(0,L.jsxs)("span",{style:{fontSize:"20px",fontWeight:"700",color:"#e0f7fa"},children:[Ts(d||0),"\uc6d0"]})]}),(0,L.jsxs)("div",{style:{fontSize:"42px",fontWeight:"bold",color:"#e0f7fa",marginBottom:"8px"},children:[Ts(t),"\uc6d0"]}),(0,L.jsx)("p",{style:{fontSize:"16px",color:"rgba(224, 247, 250, 0.8)",marginBottom:"16px",fontWeight:"500"},children:"\ub9e4\uc77c \uc774\uc790\uac00 \uc790\ub3d9 \uc9c0\uae09\ub418\ub294 \uc790\uc720 \uc785\ucd9c\uae08 \ud1b5\uc7a5"}),(0,L.jsxs)("div",{style:{backgroundColor:"rgba(0, 180, 216, 0.12)",padding:"16px",borderRadius:"10px",marginBottom:"24px",backdropFilter:"blur(10px)",border:"1px solid rgba(0, 180, 216, 0.2)"},children:[(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,L.jsx)(b.A,{size:20,style:{color:"#67e8f9"}}),(0,L.jsx)("span",{style:{fontSize:"15px",fontWeight:"600",color:"#94a3b8"},children:"\uc77c\uc77c \uc774\uc790 \uc218\uc775"})]}),(0,L.jsxs)("div",{style:{fontSize:"28px",fontWeight:"700",color:"#67e8f9"},children:["+",Ts(s),"\uc6d0/\uc77c"]}),(0,L.jsx)("div",{style:{fontSize:"14px",marginTop:"6px",color:"rgba(148, 163, 184, 0.9)"},children:"(\uc77c 1% \ubcf5\ub9ac \uae30\uc900)"})]}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("input",{type:"number",value:c,onChange:e=>x(e.target.value),placeholder:"\uae08\uc561 \uc785\ub825",style:(0,o.A)((0,o.A)({},Is.input),{},{marginBottom:0,fontSize:"17px",flex:1,backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 180, 216, 0.3)"}),disabled:l}),(0,L.jsx)("button",{onClick:()=>{n(c),x("")},disabled:l,style:(0,o.A)((0,o.A)({},Is.button(l,"success")),{},{fontSize:"17px",padding:"14px 24px"}),children:"\uc785\uae08"}),(0,L.jsx)("button",{onClick:()=>{i(c),x("")},disabled:l,style:(0,o.A)((0,o.A)({},Is.button(l)),{},{backgroundColor:"rgba(100, 116, 139, 0.5)",color:"white",fontSize:"17px",padding:"14px 24px"}),children:"\ucd9c\uae08"})]})]})},Ws=e=>{let{auth:t={},depositProducts:s=[],installmentProducts:n=[],loanProducts:i=[],activeView:l="parking",onViewChange:r,onLoadUserProducts:d,allUserProducts:c=[],onDeleteUserProduct:x}=e;const{user:p,userDoc:m,loading:u,refreshUserDocument:h,isAdmin:g,addCash:f,deductCash:b}=t,y=null===p||void 0===p?void 0:p.uid,[j,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[k,C]=(0,a.useState)(""),[S,A]=(0,a.useState)(0),[I,T]=(0,a.useState)(0),[M,E]=(0,a.useState)([]),[z,D]=(0,a.useState)([]),[R,O]=(0,a.useState)([]),[_,W]=(0,a.useState)({isOpen:!1,product:null,type:""}),[B,P]=(0,a.useState)((null===m||void 0===m?void 0:m.cash)||0),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;N(e),C(t),s&&setTimeout(()=>N(null),s)},Q=(0,a.useCallback)(async()=>{if(y){v(!0);try{const t=(0,G.H9)(G.db,"users",y,"financials","parkingAccount"),a=s.length>0?s[0]:null;if(a){const s=await(0,G.x7)(t);if(s.exists()){var e;const n=s.data(),i=null===(e=n.lastInterestDate)||void 0===e?void 0:e.toDate();if(!i||!(0,ks.c)(i)){const e=i?(0,ws.c)(new Date,i):1;if(e>0){const s=a.dailyRate||.0027,{interest:i}=Ms(n.balance||0,s,e);i>0&&(await(0,G.mZ)(t,{balance:(0,G.GV)(i),lastInterestDate:(0,G.O5)()}),F("\ud30c\ud0b9\ud1b5\uc7a5 \uc774\uc790 ".concat(Ts(i),"\uc6d0\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),"success"))}}}else await(0,G.BN)(t,{balance:0,lastInterestDate:(0,G.O5)()})}const n=await(0,G.x7)(t);if(n.exists()){const e=n.data().balance||0;A(e);const t=Es(e,1);T(t)}const i=(0,G.rJ)(G.db,"users",y,"products"),l=await(0,G.GG)(i),r=[],d=[],c=[];l.forEach(e=>{var t;const s=(0,o.A)((0,o.A)({id:e.id},e.data()),{},{maturityDate:null!==(t=e.data().maturityDate)&&void 0!==t&&t.toDate?e.data().maturityDate.toDate():e.data().maturityDate});"deposit"===s.type?r.push(s):"savings"===s.type?d.push(s):"loan"===s.type&&c.push(s)}),E(r),D(d),O(c)}catch(t){console.error("\ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",t),F("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}finally{v(!1)}}},[y,s]);(0,a.useEffect)(()=>{!u&&y&&Q()},[y,u,Q]),(0,a.useEffect)(()=>{void 0!==(null===m||void 0===m?void 0:m.cash)&&(P(m.cash),console.log("[ParkingAccount] currentCash \uc5c5\ub370\uc774\ud2b8:",m.cash))},[null===m||void 0===m?void 0:m.cash]);const H=(e,t)=>W({isOpen:!0,product:e,type:t}),q=()=>W({isOpen:!1,product:null,type:""}),U=async e=>{console.log("--- handleMaturity \uc2dc\uc791 ---"),console.log("\ucc98\ub9ac\ud560 \uc0c1\ud488:",e);const{id:t,name:s,type:a,balance:n,termInDays:i,rate:o}=e,l="loan"===a;if(!y)return F("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void console.error("handleMaturity: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=o,{total:d,interest:c}=Ms(n,r,i);if(console.log("\uacc4\uc0b0 \uacb0\uacfc: \uc6d0\uae08=".concat(n,", \uc774\uc790=").concat(c,", \ucd1d\uc561=").concat(d)),window.confirm("\ub9cc\uae30 \uc218\ub839: \uc6d0\uae08 ".concat(Ts(n),"\uc6d0 + \uc774\uc790 ").concat(Ts(c),"\uc6d0 = ").concat(Ts(d),"\uc6d0\uc744 \uc218\ub839\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){v(!0),console.log("\ub9cc\uae30 \ucc98\ub9ac \uc2dc\uc791...");try{const e=(0,G.H9)(G.db,"users",y,"products",String(t));console.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,G.c4)(G.db,async t=>{console.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const s=(0,G.H9)(G.db,"users",y),a=l?-d:d;console.log("\ud604\uae08 \ubcc0\uacbd: ".concat(a)),t.update(s,{cash:(0,G.GV)(a)}),console.log("\uc0ac\uc6a9\uc790 \ud604\uae08 \uc5c5\ub370\uc774\ud2b8 \uc608\uc57d"),t.delete(e),console.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),console.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),console.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5"),F("\ub9cc\uae30 \uc218\ub839 \uc644\ub8cc: ".concat(Ts(d),"\uc6d0"),"success"),(0,hs.Mx)(G.db,{classCode:null===m||void 0===m?void 0:m.classCode,userId:y,userName:(null===m||void 0===m?void 0:m.name)||"\uc0ac\uc6a9\uc790",type:hs.gI.DEPOSIT_MATURITY,description:"".concat(s," \ub9cc\uae30 \uc218\ub839 (\uc6d0\uae08: ").concat(Ts(n),", \uc774\uc790: ").concat(Ts(c),")"),amount:d,metadata:{productName:s,productType:a,principal:n,interest:c,total:d}}),h&&(console.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),h().then(()=>{console.log("[ParkingAccount] \ub9cc\uae30 \uc218\ub839 \ud6c4 userDoc \uac31\uc2e0 \uc644\ub8cc")})),console.log("\uc804\uccb4 \ub370\uc774\ud130 \ub2e4\uc2dc \ub85c\ub4dc"),await Q()}catch(x){console.error("\ub9cc\uae30 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",x),F("\ucc98\ub9ac \uc624\ub958: ".concat(x.message),"error"),void 0!==(null===m||void 0===m?void 0:m.cash)&&(console.log("\uc624\ub958 \ubc1c\uc0dd\uc73c\ub85c \ud604\uae08 \ub864\ubc31:",m.cash),P(m.cash))}finally{v(!1),console.log("--- handleMaturity \uc885\ub8cc ---")}}else console.log("\uc0ac\uc6a9\uc790\uac00 \ub9cc\uae30 \uc218\ub839\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.")},J=async e=>{console.log("--- handleCancelEarly \uc2dc\uc791 ---"),console.log("\uc911\ub3c4 \ud574\uc9c0\ud560 \uc0c1\ud488:",e);const{id:t,name:s,type:a,balance:n}=e,i="loan"===a;if(!y)return F("\uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),void console.error("handleCancelEarly: userId\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=i?"\ub300\ucd9c\uae08 ".concat(Ts(n),"\uc6d0\uc744 \uc0c1\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):"'".concat(s,"'\uc744(\ub97c) \uc911\ub3c4 \ud574\uc9c0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? (\uc774\uc790 \uc5c6\uc774 \uc6d0\uae08\ub9cc \ubc18\ud658\ub429\ub2c8\ub2e4)");if(!window.confirm(o))return void console.log("\uc0ac\uc6a9\uc790\uac00 \uc911\ub3c4 \ud574\uc9c0\ub97c \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.");v(!0),console.log("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc2dc\uc791...");const l={deposit:[...M],savings:[...z],loan:[...R]},r=B,d=i?-n:n;P(e=>e+d),"deposit"===a?E(e=>e.filter(e=>e.id!==t)):"savings"===a?D(e=>e.filter(e=>e.id!==t)):"loan"===a&&O(e=>e.filter(e=>e.id!==t));try{const e=(0,G.H9)(G.db,"users",y,"products",String(t));console.log("Firestore \ubb38\uc11c \ucc38\uc870:",e.path),await(0,G.c4)(G.db,async t=>{var s,a;console.log("\ud2b8\ub79c\uc7ad\uc158 \uc2dc\uc791");const o=(0,G.H9)(G.db,"users",y),l=await t.get(o);if(!l.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=null!==(s=null===(a=l.data())||void 0===a?void 0:a.cash)&&void 0!==s?s:0;if(console.log("\ud604\uc7ac \ubcf4\uc720 \ud604\uae08 (DB): ".concat(r)),i&&r<n)throw new Error("\ub300\ucd9c\uae08\uc744 \uc0c1\ud658\ud558\uae30\uc5d0 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");t.update(o,{cash:(0,G.GV)(d)}),console.log("\uc0ac\uc6a9\uc790 \ud604\uae08 \ubcc0\uacbd (".concat(d,") \uc608\uc57d")),t.delete(e),console.log("\uc0c1\ud488 \ubb38\uc11c \uc0ad\uc81c \uc608\uc57d"),console.log("\ud2b8\ub79c\uc7ad\uc158 \ucee4\ubc0b \uc2dc\ub3c4")}),console.log("\ud2b8\ub79c\uc7ad\uc158 \uc131\uacf5"),F("".concat(i?"\ub300\ucd9c \uc0c1\ud658":"\uc911\ub3c4 \ud574\uc9c0"," \uc644\ub8cc. \uc6d0\uae08 ").concat(Ts(n),"\uc6d0\uc774 \ubc18\ud658\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),"success");const o=i?hs.gI.LOAN_REPAY:hs.gI.DEPOSIT_WITHDRAW;(0,hs.Mx)(G.db,{classCode:null===m||void 0===m?void 0:m.classCode,userId:y,userName:(null===m||void 0===m?void 0:m.name)||"\uc0ac\uc6a9\uc790",type:o,description:i?"\ub300\ucd9c \uc0c1\ud658: ".concat(s," (").concat(Ts(n),"\uc6d0)"):"\uc911\ub3c4 \ud574\uc9c0: ".concat(s," (\uc6d0\uae08 ").concat(Ts(n),"\uc6d0 \ubc18\ud658)"),amount:d,metadata:{productName:s,productType:a,principal:n,isEarlyCancellation:!0}}),h&&(console.log("userDoc \uac31\uc2e0 \uc2dc\uc791"),h()),await Q()}catch(c){console.error("\uc911\ub3c4 \ud574\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",c),F("\ucc98\ub9ac \uc624\ub958: ".concat(c.message),"error"),E(l.deposit),D(l.savings),O(l.loan),P(r)}finally{v(!1),console.log("--- handleCancelEarly \uc885\ub8cc ---")}},V=async e=>{if(g()){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc0c1\ud488(".concat(e.name,")\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){v(!0);try{const t=(0,G.H9)(G.db,"users",e.userId,"products",e.id);await(0,G.kd)(t),F("\uc0c1\ud488\uc774 \uac15\uc81c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success"),Q()}catch(t){console.error("\uad00\ub9ac\uc790 \uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",t),F("\uc0ad\uc81c \ucc98\ub9ac \uc624\ub958: ".concat(t.message),"error")}finally{v(!1)}}}else F("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.","error")};return u?(0,L.jsx)("div",{style:Is.container,children:"\uae08\uc735 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."}):p?(0,L.jsxs)("div",{style:Is.container,children:[(0,L.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"24px",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0",position:"relative"},children:[(0,L.jsx)("button",{onClick:()=>r&&r("parking"),style:{padding:"12px 24px",border:"none",background:"parking"===l?"rgba(0, 255, 242, 0.1)":"none",cursor:"pointer",fontSize:"17px",fontWeight:"parking"===l?"700":"500",color:"parking"===l?"#00fff2":"#94a3b8",borderBottom:"3px solid ".concat("parking"===l?"#00fff2":"transparent"),marginBottom:"-2px",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease"},children:"\ub098\uc758 \uae08\uc735 \ud604\ud669"}),g&&g()&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("button",{onClick:()=>r&&r("admin"),style:{padding:"12px 24px",border:"none",background:"admin"===l?"rgba(0, 255, 242, 0.1)":"none",cursor:"pointer",fontSize:"17px",fontWeight:"admin"===l?"700":"500",color:"admin"===l?"#00fff2":"#94a3b8",borderBottom:"3px solid ".concat("admin"===l?"#00fff2":"transparent"),marginBottom:"-2px",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease"},children:"\uc0c1\ud488 \uad00\ub9ac"}),(0,L.jsx)("button",{onClick:()=>{r&&r("userProducts"),d&&d()},style:{padding:"12px 24px",border:"none",background:"userProducts"===l?"rgba(0, 255, 242, 0.1)":"none",cursor:"pointer",fontSize:"17px",fontWeight:"userProducts"===l?"700":"500",color:"userProducts"===l?"#00fff2":"#94a3b8",borderBottom:"3px solid ".concat("userProducts"===l?"#00fff2":"transparent"),marginBottom:"-2px",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease"},children:"\uc720\uc800 \uc0c1\ud488 \uc870\ud68c"})]})]}),w&&(0,L.jsx)("div",{style:Is.message(k),children:w}),"userProducts"===l&&g&&g()&&(0,L.jsxs)("div",{style:{backgroundColor:"rgba(20, 20, 35, 0.6)",borderRadius:"16px",padding:"32px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,L.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"16px",color:"#fff"},children:"\uc720\uc800\ubcc4 \uac00\uc785 \uc0c1\ud488 \uc870\ud68c \ubc0f \uad00\ub9ac"}),(0,L.jsx)("p",{style:{fontSize:"14px",color:"#94a3b8",marginBottom:"20px"},children:"\ud074\ub798\uc2a4 \ub0b4 \ubaa8\ub4e0 \uc720\uc800\uc758 \uac00\uc785 \uc0c1\ud488\uc744 \uc870\ud68c\ud558\uace0 \ud544\uc694\uc2dc \uac15\uc81c \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),0===c.length?(0,L.jsx)("p",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"\uac00\uc785\ub41c \uc0c1\ud488\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsxs)("div",{style:{overflowX:"auto"},children:[(0,L.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderBottom:"2px solid rgba(255, 255, 255, 0.1)"},children:[(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uc0ac\uc6a9\uc790"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uc885\ub958"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uc794\uc561/\uae08\uc561"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uae08\ub9ac(\uc77c)"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uae30\uac04(\uc77c)"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\ub9cc\uae30\uc77c"}),(0,L.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"14px",fontWeight:"600",color:"#94a3b8"},children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:c.map((e,t)=>{const s="deposit"===e.type?"\uc608\uae08":"savings"===e.type?"\uc801\uae08":"loan"===e.type?"\ub300\ucd9c":"\uae30\ud0c0";return(0,L.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,L.jsx)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:e.userName}),(0,L.jsx)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:e.name}),(0,L.jsx)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:s}),(0,L.jsxs)("td",{style:{padding:"12px",fontSize:"14px",color:"#00fff2"},children:[(0,As.bL)(e.balance||0),"\uc6d0"]}),(0,L.jsxs)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:[e.rate,"%"]}),(0,L.jsxs)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:[e.termInDays,"\uc77c"]}),(0,L.jsx)("td",{style:{padding:"12px",fontSize:"14px",color:"#e2e8f0"},children:e.maturityDate?new Date(e.maturityDate).toLocaleDateString("ko-KR"):"-"}),(0,L.jsx)("td",{style:{padding:"12px"},children:(0,L.jsx)("button",{onClick:()=>x&&x(e),style:(0,o.A)((0,o.A)({},Is.button(!1,"danger")),{},{fontSize:"12px",padding:"6px 12px"}),children:"\uc0ad\uc81c"})})]},"".concat(e.userId,"-").concat(e.id,"-").concat(t))})})]}),(0,L.jsxs)("div",{style:{marginTop:"20px",textAlign:"right",color:"#94a3b8",fontSize:"14px"},children:["\ucd1d ",c.length,"\uac1c\uc758 \uc0c1\ud488"]})]})]}),"parking"===l&&(0,L.jsxs)("div",{style:Is.grid,children:[(0,L.jsx)(_s,{balance:S,dailyInterest:I,onDeposit:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return F("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");v(!0);const s=S,a=B;A(e=>e+t);try{if(!await b(t,"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08: ".concat(Ts(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");await(0,G.c4)(G.db,async e=>{const s=(0,G.H9)(G.db,"users",y,"financials","parkingAccount");(await e.get(s)).exists()?e.update(s,{balance:(0,G.GV)(t)}):e.set(s,{balance:t,lastInterestDate:(0,G.O5)()})}),F("".concat(Ts(t),"\uc6d0 \uc785\uae08 \uc644\ub8cc."),"success"),(0,hs.Mx)(G.db,{classCode:null===m||void 0===m?void 0:m.classCode,userId:y,userName:(null===m||void 0===m?void 0:m.name)||"\uc0ac\uc6a9\uc790",type:hs.gI.PARKING_DEPOSIT,description:"\ud30c\ud0b9\ud1b5\uc7a5 \uc785\uae08 ".concat(Ts(t),"\uc6d0"),amount:-t,metadata:{parkingBalance:S+t}}),await Q()}catch(n){F("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),A(s),P(a)}finally{v(!1)}},onWithdraw:async e=>{const t=parseFloat(e);if(isNaN(t)||t<=0)return F("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");v(!0);const s=S,a=B;A(e=>e-t);try{await(0,G.c4)(G.db,async e=>{var s,a;const n=(0,G.H9)(G.db,"users",y,"financials","parkingAccount");if((null!==(s=null===(a=(await e.get(n)).data())||void 0===a?void 0:a.balance)&&void 0!==s?s:0)<t)throw new Error("\ud30c\ud0b9\ud1b5\uc7a5 \uc794\uc561\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");e.update(n,{balance:(0,G.GV)(-t)})});if(!await f(t,"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08: ".concat(Ts(t),"\uc6d0")))throw new Error("\ubcf4\uc720 \ud604\uae08 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");F("".concat(Ts(t),"\uc6d0 \ucd9c\uae08 \uc644\ub8cc."),"success"),(0,hs.Mx)(G.db,{classCode:null===m||void 0===m?void 0:m.classCode,userId:y,userName:(null===m||void 0===m?void 0:m.name)||"\uc0ac\uc6a9\uc790",type:hs.gI.PARKING_WITHDRAW,description:"\ud30c\ud0b9\ud1b5\uc7a5 \ucd9c\uae08 ".concat(Ts(t),"\uc6d0"),amount:t,metadata:{parkingBalance:S-t}}),await Q()}catch(n){F("\ucc98\ub9ac \uc624\ub958: ".concat(n.message),"error"),A(s),P(a)}finally{v(!1)}},isProcessing:j,userCash:B}),(0,L.jsx)(Os,{title:"\uc608\uae08",icon:zs.deposits,subscribedProducts:M,availableProducts:s,onSubscribe:e=>H(e,"deposits"),onCancel:J,onMaturity:U,isAdmin:g(),onAdminDelete:V}),(0,L.jsx)(Os,{title:"\uc801\uae08",icon:zs.savings,subscribedProducts:z,availableProducts:n,onSubscribe:e=>H(e,"savings"),onCancel:J,onMaturity:U,isAdmin:g(),onAdminDelete:V}),(0,L.jsx)(Os,{title:"\ub300\ucd9c",icon:zs.loans,subscribedProducts:R,availableProducts:i,onSubscribe:e=>H(e,"loans"),onCancel:J,onMaturity:U,isAdmin:g(),onAdminDelete:V})]}),(0,L.jsx)(Ls,{isOpen:_.isOpen,onClose:q,product:_.product,onConfirm:async e=>{console.log("--- handleSubscribe \uc2dc\uc791 ---");const t=parseFloat(e),{product:s,type:a}=_;if(console.log("\uac00\uc785\ud560 \uc0c1\ud488:",s),console.log("\uac00\uc785 \uc720\ud615: ".concat(a,", \uac00\uc785 \uae08\uc561: ").concat(t)),isNaN(t)||t<=0)return console.error("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uae08\uc561:",e),F("\uc720\ud6a8\ud55c \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694.","error");if(s.minAmount&&t<s.minAmount)return console.error("\ucd5c\uc18c \uac00\uc785 \uae08\uc561 \ubbf8\ub2ec: ".concat(t," < ").concat(s.minAmount)),F("\ucd5c\uc18c \uac00\uc785 \uae08\uc561\uc740 ".concat(Ts(s.minAmount),"\uc6d0\uc785\ub2c8\ub2e4."),"error");if(s.maxAmount&&t>s.maxAmount)return console.error("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4 \ucd08\uacfc: ".concat(t," > ").concat(s.maxAmount)),F("\ucd5c\ub300 \uac00\uc785 \ud55c\ub3c4\ub294 ".concat(Ts(s.maxAmount),"\uc6d0\uc785\ub2c8\ub2e4."),"error");v(!0),q();const n="temp_".concat(Date.now()),i=new Date(Date.now()+24*s.termInDays*60*60*1e3),o={id:n,name:s.name,termInDays:s.termInDays,rate:s.dailyRate,balance:t,startDate:new Date,maturityDate:i,type:"deposits"===a?"deposit":"savings"===a?"savings":"loan",isOptimistic:!0};"deposit"===o.type?E(e=>[...e,o]):"savings"===o.type?D(e=>[...e,o]):"loan"===o.type&&O(e=>[...e,o]);const l="loans"===a?t:-t;P(e=>e+l);try{await(0,G.c4)(G.db,async e=>{var n,o;const r=(0,G.H9)(G.db,"users",y),d=await e.get(r);if(!d.exists())throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=null!==(n=null===(o=d.data())||void 0===o?void 0:o.cash)&&void 0!==n?n:0;if("loans"!==a&&c<t)throw new Error("\ubcf4\uc720 \ud604\uae08\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4.");const x={name:s.name,termInDays:s.termInDays,rate:s.dailyRate,balance:t,startDate:(0,G.O5)(),maturityDate:i,type:"deposits"===a?"deposit":"savings"===a?"savings":"loan"},p=(0,G.H9)((0,G.rJ)(G.db,"users",y,"products"));e.set(p,x),e.update(r,{cash:(0,G.GV)(l)})}),F("\uc0c1\ud488 \uac00\uc785\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success");const e="deposits"===a||"savings"===a?hs.gI.DEPOSIT_CREATE:hs.gI.LOAN_CREATE;(0,hs.Mx)(G.db,{classCode:null===m||void 0===m?void 0:m.classCode,userId:y,userName:(null===m||void 0===m?void 0:m.name)||"\uc0ac\uc6a9\uc790",type:e,description:"".concat(s.name," \uac00\uc785 (").concat(Ts(t),"\uc6d0)"),amount:l,metadata:{productName:s.name,productType:a,termInDays:s.termInDays,dailyRate:s.dailyRate,maturityDate:i.toISOString()}}),await Q(),h&&h()}catch(r){console.error("\uac00\uc785 \ucc98\ub9ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",r),F("\uac00\uc785 \ucc98\ub9ac \uc624\ub958: ".concat(r.message),"error"),"deposit"===o.type?E(e=>e.filter(e=>e.id!==n)):"savings"===o.type?D(e=>e.filter(e=>e.id!==n)):"loan"===o.type&&O(e=>e.filter(e=>e.id!==n)),P(e=>e-l)}finally{v(!1)}},isProcessing:j})]}):(0,L.jsx)("div",{style:Is.container,children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})},Bs=e=>Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,dailyRate:void 0===e.dailyRate||isNaN(e.dailyRate)?0:parseFloat(e.dailyRate),termInDays:void 0===e.termInDays||isNaN(e.termInDays)?1:parseInt(e.termInDays),minAmount:void 0===e.minAmount||isNaN(e.minAmount)?0:parseInt(e.minAmount),maxAmount:void 0===e.maxAmount||isNaN(e.maxAmount)?0:parseInt(e.maxAmount)})):(console.error("convertAdminProductsToAccountFormat: \uc785\ub825\uac12\uc774 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4.",e),[]),Ps=()=>{var e,t,s,l,r;const d=(0,i.As)(),c=(0,n.Zp)(),[x,p]=(0,a.useState)(null),[m,u]=(0,a.useState)(""),[h,g]=(0,a.useState)("parking"),[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),[v,w]=(0,a.useState)([]),[k,C]=(0,a.useState)([]),[S,A]=(0,a.useState)([]),I=async()=>{var e,t,s;if(null!==d&&void 0!==d&&null!==(e=d.userDoc)&&void 0!==e&&e.classCode&&(null!==(t=d.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(s=d.userDoc)||void 0===s?void 0:s.role))){b(!0);try{const e=(0,$.P)((0,$.rJ)(G.db,"users"),(0,$._M)("classCode","==",d.userDoc.classCode)),t=await(0,$.GG)(e),s={};t.forEach(e=>{s[e.id]=(0,o.A)({id:e.id,name:e.data().name||e.data().nickname||"\uc54c \uc218 \uc5c6\uc74c"},e.data())});const a=[],n=Object.keys(s).map(async e=>{const t=(0,$.rJ)(G.db,"users",e,"products");return(await(0,$.GG)(t)).docs.map(t=>{var a;const n=t.data();return(0,o.A)((0,o.A)({firestoreId:t.id,userId:e,userName:s[e].name},n),{},{maturityDate:null!==(a=n.maturityDate)&&void 0!==a&&a.toDate?n.maturityDate.toDate():n.maturityDate})})});(await Promise.all(n)).forEach(e=>{a.push(...e)}),A(a),console.log("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc644\ub8cc:",a)}catch(a){console.error("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",a),p("\uc720\uc800 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),u("error")}finally{b(!1)}}},[T,M]=(0,a.useState)([]),[E,z]=(0,a.useState)([]),[D,R]=(0,a.useState)([]);(0,a.useEffect)(()=>{var e;d&&!d.loading&&d.user&&null!==(e=d.userDoc)&&void 0!==e&&e.classCode?(async()=>{var e;const t=null===d||void 0===d||null===(e=d.userDoc)||void 0===e?void 0:e.classCode;if(t&&"\ubbf8\uc9c0\uc815"!==t){b(!0);try{const e=await(0,G.jy)(t,!0,"Banking");e.deposits?j(e.deposits):j([]),e.savings?w(e.savings):w([]),e.loans?C(e.loans):C([])}catch(s){console.error("\ubc45\ud0b9 \uc0c1\ud488 \ub85c\ub4dc \uc911 \uc624\ub958:",s),p("\ub370\uc774\ud130 \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),u("error")}finally{b(!1)}}else console.warn("[Banking] \uc720\ud6a8\ud55c \ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \ubc45\ud0b9 \uc0c1\ud488\uc744 \ub85c\ub4dc\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")})():!d||d.loading||d.user||(setParkingSavingsProducts([]),w([]),C([]))},[null===d||void 0===d?void 0:d.user,null===d||void 0===d?void 0:d.loading,null===d||void 0===d||null===(e=d.userDoc)||void 0===e?void 0:e.classCode]),(0,a.useEffect)(()=>{M(Bs(y)),z(Bs(v)),R(Bs(k))},[y,v,k]);const O=(e,t,s,a)=>{let n,i;switch(e){case"deposits":n=y,i=j;break;case"installments":n=v,i=w;break;case"loans":n=k,i=C;break;default:return}i(n.map((e,n)=>{if(n===t){const t=(0,o.A)({},e);if("termInDays"===s||"minAmount"===s||"maxAmount"===s){const e=parseInt(a);t[s]=isNaN(e)||e<("termInDays"===s?1:0)?"termInDays"===s?1:0:e}else if("dailyRate"===s){const e=parseFloat(a);t.dailyRate=isNaN(e)||e<0?0:e}else"name"===s&&(t[s]=a);return t}return e}))},_=async e=>{var t;if(null===d||void 0===d||null===(t=d.userDoc)||void 0===t||!t.classCode)return p("\ud559\uae09 \ucf54\ub4dc\uac00 \uc5c6\uc5b4 \uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void u("error");b(!0);try{let t,s;switch(e){case"deposits":t=y,s="deposits";break;case"installments":t=v,s="savings";break;case"loans":t=k,s="loans";break;default:return}await(0,G.OP)(d.userDoc.classCode,s,t),p("".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),u("success"),setTimeout(()=>{p(null),u("")},3e3)}catch(s){console.error("".concat(e," \uc0c1\ud488 \uc800\uc7a5 \uc911 \uc624\ub958:"),s),p("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),u("error")}finally{b(!1)}},W=e=>{const t={id:Date.now(),name:"\uc0c8 ".concat("deposits"===e?"\uc608\uae08":"installments"===e?"\uc801\uae08":"\ub300\ucd9c"," \uc0c1\ud488"),dailyRate:.01,termInDays:365,minAmount:"loans"===e?0:1e5,maxAmount:"loans"===e?1e6:0};switch(e){case"deposits":j([...y,t]);break;case"installments":w([...v,t]);break;case"loans":C([...k,t])}},B=async(e,t)=>{var s;if(f)return;let a,n;switch(e){case"deposits":a=y,n=j;break;case"installments":a=v,n=w;break;case"loans":a=k,n=C;break;default:return}const i=a.filter((e,s)=>s!==t);if(n(i),null!==d&&void 0!==d&&null!==(s=d.userDoc)&&void 0!==s&&s.classCode){b(!0);try{const t="deposits"===e?"deposits":"installments"===e?"savings":"loans";await(0,G.OP)(d.userDoc.classCode,t,i),p("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),u("info"),setTimeout(()=>{p(null),u("")},2e3)}catch(o){console.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",o),p("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),u("error"),n(a)}finally{b(!1)}}};return d.loading?(0,L.jsx)(ga,{}):(0,L.jsxs)(Wt.LN,{children:[f&&(0,L.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,L.jsx)(ga,{})}),(0,L.jsxs)("div",{className:"px-4 py-6 sm:px-6",children:[(0,L.jsx)(Wt.zY,{title:"\ud1b5\ud569 \uae08\uc735 \uad00\ub9ac",subtitle:"\uc608\uae08, \uc801\uae08, \ub300\ucd9c \uc0c1\ud488\uc744 \uad00\ub9ac\ud558\uc138\uc694",icon:N.A,backButton:(0,L.jsx)(Wt.rA,{variant:"ghost",icon:V.A,onClick:()=>c(-1),children:"\ub4a4\ub85c\uac00\uae30"})}),x&&(0,L.jsx)("div",{className:"mb-4 p-4 rounded-xl ".concat("error"===m?"bg-red-900/40 text-red-200 border border-red-800/50":"success"===m?"bg-emerald-900/40 text-emerald-200 border border-emerald-800/50":"bg-blue-900/40 text-blue-200 border border-blue-800/50"),children:x}),(0,L.jsxs)("div",{className:"admin"===h?"content-box":"",children:[("parking"===h||"userProducts"===h)&&(0,L.jsx)(Ws,{auth:d,depositProducts:T,installmentProducts:E,loanProducts:D,activeView:h,onViewChange:g,onLoadUserProducts:I,allUserProducts:S,onDeleteUserProduct:async e=>{var t,s;if(console.log("\uc0ad\uc81c \uc2dc\ub3c4:",e),!(null!==(t=d.userDoc)&&void 0!==t&&t.isAdmin||"admin"===(null===(s=d.userDoc)||void 0===s?void 0:s.role)))return console.log("\uad00\ub9ac\uc790 \uad8c\ud55c \uc5c6\uc74c"),void alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(window.confirm("'".concat(e.userName,"'\ub2d8\uc758 '").concat(e.name,"' \uc0c1\ud488\uc744 \uac15\uc81c\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))){b(!0);try{const t=e.firestoreId||String(e.id);console.log("\uc0ad\uc81c \uacbd\ub85c:","users/".concat(e.userId,"/products/").concat(t)),console.log("\uc0ac\uc6a9\ud560 \ubb38\uc11c ID:",t);const s=(0,$.H9)(G.db,"users",e.userId,"products",t);console.log("\uc0ad\uc81c \uc2dc\uc791..."),await(0,$.kd)(s),console.log("\uc0ad\uc81c \uc644\ub8cc"),p("\uc0c1\ud488\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),u("success"),console.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc2dc\uc791..."),await I(),console.log("\ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc"),setTimeout(()=>{p(null),u("")},3e3)}catch(a){console.error("\uc0c1\ud488 \uc0ad\uc81c \uc911 \uc624\ub958:",a),p("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(a.message)),u("error")}finally{b(!1)}}else console.log("\uc0ac\uc6a9\uc790\uac00 \uc0ad\uc81c \ucde8\uc18c")},isLoading:f}),"admin"===h&&d.user&&((null===(t=d.userDoc)||void 0===t?void 0:t.isAdmin)||"admin"===(null===(s=d.userDoc)||void 0===s?void 0:s.role))&&(0,L.jsxs)("div",{children:[(0,L.jsx)("h2",{className:"admin-header",children:"\uad00\ub9ac\uc790 - \uae08\uc735 \uc0c1\ud488 \uad00\ub9ac (\uc77c \ubcf5\ub9ac \uae30\uc900)"}),(0,L.jsxs)("div",{className:"admin-section",children:[(0,L.jsx)("h3",{children:"\ud30c\ud0b9 \uc608\uae08 \uc0c1\ud488"}),(0,L.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,L.jsxs)("table",{className:"admin-table",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\ucd5c\uc18c\uae08\uc561(\uc6d0)"}),(0,L.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:y.map((e,t)=>(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"text",value:e.name||"",onChange:e=>O("deposits",t,"name",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>O("deposits",t,"termInDays",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>O("deposits",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.01",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>O("deposits",t,"minAmount",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("button",{onClick:()=>B("deposits",t),className:"admin-button-small delete-button ".concat(f?"disabled-button":""),disabled:f,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,L.jsxs)("div",{className:"admin-action-buttons",children:[(0,L.jsx)("button",{onClick:()=>W("deposits"),className:"admin-button-small add-button ".concat(f?"disabled-button":""),disabled:f,children:"\ucd94\uac00"}),(0,L.jsx)("button",{onClick:()=>_("deposits"),className:"admin-button-small save-button ".concat(f?"disabled-button":""),disabled:f,children:"\uc608\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,L.jsxs)("div",{className:"admin-section",children:[(0,L.jsx)("h3",{children:"\ud30c\ud0b9 \uc801\uae08 \uc0c1\ud488"}),(0,L.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,L.jsxs)("table",{className:"admin-table",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\ucd5c\uc18c \uc6d4\ub0a9\uc785(\uc6d0)"}),(0,L.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:v.map((e,t)=>(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"text",value:e.name||"",onChange:e=>O("installments",t,"name",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>O("installments",t,"termInDays",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>O("installments",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.011",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"0",value:e.minAmount||0,onChange:e=>O("installments",t,"minAmount",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("button",{onClick:()=>B("installments",t),className:"admin-button-small delete-button ".concat(f?"disabled-button":""),disabled:f,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,L.jsxs)("div",{className:"admin-action-buttons",children:[(0,L.jsx)("button",{onClick:()=>W("installments"),className:"admin-button-small add-button ".concat(f?"disabled-button":""),disabled:f,children:"\ucd94\uac00"}),(0,L.jsx)("button",{onClick:()=>_("installments"),className:"admin-button-small save-button ".concat(f?"disabled-button":""),disabled:f,children:"\uc801\uae08 \uc0c1\ud488 \uc800\uc7a5"})]})]}),(0,L.jsxs)("div",{className:"admin-section",style:{borderBottom:"none"},children:[(0,L.jsx)("h3",{children:"\ud30c\ud0b9 \ub300\ucd9c \uc0c1\ud488"}),(0,L.jsx)("p",{className:"admin-info-text",children:"\uc77c \uc774\uc728(%)\uacfc \uae30\uac04(\uc77c)\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \ubcc0\uacbd \ud6c4 '\uc800\uc7a5' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."}),(0,L.jsxs)("table",{className:"admin-table",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{style:{width:"25%"},children:"\uc0c1\ud488\uba85"}),(0,L.jsx)("th",{style:{width:"15%"},children:"\uae30\uac04(\uc77c)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\uc77c \uc774\uc728(%)"}),(0,L.jsx)("th",{style:{width:"18%"},children:"\ucd5c\ub300 \ub300\ucd9c\uc561(\uc6d0)"}),(0,L.jsx)("th",{style:{width:"12%"},children:"\uad00\ub9ac"})]})}),(0,L.jsx)("tbody",{children:k.map((e,t)=>(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"text",value:e.name||"",onChange:e=>O("loans",t,"name",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"1",value:e.termInDays||0,onChange:e=>O("loans",t,"termInDays",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",step:"0.001",min:"0",value:e.dailyRate||0,onChange:e=>O("loans",t,"dailyRate",e.target.value),className:"admin-input",placeholder:"\uc608: 0.05",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("input",{type:"number",min:"0",value:e.maxAmount||0,onChange:e=>O("loans",t,"maxAmount",e.target.value),className:"admin-input",disabled:f,style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}})}),(0,L.jsx)("td",{className:"admin-td",children:(0,L.jsx)("button",{onClick:()=>B("loans",t),className:"admin-button-small delete-button ".concat(f?"disabled-button":""),disabled:f,children:"\uc0ad\uc81c"})})]},e.id))})]}),(0,L.jsxs)("div",{className:"admin-action-buttons",children:[(0,L.jsx)("button",{onClick:()=>W("loans"),className:"admin-button-small add-button ".concat(f?"disabled-button":""),disabled:f,children:"\ucd94\uac00"}),(0,L.jsx)("button",{onClick:()=>_("loans"),className:"admin-button-small save-button ".concat(f?"disabled-button":""),disabled:f,children:"\ub300\ucd9c \uc0c1\ud488 \uc800\uc7a5"})]})]})]}),"admin"===h&&!(d.user&&(null!==(l=d.userDoc)&&void 0!==l&&l.isAdmin||"admin"===(null===(r=d.userDoc)||void 0===r?void 0:r.role)))&&(0,L.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800",children:"\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})]})]})]})};var Fs=s(458);function Qs(e){let{isOpen:t,onClose:s,userId:n,onSave:i}=e;const[l,r]=(0,a.useState)(Ce),[d,c]=(0,a.useState)("skinTone"),[x,p]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(t&&n){const e=Se(n);r(e),p(!1)}},[t,n]),!t)return null;const m=Ae(d);return(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"10px"},onClick:s,children:(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)",borderRadius:"20px",padding:"20px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",border:"2px solid #a78bfa40",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,L.jsxs)("h2",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#e8e8ff",display:"flex",alignItems:"center",gap:"10px"},children:[(0,L.jsx)("span",{style:{fontSize:"24px"},children:"\ud83d\udc64"}),"\uc544\ubc14\ud0c0 \uafb8\ubbf8\uae30"]}),(0,L.jsx)("button",{onClick:s,style:{background:"transparent",border:"none",color:"#9ca3af",fontSize:"24px",cursor:"pointer"},children:"\u2715"})]}),(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px",padding:"16px",background:"linear-gradient(135deg, #11182750 0%, #1f293750 100%)",borderRadius:"16px",border:"1px solid #374151"},children:(0,L.jsxs)("div",{style:{position:"relative"},children:[(0,L.jsx)(Ee,{config:l,size:150},JSON.stringify(l)),(0,L.jsx)("button",{onClick:()=>{const e={};Te.forEach(t=>{const s=Ae(t.id);if(s.length>0){const a=Math.floor(Math.random()*s.length);e[t.id]=s[a].id}}),r(e),p(!0)},style:{position:"absolute",bottom:"-10px",right:"-10px",width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.4)"},title:"\ub79c\ub364 \uc0dd\uc131",children:"\ud83c\udfb2"})]})}),(0,L.jsx)("div",{style:{display:"flex",gap:"6px",overflowX:"auto",overflowY:"hidden",paddingBottom:"12px",marginBottom:"12px",WebkitOverflowScrolling:"touch",scrollbarWidth:"thin",msOverflowStyle:"auto"},children:Te.map(e=>(0,L.jsxs)("button",{onClick:()=>c(e.id),style:{padding:"8px 12px",borderRadius:"10px",border:d===e.id?"2px solid #a78bfa":"2px solid transparent",background:d===e.id?"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)":"#374151",color:d===e.id?"#fff":"#9ca3af",fontSize:"12px",fontWeight:"600",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",minWidth:"fit-content"},children:[(0,L.jsx)("span",{style:{width:"14px",height:"14px",borderRadius:"50%",backgroundColor:e.icon,border:"2px solid rgba(255,255,255,0.3)",flexShrink:0}}),(0,L.jsx)("span",{children:e.name})]},e.id))}),(0,L.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(70px, 1fr))",gap:"8px",maxHeight:"200px",overflowY:"auto",padding:"8px",background:"#11182750",borderRadius:"12px",marginBottom:"16px"},children:m.map(e=>{const t=l[d]===e.id,s="hairstyle"===d&&!Ie(e.id,l.faceShape);return(0,L.jsxs)("button",{onClick:()=>!s&&(e=>{const t=(0,o.A)((0,o.A)({},l),{},{[d]:e});"faceShape"===d&&(Ie(l.hairstyle,e)||(t.hairstyle="short")),r(t),p(!0)})(e.id),disabled:s,style:{padding:"12px",borderRadius:"12px",border:t?"3px solid #a78bfa":"2px solid #374151",background:t?"linear-gradient(135deg, #a78bfa20 0%, #8b5cf620 100%)":"#1f2937",cursor:s?"not-allowed":"pointer",opacity:s?.4:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",minWidth:"70px",transition:"all 0.2s"},children:[e.color&&(0,L.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",backgroundColor:e.color,border:"2px solid rgba(255,255,255,0.3)",boxShadow:t?"0 0 10px ".concat(e.color):"none"}}),e.gradient&&(0,L.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:"linear-gradient(135deg, ".concat(e.gradient.join(", "),")"),border:"2px solid rgba(255,255,255,0.3)"}}),"faceShape"===d&&e.path&&(0,L.jsx)("div",{style:{width:"36px",height:"36px"},children:(0,L.jsx)("svg",{viewBox:"0 0 100 100",width:"36",height:"36",children:(0,L.jsx)("path",{d:e.path,fill:"#F5DEB3",stroke:t?"#a78bfa":"#666",strokeWidth:"2"})})}),e.icon&&"faceShape"!==d&&(0,L.jsx)("div",{style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:e.icon}),!e.color&&!e.gradient&&!e.path&&!e.icon&&(0,L.jsx)("div",{style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#e8e8ff"},children:"none"===e.id?"\u274c":"\u2713"}),(0,L.jsx)("span",{style:{fontSize:"11px",color:t?"#a78bfa":"#9ca3af",fontWeight:t?"600":"400",textAlign:"center"},children:e.name}),s&&(0,L.jsx)("span",{style:{fontSize:"9px",color:"#ef4444"},children:"\ube44\ud638\ud658"})]},e.id)})}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,L.jsx)("button",{onClick:()=>{r((0,o.A)({},Ce)),p(!0)},style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #374151",background:"transparent",color:"#9ca3af",fontSize:"14px",cursor:"pointer"},children:"\ucd08\uae30\ud654"}),(0,L.jsx)("button",{onClick:()=>{!function(e,t){try{return localStorage.setItem("avatar_".concat(e),JSON.stringify(t)),window.dispatchEvent(new CustomEvent("avatarChanged",{detail:{userId:e,config:t}})),!0}catch(s){return!1}}(n,l),p(!1),i&&i(l),s()},disabled:!x,style:{padding:"10px 24px",borderRadius:"10px",border:"none",background:x?"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)":"#374151",color:x?"#fff":"#6b7280",fontSize:"14px",fontWeight:"600",cursor:x?"pointer":"not-allowed",boxShadow:x?"0 4px 15px rgba(139, 92, 246, 0.4)":"none"},children:"\uc800\uc7a5\ud558\uae30"})]})]})})}function Hs(){var e;const{user:t,userDoc:s,logout:n}=(0,i.As)(),o=null===t||void 0===t?void 0:t.uid,l=(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.nickname)||(null===t||void 0===t?void 0:t.displayName)||"\uc0ac\uc6a9\uc790",[r,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)(null),[p,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[N,k]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[A,I]=(0,a.useState)(""),[T,E]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[R,_]=(0,a.useState)(""),[W,B]=(0,a.useState)(!1),[P,F]=(0,a.useState)(""),Q=(Number(null===s||void 0===s?void 0:s.cash)||0)+(Number(null===s||void 0===s?void 0:s.stockValue)||0)+(Number(null===s||void 0===s?void 0:s.realEstateValue)||0)+(Number(null===s||void 0===s?void 0:s.itemValue)||0),H=De(Q);(0,a.useEffect)(()=>{o&&(x(Se(o)),m(Le(o)))},[o]);const q=()=>{k(""),S(""),I(""),E(""),D(""),_(""),F(""),B(!1)},U={legendary:0,epic:1,rare:2,common:3},V=[...p].sort((e,t)=>{const s=Oe(e.id),a=Oe(t.id);return(U[null===s||void 0===s?void 0:s.rarity]||99)-(U[null===a||void 0===a?void 0:a.rarity]||99)}),Z=V.length>0?Oe(V[0].id):null;return t?(0,L.jsxs)("div",{className:"w-full min-h-full",style:{backgroundColor:"#0a0a12"},children:[(0,L.jsxs)("div",{className:"w-full max-w-4xl mx-auto px-4 md:px-6 py-6",children:[(0,L.jsx)("h1",{style:{fontSize:"28px",fontWeight:"800",background:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"24px"},children:"\ub0b4 \ud504\ub85c\ud544"}),(0,L.jsx)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #16213e 100%)",borderRadius:"24px",padding:"32px",marginBottom:"24px",border:"2px solid #374151",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.4)"},children:(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"24px"},children:[(0,L.jsxs)("div",{style:{position:"relative"},children:[(0,L.jsx)(Ee,{config:c,size:180}),(0,L.jsx)("button",{onClick:()=>d(!0),style:{position:"absolute",bottom:"5px",right:"5px",width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",border:"3px solid #1a1a2e",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(167, 139, 250, 0.4)"},title:"\uc544\ubc14\ud0c0 \uc218\uc815",children:"\u270f\ufe0f"})]}),(0,L.jsxs)("div",{style:{textAlign:"center"},children:[(0,L.jsx)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#e8e8ff",marginBottom:"8px"},children:l}),(0,L.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"linear-gradient(135deg, ".concat(H.color,"20 0%, ").concat(H.color,"10 100%)"),border:"2px solid ".concat(H.color),borderRadius:"20px",marginBottom:"12px"},children:[(0,L.jsx)("span",{style:{fontSize:"20px"},children:H.icon}),(0,L.jsxs)("span",{style:{color:H.color,fontWeight:"700",fontSize:"14px"},children:["Lv.",H.level," ",H.title]})]}),Z&&(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"8px"},children:[(0,L.jsx)("span",{style:{fontSize:"18px"},children:Z.icon}),(0,L.jsx)("span",{style:{color:"legendary"===Z.rarity?"#f59e0b":"epic"===Z.rarity?"#a78bfa":"rare"===Z.rarity?"#3b82f6":"#9ca3af",fontWeight:"600",fontSize:"13px"},children:Z.name})]}),(0,L.jsx)("div",{style:{marginTop:"12px"},children:(0,L.jsx)(Ut,{userId:o})})]})]})}),(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)",borderRadius:"20px",padding:"24px",marginBottom:"24px",border:"2px solid #374151"},children:[(0,L.jsxs)("h3",{style:{color:"#a78bfa",fontSize:"18px",fontWeight:"700",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,L.jsx)("span",{children:"\ud83d\udcca"})," \ub808\ubca8 \uc9c4\ud589\ub3c4"]}),(0,L.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,L.jsxs)("span",{style:{color:"#9ca3af",fontSize:"14px"},children:[H.icon," Lv.",H.level," ",H.title]}),(0,L.jsxs)("span",{style:{color:"#e8e8ff",fontSize:"14px",fontWeight:"600"},children:[H.progress.toFixed(1),"%"]})]}),(0,L.jsx)("div",{style:{height:"12px",background:"#374151",borderRadius:"6px",overflow:"hidden"},children:(0,L.jsx)("div",{style:{width:"".concat(H.progress,"%"),height:"100%",background:"linear-gradient(90deg, ".concat(H.color," 0%, ").concat(H.color,"99 100%)"),borderRadius:"6px",transition:"width 0.5s ease"}})}),(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:[(0,L.jsxs)("span",{children:["\ud604\uc7ac: ",(0,As.bL)(Q)]}),H.level<ze.length-1&&(0,L.jsxs)("span",{children:["\ub2e4\uc74c: ",(0,As.bL)((null===(e=ze[H.level+1])||void 0===e?void 0:e.minAssets)||0)]})]})]})]}),(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)",borderRadius:"20px",padding:"24px",marginBottom:"24px",border:"2px solid #374151"},children:[(0,L.jsxs)("h3",{style:{color:"#a78bfa",fontSize:"18px",fontWeight:"700",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,L.jsx)("span",{children:"\ud83c\udfc6"})," \ud68d\ub4dd\ud55c \uc5c5\uc801 (",p.length,"\uac1c)"]}),0===p.length?(0,L.jsx)("div",{style:{textAlign:"center",padding:"32px",color:"#6b7280"},children:"\uc544\uc9c1 \ud68d\ub4dd\ud55c \uc5c5\uc801\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,L.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"12px"},children:V.map(e=>{const t=Oe(e.id);if(!t)return null;const s={legendary:{bg:"#f59e0b20",border:"#f59e0b",text:"#f59e0b"},epic:{bg:"#a78bfa20",border:"#a78bfa",text:"#a78bfa"},rare:{bg:"#3b82f620",border:"#3b82f6",text:"#3b82f6"},common:{bg:"#6b728020",border:"#6b7280",text:"#9ca3af"}},a=s[t.rarity]||s.common;return(0,L.jsxs)("div",{style:{background:a.bg,border:"2px solid ".concat(a.border),borderRadius:"12px",padding:"16px",textAlign:"center",transition:"all 0.2s"},children:[(0,L.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:t.icon}),(0,L.jsx)("div",{style:{color:a.text,fontSize:"12px",fontWeight:"600",marginBottom:"4px"},children:t.name}),(0,L.jsx)("div",{style:{color:"#6b7280",fontSize:"10px"},children:new Date(e.unlockedAt).toLocaleDateString()})]},e.id)})})]}),(0,L.jsx)(Jt,{}),(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1e1e3f 0%, #16213e 100%)",borderRadius:"20px",padding:"24px",marginBottom:"24px",border:"2px solid #374151"},children:[(0,L.jsxs)("h3",{style:{color:"#a78bfa",fontSize:"18px",fontWeight:"700",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,L.jsx)(M.A,{size:20})," \uacc4\uc815 \uc124\uc815"]}),(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,L.jsx)("div",{style:{padding:"16px",background:"#0f0f23",borderRadius:"12px",border:"1px solid #374151",marginBottom:"8px"},children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)("span",{style:{color:"#9ca3af",fontSize:"14px"},children:"\ud604\uc7ac \ud559\uae09 \ucf54\ub4dc"}),(0,L.jsx)("span",{style:{color:"#e8e8ff",fontSize:"16px",fontWeight:"600"},children:(null===s||void 0===s?void 0:s.classCode)||"\uc5c6\uc74c"})]})}),(0,L.jsxs)("button",{onClick:()=>{h(!0),F("")},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#0f0f23",borderRadius:"12px",border:"1px solid #374151",cursor:"pointer",transition:"all 0.2s"},children:[(0,L.jsx)(K.A,{size:20,style:{color:"#a78bfa"}}),(0,L.jsx)("span",{style:{color:"#e8e8ff",fontSize:"14px",flex:1,textAlign:"left"},children:"\ub2c9\ub124\uc784 \ubcc0\uacbd"}),(0,L.jsx)(J.A,{size:18,style:{color:"#6b7280"}})]}),(0,L.jsxs)("button",{onClick:()=>{f(!0),F("")},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#0f0f23",borderRadius:"12px",border:"1px solid #374151",cursor:"pointer",transition:"all 0.2s"},children:[(0,L.jsx)(X.A,{size:20,style:{color:"#a78bfa"}}),(0,L.jsx)("span",{style:{color:"#e8e8ff",fontSize:"14px",flex:1,textAlign:"left"},children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"}),(0,L.jsx)(J.A,{size:18,style:{color:"#6b7280"}})]}),(0,L.jsxs)("button",{onClick:()=>{y(!0),F("")},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#0f0f23",borderRadius:"12px",border:"1px solid #374151",cursor:"pointer",transition:"all 0.2s"},children:[(0,L.jsx)(w.A,{size:20,style:{color:"#a78bfa"}}),(0,L.jsx)("span",{style:{color:"#e8e8ff",fontSize:"14px",flex:1,textAlign:"left"},children:"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd"}),(0,L.jsx)(J.A,{size:18,style:{color:"#6b7280"}})]}),(0,L.jsxs)("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"#0f0f23",borderRadius:"12px",border:"1px solid #374151",cursor:"pointer",transition:"all 0.2s",marginTop:"8px"},children:[(0,L.jsx)(O.A,{size:20,style:{color:"#9ca3af"}}),(0,L.jsx)("span",{style:{color:"#e8e8ff",fontSize:"14px",flex:1,textAlign:"left"},children:"\ub85c\uadf8\uc544\uc6c3"}),(0,L.jsx)(J.A,{size:18,style:{color:"#6b7280"}})]}),(0,L.jsxs)("button",{onClick:()=>{v(!0),F("")},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",cursor:"pointer",transition:"all 0.2s"},children:[(0,L.jsx)(Y.A,{size:20,style:{color:"#ef4444"}}),(0,L.jsx)("span",{style:{color:"#ef4444",fontSize:"14px",flex:1,textAlign:"left"},children:"\uacc4\uc815 \uc0ad\uc81c"}),(0,L.jsx)(J.A,{size:18,style:{color:"#ef4444"}})]})]})]})]}),(0,L.jsx)(Qs,{isOpen:r,onClose:()=>d(!1),userId:o,onSave:e=>{x(e)}}),u&&(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>{h(!1),q()},children:(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",border:"2px solid #374151"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("h3",{style:{color:"#e8e8ff",fontSize:"18px",fontWeight:"700",marginBottom:"20px"},children:"\ub2c9\ub124\uc784 \ubcc0\uacbd"}),(0,L.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"\uc0c8 \ub2c9\ub124\uc784 (2~10\uc790)",maxLength:10,style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #374151",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"12px"}}),P&&(0,L.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginBottom:"12px"},children:P}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("button",{onClick:()=>{h(!1),q()},style:{flex:1,padding:"12px",background:"#374151",border:"none",borderRadius:"10px",color:"#e8e8ff",fontSize:"14px",cursor:"pointer"},children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(N.trim())if(N.length<2||N.length>10)F("\ub2c9\ub124\uc784\uc740 2~10\uc790 \uc0ac\uc774\uc5ec\uc57c \ud569\ub2c8\ub2e4.");else{B(!0);try{const e=(0,$.H9)(G.db,"users",o);await(0,$.mZ)(e,{nickname:N.trim()}),alert("\ub2c9\ub124\uc784\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),h(!1),q()}catch(e){F("\ub2c9\ub124\uc784 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{B(!1)}}else F("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:W,style:{flex:1,padding:"12px",background:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",border:"none",borderRadius:"10px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:W?"not-allowed":"pointer",opacity:W?.7:1},children:W?"\ubcc0\uacbd \uc911...":"\ubcc0\uacbd"})]})]})}),g&&(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>{f(!1),q()},children:(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",border:"2px solid #374151"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("h3",{style:{color:"#e8e8ff",fontSize:"18px",fontWeight:"700",marginBottom:"20px"},children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"}),(0,L.jsx)("input",{type:"password",value:C,onChange:e=>S(e.target.value),placeholder:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638",style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #374151",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"10px"}}),(0,L.jsx)("input",{type:"password",value:A,onChange:e=>I(e.target.value),placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 (6\uc790 \uc774\uc0c1)",style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #374151",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"10px"}}),(0,L.jsx)("input",{type:"password",value:T,onChange:e=>E(e.target.value),placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778",style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #374151",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"12px"}}),P&&(0,L.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginBottom:"12px"},children:P}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("button",{onClick:()=>{f(!1),q()},style:{flex:1,padding:"12px",background:"#374151",border:"none",borderRadius:"10px",color:"#e8e8ff",fontSize:"14px",cursor:"pointer"},children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(C&&A&&T)if(A.length<6)F("\uc0c8 \ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");else if(A===T){B(!0);try{const e=Fs.IX.credential(t.email,C);await(0,Fs.kZ)(t,e),await(0,Fs.f3)(t,A),alert("\ube44\ubc00\ubc88\ud638\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),f(!1),q()}catch(e){"auth/wrong-password"===e.code?F("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."):F("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{B(!1)}}else F("\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");else F("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:W,style:{flex:1,padding:"12px",background:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",border:"none",borderRadius:"10px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:W?"not-allowed":"pointer",opacity:W?.7:1},children:W?"\ubcc0\uacbd \uc911...":"\ubcc0\uacbd"})]})]})}),b&&(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>{y(!1),q()},children:(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",border:"2px solid #374151"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("h3",{style:{color:"#e8e8ff",fontSize:"18px",fontWeight:"700",marginBottom:"20px"},children:"\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd"}),(0,L.jsxs)("p",{style:{color:"#9ca3af",fontSize:"13px",marginBottom:"16px"},children:["\ud604\uc7ac \ud559\uae09: ",(0,L.jsx)("span",{style:{color:"#a78bfa",fontWeight:"600"},children:(null===s||void 0===s?void 0:s.classCode)||"\uc5c6\uc74c"})]}),(0,L.jsx)("input",{type:"text",value:z,onChange:e=>D(e.target.value.toUpperCase()),placeholder:"\uc0c8 \ud559\uae09 \ucf54\ub4dc",style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #374151",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"12px",textTransform:"uppercase"}}),P&&(0,L.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginBottom:"12px"},children:P}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("button",{onClick:()=>{y(!1),q()},style:{flex:1,padding:"12px",background:"#374151",border:"none",borderRadius:"10px",color:"#e8e8ff",fontSize:"14px",cursor:"pointer"},children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if(z.trim()){B(!0);try{if(!await(0,G.JK)(z.trim()))return F("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ud559\uae09 \ucf54\ub4dc\uc785\ub2c8\ub2e4."),void B(!1);const e=(0,$.H9)(G.db,"users",o);await(0,$.mZ)(e,{classCode:z.trim()}),alert("\ud559\uae09 \ucf54\ub4dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),y(!1),q()}catch(e){F("\ud559\uae09 \ucf54\ub4dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{B(!1)}}else F("\ud559\uae09 \ucf54\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:W,style:{flex:1,padding:"12px",background:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",border:"none",borderRadius:"10px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:W?"not-allowed":"pointer",opacity:W?.7:1},children:W?"\ubcc0\uacbd \uc911...":"\ubcc0\uacbd"})]})]})}),j&&(0,L.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>{v(!1),q()},children:(0,L.jsxs)("div",{style:{background:"linear-gradient(145deg, #1a1a2e 0%, #0f0f23 100%)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",border:"2px solid #ef4444"},onClick:e=>e.stopPropagation(),children:[(0,L.jsx)("h3",{style:{color:"#ef4444",fontSize:"18px",fontWeight:"700",marginBottom:"16px"},children:"\u26a0\ufe0f \uacc4\uc815 \uc0ad\uc81c"}),(0,L.jsxs)("p",{style:{color:"#9ca3af",fontSize:"13px",marginBottom:"16px",lineHeight:1.6},children:["\uacc4\uc815\uc744 \uc0ad\uc81c\ud558\uba74 \ubaa8\ub4e0 \ub370\uc774\ud130\uac00 \uc601\uad6c\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uba70 \ubcf5\uad6c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\ub824\uba74 \uc544\ub798\uc5d0 ",(0,L.jsx)("span",{style:{color:"#ef4444",fontWeight:"600"},children:"'\uacc4\uc815\uc0ad\uc81c'"}),"\ub97c \uc785\ub825\ud558\uc138\uc694."]}),(0,L.jsx)("input",{type:"text",value:R,onChange:e=>_(e.target.value),placeholder:"\uacc4\uc815\uc0ad\uc81c",style:{width:"100%",padding:"14px",background:"#0f0f23",border:"2px solid #ef4444",borderRadius:"12px",color:"#e8e8ff",fontSize:"14px",marginBottom:"12px"}}),P&&(0,L.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginBottom:"12px"},children:P}),(0,L.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,L.jsx)("button",{onClick:()=>{v(!1),q()},style:{flex:1,padding:"12px",background:"#374151",border:"none",borderRadius:"10px",color:"#e8e8ff",fontSize:"14px",cursor:"pointer"},children:"\ucde8\uc18c"}),(0,L.jsx)("button",{onClick:async()=>{if("\uacc4\uc815\uc0ad\uc81c"===R){B(!0);try{const e=(0,$.H9)(G.db,"users",o);await(0,$.kd)(e),await(0,Fs.hG)(t),alert("\uacc4\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){"auth/requires-recent-login"===e.code?F("\ubcf4\uc548\uc744 \uc704\ud574 \ub2e4\uc2dc \ub85c\uadf8\uc778 \ud6c4 \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):F("\uacc4\uc815 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{B(!1)}}else F("'\uacc4\uc815\uc0ad\uc81c'\ub97c \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:W||"\uacc4\uc815\uc0ad\uc81c"!==R,style:{flex:1,padding:"12px",background:"\uacc4\uc815\uc0ad\uc81c"===R?"#ef4444":"#374151",border:"none",borderRadius:"10px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:W||"\uacc4\uc815\uc0ad\uc81c"!==R?"not-allowed":"pointer",opacity:W||"\uacc4\uc815\uc0ad\uc81c"!==R?.5:1},children:W?"\uc0ad\uc81c \uc911...":"\uc0ad\uc81c"})]})]})})]}):(0,L.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,L.jsx)("p",{className:"text-gray-400",children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})})}const qs=(0,a.lazy)(()=>s.e(771).then(s.bind(s,1771))),Gs=(0,a.lazy)(()=>s.e(393).then(s.bind(s,7393))),Us=(0,a.lazy)(()=>s.e(757).then(s.bind(s,6757))),Js=(0,a.lazy)(()=>s.e(864).then(s.bind(s,3864))),Vs=(0,a.lazy)(()=>Promise.resolve().then(s.bind(s,8164))),Ks=(0,a.lazy)(()=>s.e(175).then(s.bind(s,7175))),Xs=(0,a.lazy)(()=>s.e(920).then(s.bind(s,7920))),Ys=(0,a.lazy)(()=>Promise.resolve().then(s.bind(s,5967))),Zs=(0,a.lazy)(()=>s.e(826).then(s.bind(s,7826))),$s=(0,a.lazy)(()=>s.e(601).then(s.bind(s,1601))),ea=(0,a.lazy)(()=>s.e(438).then(s.bind(s,1438))),ta=(0,a.lazy)(()=>s.e(946).then(s.bind(s,1946))),sa=(0,a.lazy)(()=>s.e(266).then(s.bind(s,5266))),aa=(0,a.lazy)(()=>s.e(977).then(s.bind(s,9977))),na=(0,a.lazy)(()=>s.e(451).then(s.bind(s,9451))),ia=(0,a.lazy)(()=>s.e(559).then(s.bind(s,9940))),oa=(0,a.lazy)(()=>s.e(288).then(s.bind(s,288))),la=(0,a.lazy)(()=>s.e(613).then(s.bind(s,5613))),ra=(0,a.lazy)(()=>Promise.all([s.e(251),s.e(710)]).then(s.bind(s,710))),da=(0,a.lazy)(()=>s.e(512).then(s.bind(s,7512))),ca=(0,a.lazy)(()=>s.e(44).then(s.bind(s,8044))),xa=(0,a.lazy)(()=>s.e(5).then(s.bind(s,7005))),pa=(0,a.lazy)(()=>Promise.all([s.e(251),s.e(259)]).then(s.bind(s,5259))),ma=(0,a.lazy)(()=>s.e(358).then(s.bind(s,4358))),ua=(0,a.lazy)(()=>s.e(57).then(s.bind(s,4438))),ha=["/learning-games/omok","/learning-games/science","/learning-games/typing","/gonu-game","/auction","/court","/national-assembly","/music-room"],ga=e=>{let{message:t="\ub85c\ub529 \uc911..."}=e;return(0,L.jsx)(Ve.Cg,{message:t})},fa=e=>{let{children:t}=e;const{user:s,loading:a}=(0,i.As)(),o=(0,n.zy)();return a?(0,L.jsx)(ga,{}):s?t:(0,L.jsx)(n.C5,{to:"/login",state:{from:o},replace:!0})},ba=e=>{let{children:t}=e;const{user:s,userDoc:a,loading:o}=(0,i.As)(),l=(0,n.zy)();if(o)return(0,L.jsx)(ga,{});if(!s)return(0,L.jsx)(n.C5,{to:"/login",state:{from:l},replace:!0});return(null===a||void 0===a?void 0:a.isAdmin)||"admin"===(null===a||void 0===a?void 0:a.role)||(null===a||void 0===a?void 0:a.isSuperAdmin)?t:(0,L.jsx)(n.C5,{to:"/dashboard/tasks",replace:!0})},ya=e=>{let{children:t}=e;const{user:s,userDoc:a,loading:o}=(0,i.As)(),l=(0,n.zy)();if(o)return(0,L.jsx)(ga,{});if(!s)return(0,L.jsx)(n.C5,{to:"/login",state:{from:l},replace:!0});return(null===a||void 0===a?void 0:a.isTeacher)||(null===a||void 0===a?void 0:a.isAdmin)||(null===a||void 0===a?void 0:a.isSuperAdmin)?t:(0,L.jsx)(n.C5,{to:"/dashboard/tasks",replace:!0})};function ja(){const e=(0,n.Zp)(),t=(0,n.zy)(),{user:s,userDoc:o,loading:l,logout:r}=(0,i.As)(),[d,c]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),[m,u]=(0,a.useState)(window.innerWidth<768),[h,g]=(0,a.useState)(!1),{updateAvailable:f,updateServiceWorker:b,isOnline:y}=Je();(0,a.useEffect)(()=>{const e=document.createElement("link");return e.href="https://fonts.googleapis.com/css2?family=Jua&display=swap",e.rel="stylesheet",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]),(0,a.useEffect)(()=>{ha.some(e=>t.pathname.startsWith(e))&&!m&&p(!0)},[t.pathname,m]),(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<768;u(e),e&&c(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);const j=(0,a.useCallback)(()=>{c(e=>!e)},[]),v=(0,a.useCallback)(()=>{c(!1)},[]),w=(0,a.useCallback)(()=>{p(e=>!e)},[]);if(!l&&!s)return(0,L.jsx)(n.C5,{to:"/login",state:{from:t},replace:!0});if(l||s&&!o)return(0,L.jsx)(ga,{});if("/login"===t.pathname)return s?(0,L.jsx)(n.C5,{to:"/dashboard/tasks",replace:!0}):(0,L.jsx)(vs.default,{});if(!o.classCode)return(0,L.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:(0,L.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 max-w-sm w-full text-center",children:[(0,L.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl",children:"\u26a0\ufe0f"}),(0,L.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\ud559\uae09 \ucf54\ub4dc\uac00 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,L.jsx)("p",{className:"text-gray-500 mb-6",children:"\uc120\uc0dd\ub2d8\uaed8 \ud559\uae09 \ucf54\ub4dc\ub97c \ubc1b\uc544 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),(0,L.jsx)("button",{onClick:()=>r(),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors",children:"\ub85c\uadf8\uc544\uc6c3"})]})});const N=null===o||void 0===o?void 0:o.classCode;return(0,L.jsxs)("div",{className:"min-h-screen bg-[#0a0a12] text-gray-100 font-sans selection:bg-indigo-500/30 selection:text-indigo-200 flex",children:[(0,L.jsx)(q,{isOpen:d,onClose:v,isCollapsed:x}),(0,L.jsxs)("main",{className:"flex-1 min-w-0 md:min-h-screen relative bg-[#0a0a12] overflow-visible",children:[(0,L.jsx)(Be,{toggleSidebar:j,isMobile:m,isSidebarCollapsed:x,onToggleSidebarCollapse:w}),(0,L.jsx)("div",{className:"w-full pb-20 md:pb-4",children:(0,L.jsx)(a.Suspense,{fallback:(0,L.jsx)(ga,{message:"\ud398\uc774\uc9c0 \ub85c\ub529 \uc911..."}),children:(0,L.jsxs)(n.BV,{children:[(0,L.jsx)(n.qh,{path:"/dashboard/tasks",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ss,{})})}),(0,L.jsx)(n.qh,{path:"/my-assets",element:(0,L.jsx)(fa,{children:(0,L.jsx)(gs,{})})}),(0,L.jsx)(n.qh,{path:"/my-profile",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Hs,{})})}),(0,L.jsx)(n.qh,{path:"/coupon-goal",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ua,{})})}),(0,L.jsx)(n.qh,{path:"/learning-games/omok",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Gs,{})})}),(0,L.jsx)(n.qh,{path:"/learning-games/typing",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Js,{})})}),(0,L.jsx)(n.qh,{path:"/learning-games/science",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Us,{})})}),(0,L.jsx)(n.qh,{path:"/gonu-game",element:(0,L.jsx)(fa,{children:(0,L.jsx)(qs,{})})}),(0,L.jsx)(n.qh,{path:"/item-shop",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ds,{})})}),(0,L.jsx)(n.qh,{path:"/my-items",element:(0,L.jsx)(fa,{children:(0,L.jsx)(us,{})})}),(0,L.jsx)(n.qh,{path:"/item-market",element:(0,L.jsx)(fa,{children:(0,L.jsx)(js,{})})}),(0,L.jsx)(n.qh,{path:"/banking",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Ps,{})})}),(0,L.jsx)(n.qh,{path:"/stock-trading",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ia,{})})}),(0,L.jsx)(n.qh,{path:"/auction",element:(0,L.jsx)(fa,{children:(0,L.jsx)(xa,{})})}),(0,L.jsx)(n.qh,{path:"/real-estate",element:(0,L.jsx)(fa,{children:(0,L.jsx)(oa,{})})}),(0,L.jsx)(n.qh,{path:"/government",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ra,{})})}),(0,L.jsx)(n.qh,{path:"/national-assembly",element:(0,L.jsx)(fa,{children:(0,L.jsx)(la,{})})}),(0,L.jsx)(n.qh,{path:"/court",element:(0,L.jsx)(fa,{children:(0,L.jsx)(da,{})})}),(0,L.jsx)(n.qh,{path:"/police",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ca,{})})}),(0,L.jsx)(n.qh,{path:"/learning-board",element:(0,L.jsx)(fa,{children:(0,L.jsx)(ta,{})})}),(0,L.jsx)(n.qh,{path:"/learning-board/music-request",element:(0,L.jsx)(fa,{children:(0,L.jsx)(sa,{user:s})})}),(0,L.jsx)(n.qh,{path:"/music-room/:roomId",element:(0,L.jsx)(fa,{children:(0,L.jsx)(aa,{user:s})})}),(0,L.jsx)(n.qh,{path:"/student-request/:roomId",element:(0,L.jsx)(na,{})}),(0,L.jsx)(n.qh,{path:"/admin/app-settings",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"generalSettings"})})}),(0,L.jsx)(n.qh,{path:"/admin/task-management",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"taskManagement"})})}),(0,L.jsx)(n.qh,{path:"/admin/job-settings",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"jobSettings"})})}),(0,L.jsx)(n.qh,{path:"/admin/salary-settings",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"salarySettings"})})}),(0,L.jsx)(n.qh,{path:"/admin/class-members",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"memberManagement"})})}),(0,L.jsx)(n.qh,{path:"/admin/app-management",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ss,{adminTabMode:"appManagement"})})}),(0,L.jsx)(n.qh,{path:"/admin/coupon-transfer",element:(0,L.jsx)(ba,{children:(0,L.jsx)(ma,{})})}),(0,L.jsx)(n.qh,{path:"/admin/money-transfer",element:(0,L.jsx)(ba,{children:(0,L.jsx)(pa,{})})}),(0,L.jsx)(n.qh,{path:"/admin/activity-log",element:(0,L.jsx)(ba,{children:(0,L.jsx)(Ys,{})})}),(0,L.jsx)(n.qh,{path:"/admin/items",element:(0,L.jsx)(ba,{children:(0,L.jsx)(Vs,{})})}),(0,L.jsx)(n.qh,{path:"/admin/page",element:(0,L.jsx)(ba,{children:(0,L.jsx)(Ks,{})})}),(0,L.jsx)(n.qh,{path:"/admin-panel",element:(0,L.jsx)(ba,{children:(0,L.jsx)(Xs,{onClose:()=>e(-1),classCode:N})})}),(0,L.jsx)(n.qh,{path:"/admin/students",element:(0,L.jsx)(ya,{children:(0,L.jsx)(ea,{})})}),(0,L.jsx)(n.qh,{path:"/doctor",element:(0,L.jsx)(fa,{children:(0,L.jsx)(Zs,{})})}),(0,L.jsx)(n.qh,{path:"/recover-donations",element:(0,L.jsx)(fa,{children:(0,L.jsx)($s,{})})}),(0,L.jsx)(n.qh,{path:"/",element:(0,L.jsx)(n.C5,{to:"/dashboard/tasks",replace:!0})}),(0,L.jsx)(n.qh,{path:"*",element:(0,L.jsx)(n.C5,{to:"/dashboard/tasks",replace:!0})})]})})}),(0,L.jsx)("footer",{className:"hidden md:block py-8 text-center text-sm text-gray-400 font-medium",children:"\xa9 2025 \uc54c\ucc2c Corp. All rights reserved."})]}),(0,L.jsx)(Fe,{}),(0,L.jsx)(Ge,{}),f&&!h&&(0,L.jsx)(Ue,{onUpdate:b,onDismiss:()=>g(!0)}),!y&&(0,L.jsxs)("div",{className:"fixed top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 text-sm font-medium z-50 flex items-center justify-center gap-2",children:[(0,L.jsx)(Ke.A,{size:16}),"\uc624\ud504\ub77c\uc778 \uc0c1\ud0dc\uc785\ub2c8\ub2e4. \uc77c\ubd80 \uae30\ub2a5\uc774 \uc81c\ud55c\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,L.jsx)("style",{children:"\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\n        .font-jua { font-family: 'Jua', sans-serif; }\n        @keyframes slide-up {\n          from { transform: translateY(100%); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        .animate-slide-up { animation: slide-up 0.3s ease-out; }\n        @keyframes spin-slow {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        .animate-spin-slow { animation: spin-slow 2s linear infinite; }\n      "})]})}}}]);
//# sourceMappingURL=180.11df1984.chunk.js.map