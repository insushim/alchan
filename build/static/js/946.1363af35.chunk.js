"use strict";(self.webpackChunkinconomysu_class=self.webpackChunkinconomysu_class||[]).push([[946],{1946:(e,i,s)=>{s.r(i),s.d(i,{default:()=>u});var n=s(4919),a=s(5043),t=s(5016),d=s(791),l=s(5472),o=s(577),r=s(579);const c=e=>{if(!e)return"\ub0a0\uc9dc \uc815\ubcf4 \uc5c6\uc74c";try{return new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(i){return console.error("Error formatting date:",i),"\ub0a0\uc9dc \ud615\uc2dd \uc624\ub958"}},m=(e,i,s)=>{const{likes:n=0,dislikes:a=0,likedBy:t=[],dislikedBy:d=[]}=e,l=t.includes(s),o=d.includes(s);let r,c;if("like"===i){if(l)return 0;r=n-a,c=o?n+1-(a-1):n+1-a}else{if("dislike"!==i)return 0;if(o)return 0;r=n-a,c=l?n-1-(a+1):n-(a+1)}const m=Math.max(0,Math.floor(r/3));return Math.max(0,Math.floor(c/3))-m},u=()=>{const{userDoc:e,isAdmin:i,addCouponsToUser:s,loading:u}=(0,t.As)(),h=null===e||void 0===e?void 0:e.id,b=null===e||void 0===e?void 0:e.classCode,[v,p]=(0,a.useState)(null),[x,j]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[N,k]=(0,a.useState)({title:"",content:""}),[y,C]=(0,a.useState)(0),[B,H]=(0,a.useState)(""),[w,A]=(0,a.useState)(!1),[S,G]=(0,a.useState)(!1),[I,D]=(0,a.useState)(null),[E,M]=(0,a.useState)(""),[O,q]=(0,a.useState)(!1),J=(0,a.useMemo)(()=>b?(0,l.rJ)(d.db,"classes",b,"learningBoards"):null,[b]),V=(0,a.useCallback)(async()=>{if(!b)return[];const e=(0,l.rJ)(d.db,"classes",b,"learningBoards"),i=(0,l.P)(e,(0,l.My)("name"),(0,l.AB)(100));return(await(0,l.GG)(i)).docs.map(e=>(0,n.A)((0,n.A)({id:e.id},e.data()),{},{isHidden:"boolean"===typeof e.data().isHidden&&e.data().isHidden}))},[b]),{data:F=[],loading:P,refetch:Z}=(0,o.nm)(V,{interval:3e5,enabled:!!b,deps:[b]}),T=(0,a.useCallback)(async()=>{if(!v||!b)return[];const e=(0,l.rJ)(d.db,"classes",b,"learningBoards",v.id,"posts"),i=(0,l.P)(e,(0,l.My)("timestamp","desc"),(0,l.AB)(100));return(await(0,l.GG)(i)).docs.map(e=>{var i;return(0,n.A)((0,n.A)({id:e.id},e.data()),{},{adminCouponGiven:"boolean"===typeof e.data().adminCouponGiven&&e.data().adminCouponGiven,coupons:Number(e.data().coupons)||0,likes:Number(e.data().likes)||0,dislikes:Number(e.data().dislikes)||0,likedBy:Array.isArray(e.data().likedBy)?e.data().likedBy:[],dislikedBy:Array.isArray(e.data().dislikedBy)?e.data().dislikedBy:[],timestamp:null!==(i=e.data().timestamp)&&void 0!==i&&i.toDate?e.data().timestamp.toDate().toISOString():(new Date).toISOString()})})},[v,b]),{data:_=[],loading:K,refetch:L}=(0,o.nm)(T,{interval:3e5,enabled:!!v&&!!b,deps:[null===v||void 0===v?void 0:v.id,b]});if((0,a.useEffect)(()=>{q(v&&!f||(w||S))},[v,f,w,S]),u)return(0,r.jsx)("div",{className:"info-message",children:"\ud559\uc2b5 \uac8c\uc2dc\ud310 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub529 \uc911..."});if(!e)return(0,r.jsx)("div",{className:"info-message",children:"\uac8c\uc2dc\ud310\uc744 \uc774\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."});const R=(0,a.useMemo)(()=>i&&i(),[i]);if(!b&&!R)return(0,r.jsx)("div",{className:"info-message",children:"\uac8c\uc2dc\ud310\uc744 \uc774\uc6a9\ud558\ub824\uba74 \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."});if(b&&P)return(0,r.jsxs)("div",{className:"info-message",children:["\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911... (\ud559\uae09: ",b,")"]});if(v&&K)return(0,r.jsxs)("div",{className:"info-message",children:["'",v.name,"' \uac8c\uc2dc\uae00 \ub85c\ub529 \uc911... (\ud559\uae09: ",b,")"]});if(R&&!b)return(0,r.jsx)("div",{className:"info-message",children:"\uad00\ub9ac\uc790\ub2d8, \ud604\uc7ac \ud559\uae09 \ucf54\ub4dc\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc544 \uac8c\uc2dc\ud310 \ub0b4\uc6a9\uc744 \ubcfc \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud504\ub85c\ud544\uc5d0\uc11c \ud559\uae09 \ucf54\ub4dc\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694."});const U=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=F.find(i=>i.id===e),n=!(!R||"boolean"!==typeof R)&&R;s&&(i||!s.isHidden||n)?(p(s),g(!1),i||G(!1)):s&&s.isHidden&&!n&&!i?(alert("\uc774 \uac8c\uc2dc\ud310\uc740 \ud604\uc7ac \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),p(null)):p(null)},z=()=>{R&&A(e=>(console.log("[Debug] Admin panel toggle:",!e),!e))},Q=async function(e,i,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!b||!h)return;const t=(0,l.H9)(d.db,"classes",b,"learningBoards",e,"posts",i);try{await(0,l.c4)(d.db,async e=>{var i,d;const o=await e.get(t);if(!o.exists())throw"\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.";const r=o.data(),c={};let u=0;const b=null===(i=r.likedBy)||void 0===i?void 0:i.includes(h),v=null===(d=r.dislikedBy)||void 0===d?void 0:d.includes(h);if("like"===n){if(b)return;c.likedBy=(0,l.hq)(h),c.likes=(0,l.GV)(1),v&&(c.dislikedBy=(0,l.C3)(h),c.dislikes=(0,l.GV)(-1)),u=m(r,"like",h)}else if("dislike"===n){if(v)return;c.dislikedBy=(0,l.hq)(h),c.dislikes=(0,l.GV)(1),b&&(c.likedBy=(0,l.C3)(h),c.likes=(0,l.GV)(-1)),u=m(r,"dislike",h)}else{if(!("adminCoupon"===n&&R&&"number"===typeof a&&a>0))return;if(r.adminCouponGiven)return void alert("\uc774 \uac8c\uc2dc\uae00\uc5d0\ub294 \uc774\ubbf8 \uad00\ub9ac\uc790 \ucfe0\ud3f0\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");c.adminCouponGiven=!0,u=a}0!==u&&(c.coupons=(0,l.GV)(u)),c.updatedAt=(0,l.O5)(),e.update(t,c),0!==u&&r.authorId&&r.authorId!==h&&s&&s(r.authorId,u)}),L(),"adminCoupon"===n&&R&&(alert("\uac8c\uc2dc\uae00(ID: ".concat(i.slice(-6),")\uc5d0 \uad00\ub9ac\uc790 \ucfe0\ud3f0 ").concat(a,"\uac1c\uac00 \uc9c0\uae09 \ucc98\ub9ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),C(0))}catch(o){console.error("Error updating post ".concat(n,":"),o),alert("\uac8c\uc2dc\uae00 ".concat(n," \ucc98\ub9ac \uc911 \uc624\ub958: ").concat(o.message))}},W=(e,i,s)=>Q(e,i,"adminCoupon",s),X=()=>{D(null),M("")},Y=e=>{M(e.target.value)},$=async e=>{if(e.preventDefault(),!I||!b||!R)return;const i=E.trim();if(!i)return alert("\uac8c\uc2dc\ud310 \uc774\ub984\uc740 \ube44\uc6cc\ub458 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(F.some(e=>e.id!==I&&e.name===i))return alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\ub984\uc785\ub2c8\ub2e4.");const s=(0,l.H9)(d.db,"classes",b,"learningBoards",I);try{await(0,l.mZ)(s,{name:i,updatedAt:(0,l.O5)()}),Z(),X()}catch(n){console.error("Error updating board name:",n),alert("\uac8c\uc2dc\ud310 \uc774\ub984 \uc218\uc815 \uc624\ub958.")}},ee=(F||[]).filter(e=>!e.isHidden),ie=F||[],se="learning-board-container ".concat(O?"full-width-mode":""," ").concat(w&&R?"admin-panel-active":"");return(0,r.jsxs)("div",{className:se,children:[(0,r.jsxs)("div",{className:"main-board",children:[R&&(0,r.jsx)("button",{className:"admin-panel-toggle-btn",onClick:z,children:w?"\uad00\ub9ac\uc790 \ub2eb\uae30":"\uad00\ub9ac\uc790 \uc5f4\uae30"}),(0,r.jsxs)("h1",{children:["\ud559\uc2b5 \uac8c\uc2dc\ud310 ",b&&"(\ud559\uae09: ".concat(b,")")]}),(0,r.jsxs)("div",{className:"board-actions",children:[(0,r.jsx)("button",{className:"write-btn ".concat(x&&f?"active":""),onClick:()=>{b||R?(j(!0),g(!0),p(null),G(!1)):alert("\uae00\uc744 \uc791\uc131\ud560 \ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},children:"\uae00\uc4f0\uae30"}),(0,r.jsx)("button",{className:"view-btn ".concat(!x&&f?"active":""),onClick:()=>{b||R?(j(!1),g(!0),p(null),G(!1)):alert("\uae00\uc744 \uc870\ud68c\ud560 \ud559\uae09\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")},children:"\uae00\ubcf4\uae30"}),R&&(0,r.jsxs)("button",{className:"hidden-boards-toggle-btn ".concat(S?"active":""),onClick:()=>{if(!R)return;const e=!S;G(e),e&&(g(!1),p(null),j(!1))},children:["\uc228\uae40 \uad00\ub9ac (",F.filter(e=>e.isHidden).length,")"]})]}),(0,r.jsxs)("div",{className:"board-content-area",children:[f&&!S&&(0,r.jsxs)("div",{className:"board-selection",children:[(0,r.jsx)("h2",{children:x?"\uae00 \uc791\uc131\ud560 \uac8c\uc2dc\ud310 \uc120\ud0dd":"\uc870\ud68c\ud560 \uac8c\uc2dc\ud310 \uc120\ud0dd"}),(0,r.jsx)("div",{className:"board-buttons-container",children:ee.length>0?ee.map(e=>(0,r.jsx)("div",{className:"board-button-item",children:(0,r.jsxs)("button",{className:"board-btn ".concat((null===v||void 0===v?void 0:v.id)===e.id?"selected":""),onClick:()=>U(e.id,!1),title:e.isHidden?"".concat(e.name," (\uc228\uae40)"):e.name,children:[(0,r.jsx)("span",{className:"board-name",children:e.name}),R&&e.isHidden&&(0,r.jsx)("span",{className:"hidden-icon",title:"\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310",children:"\ud83d\udc41\ufe0f"})]})},e.id)):(0,r.jsx)("p",{className:"info-message small",children:P?"\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911...":"\ud45c\uc2dc\ud560 \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]}),S&&R&&(0,r.jsxs)("div",{className:"hidden-boards-list admin-section",children:[(0,r.jsx)("h2",{children:"\uc228\uae40 \uac8c\uc2dc\ud310 \uad00\ub9ac \ubc0f \ubcf4\uae30/\uc4f0\uae30"}),0===ie.length&&(0,r.jsx)("p",{className:"info-message small",children:P?"\uac8c\uc2dc\ud310 \ubaa9\ub85d \ub85c\ub529 \uc911...":"\uc0dd\uc131\ub41c \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,r.jsx)("div",{className:"board-buttons-container",children:ie.map(e=>(0,r.jsx)("div",{className:"board-button-item",children:(0,r.jsxs)("button",{className:"board-btn ".concat((null===v||void 0===v?void 0:v.id)===e.id?"selected":""," ").concat(e.isHidden?"hidden-board-for-admin":""),onClick:()=>U(e.id,!0),title:e.isHidden?"".concat(e.name," (\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310)"):e.name,children:[e.isHidden?"\ud83d\udd12":"\ud83d\udcc2"," ",e.name]})},"hidden-view-".concat(e.id)))}),v&&(0,r.jsxs)("div",{className:"board-actions",style:{marginTop:"1rem",marginBottom:"1rem"},children:[(0,r.jsxs)("button",{className:"write-btn",onClick:()=>j(!0),children:["'",v.name,"'\uc5d0 \uae00\uc4f0\uae30"]}),(0,r.jsxs)("button",{className:"view-btn",onClick:()=>j(!1),children:["'",v.name,"' \uae00\ubcf4\uae30"]})]}),(0,r.jsx)("h3",{children:"\uc228\uae40/\ubcf5\uad6c/\uc0ad\uc81c \ucc98\ub9ac:"}),0===F.length?(0,r.jsx)("p",{className:"info-message small",children:"\uad00\ub9ac\ud560 \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,r.jsx)("ul",{children:F.sort((e,i)=>e.name.localeCompare(i.name)).map(e=>(0,r.jsxs)("li",{className:"hidden-board-item ".concat(e.isHidden?"item-is-hidden":"item-is-visible"),children:[(0,r.jsxs)("span",{children:[e.name," (",e.isHidden?"\uc228\uae40 \uc0c1\ud0dc":"\uacf5\uac1c \uc0c1\ud0dc",")"]}),(0,r.jsxs)("div",{className:"hidden-board-actions",children:[e.isHidden?(0,r.jsx)("button",{className:"restore-board-btn action-btn",title:"".concat(e.name," \ubcf5\uad6c"),onClick:()=>(async e=>{if(!R||!b)return;const i=(0,l.H9)(d.db,"classes",b,"learningBoards",e);try{await(0,l.mZ)(i,{isHidden:!1,updatedAt:(0,l.O5)()}),Z()}catch(s){console.error("Error restoring board:",s)}})(e.id),children:"\u2705 \uacf5\uac1c\ub85c"}):(0,r.jsx)("button",{className:"hide-board-btn action-btn",title:"".concat(e.name," \uc228\uae30\uae30"),onClick:()=>(async e=>{if(!R||!b)return;const i=(0,l.H9)(d.db,"classes",b,"learningBoards",e);try{await(0,l.mZ)(i,{isHidden:!0,updatedAt:(0,l.O5)()}),Z(),v&&v.id===e&&p(null)}catch(s){console.error("Error hiding board:",s)}})(e.id),children:"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f \uc228\uae30\uae30"}),(0,r.jsx)("button",{className:"delete-board-btn action-btn",title:"".concat(e.name," \uc601\uad6c \uc0ad\uc81c"),onClick:()=>(async e=>{if(!R||!b)return;const i=F.find(i=>i.id===e);if(window.confirm("'".concat(null===i||void 0===i?void 0:i.name,"' \uac8c\uc2dc\ud310\uacfc \ubaa8\ub4e0 \uac8c\uc2dc\uae00\uc744 \uc601\uad6c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const i=(0,l.H9)(d.db,"classes",b,"learningBoards",e),s=(0,l.rJ)(i,"posts"),n=await(0,l.GG)(s),a=(0,l.wP)(d.db);n.docs.forEach(e=>a.delete(e.ref)),a.delete(i),await a.commit(),Z(),v&&v.id===e&&p(null)}catch(s){console.error("Error deleting board:",s),alert("\uac8c\uc2dc\ud310 \uc0ad\uc81c \uc624\ub958.")}})(e.id),children:"\u274c \uc0ad\uc81c"})]})]},"manage-".concat(e.id)))})]}),x&&v&&(!v.isHidden||R)&&(0,r.jsxs)("div",{className:"post-form-container",children:[(0,r.jsxs)("h2",{children:[v.name,"\uc5d0 \uae00\uc4f0\uae30"," ",v.isHidden?"(\uc228\uae40 \uac8c\uc2dc\ud310)":""]}),(0,r.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),!v||!b||!h)return void alert("\uae00\uc744 \uc791\uc131\ud560 \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud558\uac70\ub098 \ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.");if(v.isHidden&&!R)return void alert("\uc228\uaca8\uc9c4 \uac8c\uc2dc\ud310\uc5d0\ub294 \uae00\uc744 \uc791\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!N.title.trim()||!N.content.trim())return void alert("\uc81c\ubaa9\uacfc \ub0b4\uc6a9\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const s={title:N.title,content:N.content,author:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.nickname)||"\uc775\uba85",authorId:h,likes:0,dislikes:0,likedBy:[],dislikedBy:[],coupons:0,timestamp:(0,l.O5)(),adminCouponGiven:!1,classCode:b};try{const e=(0,l.rJ)(d.db,"classes",b,"learningBoards",v.id,"posts");await(0,l.gS)(e,s),L(),k({title:"",content:""}),alert("\uac8c\uc2dc\uae00\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(n){console.error("Error submitting post:",n),alert("\uac8c\uc2dc\uae00 \uc81c\ucd9c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(n.message))}},className:"post-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"\uc81c\ubaa9"}),(0,r.jsx)("input",{type:"text",value:N.title,onChange:e=>k((0,n.A)((0,n.A)({},N),{},{title:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,r.jsx)("textarea",{value:N.content,onChange:e=>k((0,n.A)((0,n.A)({},N),{},{content:e.target.value})),required:!0,rows:"8"})]}),(0,r.jsx)("button",{type:"submit",className:"submit-btn",children:"\uac8c\uc2dc\ud558\uae30"})]})]}),x&&v&&v.isHidden&&!R&&!S&&(0,r.jsx)("p",{className:"info-message",children:"\uc120\ud0dd\ud55c \uac8c\uc2dc\ud310\uc740 \uc228\uaca8\uc838 \uc788\uc5b4 \uae00\uc744 \uc791\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),x&&!v&&(0,r.jsx)("p",{className:"info-message",children:"\uae00\uc744 \uc791\uc131\ud560 \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694. (\uc0c1\ub2e8 \ubaa9\ub85d\uc5d0\uc11c \uc120\ud0dd)"}),!x&&v&&(!v.isHidden||R&&S)&&(0,r.jsxs)("div",{className:"posts-container",children:[(0,r.jsxs)("h2",{children:[v.name," \uae00 \ubaa9\ub85d"," ",v.isHidden?"(\uc228\uae40 \uac8c\uc2dc\ud310 - \uad00\ub9ac\uc790 \ubdf0)":""]}),K?(0,r.jsx)("p",{className:"info-message small",children:"\uac8c\uc2dc\uae00 \ub85c\ub529 \uc911..."}):0===((null===_||void 0===_?void 0:_.length)||0)?(0,r.jsx)("p",{className:"no-posts",children:"\uc544\uc9c1 \uc791\uc131\ub41c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,r.jsx)("div",{className:"posts-list",children:_.map(e=>{var i,s,n,a,t,d;return(0,r.jsxs)("div",{className:"post-card",children:[(0,r.jsx)("h3",{children:e.title}),(0,r.jsxs)("div",{className:"post-meta",children:[(0,r.jsxs)("span",{children:["\uc791\uc131\uc790: ",e.author||"\uc54c \uc218 \uc5c6\uc74c"]}),(0,r.jsxs)("span",{children:["\uc791\uc131\uc77c: ",c(e.timestamp)]})]}),(0,r.jsx)("p",{className:"post-content",children:e.content}),(0,r.jsxs)("div",{className:"post-stats",children:[(0,r.jsxs)("div",{className:"likes-container",children:[(0,r.jsxs)("button",{className:"like-btn ".concat(null!==(i=e.likedBy)&&void 0!==i&&i.includes(h)?"active":""," ").concat(e.authorId===h?"disabled":""),onClick:()=>{return i=v.id,s=e.id,Q(i,s,"like");var i,s},disabled:(null===(s=e.likedBy)||void 0===s?void 0:s.includes(h))||(null===(n=e.dislikedBy)||void 0===n?void 0:n.includes(h))||e.authorId===h,children:["\ud83d\udc4d \uc88b\uc544\uc694 ",e.likes||0]}),(0,r.jsxs)("button",{className:"dislike-btn ".concat(null!==(a=e.dislikedBy)&&void 0!==a&&a.includes(h)?"active":""," ").concat(e.authorId===h?"disabled":""),onClick:()=>{return i=v.id,s=e.id,Q(i,s,"dislike");var i,s},disabled:(null===(t=e.likedBy)||void 0===t?void 0:t.includes(h))||(null===(d=e.dislikedBy)||void 0===d?void 0:d.includes(h))||e.authorId===h,children:["\ud83d\udc4e \uc2eb\uc5b4\uc694 ",e.dislikes||0]})]}),(0,r.jsxs)("div",{className:"coupon-info",children:[(0,r.jsxs)("span",{children:["\ud68d\ub4dd \ucfe0\ud3f0: ",e.coupons||0,"\uac1c"]}),(0,r.jsxs)("span",{children:["\uc2e4\ud6a8 \uc88b\uc544\uc694:"," ",(e.likes||0)-(e.dislikes||0)]}),e.adminCouponGiven&&!R&&(0,r.jsx)("span",{className:"admin-verified-badge",title:"\uad00\ub9ac\uc790\uac00 \ud655\uc778\ud558\uace0 \ucfe0\ud3f0\uc744 \uc9c0\uae09\ud55c \uae00\uc785\ub2c8\ub2e4.",children:"\u2728 \uad00\ub9ac\uc790 \ud655\uc778 \uc644\ub8cc"})]}),R&&(0,r.jsxs)("div",{className:"admin-coupon-controls",children:[(0,r.jsxs)("h4",{children:["\uad00\ub9ac\uc790 \ucfe0\ud3f0 \uc9c0\uae09 (\uae00 ID: ",e.id.slice(-4),")"]}),e.adminCouponGiven?(0,r.jsx)("p",{className:"coupon-given-message",children:"\u2705 \uc774 \uae00\uc5d0\ub294 \uad00\ub9ac\uc790 \ucfe0\ud3f0\uc774 \uc774\ubbf8 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"coupon-buttons",children:[1,3,5].map(i=>(0,r.jsxs)("button",{onClick:()=>W(v.id,e.id,i),children:["+",i," \ucfe0\ud3f0"]},i))}),(0,r.jsxs)("div",{className:"custom-coupon",children:[(0,r.jsx)("input",{type:"number",min:"1",value:0===y?"":y,onChange:e=>{const i=parseInt(e.target.value);C(Number.isNaN(i)?0:i)},placeholder:"\uc9c1\uc811 \uc785\ub825"}),(0,r.jsx)("button",{onClick:()=>W(v.id,e.id,y),disabled:y<=0,children:"\uc9c0\uae09"})]})]})]})]})]},e.id)})})]}),!x&&v&&v.isHidden&&!R&&!S&&(0,r.jsx)("p",{className:"info-message",children:"\uc774 \uac8c\uc2dc\ud310\uc740 \ud604\uc7ac \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),!x&&!v&&!S&&!f&&(0,r.jsx)("p",{className:"info-message",children:"\uac8c\uc2dc\ud310 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc0c1\ub2e8\uc758 '\uae00\uc4f0\uae30' \ub610\ub294 '\uae00\ubcf4\uae30' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})]})]}),R&&(0,r.jsxs)("div",{className:"admin-panel ".concat(w?"visible":""),style:{right:w?"0px":"-100vw",transition:"right 0.4s ease-in-out",display:w?"block":"none",visibility:w?"visible":"hidden",opacity:w?1:0},children:[(0,r.jsx)("button",{className:"admin-panel-close-btn",onClick:z,children:"\xd7"}),(0,r.jsx)("h2",{children:"\uad00\ub9ac\uc790 \uae30\ub2a5"}),(0,r.jsxs)("div",{className:"admin-section board-management",children:[(0,r.jsx)("h3",{children:"\uac8c\uc2dc\ud310 \uad00\ub9ac (\uc0dd\uc131/\uc774\ub984\ubcc0\uacbd)"}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!R||!b||!J)return void alert("\uac8c\uc2dc\ud310\uc744 \ucd94\uac00\ud560 \uc218 \uc788\ub294 \uc870\uac74\uc774 \ucda9\uc871\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. (\uad00\ub9ac\uc790, \ud559\uae09\ucf54\ub4dc, \uac8c\uc2dc\ud310 \ucc38\uc870 \ud655\uc778)");const i=B.trim();if(!i)return alert("\uac8c\uc2dc\ud310 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(F.some(e=>e.name===i))return alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uac8c\uc2dc\ud310 \uc774\ub984\uc785\ub2c8\ub2e4.");try{await(0,l.gS)(J,{name:i,isHidden:!1,createdAt:(0,l.O5)(),classCode:b}),Z(),H("")}catch(s){console.error("Error adding board:",s),alert("\uac8c\uc2dc\ud310 \ucd94\uac00 \uc624\ub958.")}},className:"add-board-form",children:[(0,r.jsx)("input",{type:"text",value:B,onChange:e=>H(e.target.value),placeholder:"\uc0c8 \uac8c\uc2dc\ud310 \uc774\ub984",required:!0}),(0,r.jsx)("button",{type:"submit",className:"add-board-btn",children:"\ucd94\uac00"})]}),(0,r.jsx)("ul",{className:"admin-board-list",children:[...F].sort((e,i)=>(e.name||"").localeCompare(i.name||"")).map(e=>(0,r.jsx)("li",{className:"admin-board-manage-item ".concat(e.isHidden?"hidden":""),children:I===e.id?(0,r.jsxs)("form",{onSubmit:$,className:"edit-board-form",children:[(0,r.jsx)("input",{type:"text",value:E,onChange:Y,autoFocus:!0}),(0,r.jsx)("button",{type:"submit",className:"save-board-btn action-btn",children:"\ud83d\udcbe"}),(0,r.jsx)("button",{type:"button",className:"cancel-edit-btn action-btn",onClick:X,children:"\u21a9\ufe0f"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[e.name," ",e.isHidden?"(\uc228\uae40)":""]}),(0,r.jsx)("div",{className:"admin-board-item-actions",children:(0,r.jsx)("button",{className:"edit-board-btn action-btn",title:"".concat(e.name," \uc774\ub984 \uc218\uc815"),onClick:()=>(e=>{D(e.id),M(e.name)})(e),children:"\u270f\ufe0f"})})]})},e.id))})]}),(0,r.jsxs)("div",{className:"admin-section admin-stats",children:[(0,r.jsx)("h3",{children:"\ud1b5\uacc4"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["\ucd1d \uac8c\uc2dc\ud310 (\uacf5\uac1c): ",F.filter(e=>!e.isHidden).length,"\uac1c"]}),(0,r.jsxs)("li",{children:["\ucd1d \uac8c\uc2dc\ud310 (\uc228\uae40): ",F.filter(e=>e.isHidden).length,"\uac1c"]}),(0,r.jsxs)("li",{children:["(\uc120\ud0dd\ub41c \uac8c\uc2dc\ud310) \ucd1d \uac8c\uc2dc\uae00: ",(null===_||void 0===_?void 0:_.length)||0," \uac1c"]}),(0,r.jsxs)("li",{children:["(\uc120\ud0dd\ub41c \uac8c\uc2dc\ud310) \ucd1d \ud68d\ub4dd \ucfe0\ud3f0:"," ",(_||[]).reduce((e,i)=>e+(i.coupons||0),0)," ","\uac1c"]})]})]})]})]})}}}]);
//# sourceMappingURL=946.1363af35.chunk.js.map